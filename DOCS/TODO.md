# TODO

- [] mm_per_unit -> mmPerUnit
	- use it
- support layer as variable
- BUG: empty path in interior collection of paths
- make layers match export function
```
const layers = {
  
  "interior": "#002d00ff",
  
  "B.Cu": "#ff4c007f", 
  "F.Cu": "#ff8c00cc",
  
  "B.Mask": "#00000000",
  "F.Mask": "#00000000",

  "B.Silk": "#00000000",
  "F.Silk": "#00000000",

  "drills": "",
  
  "padLabels": "#ffff99e5",
  "componentLabels": "#00e5e5e5",
}
```
- [x] input is broken
- add visual cue to menu tab
- footprint processing is slow
	- currently generate shapes with ast analysis
	- turning pathdata string into points could help
- generalize astAnalysis
	- if name is being called restructures call as such
	- name([old params], staticInfo)
	- input: function names
	- output: { from, to, snippet }
- export
	- [x] gerber
	- [ ] kicad
	- [ ] kicad component
- import
	- [ ] kicad
- [x] background color
- [ ] silkscreen
- [ ] path drawing gui
	- [x] path selection
	- https://github.com/hackclub/sprig/blob/main/codemirror/editors.js
	- https://codemirror.net/examples/decoration/
	- handles for 
		- cubics
		- fillets
		- chamfers
		- points
	- toggle between above
	- cubic spline control point handling
- [ ] handle infinite loops
	- https://blog.replit.com/infinite-loops
	- https://github.com/facebook/react/blob/main/scripts/babel/transform-prevent-infinite-loops.js
- better import interface
	- component imports
		- [ ] json
		- [ ] kicad_module
		- [ ] svg
			- [ ] options for setting scale of svg
			- [ ] choose to import as svg or component
	- file import
		- [ ] js
- [ ] svg export flipping
- [ ] text
	- [ ] silkscreen
	- [ ] better componentLabels
	- [ ] better padLabels
	- [ ] if "string" is passed to add make it text
- [ ] soldering masks
- [ ] back layer component adding
- [ ] add transform widget for selected components
	- [ ] translate
	- [ ] rotate
	- [ ] flip
- [ ] publish rico's documentation
- [ ] add versioning
	- publish old versions
	- add metadata to top of file

- BUGS
	- [ ] fix ast analysis bug (slice checking)
	- [ ] "string" to add
- [x] soldering masks
- [x] back layer component adding

---------------------------------------

- [ ] gerber export
- [ ] handle infinite loops
	- use timeout to check if first run is too slow
- [ ] add background color
- [ ] silkscreen
- [ ] incremental parser and incremental evaluator
- [ ] static vs dynamic analysis
	- advantage of static analysis is that manipulations that come from graphical interactions are more straightforward if we know what structure a piece of data has to have. For example consider a component which could be an object returned by a function versus one which has to be static json. If we had a component editor drawing tool then the components which are objects won't be manipulatable.
	- the obvious advantage of dynamic analysis is that we could have a function which makes a component we can place from the toolbox menu, for example a variable pin header
		- we could possibly recreate this with smart component imports or json generators
	- easier to copy paste components when we know they are always self contained 
	- I want the value of a term for rendering and the location for editing
	- If I want to edited while preserving parameterization then I need to be context aware
		- For example, if a component is generated by a function I can't manipulate it in a graphical component editor
		- I could replace the function call but that could be confusing, also ends up being similar to just using a json generator
	- what I want to do (only option really) is support programmatic values always, graphical manipulations sometimes
	- example, layer colors
		```
			"interior": `#002d${"00"}ff`,
	    "B.Cu": "#ff4c007f", 	
	  ```
	  If I do this on eval then I could show the color for interior in the GUI but only make B.Cu editable.
	  eval can't handle comments though

	  If I do it with static analysis I can only show B.Cu as editable
	- could check to evaluate components by stringifying obj
	- board.components({ }) vs defineComponents({ })
	- board.add takes json, obj, or string of component defined in board.components
- [ ] one principle is to privilege plain data structures
	- geogram over gram
	- json over special object
	- plain object over class
- [ ] Things that want GUIs
	- [ ] path
	- [ ] layer and color picker
	- [ ] component editor
	- [ ] component import and search
- [ ] import options on drag and drop upload of components
	- [ ] transform: translate, scale, rotate
- [ ] default background color
- [ ] if limits is number just make it padding
- [ ] holes
- [ ] dragging in ternary adds extra plus
- [ ] dragging when something highlighted causes issues
- [ ] make new path gui
- [ ] remove
	- [x] storedPCB
	- [x] addTranslateHandle
- [x] xmlline from svg import
- [ ] svg export flipping
- [ ] path
	- handle types
		- pt
		- fillet
		- chamfer
		- bezier (2 handles)
		- turnForward?
		- vec?
	- should be able to do this for any pt
- [ ] preview path
- [?] change coordinate system of components
- [x] dropped svgs turn into components
- [ ] make README nice and informative
- [ ] better documentation
- [ ] render components directly from board object
	- don't squash into layers
	- this allows people to click components and pads
- [x] gui for layer menu
	- color picker
- [x] better snap to grid control
- [x] clean up/decide what `path` returns and what `addShape` and `addWire` take
- [x] adaptive grid option
- [ ] render paths (not just fills/shapes)
	- add path to board
- [ ] ability to create wires from gui
- [ ] more graphical handles
	- rotating (could do on placement)
	- deleting components (?)
- [ ] infer constraints when drawing
- [x] make geogram use `[x, y]` vs `{ x, y }` internally
- [ ] create gram class for fluid programming
- [ ] net lists
- [ ] autorouting
- [ ] copper fills
- [ ] make it work in firefox
- [x] leave point on mouse up, if dragged don't leave point
- [ ] better import menu
	- import from component from json
	- import component libraries
- [ ] select multiple points at once
- [ ] don't show all pts on screen at once
- [ ] better path gui
	- [ ] show where path would be when editting
	- [ ] don't show points on path unless path selected
- [ ] select path from gui
- [ ] clear selection box better
- [ ] when dragging screen and triggering out drag continues on re-entry
- [ ] indent new points properly
- [ ] kicad components sometimes drop text in program and aren't converted
- [ ] add visual cue when uploading something
	- [ ] js
	- [ ] json component
	- [ ] svg ?
	- [ ] kicad_comp
- [ ] add svg uploading
- [ ] export/import
	- [ ] kicad
	- [ ] eagle
	- [ ] gerber
- [ ] clean up code
	- remove translate handle code (`pt`s superseded)
- [ ] should component layer be specified in add or in footprint description
- [ ] preview paths when drawing