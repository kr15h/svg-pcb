(function(){const Lt=document.createElement("link").relList;if(Lt&&Lt.supports&&Lt.supports("modulepreload"))return;for(const rt of document.querySelectorAll('link[rel="modulepreload"]'))mt(rt);new MutationObserver(rt=>{for(const St of rt)if(St.type==="childList")for(const It of St.addedNodes)It.tagName==="LINK"&&It.rel==="modulepreload"&&mt(It)}).observe(document,{childList:!0,subtree:!0});function ve(rt){const St={};return rt.integrity&&(St.integrity=rt.integrity),rt.referrerpolicy&&(St.referrerPolicy=rt.referrerpolicy),rt.crossorigin==="use-credentials"?St.credentials="include":rt.crossorigin==="anonymous"?St.credentials="omit":St.credentials="same-origin",St}function mt(rt){if(rt.ep)return;rt.ep=!0;const St=ve(rt);fetch(rt.href,St)}})();const aS="modulepreload",hS=function(le){return"/"+le},mf={},uS=function(Lt,ve,mt){return!ve||ve.length===0?Lt():Promise.all(ve.map(rt=>{if(rt=hS(rt),rt in mf)return;mf[rt]=!0;const St=rt.endsWith(".css"),It=St?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${rt}"]${It}`))return;const Te=document.createElement("link");if(Te.rel=St?"stylesheet":aS,St||(Te.as="script",Te.crossOrigin=""),Te.href=rt,document.head.appendChild(Te),St)return new Promise((Pr,ci)=>{Te.addEventListener("load",Pr),Te.addEventListener("error",()=>ci(new Error(`Unable to preload CSS for ${rt}`)))})})).then(()=>Lt())};(function(){const le=document.createElement("link").relList;if(le&&le.supports&&le.supports("modulepreload"))return;for(const mt of document.querySelectorAll('link[rel="modulepreload"]'))ve(mt);new MutationObserver(mt=>{for(const rt of mt)if(rt.type==="childList")for(const St of rt.addedNodes)St.tagName==="LINK"&&St.rel==="modulepreload"&&ve(St)}).observe(document,{childList:!0,subtree:!0});function Lt(mt){const rt={};return mt.integrity&&(rt.integrity=mt.integrity),mt.referrerpolicy&&(rt.referrerPolicy=mt.referrerpolicy),mt.crossorigin==="use-credentials"?rt.credentials="include":mt.crossorigin==="anonymous"?rt.credentials="omit":rt.credentials="same-origin",rt}function ve(mt){if(mt.ep)return;mt.ep=!0;const rt=Lt(mt);fetch(mt.href,rt)}})();const cS="modulepreload",pS=function(le){return"/"+le},Of={},dS=function(le,Lt,ve){return!Lt||Lt.length===0?le():Promise.all(Lt.map(mt=>{if(mt=pS(mt),mt in Of)return;Of[mt]=!0;const rt=mt.endsWith(".css"),St=rt?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${mt}"]${St}`))return;const It=document.createElement("link");if(It.rel=rt?"stylesheet":cS,rt||(It.as="script",It.crossOrigin=""),It.href=mt,document.head.appendChild(It),rt)return new Promise((Te,Pr)=>{It.addEventListener("load",Te),It.addEventListener("error",()=>Pr(new Error(`Unable to preload CSS for ${mt}`)))})})).then(()=>le())};var fS=(le,Lt)=>()=>(Lt||le((Lt={exports:{}}).exports,Lt),Lt.exports),mS=fS((le,Lt)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();/**
* @license
* Copyright 2017 Google LLC
* SPDX-License-Identifier: BSD-3-Clause
*/var ve;const mt=window,rt=mt.trustedTypes,St=rt?rt.createPolicy("lit-html",{createHTML:e=>e}):void 0,It=`lit$${(Math.random()+"").slice(9)}$`,Te="?"+It,Pr=`<${Te}>`,ci=document,Cr=(e="")=>ci.createComment(e),Sr=e=>e===null||typeof e!="object"&&typeof e!="function",wa=Array.isArray,gf=e=>wa(e)||typeof(e==null?void 0:e[Symbol.iterator])=="function",wr=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,ba=/-->/g,Da=/>/g,Ai=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Ea=/'/g,Ta=/"/g,Aa=/^(?:script|style|textarea|title)$/i,ka=e=>(t,...i)=>({_$litType$:e,strings:t,values:i}),ki=ka(1),Ae=ka(2),br=Symbol.for("lit-noChange"),jt=Symbol.for("lit-nothing"),_a=new WeakMap,yf=(e,t,i)=>{var r,n;const o=(r=i==null?void 0:i.renderBefore)!==null&&r!==void 0?r:t;let s=o._$litPart$;if(s===void 0){const a=(n=i==null?void 0:i.renderBefore)!==null&&n!==void 0?n:null;o._$litPart$=s=new Er(t.insertBefore(Cr(),a),a,void 0,i!=null?i:{})}return s._$AI(e),s},Ui=ci.createTreeWalker(ci,129,null,!1),xf=(e,t)=>{const i=e.length-1,r=[];let n,o=t===2?"<svg>":"",s=wr;for(let h=0;h<i;h++){const c=e[h];let d,f,m=-1,v=0;for(;v<c.length&&(s.lastIndex=v,f=s.exec(c),f!==null);)v=s.lastIndex,s===wr?f[1]==="!--"?s=ba:f[1]!==void 0?s=Da:f[2]!==void 0?(Aa.test(f[2])&&(n=RegExp("</"+f[2],"g")),s=Ai):f[3]!==void 0&&(s=Ai):s===Ai?f[0]===">"?(s=n!=null?n:wr,m=-1):f[1]===void 0?m=-2:(m=s.lastIndex-f[2].length,d=f[1],s=f[3]===void 0?Ai:f[3]==='"'?Ta:Ea):s===Ta||s===Ea?s=Ai:s===ba||s===Da?s=wr:(s=Ai,n=void 0);const S=s===Ai&&e[h+1].startsWith("/>")?" ":"";o+=s===wr?c+Pr:m>=0?(r.push(d),c.slice(0,m)+"$lit$"+c.slice(m)+It+S):c+It+(m===-2?(r.push(void 0),h):S)}const a=o+(e[i]||"<?>")+(t===2?"</svg>":"");if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return[St!==void 0?St.createHTML(a):a,r]};class Dr{constructor({strings:t,_$litType$:i},r){let n;this.parts=[];let o=0,s=0;const a=t.length-1,h=this.parts,[c,d]=xf(t,i);if(this.el=Dr.createElement(c,r),Ui.currentNode=this.el.content,i===2){const f=this.el.content,m=f.firstChild;m.remove(),f.append(...m.childNodes)}for(;(n=Ui.nextNode())!==null&&h.length<a;){if(n.nodeType===1){if(n.hasAttributes()){const f=[];for(const m of n.getAttributeNames())if(m.endsWith("$lit$")||m.startsWith(It)){const v=d[s++];if(f.push(m),v!==void 0){const S=n.getAttribute(v.toLowerCase()+"$lit$").split(It),O=/([.?@])?(.*)/.exec(v);h.push({type:1,index:o,name:O[2],strings:S,ctor:O[1]==="."?Pf:O[1]==="?"?Sf:O[1]==="@"?wf:Pn})}else h.push({type:6,index:o})}for(const m of f)n.removeAttribute(m)}if(Aa.test(n.tagName)){const f=n.textContent.split(It),m=f.length-1;if(m>0){n.textContent=rt?rt.emptyScript:"";for(let v=0;v<m;v++)n.append(f[v],Cr()),Ui.nextNode(),h.push({type:2,index:++o});n.append(f[m],Cr())}}}else if(n.nodeType===8)if(n.data===Te)h.push({type:2,index:o});else{let f=-1;for(;(f=n.data.indexOf(It,f+1))!==-1;)h.push({type:7,index:o}),f+=It.length-1}o++}}static createElement(t,i){const r=ci.createElement("template");return r.innerHTML=t,r}}function Gi(e,t,i=e,r){var n,o,s,a;if(t===br)return t;let h=r!==void 0?(n=i._$Cl)===null||n===void 0?void 0:n[r]:i._$Cu;const c=Sr(t)?void 0:t._$litDirective$;return(h==null?void 0:h.constructor)!==c&&((o=h==null?void 0:h._$AO)===null||o===void 0||o.call(h,!1),c===void 0?h=void 0:(h=new c(e),h._$AT(e,i,r)),r!==void 0?((s=(a=i)._$Cl)!==null&&s!==void 0?s:a._$Cl=[])[r]=h:i._$Cu=h),h!==void 0&&(t=Gi(e,h._$AS(e,t.values),h,r)),t}class vf{constructor(t,i){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var i;const{el:{content:r},parts:n}=this._$AD,o=((i=t==null?void 0:t.creationScope)!==null&&i!==void 0?i:ci).importNode(r,!0);Ui.currentNode=o;let s=Ui.nextNode(),a=0,h=0,c=n[0];for(;c!==void 0;){if(a===c.index){let d;c.type===2?d=new Er(s,s.nextSibling,this,t):c.type===1?d=new c.ctor(s,c.name,c.strings,this,t):c.type===6&&(d=new bf(s,this,t)),this.v.push(d),c=n[++h]}a!==(c==null?void 0:c.index)&&(s=Ui.nextNode(),a++)}return o}m(t){let i=0;for(const r of this.v)r!==void 0&&(r.strings!==void 0?(r._$AI(t,r,i),i+=r.strings.length-2):r._$AI(t[i])),i++}}class Er{constructor(t,i,r,n){var o;this.type=2,this._$AH=jt,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=r,this.options=n,this._$C_=(o=n==null?void 0:n.isConnected)===null||o===void 0||o}get _$AU(){var t,i;return(i=(t=this._$AM)===null||t===void 0?void 0:t._$AU)!==null&&i!==void 0?i:this._$C_}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return i!==void 0&&t.nodeType===11&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=Gi(this,t,i),Sr(t)?t===jt||t==null||t===""?(this._$AH!==jt&&this._$AR(),this._$AH=jt):t!==this._$AH&&t!==br&&this.$(t):t._$litType$!==void 0?this.T(t):t.nodeType!==void 0?this.k(t):gf(t)?this.O(t):this.$(t)}S(t,i=this._$AB){return this._$AA.parentNode.insertBefore(t,i)}k(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t))}$(t){this._$AH!==jt&&Sr(this._$AH)?this._$AA.nextSibling.data=t:this.k(ci.createTextNode(t)),this._$AH=t}T(t){var i;const{values:r,_$litType$:n}=t,o=typeof n=="number"?this._$AC(t):(n.el===void 0&&(n.el=Dr.createElement(n.h,this.options)),n);if(((i=this._$AH)===null||i===void 0?void 0:i._$AD)===o)this._$AH.m(r);else{const s=new vf(o,this),a=s.p(this.options);s.m(r),this.k(a),this._$AH=s}}_$AC(t){let i=_a.get(t.strings);return i===void 0&&_a.set(t.strings,i=new Dr(t)),i}O(t){wa(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let r,n=0;for(const o of t)n===i.length?i.push(r=new Er(this.S(Cr()),this.S(Cr()),this,this.options)):r=i[n],r._$AI(o),n++;n<i.length&&(this._$AR(r&&r._$AB.nextSibling,n),i.length=n)}_$AR(t=this._$AA.nextSibling,i){var r;for((r=this._$AP)===null||r===void 0||r.call(this,!1,!0,i);t&&t!==this._$AB;){const n=t.nextSibling;t.remove(),t=n}}setConnected(t){var i;this._$AM===void 0&&(this._$C_=t,(i=this._$AP)===null||i===void 0||i.call(this,t))}}class Pn{constructor(t,i,r,n,o){this.type=1,this._$AH=jt,this._$AN=void 0,this.element=t,this.name=i,this._$AM=n,this.options=o,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=jt}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,i=this,r,n){const o=this.strings;let s=!1;if(o===void 0)t=Gi(this,t,i,0),s=!Sr(t)||t!==this._$AH&&t!==br,s&&(this._$AH=t);else{const a=t;let h,c;for(t=o[0],h=0;h<o.length-1;h++)c=Gi(this,a[r+h],i,h),c===br&&(c=this._$AH[h]),s||(s=!Sr(c)||c!==this._$AH[h]),c===jt?t=jt:t!==jt&&(t+=(c!=null?c:"")+o[h+1]),this._$AH[h]=c}s&&!n&&this.P(t)}P(t){t===jt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t!=null?t:"")}}class Pf extends Pn{constructor(){super(...arguments),this.type=3}P(t){this.element[this.name]=t===jt?void 0:t}}const Cf=rt?rt.emptyScript:"";class Sf extends Pn{constructor(){super(...arguments),this.type=4}P(t){t&&t!==jt?this.element.setAttribute(this.name,Cf):this.element.removeAttribute(this.name)}}class wf extends Pn{constructor(t,i,r,n,o){super(t,i,r,n,o),this.type=5}_$AI(t,i=this){var r;if((t=(r=Gi(this,t,i,0))!==null&&r!==void 0?r:jt)===br)return;const n=this._$AH,o=t===jt&&n!==jt||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,s=t!==jt&&(n===jt||o);o&&this.element.removeEventListener(this.name,this,n),s&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var i,r;typeof this._$AH=="function"?this._$AH.call((r=(i=this.options)===null||i===void 0?void 0:i.host)!==null&&r!==void 0?r:this.element,t):this._$AH.handleEvent(t)}}class bf{constructor(t,i,r){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(t){Gi(this,t)}}const Ia=mt.litHtmlPolyfillSupport;Ia==null||Ia(Dr,Er),((ve=mt.litHtmlVersions)!==null&&ve!==void 0?ve:mt.litHtmlVersions=[]).push("2.3.1");class yt{constructor(){}lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t,!1,1,0)}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t,!0,1,0)}replace(t,i,r){let n=[];return this.decompose(0,t,n,2),r.length&&r.decompose(0,r.length,n,3),this.decompose(i,this.length,n,1),je.from(n,this.length-(i-t)+r.length)}append(t){return this.replace(this.length,this.length,t)}slice(t,i=this.length){let r=[];return this.decompose(t,i,r,0),je.from(r,i-t)}eq(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;let i=this.scanIdentical(t,1),r=this.length-this.scanIdentical(t,-1),n=new Tr(this),o=new Tr(t);for(let s=i,a=i;;){if(n.next(s),o.next(s),s=0,n.lineBreak!=o.lineBreak||n.done!=o.done||n.value!=o.value)return!1;if(a+=n.value.length,n.done||a>=r)return!0}}iter(t=1){return new Tr(this,t)}iterRange(t,i=this.length){return new Qa(this,t,i)}iterLines(t,i){let r;if(t==null)r=this.iter();else{i==null&&(i=this.lines+1);let n=this.line(t).from;r=this.iterRange(n,Math.max(n,i==this.lines+1?this.length:i<=1?0:this.line(i-1).to))}return new Xa(r)}toString(){return this.sliceString(0)}toJSON(){let t=[];return this.flatten(t),t}static of(t){if(t.length==0)throw new RangeError("A document must have at least one line");return t.length==1&&!t[0]?yt.empty:t.length<=32?new Qt(t):je.from(Qt.split(t,[]))}}class Qt extends yt{constructor(t,i=Df(t)){super(),this.text=t,this.length=i}get lines(){return this.text.length}get children(){return null}lineInner(t,i,r,n){for(let o=0;;o++){let s=this.text[o],a=n+s.length;if((i?r:a)>=t)return new Ef(n,a,r,s);n=a+1,r++}}decompose(t,i,r,n){let o=t<=0&&i>=this.length?this:new Qt(La(this.text,t,i),Math.min(i,this.length)-Math.max(0,t));if(n&1){let s=r.pop(),a=Cn(o.text,s.text.slice(),0,o.length);if(a.length<=32)r.push(new Qt(a,s.length+o.length));else{let h=a.length>>1;r.push(new Qt(a.slice(0,h)),new Qt(a.slice(h)))}}else r.push(o)}replace(t,i,r){if(!(r instanceof Qt))return super.replace(t,i,r);let n=Cn(this.text,Cn(r.text,La(this.text,0,t)),i),o=this.length+r.length-(i-t);return n.length<=32?new Qt(n,o):je.from(Qt.split(n,[]),o)}sliceString(t,i=this.length,r=`
`){let n="";for(let o=0,s=0;o<=i&&s<this.text.length;s++){let a=this.text[s],h=o+a.length;o>t&&s&&(n+=r),t<h&&i>o&&(n+=a.slice(Math.max(0,t-o),i-o)),o=h+1}return n}flatten(t){for(let i of this.text)t.push(i)}scanIdentical(){return 0}static split(t,i){let r=[],n=-1;for(let o of t)r.push(o),n+=o.length+1,r.length==32&&(i.push(new Qt(r,n)),r=[],n=-1);return n>-1&&i.push(new Qt(r,n)),i}}class je extends yt{constructor(t,i){super(),this.children=t,this.length=i,this.lines=0;for(let r of t)this.lines+=r.lines}lineInner(t,i,r,n){for(let o=0;;o++){let s=this.children[o],a=n+s.length,h=r+s.lines-1;if((i?h:a)>=t)return s.lineInner(t,i,r,n);n=a+1,r=h+1}}decompose(t,i,r,n){for(let o=0,s=0;s<=i&&o<this.children.length;o++){let a=this.children[o],h=s+a.length;if(t<=h&&i>=s){let c=n&((s<=t?1:0)|(h>=i?2:0));s>=t&&h<=i&&!c?r.push(a):a.decompose(t-s,i-s,r,c)}s=h+1}}replace(t,i,r){if(r.lines<this.lines)for(let n=0,o=0;n<this.children.length;n++){let s=this.children[n],a=o+s.length;if(t>=o&&i<=a){let h=s.replace(t-o,i-o,r),c=this.lines-s.lines+h.lines;if(h.lines<c>>5-1&&h.lines>c>>5+1){let d=this.children.slice();return d[n]=h,new je(d,this.length-(i-t)+r.length)}return super.replace(o,a,h)}o=a+1}return super.replace(t,i,r)}sliceString(t,i=this.length,r=`
`){let n="";for(let o=0,s=0;o<this.children.length&&s<=i;o++){let a=this.children[o],h=s+a.length;s>t&&o&&(n+=r),t<h&&i>s&&(n+=a.sliceString(t-s,i-s,r)),s=h+1}return n}flatten(t){for(let i of this.children)i.flatten(t)}scanIdentical(t,i){if(!(t instanceof je))return 0;let r=0,[n,o,s,a]=i>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;n+=i,o+=i){if(n==s||o==a)return r;let h=this.children[n],c=t.children[o];if(h!=c)return r+h.scanIdentical(c,i);r+=h.length+1}}static from(t,i=t.reduce((r,n)=>r+n.length+1,-1)){let r=0;for(let v of t)r+=v.lines;if(r<32){let v=[];for(let S of t)S.flatten(v);return new Qt(v,i)}let n=Math.max(32,r>>5),o=n<<1,s=n>>1,a=[],h=0,c=-1,d=[];function f(v){let S;if(v.lines>o&&v instanceof je)for(let O of v.children)f(O);else v.lines>s&&(h>s||!h)?(m(),a.push(v)):v instanceof Qt&&h&&(S=d[d.length-1])instanceof Qt&&v.lines+S.lines<=32?(h+=v.lines,c+=v.length+1,d[d.length-1]=new Qt(S.text.concat(v.text),S.length+1+v.length)):(h+v.lines>n&&m(),h+=v.lines,c+=v.length+1,d.push(v))}function m(){h!=0&&(a.push(d.length==1?d[0]:je.from(d,c)),c=-1,h=d.length=0)}for(let v of t)f(v);return m(),a.length==1?a[0]:new je(a,i)}}yt.empty=new Qt([""],0);function Df(e){let t=-1;for(let i of e)t+=i.length+1;return t}function Cn(e,t,i=0,r=1e9){for(let n=0,o=0,s=!0;o<e.length&&n<=r;o++){let a=e[o],h=n+a.length;h>=i&&(h>r&&(a=a.slice(0,r-n)),n<i&&(a=a.slice(i-n)),s?(t[t.length-1]+=a,s=!1):t.push(a)),n=h+1}return t}function La(e,t,i){return Cn(e,[""],t,i)}class Tr{constructor(t,i=1){this.dir=i,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[i>0?1:(t instanceof Qt?t.text.length:t.children.length)<<1]}nextInner(t,i){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,n=this.nodes[r],o=this.offsets[r],s=o>>1,a=n instanceof Qt?n.text.length:n.children.length;if(s==(i>0?a:0)){if(r==0)return this.done=!0,this.value="",this;i>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(i>0?0:1)){if(this.offsets[r]+=i,t==0)return this.lineBreak=!0,this.value=`
`,this;t--}else if(n instanceof Qt){let h=n.text[s+(i<0?-1:0)];if(this.offsets[r]+=i,h.length>Math.max(0,t))return this.value=t==0?h:i>0?h.slice(t):h.slice(0,h.length-t),this;t-=h.length}else{let h=n.children[s+(i<0?-1:0)];t>h.length?(t-=h.length,this.offsets[r]+=i):(i<0&&this.offsets[r]--,this.nodes.push(h),this.offsets.push(i>0?1:(h instanceof Qt?h.text.length:h.children.length)<<1))}}}next(t=0){return t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)}}class Qa{constructor(t,i,r){this.value="",this.done=!1,this.cursor=new Tr(t,i>r?-1:1),this.pos=i>r?t.length:0,this.from=Math.min(i,r),this.to=Math.max(i,r)}nextInner(t,i){if(i<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,i<0?this.pos-this.to:this.from-this.pos);let r=i<0?this.pos-this.from:this.to-this.pos;t>r&&(t=r),r-=t;let{value:n}=this.cursor.next(t);return this.pos+=(n.length+t)*i,this.value=n.length<=r?n:i<0?n.slice(n.length-r):n.slice(0,r),this.done=!this.value,this}next(t=0){return t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Xa{constructor(t){this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}next(t=0){let{done:i,lineBreak:r,value:n}=this.inner.next(t);return i?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(yt.prototype[Symbol.iterator]=function(){return this.iter()},Tr.prototype[Symbol.iterator]=Qa.prototype[Symbol.iterator]=Xa.prototype[Symbol.iterator]=function(){return this});class Ef{constructor(t,i,r,n){this.from=t,this.to=i,this.number=r,this.text=n}get length(){return this.to-this.from}}let Vi="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=1;e<Vi.length;e++)Vi[e]+=Vi[e-1];function Tf(e){for(let t=1;t<Vi.length;t+=2)if(Vi[t]>e)return Vi[t-1]<=e;return!1}function $a(e){return e>=127462&&e<=127487}const Na=8205;function ae(e,t,i=!0,r=!0){return(i?Fa:Af)(e,t,r)}function Fa(e,t,i){if(t==e.length)return t;t&&Ma(e.charCodeAt(t))&&Ba(e.charCodeAt(t-1))&&t--;let r=Gt(e,t);for(t+=Pe(r);t<e.length;){let n=Gt(e,t);if(r==Na||n==Na||i&&Tf(n))t+=Pe(n),r=n;else if($a(n)){let o=0,s=t-2;for(;s>=0&&$a(Gt(e,s));)o++,s-=2;if(o%2==0)break;t+=2}else break}return t}function Af(e,t,i){for(;t>0;){let r=Fa(e,t-2,i);if(r<t)return r;t--}return 0}function Ma(e){return e>=56320&&e<57344}function Ba(e){return e>=55296&&e<56320}function Gt(e,t){let i=e.charCodeAt(t);if(!Ba(i)||t+1==e.length)return i;let r=e.charCodeAt(t+1);return Ma(r)?(i-55296<<10)+(r-56320)+65536:i}function Gs(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}function Pe(e){return e<65536?1:2}const Vs=/\r\n?|\n/;var Vt=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(Vt||(Vt={}));class Ze{constructor(t){this.sections=t}get length(){let t=0;for(let i=0;i<this.sections.length;i+=2)t+=this.sections[i];return t}get newLength(){let t=0;for(let i=0;i<this.sections.length;i+=2){let r=this.sections[i+1];t+=r<0?this.sections[i]:r}return t}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(t){for(let i=0,r=0,n=0;i<this.sections.length;){let o=this.sections[i++],s=this.sections[i++];s<0?(t(r,n,o),n+=o):n+=s,r+=o}}iterChangedRanges(t,i=!1){Hs(this,t,i)}get invertedDesc(){let t=[];for(let i=0;i<this.sections.length;){let r=this.sections[i++],n=this.sections[i++];n<0?t.push(r,n):t.push(n,r)}return new Ze(t)}composeDesc(t){return this.empty?t:t.empty?this:Ra(this,t)}mapDesc(t,i=!1){return t.empty?this:Js(this,t,i)}mapPos(t,i=-1,r=Vt.Simple){let n=0,o=0;for(let s=0;s<this.sections.length;){let a=this.sections[s++],h=this.sections[s++],c=n+a;if(h<0){if(c>t)return o+(t-n);o+=a}else{if(r!=Vt.Simple&&c>=t&&(r==Vt.TrackDel&&n<t&&c>t||r==Vt.TrackBefore&&n<t||r==Vt.TrackAfter&&c>t))return null;if(c>t||c==t&&i<0&&!a)return t==n||i<0?o:o+h;o+=h}n=c}if(t>n)throw new RangeError(`Position ${t} is out of range for changeset of length ${n}`);return o}touchesRange(t,i=t){for(let r=0,n=0;r<this.sections.length&&n<=i;){let o=this.sections[r++],s=this.sections[r++],a=n+o;if(s>=0&&n<=i&&a>=t)return n<t&&a>i?"cover":!0;n=a}return!1}toString(){let t="";for(let i=0;i<this.sections.length;){let r=this.sections[i++],n=this.sections[i++];t+=(t?" ":"")+r+(n>=0?":"+n:"")}return t}toJSON(){return this.sections}static fromJSON(t){if(!Array.isArray(t)||t.length%2||t.some(i=>typeof i!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Ze(t)}static create(t){return new Ze(t)}}class Bt extends Ze{constructor(t,i){super(t),this.inserted=i}apply(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return Hs(this,(i,r,n,o,s)=>t=t.replace(n,n+(r-i),s),!1),t}mapDesc(t,i=!1){return Js(this,t,i,!0)}invert(t){let i=this.sections.slice(),r=[];for(let n=0,o=0;n<i.length;n+=2){let s=i[n],a=i[n+1];if(a>=0){i[n]=a,i[n+1]=s;let h=n>>1;for(;r.length<h;)r.push(yt.empty);r.push(s?t.slice(o,o+s):yt.empty)}o+=s}return new Bt(i,r)}compose(t){return this.empty?t:t.empty?this:Ra(this,t,!0)}map(t,i=!1){return t.empty?this:Js(this,t,i,!0)}iterChanges(t,i=!1){Hs(this,t,i)}get desc(){return Ze.create(this.sections)}filter(t){let i=[],r=[],n=[],o=new Ar(this);t:for(let s=0,a=0;;){let h=s==t.length?1e9:t[s++];for(;a<h||a==h&&o.len==0;){if(o.done)break t;let d=Math.min(o.len,h-a);ie(n,d,-1);let f=o.ins==-1?-1:o.off==0?o.ins:0;ie(i,d,f),f>0&&pi(r,i,o.text),o.forward(d),a+=d}let c=t[s++];for(;a<c;){if(o.done)break t;let d=Math.min(o.len,c-a);ie(i,d,-1),ie(n,d,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(d),a+=d}}return{changes:new Bt(i,r),filtered:Ze.create(n)}}toJSON(){let t=[];for(let i=0;i<this.sections.length;i+=2){let r=this.sections[i],n=this.sections[i+1];n<0?t.push(r):n==0?t.push([r]):t.push([r].concat(this.inserted[i>>1].toJSON()))}return t}static of(t,i,r){let n=[],o=[],s=0,a=null;function h(d=!1){if(!d&&!n.length)return;s<i&&ie(n,i-s,-1);let f=new Bt(n,o);a=a?a.compose(f.map(a)):f,n=[],o=[],s=0}function c(d){if(Array.isArray(d))for(let f of d)c(f);else if(d instanceof Bt){if(d.length!=i)throw new RangeError(`Mismatched change set length (got ${d.length}, expected ${i})`);h(),a=a?a.compose(d.map(a)):d}else{let{from:f,to:m=f,insert:v}=d;if(f>m||f<0||m>i)throw new RangeError(`Invalid change range ${f} to ${m} (in doc of length ${i})`);let S=v?typeof v=="string"?yt.of(v.split(r||Vs)):v:yt.empty,O=S.length;if(f==m&&O==0)return;f<s&&h(),f>s&&ie(n,f-s,-1),ie(n,m-f,O),pi(o,n,S),s=m}}return c(t),h(!a),a}static empty(t){return new Bt(t?[t,-1]:[],[])}static fromJSON(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");let i=[],r=[];for(let n=0;n<t.length;n++){let o=t[n];if(typeof o=="number")i.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((s,a)=>a&&typeof s!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)i.push(o[0],0);else{for(;r.length<n;)r.push(yt.empty);r[n]=yt.of(o.slice(1)),i.push(o[0],r[n].length)}}}return new Bt(i,r)}static createSet(t,i){return new Bt(t,i)}}function ie(e,t,i,r=!1){if(t==0&&i<=0)return;let n=e.length-2;n>=0&&i<=0&&i==e[n+1]?e[n]+=t:t==0&&e[n]==0?e[n+1]+=i:r?(e[n]+=t,e[n+1]+=i):e.push(t,i)}function pi(e,t,i){if(i.length==0)return;let r=t.length-2>>1;if(r<e.length)e[e.length-1]=e[e.length-1].append(i);else{for(;e.length<r;)e.push(yt.empty);e.push(i)}}function Hs(e,t,i){let r=e.inserted;for(let n=0,o=0,s=0;s<e.sections.length;){let a=e.sections[s++],h=e.sections[s++];if(h<0)n+=a,o+=a;else{let c=n,d=o,f=yt.empty;for(;c+=a,d+=h,h&&r&&(f=f.append(r[s-2>>1])),!(i||s==e.sections.length||e.sections[s+1]<0);)a=e.sections[s++],h=e.sections[s++];t(n,c,o,d,f),n=c,o=d}}}function Js(e,t,i,r=!1){let n=[],o=r?[]:null,s=new Ar(e),a=new Ar(t);for(let h=-1;;)if(s.ins==-1&&a.ins==-1){let c=Math.min(s.len,a.len);ie(n,c,-1),s.forward(c),a.forward(c)}else if(a.ins>=0&&(s.ins<0||h==s.i||s.off==0&&(a.len<s.len||a.len==s.len&&!i))){let c=a.len;for(ie(n,a.ins,-1);c;){let d=Math.min(s.len,c);s.ins>=0&&h<s.i&&s.len<=d&&(ie(n,0,s.ins),o&&pi(o,n,s.text),h=s.i),s.forward(d),c-=d}a.next()}else if(s.ins>=0){let c=0,d=s.len;for(;d;)if(a.ins==-1){let f=Math.min(d,a.len);c+=f,d-=f,a.forward(f)}else if(a.ins==0&&a.len<d)d-=a.len,a.next();else break;ie(n,c,h<s.i?s.ins:0),o&&h<s.i&&pi(o,n,s.text),h=s.i,s.forward(s.len-d)}else{if(s.done&&a.done)return o?Bt.createSet(n,o):Ze.create(n);throw new Error("Mismatched change set lengths")}}function Ra(e,t,i=!1){let r=[],n=i?[]:null,o=new Ar(e),s=new Ar(t);for(let a=!1;;){if(o.done&&s.done)return n?Bt.createSet(r,n):Ze.create(r);if(o.ins==0)ie(r,o.len,0,a),o.next();else if(s.len==0&&!s.done)ie(r,0,s.ins,a),n&&pi(n,r,s.text),s.next();else{if(o.done||s.done)throw new Error("Mismatched change set lengths");{let h=Math.min(o.len2,s.len),c=r.length;if(o.ins==-1){let d=s.ins==-1?-1:s.off?0:s.ins;ie(r,h,d,a),n&&d&&pi(n,r,s.text)}else s.ins==-1?(ie(r,o.off?0:o.len,h,a),n&&pi(n,r,o.textBit(h))):(ie(r,o.off?0:o.len,s.off?0:s.ins,a),n&&!s.off&&pi(n,r,s.text));a=(o.ins>h||s.ins>=0&&s.len>h)&&(a||r.length>c),o.forward2(h),s.forward(h)}}}}class Ar{constructor(t){this.set=t,this.i=0,this.next()}next(){let{sections:t}=this.set;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length?yt.empty:t[i]}textBit(t){let{inserted:i}=this.set,r=this.i-2>>1;return r>=i.length&&!t?yt.empty:i[r].slice(this.off,t==null?void 0:this.off+t)}forward(t){t==this.len?this.next():(this.len-=t,this.off+=t)}forward2(t){this.ins==-1?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}}class _i{constructor(t,i,r){this.from=t,this.to=i,this.flags=r}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let t=this.flags&3;return t==3?null:t}get goalColumn(){let t=this.flags>>5;return t==33554431?void 0:t}map(t,i=-1){let r,n;return this.empty?r=n=t.mapPos(this.from,i):(r=t.mapPos(this.from,1),n=t.mapPos(this.to,-1)),r==this.from&&n==this.to?this:new _i(r,n,this.flags)}extend(t,i=t){if(t<=this.anchor&&i>=this.anchor)return Y.range(t,i);let r=Math.abs(t-this.anchor)>Math.abs(i-this.anchor)?t:i;return Y.range(this.anchor,r)}eq(t){return this.anchor==t.anchor&&this.head==t.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Y.range(t.anchor,t.head)}static create(t,i,r){return new _i(t,i,r)}}class Y{constructor(t,i){this.ranges=t,this.mainIndex=i}map(t,i=-1){return t.empty?this:Y.create(this.ranges.map(r=>r.map(t,i)),this.mainIndex)}eq(t){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(t.ranges[i]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Y([this.main],0)}addRange(t,i=!0){return Y.create([t].concat(this.ranges),i?0:this.mainIndex+1)}replaceRange(t,i=this.mainIndex){let r=this.ranges.slice();return r[i]=t,Y.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(t=>t.toJSON()),main:this.mainIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||typeof t.main!="number"||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Y(t.ranges.map(i=>_i.fromJSON(i)),t.main)}static single(t,i=t){return new Y([Y.range(t,i)],0)}static create(t,i=0){if(t.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,n=0;n<t.length;n++){let o=t[n];if(o.empty?o.from<=r:o.from<r)return Y.normalized(t.slice(),i);r=o.to}return new Y(t,i)}static cursor(t,i=0,r,n){return _i.create(t,t,(i==0?0:i<0?4:8)|(r==null?3:Math.min(2,r))|(n!=null?n:33554431)<<5)}static range(t,i,r){let n=(r!=null?r:33554431)<<5;return i<t?_i.create(i,t,16|n|8):_i.create(t,i,n|(i>t?4:0))}static normalized(t,i=0){let r=t[i];t.sort((n,o)=>n.from-o.from),i=t.indexOf(r);for(let n=1;n<t.length;n++){let o=t[n],s=t[n-1];if(o.empty?o.from<=s.to:o.from<s.to){let a=s.from,h=Math.max(o.to,s.to);n<=i&&i--,t.splice(--n,2,o.anchor>o.head?Y.range(h,a):Y.range(a,h))}}return new Y(t,i)}}function Ya(e,t){for(let i of e.ranges)if(i.to>t)throw new RangeError("Selection points outside of document")}let Ks=0;class H{constructor(t,i,r,n,o){this.combine=t,this.compareInput=i,this.compare=r,this.isStatic=n,this.id=Ks++,this.default=t([]),this.extensions=typeof o=="function"?o(this):o}static define(t={}){return new H(t.combine||(i=>i),t.compareInput||((i,r)=>i===r),t.compare||(t.combine?(i,r)=>i===r:to),!!t.static,t.enables)}of(t){return new Sn([],this,0,t)}compute(t,i){if(this.isStatic)throw new Error("Can't compute a static facet");return new Sn(t,this,1,i)}computeN(t,i){if(this.isStatic)throw new Error("Can't compute a static facet");return new Sn(t,this,2,i)}from(t,i){return i||(i=r=>r),this.compute([t],r=>i(r.field(t)))}}function to(e,t){return e==t||e.length==t.length&&e.every((i,r)=>i===t[r])}class Sn{constructor(t,i,r,n){this.dependencies=t,this.facet=i,this.type=r,this.value=n,this.id=Ks++}dynamicSlot(t){var i;let r=this.value,n=this.facet.compareInput,o=this.id,s=t[o]>>1,a=this.type==2,h=!1,c=!1,d=[];for(let f of this.dependencies)f=="doc"?h=!0:f=="selection"?c=!0:(((i=t[f.id])!==null&&i!==void 0?i:1)&1)==0&&d.push(t[f.id]);return{create(f){return f.values[s]=r(f),1},update(f,m){if(h&&m.docChanged||c&&(m.docChanged||m.selection)||eo(f,d)){let v=r(f);if(a?!Wa(v,f.values[s],n):!n(v,f.values[s]))return f.values[s]=v,1}return 0},reconfigure:(f,m)=>{let v=r(f),S=m.config.address[o];if(S!=null){let O=Dn(m,S);if(this.dependencies.every(y=>y instanceof H?m.facet(y)===f.facet(y):y instanceof Rt?m.field(y,!1)==f.field(y,!1):!0)||(a?Wa(v,O,n):n(v,O)))return f.values[s]=O,0}return f.values[s]=v,1}}}}function Wa(e,t,i){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1;return!0}function eo(e,t){let i=!1;for(let r of t)_r(e,r)&1&&(i=!0);return i}function kf(e,t,i){let r=i.map(h=>e[h.id]),n=i.map(h=>h.type),o=r.filter(h=>!(h&1)),s=e[t.id]>>1;function a(h){let c=[];for(let d=0;d<r.length;d++){let f=Dn(h,r[d]);if(n[d]==2)for(let m of f)c.push(m);else c.push(f)}return t.combine(c)}return{create(h){for(let c of r)_r(h,c);return h.values[s]=a(h),1},update(h,c){if(!eo(h,o))return 0;let d=a(h);return t.compare(d,h.values[s])?0:(h.values[s]=d,1)},reconfigure(h,c){let d=eo(h,r),f=c.config.facets[t.id],m=c.facet(t);if(f&&!d&&to(i,f))return h.values[s]=m,0;let v=a(h);return t.compare(v,m)?(h.values[s]=m,0):(h.values[s]=v,1)}}}const ja=H.define({static:!0});class Rt{constructor(t,i,r,n,o){this.id=t,this.createF=i,this.updateF=r,this.compareF=n,this.spec=o,this.provides=void 0}static define(t){let i=new Rt(Ks++,t.create,t.update,t.compare||((r,n)=>r===n),t);return t.provide&&(i.provides=t.provide(i)),i}create(t){let i=t.facet(ja).find(r=>r.field==this);return((i==null?void 0:i.create)||this.createF)(t)}slot(t){let i=t[this.id]>>1;return{create:r=>(r.values[i]=this.create(r),1),update:(r,n)=>{let o=r.values[i],s=this.updateF(o,n);return this.compareF(o,s)?0:(r.values[i]=s,1)},reconfigure:(r,n)=>n.config.address[this.id]!=null?(r.values[i]=n.field(this),0):(r.values[i]=this.create(r),1)}}init(t){return[this,ja.of({field:this,create:t})]}get extension(){return this}}const Ii={lowest:4,low:3,default:2,high:1,highest:0};function kr(e){return t=>new Za(t,e)}const Li={highest:kr(Ii.highest),high:kr(Ii.high),default:kr(Ii.default),low:kr(Ii.low),lowest:kr(Ii.lowest)};class Za{constructor(t,i){this.inner=t,this.prec=i}}class wn{of(t){return new io(this,t)}reconfigure(t){return wn.reconfigure.of({compartment:this,extension:t})}get(t){return t.config.compartments.get(this)}}class io{constructor(t,i){this.compartment=t,this.inner=i}}class bn{constructor(t,i,r,n,o,s){for(this.base=t,this.compartments=i,this.dynamicSlots=r,this.address=n,this.staticValues=o,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(t){let i=this.address[t.id];return i==null?t.default:this.staticValues[i>>1]}static resolve(t,i,r){let n=[],o=Object.create(null),s=new Map;for(let m of _f(t,i,s))m instanceof Rt?n.push(m):(o[m.facet.id]||(o[m.facet.id]=[])).push(m);let a=Object.create(null),h=[],c=[];for(let m of n)a[m.id]=c.length<<1,c.push(v=>m.slot(v));let d=r==null?void 0:r.config.facets;for(let m in o){let v=o[m],S=v[0].facet,O=d&&d[m]||[];if(v.every(y=>y.type==0))if(a[S.id]=h.length<<1|1,to(O,v))h.push(r.facet(S));else{let y=S.combine(v.map(P=>P.value));h.push(r&&S.compare(y,r.facet(S))?r.facet(S):y)}else{for(let y of v)y.type==0?(a[y.id]=h.length<<1|1,h.push(y.value)):(a[y.id]=c.length<<1,c.push(P=>y.dynamicSlot(P)));a[S.id]=c.length<<1,c.push(y=>kf(y,S,v))}}let f=c.map(m=>m(a));return new bn(t,s,f,a,h,o)}}function _f(e,t,i){let r=[[],[],[],[],[]],n=new Map;function o(s,a){let h=n.get(s);if(h!=null){if(h<=a)return;let c=r[h].indexOf(s);c>-1&&r[h].splice(c,1),s instanceof io&&i.delete(s.compartment)}if(n.set(s,a),Array.isArray(s))for(let c of s)o(c,a);else if(s instanceof io){if(i.has(s.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=t.get(s.compartment)||s.inner;i.set(s.compartment,c),o(c,a)}else if(s instanceof Za)o(s.inner,s.prec);else if(s instanceof Rt)r[a].push(s),s.provides&&o(s.provides,a);else if(s instanceof Sn)r[a].push(s),s.facet.extensions&&o(s.facet.extensions,Ii.default);else{let c=s.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(c,a)}}return o(e,Ii.default),r.reduce((s,a)=>s.concat(a))}function _r(e,t){if(t&1)return 2;let i=t>>1,r=e.status[i];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;e.status[i]=4;let n=e.computeSlot(e,e.config.dynamicSlots[i]);return e.status[i]=2|n}function Dn(e,t){return t&1?e.config.staticValues[t>>1]:e.values[t>>1]}const za=H.define(),qa=H.define({combine:e=>e.some(t=>t),static:!0}),Ua=H.define({combine:e=>e.length?e[0]:void 0,static:!0}),Ga=H.define(),Va=H.define(),Ha=H.define(),Ja=H.define({combine:e=>e.length?e[0]:!1});class Qi{constructor(t,i){this.type=t,this.value=i}static define(){return new If}}class If{of(t){return new Qi(this,t)}}class Lf{constructor(t){this.map=t}of(t){return new nt(this,t)}}class nt{constructor(t,i){this.type=t,this.value=i}map(t){let i=this.type.map(this.value,t);return i===void 0?void 0:i==this.value?this:new nt(this.type,i)}is(t){return this.type==t}static define(t={}){return new Lf(t.map||(i=>i))}static mapEffects(t,i){if(!t.length)return t;let r=[];for(let n of t){let o=n.map(i);o&&r.push(o)}return r}}nt.reconfigure=nt.define(),nt.appendConfig=nt.define();class Yt{constructor(t,i,r,n,o,s){this.startState=t,this.changes=i,this.selection=r,this.effects=n,this.annotations=o,this.scrollIntoView=s,this._doc=null,this._state=null,r&&Ya(r,i.newLength),o.some(a=>a.type==Yt.time)||(this.annotations=o.concat(Yt.time.of(Date.now())))}static create(t,i,r,n,o,s){return new Yt(t,i,r,n,o,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let i of this.annotations)if(i.type==t)return i.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let i=this.annotation(Yt.userEvent);return!!(i&&(i==t||i.length>t.length&&i.slice(0,t.length)==t&&i[t.length]=="."))}}Yt.time=Qi.define(),Yt.userEvent=Qi.define(),Yt.addToHistory=Qi.define(),Yt.remote=Qi.define();function Qf(e,t){let i=[];for(let r=0,n=0;;){let o,s;if(r<e.length&&(n==t.length||t[n]>=e[r]))o=e[r++],s=e[r++];else if(n<t.length)o=t[n++],s=t[n++];else return i;!i.length||i[i.length-1]<o?i.push(o,s):i[i.length-1]<s&&(i[i.length-1]=s)}}function Ka(e,t,i){var r;let n,o,s;return i?(n=t.changes,o=Bt.empty(t.changes.length),s=e.changes.compose(t.changes)):(n=t.changes.map(e.changes),o=e.changes.mapDesc(t.changes,!0),s=e.changes.compose(n)),{changes:s,selection:t.selection?t.selection.map(o):(r=e.selection)===null||r===void 0?void 0:r.map(n),effects:nt.mapEffects(e.effects,n).concat(nt.mapEffects(t.effects,o)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function ro(e,t,i){let r=t.selection,n=Hi(t.annotations);return t.userEvent&&(n=n.concat(Yt.userEvent.of(t.userEvent))),{changes:t.changes instanceof Bt?t.changes:Bt.of(t.changes||[],i,e.facet(Ua)),selection:r&&(r instanceof Y?r:Y.single(r.anchor,r.head)),effects:Hi(t.effects),annotations:n,scrollIntoView:!!t.scrollIntoView}}function th(e,t,i){let r=ro(e,t.length?t[0]:{},e.doc.length);t.length&&t[0].filter===!1&&(i=!1);for(let o=1;o<t.length;o++){t[o].filter===!1&&(i=!1);let s=!!t[o].sequential;r=Ka(r,ro(e,t[o],s?r.changes.newLength:e.doc.length),s)}let n=Yt.create(e,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return $f(i?Xf(n):n)}function Xf(e){let t=e.startState,i=!0;for(let n of t.facet(Ga)){let o=n(e);if(o===!1){i=!1;break}Array.isArray(o)&&(i=i===!0?o:Qf(i,o))}if(i!==!0){let n,o;if(i===!1)o=e.changes.invertedDesc,n=Bt.empty(t.doc.length);else{let s=e.changes.filter(i);n=s.changes,o=s.filtered.mapDesc(s.changes).invertedDesc}e=Yt.create(t,n,e.selection&&e.selection.map(o),nt.mapEffects(e.effects,o),e.annotations,e.scrollIntoView)}let r=t.facet(Va);for(let n=r.length-1;n>=0;n--){let o=r[n](e);o instanceof Yt?e=o:Array.isArray(o)&&o.length==1&&o[0]instanceof Yt?e=o[0]:e=th(t,Hi(o),!1)}return e}function $f(e){let t=e.startState,i=t.facet(Ha),r=e;for(let n=i.length-1;n>=0;n--){let o=i[n](e);o&&Object.keys(o).length&&(r=Ka(e,ro(t,o,e.changes.newLength),!0))}return r==e?e:Yt.create(t,e.changes,e.selection,r.effects,r.annotations,r.scrollIntoView)}const Nf=[];function Hi(e){return e==null?Nf:Array.isArray(e)?e:[e]}var Tt=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(Tt||(Tt={}));const Ff=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let no;try{no=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Mf(e){if(no)return no.test(e);for(let t=0;t<e.length;t++){let i=e[t];if(/\w/.test(i)||i>"\x80"&&(i.toUpperCase()!=i.toLowerCase()||Ff.test(i)))return!0}return!1}function Bf(e){return t=>{if(!/\S/.test(t))return Tt.Space;if(Mf(t))return Tt.Word;for(let i=0;i<e.length;i++)if(t.indexOf(e[i])>-1)return Tt.Word;return Tt.Other}}class Ot{constructor(t,i,r,n,o,s){this.config=t,this.doc=i,this.selection=r,this.values=n,this.status=t.statusTemplate.slice(),this.computeSlot=o,s&&(s._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)_r(this,a<<1);this.computeSlot=null}field(t,i=!0){let r=this.config.address[t.id];if(r==null){if(i)throw new RangeError("Field is not present in this state");return}return _r(this,r),Dn(this,r)}update(...t){return th(this,t,!0)}applyTransaction(t){let i=this.config,{base:r,compartments:n}=i;for(let s of t.effects)s.is(wn.reconfigure)?(i&&(n=new Map,i.compartments.forEach((a,h)=>n.set(h,a)),i=null),n.set(s.value.compartment,s.value.extension)):s.is(nt.reconfigure)?(i=null,r=s.value):s.is(nt.appendConfig)&&(i=null,r=Hi(r).concat(s.value));let o;i?o=t.startState.values.slice():(i=bn.resolve(r,n,this),o=new Ot(i,this.doc,this.selection,i.dynamicSlots.map(()=>null),(s,a)=>a.reconfigure(s,this),null).values),new Ot(i,t.newDoc,t.newSelection,o,(s,a)=>a.update(s,t),t)}replaceSelection(t){return typeof t=="string"&&(t=this.toText(t)),this.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:t},range:Y.cursor(i.from+t.length)}))}changeByRange(t){let i=this.selection,r=t(i.ranges[0]),n=this.changes(r.changes),o=[r.range],s=Hi(r.effects);for(let a=1;a<i.ranges.length;a++){let h=t(i.ranges[a]),c=this.changes(h.changes),d=c.map(n);for(let m=0;m<a;m++)o[m]=o[m].map(d);let f=n.mapDesc(c,!0);o.push(h.range.map(f)),n=n.compose(d),s=nt.mapEffects(s,d).concat(nt.mapEffects(Hi(h.effects),f))}return{changes:n,selection:Y.create(o,i.mainIndex),effects:s}}changes(t=[]){return t instanceof Bt?t:Bt.of(t,this.doc.length,this.facet(Ot.lineSeparator))}toText(t){return yt.of(t.split(this.facet(Ot.lineSeparator)||Vs))}sliceDoc(t=0,i=this.doc.length){return this.doc.sliceString(t,i,this.lineBreak)}facet(t){let i=this.config.address[t.id];return i==null?t.default:(_r(this,i),Dn(this,i))}toJSON(t){let i={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let r in t){let n=t[r];n instanceof Rt&&this.config.address[n.id]!=null&&(i[r]=n.spec.toJSON(this.field(t[r]),this))}return i}static fromJSON(t,i={},r){if(!t||typeof t.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(r){for(let o in r)if(Object.prototype.hasOwnProperty.call(t,o)){let s=r[o],a=t[o];n.push(s.init(h=>s.spec.fromJSON(a,h)))}}return Ot.create({doc:t.doc,selection:Y.fromJSON(t.selection),extensions:i.extensions?n.concat([i.extensions]):n})}static create(t={}){let i=bn.resolve(t.extensions||[],new Map),r=t.doc instanceof yt?t.doc:yt.of((t.doc||"").split(i.staticFacet(Ot.lineSeparator)||Vs)),n=t.selection?t.selection instanceof Y?t.selection:Y.single(t.selection.anchor,t.selection.head):Y.single(0);return Ya(n,r.length),i.staticFacet(qa)||(n=n.asSingle()),new Ot(i,r,n,i.dynamicSlots.map(()=>null),(o,s)=>s.create(o),null)}get tabSize(){return this.facet(Ot.tabSize)}get lineBreak(){return this.facet(Ot.lineSeparator)||`
`}get readOnly(){return this.facet(Ja)}phrase(t,...i){for(let r of this.facet(Ot.phrases))if(Object.prototype.hasOwnProperty.call(r,t)){t=r[t];break}return i.length&&(t=t.replace(/\$(\$|\d*)/g,(r,n)=>{if(n=="$")return"$";let o=+(n||1);return!o||o>i.length?r:i[o-1]})),t}languageDataAt(t,i,r=-1){let n=[];for(let o of this.facet(za))for(let s of o(this,i,r))Object.prototype.hasOwnProperty.call(s,t)&&n.push(s[t]);return n}charCategorizer(t){return Bf(this.languageDataAt("wordChars",t).join(""))}wordAt(t){let{text:i,from:r,length:n}=this.doc.lineAt(t),o=this.charCategorizer(t),s=t-r,a=t-r;for(;s>0;){let h=ae(i,s,!1);if(o(i.slice(h,s))!=Tt.Word)break;s=h}for(;a<n;){let h=ae(i,a);if(o(i.slice(a,h))!=Tt.Word)break;a=h}return s==a?null:Y.range(s+r,a+r)}}Ot.allowMultipleSelections=qa,Ot.tabSize=H.define({combine:e=>e.length?e[0]:4}),Ot.lineSeparator=Ua,Ot.readOnly=Ja,Ot.phrases=H.define({compare(e,t){let i=Object.keys(e),r=Object.keys(t);return i.length==r.length&&i.every(n=>e[n]==t[n])}}),Ot.languageData=za,Ot.changeFilter=Ga,Ot.transactionFilter=Va,Ot.transactionExtender=Ha,wn.reconfigure=nt.define();function ze(e,t,i={}){let r={};for(let n of e)for(let o of Object.keys(n)){let s=n[o],a=r[o];if(a===void 0)r[o]=s;else if(!(a===s||s===void 0))if(Object.hasOwnProperty.call(i,o))r[o]=i[o](a,s);else throw new Error("Config merge conflict for field "+o)}for(let n in t)r[n]===void 0&&(r[n]=t[n]);return r}class Xi{eq(t){return this==t}range(t,i=t){return Ir.create(t,i,this)}}Xi.prototype.startSide=Xi.prototype.endSide=0,Xi.prototype.point=!1,Xi.prototype.mapMode=Vt.TrackDel;class Ir{constructor(t,i,r){this.from=t,this.to=i,this.value=r}static create(t,i,r){return new Ir(t,i,r)}}function so(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class oo{constructor(t,i,r,n){this.from=t,this.to=i,this.value=r,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(t,i,r,n=0){let o=r?this.to:this.from;for(let s=n,a=o.length;;){if(s==a)return s;let h=s+a>>1,c=o[h]-t||(r?this.value[h].endSide:this.value[h].startSide)-i;if(h==s)return c>=0?s:a;c>=0?a=h:s=h+1}}between(t,i,r,n){for(let o=this.findIndex(i,-1e9,!0),s=this.findIndex(r,1e9,!1,o);o<s;o++)if(n(this.from[o]+t,this.to[o]+t,this.value[o])===!1)return!1}map(t,i){let r=[],n=[],o=[],s=-1,a=-1;for(let h=0;h<this.value.length;h++){let c=this.value[h],d=this.from[h]+t,f=this.to[h]+t,m,v;if(d==f){let S=i.mapPos(d,c.startSide,c.mapMode);if(S==null||(m=v=S,c.startSide!=c.endSide&&(v=i.mapPos(d,c.endSide),v<m)))continue}else if(m=i.mapPos(d,c.startSide),v=i.mapPos(f,c.endSide),m>v||m==v&&c.startSide>0&&c.endSide<=0)continue;(v-m||c.endSide-c.startSide)<0||(s<0&&(s=m),c.point&&(a=Math.max(a,v-m)),r.push(c),n.push(m-s),o.push(v-s))}return{mapped:r.length?new oo(n,o,r,a):null,pos:s}}}class xt{constructor(t,i,r,n){this.chunkPos=t,this.chunk=i,this.nextLayer=r,this.maxPoint=n}static create(t,i,r,n){return new xt(t,i,r,n)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let i of this.chunk)t+=i.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:i=[],sort:r=!1,filterFrom:n=0,filterTo:o=this.length}=t,s=t.filter;if(i.length==0&&!s)return this;if(r&&(i=i.slice().sort(so)),this.isEmpty)return i.length?xt.of(i):this;let a=new ih(this,null,-1).goto(0),h=0,c=[],d=new di;for(;a.value||h<i.length;)if(h<i.length&&(a.from-i[h].from||a.startSide-i[h].value.startSide)>=0){let f=i[h++];d.addInner(f.from,f.to,f.value)||c.push(f)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(h==i.length||this.chunkEnd(a.chunkIndex)<i[h].from)&&(!s||n>this.chunkEnd(a.chunkIndex)||o<this.chunkPos[a.chunkIndex])&&d.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!s||n>a.to||o<a.from||s(a.from,a.to,a.value))&&(d.addInner(a.from,a.to,a.value)||c.push(Ir.create(a.from,a.to,a.value))),a.next());return d.finishInner(this.nextLayer.isEmpty&&!c.length?xt.empty:this.nextLayer.update({add:c,filter:s,filterFrom:n,filterTo:o}))}map(t){if(t.empty||this.isEmpty)return this;let i=[],r=[],n=-1;for(let s=0;s<this.chunk.length;s++){let a=this.chunkPos[s],h=this.chunk[s],c=t.touchesRange(a,a+h.length);if(c===!1)n=Math.max(n,h.maxPoint),i.push(h),r.push(t.mapPos(a));else if(c===!0){let{mapped:d,pos:f}=h.map(a,t);d&&(n=Math.max(n,d.maxPoint),i.push(d),r.push(f))}}let o=this.nextLayer.map(t);return i.length==0?o:new xt(r,i,o||xt.empty,n)}between(t,i,r){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let o=this.chunkPos[n],s=this.chunk[n];if(i>=o&&t<=o+s.length&&s.between(o,t-o,i-o,r)===!1)return}this.nextLayer.between(t,i,r)}}iter(t=0){return Lr.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,i=0){return Lr.from(t).goto(i)}static compare(t,i,r,n,o=-1){let s=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),a=i.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),h=eh(s,a,r),c=new Qr(s,h,o),d=new Qr(a,h,o);r.iterGaps((f,m,v)=>rh(c,f,d,m,v,n)),r.empty&&r.length==0&&rh(c,0,d,0,0,n)}static eq(t,i,r=0,n){n==null&&(n=1e9);let o=t.filter(d=>!d.isEmpty&&i.indexOf(d)<0),s=i.filter(d=>!d.isEmpty&&t.indexOf(d)<0);if(o.length!=s.length)return!1;if(!o.length)return!0;let a=eh(o,s),h=new Qr(o,a,0).goto(r),c=new Qr(s,a,0).goto(r);for(;;){if(h.to!=c.to||!ao(h.active,c.active)||h.point&&(!c.point||!h.point.eq(c.point)))return!1;if(h.to>n)return!0;h.next(),c.next()}}static spans(t,i,r,n,o=-1){let s=new Qr(t,null,o).goto(i),a=i,h=s.openStart;for(;;){let c=Math.min(s.to,r);if(s.point?(n.point(a,c,s.point,s.activeForPoint(s.to),h,s.pointRank),h=s.openEnd(c)+(s.to>c?1:0)):c>a&&(n.span(a,c,s.active,h),h=s.openEnd(c)),s.to>r)break;a=s.to,s.next()}return h}static of(t,i=!1){let r=new di;for(let n of t instanceof Ir?[t]:i?Rf(t):t)r.add(n.from,n.to,n.value);return r.finish()}}xt.empty=new xt([],[],null,-1);function Rf(e){if(e.length>1)for(let t=e[0],i=1;i<e.length;i++){let r=e[i];if(so(t,r)>0)return e.slice().sort(so);t=r}return e}xt.empty.nextLayer=xt.empty;class di{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(t){this.chunks.push(new oo(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}add(t,i,r){this.addInner(t,i,r)||(this.nextLayer||(this.nextLayer=new di)).add(t,i,r)}addInner(t,i,r){let n=t-this.lastTo||r.startSide-this.last.endSide;if(n<=0&&(t-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return n<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(i-this.chunkStart),this.last=r,this.lastFrom=t,this.lastTo=i,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,i-t)),!0)}addChunk(t,i){if((t-this.lastTo||i.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,i.maxPoint),this.chunks.push(i),this.chunkPos.push(t);let r=i.value.length-1;return this.last=i.value[r],this.lastFrom=i.from[r]+t,this.lastTo=i.to[r]+t,!0}finish(){return this.finishInner(xt.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return t;let i=xt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,i}}function eh(e,t,i){let r=new Map;for(let o of e)for(let s=0;s<o.chunk.length;s++)o.chunk[s].maxPoint<=0&&r.set(o.chunk[s],o.chunkPos[s]);let n=new Set;for(let o of t)for(let s=0;s<o.chunk.length;s++){let a=r.get(o.chunk[s]);a!=null&&(i?i.mapPos(a):a)==o.chunkPos[s]&&!(i!=null&&i.touchesRange(a,a+o.chunk[s].length))&&n.add(o.chunk[s])}return n}class ih{constructor(t,i,r,n=0){this.layer=t,this.skip=i,this.minPoint=r,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t,i=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,i,!1),this}gotoInner(t,i,r){for(;this.chunkIndex<this.layer.chunk.length;){let n=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(n)||this.layer.chunkEnd(this.chunkIndex)<t||n.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],i,!0);(!r||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(t,i){(this.to-t||this.endSide-i)<0&&this.gotoInner(t,i,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let t=this.layer.chunkPos[this.chunkIndex],i=this.layer.chunk[this.chunkIndex],r=t+i.from[this.rangeIndex];if(this.from=r,this.to=t+i.to[this.rangeIndex],this.value=i.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.rank-t.rank||this.to-t.to||this.endSide-t.endSide}}class Lr{constructor(t){this.heap=t}static from(t,i=null,r=-1){let n=[];for(let o=0;o<t.length;o++)for(let s=t[o];!s.isEmpty;s=s.nextLayer)s.maxPoint>=r&&n.push(new ih(s,i,r,o));return n.length==1?n[0]:new Lr(n)}get startSide(){return this.value?this.value.startSide:0}goto(t,i=-1e9){for(let r of this.heap)r.goto(t,i);for(let r=this.heap.length>>1;r>=0;r--)lo(this.heap,r);return this.next(),this}forward(t,i){for(let r of this.heap)r.forward(t,i);for(let r=this.heap.length>>1;r>=0;r--)lo(this.heap,r);(this.to-t||this.value.endSide-i)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),lo(this.heap,0)}}}function lo(e,t){for(let i=e[t];;){let r=(t<<1)+1;if(r>=e.length)break;let n=e[r];if(r+1<e.length&&n.compare(e[r+1])>=0&&(n=e[r+1],r++),i.compare(n)<0)break;e[r]=i,e[t]=n,t=r}}class Qr{constructor(t,i,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Lr.from(t,i,r)}goto(t,i=-1e9){return this.cursor.goto(t,i),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=i,this.openStart=-1,this.next(),this}forward(t,i){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-i)<0;)this.removeActive(this.minActive);this.cursor.forward(t,i)}removeActive(t){En(this.active,t),En(this.activeTo,t),En(this.activeRank,t),this.minActive=nh(this.active,this.activeTo)}addActive(t){let i=0,{value:r,to:n,rank:o}=this.cursor;for(;i<this.activeRank.length&&this.activeRank[i]<=o;)i++;Tn(this.active,i,r),Tn(this.activeTo,i,n),Tn(this.activeRank,i,o),t&&Tn(t,i,this.cursor.from),this.minActive=nh(this.active,this.activeTo)}next(){let t=this.to,i=this.point;this.point=null;let r=this.openStart<0?[]:null,n=0;for(;;){let o=this.minActive;if(o>-1&&(this.activeTo[o]-this.cursor.from||this.active[o].endSide-this.cursor.startSide)<0){if(this.activeTo[o]>t){this.to=this.activeTo[o],this.endSide=this.active[o].endSide;break}this.removeActive(o),r&&En(r,o)}else if(this.cursor.value)if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.from<t&&this.cursor.to>t&&n++,this.cursor.next();else if(i&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.from<t&&(n=1),this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){let o=0;for(;o<r.length&&r[o]<t;)o++;this.openStart=o+n}}activeForPoint(t){if(!this.active.length)return this.active;let i=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>t||this.activeTo[r]==t&&this.active[r].endSide>=this.point.endSide)&&i.push(this.active[r]);return i.reverse()}openEnd(t){let i=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>t;r--)i++;return i}}function rh(e,t,i,r,n,o){e.goto(t),i.goto(r);let s=r+n,a=r,h=r-t;for(;;){let c=e.to+h-i.to||e.endSide-i.endSide,d=c<0?e.to+h:i.to,f=Math.min(d,s);if(e.point||i.point?e.point&&i.point&&(e.point==i.point||e.point.eq(i.point))&&ao(e.activeForPoint(e.to+h),i.activeForPoint(i.to))||o.comparePoint(a,f,e.point,i.point):f>a&&!ao(e.active,i.active)&&o.compareRange(a,f,e.active,i.active),d>s)break;a=d,c<=0&&e.next(),c>=0&&i.next()}}function ao(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!=t[i]&&!e[i].eq(t[i]))return!1;return!0}function En(e,t){for(let i=t,r=e.length-1;i<r;i++)e[i]=e[i+1];e.pop()}function Tn(e,t,i){for(let r=e.length-1;r>=t;r--)e[r+1]=e[r];e[t]=i}function nh(e,t){let i=-1,r=1e9;for(let n=0;n<t.length;n++)(t[n]-r||e[n].endSide-e[i].endSide)<0&&(i=n,r=t[n]);return i}function Xr(e,t,i=e.length){let r=0;for(let n=0;n<i;)e.charCodeAt(n)==9?(r+=t-r%t,n++):(r++,n=ae(e,n));return r}function ho(e,t,i,r){for(let n=0,o=0;;){if(o>=t)return n;if(n==e.length)break;o+=e.charCodeAt(n)==9?i-o%i:1,n=ae(e,n)}return r===!0?-1:e.length}const uo="\u037C",sh=typeof Symbol>"u"?"__"+uo:Symbol.for(uo),co=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class fi{constructor(t,i){this.rules=[];let{finish:r}=i||{};function n(s){return/^@/.test(s)?[s]:s.split(/,\s*/)}function o(s,a,h,c){let d=[],f=/^@(\w+)\b/.exec(s[0]),m=f&&f[1]=="keyframes";if(f&&a==null)return h.push(s[0]+";");for(let v in a){let S=a[v];if(/&/.test(v))o(v.split(/,\s*/).map(O=>s.map(y=>O.replace(/&/,y))).reduce((O,y)=>O.concat(y)),S,h);else if(S&&typeof S=="object"){if(!f)throw new RangeError("The value of a property ("+v+") should be a primitive value.");o(n(v),S,d,m)}else S!=null&&d.push(v.replace(/_.*/,"").replace(/[A-Z]/g,O=>"-"+O.toLowerCase())+": "+S+";")}(d.length||m)&&h.push((r&&!f&&!c?s.map(r):s).join(", ")+" {"+d.join(" ")+"}")}for(let s in t)o(n(s),t[s],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let t=oh[sh]||1;return oh[sh]=t+1,uo+t.toString(36)}static mount(t,i){(t[co]||new Yf(t)).mount(Array.isArray(i)?i:[i])}}let An=null;class Yf{constructor(t){if(!t.head&&t.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(An)return t.adoptedStyleSheets=[An.sheet].concat(t.adoptedStyleSheets),t[co]=An;this.sheet=new CSSStyleSheet,t.adoptedStyleSheets=[this.sheet].concat(t.adoptedStyleSheets),An=this}else{this.styleTag=(t.ownerDocument||t).createElement("style");let i=t.head||t;i.insertBefore(this.styleTag,i.firstChild)}this.modules=[],t[co]=this}mount(t){let i=this.sheet,r=0,n=0;for(let o=0;o<t.length;o++){let s=t[o],a=this.modules.indexOf(s);if(a<n&&a>-1&&(this.modules.splice(a,1),n--,a=-1),a==-1){if(this.modules.splice(n++,0,s),i)for(let h=0;h<s.rules.length;h++)i.insertRule(s.rules[h],r++)}else{for(;n<a;)r+=this.modules[n++].rules.length;r+=s.rules.length,n++}}if(!i){let o="";for(let s=0;s<this.modules.length;s++)o+=this.modules[s].getRules()+`
`;this.styleTag.textContent=o}}}var mi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},$r={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},lh=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent);typeof navigator<"u"&&/Gecko\/\d+/.test(navigator.userAgent);for(var Wf=typeof navigator<"u"&&/Mac/.test(navigator.platform),jf=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Zf=Wf||lh&&+lh[1]<57,Ht=0;Ht<10;Ht++)mi[48+Ht]=mi[96+Ht]=String(Ht);for(var Ht=1;Ht<=24;Ht++)mi[Ht+111]="F"+Ht;for(var Ht=65;Ht<=90;Ht++)mi[Ht]=String.fromCharCode(Ht+32),$r[Ht]=String.fromCharCode(Ht);for(var po in mi)$r.hasOwnProperty(po)||($r[po]=mi[po]);function zf(e){var t=Zf&&(e.ctrlKey||e.altKey||e.metaKey)||jf&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",i=!t&&e.key||(e.shiftKey?$r:mi)[e.keyCode]||e.key||"Unidentified";return i=="Esc"&&(i="Escape"),i=="Del"&&(i="Delete"),i=="Left"&&(i="ArrowLeft"),i=="Up"&&(i="ArrowUp"),i=="Right"&&(i="ArrowRight"),i=="Down"&&(i="ArrowDown"),i}function kn(e){let t;return e.nodeType==11?t=e.getSelection?e:e.ownerDocument:t=e,t.getSelection()}function Ji(e,t){return t?e==t||e.contains(t.nodeType!=1?t.parentNode:t):!1}function qf(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function _n(e,t){if(!t.anchorNode)return!1;try{return Ji(e,t.anchorNode)}catch{return!1}}function Nr(e){return e.nodeType==3?tr(e,0,e.nodeValue.length).getClientRects():e.nodeType==1?e.getClientRects():[]}function In(e,t,i,r){return i?ah(e,t,i,r,-1)||ah(e,t,i,r,1):!1}function Ln(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t}function ah(e,t,i,r,n){for(;;){if(e==i&&t==r)return!0;if(t==(n<0?0:Fr(e))){if(e.nodeName=="DIV")return!1;let o=e.parentNode;if(!o||o.nodeType!=1)return!1;t=Ln(e)+(n<0?0:1),e=o}else if(e.nodeType==1){if(e=e.childNodes[t+(n<0?-1:0)],e.nodeType==1&&e.contentEditable=="false")return!1;t=n<0?Fr(e):0}else return!1}}function Fr(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}const hh={left:0,right:0,top:0,bottom:0};function Qn(e,t){let i=t?e.left:e.right;return{left:i,right:i,top:e.top,bottom:e.bottom}}function Uf(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function Gf(e,t,i,r,n,o,s,a){let h=e.ownerDocument,c=h.defaultView;for(let d=e;d;)if(d.nodeType==1){let f,m=d==h.body;if(m)f=Uf(c);else{if(d.scrollHeight<=d.clientHeight&&d.scrollWidth<=d.clientWidth){d=d.assignedSlot||d.parentNode;continue}let O=d.getBoundingClientRect();f={left:O.left,right:O.left+d.clientWidth,top:O.top,bottom:O.top+d.clientHeight}}let v=0,S=0;if(n=="nearest")t.top<f.top?(S=-(f.top-t.top+s),i>0&&t.bottom>f.bottom+S&&(S=t.bottom-f.bottom+S+s)):t.bottom>f.bottom&&(S=t.bottom-f.bottom+s,i<0&&t.top-S<f.top&&(S=-(f.top+S-t.top+s)));else{let O=t.bottom-t.top,y=f.bottom-f.top;S=(n=="center"&&O<=y?t.top+O/2-y/2:n=="start"||n=="center"&&i<0?t.top-s:t.bottom-y+s)-f.top}if(r=="nearest"?t.left<f.left?(v=-(f.left-t.left+o),i>0&&t.right>f.right+v&&(v=t.right-f.right+v+o)):t.right>f.right&&(v=t.right-f.right+o,i<0&&t.left<f.left+v&&(v=-(f.left+v-t.left+o))):v=(r=="center"?t.left+(t.right-t.left)/2-(f.right-f.left)/2:r=="start"==a?t.left-o:t.right-(f.right-f.left)+o)-f.left,v||S)if(m)c.scrollBy(v,S);else{let O=0,y=0;if(S){let P=d.scrollTop;d.scrollTop+=S,y=d.scrollTop-P}if(v){let P=d.scrollLeft;d.scrollLeft+=v,O=d.scrollLeft-P}t={left:t.left-O,top:t.top-y,right:t.right-O,bottom:t.bottom-y},O&&Math.abs(O-v)<1&&(r="nearest"),y&&Math.abs(y-S)<1&&(n="nearest")}if(m)break;d=d.assignedSlot||d.parentNode}else if(d.nodeType==11)d=d.host;else break}class Vf{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){this.set(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset)}set(t,i,r,n){this.anchorNode=t,this.anchorOffset=i,this.focusNode=r,this.focusOffset=n}}let Ki=null;function uh(e){if(e.setActive)return e.setActive();if(Ki)return e.focus(Ki);let t=[];for(let i=e;i&&(t.push(i,i.scrollTop,i.scrollLeft),i!=i.ownerDocument);i=i.parentNode);if(e.focus(Ki==null?{get preventScroll(){return Ki={preventScroll:!0},!0}}:void 0),!Ki){Ki=!1;for(let i=0;i<t.length;){let r=t[i++],n=t[i++],o=t[i++];r.scrollTop!=n&&(r.scrollTop=n),r.scrollLeft!=o&&(r.scrollLeft=o)}}}let ch;function tr(e,t,i=t){let r=ch||(ch=document.createRange());return r.setEnd(e,i),r.setStart(e,t),r}function Mr(e,t,i){let r={key:t,code:t,keyCode:i,which:i,cancelable:!0},n=new KeyboardEvent("keydown",r);n.synthetic=!0,e.dispatchEvent(n);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,e.dispatchEvent(o),n.defaultPrevented||o.defaultPrevented}function Hf(e){for(;e;){if(e&&(e.nodeType==9||e.nodeType==11&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}function ph(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}function Jf(e,t){let i=t.focusNode,r=t.focusOffset;if(!i||t.anchorNode!=i||t.anchorOffset!=r)return!1;for(;;)if(r){if(i.nodeType!=1)return!1;let n=i.childNodes[r-1];n.contentEditable=="false"?r--:(i=n,r=Fr(i))}else{if(i==e)return!0;r=Ln(i),i=i.parentNode}}class re{constructor(t,i,r=!0){this.node=t,this.offset=i,this.precise=r}static before(t,i){return new re(t.parentNode,Ln(t),i)}static after(t,i){return new re(t.parentNode,Ln(t)+1,i)}}const fo=[];class wt{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let i=this.posAtStart;for(let r of this.children){if(r==t)return i;i+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}coordsAt(t,i){return null}sync(t){if(this.dirty&2){let i=this.dom,r=null,n;for(let o of this.children){if(o.dirty){if(!o.dom&&(n=r?r.nextSibling:i.firstChild)){let s=wt.get(n);(!s||!s.parent&&s.constructor==o.constructor)&&o.reuseDOM(n)}o.sync(t),o.dirty=0}if(n=r?r.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&n!=o.dom&&(t.written=!0),o.dom.parentNode==i)for(;n&&n!=o.dom;)n=dh(n);else i.insertBefore(o.dom,n);r=o.dom}for(n=r?r.nextSibling:i.firstChild,n&&t&&t.node==i&&(t.written=!0);n;)n=dh(n)}else if(this.dirty&1)for(let i of this.children)i.dirty&&(i.sync(t),i.dirty=0)}reuseDOM(t){}localPosFromDOM(t,i){let r;if(t==this.dom)r=this.dom.childNodes[i];else{let n=Fr(t)==0?0:i==0?-1:1;for(;;){let o=t.parentNode;if(o==this.dom)break;n==0&&o.firstChild!=o.lastChild&&(t==o.firstChild?n=-1:n=1),t=o}n<0?r=t:r=t.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!wt.get(r);)r=r.nextSibling;if(!r)return this.length;for(let n=0,o=0;;n++){let s=this.children[n];if(s.dom==r)return o;o+=s.length+s.breakAfter}}domBoundsAround(t,i,r=0){let n=-1,o=-1,s=-1,a=-1;for(let h=0,c=r,d=r;h<this.children.length;h++){let f=this.children[h],m=c+f.length;if(c<t&&m>i)return f.domBoundsAround(t,i,c);if(m>=t&&n==-1&&(n=h,o=c),c>i&&f.dom.parentNode==this.dom){s=h,a=d;break}d=m,c=m+f.breakAfter}return{from:o,to:a<0?r+this.length:a,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(t=!1){this.dirty|=2,this.markParentsDirty(t)}markParentsDirty(t){for(let i=this.parent;i;i=i.parent){if(t&&(i.dirty|=2),i.dirty&1)return;i.dirty|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,this.dirty&&this.markParentsDirty(!0))}setDOM(t){this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this}get rootView(){for(let t=this;;){let i=t.parent;if(!i)return t;t=i}}replaceChildren(t,i,r=fo){this.markDirty();for(let n=t;n<i;n++){let o=this.children[n];o.parent==this&&o.destroy()}this.children.splice(t,i-t,...r);for(let n=0;n<r.length;n++)r[n].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new fh(this.children,t,this.children.length)}childPos(t,i=1){return this.childCursor().findPos(t,i)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+(t=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}get isEditable(){return!0}merge(t,i,r,n,o,s){return!1}become(t){return!1}getSide(){return 0}destroy(){this.parent=null}}wt.prototype.breakAfter=0;function dh(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class fh{constructor(t,i,r){this.children=t,this.pos=i,this.i=r,this.off=0}findPos(t,i=1){for(;;){if(t>this.pos||t==this.pos&&(i>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function mh(e,t,i,r,n,o,s,a,h){let{children:c}=e,d=c.length?c[t]:null,f=o.length?o[o.length-1]:null,m=f?f.breakAfter:s;if(!(t==r&&d&&!s&&!m&&o.length<2&&d.merge(i,n,o.length?f:null,i==0,a,h))){if(r<c.length){let v=c[r];v&&n<v.length?(t==r&&(v=v.split(n),n=0),!m&&f&&v.merge(0,n,f,!0,0,h)?o[o.length-1]=v:(n&&v.merge(0,n,null,!1,0,h),o.push(v))):v!=null&&v.breakAfter&&(f?f.breakAfter=1:s=1),r++}for(d&&(d.breakAfter=s,i>0&&(!s&&o.length&&d.merge(i,d.length,o[0],!1,a,0)?d.breakAfter=o.shift().breakAfter:(i<d.length||d.children.length&&d.children[d.children.length-1].length==0)&&d.merge(i,d.length,null,!1,a,0),t++));t<r&&o.length;)if(c[r-1].become(o[o.length-1]))r--,o.pop(),h=o.length?0:a;else if(c[t].become(o[0]))t++,o.shift(),a=o.length?0:h;else break;!o.length&&t&&r<c.length&&!c[t-1].breakAfter&&c[r].merge(0,0,c[t-1],!1,a,h)&&t--,(t<r||o.length)&&e.replaceChildren(t,r,o)}}function Oh(e,t,i,r,n,o){let s=e.childCursor(),{i:a,off:h}=s.findPos(i,1),{i:c,off:d}=s.findPos(t,-1),f=t-i;for(let m of r)f+=m.length;e.length+=f,mh(e,c,d,a,h,r,0,n,o)}let Ce=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},mo=typeof document<"u"?document:{documentElement:{style:{}}};const Oo=/Edge\/(\d+)/.exec(Ce.userAgent),gh=/MSIE \d/.test(Ce.userAgent),go=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ce.userAgent),Xn=!!(gh||go||Oo),yh=!Xn&&/gecko\/(\d+)/i.test(Ce.userAgent),yo=!Xn&&/Chrome\/(\d+)/.exec(Ce.userAgent),xh="webkitFontSmoothing"in mo.documentElement.style,vh=!Xn&&/Apple Computer/.test(Ce.vendor),Ph=vh&&(/Mobile\/\w+/.test(Ce.userAgent)||Ce.maxTouchPoints>2);var J={mac:Ph||/Mac/.test(Ce.platform),windows:/Win/.test(Ce.platform),linux:/Linux|X11/.test(Ce.platform),ie:Xn,ie_version:gh?mo.documentMode||6:go?+go[1]:Oo?+Oo[1]:0,gecko:yh,gecko_version:yh?+(/Firefox\/(\d+)/.exec(Ce.userAgent)||[0,0])[1]:0,chrome:!!yo,chrome_version:yo?+yo[1]:0,ios:Ph,android:/Android\b/.test(Ce.userAgent),webkit:xh,safari:vh,webkit_version:xh?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:mo.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Kf=256;class Oi extends wt{constructor(t){super(),this.text=t}get length(){return this.text.length}createDOM(t){this.setDOM(t||document.createTextNode(this.text))}sync(t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(t){t.nodeType==3&&this.createDOM(t)}merge(t,i,r){return r&&(!(r instanceof Oi)||this.length-(i-t)+r.length>Kf)?!1:(this.text=this.text.slice(0,t)+(r?r.text:"")+this.text.slice(i),this.markDirty(),!0)}split(t){let i=new Oi(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),i}localPosFromDOM(t,i){return t==this.dom?i:i?this.text.length:0}domAtPos(t){return new re(this.dom,t)}domBoundsAround(t,i,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,i){return xo(this.dom,t,i)}}class qe extends wt{constructor(t,i=[],r=0){super(),this.mark=t,this.children=i,this.length=r;for(let n of i)n.setParent(this)}setAttrs(t){if(ph(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(let i in this.mark.attrs)t.setAttribute(i,this.mark.attrs[i]);return t}reuseDOM(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.dirty|=6)}sync(t){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(t)}merge(t,i,r,n,o,s){return r&&(!(r instanceof qe&&r.mark.eq(this.mark))||t&&o<=0||i<this.length&&s<=0)?!1:(Oh(this,t,i,r?r.children:[],o-1,s-1),this.markDirty(),!0)}split(t){let i=[],r=0,n=-1,o=0;for(let a of this.children){let h=r+a.length;h>t&&i.push(r<t?a.split(t-r):a),n<0&&r>=t&&(n=o),r=h,o++}let s=this.length-t;return this.length=t,n>-1&&(this.children.length=n,this.markDirty()),new qe(this.mark,i,s)}domAtPos(t){return wh(this,t)}coordsAt(t,i){return Dh(this,t,i)}}function xo(e,t,i){let r=e.nodeValue.length;t>r&&(t=r);let n=t,o=t,s=0;t==0&&i<0||t==r&&i>=0?J.chrome||J.gecko||(t?(n--,s=1):o<r&&(o++,s=-1)):i<0?n--:o<r&&o++;let a=tr(e,n,o).getClientRects();if(!a.length)return hh;let h=a[(s?s<0:i>=0)?0:a.length-1];return J.safari&&!s&&h.width==0&&(h=Array.prototype.find.call(a,c=>c.width)||h),s?Qn(h,s<0):h||null}class gi extends wt{constructor(t,i,r){super(),this.widget=t,this.length=i,this.side=r,this.prevWidget=null}static create(t,i,r){return new(t.customView||gi)(t,i,r)}split(t){let i=gi.create(this.widget,this.length-t,this.side);return this.length-=t,i}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(t,i,r,n,o,s){return r&&(!(r instanceof gi)||!this.widget.compare(r.widget)||t>0&&o<=0||i<this.length&&s<=0)?!1:(this.length=t+(r?r.length:0)+(this.length-i),!0)}become(t){return t.length==this.length&&t instanceof gi&&t.side==this.side&&this.widget.constructor==t.widget.constructor?(this.widget.eq(t.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(this.length==0)return yt.empty;let t=this;for(;t.parent;)t=t.parent;let i=t.editorView,r=i&&i.state.doc,n=this.posAtStart;return r?r.slice(n,n+this.length):yt.empty}domAtPos(t){return t==0?re.before(this.dom):re.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,i){let r=this.dom.getClientRects(),n=null;if(!r.length)return hh;for(let o=t>0?r.length-1:0;n=r[o],!(t>0?o==0:o==r.length-1||n.top<n.bottom);o+=t>0?-1:1);return t==0&&i>0||t==this.length&&i<=0?n:Qn(n,t==0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Ch extends gi{domAtPos(t){let{topView:i,text:r}=this.widget;return i?vo(t,0,i,r,(n,o)=>n.domAtPos(o),n=>new re(r,Math.min(n,r.nodeValue.length))):new re(r,Math.min(t,r.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(t,i){let{topView:r,text:n}=this.widget;return r?Sh(t,i,r,n):Math.min(i,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(t,i){let{topView:r,text:n}=this.widget;return r?vo(t,i,r,n,(o,s,a)=>o.coordsAt(s,a),(o,s)=>xo(n,o,s)):xo(n,t,i)}destroy(){var t;super.destroy(),(t=this.widget.topView)===null||t===void 0||t.destroy()}get isEditable(){return!0}}function vo(e,t,i,r,n,o){if(i instanceof qe){for(let s=i.dom.firstChild;s;s=s.nextSibling){let a=wt.get(s);if(!a)return o(e,t);let h=Ji(s,r),c=a.length+(h?r.nodeValue.length:0);if(e<c||e==c&&a.getSide()<=0)return h?vo(e,t,a,r,n,o):n(a,e,t);e-=c}return n(i,i.length,-1)}else return i.dom==r?o(e,t):n(i,e,t)}function Sh(e,t,i,r){if(i instanceof qe)for(let n of i.children){let o=0,s=Ji(n.dom,r);if(Ji(n.dom,e))return o+(s?Sh(e,t,n,r):n.localPosFromDOM(e,t));o+=s?r.nodeValue.length:n.length}else if(i.dom==r)return Math.min(t,r.nodeValue.length);return i.localPosFromDOM(e,t)}class er extends wt{constructor(t){super(),this.side=t}get length(){return 0}merge(){return!1}become(t){return t instanceof er&&t.side==this.side}split(){return new er(this.side)}sync(){if(!this.dom){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),this.setDOM(t)}}getSide(){return this.side}domAtPos(t){return re.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(t){let i=this.dom.getBoundingClientRect(),r=t0(this,this.side>0?-1:1);return r&&r.top<i.bottom&&r.bottom>i.top?{left:i.left,right:i.right,top:r.top,bottom:r.bottom}:i}get overrideDOMText(){return yt.empty}}Oi.prototype.children=gi.prototype.children=er.prototype.children=fo;function t0(e,t){let i=e.parent,r=i?i.children.indexOf(e):-1;for(;i&&r>=0;)if(t<0?r>0:r<i.children.length){let n=i.children[r+t];if(n instanceof Oi){let o=n.coordsAt(t<0?n.length:0,t);if(o)return o}r+=t}else if(i instanceof qe&&i.parent)r=i.parent.children.indexOf(i)+(t<0?0:1),i=i.parent;else{let n=i.dom.lastChild;if(n&&n.nodeName=="BR")return n.getClientRects()[0];break}}function wh(e,t){let i=e.dom,{children:r}=e,n=0;for(let o=0;n<r.length;n++){let s=r[n],a=o+s.length;if(!(a==o&&s.getSide()<=0)){if(t>o&&t<a&&s.dom.parentNode==i)return s.domAtPos(t-o);if(t<=o)break;o=a}}for(let o=n;o>0;o--){let s=r[o-1];if(s.dom.parentNode==i)return s.domAtPos(s.length)}for(let o=n;o<r.length;o++){let s=r[o];if(s.dom.parentNode==i)return s.domAtPos(0)}return new re(i,0)}function bh(e,t,i){let r,{children:n}=e;i>0&&t instanceof qe&&n.length&&(r=n[n.length-1])instanceof qe&&r.mark.eq(t.mark)?bh(r,t.children[0],i-1):(n.push(t),t.setParent(e)),e.length+=t.length}function Dh(e,t,i){for(let o=0,s=0;s<e.children.length;s++){let a=e.children[s],h=o+a.length,c;if((i<=0||h==e.length||a.getSide()>0?h>=t:h>t)&&(t<h||s+1==e.children.length||(c=e.children[s+1]).length||c.getSide()>0)){let d=0;if(h==o){if(a.getSide()<=0)continue;d=i=-a.getSide()}let f=a.coordsAt(Math.max(0,t-o),i);return d&&f?Qn(f,i<0):f}o=h}let r=e.dom.lastChild;if(!r)return e.dom.getBoundingClientRect();let n=Nr(r);return n[n.length-1]||null}function Po(e,t){for(let i in e)i=="class"&&t.class?t.class+=" "+e.class:i=="style"&&t.style?t.style+=";"+e.style:t[i]=e[i];return t}function Co(e,t){if(e==t)return!0;if(!e||!t)return!1;let i=Object.keys(e),r=Object.keys(t);if(i.length!=r.length)return!1;for(let n of i)if(r.indexOf(n)==-1||e[n]!==t[n])return!1;return!0}function So(e,t,i){let r=null;if(t)for(let n in t)i&&n in i||e.removeAttribute(r=n);if(i)for(let n in i)t&&t[n]==i[n]||e.setAttribute(r=n,i[n]);return!!r}class oi{eq(t){return!1}updateDOM(t){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}ignoreEvent(t){return!0}get customView(){return null}destroy(t){}}var Pt=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(Pt||(Pt={}));class et extends Xi{constructor(t,i,r,n){super(),this.startSide=t,this.endSide=i,this.widget=r,this.spec=n}get heightRelevant(){return!1}static mark(t){return new $n(t)}static widget(t){let i=t.side||0,r=!!t.block;return i+=r?i>0?3e8:-4e8:i>0?1e8:-1e8,new $i(t,i,i,r,t.widget||null,!1)}static replace(t){let i=!!t.block,r,n;if(t.isBlockGap)r=-5e8,n=4e8;else{let{start:o,end:s}=Eh(t,i);r=(o?i?-3e8:-1:5e8)-1,n=(s?i?2e8:1:-6e8)+1}return new $i(t,r,n,i,t.widget||null,!0)}static line(t){return new Br(t)}static set(t,i=!1){return xt.of(t,i)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}et.none=xt.empty;class $n extends et{constructor(t){let{start:i,end:r}=Eh(t);super(i?-1:5e8,r?1:-6e8,null,t),this.tagName=t.tagName||"span",this.class=t.class||"",this.attrs=t.attributes||null}eq(t){return this==t||t instanceof $n&&this.tagName==t.tagName&&this.class==t.class&&Co(this.attrs,t.attrs)}range(t,i=t){if(t>=i)throw new RangeError("Mark decorations may not be empty");return super.range(t,i)}}$n.prototype.point=!1;class Br extends et{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof Br&&Co(this.spec.attributes,t.spec.attributes)}range(t,i=t){if(i!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,i)}}Br.prototype.mapMode=Vt.TrackBefore,Br.prototype.point=!0;class $i extends et{constructor(t,i,r,n,o,s){super(i,r,o,t),this.block=n,this.isReplace=s,this.mapMode=n?i<=0?Vt.TrackBefore:Vt.TrackAfter:Vt.TrackDel}get type(){return this.startSide<this.endSide?Pt.WidgetRange:this.startSide<=0?Pt.WidgetBefore:Pt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(t){return t instanceof $i&&e0(this.widget,t.widget)&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide}range(t,i=t){if(this.isReplace&&(t>i||t==i&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&i!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,i)}}$i.prototype.point=!0;function Eh(e,t=!1){let{inclusiveStart:i,inclusiveEnd:r}=e;return i==null&&(i=e.inclusive),r==null&&(r=e.inclusive),{start:i!=null?i:t,end:r!=null?r:t}}function e0(e,t){return e==t||!!(e&&t&&e.compare(t))}function wo(e,t,i,r=0){let n=i.length-1;n>=0&&i[n]+r>=e?i[n]=Math.max(i[n],t):i.push(e,t)}class he extends wt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,i,r,n,o,s){if(r){if(!(r instanceof he))return!1;this.dom||r.transferDOM(this)}return n&&this.setDeco(r?r.attrs:null),Oh(this,t,i,r?r.children:[],o,s),!0}split(t){let i=new he;if(i.breakAfter=this.breakAfter,this.length==0)return i;let{i:r,off:n}=this.childPos(t);n&&(i.append(this.children[r].split(n),0),this.children[r].merge(n,this.children[r].length,null,!1,0,0),r++);for(let o=r;o<this.children.length;o++)i.append(this.children[o],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=t,i}transferDOM(t){!this.dom||(this.markDirty(),t.setDOM(this.dom),t.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){Co(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t,i){bh(this,t,i)}addLineDeco(t){let i=t.spec.attributes,r=t.spec.class;i&&(this.attrs=Po(i,this.attrs||{})),r&&(this.attrs=Po({class:r},this.attrs||{}))}domAtPos(t){return wh(this,t)}reuseDOM(t){t.nodeName=="DIV"&&(this.setDOM(t),this.dirty|=6)}sync(t){var i;this.dom?this.dirty&4&&(ph(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(So(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(t);let r=this.dom.lastChild;for(;r&&wt.get(r)instanceof qe;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=wt.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!J.ios||!this.children.some(n=>n instanceof Oi))){let n=document.createElement("BR");n.cmIgnore=!0,this.dom.appendChild(n)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let t=0;for(let i of this.children){if(!(i instanceof Oi)||/[^ -~]/.test(i.text))return null;let r=Nr(i.dom);if(r.length!=1)return null;t+=r[0].width}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length}:null}coordsAt(t,i){return Dh(this,t,i)}become(t){return!1}get type(){return Pt.Text}static find(t,i){for(let r=0,n=0;r<t.children.length;r++){let o=t.children[r],s=n+o.length;if(s>=i){if(o instanceof he)return o;if(s>i)break}n=s+o.breakAfter}return null}}class Ni extends wt{constructor(t,i,r){super(),this.widget=t,this.length=i,this.type=r,this.breakAfter=0,this.prevWidget=null}merge(t,i,r,n,o,s){return r&&(!(r instanceof Ni)||!this.widget.compare(r.widget)||t>0&&o<=0||i<this.length&&s<=0)?!1:(this.length=t+(r?r.length:0)+(this.length-i),!0)}domAtPos(t){return t==0?re.before(this.dom):re.after(this.dom,t==this.length)}split(t){let i=this.length-t;this.length=t;let r=new Ni(this.widget,i,this.type);return r.breakAfter=this.breakAfter,r}get children(){return fo}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):yt.empty}domBoundsAround(){return null}become(t){return t instanceof Ni&&t.type==this.type&&t.widget.constructor==this.widget.constructor?(t.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,this.breakAfter=t.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class bo{constructor(t,i,r,n){this.doc=t,this.pos=i,this.end=r,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=i}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!t.breakAfter&&!(t instanceof Ni&&t.type==Pt.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new he),this.atCursorPos=!0),this.curLine}flushBuffer(t){this.pendingBuffer&&(this.curLine.append(Nn(new er(-1),t),t.length),this.pendingBuffer=0)}addBlockWidget(t){this.flushBuffer([]),this.curLine=null,this.content.push(t)}finish(t){t?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(t,i,r){for(;t>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:s,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(s){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,t--;continue}else this.text=o,this.textOff=0}let n=Math.min(this.text.length-this.textOff,t,512);this.flushBuffer(i.slice(0,r)),this.getLine().append(Nn(new Oi(this.text.slice(this.textOff,this.textOff+n)),i),r),this.atCursorPos=!0,this.textOff+=n,t-=n,r=0}}span(t,i,r,n){this.buildText(i-t,r,n),this.pos=i,this.openStart<0&&(this.openStart=n)}point(t,i,r,n,o,s){if(this.disallowBlockEffectsFor[s]&&r instanceof $i){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(i>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=i-t;if(r instanceof $i)if(r.block){let{type:h}=r;h==Pt.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Ni(r.widget||new Th("div"),a,h))}else{let h=gi.create(r.widget||new Th("span"),a,r.startSide),c=this.atCursorPos&&!h.isEditable&&o<=n.length&&(t<i||r.startSide>0),d=!h.isEditable&&(t<i||r.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!c&&(this.pendingBuffer=0),this.flushBuffer(n),c&&(f.append(Nn(new er(1),n),o),o=n.length+Math.max(0,o-n.length)),f.append(Nn(h,n),o),this.atCursorPos=d,this.pendingBuffer=d?t<i?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=i),this.openStart<0&&(this.openStart=o)}static build(t,i,r,n,o){let s=new bo(t,i,r,o);return s.openEnd=xt.spans(n,i,r,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}}function Nn(e,t){for(let i of t)e=new qe(i,[e],e.length);return e}class Th extends oi{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}}const Ah=H.define(),kh=H.define(),_h=H.define(),Ih=H.define(),Do=H.define(),Lh=H.define(),Qh=H.define({combine:e=>e.some(t=>t)});class Fn{constructor(t,i="nearest",r="nearest",n=5,o=5){this.range=t,this.y=i,this.x=r,this.yMargin=n,this.xMargin=o}map(t){return t.empty?this:new Fn(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin)}}const Xh=nt.define({map:(e,t)=>e.map(t)});function Se(e,t,i){let r=e.facet(Ih);r.length?r[0](t):window.onerror?window.onerror(String(t),i,void 0,void 0,t):i?console.error(i+":",t):console.error(t)}const Mn=H.define({combine:e=>e.length?e[0]:!0});let i0=0;const Rr=H.define();class Nt{constructor(t,i,r,n){this.id=t,this.create=i,this.domEventHandlers=r,this.extension=n(this)}static define(t,i){const{eventHandlers:r,provide:n,decorations:o}=i||{};return new Nt(i0++,t,r,s=>{let a=[Rr.of(s)];return o&&a.push(Yr.of(h=>{let c=h.plugin(s);return c?o(c):et.none})),n&&a.push(n(s)),a})}static fromClass(t,i){return Nt.define(r=>new t(r),i)}}class Eo{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}update(t){if(this.value){if(this.mustUpdate){let i=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(i)}catch(r){if(Se(i.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(t)}catch(i){Se(t.state,i,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var i;if(!((i=this.value)===null||i===void 0)&&i.destroy)try{this.value.destroy()}catch(r){Se(t.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const $h=H.define(),Nh=H.define(),Yr=H.define(),Fh=H.define(),Mh=H.define(),Wr=H.define();class li{constructor(t,i,r,n){this.fromA=t,this.toA=i,this.fromB=r,this.toB=n}join(t){return new li(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let i=t.length,r=this;for(;i>0;i--){let n=t[i-1];if(!(n.fromA>r.toA)){if(n.toA<r.fromA)break;r=r.join(n),t.splice(i-1,1)}}return t.splice(i,0,r),t}static extendWithRanges(t,i){if(i.length==0)return t;let r=[];for(let n=0,o=0,s=0,a=0;;n++){let h=n==t.length?null:t[n],c=s-a,d=h?h.fromB:1e9;for(;o<i.length&&i[o]<d;){let f=i[o],m=i[o+1],v=Math.max(a,f),S=Math.min(d,m);if(v<=S&&new li(v+c,S+c,v,S).addToSet(r),m>d)break;o+=2}if(!h)return r;new li(h.fromA,h.toA,h.fromB,h.toB).addToSet(r),s=h.toA,a=h.toB}}}class Bn{constructor(t,i,r){this.view=t,this.state=i,this.transactions=r,this.flags=0,this.startState=t.state,this.changes=Bt.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let n=[];this.changes.iterChangedRanges((s,a,h,c)=>n.push(new li(s,a,h,c))),this.changedRanges=n;let o=t.hasFocus;o!=t.inputState.notifiedFocused&&(t.inputState.notifiedFocused=o,this.flags|=1)}static create(t,i,r){return new Bn(t,i,r)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(t=>t.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var At=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(At||(At={}));const To=At.LTR,r0=At.RTL;function Bh(e){let t=[];for(let i=0;i<e.length;i++)t.push(1<<+e[i]);return t}const n0=Bh("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),s0=Bh("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Ao=Object.create(null),Ue=[];for(let e of["()","[]","{}"]){let t=e.charCodeAt(0),i=e.charCodeAt(1);Ao[t]=i,Ao[i]=-t}function o0(e){return e<=247?n0[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?s0[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8203?256:64336<=e&&e<=65023?4:e==8204?256:1}const l0=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ir{constructor(t,i,r){this.from=t,this.to=i,this.level=r}get dir(){return this.level%2?r0:To}side(t,i){return this.dir==i==t?this.to:this.from}static find(t,i,r,n){let o=-1;for(let s=0;s<t.length;s++){let a=t[s];if(a.from<=i&&a.to>=i){if(a.level==r)return s;(o<0||(n!=0?n<0?a.from<i:a.to>i:t[o].level>a.level))&&(o=s)}}if(o<0)throw new RangeError("Index out of range");return o}}const kt=[];function a0(e,t){let i=e.length,r=t==To?1:2,n=t==To?2:1;if(!e||r==1&&!l0.test(e))return Rh(i);for(let s=0,a=r,h=r;s<i;s++){let c=o0(e.charCodeAt(s));c==512?c=a:c==8&&h==4&&(c=16),kt[s]=c==4?2:c,c&7&&(h=c),a=c}for(let s=0,a=r,h=r;s<i;s++){let c=kt[s];if(c==128)s<i-1&&a==kt[s+1]&&a&24?c=kt[s]=a:kt[s]=256;else if(c==64){let d=s+1;for(;d<i&&kt[d]==64;)d++;let f=s&&a==8||d<i&&kt[d]==8?h==1?1:8:256;for(let m=s;m<d;m++)kt[m]=f;s=d-1}else c==8&&h==1&&(kt[s]=1);a=c,c&7&&(h=c)}for(let s=0,a=0,h=0,c,d,f;s<i;s++)if(d=Ao[c=e.charCodeAt(s)])if(d<0){for(let m=a-3;m>=0;m-=3)if(Ue[m+1]==-d){let v=Ue[m+2],S=v&2?r:v&4?v&1?n:r:0;S&&(kt[s]=kt[Ue[m]]=S),a=m;break}}else{if(Ue.length==189)break;Ue[a++]=s,Ue[a++]=c,Ue[a++]=h}else if((f=kt[s])==2||f==1){let m=f==r;h=m?0:1;for(let v=a-3;v>=0;v-=3){let S=Ue[v+2];if(S&2)break;if(m)Ue[v+2]|=2;else{if(S&4)break;Ue[v+2]|=4}}}for(let s=0;s<i;s++)if(kt[s]==256){let a=s+1;for(;a<i&&kt[a]==256;)a++;let h=(s?kt[s-1]:r)==1,c=(a<i?kt[a]:r)==1,d=h==c?h?1:2:r;for(let f=s;f<a;f++)kt[f]=d;s=a-1}let o=[];if(r==1)for(let s=0;s<i;){let a=s,h=kt[s++]!=1;for(;s<i&&h==(kt[s]!=1);)s++;if(h)for(let c=s;c>a;){let d=c,f=kt[--c]!=2;for(;c>a&&f==(kt[c-1]!=2);)c--;o.push(new ir(c,d,f?2:1))}else o.push(new ir(a,s,0))}else for(let s=0;s<i;){let a=s,h=kt[s++]==2;for(;s<i&&h==(kt[s]==2);)s++;o.push(new ir(a,s,h?1:2))}return o}function Rh(e){return[new ir(0,e,0)]}let Yh="";function h0(e,t,i,r,n){var o;let s=r.head-e.from,a=-1;if(s==0){if(!n||!e.length)return null;t[0].level!=i&&(s=t[0].side(!1,i),a=0)}else if(s==e.length){if(n)return null;let m=t[t.length-1];m.level!=i&&(s=m.side(!0,i),a=t.length-1)}a<0&&(a=ir.find(t,s,(o=r.bidiLevel)!==null&&o!==void 0?o:-1,r.assoc));let h=t[a];s==h.side(n,i)&&(h=t[a+=n?1:-1],s=h.side(!n,i));let c=n==(h.dir==i),d=ae(e.text,s,c);if(Yh=e.text.slice(Math.min(s,d),Math.max(s,d)),d!=h.side(n,i))return Y.cursor(d+e.from,c?-1:1,h.level);let f=a==(n?t.length-1:0)?null:t[a+(n?1:-1)];return!f&&h.level!=i?Y.cursor(n?e.to:e.from,n?-1:1,i):f&&f.level<h.level?Y.cursor(f.side(!n,i)+e.from,n?1:-1,f.level):Y.cursor(d+e.from,n?-1:1,h.level)}const yi="\uFFFF";class Wh{constructor(t,i){this.points=t,this.text="",this.lineSeparator=i.facet(Ot.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=yi}readRange(t,i){if(!t)return this;let r=t.parentNode;for(let n=t;;){this.findPointBefore(r,n),this.readNode(n);let o=n.nextSibling;if(o==i)break;let s=wt.get(n),a=wt.get(o);(s&&a?s.breakAfter:(s?s.breakAfter:jh(n))||jh(o)&&(n.nodeName!="BR"||n.cmIgnore))&&this.lineBreak(),n=o}return this.findPointBefore(r,i),this}readTextNode(t){let i=t.nodeValue;for(let r of this.points)r.node==t&&(r.pos=this.text.length+Math.min(r.offset,i.length));for(let r=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,s=1,a;if(this.lineSeparator?(o=i.indexOf(this.lineSeparator,r),s=this.lineSeparator.length):(a=n.exec(i))&&(o=a.index,s=a[0].length),this.append(i.slice(r,o<0?i.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let h of this.points)h.node==t&&h.pos>this.text.length&&(h.pos-=s-1);r=o+s}}readNode(t){if(t.cmIgnore)return;let i=wt.get(t),r=i&&i.overrideDOMText;if(r!=null){this.findPointInside(t,r.length);for(let n=r.iter();!n.next().done;)n.lineBreak?this.lineBreak():this.append(n.value)}else t.nodeType==3?this.readTextNode(t):t.nodeName=="BR"?t.nextSibling&&this.lineBreak():t.nodeType==1&&this.readRange(t.firstChild,null)}findPointBefore(t,i){for(let r of this.points)r.node==t&&t.childNodes[r.offset]==i&&(r.pos=this.text.length)}findPointInside(t,i){for(let r of this.points)(t.nodeType==3?r.node==t:t.contains(r.node))&&(r.pos=this.text.length+Math.min(i,r.offset))}}function jh(e){return e.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}class Zh{constructor(t,i){this.node=t,this.offset=i,this.pos=-1}}class zh extends wt{constructor(t){super(),this.view=t,this.compositionDeco=et.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(t.contentDOM),this.children=[new he],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new li(0,0,0,t.state.doc.length)],0)}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(t){let i=t.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:s,toA:a})=>a<this.minWidthFrom||s>this.minWidthTo)?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=et.none:(t.transactions.length||this.dirty)&&(this.compositionDeco=c0(this.view,t.changes)),(J.ie||J.chrome)&&!this.compositionDeco.size&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let r=this.decorations,n=this.updateDeco(),o=m0(r,n,t.changes);return i=li.extendWithRanges(i,o),this.dirty==0&&i.length==0?!1:(this.updateInner(i,t.startState.doc.length),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=J.chrome||J.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(o),this.dirty=0,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""});let n=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Ni&&o.widget instanceof qh&&n.push(o.dom);r.updateGaps(n)}updateChildren(t,i){let r=this.childCursor(i);for(let n=t.length-1;;n--){let o=n>=0?t[n]:null;if(!o)break;let{fromA:s,toA:a,fromB:h,toB:c}=o,{content:d,breakAtStart:f,openStart:m,openEnd:v}=bo.build(this.view.state.doc,h,c,this.decorations,this.dynamicDecorationMap),{i:S,off:O}=r.findPos(a,1),{i:y,off:P}=r.findPos(s,-1);mh(this,y,P,S,O,d,f,m,v)}}updateSelection(t=!1,i=!1){if((t||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!(i||this.mayControlSelection()))return;let r=this.forceSelection;this.forceSelection=!1;let n=this.view.state.selection.main,o=this.domAtPos(n.anchor),s=n.empty?o:this.domAtPos(n.head);if(J.gecko&&n.empty&&u0(o)){let h=document.createTextNode("");this.view.observer.ignore(()=>o.node.insertBefore(h,o.node.childNodes[o.offset]||null)),o=s=new re(h,0),r=!0}let a=this.view.observer.selectionRange;(r||!a.focusNode||!In(o.node,o.offset,a.anchorNode,a.anchorOffset)||!In(s.node,s.offset,a.focusNode,a.focusOffset))&&(this.view.observer.ignore(()=>{J.android&&J.chrome&&this.dom.contains(a.focusNode)&&O0(a.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let h=kn(this.view.root);if(h)if(n.empty){if(J.gecko){let c=d0(o.node,o.offset);if(c&&c!=3){let d=Gh(o.node,o.offset,c==1?1:-1);d&&(o=new re(d,c==1?0:d.nodeValue.length))}}h.collapse(o.node,o.offset),n.bidiLevel!=null&&a.cursorBidiLevel!=null&&(a.cursorBidiLevel=n.bidiLevel)}else if(h.extend)h.collapse(o.node,o.offset),h.extend(s.node,s.offset);else{let c=document.createRange();n.anchor>n.head&&([o,s]=[s,o]),c.setEnd(s.node,s.offset),c.setStart(o.node,o.offset),h.removeAllRanges(),h.addRange(c)}}),this.view.observer.setSelectionRange(o,s)),this.impreciseAnchor=o.precise?null:new re(a.anchorNode,a.anchorOffset),this.impreciseHead=s.precise?null:new re(a.focusNode,a.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let t=this.view.state.selection.main,i=kn(this.view.root);if(!i||!t.empty||!t.assoc||!i.modify)return;let r=he.find(this,t.head);if(!r)return;let n=r.posAtStart;if(t.head==n||t.head==n+r.length)return;let o=this.coordsAt(t.head,-1),s=this.coordsAt(t.head,1);if(!o||!s||o.bottom>s.top)return;let a=this.domAtPos(t.head+t.assoc);i.collapse(a.node,a.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){let t=this.view.root.activeElement;return t==this.dom||_n(this.dom,this.view.observer.selectionRange)&&!(t&&this.dom.contains(t))}nearest(t){for(let i=t;i;){let r=wt.get(i);if(r&&r.rootView==this)return r;i=i.parentNode}return null}posFromDOM(t,i){let r=this.nearest(t);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(t,i)+r.posAtStart}domAtPos(t){let{i,off:r}=this.childCursor().findPos(t,-1);for(;i<this.children.length-1;){let n=this.children[i];if(r<n.length||n instanceof he)break;i++,r=0}return this.children[i].domAtPos(r)}coordsAt(t,i){for(let r=this.length,n=this.children.length-1;;n--){let o=this.children[n],s=r-o.breakAfter-o.length;if(t>s||t==s&&o.type!=Pt.WidgetBefore&&o.type!=Pt.WidgetAfter&&(!n||i==2||this.children[n-1].breakAfter||this.children[n-1].type==Pt.WidgetBefore&&i>-2))return o.coordsAt(t-s,i);r=s}}measureVisibleLineHeights(t){let i=[],{from:r,to:n}=t,o=this.view.contentDOM.clientWidth,s=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,h=this.view.textDirection==At.LTR;for(let c=0,d=0;d<this.children.length;d++){let f=this.children[d],m=c+f.length;if(m>n)break;if(c>=r){let v=f.dom.getBoundingClientRect();if(i.push(v.height),s){let S=f.dom.lastChild,O=S?Nr(S):[];if(O.length){let y=O[O.length-1],P=h?y.right-v.left:v.right-y.left;P>a&&(a=P,this.minWidth=o,this.minWidthFrom=c,this.minWidthTo=m)}}}c=m+f.breakAfter}return i}textDirectionAt(t){let{i}=this.childPos(t,1);return getComputedStyle(this.children[i].dom).direction=="rtl"?At.RTL:At.LTR}measureTextSize(){for(let n of this.children)if(n instanceof he){let o=n.measureTextSize();if(o)return o}let t=document.createElement("div"),i,r;return t.className="cm-line",t.style.width="99999px",t.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(t);let n=Nr(t.firstChild)[0];i=t.getBoundingClientRect().height,r=n?n.width/27:7,t.remove()}),{lineHeight:i,charWidth:r}}childCursor(t=this.length){let i=this.children.length;return i&&(t-=this.children[--i].length),new fh(this.children,t,i)}computeBlockGapDeco(){let t=[],i=this.view.viewState;for(let r=0,n=0;;n++){let o=n==i.viewports.length?null:i.viewports[n],s=o?o.from-1:this.length;if(s>r){let a=i.lineBlockAt(s).bottom-i.lineBlockAt(r).top;t.push(et.replace({widget:new qh(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,s))}if(!o)break;r=o.to+1}return et.set(t)}updateDeco(){let t=this.view.state.facet(Yr).map((i,r)=>(this.dynamicDecorationMap[r]=typeof i=="function")?i(this.view):i);for(let i=t.length;i<t.length+3;i++)this.dynamicDecorationMap[i]=!1;return this.decorations=[...t,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(t){let{range:i}=t,r=this.coordsAt(i.head,i.empty?i.assoc:i.head>i.anchor?-1:1),n;if(!r)return;!i.empty&&(n=this.coordsAt(i.anchor,i.anchor>i.head?-1:1))&&(r={left:Math.min(r.left,n.left),top:Math.min(r.top,n.top),right:Math.max(r.right,n.right),bottom:Math.max(r.bottom,n.bottom)});let o=0,s=0,a=0,h=0;for(let d of this.view.state.facet(Mh).map(f=>f(this.view)))if(d){let{left:f,right:m,top:v,bottom:S}=d;f!=null&&(o=Math.max(o,f)),m!=null&&(s=Math.max(s,m)),v!=null&&(a=Math.max(a,v)),S!=null&&(h=Math.max(h,S))}let c={left:r.left-o,top:r.top-a,right:r.right+s,bottom:r.bottom+h};Gf(this.view.scrollDOM,c,i.head<i.anchor?-1:1,t.x,t.y,t.xMargin,t.yMargin,this.view.textDirection==At.LTR)}}function u0(e){return e.node.nodeType==1&&e.node.firstChild&&(e.offset==0||e.node.childNodes[e.offset-1].contentEditable=="false")&&(e.offset==e.node.childNodes.length||e.node.childNodes[e.offset].contentEditable=="false")}class qh extends oi{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function Uh(e){let t=e.observer.selectionRange,i=t.focusNode&&Gh(t.focusNode,t.focusOffset,0);if(!i)return null;let r=e.docView.nearest(i);if(!r)return null;if(r instanceof he){let n=i;for(;n.parentNode!=r.dom;)n=n.parentNode;let o=n.previousSibling;for(;o&&!wt.get(o);)o=o.previousSibling;let s=o?wt.get(o).posAtEnd:r.posAtStart;return{from:s,to:s,node:n,text:i}}else{for(;;){let{parent:o}=r;if(!o)return null;if(o instanceof he)break;r=o}let n=r.posAtStart;return{from:n,to:n+r.length,node:r.dom,text:i}}}function c0(e,t){let i=Uh(e);if(!i)return et.none;let{from:r,to:n,node:o,text:s}=i,a=t.mapPos(r,1),h=Math.max(a,t.mapPos(n,-1)),{state:c}=e,d=o.nodeType==3?o.nodeValue:new Wh([],c).readRange(o.firstChild,null).text;if(h-a<d.length)if(c.doc.sliceString(a,Math.min(c.doc.length,a+d.length),yi)==d)h=a+d.length;else if(c.doc.sliceString(Math.max(0,h-d.length),h,yi)==d)a=h-d.length;else return et.none;else if(c.doc.sliceString(a,h,yi)!=d)return et.none;let f=wt.get(o);return f instanceof Ch?f=f.widget.topView:f&&(f.parent=null),et.set(et.replace({widget:new p0(o,s,f),inclusive:!0}).range(a,h))}class p0 extends oi{constructor(t,i,r){super(),this.top=t,this.text=i,this.topView=r}eq(t){return this.top==t.top&&this.text==t.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return Ch}}function Gh(e,t,i){for(;;){if(e.nodeType==3)return e;if(e.nodeType==1&&t>0&&i<=0)e=e.childNodes[t-1],t=Fr(e);else if(e.nodeType==1&&t<e.childNodes.length&&i>=0)e=e.childNodes[t],t=0;else return null}}function d0(e,t){return e.nodeType!=1?0:(t&&e.childNodes[t-1].contentEditable=="false"?1:0)|(t<e.childNodes.length&&e.childNodes[t].contentEditable=="false"?2:0)}class f0{constructor(){this.changes=[]}compareRange(t,i){wo(t,i,this.changes)}comparePoint(t,i){wo(t,i,this.changes)}}function m0(e,t,i){let r=new f0;return xt.compare(e,t,i,r),r.changes}function O0(e,t){for(let i=e;i&&i!=t;i=i.assignedSlot||i.parentNode)if(i.nodeType==1&&i.contentEditable=="false")return!0;return!1}function g0(e,t,i=1){let r=e.charCategorizer(t),n=e.doc.lineAt(t),o=t-n.from;if(n.length==0)return Y.cursor(t);o==0?i=1:o==n.length&&(i=-1);let s=o,a=o;i<0?s=ae(n.text,o,!1):a=ae(n.text,o);let h=r(n.text.slice(s,a));for(;s>0;){let c=ae(n.text,s,!1);if(r(n.text.slice(c,s))!=h)break;s=c}for(;a<n.length;){let c=ae(n.text,a);if(r(n.text.slice(a,c))!=h)break;a=c}return Y.range(s+n.from,a+n.from)}function y0(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function x0(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function ko(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function Vh(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function Hh(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function _o(e,t,i){let r,n,o,s,a=!1,h,c,d,f;for(let S=e.firstChild;S;S=S.nextSibling){let O=Nr(S);for(let y=0;y<O.length;y++){let P=O[y];n&&ko(n,P)&&(P=Vh(Hh(P,n.bottom),n.top));let w=y0(t,P),E=x0(i,P);if(w==0&&E==0)return S.nodeType==3?Jh(S,t,i):_o(S,t,i);(!r||s>E||s==E&&o>w)&&(r=S,n=P,o=w,s=E,a=!w||(w>0?y<O.length-1:y>0)),w==0?i>P.bottom&&(!d||d.bottom<P.bottom)?(h=S,d=P):i<P.top&&(!f||f.top>P.top)&&(c=S,f=P):d&&ko(d,P)?d=Hh(d,P.bottom):f&&ko(f,P)&&(f=Vh(f,P.top))}}if(d&&d.bottom>=i?(r=h,n=d):f&&f.top<=i&&(r=c,n=f),!r)return{node:e,offset:0};let m=Math.max(n.left,Math.min(n.right,t));if(r.nodeType==3)return Jh(r,m,i);if(a&&r.contentEditable!="false")return _o(r,m,i);let v=Array.prototype.indexOf.call(e.childNodes,r)+(t>=(n.left+n.right)/2?1:0);return{node:e,offset:v}}function Jh(e,t,i){let r=e.nodeValue.length,n=-1,o=1e9,s=0;for(let a=0;a<r;a++){let h=tr(e,a,a+1).getClientRects();for(let c=0;c<h.length;c++){let d=h[c];if(d.top==d.bottom)continue;s||(s=t-d.left);let f=(d.top>i?d.top-i:i-d.bottom)-1;if(d.left-1<=t&&d.right+1>=t&&f<o){let m=t>=(d.left+d.right)/2,v=m;if((J.chrome||J.gecko)&&tr(e,a).getBoundingClientRect().left==d.right&&(v=!m),f<=0)return{node:e,offset:a+(v?1:0)};n=a+(v?1:0),o=f}}}return{node:e,offset:n>-1?n:s>0?e.nodeValue.length:0}}function Kh(e,{x:t,y:i},r,n=-1){var o;let s=e.contentDOM.getBoundingClientRect(),a=s.top+e.viewState.paddingTop,h,{docHeight:c}=e.viewState,d=i-a;if(d<0)return 0;if(d>c)return e.state.doc.length;for(let P=e.defaultLineHeight/2,w=!1;h=e.elementAtHeight(d),h.type!=Pt.Text;)for(;d=n>0?h.bottom+P:h.top-P,!(d>=0&&d<=c);){if(w)return r?null:0;w=!0,n=-n}i=a+d;let f=h.from;if(f<e.viewport.from)return e.viewport.from==0?0:r?null:tu(e,s,h,t,i);if(f>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:r?null:tu(e,s,h,t,i);let m=e.dom.ownerDocument,v=e.root.elementFromPoint?e.root:m,S=v.elementFromPoint(t,i);S&&!e.contentDOM.contains(S)&&(S=null),S||(t=Math.max(s.left+1,Math.min(s.right-1,t)),S=v.elementFromPoint(t,i),S&&!e.contentDOM.contains(S)&&(S=null));let O,y=-1;if(S&&((o=e.docView.nearest(S))===null||o===void 0?void 0:o.isEditable)!=!1){if(m.caretPositionFromPoint){let P=m.caretPositionFromPoint(t,i);P&&({offsetNode:O,offset:y}=P)}else if(m.caretRangeFromPoint){let P=m.caretRangeFromPoint(t,i);P&&({startContainer:O,startOffset:y}=P,(!e.contentDOM.contains(O)||J.safari&&v0(O,y,t)||J.chrome&&P0(O,y,t))&&(O=void 0))}}if(!O||!e.docView.dom.contains(O)){let P=he.find(e.docView,f);if(!P)return d>h.top+h.height/2?h.to:h.from;({node:O,offset:y}=_o(P.dom,t,i))}return e.docView.posFromDOM(O,y)}function tu(e,t,i,r,n){let o=Math.round((r-t.left)*e.defaultCharacterWidth);e.lineWrapping&&i.height>e.defaultLineHeight*1.5&&(o+=Math.floor((n-i.top)/e.defaultLineHeight)*e.viewState.heightOracle.lineLength);let s=e.state.sliceDoc(i.from,i.to);return i.from+ho(s,o,e.state.tabSize)}function v0(e,t,i){let r;if(e.nodeType!=3||t!=(r=e.nodeValue.length))return!1;for(let n=e.nextSibling;n;n=n.nextSibling)if(n.nodeType!=1||n.nodeName!="BR")return!1;return tr(e,r-1,r).getBoundingClientRect().left>i}function P0(e,t,i){if(t!=0)return!1;for(let n=e;;){let o=n.parentNode;if(!o||o.nodeType!=1||o.firstChild!=n)return!1;if(o.classList.contains("cm-line"))break;n=o}let r=e.nodeType==1?e.getBoundingClientRect():tr(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect();return i-r.left>5}function C0(e,t,i,r){let n=e.state.doc.lineAt(t.head),o=!r||!e.lineWrapping?null:e.coordsAtPos(t.assoc<0&&t.head>n.from?t.head-1:t.head);if(o){let h=e.dom.getBoundingClientRect(),c=e.textDirectionAt(n.from),d=e.posAtCoords({x:i==(c==At.LTR)?h.right-1:h.left+1,y:(o.top+o.bottom)/2});if(d!=null)return Y.cursor(d,i?-1:1)}let s=he.find(e.docView,t.head),a=s?i?s.posAtEnd:s.posAtStart:i?n.to:n.from;return Y.cursor(a,i?-1:1)}function eu(e,t,i,r){let n=e.state.doc.lineAt(t.head),o=e.bidiSpans(n),s=e.textDirectionAt(n.from);for(let a=t,h=null;;){let c=h0(n,o,s,a,i),d=Yh;if(!c){if(n.number==(i?e.state.doc.lines:1))return a;d=`
`,n=e.state.doc.line(n.number+(i?1:-1)),o=e.bidiSpans(n),c=Y.cursor(i?n.from:n.to)}if(h){if(!h(d))return a}else{if(!r)return c;h=r(d)}a=c}}function S0(e,t,i){let r=e.state.charCategorizer(t),n=r(i);return o=>{let s=r(o);return n==Tt.Space&&(n=s),n==s}}function w0(e,t,i,r){let n=t.head,o=i?1:-1;if(n==(i?e.state.doc.length:0))return Y.cursor(n,t.assoc);let s=t.goalColumn,a,h=e.contentDOM.getBoundingClientRect(),c=e.coordsAtPos(n),d=e.documentTop;if(c)s==null&&(s=c.left-h.left),a=o<0?c.top:c.bottom;else{let v=e.viewState.lineBlockAt(n);s==null&&(s=Math.min(h.right-h.left,e.defaultCharacterWidth*(n-v.from))),a=(o<0?v.top:v.bottom)+d}let f=h.left+s,m=r!=null?r:e.defaultLineHeight>>1;for(let v=0;;v+=10){let S=a+(m+v)*o,O=Kh(e,{x:f,y:S},!1,o);if(S<h.top||S>h.bottom||(o<0?O<n:O>n))return Y.cursor(O,t.assoc,void 0,s)}}function Io(e,t,i){let r=e.state.facet(Fh).map(n=>n(e));for(;;){let n=!1;for(let o of r)o.between(i.from-1,i.from+1,(s,a,h)=>{i.from>s&&i.from<a&&(i=t.head>i.from?Y.cursor(s,1):Y.cursor(a,-1),n=!0)});if(!n)return i}}class b0{constructor(t){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;for(let i in Zt){let r=Zt[i];t.contentDOM.addEventListener(i,n=>{!nu(t,n)||this.ignoreDuringComposition(n)||i=="keydown"&&this.keydown(t,n)||(this.mustFlushObserver(n)&&t.observer.forceFlush(),this.runCustomHandlers(i,t,n)?n.preventDefault():r(t,n))},Lo[i]),this.registeredEvents.push(i)}J.chrome&&J.chrome_version==102&&t.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?t.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,t.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=t.hasFocus,J.safari&&t.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}ensureHandlers(t,i){var r;let n;this.customHandlers=[];for(let o of i)if(n=(r=o.update(t).spec)===null||r===void 0?void 0:r.domEventHandlers){this.customHandlers.push({plugin:o.value,handlers:n});for(let s in n)this.registeredEvents.indexOf(s)<0&&s!="scroll"&&(this.registeredEvents.push(s),t.contentDOM.addEventListener(s,a=>{!nu(t,a)||this.runCustomHandlers(s,t,a)&&a.preventDefault()}))}}runCustomHandlers(t,i,r){for(let n of this.customHandlers){let o=n.handlers[t];if(o)try{if(o.call(n.plugin,r,i)||r.defaultPrevented)return!0}catch(s){Se(i.state,s)}}return!1}runScrollHandlers(t,i){this.lastScrollTop=t.scrollDOM.scrollTop,this.lastScrollLeft=t.scrollDOM.scrollLeft;for(let r of this.customHandlers){let n=r.handlers.scroll;if(n)try{n.call(r.plugin,i,t)}catch(o){Se(t.state,o)}}}keydown(t,i){if(this.lastKeyCode=i.keyCode,this.lastKeyTime=Date.now(),i.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(J.android&&J.chrome&&!i.synthetic&&(i.keyCode==13||i.keyCode==8))return t.observer.delayAndroidKey(i.key,i.keyCode),!0;let r;return J.ios&&!i.synthetic&&!i.altKey&&!i.metaKey&&((r=iu.find(n=>n.keyCode==i.keyCode))&&!i.ctrlKey||D0.indexOf(i.key)>-1&&i.ctrlKey&&!i.shiftKey)?(this.pendingIOSKey=r||i,setTimeout(()=>this.flushIOSKey(t),250),!0):!1}flushIOSKey(t){let i=this.pendingIOSKey;return i?(this.pendingIOSKey=void 0,Mr(t.contentDOM,i.key,i.keyCode)):!1}ignoreDuringComposition(t){return/^key/.test(t.type)?this.composing>0?!0:J.safari&&!J.ios&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(t){return t.type=="keydown"&&t.keyCode!=229}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.mouseSelection&&this.mouseSelection.update(t),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const iu=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],D0="dthko",ru=[16,17,18,20,91,92,224,225];class E0{constructor(t,i,r,n){this.view=t,this.style=r,this.mustSelect=n,this.lastEvent=i;let o=t.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=i.shiftKey,this.multiple=t.state.facet(Ot.allowMultipleSelections)&&T0(t,i),this.dragMove=A0(t,i),this.dragging=k0(t,i)&&Qo(i)==1?null:!1,this.dragging===!1&&(i.preventDefault(),this.select(i))}move(t){if(t.buttons==0)return this.destroy();this.dragging===!1&&this.select(this.lastEvent=t)}up(t){this.dragging==null&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(t){let i=this.style.get(t,this.extend,this.multiple);(this.mustSelect||!i.eq(this.view.state.selection)||i.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:i,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(t){t.docChanged&&this.dragging&&(this.dragging=this.dragging.map(t.changes)),this.style.update(t)&&setTimeout(()=>this.select(this.lastEvent),20)}}function T0(e,t){let i=e.state.facet(Ah);return i.length?i[0](t):J.mac?t.metaKey:t.ctrlKey}function A0(e,t){let i=e.state.facet(kh);return i.length?i[0](t):J.mac?!t.altKey:!t.ctrlKey}function k0(e,t){let{main:i}=e.state.selection;if(i.empty)return!1;let r=kn(e.root);if(!r||r.rangeCount==0)return!0;let n=r.getRangeAt(0).getClientRects();for(let o=0;o<n.length;o++){let s=n[o];if(s.left<=t.clientX&&s.right>=t.clientX&&s.top<=t.clientY&&s.bottom>=t.clientY)return!0}return!1}function nu(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let i=t.target,r;i!=e.contentDOM;i=i.parentNode)if(!i||i.nodeType==11||(r=wt.get(i))&&r.ignoreEvent(t))return!1;return!0}const Zt=Object.create(null),Lo=Object.create(null),su=J.ie&&J.ie_version<15||J.ios&&J.webkit_version<604;function _0(e){let t=e.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout(()=>{e.focus(),i.remove(),ou(e,i.value)},50)}function ou(e,t){let{state:i}=e,r,n=1,o=i.toText(t),s=o.lines==i.selection.ranges.length;if(Xo!=null&&i.selection.ranges.every(a=>a.empty)&&Xo==o.toString()){let a=-1;r=i.changeByRange(h=>{let c=i.doc.lineAt(h.from);if(c.from==a)return{range:h};a=c.from;let d=i.toText((s?o.line(n++).text:t)+i.lineBreak);return{changes:{from:c.from,insert:d},range:Y.cursor(h.from+d.length)}})}else s?r=i.changeByRange(a=>{let h=o.line(n++);return{changes:{from:a.from,to:a.to,insert:h.text},range:Y.cursor(a.from+h.length)}}):r=i.replaceSelection(o);e.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Zt.keydown=(e,t)=>{e.inputState.setSelectionOrigin("select"),t.keyCode==27?e.inputState.lastEscPress=Date.now():ru.indexOf(t.keyCode)<0&&(e.inputState.lastEscPress=0)},Zt.touchstart=(e,t)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},Zt.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},Lo.touchstart=Lo.touchmove={passive:!0},Zt.mousedown=(e,t)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3&&Qo(t)==1)return;let i=null;for(let r of e.state.facet(_h))if(i=r(e,t),i)break;if(!i&&t.button==0&&(i=Q0(e,t)),i){let r=e.root.activeElement!=e.contentDOM;r&&e.observer.ignore(()=>uh(e.contentDOM)),e.inputState.startMouseSelection(new E0(e,t,i,r))}};function lu(e,t,i,r){if(r==1)return Y.cursor(t,i);if(r==2)return g0(e.state,t,i);{let n=he.find(e.docView,t),o=e.state.doc.lineAt(n?n.posAtEnd:t),s=n?n.posAtStart:o.from,a=n?n.posAtEnd:o.to;return a<e.state.doc.length&&a==o.to&&a++,Y.range(s,a)}}let au=(e,t)=>e>=t.top&&e<=t.bottom,hu=(e,t,i)=>au(t,i)&&e>=i.left&&e<=i.right;function I0(e,t,i,r){let n=he.find(e.docView,t);if(!n)return 1;let o=t-n.posAtStart;if(o==0)return 1;if(o==n.length)return-1;let s=n.coordsAt(o,-1);if(s&&hu(i,r,s))return-1;let a=n.coordsAt(o,1);return a&&hu(i,r,a)?1:s&&au(r,s)?-1:1}function uu(e,t){let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:i,bias:I0(e,i,t.clientX,t.clientY)}}const L0=J.ie&&J.ie_version<=11;let cu=null,pu=0,du=0;function Qo(e){if(!L0)return e.detail;let t=cu,i=du;return cu=e,du=Date.now(),pu=!t||i>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(pu+1)%3:1}function Q0(e,t){let i=uu(e,t),r=Qo(t),n=e.state.selection,o=i,s=t;return{update(a){a.docChanged&&(i.pos=a.changes.mapPos(i.pos),n=n.map(a.changes),s=null)},get(a,h,c){let d;s&&a.clientX==s.clientX&&a.clientY==s.clientY?d=o:(d=o=uu(e,a),s=a);let f=lu(e,d.pos,d.bias,r);if(i.pos!=d.pos&&!h){let m=lu(e,i.pos,i.bias,r),v=Math.min(m.from,f.from),S=Math.max(m.to,f.to);f=v<f.from?Y.range(v,S):Y.range(S,v)}return h?n.replaceRange(n.main.extend(f.from,f.to)):c&&n.ranges.length>1&&n.ranges.some(m=>m.eq(f))?X0(n,f):c?n.addRange(f):Y.create([f])}}}function X0(e,t){for(let i=0;;i++)if(e.ranges[i].eq(t))return Y.create(e.ranges.slice(0,i).concat(e.ranges.slice(i+1)),e.mainIndex==i?0:e.mainIndex-(e.mainIndex>i?1:0))}Zt.dragstart=(e,t)=>{let{selection:{main:i}}=e.state,{mouseSelection:r}=e.inputState;r&&(r.dragging=i),t.dataTransfer&&(t.dataTransfer.setData("Text",e.state.sliceDoc(i.from,i.to)),t.dataTransfer.effectAllowed="copyMove")};function fu(e,t,i,r){if(!i)return;let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1);t.preventDefault();let{mouseSelection:o}=e.inputState,s=r&&o&&o.dragging&&o.dragMove?{from:o.dragging.from,to:o.dragging.to}:null,a={from:n,insert:i},h=e.state.changes(s?[s,a]:a);e.focus(),e.dispatch({changes:h,selection:{anchor:h.mapPos(n,-1),head:h.mapPos(n,1)},userEvent:s?"move.drop":"input.drop"})}Zt.drop=(e,t)=>{if(!t.dataTransfer)return;if(e.state.readOnly)return t.preventDefault();let i=t.dataTransfer.files;if(i&&i.length){t.preventDefault();let r=Array(i.length),n=0,o=()=>{++n==i.length&&fu(e,t,r.filter(s=>s!=null).join(e.state.lineBreak),!1)};for(let s=0;s<i.length;s++){let a=new FileReader;a.onerror=o,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[s]=a.result),o()},a.readAsText(i[s])}}else fu(e,t,t.dataTransfer.getData("Text"),!0)},Zt.paste=(e,t)=>{if(e.state.readOnly)return t.preventDefault();e.observer.flush();let i=su?null:t.clipboardData;i?(ou(e,i.getData("text/plain")),t.preventDefault()):_0(e)};function $0(e,t){let i=e.dom.parentNode;if(!i)return;let r=i.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=t,r.focus(),r.selectionEnd=t.length,r.selectionStart=0,setTimeout(()=>{r.remove(),e.focus()},50)}function N0(e){let t=[],i=[],r=!1;for(let n of e.selection.ranges)n.empty||(t.push(e.sliceDoc(n.from,n.to)),i.push(n));if(!t.length){let n=-1;for(let{from:o}of e.selection.ranges){let s=e.doc.lineAt(o);s.number>n&&(t.push(s.text),i.push({from:s.from,to:Math.min(e.doc.length,s.to+1)})),n=s.number}r=!0}return{text:t.join(e.lineBreak),ranges:i,linewise:r}}let Xo=null;Zt.copy=Zt.cut=(e,t)=>{let{text:i,ranges:r,linewise:n}=N0(e.state);if(!i&&!n)return;Xo=n?i:null;let o=su?null:t.clipboardData;o?(t.preventDefault(),o.clearData(),o.setData("text/plain",i)):$0(e,i),t.type=="cut"&&!e.state.readOnly&&e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})};function mu(e){setTimeout(()=>{e.hasFocus!=e.inputState.notifiedFocused&&e.update([])},10)}Zt.focus=e=>{e.inputState.lastFocusTime=Date.now(),!e.scrollDOM.scrollTop&&(e.inputState.lastScrollTop||e.inputState.lastScrollLeft)&&(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),mu(e)},Zt.blur=e=>{e.observer.clearSelectionRange(),mu(e)},Zt.compositionstart=Zt.compositionupdate=e=>{e.inputState.compositionFirstChange==null&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0)},Zt.compositionend=e=>{e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionFirstChange=null,J.chrome&&J.android&&e.observer.flushSoon(),setTimeout(()=>{e.inputState.composing<0&&e.docView.compositionDeco.size&&e.update([])},50)},Zt.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},Zt.beforeinput=(e,t)=>{var i;let r;if(J.chrome&&J.android&&(r=iu.find(n=>n.inputType==t.inputType))&&(e.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let n=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>n+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())},100)}};const Ou=["pre-wrap","normal","pre-line","break-spaces"];class F0{constructor(){this.doc=yt.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(t,i){let r=this.doc.lineAt(i).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(r+=Math.ceil((i-t-r*this.lineLength*.5)/this.lineLength)),this.lineHeight*r}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return Ou.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let i=!1;for(let r=0;r<t.length;r++){let n=t[r];n<0?r++:this.heightSamples[Math.floor(n*10)]||(i=!0,this.heightSamples[Math.floor(n*10)]=!0)}return i}refresh(t,i,r,n,o){let s=Ou.indexOf(t)>-1,a=Math.round(i)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=i,this.charWidth=r,this.lineLength=n,a){this.heightSamples={};for(let h=0;h<o.length;h++){let c=o[h];c<0?h++:this.heightSamples[Math.floor(c*10)]=!0}}return a}}class M0{constructor(t,i){this.from=t,this.heights=i,this.index=0}get more(){return this.index<this.heights.length}}class xi{constructor(t,i,r,n,o){this.from=t,this.length=i,this.top=r,this.height=n,this.type=o}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(t){let i=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(t.type)?t.type:[t]);return new xi(this.from,this.length+t.length,this.top,this.height+t.height,i)}}var bt=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(bt||(bt={}));const Rn=.001;class fe{constructor(t,i,r=2){this.length=t,this.height=i,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(t){this.flags=(t?2:0)|this.flags&-3}setHeight(t,i){this.height!=i&&(Math.abs(this.height-i)>Rn&&(t.heightChanged=!0),this.height=i)}replace(t,i,r){return fe.of(r)}decomposeLeft(t,i){i.push(this)}decomposeRight(t,i){i.push(this)}applyChanges(t,i,r,n){let o=this;for(let s=n.length-1;s>=0;s--){let{fromA:a,toA:h,fromB:c,toB:d}=n[s],f=o.lineAt(a,bt.ByPosNoHeight,i,0,0),m=f.to>=h?f:o.lineAt(h,bt.ByPosNoHeight,i,0,0);for(d+=m.to-h,h=m.to;s>0&&f.from<=n[s-1].toA;)a=n[s-1].fromA,c=n[s-1].fromB,s--,a<f.from&&(f=o.lineAt(a,bt.ByPosNoHeight,i,0,0));c+=f.from-a,a=f.from;let v=$o.build(r,t,c,d);o=o.replace(a,h,v)}return o.updateHeight(r,0)}static empty(){return new we(0,0)}static of(t){if(t.length==1)return t[0];let i=0,r=t.length,n=0,o=0;for(;;)if(i==r)if(n>o*2){let a=t[i-1];a.break?t.splice(--i,1,a.left,null,a.right):t.splice(--i,1,a.left,a.right),r+=1+a.break,n-=a.size}else if(o>n*2){let a=t[r];a.break?t.splice(r,1,a.left,null,a.right):t.splice(r,1,a.left,a.right),r+=2+a.break,o-=a.size}else break;else if(n<o){let a=t[i++];a&&(n+=a.size)}else{let a=t[--r];a&&(o+=a.size)}let s=0;return t[i-1]==null?(s=1,i--):t[i]==null&&(s=1,r++),new B0(fe.of(t.slice(0,i)),s,fe.of(t.slice(r)))}}fe.prototype.size=1;class gu extends fe{constructor(t,i,r){super(t,i),this.type=r}blockAt(t,i,r,n){return new xi(n,this.length,r,this.height,this.type)}lineAt(t,i,r,n,o){return this.blockAt(0,r,n,o)}forEachLine(t,i,r,n,o,s){t<=o+this.length&&i>=o&&s(this.blockAt(0,r,n,o))}updateHeight(t,i=0,r=!1,n){return n&&n.from<=i&&n.more&&this.setHeight(t,n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class we extends gu{constructor(t,i){super(t,i,Pt.Text),this.collapsed=0,this.widgetHeight=0}replace(t,i,r){let n=r[0];return r.length==1&&(n instanceof we||n instanceof Jt&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof Jt?n=new we(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):fe.of(r)}updateHeight(t,i=0,r=!1,n){return n&&n.from<=i&&n.more?this.setHeight(t,n.heights[n.index++]):(r||this.outdated)&&this.setHeight(t,Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Jt extends fe{constructor(t){super(t,0)}lines(t,i){let r=t.lineAt(i).number,n=t.lineAt(i+this.length).number;return{firstLine:r,lastLine:n,lineHeight:this.height/(n-r+1)}}blockAt(t,i,r,n){let{firstLine:o,lastLine:s,lineHeight:a}=this.lines(i,n),h=Math.max(0,Math.min(s-o,Math.floor((t-r)/a))),{from:c,length:d}=i.line(o+h);return new xi(c,d,r+a*h,a,Pt.Text)}lineAt(t,i,r,n,o){if(i==bt.ByHeight)return this.blockAt(t,r,n,o);if(i==bt.ByPosNoHeight){let{from:f,to:m}=r.lineAt(t);return new xi(f,m-f,0,0,Pt.Text)}let{firstLine:s,lineHeight:a}=this.lines(r,o),{from:h,length:c,number:d}=r.lineAt(t);return new xi(h,c,n+a*(d-s),a,Pt.Text)}forEachLine(t,i,r,n,o,s){let{firstLine:a,lineHeight:h}=this.lines(r,o);for(let c=Math.max(t,o),d=Math.min(o+this.length,i);c<=d;){let f=r.lineAt(c);c==t&&(n+=h*(f.number-a)),s(new xi(f.from,f.length,n,h,Pt.Text)),n+=h,c=f.to+1}}replace(t,i,r){let n=this.length-i;if(n>0){let o=r[r.length-1];o instanceof Jt?r[r.length-1]=new Jt(o.length+n):r.push(null,new Jt(n-1))}if(t>0){let o=r[0];o instanceof Jt?r[0]=new Jt(t+o.length):r.unshift(new Jt(t-1),null)}return fe.of(r)}decomposeLeft(t,i){i.push(new Jt(t-1),null)}decomposeRight(t,i){i.push(null,new Jt(this.length-t-1))}updateHeight(t,i=0,r=!1,n){let o=i+this.length;if(n&&n.from<=i+this.length&&n.more){let s=[],a=Math.max(i,n.from),h=-1,c=t.heightChanged;for(n.from>i&&s.push(new Jt(n.from-i-1).updateHeight(t,i));a<=o&&n.more;){let f=t.doc.lineAt(a).length;s.length&&s.push(null);let m=n.heights[n.index++];h==-1?h=m:Math.abs(m-h)>=Rn&&(h=-2);let v=new we(f,m);v.outdated=!1,s.push(v),a+=f+1}a<=o&&s.push(null,new Jt(o-a).updateHeight(t,a));let d=fe.of(s);return t.heightChanged=c||h<0||Math.abs(d.height-this.height)>=Rn||Math.abs(h-this.lines(t.doc,i).lineHeight)>=Rn,d}else(r||this.outdated)&&(this.setHeight(t,t.heightForGap(i,i+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class B0 extends fe{constructor(t,i,r){super(t.length+i+r.length,t.height+r.height,i|(t.outdated||r.outdated?2:0)),this.left=t,this.right=r,this.size=t.size+r.size}get break(){return this.flags&1}blockAt(t,i,r,n){let o=r+this.left.height;return t<o?this.left.blockAt(t,i,r,n):this.right.blockAt(t,i,o,n+this.left.length+this.break)}lineAt(t,i,r,n,o){let s=n+this.left.height,a=o+this.left.length+this.break,h=i==bt.ByHeight?t<s:t<a,c=h?this.left.lineAt(t,i,r,n,o):this.right.lineAt(t,i,r,s,a);if(this.break||(h?c.to<a:c.from>a))return c;let d=i==bt.ByPosNoHeight?bt.ByPosNoHeight:bt.ByPos;return h?c.join(this.right.lineAt(a,d,r,s,a)):this.left.lineAt(a,d,r,n,o).join(c)}forEachLine(t,i,r,n,o,s){let a=n+this.left.height,h=o+this.left.length+this.break;if(this.break)t<h&&this.left.forEachLine(t,i,r,n,o,s),i>=h&&this.right.forEachLine(t,i,r,a,h,s);else{let c=this.lineAt(h,bt.ByPos,r,n,o);t<c.from&&this.left.forEachLine(t,c.from-1,r,n,o,s),c.to>=t&&c.from<=i&&s(c),i>c.to&&this.right.forEachLine(c.to+1,i,r,a,h,s)}}replace(t,i,r){let n=this.left.length+this.break;if(i<n)return this.balanced(this.left.replace(t,i,r),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-n,i-n,r));let o=[];t>0&&this.decomposeLeft(t,o);let s=o.length;for(let a of r)o.push(a);if(t>0&&yu(o,s-1),i<this.length){let a=o.length;this.decomposeRight(i,o),yu(o,a)}return fe.of(o)}decomposeLeft(t,i){let r=this.left.length;if(t<=r)return this.left.decomposeLeft(t,i);i.push(this.left),this.break&&(r++,t>=r&&i.push(null)),t>r&&this.right.decomposeLeft(t-r,i)}decomposeRight(t,i){let r=this.left.length,n=r+this.break;if(t>=n)return this.right.decomposeRight(t-n,i);t<r&&this.left.decomposeRight(t,i),this.break&&t<n&&i.push(null),i.push(this.right)}balanced(t,i){return t.size>2*i.size||i.size>2*t.size?fe.of(this.break?[t,null,i]:[t,i]):(this.left=t,this.right=i,this.height=t.height+i.height,this.outdated=t.outdated||i.outdated,this.size=t.size+i.size,this.length=t.length+this.break+i.length,this)}updateHeight(t,i=0,r=!1,n){let{left:o,right:s}=this,a=i+o.length+this.break,h=null;return n&&n.from<=i+o.length&&n.more?h=o=o.updateHeight(t,i,r,n):o.updateHeight(t,i,r),n&&n.from<=a+s.length&&n.more?h=s=s.updateHeight(t,a,r,n):s.updateHeight(t,a,r),h?this.balanced(o,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function yu(e,t){let i,r;e[t]==null&&(i=e[t-1])instanceof Jt&&(r=e[t+1])instanceof Jt&&e.splice(t-1,3,new Jt(i.length+1+r.length))}const R0=5;class $o{constructor(t,i){this.pos=t,this.oracle=i,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,i){if(this.lineStart>-1){let r=Math.min(i,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof we?n.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new we(r-this.pos,-1)),this.writtenTo=r,i>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=i}point(t,i,r){if(t<i||r.heightRelevant){let n=r.widget?r.widget.estimatedHeight:0;n<0&&(n=this.oracle.lineHeight);let o=i-t;r.block?this.addBlock(new gu(o,n,r.type)):(o||n>=R0)&&this.addLineDeco(n,o)}else i>t&&this.span(t,i);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:i}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=i,this.writtenTo<t&&((this.writtenTo<t-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new we(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,i){let r=new Jt(i-t);return this.oracle.doc.lineAt(t).to==i&&(r.flags|=4),r}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof we)return t;let i=new we(0,-1);return this.nodes.push(i),i}addBlock(t){this.enterLine(),t.type==Pt.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,t.type!=Pt.WidgetBefore&&(this.covering=t)}addLineDeco(t,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,t),this.writtenTo=this.pos=this.pos+i}finish(t){let i=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(i instanceof we)&&!this.isCovered?this.nodes.push(new we(0,-1)):(this.writtenTo<this.pos||i==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=t;for(let n of this.nodes)n instanceof we&&n.updateHeight(this.oracle,r),r+=n?n.length:1;return this.nodes}static build(t,i,r,n){let o=new $o(r,t);return xt.spans(i,r,n,o,0),o.finish(r)}}function Y0(e,t,i){let r=new W0;return xt.compare(e,t,i,r,0),r.changes}class W0{constructor(){this.changes=[]}compareRange(){}comparePoint(t,i,r,n){(t<i||r&&r.heightRelevant||n&&n.heightRelevant)&&wo(t,i,this.changes,5)}}function j0(e,t){let i=e.getBoundingClientRect(),r=e.ownerDocument,n=r.defaultView,o=Math.max(0,i.left),s=Math.min(n.innerWidth,i.right),a=Math.max(0,i.top),h=Math.min(n.innerHeight,i.bottom);for(let c=e.parentNode;c&&c!=r.body;)if(c.nodeType==1){let d=c,f=window.getComputedStyle(d);if((d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth)&&f.overflow!="visible"){let m=d.getBoundingClientRect();o=Math.max(o,m.left),s=Math.min(s,m.right),a=Math.max(a,m.top),h=c==e.parentNode?m.bottom:Math.min(h,m.bottom)}c=f.position=="absolute"||f.position=="fixed"?d.offsetParent:d.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:o-i.left,right:Math.max(o,s)-i.left,top:a-(i.top+t),bottom:Math.max(a,h)-(i.top+t)}}function Z0(e,t){let i=e.getBoundingClientRect();return{left:0,right:i.right-i.left,top:t,bottom:i.bottom-(i.top+t)}}class No{constructor(t,i,r){this.from=t,this.to=i,this.size=r}static same(t,i){if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){let n=t[r],o=i[r];if(n.from!=o.from||n.to!=o.to||n.size!=o.size)return!1}return!0}draw(t){return et.replace({widget:new z0(this.size,t)}).range(this.from,this.to)}}class z0 extends oi{constructor(t,i){super(),this.size=t,this.vertical=i}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class xu{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new F0,this.scaler=Cu,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=At.RTL,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=t.facet(Yr).filter(i=>typeof i!="function"),this.heightMap=fe.empty().applyChanges(this.stateDeco,yt.empty,this.heightOracle.setDoc(t.doc),[new li(0,0,0,t.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=et.set(this.lineGaps.map(i=>i.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:i}=this.state.selection;for(let r=0;r<=1;r++){let n=r?i.head:i.anchor;if(!t.some(({from:o,to:s})=>n>=o&&n<=s)){let{from:o,to:s}=this.lineBlockAt(n);t.push(new Yn(o,s))}}this.viewports=t.sort((r,n)=>r.from-n.from),this.scaler=this.heightMap.height<=7e6?Cu:new G0(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,t=>{this.viewportLines.push(this.scaler.scale==1?t:jr(t,this.scaler))})}update(t,i=null){this.state=t.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Yr).filter(c=>typeof c!="function");let n=t.changedRanges,o=li.extendWithRanges(n,Y0(r,this.stateDeco,t?t.changes:Bt.empty(this.state.doc.length))),s=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),o),this.heightMap.height!=s&&(t.flags|=2);let a=o.length?this.mapViewport(this.viewport,t.changes):this.viewport;(i&&(i.range.head<a.from||i.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,i));let h=!t.changes.empty||t.flags&2||a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,this.updateForViewport(),h&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(),i&&(this.scrollTarget=i),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(t){let i=t.contentDOM,r=window.getComputedStyle(i),n=this.heightOracle,o=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?At.RTL:At.LTR;let s=this.heightOracle.mustRefreshForWrapping(o),a=s||this.mustMeasureContent||this.contentDOMHeight!=i.clientHeight;this.contentDOMHeight=i.clientHeight,this.mustMeasureContent=!1;let h=0,c=0,d=parseInt(r.paddingTop)||0,f=parseInt(r.paddingBottom)||0;(this.paddingTop!=d||this.paddingBottom!=f)&&(this.paddingTop=d,this.paddingBottom=f,h|=10),this.editorWidth!=t.scrollDOM.clientWidth&&(n.lineWrapping&&(a=!0),this.editorWidth=t.scrollDOM.clientWidth,h|=8);let m=(this.printing?Z0:j0)(i,this.paddingTop),v=m.top-this.pixelViewport.top,S=m.bottom-this.pixelViewport.bottom;this.pixelViewport=m;let O=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(O!=this.inView&&(this.inView=O,O&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let y=i.clientWidth;if((this.contentDOMWidth!=y||this.editorHeight!=t.scrollDOM.clientHeight)&&(this.contentDOMWidth=y,this.editorHeight=t.scrollDOM.clientHeight,h|=8),a){let w=t.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(w)&&(s=!0),s||n.lineWrapping&&Math.abs(y-this.contentDOMWidth)>n.charWidth){let{lineHeight:E,charWidth:T}=t.docView.measureTextSize();s=n.refresh(o,E,T,y/T,w),s&&(t.docView.minWidth=0,h|=8)}v>0&&S>0?c=Math.max(v,S):v<0&&S<0&&(c=Math.min(v,S)),n.heightChanged=!1;for(let E of this.viewports){let T=E.from==this.viewport.from?w:t.docView.measureVisibleLineHeights(E);this.heightMap=this.heightMap.updateHeight(n,0,s,new M0(E.from,T))}n.heightChanged&&(h|=2)}let P=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return P&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(h&2||P)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,i){let r=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),n=this.heightMap,o=this.state.doc,{visibleTop:s,visibleBottom:a}=this,h=new Yn(n.lineAt(s-r*1e3,bt.ByHeight,o,0,0).from,n.lineAt(a+(1-r)*1e3,bt.ByHeight,o,0,0).to);if(i){let{head:c}=i.range;if(c<h.from||c>h.to){let d=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=n.lineAt(c,bt.ByPos,o,0,0),m;i.y=="center"?m=(f.top+f.bottom)/2-d/2:i.y=="start"||i.y=="nearest"&&c<h.from?m=f.top:m=f.bottom-d,h=new Yn(n.lineAt(m-1e3/2,bt.ByHeight,o,0,0).from,n.lineAt(m+d+1e3/2,bt.ByHeight,o,0,0).to)}}return h}mapViewport(t,i){let r=i.mapPos(t.from,-1),n=i.mapPos(t.to,1);return new Yn(this.heightMap.lineAt(r,bt.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(n,bt.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:t,to:i},r=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(t,bt.ByPos,this.state.doc,0,0),{bottom:o}=this.heightMap.lineAt(i,bt.ByPos,this.state.doc,0,0),{visibleTop:s,visibleBottom:a}=this;return(t==0||n<=s-Math.max(10,Math.min(-r,250)))&&(i==this.state.doc.length||o>=a+Math.max(10,Math.min(r,250)))&&n>s-2*1e3&&o<a+2*1e3}mapLineGaps(t,i){if(!t.length||i.empty)return t;let r=[];for(let n of t)i.touchesRange(n.from,n.to)||r.push(new No(i.mapPos(n.from),i.mapPos(n.to),n.size));return r}ensureLineGaps(t){let i=[];if(this.defaultTextDirection!=At.LTR)return i;for(let r of this.viewportLines){if(r.length<4e3)continue;let n=q0(r.from,r.to,this.stateDeco);if(n.total<4e3)continue;let o,s;if(this.heightOracle.lineWrapping){let c=2e3/this.heightOracle.lineLength*this.heightOracle.lineHeight;o=Wn(n,(this.visibleTop-r.top-c)/r.height),s=Wn(n,(this.visibleBottom-r.top+c)/r.height)}else{let c=n.total*this.heightOracle.charWidth,d=2e3*this.heightOracle.charWidth;o=Wn(n,(this.pixelViewport.left-d)/c),s=Wn(n,(this.pixelViewport.right+d)/c)}let a=[];o>r.from&&a.push({from:r.from,to:o}),s<r.to&&a.push({from:s,to:r.to});let h=this.state.selection.main;h.from>=r.from&&h.from<=r.to&&Pu(a,h.from-10,h.from+10),!h.empty&&h.to>=r.from&&h.to<=r.to&&Pu(a,h.to-10,h.to+10);for(let{from:c,to:d}of a)d-c>1e3&&i.push(U0(t,f=>f.from>=r.from&&f.to<=r.to&&Math.abs(f.from-c)<1e3&&Math.abs(f.to-d)<1e3)||new No(c,d,this.gapSize(r,c,d,n)))}return i}gapSize(t,i,r,n){let o=vu(n,r)-vu(n,i);return this.heightOracle.lineWrapping?t.height*o:n.total*this.heightOracle.charWidth*o}updateLineGaps(t){No.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=et.set(t.map(i=>i.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let i=[];xt.spans(t,this.viewport.from,this.viewport.to,{span(n,o){i.push({from:n,to:o})},point(){}},20);let r=i.length!=this.visibleRanges.length||this.visibleRanges.some((n,o)=>n.from!=i[o].from||n.to!=i[o].to);return this.visibleRanges=i,r?4:0}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find(i=>i.from<=t&&i.to>=t)||jr(this.heightMap.lineAt(t,bt.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(t){return jr(this.heightMap.lineAt(this.scaler.fromDOM(t),bt.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(t){return jr(this.heightMap.blockAt(this.scaler.fromDOM(t),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Yn{constructor(t,i){this.from=t,this.to=i}}function q0(e,t,i){let r=[],n=e,o=0;return xt.spans(i,e,t,{span(){},point(s,a){s>n&&(r.push({from:n,to:s}),o+=s-n),n=a}},20),n<t&&(r.push({from:n,to:t}),o+=t-n),{total:o,ranges:r}}function Wn({total:e,ranges:t},i){if(i<=0)return t[0].from;if(i>=1)return t[t.length-1].to;let r=Math.floor(e*i);for(let n=0;;n++){let{from:o,to:s}=t[n],a=s-o;if(r<=a)return o+r;r-=a}}function vu(e,t){let i=0;for(let{from:r,to:n}of e.ranges){if(t<=n){i+=t-r;break}i+=n-r}return i/e.total}function Pu(e,t,i){for(let r=0;r<e.length;r++){let n=e[r];if(n.from<i&&n.to>t){let o=[];n.from<t&&o.push({from:n.from,to:t}),n.to>i&&o.push({from:i,to:n.to}),e.splice(r,1,...o),r+=o.length-1}}}function U0(e,t){for(let i of e)if(t(i))return i}const Cu={toDOM(e){return e},fromDOM(e){return e},scale:1};class G0{constructor(t,i,r){let n=0,o=0,s=0;this.viewports=r.map(({from:a,to:h})=>{let c=i.lineAt(a,bt.ByPos,t,0,0).top,d=i.lineAt(h,bt.ByPos,t,0,0).bottom;return n+=d-c,{from:a,to:h,top:c,bottom:d,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(i.height-n);for(let a of this.viewports)a.domTop=s+(a.top-o)*this.scale,s=a.domBottom=a.domTop+(a.bottom-a.top),o=a.bottom}toDOM(t){for(let i=0,r=0,n=0;;i++){let o=i<this.viewports.length?this.viewports[i]:null;if(!o||t<o.top)return n+(t-r)*this.scale;if(t<=o.bottom)return o.domTop+(t-o.top);r=o.bottom,n=o.domBottom}}fromDOM(t){for(let i=0,r=0,n=0;;i++){let o=i<this.viewports.length?this.viewports[i]:null;if(!o||t<o.domTop)return r+(t-n)/this.scale;if(t<=o.domBottom)return o.top+(t-o.domTop);r=o.bottom,n=o.domBottom}}}function jr(e,t){if(t.scale==1)return e;let i=t.toDOM(e.top),r=t.toDOM(e.bottom);return new xi(e.from,e.length,i,r-i,Array.isArray(e.type)?e.type.map(n=>jr(n,t)):e.type)}const jn=H.define({combine:e=>e.join(" ")}),Fo=H.define({combine:e=>e.indexOf(!0)>-1}),Mo=fi.newName(),Su=fi.newName(),wu=fi.newName(),bu={"&light":"."+Su,"&dark":"."+wu};function Bo(e,t,i){return new fi(t,{finish(r){return/&/.test(r)?r.replace(/&\w*/,n=>{if(n=="&")return e;if(!i||!i[n])throw new RangeError(`Unsupported selector: ${n}`);return i[n]}):e+" "+r}})}const V0=Bo("."+Mo,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},bu),H0={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Ro=J.ie&&J.ie_version<=11;class J0{constructor(t,i,r){this.view=t,this.onChange=i,this.onScrollChanged=r,this.active=!1,this.selectionRange=new Vf,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver(n=>{for(let o of n)this.queue.push(o);(J.ie&&J.ie_version<=11||J.ios&&t.composing)&&n.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),Ro&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resize=new ResizeObserver(()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()}),this.resize.observe(t.scrollDOM)),this.addWindowListeners(this.win=t.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScroll(t){this.intersecting&&this.flush(!1),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some((i,r)=>i!=t[r]))){this.gapIntersection.disconnect();for(let i of t)this.gapIntersection.observe(i);this.gaps=t}}onSelectionChange(t){let i=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,n=this.selectionRange;if(r.state.facet(Mn)?r.root.activeElement!=this.dom:!_n(r.dom,n))return;let o=n.anchorNode&&r.docView.nearest(n.anchorNode);if(o&&o.ignoreEvent(t)){i||(this.selectionChanged=!1);return}(J.ie&&J.ie_version<=11||J.android&&J.chrome)&&!r.state.selection.main.empty&&n.focusNode&&In(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,i=J.safari&&t.root.nodeType==11&&qf(this.dom.ownerDocument)==this.dom&&K0(this.view)||kn(t.root);if(!i||this.selectionRange.eq(i))return!1;let r=_n(this.dom,i);return r&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&Jf(this.dom,i)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(t,i){this.selectionRange.set(t.node,t.offset,i.node,i.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,i=null;for(let r=this.dom;r;)if(r.nodeType==1)!i&&t<this.scrollTargets.length&&this.scrollTargets[t]==r?t++:i||(i=this.scrollTargets.slice(0,t)),i&&i.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(t<this.scrollTargets.length&&!i&&(i=this.scrollTargets.slice(0,t)),i){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=i)r.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,H0),Ro&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){!this.active||(this.active=!1,this.observer.disconnect(),Ro&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,i){var r;this.delayedAndroidKey||this.view.win.requestAnimationFrame(()=>{let n=this.delayedAndroidKey;this.delayedAndroidKey=null,this.delayedFlush=-1,!this.flush()&&n.force&&Mr(this.dom,n.key,n.keyCode)}),(!this.delayedAndroidKey||t=="Enter")&&(this.delayedAndroidKey={key:t,keyCode:i,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let t=this.queue;for(let o of this.observer.takeRecords())t.push(o);t.length&&(this.queue=[]);let i=-1,r=-1,n=!1;for(let o of t){let s=this.readMutation(o);!s||(s.typeOver&&(n=!0),i==-1?{from:i,to:r}=s:(i=Math.min(s.from,i),r=Math.max(s.to,r)))}return{from:i,to:r,typeOver:n}}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let{from:i,to:r,typeOver:n}=this.processRecords(),o=this.selectionChanged&&_n(this.dom,this.selectionRange);if(i<0&&!o)return!1;i>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=this.view.state,a=this.onChange(i,r,n);return this.view.state==s&&this.view.update([]),a}readMutation(t){let i=this.view.docView.nearest(t.target);if(!i||i.ignoreMutation(t))return null;if(i.markDirty(t.type=="attributes"),t.type=="attributes"&&(i.dirty|=4),t.type=="childList"){let r=Du(i,t.previousSibling||t.target.previousSibling,-1),n=Du(i,t.nextSibling||t.target.nextSibling,1);return{from:r?i.posAfter(r):i.posAtStart,to:n?i.posBefore(n):i.posAtEnd,typeOver:!1}}else return t.type=="characterData"?{from:i.posAtStart,to:i.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var t,i,r;this.stop(),(t=this.intersection)===null||t===void 0||t.disconnect(),(i=this.gapIntersection)===null||i===void 0||i.disconnect(),(r=this.resize)===null||r===void 0||r.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}function Du(e,t,i){for(;t;){let r=wt.get(t);if(r&&r.parent==e)return r;let n=t.parentNode;t=n!=e.dom?n:i>0?t.nextSibling:t.previousSibling}return null}function K0(e){let t=null;function i(h){h.preventDefault(),h.stopImmediatePropagation(),t=h.getTargetRanges()[0]}if(e.contentDOM.addEventListener("beforeinput",i,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",i,!0),!t)return null;let r=t.startContainer,n=t.startOffset,o=t.endContainer,s=t.endOffset,a=e.docView.domAtPos(e.state.selection.main.anchor);return In(a.node,a.offset,o,s)&&([r,n,o,s]=[o,s,r,n]),{anchorNode:r,anchorOffset:n,focusNode:o,focusOffset:s}}function tm(e,t,i,r){let n,o,s=e.state.selection.main;if(t>-1){let a=e.docView.domBoundsAround(t,i,0);if(!a||e.state.readOnly)return!1;let{from:h,to:c}=a,d=e.docView.impreciseHead||e.docView.impreciseAnchor?[]:im(e),f=new Wh(d,e.state);f.readRange(a.startDOM,a.endDOM);let m=s.from,v=null;(e.inputState.lastKeyCode===8&&e.inputState.lastKeyTime>Date.now()-100||J.android&&f.text.length<c-h)&&(m=s.to,v="end");let S=em(e.state.doc.sliceString(h,c,yi),f.text,m-h,v);S&&(J.chrome&&e.inputState.lastKeyCode==13&&S.toB==S.from+2&&f.text.slice(S.from,S.toB)==yi+yi&&S.toB--,n={from:h+S.from,to:h+S.toA,insert:yt.of(f.text.slice(S.from,S.toB).split(yi))}),o=rm(d,h)}else if(e.hasFocus||!e.state.facet(Mn)){let a=e.observer.selectionRange,{impreciseHead:h,impreciseAnchor:c}=e.docView,d=h&&h.node==a.focusNode&&h.offset==a.focusOffset||!Ji(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),f=c&&c.node==a.anchorNode&&c.offset==a.anchorOffset||!Ji(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset);(d!=s.head||f!=s.anchor)&&(o=Y.single(f,d))}if(!n&&!o)return!1;if(!n&&r&&!s.empty&&o&&o.main.empty?n={from:s.from,to:s.to,insert:e.state.doc.slice(s.from,s.to)}:n&&n.from>=s.from&&n.to<=s.to&&(n.from!=s.from||n.to!=s.to)&&s.to-s.from-(n.to-n.from)<=4?n={from:s.from,to:s.to,insert:e.state.doc.slice(s.from,n.from).append(n.insert).append(e.state.doc.slice(n.to,s.to))}:(J.mac||J.android)&&n&&n.from==n.to&&n.from==s.head-1&&n.insert.toString()=="."&&(n={from:s.from,to:s.to,insert:yt.of([" "])}),n){let a=e.state;if(J.ios&&e.inputState.flushIOSKey(e)||J.android&&(n.from==s.from&&n.to==s.to&&n.insert.length==1&&n.insert.lines==2&&Mr(e.contentDOM,"Enter",13)||n.from==s.from-1&&n.to==s.to&&n.insert.length==0&&Mr(e.contentDOM,"Backspace",8)||n.from==s.from&&n.to==s.to+1&&n.insert.length==0&&Mr(e.contentDOM,"Delete",46)))return!0;let h=n.insert.toString();if(e.state.facet(Lh).some(f=>f(e,n.from,n.to,h)))return!0;e.inputState.composing>=0&&e.inputState.composing++;let c;if(n.from>=s.from&&n.to<=s.to&&n.to-n.from>=(s.to-s.from)/3&&(!o||o.main.empty&&o.main.from==n.from+n.insert.length)&&e.inputState.composing<0){let f=s.from<n.from?a.sliceDoc(s.from,n.from):"",m=s.to>n.to?a.sliceDoc(n.to,s.to):"";c=a.replaceSelection(e.state.toText(f+n.insert.sliceString(0,void 0,e.state.lineBreak)+m))}else{let f=a.changes(n),m=o&&!a.selection.main.eq(o.main)&&o.main.to<=f.newLength?o.main:void 0;if(a.selection.ranges.length>1&&e.inputState.composing>=0&&n.to<=s.to&&n.to>=s.to-10){let v=e.state.sliceDoc(n.from,n.to),S=Uh(e)||e.state.doc.lineAt(s.head),O=s.to-n.to,y=s.to-s.from;c=a.changeByRange(P=>{if(P.from==s.from&&P.to==s.to)return{changes:f,range:m||P.map(f)};let w=P.to-O,E=w-v.length;if(P.to-P.from!=y||e.state.sliceDoc(E,w)!=v||S&&P.to>=S.from&&P.from<=S.to)return{range:P};let T=a.changes({from:E,to:w,insert:n.insert}),_=P.to-s.to;return{changes:T,range:m?Y.range(Math.max(0,m.anchor+_),Math.max(0,m.head+_)):P.map(T)}})}else c={changes:f,selection:m&&a.selection.replaceRange(m)}}let d="input.type";return e.composing&&(d+=".compose",e.inputState.compositionFirstChange&&(d+=".start",e.inputState.compositionFirstChange=!1)),e.dispatch(c,{scrollIntoView:!0,userEvent:d}),!0}else if(o&&!o.main.eq(s)){let a=!1,h="select";return e.inputState.lastSelectionTime>Date.now()-50&&(e.inputState.lastSelectionOrigin=="select"&&(a=!0),h=e.inputState.lastSelectionOrigin),e.dispatch({selection:o,scrollIntoView:a,userEvent:h}),!0}else return!1}function em(e,t,i,r){let n=Math.min(e.length,t.length),o=0;for(;o<n&&e.charCodeAt(o)==t.charCodeAt(o);)o++;if(o==n&&e.length==t.length)return null;let s=e.length,a=t.length;for(;s>0&&a>0&&e.charCodeAt(s-1)==t.charCodeAt(a-1);)s--,a--;if(r=="end"){let h=Math.max(0,o-Math.min(s,a));i-=s+h-o}return s<o&&e.length<t.length?(o-=i<=o&&i>=s?o-i:0,a=o+(a-s),s=o):a<o&&(o-=i<=o&&i>=a?o-i:0,s=o+(s-a),a=o),{from:o,toA:s,toB:a}}function im(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:i,anchorOffset:r,focusNode:n,focusOffset:o}=e.observer.selectionRange;return i&&(t.push(new Zh(i,r)),(n!=i||o!=r)&&t.push(new Zh(n,o))),t}function rm(e,t){if(e.length==0)return null;let i=e[0].pos,r=e.length==2?e[1].pos:i;return i>-1&&r>-1?Y.single(i+t,r+t):null}class tt{constructor(t={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=t.dispatch||(i=>this.update([i])),this.dispatch=this.dispatch.bind(this),this._root=t.root||Hf(t.parent)||document,this.viewState=new xu(t.state||Ot.create(t)),this.plugins=this.state.facet(Rr).map(i=>new Eo(i));for(let i of this.plugins)i.update(this);this.observer=new J0(this,(i,r,n)=>tm(this,i,r,n),i=>{this.inputState.runScrollHandlers(this,i),this.observer.intersecting&&this.measure()}),this.inputState=new b0(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new zh(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),t.parent&&t.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...t){this._dispatch(t.length==1&&t[0]instanceof Yt?t[0]:this.state.update(...t))}update(t){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let i=!1,r=!1,n,o=this.state;for(let a of t){if(a.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=a.state}if(this.destroyed){this.viewState.state=o;return}if(this.observer.clear(),o.facet(Ot.phrases)!=this.state.facet(Ot.phrases))return this.setState(o);n=Bn.create(this,o,t);let s=this.viewState.scrollTarget;try{this.updateState=2;for(let a of t){if(s&&(s=s.map(a.changes)),a.scrollIntoView){let{main:h}=a.state.selection;s=new Fn(h.empty?h:Y.cursor(h.head,h.head>h.anchor?-1:1))}for(let h of a.effects)h.is(Xh)&&(s=h.value)}this.viewState.update(n,s),this.bidiCache=Zn.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),i=this.docView.update(n),this.state.facet(Wr)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(i,t.some(a=>a.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet(jn)!=n.state.facet(jn)&&(this.viewState.mustMeasureContent=!0),(i||r||s||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!n.empty)for(let a of this.state.facet(Do))a(n)}setState(t){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=t;return}this.updateState=2;let i=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new xu(t),this.plugins=t.facet(Rr).map(r=>new Eo(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView=new zh(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}i&&this.focus(),this.requestMeasure()}updatePlugins(t){let i=t.startState.facet(Rr),r=t.state.facet(Rr);if(i!=r){let n=[];for(let o of r){let s=i.indexOf(o);if(s<0)n.push(new Eo(o));else{let a=this.plugins[s];a.mustUpdate=t,n.push(a)}}for(let o of this.plugins)o.mustUpdate!=t&&o.destroy(this);this.plugins=n,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let n of this.plugins)n.mustUpdate=t;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this)}measure(t=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,t&&this.observer.forceFlush();let i=null,{scrollHeight:r,scrollTop:n,clientHeight:o}=this.scrollDOM,s=n>r-o-4?r:n;try{for(let a=0;;a++){this.updateState=1;let h=this.viewport,c=this.viewState.lineBlockAtHeight(s),d=this.viewState.measure(this);if(!d&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let f=[];d&4||([this.measureRequests,f]=[f,this.measureRequests]);let m=f.map(y=>{try{return y.read(this)}catch(P){return Se(this.state,P),Eu}}),v=Bn.create(this,this.state,[]),S=!1,O=!1;v.flags|=d,i?i.flags|=d:i=v,this.updateState=2,v.empty||(this.updatePlugins(v),this.inputState.update(v),this.updateAttrs(),S=this.docView.update(v));for(let y=0;y<f.length;y++)if(m[y]!=Eu)try{let P=f[y];P.write&&P.write(m[y],this)}catch(P){Se(this.state,P)}if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,O=!0;else{let y=this.viewState.lineBlockAt(c.from).top-c.top;(y>1||y<-1)&&(this.scrollDOM.scrollTop+=y,O=!0)}if(S&&this.docView.updateSelection(!0),this.viewport.from==h.from&&this.viewport.to==h.to&&!O&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(i&&!i.empty)for(let a of this.state.facet(Do))a(i)}get themeClasses(){return Mo+" "+(this.state.facet(Fo)?wu:Su)+" "+this.state.facet(jn)}updateAttrs(){let t=Tu(this,$h,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),i={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Mn)?"true":"false",class:"cm-content",style:`${J.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(i["aria-readonly"]="true"),Tu(this,Nh,i);let r=this.observer.ignore(()=>{let n=So(this.contentDOM,this.contentAttrs,i),o=So(this.dom,this.editorAttrs,t);return n||o});return this.editorAttrs=t,this.contentAttrs=i,r}showAnnouncements(t){let i=!0;for(let r of t)for(let n of r.effects)if(n.is(tt.announce)){i&&(this.announceDOM.textContent=""),i=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(Wr),fi.mount(this.root,this.styleModules.concat(V0).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),t){if(t.key!=null){for(let i=0;i<this.measureRequests.length;i++)if(this.measureRequests[i].key===t.key){this.measureRequests[i]=t;return}}this.measureRequests.push(t)}}plugin(t){let i=this.pluginMap.get(t);return(i===void 0||i&&i.spec!=t)&&this.pluginMap.set(t,i=this.plugins.find(r=>r.spec==t)||null),i&&i.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,i,r){return Io(this,t,eu(this,t,i,r))}moveByGroup(t,i){return Io(this,t,eu(this,t,i,r=>S0(this,t.head,r)))}moveToLineBoundary(t,i,r=!0){return C0(this,t,i,r)}moveVertically(t,i,r){return Io(this,t,w0(this,t,i,r))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,i=0){return this.docView.posFromDOM(t,i)}posAtCoords(t,i=!0){return this.readMeasured(),Kh(this,t,i)}coordsAtPos(t,i=1){this.readMeasured();let r=this.docView.coordsAt(t,i);if(!r||r.left==r.right)return r;let n=this.state.doc.lineAt(t),o=this.bidiSpans(n),s=o[ir.find(o,t-n.from,-1,i)];return Qn(r,s.dir==At.LTR==i>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(Qh)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>nm)return Rh(t.length);let i=this.textDirectionAt(t.from);for(let n of this.bidiCache)if(n.from==t.from&&n.dir==i)return n.order;let r=a0(t.text,i);return this.bidiCache.push(new Zn(t.from,t.to,i,r)),r}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||J.safari&&((t=this.inputState)===null||t===void 0?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{uh(this.contentDOM),this.docView.updateSelection()})}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((t.nodeType==9?t:t.ownerDocument).defaultView),this.mountStyles())}destroy(){for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,i={}){return Xh.of(new Fn(typeof t=="number"?Y.cursor(t):t,i.y,i.x,i.yMargin,i.xMargin))}static domEventHandlers(t){return Nt.define(()=>({}),{eventHandlers:t})}static theme(t,i){let r=fi.newName(),n=[jn.of(r),Wr.of(Bo(`.${r}`,t))];return i&&i.dark&&n.push(Fo.of(!0)),n}static baseTheme(t){return Li.lowest(Wr.of(Bo("."+Mo,t,bu)))}static findFromDOM(t){var i;let r=t.querySelector(".cm-content"),n=r&&wt.get(r)||wt.get(t);return((i=n==null?void 0:n.rootView)===null||i===void 0?void 0:i.view)||null}}tt.styleModule=Wr,tt.inputHandler=Lh,tt.perLineTextDirection=Qh,tt.exceptionSink=Ih,tt.updateListener=Do,tt.editable=Mn,tt.mouseSelectionStyle=_h,tt.dragMovesSelection=kh,tt.clickAddsSelectionRange=Ah,tt.decorations=Yr,tt.atomicRanges=Fh,tt.scrollMargins=Mh,tt.darkTheme=Fo,tt.contentAttributes=Nh,tt.editorAttributes=$h,tt.lineWrapping=tt.contentAttributes.of({class:"cm-lineWrapping"}),tt.announce=nt.define();const nm=4096,Eu={};class Zn{constructor(t,i,r,n){this.from=t,this.to=i,this.dir=r,this.order=n}static update(t,i){if(i.empty)return t;let r=[],n=t.length?t[t.length-1].dir:At.LTR;for(let o=Math.max(0,t.length-10);o<t.length;o++){let s=t[o];s.dir==n&&!i.touchesRange(s.from,s.to)&&r.push(new Zn(i.mapPos(s.from,1),i.mapPos(s.to,-1),s.dir,s.order))}return r}}function Tu(e,t,i){for(let r=e.state.facet(t),n=r.length-1;n>=0;n--){let o=r[n],s=typeof o=="function"?o(e):o;s&&Po(s,i)}return i}const sm=J.mac?"mac":J.windows?"win":J.linux?"linux":"key";function om(e,t){const i=e.split(/-(?!$)/);let r=i[i.length-1];r=="Space"&&(r=" ");let n,o,s,a;for(let h=0;h<i.length-1;++h){const c=i[h];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))n=!0;else if(/^(c|ctrl|control)$/i.test(c))o=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))t=="mac"?a=!0:o=!0;else throw new Error("Unrecognized modifier name: "+c)}return n&&(r="Alt-"+r),o&&(r="Ctrl-"+r),a&&(r="Meta-"+r),s&&(r="Shift-"+r),r}function zn(e,t,i){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),i!==!1&&t.shiftKey&&(e="Shift-"+e),e}const lm=Li.default(tt.domEventHandlers({keydown(e,t){return _u(ku(t.state),e,t,"editor")}})),Zr=H.define({enables:lm}),Au=new WeakMap;function ku(e){let t=e.facet(Zr),i=Au.get(t);return i||Au.set(t,i=um(t.reduce((r,n)=>r.concat(n),[]))),i}function am(e,t,i){return _u(ku(e.state),t,e,i)}let vi=null;const hm=4e3;function um(e,t=sm){let i=Object.create(null),r=Object.create(null),n=(s,a)=>{let h=r[s];if(h==null)r[s]=a;else if(h!=a)throw new Error("Key binding "+s+" is used both as a regular binding and as a multi-stroke prefix")},o=(s,a,h,c)=>{let d=i[s]||(i[s]=Object.create(null)),f=a.split(/ (?!$)/).map(S=>om(S,t));for(let S=1;S<f.length;S++){let O=f.slice(0,S).join(" ");n(O,!0),d[O]||(d[O]={preventDefault:!0,commands:[y=>{let P=vi={view:y,prefix:O,scope:s};return setTimeout(()=>{vi==P&&(vi=null)},hm),!0}]})}let m=f.join(" ");n(m,!1);let v=d[m]||(d[m]={preventDefault:!1,commands:[]});v.commands.push(h),c&&(v.preventDefault=!0)};for(let s of e){let a=s[t]||s.key;if(a)for(let h of s.scope?s.scope.split(" "):["editor"])o(h,a,s.run,s.preventDefault),s.shift&&o(h,"Shift-"+a,s.shift,s.preventDefault)}return i}function _u(e,t,i,r){let n=zf(t),o=Gt(n,0),s=Pe(o)==n.length&&n!=" ",a="",h=!1;vi&&vi.view==i&&vi.scope==r&&(a=vi.prefix+" ",(h=ru.indexOf(t.keyCode)<0)&&(vi=null));let c=v=>{if(v){for(let S of v.commands)if(S(i))return!0;v.preventDefault&&(h=!0)}return!1},d=e[r],f,m;if(d){if(c(d[a+zn(n,t,!s)]))return!0;if(s&&(t.shiftKey||t.altKey||t.metaKey||o>127)&&(f=mi[t.keyCode])&&f!=n){if(c(d[a+zn(f,t,!0)])||t.shiftKey&&(m=$r[t.keyCode])!=n&&m!=f&&c(d[a+zn(m,t,!1)]))return!0}else if(s&&t.shiftKey&&c(d[a+zn(n,t,!0)]))return!0}return h}const Iu=!J.ios,zr=H.define({combine(e){return ze(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(t,i)=>Math.min(t,i),drawRangeCursor:(t,i)=>t||i})}});function cm(e={}){return[zr.of(e),pm,dm]}class Lu{constructor(t,i,r,n,o){this.left=t,this.top=i,this.width=r,this.height=n,this.className=o}draw(){let t=document.createElement("div");return t.className=this.className,this.adjust(t),t}adjust(t){t.style.left=this.left+"px",t.style.top=this.top+"px",this.width>=0&&(t.style.width=this.width+"px"),t.style.height=this.height+"px"}eq(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height&&this.className==t.className}}const pm=Nt.fromClass(class{constructor(e){this.view=e,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=e.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=e.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),e.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(zr).cursorBlinkRate+"ms"}update(e){let t=e.startState.facet(zr)!=e.state.facet(zr);(t||e.selectionSet||e.geometryChanged||e.viewportChanged)&&this.view.requestMeasure(this.measureReq),e.transactions.some(i=>i.scrollIntoView)&&(this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink"),t&&this.setBlinkRate()}readPos(){let{state:e}=this.view,t=e.facet(zr),i=e.selection.ranges.map(n=>n.empty?[]:fm(this.view,n)).reduce((n,o)=>n.concat(o)),r=[];for(let n of e.selection.ranges){let o=n==e.selection.main;if(n.empty?!o||Iu:t.drawRangeCursor){let s=mm(this.view,n,o);s&&r.push(s)}}return{rangePieces:i,cursors:r}}drawSel({rangePieces:e,cursors:t}){if(e.length!=this.rangePieces.length||e.some((i,r)=>!i.eq(this.rangePieces[r]))){this.selectionLayer.textContent="";for(let i of e)this.selectionLayer.appendChild(i.draw());this.rangePieces=e}if(t.length!=this.cursors.length||t.some((i,r)=>!i.eq(this.cursors[r]))){let i=this.cursorLayer.children;if(i.length!==t.length){this.cursorLayer.textContent="";for(const r of t)this.cursorLayer.appendChild(r.draw())}else t.forEach((r,n)=>r.adjust(i[n]));this.cursors=t}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),Qu={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};Iu&&(Qu[".cm-line"].caretColor="transparent !important");const dm=Li.highest(tt.theme(Qu));function Xu(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==At.LTR?t.left:t.right-e.scrollDOM.clientWidth)-e.scrollDOM.scrollLeft,top:t.top-e.scrollDOM.scrollTop}}function $u(e,t,i){let r=Y.cursor(t);return{from:Math.max(i.from,e.moveToLineBoundary(r,!1,!0).from),to:Math.min(i.to,e.moveToLineBoundary(r,!0,!0).from),type:Pt.Text}}function Nu(e,t){let i=e.lineBlockAt(t);if(Array.isArray(i.type)){for(let r of i.type)if(r.to>t||r.to==t&&(r.to==i.to||r.type==Pt.Text))return r}return i}function fm(e,t){if(t.to<=e.viewport.from||t.from>=e.viewport.to)return[];let i=Math.max(t.from,e.viewport.from),r=Math.min(t.to,e.viewport.to),n=e.textDirection==At.LTR,o=e.contentDOM,s=o.getBoundingClientRect(),a=Xu(e),h=window.getComputedStyle(o.firstChild),c=s.left+parseInt(h.paddingLeft)+Math.min(0,parseInt(h.textIndent)),d=s.right-parseInt(h.paddingRight),f=Nu(e,i),m=Nu(e,r),v=f.type==Pt.Text?f:null,S=m.type==Pt.Text?m:null;if(e.lineWrapping&&(v&&(v=$u(e,i,v)),S&&(S=$u(e,r,S))),v&&S&&v.from==S.from)return y(P(t.from,t.to,v));{let E=v?P(t.from,null,v):w(f,!1),T=S?P(null,t.to,S):w(m,!0),_=[];return(v||f).to<(S||m).from-1?_.push(O(c,E.bottom,d,T.top)):E.bottom<T.top&&e.elementAtHeight((E.bottom+T.top)/2).type==Pt.Text&&(E.bottom=T.top=(E.bottom+T.top)/2),y(E).concat(_).concat(y(T))}function O(E,T,_,I){return new Lu(E-a.left,T-a.top-.01,_-E,I-T+.01,"cm-selectionBackground")}function y({top:E,bottom:T,horizontal:_}){let I=[];for(let F=0;F<_.length;F+=2)I.push(O(_[F],E,_[F+1],T));return I}function P(E,T,_){let I=1e9,F=-1e9,q=[];function j(Q,R,U,K,ot){let ht=e.coordsAtPos(Q,Q==_.to?-2:2),dt=e.coordsAtPos(U,U==_.from?2:-2);I=Math.min(ht.top,dt.top,I),F=Math.max(ht.bottom,dt.bottom,F),ot==At.LTR?q.push(n&&R?c:ht.left,n&&K?d:dt.right):q.push(!n&&K?c:dt.left,!n&&R?d:ht.right)}let z=E!=null?E:_.from,B=T!=null?T:_.to;for(let Q of e.visibleRanges)if(Q.to>z&&Q.from<B)for(let R=Math.max(Q.from,z),U=Math.min(Q.to,B);;){let K=e.state.doc.lineAt(R);for(let ot of e.bidiSpans(K)){let ht=ot.from+K.from,dt=ot.to+K.from;if(ht>=U)break;dt>R&&j(Math.max(ht,R),E==null&&ht<=z,Math.min(dt,U),T==null&&dt>=B,ot.dir)}if(R=K.to+1,R>=U)break}return q.length==0&&j(z,E==null,B,T==null,e.textDirection),{top:I,bottom:F,horizontal:q}}function w(E,T){let _=s.top+(T?E.top:E.bottom);return{top:_,bottom:_,horizontal:[]}}}function mm(e,t,i){let r=e.coordsAtPos(t.head,t.assoc||1);if(!r)return null;let n=Xu(e);return new Lu(r.left-n.left,r.top-n.top,-1,r.bottom-r.top,i?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}const Fu=nt.define({map(e,t){return e==null?null:t.mapPos(e)}}),qr=Rt.define({create(){return null},update(e,t){return e!=null&&(e=t.changes.mapPos(e)),t.effects.reduce((i,r)=>r.is(Fu)?r.value:i,e)}}),Om=Nt.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var t;let i=e.state.field(qr);i==null?this.cursor!=null&&((t=this.cursor)===null||t===void 0||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(qr)!=i||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let e=this.view.state.field(qr),t=e!=null&&this.view.coordsAtPos(e);if(!t)return null;let i=this.view.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+this.view.scrollDOM.scrollLeft,top:t.top-i.top+this.view.scrollDOM.scrollTop,height:t.bottom-t.top}}drawCursor(e){this.cursor&&(e?(this.cursor.style.left=e.left+"px",this.cursor.style.top=e.top+"px",this.cursor.style.height=e.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(qr)!=e&&this.view.dispatch({effects:Fu.of(e)})}},{eventHandlers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){(e.target==this.view.contentDOM||!this.view.contentDOM.contains(e.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function gm(){return[qr,Om]}function Mu(e,t,i,r,n){t.lastIndex=0;for(let o=e.iterRange(i,r),s=i,a;!o.next().done;s+=o.value.length)if(!o.lineBreak)for(;a=t.exec(o.value);)n(s+a.index,a)}function ym(e,t){let i=e.visibleRanges;if(i.length==1&&i[0].from==e.viewport.from&&i[0].to==e.viewport.to)return i;let r=[];for(let{from:n,to:o}of i)n=Math.max(e.state.doc.lineAt(n).from,n-t),o=Math.min(e.state.doc.lineAt(o).to,o+t),r.length&&r[r.length-1].to>=n?r[r.length-1].to=o:r.push({from:n,to:o});return r}class xm{constructor(t){const{regexp:i,decoration:r,decorate:n,boundary:o,maxLength:s=1e3}=t;if(!i.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=i,n)this.addMatch=(a,h,c,d)=>n(d,c,c+a[0].length,a,h);else if(typeof r=="function")this.addMatch=(a,h,c,d)=>{let f=r(a,h,c);f&&d(c,c+a[0].length,f)};else if(r)this.addMatch=(a,h,c,d)=>d(c,c+a[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=s}createDeco(t){let i=new di,r=i.add.bind(i);for(let{from:n,to:o}of ym(t,this.maxLength))Mu(t.state.doc,this.regexp,n,o,(s,a)=>this.addMatch(a,t,s,r));return i.finish()}updateDeco(t,i){let r=1e9,n=-1;return t.docChanged&&t.changes.iterChanges((o,s,a,h)=>{h>t.view.viewport.from&&a<t.view.viewport.to&&(r=Math.min(a,r),n=Math.max(h,n))}),t.viewportChanged||n-r>1e3?this.createDeco(t.view):n>-1?this.updateRange(t.view,i.map(t.changes),r,n):i}updateRange(t,i,r,n){for(let o of t.visibleRanges){let s=Math.max(o.from,r),a=Math.min(o.to,n);if(a>s){let h=t.state.doc.lineAt(s),c=h.to<a?t.state.doc.lineAt(a):h,d=Math.max(o.from,h.from),f=Math.min(o.to,c.to);if(this.boundary){for(;s>h.from;s--)if(this.boundary.test(h.text[s-1-h.from])){d=s;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){f=a;break}}let m=[],v,S=(O,y,P)=>m.push(P.range(O,y));if(h==c)for(this.regexp.lastIndex=d-h.from;(v=this.regexp.exec(h.text))&&v.index<f-h.from;)this.addMatch(v,t,v.index+h.from,S);else Mu(t.state.doc,this.regexp,d,f,(O,y)=>this.addMatch(y,t,O,S));i=i.update({filterFrom:d,filterTo:f,filter:(O,y)=>O<d||y>f,add:m})}}return i}}const Yo=/x/.unicode!=null?"gu":"g",vm=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,Yo),Pm={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Wo=null;function Cm(){var e;if(Wo==null&&typeof document<"u"&&document.body){let t=document.body.style;Wo=((e=t.tabSize)!==null&&e!==void 0?e:t.MozTabSize)!=null}return Wo||!1}const qn=H.define({combine(e){let t=ze(e,{render:null,specialChars:vm,addSpecialChars:null});return(t.replaceTabs=!Cm())&&(t.specialChars=new RegExp("	|"+t.specialChars.source,Yo)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,Yo)),t}});function Sm(e={}){return[qn.of(e),wm()]}let Bu=null;function wm(){return Bu||(Bu=Nt.fromClass(class{constructor(e){this.view=e,this.decorations=et.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(qn)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new xm({regexp:e.specialChars,decoration:(t,i,r)=>{let{doc:n}=i.state,o=Gt(t[0],0);if(o==9){let s=n.lineAt(r),a=i.state.tabSize,h=Xr(s.text,a,r-s.from);return et.replace({widget:new Tm((a-h%a)*this.view.defaultCharacterWidth)})}return this.decorationCache[o]||(this.decorationCache[o]=et.replace({widget:new Em(e,o)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(qn);e.startState.facet(qn)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))}const bm="\u2022";function Dm(e){return e>=32?bm:e==10?"\u2424":String.fromCharCode(9216+e)}class Em extends oi{constructor(t,i){super(),this.options=t,this.code=i}eq(t){return t.code==this.code}toDOM(t){let i=Dm(this.code),r=t.state.phrase("Control character")+" "+(Pm[this.code]||"0x"+this.code.toString(16)),n=this.options.render&&this.options.render(this.code,r,i);if(n)return n;let o=document.createElement("span");return o.textContent=i,o.title=r,o.setAttribute("aria-label",r),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class Tm extends oi{constructor(t){super(),this.width=t}eq(t){return t.width==this.width}toDOM(){let t=document.createElement("span");return t.textContent="	",t.className="cm-tab",t.style.width=this.width+"px",t}ignoreEvent(){return!1}}function Am(){return _m}const km=et.line({class:"cm-activeLine"}),_m=Nt.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=-1,i=[];for(let r of e.state.selection.ranges){let n=e.lineBlockAt(r.head);n.from>t&&(i.push(km.range(n.from)),t=n.from)}return et.set(i)}},{decorations:e=>e.decorations}),jo=2e3;function Im(e,t,i){let r=Math.min(t.line,i.line),n=Math.max(t.line,i.line),o=[];if(t.off>jo||i.off>jo||t.col<0||i.col<0){let s=Math.min(t.off,i.off),a=Math.max(t.off,i.off);for(let h=r;h<=n;h++){let c=e.doc.line(h);c.length<=a&&o.push(Y.range(c.from+s,c.to+a))}}else{let s=Math.min(t.col,i.col),a=Math.max(t.col,i.col);for(let h=r;h<=n;h++){let c=e.doc.line(h),d=ho(c.text,s,e.tabSize,!0);if(d>-1){let f=ho(c.text,a,e.tabSize);o.push(Y.range(c.from+d,c.from+f))}}}return o}function Lm(e,t){let i=e.coordsAtPos(e.viewport.from);return i?Math.round(Math.abs((i.left-t)/e.defaultCharacterWidth)):-1}function Ru(e,t){let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1),r=e.state.doc.lineAt(i),n=i-r.from,o=n>jo?-1:n==r.length?Lm(e,t.clientX):Xr(r.text,e.state.tabSize,i-r.from);return{line:r.number,col:o,off:n}}function Qm(e,t){let i=Ru(e,t),r=e.state.selection;return i?{update(n){if(n.docChanged){let o=n.changes.mapPos(n.startState.doc.line(i.line).from),s=n.state.doc.lineAt(o);i={line:s.number,col:i.col,off:Math.min(i.off,s.length)},r=r.map(n.changes)}},get(n,o,s){let a=Ru(e,n);if(!a)return r;let h=Im(e.state,i,a);return h.length?s?Y.create(h.concat(r.ranges)):Y.create(h):r}}:null}function Xm(e){let t=(e==null?void 0:e.eventFilter)||(i=>i.altKey&&i.button==0);return tt.mouseSelectionStyle.of((i,r)=>t(r)?Qm(i,r):null)}const $m={Alt:[18,e=>e.altKey],Control:[17,e=>e.ctrlKey],Shift:[16,e=>e.shiftKey],Meta:[91,e=>e.metaKey]},Nm={style:"cursor: crosshair"};function Fm(e={}){let[t,i]=$m[e.key||"Alt"],r=Nt.fromClass(class{constructor(n){this.view=n,this.isDown=!1}set(n){this.isDown!=n&&(this.isDown=n,this.view.update([]))}},{eventHandlers:{keydown(n){this.set(n.keyCode==t||i(n))},keyup(n){(n.keyCode==t||!i(n))&&this.set(!1)}}});return[r,tt.contentAttributes.of(n=>{var o;return!((o=n.plugin(r))===null||o===void 0)&&o.isDown?Nm:null})]}const Zo="-10000px";class Yu{constructor(t,i,r){this.facet=i,this.createTooltipView=r,this.input=t.state.facet(i),this.tooltips=this.input.filter(n=>n),this.tooltipViews=this.tooltips.map(r)}update(t){let i=t.state.facet(this.facet),r=i.filter(o=>o);if(i===this.input){for(let o of this.tooltipViews)o.update&&o.update(t);return!1}let n=[];for(let o=0;o<r.length;o++){let s=r[o],a=-1;if(s){for(let h=0;h<this.tooltips.length;h++){let c=this.tooltips[h];c&&c.create==s.create&&(a=h)}if(a<0)n[o]=this.createTooltipView(s);else{let h=n[o]=this.tooltipViews[a];h.update&&h.update(t)}}}for(let o of this.tooltipViews)n.indexOf(o)<0&&o.dom.remove();return this.input=i,this.tooltips=r,this.tooltipViews=n,!0}}function Mm(e){let{win:t}=e;return{top:0,left:0,bottom:t.innerHeight,right:t.innerWidth}}const zo=H.define({combine:e=>{var t,i,r;return{position:J.ios?"absolute":((t=e.find(n=>n.position))===null||t===void 0?void 0:t.position)||"fixed",parent:((i=e.find(n=>n.parent))===null||i===void 0?void 0:i.parent)||null,tooltipSpace:((r=e.find(n=>n.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||Mm}}}),Wu=Nt.fromClass(class{constructor(e){this.view=e,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let t=e.state.facet(zo);this.position=t.position,this.parent=t.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new Yu(e,qo,i=>this.createTooltip(i)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(i=>{Date.now()>this.lastTransaction-50&&i.length>0&&i[i.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e);t&&this.observeIntersection();let i=t||e.geometryChanged,r=e.state.facet(zo);if(r.position!=this.position){this.position=r.position;for(let n of this.manager.tooltipViews)n.dom.style.position=this.position;i=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let n of this.manager.tooltipViews)this.container.appendChild(n.dom);i=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);i&&this.maybeMeasure()}createTooltip(e){let t=e.create(this.view);if(t.dom.classList.add("cm-tooltip"),e.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",t.dom.appendChild(i)}return t.dom.style.position=this.position,t.dom.style.top=Zo,this.container.appendChild(t.dom),t.mount&&t.mount(this.view),t}destroy(){var e;this.view.win.removeEventListener("resize",this.measureSoon);for(let{dom:t}of this.manager.tooltipViews)t.remove();(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=this.view.dom.getBoundingClientRect();return{editor:e,parent:this.parent?this.container.getBoundingClientRect():e,pos:this.manager.tooltips.map((t,i)=>{let r=this.manager.tooltipViews[i];return r.getCoords?r.getCoords(t.pos):this.view.coordsAtPos(t.pos)}),size:this.manager.tooltipViews.map(({dom:t})=>t.getBoundingClientRect()),space:this.view.state.facet(zo).tooltipSpace(this.view)}}writeMeasure(e){let{editor:t,space:i}=e,r=[];for(let n=0;n<this.manager.tooltips.length;n++){let o=this.manager.tooltips[n],s=this.manager.tooltipViews[n],{dom:a}=s,h=e.pos[n],c=e.size[n];if(!h||h.bottom<=Math.max(t.top,i.top)||h.top>=Math.min(t.bottom,i.bottom)||h.right<Math.max(t.left,i.left)-.1||h.left>Math.min(t.right,i.right)+.1){a.style.top=Zo;continue}let d=o.arrow?s.dom.querySelector(".cm-tooltip-arrow"):null,f=d?7:0,m=c.right-c.left,v=c.bottom-c.top,S=s.offset||Rm,O=this.view.textDirection==At.LTR,y=c.width>i.right-i.left?O?i.left:i.right-c.width:O?Math.min(h.left-(d?14:0)+S.x,i.right-m):Math.max(i.left,h.left-m+(d?14:0)-S.x),P=!!o.above;!o.strictSide&&(P?h.top-(c.bottom-c.top)-S.y<i.top:h.bottom+(c.bottom-c.top)+S.y>i.bottom)&&P==i.bottom-h.bottom>h.top-i.top&&(P=!P);let w=P?h.top-v-f-S.y:h.bottom+f+S.y,E=y+m;if(s.overlap!==!0)for(let T of r)T.left<E&&T.right>y&&T.top<w+v&&T.bottom>w&&(w=P?T.top-v-2-f:T.bottom+f+2);this.position=="absolute"?(a.style.top=w-e.parent.top+"px",a.style.left=y-e.parent.left+"px"):(a.style.top=w+"px",a.style.left=y+"px"),d&&(d.style.left=`${h.left+(O?S.x:-S.x)-(y+14-7)}px`),s.overlap!==!0&&r.push({left:y,top:w,right:E,bottom:w+v}),a.classList.toggle("cm-tooltip-above",P),a.classList.toggle("cm-tooltip-below",!P),s.positioned&&s.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=Zo}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),Bm=tt.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:`${7}px`,width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:`${7}px solid transparent`,borderRight:`${7}px solid transparent`},".cm-tooltip-above &":{bottom:`-${7}px`,"&:before":{borderTop:`${7}px solid #bbb`},"&:after":{borderTop:`${7}px solid #f5f5f5`,bottom:"1px"}},".cm-tooltip-below &":{top:`-${7}px`,"&:before":{borderBottom:`${7}px solid #bbb`},"&:after":{borderBottom:`${7}px solid #f5f5f5`,top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Rm={x:0,y:0},qo=H.define({enables:[Wu,Bm]}),Un=H.define();class Uo{constructor(t){this.view=t,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Yu(t,Un,i=>this.createHostedView(i))}static create(t){return new Uo(t)}createHostedView(t){let i=t.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(i.dom),this.mounted&&i.mount&&i.mount(this.view),i}mount(t){for(let i of this.manager.tooltipViews)i.mount&&i.mount(t);this.mounted=!0}positioned(){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned()}update(t){this.manager.update(t)}}const Ym=qo.compute([Un],e=>{let t=e.facet(Un).filter(i=>i);return t.length===0?null:{pos:Math.min(...t.map(i=>i.pos)),end:Math.max(...t.filter(i=>i.end!=null).map(i=>i.end)),create:Uo.create,above:t[0].above,arrow:t.some(i=>i.arrow)}});class Wm{constructor(t,i,r,n,o){this.view=t,this.source=i,this.field=r,this.setHover=n,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:t.dom,time:0},this.checkHover=this.checkHover.bind(this),t.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),t.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let t=Date.now()-this.lastMove.time;t<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-t):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:t}=this,i=this.view.contentDOM.contains(t.target)?this.view.posAtCoords(t):null;if(i==null)return;let r=this.view.coordsAtPos(i);if(r==null||t.y<r.top||t.y>r.bottom||t.x<r.left-this.view.defaultCharacterWidth||t.x>r.right+this.view.defaultCharacterWidth)return;let n=this.view.bidiSpans(this.view.state.doc.lineAt(i)).find(a=>a.from<=i&&a.to>=i),o=n&&n.dir==At.RTL?-1:1,s=this.source(this.view,i,t.x<r.left?-o:o);if(s!=null&&s.then){let a=this.pending={pos:i};s.then(h=>{this.pending==a&&(this.pending=null,h&&this.view.dispatch({effects:this.setHover.of(h)}))},h=>Se(this.view.state,h,"hover tooltip"))}else s&&this.view.dispatch({effects:this.setHover.of(s)})}mousemove(t){var i;this.lastMove={x:t.clientX,y:t.clientY,target:t.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let r=this.active;if(r&&!jm(this.lastMove.target)||this.pending){let{pos:n}=r||this.pending,o=(i=r==null?void 0:r.end)!==null&&i!==void 0?i:n;(n==o?this.view.posAtCoords(this.lastMove)!=n:!Zm(this.view,n,o,t.clientX,t.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function jm(e){for(let t=e;t;t=t.parentNode)if(t.nodeType==1&&t.classList.contains("cm-tooltip"))return!0;return!1}function Zm(e,t,i,r,n,o){let s=document.createRange(),a=e.domAtPos(t),h=e.domAtPos(i);s.setEnd(h.node,h.offset),s.setStart(a.node,a.offset);let c=s.getClientRects();s.detach();for(let d=0;d<c.length;d++){let f=c[d];if(Math.max(f.top-n,n-f.bottom,f.left-r,r-f.right)<=o)return!0}return!1}function zm(e,t={}){let i=nt.define(),r=Rt.define({create(){return null},update(n,o){if(n&&(t.hideOnChange&&(o.docChanged||o.selection)||t.hideOn&&t.hideOn(o,n)))return null;if(n&&o.docChanged){let s=o.changes.mapPos(n.pos,-1,Vt.TrackDel);if(s==null)return null;let a=Object.assign(Object.create(null),n);a.pos=s,n.end!=null&&(a.end=o.changes.mapPos(n.end)),n=a}for(let s of o.effects)s.is(i)&&(n=s.value),s.is(Um)&&(n=null);return n},provide:n=>Un.from(n)});return[r,Nt.define(n=>new Wm(n,e,r,i,t.hoverTime||300)),Ym]}function qm(e,t){let i=e.plugin(Wu);if(!i)return null;let r=i.manager.tooltips.indexOf(t);return r<0?null:i.manager.tooltipViews[r]}const Um=nt.define(),ju=H.define({combine(e){let t,i;for(let r of e)t=t||r.topContainer,i=i||r.bottomContainer;return{topContainer:t,bottomContainer:i}}});function Ur(e,t){let i=e.plugin(Zu),r=i?i.specs.indexOf(t):-1;return r>-1?i.panels[r]:null}const Zu=Nt.fromClass(class{constructor(e){this.input=e.state.facet(Gr),this.specs=this.input.filter(i=>i),this.panels=this.specs.map(i=>i(e));let t=e.state.facet(ju);this.top=new Gn(e,!0,t.topContainer),this.bottom=new Gn(e,!1,t.bottomContainer),this.top.sync(this.panels.filter(i=>i.top)),this.bottom.sync(this.panels.filter(i=>!i.top));for(let i of this.panels)i.dom.classList.add("cm-panel"),i.mount&&i.mount()}update(e){let t=e.state.facet(ju);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new Gn(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new Gn(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let i=e.state.facet(Gr);if(i!=this.input){let r=i.filter(h=>h),n=[],o=[],s=[],a=[];for(let h of r){let c=this.specs.indexOf(h),d;c<0?(d=h(e.view),a.push(d)):(d=this.panels[c],d.update&&d.update(e)),n.push(d),(d.top?o:s).push(d)}this.specs=r,this.panels=n,this.top.sync(o),this.bottom.sync(s);for(let h of a)h.dom.classList.add("cm-panel"),h.mount&&h.mount()}else for(let r of this.panels)r.update&&r.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>tt.scrollMargins.of(t=>{let i=t.plugin(e);return i&&{top:i.top.scrollMargin(),bottom:i.bottom.scrollMargin()}})});class Gn{constructor(t,i,r){this.view=t,this.top=i,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(t){for(let i of this.panels)i.destroy&&t.indexOf(i)<0&&i.destroy();this.panels=t,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let i=this.container||this.view.dom;i.insertBefore(this.dom,this.top?i.firstChild:null)}let t=this.dom.firstChild;for(let i of this.panels)if(i.dom.parentNode==this.dom){for(;t!=i.dom;)t=zu(t);t=t.nextSibling}else this.dom.insertBefore(i.dom,t);for(;t;)t=zu(t)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let t of this.classes.split(" "))t&&this.container.classList.remove(t);for(let t of(this.classes=this.view.themeClasses).split(" "))t&&this.container.classList.add(t)}}}function zu(e){let t=e.nextSibling;return e.remove(),t}const Gr=H.define({enables:Zu});class ai extends Xi{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}ai.prototype.elementClass="",ai.prototype.toDOM=void 0,ai.prototype.mapMode=Vt.TrackBefore,ai.prototype.startSide=ai.prototype.endSide=-1,ai.prototype.point=!0;const Vn=H.define(),Gm={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>xt.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Vr=H.define();function Vm(e){return[qu(),Vr.of(Object.assign(Object.assign({},Gm),e))]}const Go=H.define({combine:e=>e.some(t=>t)});function qu(e){let t=[Hm];return e&&e.fixed===!1&&t.push(Go.of(!0)),t}const Hm=Nt.fromClass(class{constructor(e){this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=e.state.facet(Vr).map(t=>new Vu(e,t));for(let t of this.gutters)this.dom.appendChild(t.dom);this.fixed=!e.state.facet(Go),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}update(e){if(this.updateGutters(e)){let t=this.prevViewport,i=e.view.viewport,r=Math.min(t.to,i.to)-Math.max(t.from,i.from);this.syncGutters(r<(i.to-i.from)*.8)}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Go)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&this.dom.remove();let i=xt.iter(this.view.state.facet(Vn),this.view.viewport.from),r=[],n=this.gutters.map(o=>new Jm(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks){let s;if(Array.isArray(o.type)){for(let a of o.type)if(a.type==Pt.Text){s=a;break}}else s=o.type==Pt.Text?o:void 0;if(s){r.length&&(r=[]),Gu(i,r,o.from);for(let a of n)a.line(this.view,s,r)}}for(let o of n)o.finish();e&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(e){let t=e.startState.facet(Vr),i=e.state.facet(Vr),r=e.docChanged||e.heightChanged||e.viewportChanged||!xt.eq(e.startState.facet(Vn),e.state.facet(Vn),e.view.viewport.from,e.view.viewport.to);if(t==i)for(let n of this.gutters)n.update(e)&&(r=!0);else{r=!0;let n=[];for(let o of i){let s=t.indexOf(o);s<0?n.push(new Vu(this.view,o)):(this.gutters[s].update(e),n.push(this.gutters[s]))}for(let o of this.gutters)o.dom.remove(),n.indexOf(o)<0&&o.destroy();for(let o of n)this.dom.appendChild(o.dom);this.gutters=n}return r}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove()}},{provide:e=>tt.scrollMargins.of(t=>{let i=t.plugin(e);return!i||i.gutters.length==0||!i.fixed?null:t.textDirection==At.LTR?{left:i.dom.offsetWidth}:{right:i.dom.offsetWidth}})});function Uu(e){return Array.isArray(e)?e:[e]}function Gu(e,t,i){for(;e.value&&e.from<=i;)e.from==i&&t.push(e.value),e.next()}class Jm{constructor(t,i,r){this.gutter=t,this.height=r,this.localMarkers=[],this.i=0,this.cursor=xt.iter(t.markers,i.from)}line(t,i,r){this.localMarkers.length&&(this.localMarkers=[]),Gu(this.cursor,this.localMarkers,i.from);let n=r.length?this.localMarkers.concat(r):this.localMarkers,o=this.gutter.config.lineMarker(t,i,n);o&&n.unshift(o);let s=this.gutter;if(n.length==0&&!s.config.renderEmptyElements)return;let a=i.top-this.height;if(this.i==s.elements.length){let h=new Hu(t,i.height,a,n);s.elements.push(h),s.dom.appendChild(h.dom)}else s.elements[this.i].update(t,i.height,a,n);this.height=i.bottom,this.i++}finish(){let t=this.gutter;for(;t.elements.length>this.i;){let i=t.elements.pop();t.dom.removeChild(i.dom),i.destroy()}}}class Vu{constructor(t,i){this.view=t,this.config=i,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in i.domEventHandlers)this.dom.addEventListener(r,n=>{let o=t.lineBlockAtHeight(n.clientY-t.documentTop);i.domEventHandlers[r](t,o,n)&&n.preventDefault()});this.markers=Uu(i.markers(t)),i.initialSpacer&&(this.spacer=new Hu(t,0,0,[i.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(t){let i=this.markers;if(this.markers=Uu(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){let n=this.config.updateSpacer(this.spacer.markers[0],t);n!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[n])}let r=t.view.viewport;return!xt.eq(this.markers,i,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(t):!1)}destroy(){for(let t of this.elements)t.destroy()}}class Hu{constructor(t,i,r,n){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,i,r,n)}update(t,i,r,n){this.height!=i&&(this.dom.style.height=(this.height=i)+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),Km(this.markers,n)||this.setMarkers(t,n)}setMarkers(t,i){let r="cm-gutterElement",n=this.dom.firstChild;for(let o=0,s=0;;){let a=s,h=o<i.length?i[o++]:null,c=!1;if(h){let d=h.elementClass;d&&(r+=" "+d);for(let f=s;f<this.markers.length;f++)if(this.markers[f].compare(h)){a=f,c=!0;break}}else a=this.markers.length;for(;s<a;){let d=this.markers[s++];if(d.toDOM){d.destroy(n);let f=n.nextSibling;n.remove(),n=f}}if(!h)break;h.toDOM&&(c?n=n.nextSibling:this.dom.insertBefore(h.toDOM(t),n)),c&&s++}this.dom.className=r,this.markers=i}destroy(){this.setMarkers(null,[])}}function Km(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(!e[i].compare(t[i]))return!1;return!0}const tO=H.define(),rr=H.define({combine(e){return ze(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(t,i){let r=Object.assign({},t);for(let n in i){let o=r[n],s=i[n];r[n]=o?(a,h,c)=>o(a,h,c)||s(a,h,c):s}return r}})}});class Vo extends ai{constructor(t){super(),this.number=t}eq(t){return this.number==t.number}toDOM(){return document.createTextNode(this.number)}}function Ho(e,t){return e.state.facet(rr).formatNumber(t,e.state)}const eO=Vr.compute([rr],e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(t){return t.state.facet(tO)},lineMarker(t,i,r){return r.some(n=>n.toDOM)?null:new Vo(Ho(t,t.state.doc.lineAt(i.from).number))},lineMarkerChange:t=>t.startState.facet(rr)!=t.state.facet(rr),initialSpacer(t){return new Vo(Ho(t,Ju(t.state.doc.lines)))},updateSpacer(t,i){let r=Ho(i.view,Ju(i.view.state.doc.lines));return r==t.number?t:new Vo(r)},domEventHandlers:e.facet(rr).domEventHandlers}));function iO(e={}){return[rr.of(e),qu(),eO]}function Ju(e){let t=9;for(;t<e;)t=t*10+9;return t}const rO=new class extends ai{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},nO=Vn.compute(["selection"],e=>{let t=[],i=-1;for(let r of e.selection.ranges){let n=e.doc.lineAt(r.head).from;n>i&&(i=n,t.push(rO.range(n)))}return xt.of(t)});function sO(){return nO}const Ku=1024;let oO=0;class Jo{constructor(t,i){this.from=t,this.to=i}}class ct{constructor(t={}){this.id=oO++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof t!="function"&&(t=me.match(t)),i=>{let r=t(i);return r===void 0?null:[this,r]}}}ct.closedBy=new ct({deserialize:e=>e.split(" ")}),ct.openedBy=new ct({deserialize:e=>e.split(" ")}),ct.group=new ct({deserialize:e=>e.split(" ")}),ct.contextHash=new ct({perNode:!0}),ct.lookAhead=new ct({perNode:!0}),ct.mounted=new ct({perNode:!0});const lO=Object.create(null);class me{constructor(t,i,r,n=0){this.name=t,this.props=i,this.id=r,this.flags=n}static define(t){let i=t.props&&t.props.length?Object.create(null):lO,r=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(t.name==null?8:0),n=new me(t.name||"",i,t.id,r);if(t.props){for(let o of t.props)if(Array.isArray(o)||(o=o(n)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");i[o[0].id]=o[1]}}return n}prop(t){return this.props[t.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(t){if(typeof t=="string"){if(this.name==t)return!0;let i=this.prop(ct.group);return i?i.indexOf(t)>-1:!1}return this.id==t}static match(t){let i=Object.create(null);for(let r in t)for(let n of r.split(" "))i[n]=t[r];return r=>{for(let n=r.prop(ct.group),o=-1;o<(n?n.length:0);o++){let s=i[o<0?r.name:n[o]];if(s)return s}}}}me.none=new me("",Object.create(null),0,8);class Ko{constructor(t){this.types=t;for(let i=0;i<t.length;i++)if(t[i].id!=i)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let i=[];for(let r of this.types){let n=null;for(let o of t){let s=o(r);s&&(n||(n=Object.assign({},r.props)),n[s[0].id]=s[1])}i.push(n?new me(r.name,n,r.id,r.flags):r)}return new Ko(i)}}const Hn=new WeakMap,tc=new WeakMap;var zt;(function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"})(zt||(zt={}));class Ft{constructor(t,i,r,n,o){if(this.type=t,this.children=i,this.positions=r,this.length=n,this.props=null,o&&o.length){this.props=Object.create(null);for(let[s,a]of o)this.props[typeof s=="number"?s:s.id]=a}}toString(){let t=this.prop(ct.mounted);if(t&&!t.overlay)return t.tree.toString();let i="";for(let r of this.children){let n=r.toString();n&&(i&&(i+=","),i+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(i.length?"("+i+")":""):i}cursor(t=0){return new ts(this.topNode,t)}cursorAt(t,i=0,r=0){let n=Hn.get(this)||this.topNode,o=new ts(n);return o.moveTo(t,i),Hn.set(this,o._tree),o}get topNode(){return new Me(this,0,0,null)}resolve(t,i=0){let r=nr(Hn.get(this)||this.topNode,t,i,!1);return Hn.set(this,r),r}resolveInner(t,i=0){let r=nr(tc.get(this)||this.topNode,t,i,!0);return tc.set(this,r),r}iterate(t){let{enter:i,leave:r,from:n=0,to:o=this.length}=t;for(let s=this.cursor((t.mode||0)|zt.IncludeAnonymous);;){let a=!1;if(s.from<=o&&s.to>=n&&(s.type.isAnonymous||i(s)!==!1)){if(s.firstChild())continue;a=!0}for(;a&&r&&!s.type.isAnonymous&&r(s),!s.nextSibling();){if(!s.parent())return;a=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let i in this.props)t.push([+i,this.props[i]]);return t}balance(t={}){return this.children.length<=8?this:il(me.none,this.children,this.positions,0,this.children.length,0,this.length,(i,r,n)=>new Ft(this.type,i,r,n,this.propValues),t.makeTree||((i,r,n)=>new Ft(me.none,i,r,n)))}static build(t){return hO(t)}}Ft.empty=new Ft(me.none,[],[],0);class tl{constructor(t,i){this.buffer=t,this.index=i}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new tl(this.buffer,this.index)}}class Fi{constructor(t,i,r){this.buffer=t,this.length=i,this.set=r}get type(){return me.none}toString(){let t=[];for(let i=0;i<this.buffer.length;)t.push(this.childString(i)),i=this.buffer[i+3];return t.join(",")}childString(t){let i=this.buffer[t],r=this.buffer[t+3],n=this.set.types[i],o=n.name;if(/\W/.test(o)&&!n.isError&&(o=JSON.stringify(o)),t+=4,r==t)return o;let s=[];for(;t<r;)s.push(this.childString(t)),t=this.buffer[t+3];return o+"("+s.join(",")+")"}findChild(t,i,r,n,o){let{buffer:s}=this,a=-1;for(let h=t;h!=i&&!(ec(o,n,s[h+1],s[h+2])&&(a=h,r>0));h=s[h+3]);return a}slice(t,i,r,n){let o=this.buffer,s=new Uint16Array(i-t);for(let a=t,h=0;a<i;)s[h++]=o[a++],s[h++]=o[a++]-r,s[h++]=o[a++]-r,s[h++]=o[a++]-t;return new Fi(s,n-r,this.set)}}function ec(e,t,i,r){switch(e){case-2:return i<t;case-1:return r>=t&&i<t;case 0:return i<t&&r>t;case 1:return i<=t&&r>t;case 2:return r>t;case 4:return!0}}function ic(e,t){let i=e.childBefore(t);for(;i;){let r=i.lastChild;if(!r||r.to!=i.to)break;r.type.isError&&r.from==r.to?(e=i,i=r.prevSibling):i=r}return e}function nr(e,t,i,r){for(var n;e.from==e.to||(i<1?e.from>=t:e.from>t)||(i>-1?e.to<=t:e.to<t);){let s=!r&&e instanceof Me&&e.index<0?null:e.parent;if(!s)return e;e=s}let o=r?0:zt.IgnoreOverlays;if(r)for(let s=e,a=s.parent;a;s=a,a=s.parent)s instanceof Me&&s.index<0&&((n=a.enter(t,i,o))===null||n===void 0?void 0:n.from)!=s.from&&(e=a);for(;;){let s=e.enter(t,i,o);if(!s)return e;e=s}}class Me{constructor(t,i,r,n){this._tree=t,this.from=i,this.index=r,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,i,r,n,o=0){for(let s=this;;){for(let{children:a,positions:h}=s._tree,c=i>0?a.length:-1;t!=c;t+=i){let d=a[t],f=h[t]+s.from;if(ec(n,r,f,f+d.length)){if(d instanceof Fi){if(o&zt.ExcludeBuffers)continue;let m=d.findChild(0,d.buffer.length,i,r-f,n);if(m>-1)return new Ge(new aO(s,d,t,f),null,m)}else if(o&zt.IncludeAnonymous||!d.type.isAnonymous||el(d)){let m;if(!(o&zt.IgnoreMounts)&&d.props&&(m=d.prop(ct.mounted))&&!m.overlay)return new Me(m.tree,f,t,s);let v=new Me(d,f,t,s);return o&zt.IncludeAnonymous||!v.type.isAnonymous?v:v.nextChild(i<0?d.children.length-1:0,i,r,n)}}}if(o&zt.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?t=s.index+i:t=i<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}enter(t,i,r=0){let n;if(!(r&zt.IgnoreOverlays)&&(n=this._tree.prop(ct.mounted))&&n.overlay){let o=t-this.from;for(let{from:s,to:a}of n.overlay)if((i>0?s<=o:s<o)&&(i<0?a>=o:a>o))return new Me(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,i,r)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(t=0){return new ts(this,t)}get tree(){return this._tree}toTree(){return this._tree}resolve(t,i=0){return nr(this,t,i,!1)}resolveInner(t,i=0){return nr(this,t,i,!0)}enterUnfinishedNodesBefore(t){return ic(this,t)}getChild(t,i=null,r=null){let n=Jn(this,t,i,r);return n.length?n[0]:null}getChildren(t,i=null,r=null){return Jn(this,t,i,r)}toString(){return this._tree.toString()}get node(){return this}matchContext(t){return Kn(this,t)}}function Jn(e,t,i,r){let n=e.cursor(),o=[];if(!n.firstChild())return o;if(i!=null){for(;!n.type.is(i);)if(!n.nextSibling())return o}for(;;){if(r!=null&&n.type.is(r))return o;if(n.type.is(t)&&o.push(n.node),!n.nextSibling())return r==null?o:[]}}function Kn(e,t,i=t.length-1){for(let r=e.parent;i>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(t[i]&&t[i]!=r.name)return!1;i--}}return!0}class aO{constructor(t,i,r,n){this.parent=t,this.buffer=i,this.index=r,this.start=n}}class Ge{constructor(t,i,r){this.context=t,this._parent=i,this.index=r,this.type=t.buffer.set.types[t.buffer.buffer[r]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(t,i,r){let{buffer:n}=this.context,o=n.findChild(this.index+4,n.buffer[this.index+3],t,i-this.context.start,r);return o<0?null:new Ge(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}enter(t,i,r=0){if(r&zt.ExcludeBuffers)return null;let{buffer:n}=this.context,o=n.findChild(this.index+4,n.buffer[this.index+3],i>0?1:-1,t-this.context.start,i);return o<0?null:new Ge(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,i=t.buffer[this.index+3];return i<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new Ge(this.context,this._parent,i):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,i=this._parent?this._parent.index+4:0;return this.index==i?this.externalSibling(-1):new Ge(this.context,this._parent,t.findChild(i,this.index,-1,0,4))}cursor(t=0){return new ts(this,t)}get tree(){return null}toTree(){let t=[],i=[],{buffer:r}=this.context,n=this.index+4,o=r.buffer[this.index+3];if(o>n){let s=r.buffer[this.index+1],a=r.buffer[this.index+2];t.push(r.slice(n,o,s,a)),i.push(0)}return new Ft(this.type,t,i,this.to-this.from)}resolve(t,i=0){return nr(this,t,i,!1)}resolveInner(t,i=0){return nr(this,t,i,!0)}enterUnfinishedNodesBefore(t){return ic(this,t)}toString(){return this.context.buffer.childString(this.index)}getChild(t,i=null,r=null){let n=Jn(this,t,i,r);return n.length?n[0]:null}getChildren(t,i=null,r=null){return Jn(this,t,i,r)}get node(){return this}matchContext(t){return Kn(this,t)}}class ts{constructor(t,i=0){if(this.mode=i,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof Me)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let r=t._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=t,this.yieldBuf(t.index)}}get name(){return this.type.name}yieldNode(t){return t?(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0):!1}yieldBuf(t,i){this.index=t;let{start:r,buffer:n}=this.buffer;return this.type=i||n.set.types[n.buffer[t]],this.from=r+n.buffer[t+1],this.to=r+n.buffer[t+2],!0}yield(t){return t?t instanceof Me?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,i,r){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,i,r,this.mode));let{buffer:n}=this.buffer,o=n.findChild(this.index+4,n.buffer[this.index+3],t,i-this.buffer.start,r);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,i,r=this.mode){return this.buffer?r&zt.ExcludeBuffers?!1:this.enterChild(1,t,i):this.yield(this._tree.enter(t,i,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&zt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&zt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode)):!1;let{buffer:i}=this.buffer,r=this.stack.length-1;if(t<0){let n=r<0?0:this.stack[r]+4;if(this.index!=n)return this.yieldBuf(i.findChild(n,this.index,-1,0,4))}else{let n=i.buffer[this.index+3];if(n<(r<0?i.buffer.length:i.buffer[this.stack[r]+3]))return this.yieldBuf(n)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let i,r,{buffer:n}=this;if(n){if(t>0){if(this.index<n.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(n.buffer.buffer[o+3]<this.index)return!1;({index:i,parent:r}=n)}else({index:i,_parent:r}=this._tree);for(;r;{index:i,_parent:r}=r)if(i>-1)for(let o=i+t,s=t<0?-1:r._tree.children.length;o!=s;o+=t){let a=r._tree.children[o];if(this.mode&zt.IncludeAnonymous||a instanceof Fi||!a.type.isAnonymous||el(a))return!1}return!0}move(t,i){if(i&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,i=0){for(;(this.from==this.to||(i<1?this.from>=t:this.from>t)||(i>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,i););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,i=null,r=0;if(t&&t.context==this.buffer){t:for(let n=this.index,o=this.stack.length;o>=0;){for(let s=t;s;s=s._parent)if(s.index==n){if(n==this.index)return s;i=s,r=o+1;break t}n=this.stack[--o]}}for(let n=r;n<this.stack.length;n++)i=new Ge(this.buffer,i,this.stack[n]);return this.bufferNode=new Ge(this.buffer,i,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,i){for(let r=0;;){let n=!1;if(this.type.isAnonymous||t(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(n=!0)}for(;n&&i&&i(this),n=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,n=!0}}}matchContext(t){if(!this.buffer)return Kn(this.node,t);let{buffer:i}=this.buffer,{types:r}=i.set;for(let n=t.length-1,o=this.stack.length-1;n>=0;o--){if(o<0)return Kn(this.node,t,n);let s=r[i.buffer[this.stack[o]]];if(!s.isAnonymous){if(t[n]&&t[n]!=s.name)return!1;n--}}return!0}}function el(e){return e.children.some(t=>t instanceof Fi||!t.type.isAnonymous||el(t))}function hO(e){var t;let{buffer:i,nodeSet:r,maxBufferLength:n=Ku,reused:o=[],minRepeatType:s=r.types.length}=e,a=Array.isArray(i)?new tl(i,i.length):i,h=r.types,c=0,d=0;function f(T,_,I,F,q){let{id:j,start:z,end:B,size:Q}=a,R=d;for(;Q<0;)if(a.next(),Q==-1){let dt=o[j];I.push(dt),F.push(z-T);return}else if(Q==-3){c=j;return}else if(Q==-4){d=j;return}else throw new RangeError(`Unrecognized record size: ${Q}`);let U=h[j],K,ot,ht=z-T;if(B-z<=n&&(ot=O(a.pos-_,q))){let dt=new Uint16Array(ot.size-ot.skip),gt=a.pos-ot.size,ft=dt.length;for(;a.pos>gt;)ft=y(ot.start,dt,ft);K=new Fi(dt,B-ot.start,r),ht=ot.start-T}else{let dt=a.pos-Q;a.next();let gt=[],ft=[],Et=j>=s?j:-1,Dt=0,_t=B;for(;a.pos>dt;)Et>=0&&a.id==Et&&a.size>=0?(a.end<=_t-n&&(v(gt,ft,z,Dt,a.end,_t,Et,R),Dt=gt.length,_t=a.end),a.next()):f(z,dt,gt,ft,Et);if(Et>=0&&Dt>0&&Dt<gt.length&&v(gt,ft,z,Dt,z,_t,Et,R),gt.reverse(),ft.reverse(),Et>-1&&Dt>0){let oe=m(U);K=il(U,gt,ft,0,gt.length,0,B-z,oe,oe)}else K=S(U,gt,ft,B-z,R-B)}I.push(K),F.push(ht)}function m(T){return(_,I,F)=>{let q=0,j=_.length-1,z,B;if(j>=0&&(z=_[j])instanceof Ft){if(!j&&z.type==T&&z.length==F)return z;(B=z.prop(ct.lookAhead))&&(q=I[j]+z.length+B)}return S(T,_,I,F,q)}}function v(T,_,I,F,q,j,z,B){let Q=[],R=[];for(;T.length>F;)Q.push(T.pop()),R.push(_.pop()+I-q);T.push(S(r.types[z],Q,R,j-q,B-j)),_.push(q-I)}function S(T,_,I,F,q=0,j){if(c){let z=[ct.contextHash,c];j=j?[z].concat(j):[z]}if(q>25){let z=[ct.lookAhead,q];j=j?[z].concat(j):[z]}return new Ft(T,_,I,F,j)}function O(T,_){let I=a.fork(),F=0,q=0,j=0,z=I.end-n,B={size:0,start:0,skip:0};t:for(let Q=I.pos-T;I.pos>Q;){let R=I.size;if(I.id==_&&R>=0){B.size=F,B.start=q,B.skip=j,j+=4,F+=4,I.next();continue}let U=I.pos-R;if(R<0||U<Q||I.start<z)break;let K=I.id>=s?4:0,ot=I.start;for(I.next();I.pos>U;){if(I.size<0)if(I.size==-3)K+=4;else break t;else I.id>=s&&(K+=4);I.next()}q=ot,F+=R,j+=K}return(_<0||F==T)&&(B.size=F,B.start=q,B.skip=j),B.size>4?B:void 0}function y(T,_,I){let{id:F,start:q,end:j,size:z}=a;if(a.next(),z>=0&&F<s){let B=I;if(z>4){let Q=a.pos-(z-4);for(;a.pos>Q;)I=y(T,_,I)}_[--I]=B,_[--I]=j-T,_[--I]=q-T,_[--I]=F}else z==-3?c=F:z==-4&&(d=F);return I}let P=[],w=[];for(;a.pos>0;)f(e.start||0,e.bufferStart||0,P,w,-1);let E=(t=e.length)!==null&&t!==void 0?t:P.length?w[0]+P[0].length:0;return new Ft(h[e.topID],P.reverse(),w.reverse(),E)}const rc=new WeakMap;function es(e,t){if(!e.isAnonymous||t instanceof Fi||t.type!=e)return 1;let i=rc.get(t);if(i==null){i=1;for(let r of t.children){if(r.type!=e||!(r instanceof Ft)){i=1;break}i+=es(e,r)}rc.set(t,i)}return i}function il(e,t,i,r,n,o,s,a,h){let c=0;for(let S=r;S<n;S++)c+=es(e,t[S]);let d=Math.ceil(c*1.5/8),f=[],m=[];function v(S,O,y,P,w){for(let E=y;E<P;){let T=E,_=O[E],I=es(e,S[E]);for(E++;E<P;E++){let F=es(e,S[E]);if(I+F>=d)break;I+=F}if(E==T+1){if(I>d){let F=S[T];v(F.children,F.positions,0,F.children.length,O[T]+w);continue}f.push(S[T])}else{let F=O[E-1]+S[E-1].length-_;f.push(il(e,S,O,T,E,_,F,null,h))}m.push(_+w-o)}}return v(t,i,r,n,0),(a||h)(f,m,s)}class uO{constructor(){this.map=new WeakMap}setBuffer(t,i,r){let n=this.map.get(t);n||this.map.set(t,n=new Map),n.set(i,r)}getBuffer(t,i){let r=this.map.get(t);return r&&r.get(i)}set(t,i){t instanceof Ge?this.setBuffer(t.context.buffer,t.index,i):t instanceof Me&&this.map.set(t.tree,i)}get(t){return t instanceof Ge?this.getBuffer(t.context.buffer,t.index):t instanceof Me?this.map.get(t.tree):void 0}cursorSet(t,i){t.buffer?this.setBuffer(t.buffer.buffer,t.index,i):this.map.set(t.tree,i)}cursorGet(t){return t.buffer?this.getBuffer(t.buffer.buffer,t.index):this.map.get(t.tree)}}class Mi{constructor(t,i,r,n,o=!1,s=!1){this.from=t,this.to=i,this.tree=r,this.offset=n,this.open=(o?1:0)|(s?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(t,i=[],r=!1){let n=[new Mi(0,t.length,t,0,!1,r)];for(let o of i)o.to>t.length&&n.push(o);return n}static applyChanges(t,i,r=128){if(!i.length)return t;let n=[],o=1,s=t.length?t[0]:null;for(let a=0,h=0,c=0;;a++){let d=a<i.length?i[a]:null,f=d?d.fromA:1e9;if(f-h>=r)for(;s&&s.from<f;){let m=s;if(h>=m.from||f<=m.to||c){let v=Math.max(m.from,h)-c,S=Math.min(m.to,f)-c;m=v>=S?null:new Mi(v,S,m.tree,m.offset+c,a>0,!!d)}if(m&&n.push(m),s.to>f)break;s=o<t.length?t[o++]:null}if(!d)break;h=d.toA,c=d.toA-d.toB}return n}}class nc{startParse(t,i,r){return typeof t=="string"&&(t=new cO(t)),r=r?r.length?r.map(n=>new Jo(n.from,n.to)):[new Jo(0,0)]:[new Jo(0,t.length)],this.createParse(t,i||[],r)}parse(t,i,r){let n=this.startParse(t,i,r);for(;;){let o=n.advance();if(o)return o}}}class cO{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,i){return this.string.slice(t,i)}}new ct({perNode:!0});let pO=0;class Ve{constructor(t,i,r){this.set=t,this.base=i,this.modified=r,this.id=pO++}static define(t){if(t!=null&&t.base)throw new Error("Can not derive from a modified tag");let i=new Ve([],null,[]);if(i.set.push(i),t)for(let r of t.set)i.set.push(r);return i}static defineModifier(){let t=new is;return i=>i.modified.indexOf(t)>-1?i:is.get(i.base||i,i.modified.concat(t).sort((r,n)=>r.id-n.id))}}let dO=0;class is{constructor(){this.instances=[],this.id=dO++}static get(t,i){if(!i.length)return t;let r=i[0].instances.find(a=>a.base==t&&fO(i,a.modified));if(r)return r;let n=[],o=new Ve(n,t,i);for(let a of i)a.instances.push(o);let s=sc(i);for(let a of t.set)for(let h of s)n.push(is.get(a,h));return o}}function fO(e,t){return e.length==t.length&&e.every((i,r)=>i==t[r])}function sc(e){let t=[e];for(let i=0;i<e.length;i++)for(let r of sc(e.slice(0,i).concat(e.slice(i+1))))t.push(r);return t}function oc(e){let t=Object.create(null);for(let i in e){let r=e[i];Array.isArray(r)||(r=[r]);for(let n of i.split(" "))if(n){let o=[],s=2,a=n;for(let f=0;;){if(a=="..."&&f>0&&f+3==n.length){s=1;break}let m=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!m)throw new RangeError("Invalid path: "+n);if(o.push(m[0]=="*"?"":m[0][0]=='"'?JSON.parse(m[0]):m[0]),f+=m[0].length,f==n.length)break;let v=n[f++];if(f==n.length&&v=="!"){s=0;break}if(v!="/")throw new RangeError("Invalid path: "+n);a=n.slice(f)}let h=o.length-1,c=o[h];if(!c)throw new RangeError("Invalid path: "+n);let d=new mO(r,s,h>0?o.slice(0,h):null);t[c]=d.sort(t[c])}}return lc.add(t)}const lc=new ct;class mO{constructor(t,i,r,n){this.tags=t,this.mode=i,this.context=r,this.next=n}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}function ac(e,t){let i=Object.create(null);for(let o of e)if(!Array.isArray(o.tag))i[o.tag.id]=o.class;else for(let s of o.tag)i[s.id]=o.class;let{scope:r,all:n=null}=t||{};return{style:o=>{let s=n;for(let a of o)for(let h of a.set){let c=i[h.id];if(c){s=s?s+" "+c:c;break}}return s},scope:r}}function OO(e,t){let i=null;for(let r of e){let n=r.style(t);n&&(i=i?i+" "+n:n)}return i}function gO(e,t,i,r=0,n=e.length){let o=new yO(r,Array.isArray(t)?t:[t],i);o.highlightRange(e.cursor(),r,n,"",o.highlighters),o.flush(n)}class yO{constructor(t,i,r){this.at=t,this.highlighters=i,this.span=r,this.class=""}startSpan(t,i){i!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=i)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(t,i,r,n,o){let{type:s,from:a,to:h}=t;if(a>=r||h<=i)return;s.isTop&&(o=this.highlighters.filter(v=>!v.scope||v.scope(s)));let c=n,d=s.prop(lc),f=!1;for(;d;){if(!d.context||t.matchContext(d.context)){let v=OO(o,d.tags);v&&(c&&(c+=" "),c+=v,d.mode==1?n+=(n?" ":"")+v:d.mode==0&&(f=!0));break}d=d.next}if(this.startSpan(t.from,c),f)return;let m=t.tree&&t.tree.prop(ct.mounted);if(m&&m.overlay){let v=t.node.enter(m.overlay[0].from+a,1),S=this.highlighters.filter(y=>!y.scope||y.scope(m.tree.type)),O=t.firstChild();for(let y=0,P=a;;y++){let w=y<m.overlay.length?m.overlay[y]:null,E=w?w.from+a:h,T=Math.max(i,P),_=Math.min(r,E);if(T<_&&O)for(;t.from<_&&(this.highlightRange(t,T,_,n,o),this.startSpan(Math.min(r,t.to),c),!(t.to>=E||!t.nextSibling())););if(!w||E>r)break;P=w.to+a,P>i&&(this.highlightRange(v.cursor(),Math.max(i,w.from+a),Math.min(r,P),n,S),this.startSpan(P,c))}O&&t.parent()}else if(t.firstChild()){do if(!(t.to<=i)){if(t.from>=r)break;this.highlightRange(t,i,r,n,o),this.startSpan(Math.min(r,t.to),c)}while(t.nextSibling());t.parent()}}}const G=Ve.define,rs=G(),Pi=G(),hc=G(Pi),uc=G(Pi),Ci=G(),ns=G(Ci),rl=G(Ci),He=G(),Bi=G(He),Je=G(),Ke=G(),nl=G(),Hr=G(nl),ss=G(),N={comment:rs,lineComment:G(rs),blockComment:G(rs),docComment:G(rs),name:Pi,variableName:G(Pi),typeName:hc,tagName:G(hc),propertyName:uc,attributeName:G(uc),className:G(Pi),labelName:G(Pi),namespace:G(Pi),macroName:G(Pi),literal:Ci,string:ns,docString:G(ns),character:G(ns),attributeValue:G(ns),number:rl,integer:G(rl),float:G(rl),bool:G(Ci),regexp:G(Ci),escape:G(Ci),color:G(Ci),url:G(Ci),keyword:Je,self:G(Je),null:G(Je),atom:G(Je),unit:G(Je),modifier:G(Je),operatorKeyword:G(Je),controlKeyword:G(Je),definitionKeyword:G(Je),moduleKeyword:G(Je),operator:Ke,derefOperator:G(Ke),arithmeticOperator:G(Ke),logicOperator:G(Ke),bitwiseOperator:G(Ke),compareOperator:G(Ke),updateOperator:G(Ke),definitionOperator:G(Ke),typeOperator:G(Ke),controlOperator:G(Ke),punctuation:nl,separator:G(nl),bracket:Hr,angleBracket:G(Hr),squareBracket:G(Hr),paren:G(Hr),brace:G(Hr),content:He,heading:Bi,heading1:G(Bi),heading2:G(Bi),heading3:G(Bi),heading4:G(Bi),heading5:G(Bi),heading6:G(Bi),contentSeparator:G(He),list:G(He),quote:G(He),emphasis:G(He),strong:G(He),link:G(He),monospace:G(He),strikethrough:G(He),inserted:G(),deleted:G(),changed:G(),invalid:G(),meta:ss,documentMeta:G(ss),annotation:G(ss),processingInstruction:G(ss),definition:Ve.defineModifier(),constant:Ve.defineModifier(),function:Ve.defineModifier(),standard:Ve.defineModifier(),local:Ve.defineModifier(),special:Ve.defineModifier()};ac([{tag:N.link,class:"tok-link"},{tag:N.heading,class:"tok-heading"},{tag:N.emphasis,class:"tok-emphasis"},{tag:N.strong,class:"tok-strong"},{tag:N.keyword,class:"tok-keyword"},{tag:N.atom,class:"tok-atom"},{tag:N.bool,class:"tok-bool"},{tag:N.url,class:"tok-url"},{tag:N.labelName,class:"tok-labelName"},{tag:N.inserted,class:"tok-inserted"},{tag:N.deleted,class:"tok-deleted"},{tag:N.literal,class:"tok-literal"},{tag:N.string,class:"tok-string"},{tag:N.number,class:"tok-number"},{tag:[N.regexp,N.escape,N.special(N.string)],class:"tok-string2"},{tag:N.variableName,class:"tok-variableName"},{tag:N.local(N.variableName),class:"tok-variableName tok-local"},{tag:N.definition(N.variableName),class:"tok-variableName tok-definition"},{tag:N.special(N.variableName),class:"tok-variableName2"},{tag:N.definition(N.propertyName),class:"tok-propertyName tok-definition"},{tag:N.typeName,class:"tok-typeName"},{tag:N.namespace,class:"tok-namespace"},{tag:N.className,class:"tok-className"},{tag:N.macroName,class:"tok-macroName"},{tag:N.propertyName,class:"tok-propertyName"},{tag:N.operator,class:"tok-operator"},{tag:N.comment,class:"tok-comment"},{tag:N.meta,class:"tok-meta"},{tag:N.invalid,class:"tok-invalid"},{tag:N.punctuation,class:"tok-punctuation"}]);var sl;const Jr=new ct;function xO(e){return H.define({combine:e?t=>t.concat(e):void 0})}class ke{constructor(t,i,r=[]){this.data=t,Ot.prototype.hasOwnProperty("tree")||Object.defineProperty(Ot.prototype,"tree",{get(){return Xt(this)}}),this.parser=i,this.extension=[Si.of(this),Ot.languageData.of((n,o,s)=>n.facet(cc(n,o,s)))].concat(r)}isActiveAt(t,i,r=-1){return cc(t,i,r)==this.data}findRegions(t){let i=t.facet(Si);if((i==null?void 0:i.data)==this.data)return[{from:0,to:t.doc.length}];if(!i||!i.allowsNesting)return[];let r=[],n=(o,s)=>{if(o.prop(Jr)==this.data){r.push({from:s,to:s+o.length});return}let a=o.prop(ct.mounted);if(a){if(a.tree.prop(Jr)==this.data){if(a.overlay)for(let h of a.overlay)r.push({from:h.from+s,to:h.to+s});else r.push({from:s,to:s+o.length});return}else if(a.overlay){let h=r.length;if(n(a.tree,a.overlay[0].from+s),r.length>h)return}}for(let h=0;h<o.children.length;h++){let c=o.children[h];c instanceof Ft&&n(c,o.positions[h]+s)}};return n(Xt(t),0),r}get allowsNesting(){return!0}}ke.setState=nt.define();function cc(e,t,i){let r=e.facet(Si);if(!r)return null;let n=r.data;if(r.allowsNesting)for(let o=Xt(e).topNode;o;o=o.enter(t,i,zt.ExcludeBuffers))n=o.type.prop(Jr)||n;return n}class os extends ke{constructor(t,i){super(t,i),this.parser=i}static define(t){let i=xO(t.languageData);return new os(i,t.parser.configure({props:[Jr.add(r=>r.isTop?i:void 0)]}))}configure(t){return new os(this.data,this.parser.configure(t))}get allowsNesting(){return this.parser.hasWrappers()}}function Xt(e){let t=e.field(ke.state,!1);return t?t.tree:Ft.empty}function pc(e,t,i=50){var r;let n=(r=e.field(ke.state,!1))===null||r===void 0?void 0:r.context;return n&&(n.isDone(t)||n.work(i,t))?n.tree:null}class vO{constructor(t,i=t.length){this.doc=t,this.length=i,this.cursorPos=0,this.string="",this.cursor=t.iter()}syncTo(t){return this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length}chunk(t){return this.syncTo(t),this.string}get lineChunks(){return!0}read(t,i){let r=this.cursorPos-this.string.length;return t<r||i>=this.cursorPos?this.doc.sliceString(t,i):this.string.slice(t-r,i-r)}}let Kr=null;class ls{constructor(t,i,r=[],n,o,s,a,h){this.parser=t,this.state=i,this.fragments=r,this.tree=n,this.treeLen=o,this.viewport=s,this.skipped=a,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(t,i,r){return new ls(t,i,[],Ft.empty,0,r,[],null)}startParse(){return this.parser.startParse(new vO(this.state.doc),this.fragments)}work(t,i){return i!=null&&i>=this.state.doc.length&&(i=void 0),this.tree!=Ft.empty&&this.isDone(i!=null?i:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof t=="number"){let n=Date.now()+t;t=()=>Date.now()>n}for(this.parse||(this.parse=this.startParse()),i!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>i)&&i<this.state.doc.length&&this.parse.stopAt(i);;){let n=this.parse.advance();if(n)if(this.fragments=this.withoutTempSkipped(Mi.addTree(n,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=n,this.parse=null,this.treeLen<(i!=null?i:this.state.doc.length))this.parse=this.startParse();else return!0;if(t())return!1}})}takeTree(){let t,i;this.parse&&(t=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext(()=>{for(;!(i=this.parse.advance()););}),this.treeLen=t,this.tree=i,this.fragments=this.withoutTempSkipped(Mi.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(t){let i=Kr;Kr=this;try{return t()}finally{Kr=i}}withoutTempSkipped(t){for(let i;i=this.tempSkipped.pop();)t=dc(t,i.from,i.to);return t}changes(t,i){let{fragments:r,tree:n,treeLen:o,viewport:s,skipped:a}=this;if(this.takeTree(),!t.empty){let h=[];if(t.iterChangedRanges((c,d,f,m)=>h.push({fromA:c,toA:d,fromB:f,toB:m})),r=Mi.applyChanges(r,h),n=Ft.empty,o=0,s={from:t.mapPos(s.from,-1),to:t.mapPos(s.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let d=t.mapPos(c.from,1),f=t.mapPos(c.to,-1);d<f&&a.push({from:d,to:f})}}}return new ls(this.parser,i,r,n,o,s,a,this.scheduleOn)}updateViewport(t){if(this.viewport.from==t.from&&this.viewport.to==t.to)return!1;this.viewport=t;let i=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:n,to:o}=this.skipped[r];n<t.to&&o>t.from&&(this.fragments=dc(this.fragments,n,o),this.skipped.splice(r--,1))}return this.skipped.length>=i?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(t,i){this.skipped.push({from:t,to:i})}static getSkippingParser(t){return new class extends nc{createParse(i,r,n){let o=n[0].from,s=n[n.length-1].to;return{parsedPos:o,advance(){let a=Kr;if(a){for(let h of n)a.tempSkipped.push(h);t&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,t]):t)}return this.parsedPos=s,new Ft(me.none,[],[],s-o)},stoppedAt:null,stopAt(){}}}}}isDone(t){t=Math.min(t,this.state.doc.length);let i=this.fragments;return this.treeLen>=t&&i.length&&i[0].from==0&&i[0].to>=t}static get(){return Kr}}function dc(e,t,i){return Mi.applyChanges(e,[{fromA:t,toA:i,fromB:t,toB:i}])}class sr{constructor(t){this.context=t,this.tree=t.tree}apply(t){if(!t.docChanged&&this.tree==this.context.tree)return this;let i=this.context.changes(t.changes,t.state),r=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),i.viewport.to);return i.work(20,r)||i.takeTree(),new sr(i)}static init(t){let i=Math.min(3e3,t.doc.length),r=ls.create(t.facet(Si).parser,t,{from:0,to:i});return r.work(20,i)||r.takeTree(),new sr(r)}}ke.state=Rt.define({create:sr.init,update(e,t){for(let i of t.effects)if(i.is(ke.setState))return i.value;return t.startState.facet(Si)!=t.state.facet(Si)?sr.init(t.state):e.apply(t)}});let fc=e=>{let t=setTimeout(()=>e(),500);return()=>clearTimeout(t)};typeof requestIdleCallback<"u"&&(fc=e=>{let t=-1,i=setTimeout(()=>{t=requestIdleCallback(e,{timeout:500-100})},100);return()=>t<0?clearTimeout(i):cancelIdleCallback(t)});const ol=typeof navigator<"u"&&((sl=navigator.scheduling)===null||sl===void 0?void 0:sl.isInputPending)?()=>navigator.scheduling.isInputPending():null,PO=Nt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(ke.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(ke.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=fc(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,n=i.field(ke.state);if(n.tree==n.context.tree&&n.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!ol?Math.max(25,e.timeRemaining()-5):1e9),s=n.context.treeLen<r&&i.doc.length>r+1e3,a=n.context.work(()=>ol&&ol()||Date.now()>o,r+(s?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(n.context.takeTree(),this.view.dispatch({effects:ke.setState.of(new sr(n.context))})),this.chunkBudget>0&&!(a&&!s)&&this.scheduleWork(),this.checkAsyncSchedule(n.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Se(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Si=H.define({combine(e){return e.length?e[0]:null},enables:[ke.state,PO]});class CO{constructor(t,i=[]){this.language=t,this.support=i,this.extension=[t,i]}}const SO=H.define(),tn=H.define({combine:e=>{if(!e.length)return"  ";if(!/^(?: +|\t+)$/.test(e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return e[0]}});function as(e){let t=e.facet(tn);return t.charCodeAt(0)==9?e.tabSize*t.length:t.length}function en(e,t){let i="",r=e.tabSize;if(e.facet(tn).charCodeAt(0)==9)for(;t>=r;)i+="	",t-=r;for(let n=0;n<t;n++)i+=" ";return i}function ll(e,t){e instanceof Ot&&(e=new hs(e));for(let r of e.state.facet(SO)){let n=r(e,t);if(n!=null)return n}let i=Xt(e.state);return i?wO(e,i,t):null}class hs{constructor(t,i={}){this.state=t,this.options=i,this.unit=as(t)}lineAt(t,i=1){let r=this.state.doc.lineAt(t),{simulateBreak:n,simulateDoubleBreak:o}=this.options;return n!=null&&n>=r.from&&n<=r.to?o&&n==t?{text:"",from:t}:(i<0?n<t:n<=t)?{text:r.text.slice(n-r.from),from:n}:{text:r.text.slice(0,n-r.from),from:r.from}:r}textAfterPos(t,i=1){if(this.options.simulateDoubleBreak&&t==this.options.simulateBreak)return"";let{text:r,from:n}=this.lineAt(t,i);return r.slice(t-n,Math.min(r.length,t+100-n))}column(t,i=1){let{text:r,from:n}=this.lineAt(t,i),o=this.countColumn(r,t-n),s=this.options.overrideIndentation?this.options.overrideIndentation(n):-1;return s>-1&&(o+=s-this.countColumn(r,r.search(/\S|$/))),o}countColumn(t,i=t.length){return Xr(t,this.state.tabSize,i)}lineIndent(t,i=1){let{text:r,from:n}=this.lineAt(t,i),o=this.options.overrideIndentation;if(o){let s=o(n);if(s>-1)return s}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const mc=new ct;function wO(e,t,i){return Oc(t.resolveInner(i).enterUnfinishedNodesBefore(i),i,e)}function bO(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}function DO(e){let t=e.type.prop(mc);if(t)return t;let i=e.firstChild,r;if(i&&(r=i.type.prop(ct.closedBy))){let n=e.lastChild,o=n&&r.indexOf(n.name)>-1;return s=>gc(s,!0,1,void 0,o&&!bO(s)?n.from:void 0)}return e.parent==null?EO:null}function Oc(e,t,i){for(;e;e=e.parent){let r=DO(e);if(r)return r(al.create(i,t,e))}return null}function EO(){return 0}class al extends hs{constructor(t,i,r){super(t.state,t.options),this.base=t,this.pos=i,this.node=r}static create(t,i,r){return new al(t,i,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let t=this.state.doc.lineAt(this.node.from);for(;;){let i=this.node.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(TO(i,this.node))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){let t=this.node.parent;return t?Oc(t,this.pos,this.base):0}}function TO(e,t){for(let i=t;i;i=i.parent)if(e==i)return!0;return!1}function AO(e){let t=e.node,i=t.childAfter(t.from),r=t.lastChild;if(!i)return null;let n=e.options.simulateBreak,o=e.state.doc.lineAt(i.from),s=n==null||n<=o.from?o.to:Math.min(o.to,n);for(let a=i.to;;){let h=t.childAfter(a);if(!h||h==r)return null;if(!h.type.isSkipped)return h.from<s?i:null;a=h.to}}function kO({closing:e,align:t=!0,units:i=1}){return r=>gc(r,t,i,e)}function gc(e,t,i,r,n){let o=e.textAfter,s=o.match(/^\s*/)[0].length,a=r&&o.slice(s,s+r.length)==r||n==e.pos+s,h=t?AO(e):null;return h?a?e.column(h.from):e.column(h.to):e.baseIndent+(a?0:e.unit*i)}const _O=e=>e.baseIndent;function hl({except:e,units:t=1}={}){return i=>{let r=e&&e.test(i.textAfter);return i.baseIndent+(r?0:t*i.unit)}}const IO=200;function LO(){return Ot.transactionFilter.of(e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;let i=e.newDoc,{head:r}=e.newSelection.main,n=i.lineAt(r);if(r>n.from+IO)return e;let o=i.sliceString(n.from,r);if(!t.some(c=>c.test(o)))return e;let{state:s}=e,a=-1,h=[];for(let{head:c}of s.selection.ranges){let d=s.doc.lineAt(c);if(d.from==a)continue;a=d.from;let f=ll(s,d.from);if(f==null)continue;let m=/^\s*/.exec(d.text)[0],v=en(s,f);m!=v&&h.push({from:d.from,to:d.from+m.length,insert:v})}return h.length?[e,{changes:h,sequential:!0}]:e})}const QO=H.define(),yc=new ct;function XO(e){let t=e.firstChild,i=e.lastChild;return t&&t.to<i.from?{from:t.to,to:i.type.isError?e.to:i.from}:null}function $O(e,t,i){let r=Xt(e);if(r.length<i)return null;let n=r.resolveInner(i),o=null;for(let s=n;s;s=s.parent){if(s.to<=i||s.from>i)continue;if(o&&s.from<t)break;let a=s.type.prop(yc);if(a&&(s.to<r.length-50||r.length==e.doc.length||!NO(s))){let h=a(s,e);h&&h.from<=i&&h.from>=t&&h.to>i&&(o=h)}}return o}function NO(e){let t=e.lastChild;return t&&t.to==e.to&&t.type.isError}function us(e,t,i){for(let r of e.facet(QO)){let n=r(e,t,i);if(n)return n}return $O(e,t,i)}function xc(e,t){let i=t.mapPos(e.from,1),r=t.mapPos(e.to,-1);return i>=r?void 0:{from:i,to:r}}const cs=nt.define({map:xc}),rn=nt.define({map:xc});function vc(e){let t=[];for(let{head:i}of e.state.selection.ranges)t.some(r=>r.from<=i&&r.to>=i)||t.push(e.lineBlockAt(i));return t}const Ri=Rt.define({create(){return et.none},update(e,t){e=e.map(t.changes);for(let i of t.effects)i.is(cs)&&!FO(e,i.value.from,i.value.to)?e=e.update({add:[bc.range(i.value.from,i.value.to)]}):i.is(rn)&&(e=e.update({filter:(r,n)=>i.value.from!=r||i.value.to!=n,filterFrom:i.value.from,filterTo:i.value.to}));if(t.selection){let i=!1,{head:r}=t.selection.main;e.between(r,r,(n,o)=>{n<r&&o>r&&(i=!0)}),i&&(e=e.update({filterFrom:r,filterTo:r,filter:(n,o)=>o<=r||n>=r}))}return e},provide:e=>tt.decorations.from(e),toJSON(e,t){let i=[];return e.between(0,t.doc.length,(r,n)=>{i.push(r,n)}),i},fromJSON(e){if(!Array.isArray(e)||e.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let i=0;i<e.length;){let r=e[i++],n=e[i++];if(typeof r!="number"||typeof n!="number")throw new RangeError("Invalid JSON for fold state");t.push(bc.range(r,n))}return et.set(t,!0)}});function ps(e,t,i){var r;let n=null;return(r=e.field(Ri,!1))===null||r===void 0||r.between(t,i,(o,s)=>{(!n||n.from>o)&&(n={from:o,to:s})}),n}function FO(e,t,i){let r=!1;return e.between(t,t,(n,o)=>{n==t&&o==i&&(r=!0)}),r}function Pc(e,t){return e.field(Ri,!1)?t:t.concat(nt.appendConfig.of(wc()))}const MO=e=>{for(let t of vc(e)){let i=us(e.state,t.from,t.to);if(i)return e.dispatch({effects:Pc(e.state,[cs.of(i),Cc(e,i)])}),!0}return!1},BO=e=>{if(!e.state.field(Ri,!1))return!1;let t=[];for(let i of vc(e)){let r=ps(e.state,i.from,i.to);r&&t.push(rn.of(r),Cc(e,r,!1))}return t.length&&e.dispatch({effects:t}),t.length>0};function Cc(e,t,i=!0){let r=e.state.doc.lineAt(t.from).number,n=e.state.doc.lineAt(t.to).number;return tt.announce.of(`${e.state.phrase(i?"Folded lines":"Unfolded lines")} ${r} ${e.state.phrase("to")} ${n}.`)}const RO=e=>{let{state:t}=e,i=[];for(let r=0;r<t.doc.length;){let n=e.lineBlockAt(r),o=us(t,n.from,n.to);o&&i.push(cs.of(o)),r=(o?e.lineBlockAt(o.to):n).to+1}return i.length&&e.dispatch({effects:Pc(e.state,i)}),!!i.length},YO=e=>{let t=e.state.field(Ri,!1);if(!t||!t.size)return!1;let i=[];return t.between(0,e.state.doc.length,(r,n)=>{i.push(rn.of({from:r,to:n}))}),e.dispatch({effects:i}),!0},WO=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:MO},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:BO},{key:"Ctrl-Alt-[",run:RO},{key:"Ctrl-Alt-]",run:YO}],jO={placeholderDOM:null,placeholderText:"\u2026"},Sc=H.define({combine(e){return ze(e,jO)}});function wc(e){let t=[Ri,qO];return e&&t.push(Sc.of(e)),t}const bc=et.replace({widget:new class extends oi{toDOM(e){let{state:t}=e,i=t.facet(Sc),r=o=>{let s=e.lineBlockAt(e.posAtDOM(o.target)),a=ps(e.state,s.from,s.to);a&&e.dispatch({effects:rn.of(a)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(e,r);let n=document.createElement("span");return n.textContent=i.placeholderText,n.setAttribute("aria-label",t.phrase("folded code")),n.title=t.phrase("unfold"),n.className="cm-foldPlaceholder",n.onclick=r,n}}}),ZO={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class ul extends ai{constructor(t,i){super(),this.config=t,this.open=i}eq(t){return this.config==t.config&&this.open==t.open}toDOM(t){if(this.config.markerDOM)return this.config.markerDOM(this.open);let i=document.createElement("span");return i.textContent=this.open?this.config.openText:this.config.closedText,i.title=t.state.phrase(this.open?"Fold line":"Unfold line"),i}}function zO(e={}){let t=Object.assign(Object.assign({},ZO),e),i=new ul(t,!0),r=new ul(t,!1),n=Nt.fromClass(class{constructor(s){this.from=s.viewport.from,this.markers=this.buildMarkers(s)}update(s){(s.docChanged||s.viewportChanged||s.startState.facet(Si)!=s.state.facet(Si)||s.startState.field(Ri,!1)!=s.state.field(Ri,!1)||Xt(s.startState)!=Xt(s.state)||t.foldingChanged(s))&&(this.markers=this.buildMarkers(s.view))}buildMarkers(s){let a=new di;for(let h of s.viewportLineBlocks){let c=ps(s.state,h.from,h.to)?r:us(s.state,h.from,h.to)?i:null;c&&a.add(h.from,h.from,c)}return a.finish()}}),{domEventHandlers:o}=t;return[n,Vm({class:"cm-foldGutter",markers(s){var a;return((a=s.plugin(n))===null||a===void 0?void 0:a.markers)||xt.empty},initialSpacer(){return new ul(t,!1)},domEventHandlers:Object.assign(Object.assign({},o),{click:(s,a,h)=>{if(o.click&&o.click(s,a,h))return!0;let c=ps(s.state,a.from,a.to);if(c)return s.dispatch({effects:rn.of(c)}),!0;let d=us(s.state,a.from,a.to);return d?(s.dispatch({effects:cs.of(d)}),!0):!1}})}),wc()]}const qO=tt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class ds{constructor(t,i){let r;function n(a){let h=fi.newName();return(r||(r=Object.create(null)))["."+h]=a,h}const o=typeof i.all=="string"?i.all:i.all?n(i.all):void 0,s=i.scope;this.scope=s instanceof ke?a=>a.prop(Jr)==s.data:s?a=>a==s:void 0,this.style=ac(t.map(a=>({tag:a.tag,class:a.class||n(Object.assign({},a,{tag:null}))})),{all:o}).style,this.module=r?new fi(r):null,this.themeType=i.themeType}static define(t,i){return new ds(t,i||{})}}const cl=H.define(),Dc=H.define({combine(e){return e.length?[e[0]]:null}});function pl(e){let t=e.facet(cl);return t.length?t:e.facet(Dc)}function UO(e,t){let i=[VO],r;return e instanceof ds&&(e.module&&i.push(tt.styleModule.of(e.module)),r=e.themeType),t!=null&&t.fallback?i.push(Dc.of(e)):r?i.push(cl.computeN([tt.darkTheme],n=>n.facet(tt.darkTheme)==(r=="dark")?[e]:[])):i.push(cl.of(e)),i}class GO{constructor(t){this.markCache=Object.create(null),this.tree=Xt(t.state),this.decorations=this.buildDeco(t,pl(t.state))}update(t){let i=Xt(t.state),r=pl(t.state),n=r!=pl(t.startState);i.length<t.view.viewport.to&&!n&&i.type==this.tree.type?this.decorations=this.decorations.map(t.changes):(i!=this.tree||t.viewportChanged||n)&&(this.tree=i,this.decorations=this.buildDeco(t.view,r))}buildDeco(t,i){if(!i||!this.tree.length)return et.none;let r=new di;for(let{from:n,to:o}of t.visibleRanges)gO(this.tree,i,(s,a,h)=>{r.add(s,a,this.markCache[h]||(this.markCache[h]=et.mark({class:h})))},n,o);return r.finish()}}const VO=Li.high(Nt.fromClass(GO,{decorations:e=>e.decorations})),HO=ds.define([{tag:N.meta,color:"#7a757a"},{tag:N.link,textDecoration:"underline"},{tag:N.heading,textDecoration:"underline",fontWeight:"bold"},{tag:N.emphasis,fontStyle:"italic"},{tag:N.strong,fontWeight:"bold"},{tag:N.strikethrough,textDecoration:"line-through"},{tag:N.keyword,color:"#708"},{tag:[N.atom,N.bool,N.url,N.contentSeparator,N.labelName],color:"#219"},{tag:[N.literal,N.inserted],color:"#164"},{tag:[N.string,N.deleted],color:"#a11"},{tag:[N.regexp,N.escape,N.special(N.string)],color:"#e40"},{tag:N.definition(N.variableName),color:"#00f"},{tag:N.local(N.variableName),color:"#30a"},{tag:[N.typeName,N.namespace],color:"#085"},{tag:N.className,color:"#167"},{tag:[N.special(N.variableName),N.macroName],color:"#256"},{tag:N.definition(N.propertyName),color:"#00c"},{tag:N.comment,color:"#940"},{tag:N.invalid,color:"#f00"}]),JO=tt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Ec=1e4,Tc="()[]{}",Ac=H.define({combine(e){return ze(e,{afterCursor:!0,brackets:Tc,maxScanDistance:Ec,renderMatch:eg})}}),KO=et.mark({class:"cm-matchingBracket"}),tg=et.mark({class:"cm-nonmatchingBracket"});function eg(e){let t=[],i=e.matched?KO:tg;return t.push(i.range(e.start.from,e.start.to)),e.end&&t.push(i.range(e.end.from,e.end.to)),t}const ig=Rt.define({create(){return et.none},update(e,t){if(!t.docChanged&&!t.selection)return e;let i=[],r=t.state.facet(Ac);for(let n of t.state.selection.ranges){if(!n.empty)continue;let o=ti(t.state,n.head,-1,r)||n.head>0&&ti(t.state,n.head-1,1,r)||r.afterCursor&&(ti(t.state,n.head,1,r)||n.head<t.state.doc.length&&ti(t.state,n.head+1,-1,r));o&&(i=i.concat(r.renderMatch(o,t.state)))}return et.set(i,!0)},provide:e=>tt.decorations.from(e)}),rg=[ig,JO];function ng(e={}){return[Ac.of(e),rg]}function dl(e,t,i){let r=e.prop(t<0?ct.openedBy:ct.closedBy);if(r)return r;if(e.name.length==1){let n=i.indexOf(e.name);if(n>-1&&n%2==(t<0?1:0))return[i[n+t]]}return null}function ti(e,t,i,r={}){let n=r.maxScanDistance||Ec,o=r.brackets||Tc,s=Xt(e),a=s.resolveInner(t,i);for(let h=a;h;h=h.parent){let c=dl(h.type,i,o);if(c&&h.from<h.to)return sg(e,t,i,h,c,o)}return og(e,t,i,s,a.type,n,o)}function sg(e,t,i,r,n,o){let s=r.parent,a={from:r.from,to:r.to},h=0,c=s==null?void 0:s.cursor();if(c&&(i<0?c.childBefore(r.from):c.childAfter(r.to)))do if(i<0?c.to<=r.from:c.from>=r.to){if(h==0&&n.indexOf(c.type.name)>-1&&c.from<c.to)return{start:a,end:{from:c.from,to:c.to},matched:!0};if(dl(c.type,i,o))h++;else if(dl(c.type,-i,o)){if(h==0)return{start:a,end:c.from==c.to?void 0:{from:c.from,to:c.to},matched:!1};h--}}while(i<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function og(e,t,i,r,n,o,s){let a=i<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),h=s.indexOf(a);if(h<0||h%2==0!=i>0)return null;let c={from:i<0?t-1:t,to:i>0?t+1:t},d=e.doc.iterRange(t,i>0?e.doc.length:0),f=0;for(let m=0;!d.next().done&&m<=o;){let v=d.value;i<0&&(m+=v.length);let S=t+m*i;for(let O=i>0?0:v.length-1,y=i>0?v.length:-1;O!=y;O+=i){let P=s.indexOf(v[O]);if(!(P<0||r.resolveInner(S+O,1).type!=n))if(P%2==0==i>0)f++;else{if(f==1)return{start:c,end:{from:S+O,to:S+O+1},matched:P>>1==h>>1};f--}}i>0&&(m+=v.length)}return d.done?{start:c,matched:!1}:null}const lg=Object.create(null),kc=[me.none],_c=[],ag=Object.create(null);for(let[e,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])ag[e]=hg(lg,t);function fl(e,t){_c.indexOf(e)>-1||(_c.push(e),console.warn(t))}function hg(e,t){let i=null;for(let o of t.split(".")){let s=e[o]||N[o];s?typeof s=="function"?i?i=s(i):fl(o,`Modifier ${o} used at start of tag`):i?fl(o,`Tag ${o} used as modifier`):i=s:fl(o,`Unknown highlighting tag ${o}`)}if(!i)return 0;let r=t.replace(/ /g,"_"),n=me.define({id:kc.length,name:r,props:[oc({[r]:i})]});return kc.push(n),n.id}const ug=e=>{let t=Ol(e.state);return t.line?cg(e):t.block?dg(e):!1};function ml(e,t){return({state:i,dispatch:r})=>{if(i.readOnly)return!1;let n=e(t,i);return n?(r(i.update(n)),!0):!1}}const cg=ml(Og,0),pg=ml(Ic,0),dg=ml((e,t)=>Ic(e,t,mg(t)),0);function Ol(e,t=e.selection.main.head){let i=e.languageDataAt("commentTokens",t);return i.length?i[0]:{}}const nn=50;function fg(e,{open:t,close:i},r,n){let o=e.sliceDoc(r-nn,r),s=e.sliceDoc(n,n+nn),a=/\s*$/.exec(o)[0].length,h=/^\s*/.exec(s)[0].length,c=o.length-a;if(o.slice(c-t.length,c)==t&&s.slice(h,h+i.length)==i)return{open:{pos:r-a,margin:a&&1},close:{pos:n+h,margin:h&&1}};let d,f;n-r<=2*nn?d=f=e.sliceDoc(r,n):(d=e.sliceDoc(r,r+nn),f=e.sliceDoc(n-nn,n));let m=/^\s*/.exec(d)[0].length,v=/\s*$/.exec(f)[0].length,S=f.length-v-i.length;return d.slice(m,m+t.length)==t&&f.slice(S,S+i.length)==i?{open:{pos:r+m+t.length,margin:/\s/.test(d.charAt(m+t.length))?1:0},close:{pos:n-v-i.length,margin:/\s/.test(f.charAt(S-1))?1:0}}:null}function mg(e){let t=[];for(let i of e.selection.ranges){let r=e.doc.lineAt(i.from),n=i.to<=r.to?r:e.doc.lineAt(i.to),o=t.length-1;o>=0&&t[o].to>r.from?t[o].to=n.to:t.push({from:r.from,to:n.to})}return t}function Ic(e,t,i=t.selection.ranges){let r=i.map(o=>Ol(t,o.from).block);if(!r.every(o=>o))return null;let n=i.map((o,s)=>fg(t,r[s],o.from,o.to));if(e!=2&&!n.every(o=>o))return{changes:t.changes(i.map((o,s)=>n[s]?[]:[{from:o.from,insert:r[s].open+" "},{from:o.to,insert:" "+r[s].close}]))};if(e!=1&&n.some(o=>o)){let o=[];for(let s=0,a;s<n.length;s++)if(a=n[s]){let h=r[s],{open:c,close:d}=a;o.push({from:c.pos-h.open.length,to:c.pos+c.margin},{from:d.pos-d.margin,to:d.pos+h.close.length})}return{changes:o}}return null}function Og(e,t,i=t.selection.ranges){let r=[],n=-1;for(let{from:o,to:s}of i){let a=r.length,h=1e9;for(let c=o;c<=s;){let d=t.doc.lineAt(c);if(d.from>n&&(o==s||s>d.from)){n=d.from;let f=Ol(t,c).line;if(!f)continue;let m=/^\s*/.exec(d.text)[0].length,v=m==d.length,S=d.text.slice(m,m+f.length)==f?m:-1;m<d.text.length&&m<h&&(h=m),r.push({line:d,comment:S,token:f,indent:m,empty:v,single:!1})}c=d.to+1}if(h<1e9)for(let c=a;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=h);r.length==a+1&&(r[a].single=!0)}if(e!=2&&r.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:a,token:h,indent:c,empty:d,single:f}of r)(f||!d)&&o.push({from:a.from+c,insert:h+" "});let s=t.changes(o);return{changes:s,selection:t.selection.map(s,1)}}else if(e!=1&&r.some(o=>o.comment>=0)){let o=[];for(let{line:s,comment:a,token:h}of r)if(a>=0){let c=s.from+a,d=c+h.length;s.text[d-s.from]==" "&&d++,o.push({from:c,to:d})}return{changes:o}}return null}const gl=Qi.define(),gg=Qi.define(),yg=H.define(),Lc=H.define({combine(e){return ze(e,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}});function xg(e){let t=0;return e.iterChangedRanges((i,r)=>t=r),t}const Qc=Rt.define({create(){return ei.empty},update(e,t){let i=t.state.facet(Lc),r=t.annotation(gl);if(r){let h=t.docChanged?Y.single(xg(t.changes)):void 0,c=Oe.fromTransaction(t,h),d=r.side,f=d==0?e.undone:e.done;return c?f=ms(f,f.length,i.minDepth,c):f=Nc(f,t.startState.selection),new ei(d==0?r.rest:f,d==0?f:r.rest)}let n=t.annotation(gg);if((n=="full"||n=="before")&&(e=e.isolate()),t.annotation(Yt.addToHistory)===!1)return t.changes.empty?e:e.addMapping(t.changes.desc);let o=Oe.fromTransaction(t),s=t.annotation(Yt.time),a=t.annotation(Yt.userEvent);return o?e=e.addChanges(o,s,a,i.newGroupDelay,i.minDepth):t.selection&&(e=e.addSelection(t.startState.selection,s,a,i.newGroupDelay)),(n=="full"||n=="after")&&(e=e.isolate()),e},toJSON(e){return{done:e.done.map(t=>t.toJSON()),undone:e.undone.map(t=>t.toJSON())}},fromJSON(e){return new ei(e.done.map(Oe.fromJSON),e.undone.map(Oe.fromJSON))}});function vg(e={}){return[Qc,Lc.of(e),tt.domEventHandlers({beforeinput(t,i){let r=t.inputType=="historyUndo"?Xc:t.inputType=="historyRedo"?yl:null;return r?(t.preventDefault(),r(i)):!1}})]}function fs(e,t){return function({state:i,dispatch:r}){if(!t&&i.readOnly)return!1;let n=i.field(Qc,!1);if(!n)return!1;let o=n.pop(e,i,t);return o?(r(o),!0):!1}}const Xc=fs(0,!1),yl=fs(1,!1),Pg=fs(0,!0),Cg=fs(1,!0);class Oe{constructor(t,i,r,n,o){this.changes=t,this.effects=i,this.mapped=r,this.startSelection=n,this.selectionsAfter=o}setSelAfter(t){return new Oe(this.changes,this.effects,this.mapped,this.startSelection,t)}toJSON(){var t,i,r;return{changes:(t=this.changes)===null||t===void 0?void 0:t.toJSON(),mapped:(i=this.mapped)===null||i===void 0?void 0:i.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(n=>n.toJSON())}}static fromJSON(t){return new Oe(t.changes&&Bt.fromJSON(t.changes),[],t.mapped&&Ze.fromJSON(t.mapped),t.startSelection&&Y.fromJSON(t.startSelection),t.selectionsAfter.map(Y.fromJSON))}static fromTransaction(t,i){let r=_e;for(let n of t.startState.facet(yg)){let o=n(t);o.length&&(r=r.concat(o))}return!r.length&&t.changes.empty?null:new Oe(t.changes.invert(t.startState.doc),r,void 0,i||t.startState.selection,_e)}static selection(t){return new Oe(void 0,_e,void 0,void 0,t)}}function ms(e,t,i,r){let n=t+1>i+20?t-i-1:0,o=e.slice(n,t);return o.push(r),o}function Sg(e,t){let i=[],r=!1;return e.iterChangedRanges((n,o)=>i.push(n,o)),t.iterChangedRanges((n,o,s,a)=>{for(let h=0;h<i.length;){let c=i[h++],d=i[h++];a>=c&&s<=d&&(r=!0)}}),r}function wg(e,t){return e.ranges.length==t.ranges.length&&e.ranges.filter((i,r)=>i.empty!=t.ranges[r].empty).length===0}function $c(e,t){return e.length?t.length?e.concat(t):e:t}const _e=[],bg=200;function Nc(e,t){if(e.length){let i=e[e.length-1],r=i.selectionsAfter.slice(Math.max(0,i.selectionsAfter.length-bg));return r.length&&r[r.length-1].eq(t)?e:(r.push(t),ms(e,e.length-1,1e9,i.setSelAfter(r)))}else return[Oe.selection([t])]}function Dg(e){let t=e[e.length-1],i=e.slice();return i[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),i}function xl(e,t){if(!e.length)return e;let i=e.length,r=_e;for(;i;){let n=Eg(e[i-1],t,r);if(n.changes&&!n.changes.empty||n.effects.length){let o=e.slice(0,i);return o[i-1]=n,o}else t=n.mapped,i--,r=n.selectionsAfter}return r.length?[Oe.selection(r)]:_e}function Eg(e,t,i){let r=$c(e.selectionsAfter.length?e.selectionsAfter.map(a=>a.map(t)):_e,i);if(!e.changes)return Oe.selection(r);let n=e.changes.map(t),o=t.mapDesc(e.changes,!0),s=e.mapped?e.mapped.composeDesc(o):o;return new Oe(n,nt.mapEffects(e.effects,t),s,e.startSelection.map(o),r)}const Tg=/^(input\.type|delete)($|\.)/;class ei{constructor(t,i,r=0,n=void 0){this.done=t,this.undone=i,this.prevTime=r,this.prevUserEvent=n}isolate(){return this.prevTime?new ei(this.done,this.undone):this}addChanges(t,i,r,n,o){let s=this.done,a=s[s.length-1];return a&&a.changes&&!a.changes.empty&&t.changes&&(!r||Tg.test(r))&&(!a.selectionsAfter.length&&i-this.prevTime<n&&Sg(a.changes,t.changes)||r=="input.type.compose")?s=ms(s,s.length-1,o,new Oe(t.changes.compose(a.changes),$c(t.effects,a.effects),a.mapped,a.startSelection,_e)):s=ms(s,s.length,o,t),new ei(s,_e,i,r)}addSelection(t,i,r,n){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:_e;return o.length>0&&i-this.prevTime<n&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&wg(o[o.length-1],t)?this:new ei(Nc(this.done,t),this.undone,i,r)}addMapping(t){return new ei(xl(this.done,t),xl(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,i,r){let n=t==0?this.done:this.undone;if(n.length==0)return null;let o=n[n.length-1];if(r&&o.selectionsAfter.length)return i.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:gl.of({side:t,rest:Dg(n)}),userEvent:t==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let s=n.length==1?_e:n.slice(0,n.length-1);return o.mapped&&(s=xl(s,o.mapped)),i.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:gl.of({side:t,rest:s}),filter:!1,userEvent:t==0?"undo":"redo",scrollIntoView:!0})}else return null}}ei.empty=new ei(_e,_e);const Ag=[{key:"Mod-z",run:Xc,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:yl,preventDefault:!0},{linux:"Ctrl-Shift-z",run:yl,preventDefault:!0},{key:"Mod-u",run:Pg,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Cg,preventDefault:!0}];function or(e,t){return Y.create(e.ranges.map(t),e.mainIndex)}function ii(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function Be({state:e,dispatch:t},i){let r=or(e.selection,i);return r.eq(e.selection)?!1:(t(ii(e,r)),!0)}function Os(e,t){return Y.cursor(t?e.to:e.from)}function Fc(e,t){return Be(e,i=>i.empty?e.moveByChar(i,t):Os(i,t))}function ne(e){return e.textDirectionAt(e.state.selection.main.head)==At.LTR}const Mc=e=>Fc(e,!ne(e)),Bc=e=>Fc(e,ne(e));function Rc(e,t){return Be(e,i=>i.empty?e.moveByGroup(i,t):Os(i,t))}const kg=e=>Rc(e,!ne(e)),_g=e=>Rc(e,ne(e));function Ig(e,t,i){if(t.type.prop(i))return!0;let r=t.to-t.from;return r&&(r>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function gs(e,t,i){let r=Xt(e).resolveInner(t.head),n=i?ct.closedBy:ct.openedBy;for(let h=t.head;;){let c=i?r.childAfter(h):r.childBefore(h);if(!c)break;Ig(e,c,n)?r=c:h=i?c.to:c.from}let o=r.type.prop(n),s,a;return o&&(s=i?ti(e,r.from,1):ti(e,r.to,-1))&&s.matched?a=i?s.end.to:s.end.from:a=i?r.to:r.from,Y.cursor(a,i?-1:1)}const Lg=e=>Be(e,t=>gs(e.state,t,!ne(e))),Qg=e=>Be(e,t=>gs(e.state,t,ne(e)));function Yc(e,t){return Be(e,i=>{if(!i.empty)return Os(i,t);let r=e.moveVertically(i,t);return r.head!=i.head?r:e.moveToLineBoundary(i,t)})}const Wc=e=>Yc(e,!1),jc=e=>Yc(e,!0);function Zc(e){return Math.max(e.defaultLineHeight,Math.min(e.dom.clientHeight,innerHeight)-5)}function zc(e,t){let{state:i}=e,r=or(i.selection,a=>a.empty?e.moveVertically(a,t,Zc(e)):Os(a,t));if(r.eq(i.selection))return!1;let n=e.coordsAtPos(i.selection.main.head),o=e.scrollDOM.getBoundingClientRect(),s;return n&&n.top>o.top&&n.bottom<o.bottom&&n.top-o.top<=e.scrollDOM.scrollHeight-e.scrollDOM.scrollTop-e.scrollDOM.clientHeight&&(s=tt.scrollIntoView(r.main.head,{y:"start",yMargin:n.top-o.top})),e.dispatch(ii(i,r),{effects:s}),!0}const qc=e=>zc(e,!1),vl=e=>zc(e,!0);function wi(e,t,i){let r=e.lineBlockAt(t.head),n=e.moveToLineBoundary(t,i);if(n.head==t.head&&n.head!=(i?r.to:r.from)&&(n=e.moveToLineBoundary(t,i,!1)),!i&&n.head==r.from&&r.length){let o=/^\s*/.exec(e.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;o&&t.head!=r.from+o&&(n=Y.cursor(r.from+o))}return n}const Xg=e=>Be(e,t=>wi(e,t,!0)),$g=e=>Be(e,t=>wi(e,t,!1)),Ng=e=>Be(e,t=>wi(e,t,!ne(e))),Fg=e=>Be(e,t=>wi(e,t,ne(e))),Mg=e=>Be(e,t=>Y.cursor(e.lineBlockAt(t.head).from,1)),Bg=e=>Be(e,t=>Y.cursor(e.lineBlockAt(t.head).to,-1));function Rg(e,t,i){let r=!1,n=or(e.selection,o=>{let s=ti(e,o.head,-1)||ti(e,o.head,1)||o.head>0&&ti(e,o.head-1,1)||o.head<e.doc.length&&ti(e,o.head+1,-1);if(!s||!s.end)return o;r=!0;let a=s.start.from==o.head?s.end.to:s.end.from;return i?Y.range(o.anchor,a):Y.cursor(a)});return r?(t(ii(e,n)),!0):!1}const Yg=({state:e,dispatch:t})=>Rg(e,t,!1);function Ie(e,t){let i=or(e.state.selection,r=>{let n=t(r);return Y.range(r.anchor,n.head,n.goalColumn)});return i.eq(e.state.selection)?!1:(e.dispatch(ii(e.state,i)),!0)}function Uc(e,t){return Ie(e,i=>e.moveByChar(i,t))}const Gc=e=>Uc(e,!ne(e)),Vc=e=>Uc(e,ne(e));function Hc(e,t){return Ie(e,i=>e.moveByGroup(i,t))}const Wg=e=>Hc(e,!ne(e)),jg=e=>Hc(e,ne(e)),Zg=e=>Ie(e,t=>gs(e.state,t,!ne(e))),zg=e=>Ie(e,t=>gs(e.state,t,ne(e)));function Jc(e,t){return Ie(e,i=>e.moveVertically(i,t))}const Kc=e=>Jc(e,!1),tp=e=>Jc(e,!0);function ep(e,t){return Ie(e,i=>e.moveVertically(i,t,Zc(e)))}const ip=e=>ep(e,!1),rp=e=>ep(e,!0),qg=e=>Ie(e,t=>wi(e,t,!0)),Ug=e=>Ie(e,t=>wi(e,t,!1)),Gg=e=>Ie(e,t=>wi(e,t,!ne(e))),Vg=e=>Ie(e,t=>wi(e,t,ne(e))),Hg=e=>Ie(e,t=>Y.cursor(e.lineBlockAt(t.head).from)),Jg=e=>Ie(e,t=>Y.cursor(e.lineBlockAt(t.head).to)),np=({state:e,dispatch:t})=>(t(ii(e,{anchor:0})),!0),sp=({state:e,dispatch:t})=>(t(ii(e,{anchor:e.doc.length})),!0),op=({state:e,dispatch:t})=>(t(ii(e,{anchor:e.selection.main.anchor,head:0})),!0),lp=({state:e,dispatch:t})=>(t(ii(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0),Kg=({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0),ty=({state:e,dispatch:t})=>{let i=vs(e).map(({from:r,to:n})=>Y.range(r,Math.min(n+1,e.doc.length)));return t(e.update({selection:Y.create(i),userEvent:"select"})),!0},ey=({state:e,dispatch:t})=>{let i=or(e.selection,r=>{var n;let o=Xt(e).resolveInner(r.head,1);for(;!(o.from<r.from&&o.to>=r.to||o.to>r.to&&o.from<=r.from||!(!((n=o.parent)===null||n===void 0)&&n.parent));)o=o.parent;return Y.range(o.to,o.from)});return t(ii(e,i)),!0},iy=({state:e,dispatch:t})=>{let i=e.selection,r=null;return i.ranges.length>1?r=Y.create([i.main]):i.main.empty||(r=Y.create([Y.cursor(i.main.head)])),r?(t(ii(e,r)),!0):!1};function ys({state:e,dispatch:t},i){if(e.readOnly)return!1;let r="delete.selection",n=e.changeByRange(o=>{let{from:s,to:a}=o;if(s==a){let h=i(s);h<s?r="delete.backward":h>s&&(r="delete.forward"),s=Math.min(s,h),a=Math.max(a,h)}return s==a?{range:o}:{changes:{from:s,to:a},range:Y.cursor(s)}});return n.changes.empty?!1:(t(e.update(n,{scrollIntoView:!0,userEvent:r,effects:r=="delete.selection"?tt.announce.of(e.phrase("Selection deleted")):void 0})),!0)}function xs(e,t,i){if(e instanceof tt)for(let r of e.state.facet(tt.atomicRanges).map(n=>n(e)))r.between(t,t,(n,o)=>{n<t&&o>t&&(t=i?o:n)});return t}const ap=(e,t)=>ys(e,i=>{let{state:r}=e,n=r.doc.lineAt(i),o,s;if(!t&&i>n.from&&i<n.from+200&&!/[^ \t]/.test(o=n.text.slice(0,i-n.from))){if(o[o.length-1]=="	")return i-1;let a=Xr(o,r.tabSize),h=a%as(r)||as(r);for(let c=0;c<h&&o[o.length-1-c]==" ";c++)i--;s=i}else s=ae(n.text,i-n.from,t,t)+n.from,s==i&&n.number!=(t?r.doc.lines:1)&&(s+=t?1:-1);return xs(e,s,t)}),Pl=e=>ap(e,!1),hp=e=>ap(e,!0),up=(e,t)=>ys(e,i=>{let r=i,{state:n}=e,o=n.doc.lineAt(r),s=n.charCategorizer(r);for(let a=null;;){if(r==(t?o.to:o.from)){r==i&&o.number!=(t?n.doc.lines:1)&&(r+=t?1:-1);break}let h=ae(o.text,r-o.from,t)+o.from,c=o.text.slice(Math.min(r,h)-o.from,Math.max(r,h)-o.from),d=s(c);if(a!=null&&d!=a)break;(c!=" "||r!=i)&&(a=d),r=h}return xs(e,r,t)}),cp=e=>up(e,!1),ry=e=>up(e,!0),pp=e=>ys(e,t=>{let i=e.lineBlockAt(t).to;return xs(e,t<i?i:Math.min(e.state.doc.length,t+1),!0)}),ny=e=>ys(e,t=>{let i=e.lineBlockAt(t).from;return xs(e,t>i?i:Math.max(0,t-1),!1)}),sy=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:yt.of(["",""])},range:Y.cursor(r.from)}));return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0},oy=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{if(!r.empty||r.from==0||r.from==e.doc.length)return{range:r};let n=r.from,o=e.doc.lineAt(n),s=n==o.from?n-1:ae(o.text,n-o.from,!1)+o.from,a=n==o.to?n+1:ae(o.text,n-o.from,!0)+o.from;return{changes:{from:s,to:a,insert:e.doc.slice(n,a).append(e.doc.slice(s,n))},range:Y.cursor(a)}});return i.changes.empty?!1:(t(e.update(i,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function vs(e){let t=[],i=-1;for(let r of e.selection.ranges){let n=e.doc.lineAt(r.from),o=e.doc.lineAt(r.to);if(!r.empty&&r.to==o.from&&(o=e.doc.lineAt(r.to-1)),i>=n.number){let s=t[t.length-1];s.to=o.to,s.ranges.push(r)}else t.push({from:n.from,to:o.to,ranges:[r]});i=o.number+1}return t}function dp(e,t,i){if(e.readOnly)return!1;let r=[],n=[];for(let o of vs(e)){if(i?o.to==e.doc.length:o.from==0)continue;let s=e.doc.lineAt(i?o.to+1:o.from-1),a=s.length+1;if(i){r.push({from:o.to,to:s.to},{from:o.from,insert:s.text+e.lineBreak});for(let h of o.ranges)n.push(Y.range(Math.min(e.doc.length,h.anchor+a),Math.min(e.doc.length,h.head+a)))}else{r.push({from:s.from,to:o.from},{from:o.to,insert:e.lineBreak+s.text});for(let h of o.ranges)n.push(Y.range(h.anchor-a,h.head-a))}}return r.length?(t(e.update({changes:r,scrollIntoView:!0,selection:Y.create(n,e.selection.mainIndex),userEvent:"move.line"})),!0):!1}const ly=({state:e,dispatch:t})=>dp(e,t,!1),ay=({state:e,dispatch:t})=>dp(e,t,!0);function fp(e,t,i){if(e.readOnly)return!1;let r=[];for(let n of vs(e))i?r.push({from:n.from,insert:e.doc.slice(n.from,n.to)+e.lineBreak}):r.push({from:n.to,insert:e.lineBreak+e.doc.slice(n.from,n.to)});return t(e.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const hy=({state:e,dispatch:t})=>fp(e,t,!1),uy=({state:e,dispatch:t})=>fp(e,t,!0),cy=e=>{if(e.state.readOnly)return!1;let{state:t}=e,i=t.changes(vs(t).map(({from:n,to:o})=>(n>0?n--:o<t.doc.length&&o++,{from:n,to:o}))),r=or(t.selection,n=>e.moveVertically(n,!0)).map(i);return e.dispatch({changes:i,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function py(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let i=Xt(e).resolveInner(t),r=i.childBefore(t),n=i.childAfter(t),o;return r&&n&&r.to<=t&&n.from>=t&&(o=r.type.prop(ct.closedBy))&&o.indexOf(n.name)>-1&&e.doc.lineAt(r.to).from==e.doc.lineAt(n.from).from?{from:r.to,to:n.from}:null}const dy=mp(!1),fy=mp(!0);function mp(e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let r=t.changeByRange(n=>{let{from:o,to:s}=n,a=t.doc.lineAt(o),h=!e&&o==s&&py(t,o);e&&(o=s=(s<=a.to?a:t.doc.lineAt(s)).to);let c=new hs(t,{simulateBreak:o,simulateDoubleBreak:!!h}),d=ll(c,o);for(d==null&&(d=/^\s*/.exec(t.doc.lineAt(o).text)[0].length);s<a.to&&/\s/.test(a.text[s-a.from]);)s++;h?{from:o,to:s}=h:o>a.from&&o<a.from+100&&!/\S/.test(a.text.slice(0,o))&&(o=a.from);let f=["",en(t,d)];return h&&f.push(en(t,c.lineIndent(a.from,-1))),{changes:{from:o,to:s,insert:yt.of(f)},range:Y.cursor(o+1+f[1].length)}});return i(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Cl(e,t){let i=-1;return e.changeByRange(r=>{let n=[];for(let s=r.from;s<=r.to;){let a=e.doc.lineAt(s);a.number>i&&(r.empty||r.to>a.from)&&(t(a,n,r),i=a.number),s=a.to+1}let o=e.changes(n);return{changes:n,range:Y.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}})}const my=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=Object.create(null),r=new hs(e,{overrideIndentation:o=>{let s=i[o];return s==null?-1:s}}),n=Cl(e,(o,s,a)=>{let h=ll(r,o.from);if(h==null)return;/\S/.test(o.text)||(h=0);let c=/^\s*/.exec(o.text)[0],d=en(e,h);(c!=d||a.from<o.from+c.length)&&(i[o.from]=h,s.push({from:o.from,to:o.from+c.length,insert:d}))});return n.changes.empty||t(e.update(n,{userEvent:"indent"})),!0},Op=({state:e,dispatch:t})=>e.readOnly?!1:(t(e.update(Cl(e,(i,r)=>{r.push({from:i.from,insert:e.facet(tn)})}),{userEvent:"input.indent"})),!0),gp=({state:e,dispatch:t})=>e.readOnly?!1:(t(e.update(Cl(e,(i,r)=>{let n=/^\s*/.exec(i.text)[0];if(!n)return;let o=Xr(n,e.tabSize),s=0,a=en(e,Math.max(0,o-as(e)));for(;s<n.length&&s<a.length&&n.charCodeAt(s)==a.charCodeAt(s);)s++;r.push({from:i.from+s,to:i.from+n.length,insert:a.slice(s)})}),{userEvent:"delete.dedent"})),!0),Oy=[{key:"Ctrl-b",run:Mc,shift:Gc,preventDefault:!0},{key:"Ctrl-f",run:Bc,shift:Vc},{key:"Ctrl-p",run:Wc,shift:Kc},{key:"Ctrl-n",run:jc,shift:tp},{key:"Ctrl-a",run:Mg,shift:Hg},{key:"Ctrl-e",run:Bg,shift:Jg},{key:"Ctrl-d",run:hp},{key:"Ctrl-h",run:Pl},{key:"Ctrl-k",run:pp},{key:"Ctrl-Alt-h",run:cp},{key:"Ctrl-o",run:sy},{key:"Ctrl-t",run:oy},{key:"Ctrl-v",run:vl}],gy=[{key:"ArrowLeft",run:Mc,shift:Gc,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:kg,shift:Wg,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Ng,shift:Gg,preventDefault:!0},{key:"ArrowRight",run:Bc,shift:Vc,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:_g,shift:jg,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Fg,shift:Vg,preventDefault:!0},{key:"ArrowUp",run:Wc,shift:Kc,preventDefault:!0},{mac:"Cmd-ArrowUp",run:np,shift:op},{mac:"Ctrl-ArrowUp",run:qc,shift:ip},{key:"ArrowDown",run:jc,shift:tp,preventDefault:!0},{mac:"Cmd-ArrowDown",run:sp,shift:lp},{mac:"Ctrl-ArrowDown",run:vl,shift:rp},{key:"PageUp",run:qc,shift:ip},{key:"PageDown",run:vl,shift:rp},{key:"Home",run:$g,shift:Ug,preventDefault:!0},{key:"Mod-Home",run:np,shift:op},{key:"End",run:Xg,shift:qg,preventDefault:!0},{key:"Mod-End",run:sp,shift:lp},{key:"Enter",run:dy},{key:"Mod-a",run:Kg},{key:"Backspace",run:Pl,shift:Pl},{key:"Delete",run:hp},{key:"Mod-Backspace",mac:"Alt-Backspace",run:cp},{key:"Mod-Delete",mac:"Alt-Delete",run:ry},{mac:"Mod-Backspace",run:ny},{mac:"Mod-Delete",run:pp}].concat(Oy.map(e=>({mac:e.key,run:e.run,shift:e.shift}))),yy=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Lg,shift:Zg},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Qg,shift:zg},{key:"Alt-ArrowUp",run:ly},{key:"Shift-Alt-ArrowUp",run:hy},{key:"Alt-ArrowDown",run:ay},{key:"Shift-Alt-ArrowDown",run:uy},{key:"Escape",run:iy},{key:"Mod-Enter",run:fy},{key:"Alt-l",mac:"Ctrl-l",run:ty},{key:"Mod-i",run:ey,preventDefault:!0},{key:"Mod-[",run:gp},{key:"Mod-]",run:Op},{key:"Mod-Alt-\\",run:my},{key:"Shift-Mod-k",run:cy},{key:"Shift-Mod-\\",run:Yg},{key:"Mod-/",run:ug},{key:"Alt-A",run:pg}].concat(gy),xy={key:"Tab",run:Op,shift:gp};function Ct(){var e=arguments[0];typeof e=="string"&&(e=document.createElement(e));var t=1,i=arguments[1];if(i&&typeof i=="object"&&i.nodeType==null&&!Array.isArray(i)){for(var r in i)if(Object.prototype.hasOwnProperty.call(i,r)){var n=i[r];typeof n=="string"?e.setAttribute(r,n):n!=null&&(e[r]=n)}t++}for(;t<arguments.length;t++)yp(e,arguments[t]);return e}function yp(e,t){if(typeof t=="string")e.appendChild(document.createTextNode(t));else if(t!=null)if(t.nodeType!=null)e.appendChild(t);else if(Array.isArray(t))for(var i=0;i<t.length;i++)yp(e,t[i]);else throw new RangeError("Unsupported child node: "+t)}const xp=typeof String.prototype.normalize=="function"?e=>e.normalize("NFKD"):e=>e;class lr{constructor(t,i,r=0,n=t.length,o,s){this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(r,n),this.bufferStart=r,this.normalize=o?a=>o(xp(a)):xp,this.query=this.normalize(i)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Gt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let t=this.peek();if(t<0)return this.done=!0,this;let i=Gs(t),r=this.bufferStart+this.bufferPos;this.bufferPos+=Pe(t);let n=this.normalize(i);for(let o=0,s=r;;o++){let a=n.charCodeAt(o),h=this.match(a,s);if(h)return this.value=h,this;if(o==n.length-1)break;s==r&&o<i.length&&i.charCodeAt(o)==a&&s++}}}match(t,i){let r=null;for(let n=0;n<this.matches.length;n+=2){let o=this.matches[n],s=!1;this.query.charCodeAt(o)==t&&(o==this.query.length-1?r={from:this.matches[n+1],to:i+1}:(this.matches[n]++,s=!0)),s||(this.matches.splice(n,2),n-=2)}return this.query.charCodeAt(0)==t&&(this.query.length==1?r={from:i,to:i+1}:this.matches.push(1,i)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferPos)&&(r=null),r}}typeof Symbol<"u"&&(lr.prototype[Symbol.iterator]=function(){return this});const vp={from:-1,to:-1,match:/.*/.exec("")},Sl="gm"+(/x/.unicode==null?"":"u");class Pp{constructor(t,i,r,n=0,o=t.length){if(this.text=t,this.to=o,this.curLine="",this.done=!1,this.value=vp,/\\[sWDnr]|\n|\r|\[\^/.test(i))return new Cp(t,i,r,n,o);this.re=new RegExp(i,Sl+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=t.iter();let s=t.lineAt(n);this.curLineStart=s.from,this.matchPos=Ps(t,n),this.getLine(this.curLineStart)}getLine(t){this.iter.next(t),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let t=this.matchPos-this.curLineStart;;){this.re.lastIndex=t;let i=this.matchPos<=this.to&&this.re.exec(this.curLine);if(i){let r=this.curLineStart+i.index,n=r+i[0].length;if(this.matchPos=Ps(this.text,n+(r==n?1:0)),r==this.curLine.length&&this.nextLine(),(r<n||r>this.value.to)&&(!this.test||this.test(r,n,i)))return this.value={from:r,to:n,match:i},this;t=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),t=0;else return this.done=!0,this}}}const wl=new WeakMap;class ar{constructor(t,i){this.from=t,this.text=i}get to(){return this.from+this.text.length}static get(t,i,r){let n=wl.get(t);if(!n||n.from>=r||n.to<=i){let a=new ar(i,t.sliceString(i,r));return wl.set(t,a),a}if(n.from==i&&n.to==r)return n;let{text:o,from:s}=n;return s>i&&(o=t.sliceString(i,s)+o,s=i),n.to<r&&(o+=t.sliceString(n.to,r)),wl.set(t,new ar(s,o)),new ar(i,o.slice(i-s,r-s))}}class Cp{constructor(t,i,r,n,o){this.text=t,this.to=o,this.done=!1,this.value=vp,this.matchPos=Ps(t,n),this.re=new RegExp(i,Sl+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=ar.get(t,n,this.chunkEnd(n+5e3))}chunkEnd(t){return t>=this.to?this.to:this.text.lineAt(t).to}next(){for(;;){let t=this.re.lastIndex=this.matchPos-this.flat.from,i=this.re.exec(this.flat.text);if(i&&!i[0]&&i.index==t&&(this.re.lastIndex=t+1,i=this.re.exec(this.flat.text)),i){let r=this.flat.from+i.index,n=r+i[0].length;if((this.flat.to>=this.to||i.index+i[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,n,i)))return this.value={from:r,to:n,match:i},this.matchPos=Ps(this.text,n+(r==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=ar.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Pp.prototype[Symbol.iterator]=Cp.prototype[Symbol.iterator]=function(){return this});function vy(e){try{return new RegExp(e,Sl),!0}catch{return!1}}function Ps(e,t){if(t>=e.length)return t;let i=e.lineAt(t),r;for(;t<i.to&&(r=i.text.charCodeAt(t-i.from))>=56320&&r<57344;)t++;return t}function bl(e){let t=Ct("input",{class:"cm-textfield",name:"line"}),i=Ct("form",{class:"cm-gotoLine",onkeydown:n=>{n.keyCode==27?(n.preventDefault(),e.dispatch({effects:Cs.of(!1)}),e.focus()):n.keyCode==13&&(n.preventDefault(),r())},onsubmit:n=>{n.preventDefault(),r()}},Ct("label",e.state.phrase("Go to line"),": ",t)," ",Ct("button",{class:"cm-button",type:"submit"},e.state.phrase("go")));function r(){let n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!n)return;let{state:o}=e,s=o.doc.lineAt(o.selection.main.head),[,a,h,c,d]=n,f=c?+c.slice(1):0,m=h?+h:s.number;if(h&&d){let S=m/100;a&&(S=S*(a=="-"?-1:1)+s.number/o.doc.lines),m=Math.round(o.doc.lines*S)}else h&&a&&(m=m*(a=="-"?-1:1)+s.number);let v=o.doc.line(Math.max(1,Math.min(o.doc.lines,m)));e.dispatch({effects:Cs.of(!1),selection:Y.cursor(v.from+Math.max(0,Math.min(f,v.length))),scrollIntoView:!0}),e.focus()}return{dom:i}}const Cs=nt.define(),Sp=Rt.define({create(){return!0},update(e,t){for(let i of t.effects)i.is(Cs)&&(e=i.value);return e},provide:e=>Gr.from(e,t=>t?bl:null)}),Py=e=>{let t=Ur(e,bl);if(!t){let i=[Cs.of(!0)];e.state.field(Sp,!1)==null&&i.push(nt.appendConfig.of([Sp,Cy])),e.dispatch({effects:i}),t=Ur(e,bl)}return t&&t.dom.querySelector("input").focus(),!0},Cy=tt.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Sy={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},wp=H.define({combine(e){return ze(e,Sy,{highlightWordAroundCursor:(t,i)=>t||i,minSelectionLength:Math.min,maxMatches:Math.min})}});function wy(e){let t=[Ay,Ty];return e&&t.push(wp.of(e)),t}const by=et.mark({class:"cm-selectionMatch"}),Dy=et.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function bp(e,t,i,r){return(i==0||e(t.sliceDoc(i-1,i))!=Tt.Word)&&(r==t.doc.length||e(t.sliceDoc(r,r+1))!=Tt.Word)}function Ey(e,t,i,r){return e(t.sliceDoc(i,i+1))==Tt.Word&&e(t.sliceDoc(r-1,r))==Tt.Word}const Ty=Nt.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(wp),{state:i}=e,r=i.selection;if(r.ranges.length>1)return et.none;let n=r.main,o,s=null;if(n.empty){if(!t.highlightWordAroundCursor)return et.none;let h=i.wordAt(n.head);if(!h)return et.none;s=i.charCategorizer(n.head),o=i.sliceDoc(h.from,h.to)}else{let h=n.to-n.from;if(h<t.minSelectionLength||h>200)return et.none;if(t.wholeWords){if(o=i.sliceDoc(n.from,n.to),s=i.charCategorizer(n.head),!(bp(s,i,n.from,n.to)&&Ey(s,i,n.from,n.to)))return et.none}else if(o=i.sliceDoc(n.from,n.to).trim(),!o)return et.none}let a=[];for(let h of e.visibleRanges){let c=new lr(i.doc,o,h.from,h.to);for(;!c.next().done;){let{from:d,to:f}=c.value;if((!s||bp(s,i,d,f))&&(n.empty&&d<=n.from&&f>=n.to?a.push(Dy.range(d,f)):(d>=n.to||f<=n.from)&&a.push(by.range(d,f)),a.length>t.maxMatches))return et.none}}return et.set(a)}},{decorations:e=>e.decorations}),Ay=tt.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),ky=({state:e,dispatch:t})=>{let{selection:i}=e,r=Y.create(i.ranges.map(n=>e.wordAt(n.head)||Y.cursor(n.head)),i.mainIndex);return r.eq(i)?!1:(t(e.update({selection:r})),!0)};function _y(e,t){let{main:i,ranges:r}=e.selection,n=e.wordAt(i.head),o=n&&n.from==i.from&&n.to==i.to;for(let s=!1,a=new lr(e.doc,t,r[r.length-1].to);;)if(a.next(),a.done){if(s)return null;a=new lr(e.doc,t,0,Math.max(0,r[r.length-1].from-1)),s=!0}else{if(s&&r.some(h=>h.from==a.value.from))continue;if(o){let h=e.wordAt(a.value.from);if(!h||h.from!=a.value.from||h.to!=a.value.to)continue}return a.value}}const Iy=({state:e,dispatch:t})=>{let{ranges:i}=e.selection;if(i.some(o=>o.from===o.to))return ky({state:e,dispatch:t});let r=e.sliceDoc(i[0].from,i[0].to);if(e.selection.ranges.some(o=>e.sliceDoc(o.from,o.to)!=r))return!1;let n=_y(e,r);return n?(t(e.update({selection:e.selection.addRange(Y.range(n.from,n.to),!1),effects:tt.scrollIntoView(n.to)})),!0):!1},Dl=H.define({combine(e){return ze(e,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:t=>new jy(t)})}});class Dp{constructor(t){this.search=t.search,this.caseSensitive=!!t.caseSensitive,this.literal=!!t.literal,this.regexp=!!t.regexp,this.replace=t.replace||"",this.valid=!!this.search&&(!this.regexp||vy(this.search)),this.unquoted=this.literal?this.search:this.search.replace(/\\([nrt\\])/g,(i,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\"),this.wholeWord=!!t.wholeWord}eq(t){return this.search==t.search&&this.replace==t.replace&&this.caseSensitive==t.caseSensitive&&this.regexp==t.regexp&&this.wholeWord==t.wholeWord}create(){return this.regexp?new $y(this):new Qy(this)}getCursor(t,i=0,r){let n=t.doc?t:Ot.create({doc:t});return r==null&&(r=n.doc.length),this.regexp?ur(this,n,i,r):hr(this,n,i,r)}}class Ep{constructor(t){this.spec=t}}function hr(e,t,i,r){return new lr(t.doc,e.unquoted,i,r,e.caseSensitive?void 0:n=>n.toLowerCase(),e.wholeWord?Ly(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}function Ly(e,t){return(i,r,n,o)=>((o>i||o+n.length<r)&&(o=Math.max(0,i-2),n=e.sliceString(o,Math.min(e.length,r+2))),t(ws(n,i-o))!=Tt.Word||t(Ss(n,r-o))!=Tt.Word||t(Ss(n,i-o))!=Tt.Word&&t(ws(n,r-o))!=Tt.Word)}class Qy extends Ep{constructor(t){super(t)}nextMatch(t,i,r){let n=hr(this.spec,t,r,t.doc.length).nextOverlapping();return n.done&&(n=hr(this.spec,t,0,i).nextOverlapping()),n.done?null:n.value}prevMatchInRange(t,i,r){for(let n=r;;){let o=Math.max(i,n-1e4-this.spec.unquoted.length),s=hr(this.spec,t,o,n),a=null;for(;!s.nextOverlapping().done;)a=s.value;if(a)return a;if(o==i)return null;n-=1e4}}prevMatch(t,i,r){return this.prevMatchInRange(t,0,i)||this.prevMatchInRange(t,r,t.doc.length)}getReplacement(t){return this.spec.replace}matchAll(t,i){let r=hr(this.spec,t,0,t.doc.length),n=[];for(;!r.next().done;){if(n.length>=i)return null;n.push(r.value)}return n}highlight(t,i,r,n){let o=hr(this.spec,t,Math.max(0,i-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,t.doc.length));for(;!o.next().done;)n(o.value.from,o.value.to)}}function ur(e,t,i,r){return new Pp(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?Xy(t.charCategorizer(t.selection.main.head)):void 0},i,r)}function Ss(e,t){return e.slice(ae(e,t,!1),t)}function ws(e,t){return e.slice(t,ae(e,t))}function Xy(e){return(t,i,r)=>!r[0].length||e(ws(r.input,r.index))!=Tt.Word||e(Ss(r.input,r.index+r[0].length))!=Tt.Word||e(Ss(r.input,r.index))!=Tt.Word&&e(ws(r.input,r.index+r[0].length))!=Tt.Word}class $y extends Ep{nextMatch(t,i,r){let n=ur(this.spec,t,r,t.doc.length).next();return n.done&&(n=ur(this.spec,t,0,i).next()),n.done?null:n.value}prevMatchInRange(t,i,r){for(let n=1;;n++){let o=Math.max(i,r-n*1e4),s=ur(this.spec,t,o,r),a=null;for(;!s.next().done;)a=s.value;if(a&&(o==i||a.from>o+10))return a;if(o==i)return null}}prevMatch(t,i,r){return this.prevMatchInRange(t,0,i)||this.prevMatchInRange(t,r,t.doc.length)}getReplacement(t){return this.spec.replace.replace(/\$([$&\d+])/g,(i,r)=>r=="$"?"$":r=="&"?t.match[0]:r!="0"&&+r<t.match.length?t.match[r]:i)}matchAll(t,i){let r=ur(this.spec,t,0,t.doc.length),n=[];for(;!r.next().done;){if(n.length>=i)return null;n.push(r.value)}return n}highlight(t,i,r,n){let o=ur(this.spec,t,Math.max(0,i-250),Math.min(r+250,t.doc.length));for(;!o.next().done;)n(o.value.from,o.value.to)}}const sn=nt.define(),El=nt.define(),bi=Rt.define({create(e){return new Tl(kl(e).create(),null)},update(e,t){for(let i of t.effects)i.is(sn)?e=new Tl(i.value.create(),e.panel):i.is(El)&&(e=new Tl(e.query,i.value?Al:null));return e},provide:e=>Gr.from(e,t=>t.panel)});class Tl{constructor(t,i){this.query=t,this.panel=i}}const Ny=et.mark({class:"cm-searchMatch"}),Fy=et.mark({class:"cm-searchMatch cm-searchMatch-selected"}),My=Nt.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(bi))}update(e){let t=e.state.field(bi);(t!=e.startState.field(bi)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:e,panel:t}){if(!t||!e.spec.valid)return et.none;let{view:i}=this,r=new di;for(let n=0,o=i.visibleRanges,s=o.length;n<s;n++){let{from:a,to:h}=o[n];for(;n<s-1&&h>o[n+1].from-2*250;)h=o[++n].to;e.highlight(i.state,a,h,(c,d)=>{let f=i.state.selection.ranges.some(m=>m.from==c&&m.to==d);r.add(c,d,f?Fy:Ny)})}return r.finish()}},{decorations:e=>e.decorations});function on(e){return t=>{let i=t.state.field(bi,!1);return i&&i.query.spec.valid?e(t,i):Ap(t)}}const bs=on((e,{query:t})=>{let{to:i}=e.state.selection.main,r=t.nextMatch(e.state,i,i);return r?(e.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:_l(e,r),userEvent:"select.search"}),!0):!1}),Ds=on((e,{query:t})=>{let{state:i}=e,{from:r}=i.selection.main,n=t.prevMatch(i,r,r);return n?(e.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:_l(e,n),userEvent:"select.search"}),!0):!1}),By=on((e,{query:t})=>{let i=t.matchAll(e.state,1e3);return!i||!i.length?!1:(e.dispatch({selection:Y.create(i.map(r=>Y.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),Ry=({state:e,dispatch:t})=>{let i=e.selection;if(i.ranges.length>1||i.main.empty)return!1;let{from:r,to:n}=i.main,o=[],s=0;for(let a=new lr(e.doc,e.sliceDoc(r,n));!a.next().done;){if(o.length>1e3)return!1;a.value.from==r&&(s=o.length),o.push(Y.range(a.value.from,a.value.to))}return t(e.update({selection:Y.create(o,s),userEvent:"select.search.matches"})),!0},Tp=on((e,{query:t})=>{let{state:i}=e,{from:r,to:n}=i.selection.main;if(i.readOnly)return!1;let o=t.nextMatch(i,r,r);if(!o)return!1;let s=[],a,h,c=[];if(o.from==r&&o.to==n&&(h=i.toText(t.getReplacement(o)),s.push({from:o.from,to:o.to,insert:h}),o=t.nextMatch(i,o.from,o.to),c.push(tt.announce.of(i.phrase("replaced match on line $",i.doc.lineAt(r).number)+"."))),o){let d=s.length==0||s[0].from>=o.to?0:o.to-o.from-h.length;a={anchor:o.from-d,head:o.to-d},c.push(_l(e,o))}return e.dispatch({changes:s,selection:a,scrollIntoView:!!a,effects:c,userEvent:"input.replace"}),!0}),Yy=on((e,{query:t})=>{if(e.state.readOnly)return!1;let i=t.matchAll(e.state,1e9).map(n=>{let{from:o,to:s}=n;return{from:o,to:s,insert:t.getReplacement(n)}});if(!i.length)return!1;let r=e.state.phrase("replaced $ matches",i.length)+".";return e.dispatch({changes:i,effects:tt.announce.of(r),userEvent:"input.replace.all"}),!0});function Al(e){return e.state.facet(Dl).createPanel(e)}function kl(e,t){var i,r,n,o;let s=e.selection.main,a=s.empty||s.to>s.from+100?"":e.sliceDoc(s.from,s.to);if(t&&!a)return t;let h=e.facet(Dl);return new Dp({search:((i=t==null?void 0:t.literal)!==null&&i!==void 0?i:h.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(r=t==null?void 0:t.caseSensitive)!==null&&r!==void 0?r:h.caseSensitive,literal:(n=t==null?void 0:t.literal)!==null&&n!==void 0?n:h.literal,wholeWord:(o=t==null?void 0:t.wholeWord)!==null&&o!==void 0?o:h.wholeWord})}const Ap=e=>{let t=e.state.field(bi,!1);if(t&&t.panel){let i=Ur(e,Al);if(!i)return!1;let r=i.dom.querySelector("[main-field]");if(r&&r!=e.root.activeElement){let n=kl(e.state,t.query.spec);n.valid&&e.dispatch({effects:sn.of(n)}),r.focus(),r.select()}}else e.dispatch({effects:[El.of(!0),t?sn.of(kl(e.state,t.query.spec)):nt.appendConfig.of(zy)]});return!0},kp=e=>{let t=e.state.field(bi,!1);if(!t||!t.panel)return!1;let i=Ur(e,Al);return i&&i.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:El.of(!1)}),!0},Wy=[{key:"Mod-f",run:Ap,scope:"editor search-panel"},{key:"F3",run:bs,shift:Ds,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:bs,shift:Ds,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:kp,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Ry},{key:"Alt-g",run:Py},{key:"Mod-d",run:Iy,preventDefault:!0}];class jy{constructor(t){this.view=t;let i=this.query=t.state.field(bi).query.spec;this.commit=this.commit.bind(this),this.searchField=Ct("input",{value:i.search,placeholder:be(t,"Find"),"aria-label":be(t,"Find"),class:"cm-textfield",name:"search","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ct("input",{value:i.replace,placeholder:be(t,"Replace"),"aria-label":be(t,"Replace"),class:"cm-textfield",name:"replace",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ct("input",{type:"checkbox",name:"case",checked:i.caseSensitive,onchange:this.commit}),this.reField=Ct("input",{type:"checkbox",name:"re",checked:i.regexp,onchange:this.commit}),this.wordField=Ct("input",{type:"checkbox",name:"word",checked:i.wholeWord,onchange:this.commit});function r(n,o,s){return Ct("button",{class:"cm-button",name:n,onclick:o,type:"button"},s)}this.dom=Ct("div",{onkeydown:n=>this.keydown(n),class:"cm-search"},[this.searchField,r("next",()=>bs(t),[be(t,"next")]),r("prev",()=>Ds(t),[be(t,"previous")]),r("select",()=>By(t),[be(t,"all")]),Ct("label",null,[this.caseField,be(t,"match case")]),Ct("label",null,[this.reField,be(t,"regexp")]),Ct("label",null,[this.wordField,be(t,"by word")]),...t.state.readOnly?[]:[Ct("br"),this.replaceField,r("replace",()=>Tp(t),[be(t,"replace")]),r("replaceAll",()=>Yy(t),[be(t,"replace all")]),Ct("button",{name:"close",onclick:()=>kp(t),"aria-label":be(t,"close"),type:"button"},["\xD7"])]])}commit(){let t=new Dp({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});t.eq(this.query)||(this.query=t,this.view.dispatch({effects:sn.of(t)}))}keydown(t){am(this.view,t,"search-panel")?t.preventDefault():t.keyCode==13&&t.target==this.searchField?(t.preventDefault(),(t.shiftKey?Ds:bs)(this.view)):t.keyCode==13&&t.target==this.replaceField&&(t.preventDefault(),Tp(this.view))}update(t){for(let i of t.transactions)for(let r of i.effects)r.is(sn)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(t){this.query=t,this.searchField.value=t.search,this.replaceField.value=t.replace,this.caseField.checked=t.caseSensitive,this.reField.checked=t.regexp,this.wordField.checked=t.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Dl).top}}function be(e,t){return e.state.phrase(t)}const Es=30,Ts=/[\s\.,:;?!]/;function _l(e,{from:t,to:i}){let r=e.state.doc.lineAt(t),n=e.state.doc.lineAt(i).to,o=Math.max(r.from,t-Es),s=Math.min(n,i+Es),a=e.state.sliceDoc(o,s);if(o!=r.from){for(let h=0;h<Es;h++)if(!Ts.test(a[h+1])&&Ts.test(a[h])){a=a.slice(h);break}}if(s!=n){for(let h=a.length-1;h>a.length-Es;h--)if(!Ts.test(a[h-1])&&Ts.test(a[h])){a=a.slice(0,h);break}}return tt.announce.of(`${e.state.phrase("current match")}. ${a} ${e.state.phrase("on line")} ${r.number}.`)}const Zy=tt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),zy=[bi,Li.lowest(My),Zy];class _p{constructor(t,i,r){this.state=t,this.pos=i,this.explicit=r,this.abortListeners=[]}tokenBefore(t){let i=Xt(this.state).resolveInner(this.pos,-1);for(;i&&t.indexOf(i.name)<0;)i=i.parent;return i?{from:i.from,to:this.pos,text:this.state.sliceDoc(i.from,this.pos),type:i.type}:null}matchBefore(t){let i=this.state.doc.lineAt(this.pos),r=Math.max(i.from,this.pos-250),n=i.text.slice(r-i.from,this.pos-i.from),o=n.search(Xp(t,!1));return o<0?null:{from:r+o,to:this.pos,text:n.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(t,i){t=="abort"&&this.abortListeners&&this.abortListeners.push(i)}}function Ip(e){let t=Object.keys(e).join(""),i=/\w/.test(t);return i&&(t=t.replace(/\w/g,"")),`[${i?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function qy(e){let t=Object.create(null),i=Object.create(null);for(let{label:n}of e){t[n[0]]=!0;for(let o=1;o<n.length;o++)i[n[o]]=!0}let r=Ip(t)+Ip(i)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function Lp(e){let t=e.map(n=>typeof n=="string"?{label:n}:n),[i,r]=t.every(n=>/^\w+$/.test(n.label))?[/\w*$/,/\w+$/]:qy(t);return n=>{let o=n.matchBefore(r);return o||n.explicit?{from:o?o.from:n.pos,options:t,validFor:i}:null}}function Uy(e,t){return i=>{for(let r=Xt(i.state).resolveInner(i.pos,-1);r;r=r.parent)if(e.indexOf(r.name)>-1)return null;return t(i)}}class Qp{constructor(t,i,r){this.completion=t,this.source=i,this.match=r}}function Di(e){return e.selection.main.head}function Xp(e,t){var i;let{source:r}=e,n=t&&r[0]!="^",o=r[r.length-1]!="$";return!n&&!o?e:new RegExp(`${n?"^":""}(?:${r})${o?"$":""}`,(i=e.flags)!==null&&i!==void 0?i:e.ignoreCase?"i":"")}function Gy(e,t,i,r){return Object.assign(Object.assign({},e.changeByRange(n=>{if(n==e.selection.main)return{changes:{from:i,to:r,insert:t},range:Y.cursor(i+t.length)};let o=r-i;return!n.empty||o&&e.sliceDoc(n.from-o,n.from)!=e.sliceDoc(i,r)?{range:n}:{changes:{from:n.from-o,to:n.from,insert:t},range:Y.cursor(n.from-o+t.length)}})),{userEvent:"input.complete"})}function $p(e,t){const i=t.completion.apply||t.completion.label;let r=t.source;typeof i=="string"?e.dispatch(Gy(e.state,i,r.from,r.to)):i(e,t.completion,r.from,r.to)}const Np=new WeakMap;function Vy(e){if(!Array.isArray(e))return e;let t=Np.get(e);return t||Np.set(e,t=Lp(e)),t}class Hy{constructor(t){this.pattern=t,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let i=0;i<t.length;){let r=Gt(t,i),n=Pe(r);this.chars.push(r);let o=t.slice(i,i+n),s=o.toUpperCase();this.folded.push(Gt(s==o?o.toLowerCase():s,0)),i+=n}this.astral=t.length!=this.chars.length}match(t){if(this.pattern.length==0)return[0];if(t.length<this.pattern.length)return null;let{chars:i,folded:r,any:n,precise:o,byWord:s}=this;if(i.length==1){let w=Gt(t,0);return w==i[0]?[0,0,Pe(w)]:w==r[0]?[-200,0,Pe(w)]:null}let a=t.indexOf(this.pattern);if(a==0)return[0,0,this.pattern.length];let h=i.length,c=0;if(a<0){for(let w=0,E=Math.min(t.length,200);w<E&&c<h;){let T=Gt(t,w);(T==i[c]||T==r[c])&&(n[c++]=w),w+=Pe(T)}if(c<h)return null}let d=0,f=0,m=!1,v=0,S=-1,O=-1,y=/[a-z]/.test(t),P=!0;for(let w=0,E=Math.min(t.length,200),T=0;w<E&&f<h;){let _=Gt(t,w);a<0&&(d<h&&_==i[d]&&(o[d++]=w),v<h&&(_==i[v]||_==r[v]?(v==0&&(S=w),O=w+1,v++):v=0));let I,F=_<255?_>=48&&_<=57||_>=97&&_<=122?2:_>=65&&_<=90?1:0:(I=Gs(_))!=I.toLowerCase()?1:I!=I.toUpperCase()?2:0;(!w||F==1&&y||T==0&&F!=0)&&(i[f]==_||r[f]==_&&(m=!0)?s[f++]=w:s.length&&(P=!1)),T=F,w+=Pe(_)}return f==h&&s[0]==0&&P?this.result(-100+(m?-200:0),s,t):v==h&&S==0?[-200-t.length,0,O]:a>-1?[-700-t.length,a,a+this.pattern.length]:v==h?[-200+-700-t.length,S,O]:f==h?this.result(-100+(m?-200:0)+-700+(P?0:-1100),s,t):i.length==2?null:this.result((n[0]?-700:0)+-200+-1100,n,t)}result(t,i,r){let n=[t-r.length],o=1;for(let s of i){let a=s+(this.astral?Pe(Gt(r,s)):1);o>1&&n[o-1]==s?n[o-1]=a:(n[o++]=s,n[o++]=a)}return n}}const Le=H.define({combine(e){return ze(e,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(t,i)=>t.label.localeCompare(i.label),interactionDelay:75},{defaultKeymap:(t,i)=>t&&i,closeOnBlur:(t,i)=>t&&i,icons:(t,i)=>t&&i,optionClass:(t,i)=>r=>Jy(t(r),i(r)),addToOptions:(t,i)=>t.concat(i)})}});function Jy(e,t){return e?t?e+" "+t:e:t}function Ky(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(i){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),i.type&&r.classList.add(...i.type.split(/\s+/g).map(n=>"cm-completionIcon-"+n)),r.setAttribute("aria-hidden","true"),r},position:20}),t.push({render(i,r,n){let o=document.createElement("span");o.className="cm-completionLabel";let{label:s}=i,a=0;for(let h=1;h<n.length;){let c=n[h++],d=n[h++];c>a&&o.appendChild(document.createTextNode(s.slice(a,c)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(s.slice(c,d))),f.className="cm-completionMatchedText",a=d}return a<s.length&&o.appendChild(document.createTextNode(s.slice(a))),o},position:50},{render(i){if(!i.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=i.detail,r},position:80}),t.sort((i,r)=>i.position-r.position).map(i=>i.render)}function Fp(e,t,i){if(e<=i)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){let n=Math.floor(t/i);return{from:n*i,to:(n+1)*i}}let r=Math.floor((e-t)/i);return{from:e-(r+1)*i,to:e-r*i}}class t1{constructor(t,i){this.view=t,this.stateField=i,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:a=>this.positionInfo(a),key:this};let r=t.state.field(i),{options:n,selected:o}=r.open,s=t.state.facet(Le);this.optionContent=Ky(s),this.optionClass=s.optionClass,this.range=Fp(n.length,o,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",a=>{for(let h=a.target,c;h&&h!=this.dom;h=h.parentNode)if(h.nodeName=="LI"&&(c=/-(\d+)$/.exec(h.id))&&+c[1]<n.length){$p(t,n[+c[1]]),a.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(n,r.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(t){t.state.field(this.stateField)!=t.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let t=this.view.state.field(this.stateField),i=t.open;if((i.selected>-1&&i.selected<this.range.from||i.selected>=this.range.to)&&(this.range=Fp(i.options.length,i.selected,this.view.state.facet(Le).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(i.options,t.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(i.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:r}=i.options[i.selected],{info:n}=r;if(!n)return;let o=typeof n=="string"?document.createTextNode(n):n(r);if(!o)return;"then"in o?o.then(s=>{s&&this.view.state.field(this.stateField,!1)==t&&this.addInfoPane(s)}).catch(s=>Se(this.view.state,s,"completion info")):this.addInfoPane(o)}}addInfoPane(t){let i=this.info=document.createElement("div");i.className="cm-tooltip cm-completionInfo",i.appendChild(t),this.dom.appendChild(i),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(t){let i=null;for(let r=this.list.firstChild,n=this.range.from;r;r=r.nextSibling,n++)n==t?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),i=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return i&&i1(this.list,i),i}measureInfo(){let t=this.dom.querySelector("[aria-selected]");if(!t||!this.info)return null;let i=this.dom.ownerDocument.defaultView,r=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),o=t.getBoundingClientRect();if(o.top>Math.min(i.innerHeight,r.bottom)-10||o.bottom<Math.max(0,r.top)+10)return null;let s=this.view.textDirection==At.RTL,a=s,h=!1,c,d="",f="",m=r.left,v=i.innerWidth-r.right;if(a&&m<Math.min(n.width,v)?a=!1:!a&&v<Math.min(n.width,m)&&(a=!0),n.width<=(a?m:v))d=Math.max(0,Math.min(o.top,i.innerHeight-n.height))-r.top+"px",c=Math.min(400,a?m:v)+"px";else{h=!0,c=Math.min(400,(s?r.right:i.innerWidth-r.left)-30)+"px";let S=i.innerHeight-r.bottom;S>=n.height||S>r.top?d=o.bottom-r.top+"px":f=r.bottom-o.top+"px"}return{top:d,bottom:f,maxWidth:c,class:h?s?"left-narrow":"right-narrow":a?"left":"right"}}positionInfo(t){this.info&&(t?(this.info.style.top=t.top,this.info.style.bottom=t.bottom,this.info.style.maxWidth=t.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+t.class):this.info.style.top="-1e6px")}createListBox(t,i,r){const n=document.createElement("ul");n.id=i,n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let o=r.from;o<r.to;o++){let{completion:s,match:a}=t[o];const h=n.appendChild(document.createElement("li"));h.id=i+"-"+o,h.setAttribute("role","option");let c=this.optionClass(s);c&&(h.className=c);for(let d of this.optionContent){let f=d(s,this.view.state,a);f&&h.appendChild(f)}}return r.from&&n.classList.add("cm-completionListIncompleteTop"),r.to<t.length&&n.classList.add("cm-completionListIncompleteBottom"),n}}function e1(e){return t=>new t1(t,e)}function i1(e,t){let i=e.getBoundingClientRect(),r=t.getBoundingClientRect();r.top<i.top?e.scrollTop-=i.top-r.top:r.bottom>i.bottom&&(e.scrollTop+=r.bottom-i.bottom)}function Mp(e){return(e.boost||0)*100+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}function r1(e,t){let i=[],r=0;for(let a of e)if(a.hasResult())if(a.result.filter===!1){let h=a.result.getMatch;for(let c of a.result.options){let d=[1e9-r++];if(h)for(let f of h(c))d.push(f);i.push(new Qp(c,a,d))}}else{let h=new Hy(t.sliceDoc(a.from,a.to)),c;for(let d of a.result.options)(c=h.match(d.label))&&(d.boost!=null&&(c[0]+=d.boost),i.push(new Qp(d,a,c)))}let n=[],o=null,s=t.facet(Le).compareCompletions;for(let a of i.sort((h,c)=>c.match[0]-h.match[0]||s(h.completion,c.completion)))!o||o.label!=a.completion.label||o.detail!=a.completion.detail||o.type!=null&&a.completion.type!=null&&o.type!=a.completion.type||o.apply!=a.completion.apply?n.push(a):Mp(a.completion)>Mp(o)&&(n[n.length-1]=a),o=a.completion;return n}class ln{constructor(t,i,r,n,o){this.options=t,this.attrs=i,this.tooltip=r,this.timestamp=n,this.selected=o}setSelected(t,i){return t==this.selected||t>=this.options.length?this:new ln(this.options,Bp(i,t),this.tooltip,this.timestamp,t)}static build(t,i,r,n,o){let s=r1(t,i);if(!s.length)return null;let a=i.facet(Le).selectOnOpen?0:-1;if(n&&n.selected!=a&&n.selected!=-1){let h=n.options[n.selected].completion;for(let c=0;c<s.length;c++)if(s[c].completion==h){a=c;break}}return new ln(s,Bp(r,a),{pos:t.reduce((h,c)=>c.hasResult()?Math.min(h,c.from):h,1e8),create:e1(Qe),above:o.aboveCursor},n?n.timestamp:Date.now(),a)}map(t){return new ln(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:t.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}class As{constructor(t,i,r){this.active=t,this.id=i,this.open=r}static start(){return new As(o1,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(t){let{state:i}=t,r=i.facet(Le),n=(r.override||i.languageDataAt("autocomplete",Di(i)).map(Vy)).map(s=>(this.active.find(a=>a.source==s)||new ge(s,this.active.some(a=>a.state!=0)?1:0)).update(t,r));n.length==this.active.length&&n.every((s,a)=>s==this.active[a])&&(n=this.active);let o=t.selection||n.some(s=>s.hasResult()&&t.changes.touchesRange(s.from,s.to))||!n1(n,this.active)?ln.build(n,i,this.id,this.open,r):this.open&&t.docChanged?this.open.map(t.changes):this.open;!o&&n.every(s=>s.state!=1)&&n.some(s=>s.hasResult())&&(n=n.map(s=>s.hasResult()?new ge(s.source,0):s));for(let s of t.effects)s.is(Yp)&&(o=o&&o.setSelected(s.value,this.id));return n==this.active&&o==this.open?this:new As(n,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:s1}}function n1(e,t){if(e==t)return!0;for(let i=0,r=0;;){for(;i<e.length&&!e[i].hasResult;)i++;for(;r<t.length&&!t[r].hasResult;)r++;let n=i==e.length,o=r==t.length;if(n||o)return n==o;if(e[i++].result!=t[r++].result)return!1}}const s1={"aria-autocomplete":"list"};function Bp(e,t){let i={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(i["aria-activedescendant"]=e+"-"+t),i}const o1=[];function Il(e){return e.isUserEvent("input.type")?"input":e.isUserEvent("delete.backward")?"delete":null}class ge{constructor(t,i,r=-1){this.source=t,this.state=i,this.explicitPos=r}hasResult(){return!1}update(t,i){let r=Il(t),n=this;r?n=n.handleUserEvent(t,r,i):t.docChanged?n=n.handleChange(t):t.selection&&n.state!=0&&(n=new ge(n.source,0));for(let o of t.effects)if(o.is(Ll))n=new ge(n.source,1,o.value?Di(t.state):-1);else if(o.is(ks))n=new ge(n.source,0);else if(o.is(Rp))for(let s of o.value)s.source==n.source&&(n=s);return n}handleUserEvent(t,i,r){return i=="delete"||!r.activateOnTyping?this.map(t.changes):new ge(this.source,1)}handleChange(t){return t.changes.touchesRange(Di(t.startState))?new ge(this.source,0):this.map(t.changes)}map(t){return t.empty||this.explicitPos<0?this:new ge(this.source,this.state,t.mapPos(this.explicitPos))}}class an extends ge{constructor(t,i,r,n,o){super(t,2,i),this.result=r,this.from=n,this.to=o}hasResult(){return!0}handleUserEvent(t,i,r){var n;let o=t.changes.mapPos(this.from),s=t.changes.mapPos(this.to,1),a=Di(t.state);if((this.explicitPos<0?a<=o:a<this.from)||a>s||i=="delete"&&Di(t.startState)==this.from)return new ge(this.source,i=="input"&&r.activateOnTyping?1:0);let h=this.explicitPos<0?-1:t.changes.mapPos(this.explicitPos),c;return l1(this.result.validFor,t.state,o,s)?new an(this.source,h,this.result,o,s):this.result.update&&(c=this.result.update(this.result,o,s,new _p(t.state,a,h>=0)))?new an(this.source,h,c,c.from,(n=c.to)!==null&&n!==void 0?n:Di(t.state)):new ge(this.source,1,h)}handleChange(t){return t.changes.touchesRange(this.from,this.to)?new ge(this.source,0):this.map(t.changes)}map(t){return t.empty?this:new an(this.source,this.explicitPos<0?-1:t.mapPos(this.explicitPos),this.result,t.mapPos(this.from),t.mapPos(this.to,1))}}function l1(e,t,i,r){if(!e)return!1;let n=t.sliceDoc(i,r);return typeof e=="function"?e(n,i,r,t):Xp(e,!0).test(n)}const Ll=nt.define(),ks=nt.define(),Rp=nt.define({map(e,t){return e.map(i=>i.map(t))}}),Yp=nt.define(),Qe=Rt.define({create(){return As.start()},update(e,t){return e.update(t)},provide:e=>[qo.from(e,t=>t.tooltip),tt.contentAttributes.from(e,t=>t.attrs)]});function _s(e,t="option"){return i=>{let r=i.state.field(Qe,!1);if(!r||!r.open||Date.now()-r.open.timestamp<i.state.facet(Le).interactionDelay)return!1;let n=1,o;t=="page"&&(o=qm(i,r.open.tooltip))&&(n=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:s}=r.open.options,a=r.open.selected>-1?r.open.selected+n*(e?1:-1):e?0:s-1;return a<0?a=t=="page"?0:s-1:a>=s&&(a=t=="page"?s-1:0),i.dispatch({effects:Yp.of(a)}),!0}}const a1=e=>{let t=e.state.field(Qe,!1);return e.state.readOnly||!t||!t.open||t.open.selected<0||Date.now()-t.open.timestamp<e.state.facet(Le).interactionDelay?!1:($p(e,t.open.options[t.open.selected]),!0)},h1=e=>e.state.field(Qe,!1)?(e.dispatch({effects:Ll.of(!0)}),!0):!1,u1=e=>{let t=e.state.field(Qe,!1);return!t||!t.active.some(i=>i.state!=0)?!1:(e.dispatch({effects:ks.of(null)}),!0)};class c1{constructor(t,i){this.active=t,this.context=i,this.time=Date.now(),this.updates=[],this.done=void 0}}const Wp=50,p1=50,d1=1e3,f1=Nt.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let t of e.state.field(Qe).active)t.state==1&&this.startQuery(t)}update(e){let t=e.state.field(Qe);if(!e.selectionSet&&!e.docChanged&&e.startState.field(Qe)==t)return;let i=e.transactions.some(r=>(r.selection||r.docChanged)&&!Il(r));for(let r=0;r<this.running.length;r++){let n=this.running[r];if(i||n.updates.length+e.transactions.length>p1&&Date.now()-n.time>d1){for(let o of n.context.abortListeners)try{o()}catch(s){Se(this.view.state,s)}n.context.abortListeners=null,this.running.splice(r--,1)}else n.updates.push(...e.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=t.active.some(r=>r.state==1&&!this.running.some(n=>n.active.source==r.source))?setTimeout(()=>this.startUpdate(),Wp):-1,this.composing!=0)for(let r of e.transactions)Il(r)=="input"?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:e}=this.view,t=e.field(Qe);for(let i of t.active)i.state==1&&!this.running.some(r=>r.active.source==i.source)&&this.startQuery(i)}startQuery(e){let{state:t}=this.view,i=Di(t),r=new _p(t,i,e.explicitPos==i),n=new c1(e,r);this.running.push(n),Promise.resolve(e.source(r)).then(o=>{n.context.aborted||(n.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:ks.of(null)}),Se(this.view.state,o)})}scheduleAccept(){this.running.every(e=>e.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),Wp))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],i=this.view.state.facet(Le);for(let r=0;r<this.running.length;r++){let n=this.running[r];if(n.done===void 0)continue;if(this.running.splice(r--,1),n.done){let s=new an(n.active.source,n.active.explicitPos,n.done,n.done.from,(e=n.done.to)!==null&&e!==void 0?e:Di(n.updates.length?n.updates[0].startState:this.view.state));for(let a of n.updates)s=s.update(a,i);if(s.hasResult()){t.push(s);continue}}let o=this.view.state.field(Qe).active.find(s=>s.source==n.active.source);if(o&&o.state==1)if(n.done==null){let s=new ge(n.active.source,0);for(let a of n.updates)s=s.update(a,i);s.state!=1&&t.push(s)}else this.startQuery(o)}t.length&&this.view.dispatch({effects:Rp.of(t)})}},{eventHandlers:{blur(){let e=this.view.state.field(Qe,!1);e&&e.tooltip&&this.view.state.facet(Le).closeOnBlur&&this.view.dispatch({effects:ks.of(null)})},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Ll.of(!1)}),20),this.composing=0}}}),jp=tt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:`${400}px`,boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:`${30}px`},".cm-completionInfo.cm-completionInfo-right-narrow":{left:`${30}px`},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class m1{constructor(t,i,r,n){this.field=t,this.line=i,this.from=r,this.to=n}}class Ql{constructor(t,i,r){this.field=t,this.from=i,this.to=r}map(t){let i=t.mapPos(this.from,-1,Vt.TrackDel),r=t.mapPos(this.to,1,Vt.TrackDel);return i==null||r==null?null:new Ql(this.field,i,r)}}class Xl{constructor(t,i){this.lines=t,this.fieldPositions=i}instantiate(t,i){let r=[],n=[i],o=t.doc.lineAt(i),s=/^\s*/.exec(o.text)[0];for(let h of this.lines){if(r.length){let c=s,d=/^\t*/.exec(h)[0].length;for(let f=0;f<d;f++)c+=t.facet(tn);n.push(i+c.length-d),h=c+h.slice(d)}r.push(h),i+=h.length+1}let a=this.fieldPositions.map(h=>new Ql(h.field,n[h.line]+h.from,n[h.line]+h.to));return{text:r,ranges:a}}static parse(t){let i=[],r=[],n=[],o;for(let s of t.split(/\r\n?|\n/)){for(;o=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(s);){let a=o[1]?+o[1]:null,h=o[2]||o[3]||"",c=-1;for(let d=0;d<i.length;d++)(a!=null?i[d].seq==a:h?i[d].name==h:!1)&&(c=d);if(c<0){let d=0;for(;d<i.length&&(a==null||i[d].seq!=null&&i[d].seq<a);)d++;i.splice(d,0,{seq:a,name:h}),c=d;for(let f of n)f.field>=c&&f.field++}n.push(new m1(c,r.length,o.index,o.index+h.length)),s=s.slice(0,o.index)+h+s.slice(o.index+o[0].length)}for(let a;a=/([$#])\\{/.exec(s);){s=s.slice(0,a.index)+a[1]+"{"+s.slice(a.index+a[0].length);for(let h of n)h.line==r.length&&h.from>a.index&&(h.from--,h.to--)}r.push(s)}return new Xl(r,n)}}let O1=et.widget({widget:new class extends oi{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),g1=et.mark({class:"cm-snippetField"});class cr{constructor(t,i){this.ranges=t,this.active=i,this.deco=et.set(t.map(r=>(r.from==r.to?O1:g1).range(r.from,r.to)))}map(t){let i=[];for(let r of this.ranges){let n=r.map(t);if(!n)return null;i.push(n)}return new cr(i,this.active)}selectionInsideField(t){return t.ranges.every(i=>this.ranges.some(r=>r.field==this.active&&r.from<=i.from&&r.to>=i.to))}}const hn=nt.define({map(e,t){return e&&e.map(t)}}),y1=nt.define(),un=Rt.define({create(){return null},update(e,t){for(let i of t.effects){if(i.is(hn))return i.value;if(i.is(y1)&&e)return new cr(e.ranges,i.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:e=>tt.decorations.from(e,t=>t?t.deco:et.none)});function $l(e,t){return Y.create(e.filter(i=>i.field==t).map(i=>Y.range(i.from,i.to)))}function x1(e){let t=Xl.parse(e);return(i,r,n,o)=>{let{text:s,ranges:a}=t.instantiate(i.state,n),h={changes:{from:n,to:o,insert:yt.of(s)},scrollIntoView:!0};if(a.length&&(h.selection=$l(a,0)),a.length>1){let c=new cr(a,0),d=h.effects=[hn.of(c)];i.state.field(un,!1)===void 0&&d.push(nt.appendConfig.of([un,w1,b1,jp]))}i.dispatch(i.state.update(h))}}function Zp(e){return({state:t,dispatch:i})=>{let r=t.field(un,!1);if(!r||e<0&&r.active==0)return!1;let n=r.active+e,o=e>0&&!r.ranges.some(s=>s.field==n+e);return i(t.update({selection:$l(r.ranges,n),effects:hn.of(o?null:new cr(r.ranges,n))})),!0}}const v1=({state:e,dispatch:t})=>e.field(un,!1)?(t(e.update({effects:hn.of(null)})),!0):!1,P1=Zp(1),C1=Zp(-1),S1=[{key:"Tab",run:P1,shift:C1},{key:"Escape",run:v1}],zp=H.define({combine(e){return e.length?e[0]:S1}}),w1=Li.highest(Zr.compute([zp],e=>e.facet(zp)));function Re(e,t){return Object.assign(Object.assign({},t),{apply:x1(e)})}const b1=tt.domEventHandlers({mousedown(e,t){let i=t.state.field(un,!1),r;if(!i||(r=t.posAtCoords({x:e.clientX,y:e.clientY}))==null)return!1;let n=i.ranges.find(o=>o.from<=r&&o.to>=r);return!n||n.field==i.active?!1:(t.dispatch({selection:$l(i.ranges,n.field),effects:hn.of(i.ranges.some(o=>o.field>n.field)?new cr(i.ranges,n.field):null)}),!0)}}),Is={brackets:["(","[","{","'",'"'],before:")]}:;>"},Yi=nt.define({map(e,t){let i=t.mapPos(e,-1,Vt.TrackAfter);return i==null?void 0:i}}),Nl=nt.define({map(e,t){return t.mapPos(e)}}),Fl=new class extends Xi{};Fl.startSide=1,Fl.endSide=-1;const qp=Rt.define({create(){return xt.empty},update(e,t){if(t.selection){let i=t.state.doc.lineAt(t.selection.main.head).from,r=t.startState.doc.lineAt(t.startState.selection.main.head).from;i!=t.changes.mapPos(r,-1)&&(e=xt.empty)}e=e.map(t.changes);for(let i of t.effects)i.is(Yi)?e=e.update({add:[Fl.range(i.value,i.value+1)]}):i.is(Nl)&&(e=e.update({filter:r=>r!=i.value}));return e}});function D1(){return[T1,qp]}const Ml="()[]{}<>";function Up(e){for(let t=0;t<Ml.length;t+=2)if(Ml.charCodeAt(t)==e)return Ml.charAt(t+1);return Gs(e<128?e:e+1)}function Gp(e,t){return e.languageDataAt("closeBrackets",t)[0]||Is}const E1=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),T1=tt.inputHandler.of((e,t,i,r)=>{if((E1?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let n=e.state.selection.main;if(r.length>2||r.length==2&&Pe(Gt(r,0))==1||t!=n.from||i!=n.to)return!1;let o=_1(e.state,r);return o?(e.dispatch(o),!0):!1}),A1=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=Gp(e,e.selection.main.head).brackets||Is.brackets,r=null,n=e.changeByRange(o=>{if(o.empty){let s=I1(e.doc,o.head);for(let a of i)if(a==s&&Ls(e.doc,o.head)==Up(Gt(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:Y.cursor(o.head-a.length)}}return{range:r=o}});return r||t(e.update(n,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},k1=[{key:"Backspace",run:A1}];function _1(e,t){let i=Gp(e,e.selection.main.head),r=i.brackets||Is.brackets;for(let n of r){let o=Up(Gt(n,0));if(t==n)return o==n?X1(e,n,r.indexOf(n+n+n)>-1):L1(e,n,o,i.before||Is.before);if(t==o&&Vp(e,e.selection.main.from))return Q1(e,n,o)}return null}function Vp(e,t){let i=!1;return e.field(qp).between(0,e.doc.length,r=>{r==t&&(i=!0)}),i}function Ls(e,t){let i=e.sliceString(t,t+2);return i.slice(0,Pe(Gt(i,0)))}function I1(e,t){let i=e.sliceString(t-2,t);return Pe(Gt(i,0))==i.length?i:i.slice(1)}function L1(e,t,i,r){let n=null,o=e.changeByRange(s=>{if(!s.empty)return{changes:[{insert:t,from:s.from},{insert:i,from:s.to}],effects:Yi.of(s.to+t.length),range:Y.range(s.anchor+t.length,s.head+t.length)};let a=Ls(e.doc,s.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:t+i,from:s.head},effects:Yi.of(s.head+t.length),range:Y.cursor(s.head+t.length)}:{range:n=s}});return n?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Q1(e,t,i){let r=null,n=e.selection.ranges.map(o=>o.empty&&Ls(e.doc,o.head)==i?Y.cursor(o.head+i.length):r=o);return r?null:e.update({selection:Y.create(n,e.selection.mainIndex),scrollIntoView:!0,effects:e.selection.ranges.map(({from:o})=>Nl.of(o))})}function X1(e,t,i){let r=null,n=e.changeByRange(o=>{if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:t,from:o.to}],effects:Yi.of(o.to+t.length),range:Y.range(o.anchor+t.length,o.head+t.length)};let s=o.head,a=Ls(e.doc,s);if(a==t){if(Hp(e,s))return{changes:{insert:t+t,from:s},effects:Yi.of(s+t.length),range:Y.cursor(s+t.length)};if(Vp(e,s)){let h=i&&e.sliceDoc(s,s+t.length*3)==t+t+t;return{range:Y.cursor(s+t.length*(h?3:1)),effects:Nl.of(s)}}}else{if(i&&e.sliceDoc(s-2*t.length,s)==t+t&&Hp(e,s-2*t.length))return{changes:{insert:t+t+t+t,from:s},effects:Yi.of(s+t.length),range:Y.cursor(s+t.length)};if(e.charCategorizer(s)(a)!=Tt.Word){let h=e.sliceDoc(s-1,s);if(h!=t&&e.charCategorizer(s)(h)!=Tt.Word&&!$1(e,s,t))return{changes:{insert:t+t,from:s},effects:Yi.of(s+t.length),range:Y.cursor(s+t.length)}}}return{range:r=o}});return r?null:e.update(n,{scrollIntoView:!0,userEvent:"input.type"})}function Hp(e,t){let i=Xt(e).resolveInner(t+1);return i.parent&&i.from==t}function $1(e,t,i){let r=Xt(e).resolveInner(t,-1);for(let n=0;n<5;n++){if(e.sliceDoc(r.from,r.from+i.length)==i){let s=r.firstChild;for(;s&&s.from==r.from&&s.to-s.from>i.length;){if(e.sliceDoc(s.to-i.length,s.to)==i)return!1;s=s.firstChild}return!0}let o=r.to==t&&r.parent;if(!o)break;r=o}return!1}function N1(e={}){return[Qe,Le.of(e),f1,F1,jp]}const Jp=[{key:"Ctrl-Space",run:h1},{key:"Escape",run:u1},{key:"ArrowDown",run:_s(!0)},{key:"ArrowUp",run:_s(!1)},{key:"PageDown",run:_s(!0,"page")},{key:"PageUp",run:_s(!1,"page")},{key:"Enter",run:a1}],F1=Li.highest(Zr.computeN([Le],e=>e.facet(Le).defaultKeymap?[Jp]:[]));class M1{constructor(t,i,r){this.from=t,this.to=i,this.diagnostic=r}}class Wi{constructor(t,i,r){this.diagnostics=t,this.panel=i,this.selected=r}static init(t,i,r){let n=t,o=r.facet(dr).markerFilter;o&&(n=o(n));let s=et.set(n.map(a=>a.from==a.to||a.from==a.to-1&&r.doc.lineAt(a.from).to==a.from?et.widget({widget:new G1(a),diagnostic:a}).range(a.from):et.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity},diagnostic:a}).range(a.from,a.to)),!0);return new Wi(s,i,pr(s))}}function pr(e,t=null,i=0){let r=null;return e.between(i,1e9,(n,o,{spec:s})=>{if(!(t&&s.diagnostic!=t))return r=new M1(n,o,s.diagnostic),!1}),r}function B1(e,t){return!!(e.effects.some(i=>i.is(Bl))||e.changes.touchesRange(t.pos))}function Kp(e,t){return e.field(De,!1)?t:t.concat(nt.appendConfig.of([De,tt.decorations.compute([De],i=>{let{selected:r,panel:n}=i.field(De);return!r||!n||r.from==r.to?et.none:et.set([Y1.range(r.from,r.to)])}),zm(W1,{hideOn:B1}),H1]))}function R1(e,t){return{effects:Kp(e,[Bl.of(t)])}}const Bl=nt.define(),Rl=nt.define(),td=nt.define(),De=Rt.define({create(){return new Wi(et.none,null,null)},update(e,t){if(t.docChanged){let i=e.diagnostics.map(t.changes),r=null;if(e.selected){let n=t.changes.mapPos(e.selected.from,1);r=pr(i,e.selected.diagnostic,n)||pr(i,null,n)}e=new Wi(i,e.panel,r)}for(let i of t.effects)i.is(Bl)?e=Wi.init(i.value,e.panel,t.state):i.is(Rl)?e=new Wi(e.diagnostics,i.value?Qs.open:null,e.selected):i.is(td)&&(e=new Wi(e.diagnostics,e.panel,i.value));return e},provide:e=>[Gr.from(e,t=>t.panel),tt.decorations.from(e,t=>t.diagnostics)]}),Y1=et.mark({class:"cm-lintRange cm-lintRange-active"});function W1(e,t,i){let{diagnostics:r}=e.state.field(De),n=[],o=2e8,s=0;r.between(t-(i<0?1:0),t+(i>0?1:0),(h,c,{spec:d})=>{t>=h&&t<=c&&(h==c||(t>h||i>0)&&(t<c||i<0))&&(n.push(d.diagnostic),o=Math.min(h,o),s=Math.max(c,s))});let a=e.state.facet(dr).tooltipFilter;return a&&(n=a(n)),n.length?{pos:o,end:s,above:e.state.doc.lineAt(o).to<s,create(){return{dom:j1(e,n)}}}:null}function j1(e,t){return Ct("ul",{class:"cm-tooltip-lint"},t.map(i=>rd(e,i,!1)))}const Z1=e=>{let t=e.state.field(De,!1);(!t||!t.panel)&&e.dispatch({effects:Kp(e.state,[Rl.of(!0)])});let i=Ur(e,Qs.open);return i&&i.dom.querySelector(".cm-panel-lint ul").focus(),!0},ed=e=>{let t=e.state.field(De,!1);return!t||!t.panel?!1:(e.dispatch({effects:Rl.of(!1)}),!0)},z1=e=>{let t=e.state.field(De,!1);if(!t)return!1;let i=e.state.selection.main,r=t.diagnostics.iter(i.to+1);return!r.value&&(r=t.diagnostics.iter(0),!r.value||r.from==i.from&&r.to==i.to)?!1:(e.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},q1=[{key:"Mod-Shift-m",run:Z1},{key:"F8",run:z1}],U1=Nt.fromClass(class{constructor(e){this.view=e,this.timeout=-1,this.set=!0;let{delay:t}=e.state.facet(dr);this.lintTime=Date.now()+t,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,t)}run(){let e=Date.now();if(e<this.lintTime-10)setTimeout(this.run,this.lintTime-e);else{this.set=!1;let{state:t}=this.view,{sources:i}=t.facet(dr);Promise.all(i.map(r=>Promise.resolve(r(this.view)))).then(r=>{let n=r.reduce((o,s)=>o.concat(s));this.view.state.doc==t.doc&&this.view.dispatch(R1(this.view.state,n))},r=>{Se(this.view.state,r)})}}update(e){let t=e.state.facet(dr);(e.docChanged||t!=e.startState.facet(dr))&&(this.lintTime=Date.now()+t.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,t.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),dr=H.define({combine(e){return Object.assign({sources:e.map(t=>t.source)},ze(e.map(t=>t.config),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:U1});function id(e){let t=[];if(e)t:for(let{name:i}of e){for(let r=0;r<i.length;r++){let n=i[r];if(/[a-zA-Z]/.test(n)&&!t.some(o=>o.toLowerCase()==n.toLowerCase())){t.push(n);continue t}}t.push("")}return t}function rd(e,t,i){var r;let n=i?id(t.actions):[];return Ct("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},Ct("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage():t.message),(r=t.actions)===null||r===void 0?void 0:r.map((o,s)=>{let a=f=>{f.preventDefault();let m=pr(e.state.field(De).diagnostics,t);m&&o.apply(e,m.from,m.to)},{name:h}=o,c=n[s]?h.indexOf(n[s]):-1,d=c<0?h:[h.slice(0,c),Ct("u",h.slice(c,c+1)),h.slice(c+1)];return Ct("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${h}${c<0?"":` (access key "${n[s]})"`}.`},d)}),t.source&&Ct("div",{class:"cm-diagnosticSource"},t.source))}class G1 extends oi{constructor(t){super(),this.diagnostic=t}eq(t){return t.diagnostic==this.diagnostic}toDOM(){return Ct("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class nd{constructor(t,i){this.diagnostic=i,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=rd(t,i,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Qs{constructor(t){this.view=t,this.items=[];let i=n=>{if(n.keyCode==27)ed(this.view),this.view.focus();else if(n.keyCode==38||n.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(n.keyCode==40||n.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(n.keyCode==36)this.moveSelection(0);else if(n.keyCode==35)this.moveSelection(this.items.length-1);else if(n.keyCode==13)this.view.focus();else if(n.keyCode>=65&&n.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],s=id(o.actions);for(let a=0;a<s.length;a++)if(s[a].toUpperCase().charCodeAt(0)==n.keyCode){let h=pr(this.view.state.field(De).diagnostics,o);h&&o.actions[a].apply(t,h.from,h.to)}}else return;n.preventDefault()},r=n=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(n.target)&&this.moveSelection(o)};this.list=Ct("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:i,onclick:r}),this.dom=Ct("div",{class:"cm-panel-lint"},this.list,Ct("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>ed(this.view)},"\xD7")),this.update()}get selectedIndex(){let t=this.view.state.field(De).selected;if(!t)return-1;for(let i=0;i<this.items.length;i++)if(this.items[i].diagnostic==t.diagnostic)return i;return-1}update(){let{diagnostics:t,selected:i}=this.view.state.field(De),r=0,n=!1,o=null;for(t.between(0,this.view.state.doc.length,(s,a,{spec:h})=>{let c=-1,d;for(let f=r;f<this.items.length;f++)if(this.items[f].diagnostic==h.diagnostic){c=f;break}c<0?(d=new nd(this.view,h.diagnostic),this.items.splice(r,0,d),n=!0):(d=this.items[c],c>r&&(this.items.splice(r,c-r),n=!0)),i&&d.diagnostic==i.diagnostic?d.dom.hasAttribute("aria-selected")||(d.dom.setAttribute("aria-selected","true"),o=d):d.dom.hasAttribute("aria-selected")&&d.dom.removeAttribute("aria-selected"),r++});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)n=!0,this.items.pop();this.items.length==0&&(this.items.push(new nd(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),n=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:s,panel:a})=>{s.top<a.top?this.list.scrollTop-=a.top-s.top:s.bottom>a.bottom&&(this.list.scrollTop+=s.bottom-a.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),n&&this.sync()}sync(){let t=this.list.firstChild;function i(){let r=t;t=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;t!=r.dom;)i();t=r.dom.nextSibling}else this.list.insertBefore(r.dom,t);for(;t;)i()}moveSelection(t){if(this.selectedIndex<0)return;let i=this.view.state.field(De),r=pr(i.diagnostics,this.items[t].diagnostic);!r||this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:td.of(r)})}static open(t){return new Qs(t)}}function V1(e,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(e)}</svg>')`}function Yl(e){return V1(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const H1=tt.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Yl("#d11")},".cm-lintRange-warning":{backgroundImage:Yl("orange")},".cm-lintRange-info":{backgroundImage:Yl("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),J1=(()=>[iO(),sO(),Sm(),vg(),zO(),cm(),gm(),Ot.allowMultipleSelections.of(!0),LO(),UO(HO,{fallback:!0}),ng(),D1(),N1(),Xm(),Fm(),Am(),wy(),Zr.of([...k1,...yy,...Wy,...Ag,...WO,...Jp,...q1])])();class Xs{constructor(t,i,r,n,o,s,a,h,c,d=0,f){this.p=t,this.stack=i,this.state=r,this.reducePos=n,this.pos=o,this.score=s,this.buffer=a,this.bufferBase=h,this.curContext=c,this.lookAhead=d,this.parent=f}toString(){return`[${this.stack.filter((t,i)=>i%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(t,i,r=0){let n=t.parser.context;return new Xs(t,[],i,r,r,0,[],0,n?new sd(n,n.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(t,i){this.stack.push(this.state,i,this.bufferBase+this.buffer.length),this.state=t}reduce(t){let i=t>>19,r=t&65535,{parser:n}=this.p,o=n.dynamicPrecedence(r);if(o&&(this.score+=o),i==0){this.pushState(n.getGoto(this.state,r,!0),this.reducePos),r<n.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,4,!0),this.reduceContext(r,this.reducePos);return}let s=this.stack.length-(i-1)*3-(t&262144?6:0),a=this.stack[s-2],h=this.stack[s-1],c=this.bufferBase+this.buffer.length-h;if(r<n.minRepeatTerm||t&131072){let d=n.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,a,d,c+4,!0)}if(t&262144)this.state=this.stack[s];else{let d=this.stack[s-3];this.state=n.getGoto(d,r,!0)}for(;this.stack.length>s;)this.stack.pop();this.reduceContext(r,a)}storeNode(t,i,r,n=4,o=!1){if(t==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let s=this,a=this.buffer.length;if(a==0&&s.parent&&(a=s.bufferBase-s.parent.bufferBase,s=s.parent),a>0&&s.buffer[a-4]==0&&s.buffer[a-1]>-1){if(i==r)return;if(s.buffer[a-2]>=i){s.buffer[a-2]=r;return}}}if(!o||this.pos==r)this.buffer.push(t,i,r,n);else{let s=this.buffer.length;if(s>0&&this.buffer[s-4]!=0)for(;s>0&&this.buffer[s-2]>r;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,n>4&&(n-=4);this.buffer[s]=t,this.buffer[s+1]=i,this.buffer[s+2]=r,this.buffer[s+3]=n}}shift(t,i,r){let n=this.pos;if(t&131072)this.pushState(t&65535,this.pos);else if((t&262144)==0){let o=t,{parser:s}=this.p;(r>this.pos||i<=s.maxNode)&&(this.pos=r,s.stateFlag(o,1)||(this.reducePos=r)),this.pushState(o,n),this.shiftContext(i,n),i<=s.maxNode&&this.buffer.push(i,n,r,4)}else this.pos=r,this.shiftContext(i,n),i<=this.p.parser.maxNode&&this.buffer.push(i,n,r,4)}apply(t,i,r){t&65536?this.reduce(t):this.shift(t,i,r)}useNode(t,i){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=t)&&(this.p.reused.push(t),r++);let n=this.pos;this.reducePos=this.pos=n+t.length,this.pushState(i,n),this.buffer.push(r,n,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,t,this,this.p.stream.reset(this.pos-t.length)))}split(){let t=this,i=t.buffer.length;for(;i>0&&t.buffer[i-2]>t.reducePos;)i-=4;let r=t.buffer.slice(i),n=t.bufferBase+i;for(;t&&n==t.bufferBase;)t=t.parent;return new Xs(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,n,this.curContext,this.lookAhead,t)}recoverByDelete(t,i){let r=t<=this.p.parser.maxNode;r&&this.storeNode(t,this.pos,i,4),this.storeNode(0,this.pos,i,r?8:4),this.pos=this.reducePos=i,this.score-=190}canShift(t){for(let i=new K1(this);;){let r=this.p.parser.stateSlot(i.state,4)||this.p.parser.hasAction(i.state,t);if((r&65536)==0)return!0;if(r==0)return!1;i.reduce(r)}}recoverByInsert(t){if(this.stack.length>=300)return[];let i=this.p.parser.nextStates(this.state);if(i.length>4<<1||this.stack.length>=120){let n=[];for(let o=0,s;o<i.length;o+=2)(s=i[o+1])!=this.state&&this.p.parser.hasAction(s,t)&&n.push(i[o],s);if(this.stack.length<120)for(let o=0;n.length<4<<1&&o<i.length;o+=2){let s=i[o+1];n.some((a,h)=>h&1&&a==s)||n.push(i[o],s)}i=n}let r=[];for(let n=0;n<i.length&&r.length<4;n+=2){let o=i[n+1];if(o==this.state)continue;let s=this.split();s.pushState(o,this.pos),s.storeNode(0,s.pos,s.pos,4,!0),s.shiftContext(i[n],this.pos),s.score-=200,r.push(s)}return r}forceReduce(){let t=this.p.parser.stateSlot(this.state,5);if((t&65536)==0)return!1;let{parser:i}=this.p;if(!i.validAction(this.state,t)){let r=t>>19,n=t&65535,o=this.stack.length-r*3;if(o<0||i.getGoto(this.stack[o],n,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:t}=this.p;return t.data[t.stateSlot(this.state,1)]==65535&&!t.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(t){if(this.state!=t.state||this.stack.length!=t.stack.length)return!1;for(let i=0;i<this.stack.length;i+=3)if(this.stack[i]!=t.stack[i])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(t){return this.p.parser.dialect.flags[t]}shiftContext(t,i){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,t,this,this.p.stream.reset(i)))}reduceContext(t,i){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,t,this,this.p.stream.reset(i)))}emitContext(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(t){if(t!=this.curContext.context){let i=new sd(this.curContext.tracker,t);i.hash!=this.curContext.hash&&this.emitContext(),this.curContext=i}}setLookAhead(t){t>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=t)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class sd{constructor(t,i){this.tracker=t,this.context=i,this.hash=t.strict?t.hash(i):0}}var od;(function(e){e[e.Insert=200]="Insert",e[e.Delete=190]="Delete",e[e.Reduce=100]="Reduce",e[e.MaxNext=4]="MaxNext",e[e.MaxInsertStackDepth=300]="MaxInsertStackDepth",e[e.DampenInsertStackDepth=120]="DampenInsertStackDepth"})(od||(od={}));class K1{constructor(t){this.start=t,this.state=t.state,this.stack=t.stack,this.base=this.stack.length}reduce(t){let i=t&65535,r=t>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let n=this.start.p.parser.getGoto(this.stack[this.base-3],i,!0);this.state=n}}class $s{constructor(t,i,r){this.stack=t,this.pos=i,this.index=r,this.buffer=t.buffer,this.index==0&&this.maybeNext()}static create(t,i=t.bufferBase+t.buffer.length){return new $s(t,i,i-t.bufferBase)}maybeNext(){let t=this.stack.parent;t!=null&&(this.index=this.stack.bufferBase-t.bufferBase,this.stack=t,this.buffer=t.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new $s(this.stack,this.pos,this.index)}}class Ns{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const ld=new Ns;class tx{constructor(t,i){this.input=t,this.ranges=i,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=ld,this.rangeIndex=0,this.pos=this.chunkPos=i[0].from,this.range=i[0],this.end=i[i.length-1].to,this.readNext()}resolveOffset(t,i){let r=this.range,n=this.rangeIndex,o=this.pos+t;for(;o<r.from;){if(!n)return null;let s=this.ranges[--n];o-=r.from-s.to,r=s}for(;i<0?o>r.to:o>=r.to;){if(n==this.ranges.length-1)return null;let s=this.ranges[++n];o+=s.from-r.to,r=s}return o}clipPos(t){if(t>=this.range.from&&t<this.range.to)return t;for(let i of this.ranges)if(i.to>t)return Math.max(t,i.from);return this.end}peek(t){let i=this.chunkOff+t,r,n;if(i>=0&&i<this.chunk.length)r=this.pos+t,n=this.chunk.charCodeAt(i);else{let o=this.resolveOffset(t,1);if(o==null)return-1;if(r=o,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let s=this.rangeIndex,a=this.range;for(;a.to<=r;)a=this.ranges[++s];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-r)),n=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),n}acceptToken(t,i=0){let r=i?this.resolveOffset(i,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=t,this.token.end=r}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:t,chunkPos:i}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=t,this.chunk2Pos=i,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let t=this.input.chunk(this.pos),i=this.pos+t.length;this.chunk=i>this.range.to?t.slice(0,this.range.to-this.pos):t,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(t=1){for(this.chunkOff+=t;this.pos+t>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();t-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=t,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(t,i){if(i?(this.token=i,i.start=t,i.lookAhead=t+1,i.value=i.extended=-1):this.token=ld,this.pos!=t){if(this.pos=t,t==this.end)return this.setDone(),this;for(;t<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;t>=this.range.to;)this.range=this.ranges[++this.rangeIndex];t>=this.chunkPos&&t<this.chunkPos+this.chunk.length?this.chunkOff=t-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(t,i){if(t>=this.chunkPos&&i<=this.chunkPos+this.chunk.length)return this.chunk.slice(t-this.chunkPos,i-this.chunkPos);if(t>=this.chunk2Pos&&i<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(t-this.chunk2Pos,i-this.chunk2Pos);if(t>=this.range.from&&i<=this.range.to)return this.input.read(t,i);let r="";for(let n of this.ranges){if(n.from>=i)break;n.to>t&&(r+=this.input.read(Math.max(n.from,t),Math.min(n.to,i)))}return r}}class Fs{constructor(t,i){this.data=t,this.id=i}token(t,i){ex(this.data,t,i,this.id)}}Fs.prototype.contextual=Fs.prototype.fallback=Fs.prototype.extend=!1;class cn{constructor(t,i={}){this.token=t,this.contextual=!!i.contextual,this.fallback=!!i.fallback,this.extend=!!i.extend}}function ex(e,t,i,r){let n=0,o=1<<r,{parser:s}=i.p,{dialect:a}=s;t:for(;(o&e[n])!=0;){let h=e[n+1];for(let m=n+3;m<h;m+=2)if((e[m+1]&o)>0){let v=e[m];if(a.allows(v)&&(t.token.value==-1||t.token.value==v||s.overrides(v,t.token.value))){t.acceptToken(v);break}}let c=t.next,d=0,f=e[n+2];if(t.next<0&&f>d&&e[h+f*3-3]==65535){n=e[h+f*3-1];continue t}for(;d<f;){let m=d+f>>1,v=h+m+(m<<1),S=e[v],O=e[v+1];if(c<S)f=m;else if(c>=O)d=m+1;else{n=e[v+2],t.advance();continue t}}break}}function Ms(e,t=Uint16Array){if(typeof e!="string")return e;let i=null;for(let r=0,n=0;r<e.length;){let o=0;for(;;){let s=e.charCodeAt(r++),a=!1;if(s==126){o=65535;break}s>=92&&s--,s>=34&&s--;let h=s-32;if(h>=46&&(h-=46,a=!0),o+=h,a)break;o*=46}i?i[n++]=o:i=new t(o)}return i}const Ye=typeof process<"u"&&process.env&&/\bparse\b/.test(process.env.LOG);let Wl=null;var ad;(function(e){e[e.Margin=25]="Margin"})(ad||(ad={}));function hd(e,t,i){let r=e.cursor(zt.IncludeAnonymous);for(r.moveTo(t);;)if(!(i<0?r.childBefore(t):r.childAfter(t)))for(;;){if((i<0?r.to<t:r.from>t)&&!r.type.isError)return i<0?Math.max(0,Math.min(r.to-1,t-25)):Math.min(e.length,Math.max(r.from+1,t+25));if(i<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return i<0?0:e.length}}class ix{constructor(t,i){this.fragments=t,this.nodeSet=i,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let t=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(t){for(this.safeFrom=t.openStart?hd(t.tree,t.from+t.offset,1)-t.offset:t.from,this.safeTo=t.openEnd?hd(t.tree,t.to+t.offset,-1)-t.offset:t.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(t.tree),this.start.push(-t.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(t){if(t<this.nextStart)return null;for(;this.fragment&&this.safeTo<=t;)this.nextFragment();if(!this.fragment)return null;for(;;){let i=this.trees.length-1;if(i<0)return this.nextFragment(),null;let r=this.trees[i],n=this.index[i];if(n==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=r.children[n],s=this.start[i]+r.positions[n];if(s>t)return this.nextStart=s,null;if(o instanceof Ft){if(s==t){if(s<this.safeFrom)return null;let a=s+o.length;if(a<=this.safeTo){let h=o.prop(ct.lookAhead);if(!h||a+h<this.fragment.to)return o}}this.index[i]++,s+o.length>=Math.max(this.safeFrom,t)&&(this.trees.push(o),this.start.push(s),this.index.push(0))}else this.index[i]++,this.nextStart=s+o.length}}}class rx{constructor(t,i){this.stream=i,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=t.tokenizers.map(r=>new Ns)}getActions(t){let i=0,r=null,{parser:n}=t.p,{tokenizers:o}=n,s=n.stateSlot(t.state,3),a=t.curContext?t.curContext.hash:0,h=0;for(let c=0;c<o.length;c++){if((1<<c&s)==0)continue;let d=o[c],f=this.tokens[c];if(!(r&&!d.fallback)&&((d.contextual||f.start!=t.pos||f.mask!=s||f.context!=a)&&(this.updateCachedToken(f,d,t),f.mask=s,f.context=a),f.lookAhead>f.end+25&&(h=Math.max(f.lookAhead,h)),f.value!=0)){let m=i;if(f.extended>-1&&(i=this.addActions(t,f.extended,f.end,i)),i=this.addActions(t,f.value,f.end,i),!d.extend&&(r=f,i>m))break}}for(;this.actions.length>i;)this.actions.pop();return h&&t.setLookAhead(h),!r&&t.pos==this.stream.end&&(r=new Ns,r.value=t.p.parser.eofTerm,r.start=r.end=t.pos,i=this.addActions(t,r.value,r.end,i)),this.mainToken=r,this.actions}getMainToken(t){if(this.mainToken)return this.mainToken;let i=new Ns,{pos:r,p:n}=t;return i.start=r,i.end=Math.min(r+1,n.stream.end),i.value=r==n.stream.end?n.parser.eofTerm:0,i}updateCachedToken(t,i,r){let n=this.stream.clipPos(r.pos);if(i.token(this.stream.reset(n,t),r),t.value>-1){let{parser:o}=r.p;for(let s=0;s<o.specialized.length;s++)if(o.specialized[s]==t.value){let a=o.specializers[s](this.stream.read(t.start,t.end),r);if(a>=0&&r.p.parser.dialect.allows(a>>1)){(a&1)==0?t.value=a>>1:t.extended=a>>1;break}}}else t.value=0,t.end=this.stream.clipPos(n+1)}putAction(t,i,r,n){for(let o=0;o<n;o+=3)if(this.actions[o]==t)return n;return this.actions[n++]=t,this.actions[n++]=i,this.actions[n++]=r,n}addActions(t,i,r,n){let{state:o}=t,{parser:s}=t.p,{data:a}=s;for(let h=0;h<2;h++)for(let c=s.stateSlot(o,h?2:1);;c+=3){if(a[c]==65535)if(a[c+1]==1)c=hi(a,c+2);else{n==0&&a[c+1]==2&&(n=this.putAction(hi(a,c+2),i,r,n));break}a[c]==i&&(n=this.putAction(hi(a,c+1),i,r,n))}return n}}var ud;(function(e){e[e.Distance=5]="Distance",e[e.MaxRemainingPerStep=3]="MaxRemainingPerStep",e[e.MinBufferLengthPrune=500]="MinBufferLengthPrune",e[e.ForceReduceLimit=10]="ForceReduceLimit",e[e.CutDepth=15e3]="CutDepth",e[e.CutTo=9e3]="CutTo"})(ud||(ud={}));class nx{constructor(t,i,r,n){this.parser=t,this.input=i,this.ranges=n,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new tx(i,n),this.tokens=new rx(t,this.stream),this.topTerm=t.top[1];let{from:o}=n[0];this.stacks=[Xs.start(this,t.top[0],o)],this.fragments=r.length&&this.stream.end-o>t.bufferLength*4?new ix(r,t.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let t=this.stacks,i=this.minStackPos,r=this.stacks=[],n,o;for(let s=0;s<t.length;s++){let a=t[s];for(;;){if(this.tokens.mainToken=null,a.pos>i)r.push(a);else{if(this.advanceStack(a,r,t))continue;{n||(n=[],o=[]),n.push(a);let h=this.tokens.getMainToken(a);o.push(h.value,h.end)}}break}}if(!r.length){let s=n&&lx(n);if(s)return this.stackToTree(s);if(this.parser.strict)throw Ye&&n&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+i);this.recovering||(this.recovering=5)}if(this.recovering&&n){let s=this.stoppedAt!=null&&n[0].pos>this.stoppedAt?n[0]:this.runRecovery(n,o,r);if(s)return this.stackToTree(s.forceAll())}if(this.recovering){let s=this.recovering==1?1:this.recovering*3;if(r.length>s)for(r.sort((a,h)=>h.score-a.score);r.length>s;)r.pop();r.some(a=>a.reducePos>i)&&this.recovering--}else if(r.length>1){t:for(let s=0;s<r.length-1;s++){let a=r[s];for(let h=s+1;h<r.length;h++){let c=r[h];if(a.sameState(c)||a.buffer.length>500&&c.buffer.length>500)if((a.score-c.score||a.buffer.length-c.buffer.length)>0)r.splice(h--,1);else{r.splice(s--,1);continue t}}}}this.minStackPos=r[0].pos;for(let s=1;s<r.length;s++)r[s].pos<this.minStackPos&&(this.minStackPos=r[s].pos);return null}stopAt(t){if(this.stoppedAt!=null&&this.stoppedAt<t)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=t}advanceStack(t,i,r){let n=t.pos,{parser:o}=this,s=Ye?this.stackID(t)+" -> ":"";if(this.stoppedAt!=null&&n>this.stoppedAt)return t.forceReduce()?t:null;if(this.fragments){let c=t.curContext&&t.curContext.tracker.strict,d=c?t.curContext.hash:0;for(let f=this.fragments.nodeAt(n);f;){let m=this.parser.nodeSet.types[f.type.id]==f.type?o.getGoto(t.state,f.type.id):-1;if(m>-1&&f.length&&(!c||(f.prop(ct.contextHash)||0)==d))return t.useNode(f,m),Ye&&console.log(s+this.stackID(t)+` (via reuse of ${o.getName(f.type.id)})`),!0;if(!(f instanceof Ft)||f.children.length==0||f.positions[0]>0)break;let v=f.children[0];if(v instanceof Ft&&f.positions[0]==0)f=v;else break}}let a=o.stateSlot(t.state,4);if(a>0)return t.reduce(a),Ye&&console.log(s+this.stackID(t)+` (via always-reduce ${o.getName(a&65535)})`),!0;if(t.stack.length>=15e3)for(;t.stack.length>9e3&&t.forceReduce(););let h=this.tokens.getActions(t);for(let c=0;c<h.length;){let d=h[c++],f=h[c++],m=h[c++],v=c==h.length||!r,S=v?t:t.split();if(S.apply(d,f,m),Ye&&console.log(s+this.stackID(S)+` (via ${(d&65536)==0?"shift":`reduce of ${o.getName(d&65535)}`} for ${o.getName(f)} @ ${n}${S==t?"":", split"})`),v)return!0;S.pos>n?i.push(S):r.push(S)}return!1}advanceFully(t,i){let r=t.pos;for(;;){if(!this.advanceStack(t,null,null))return!1;if(t.pos>r)return cd(t,i),!0}}runRecovery(t,i,r){let n=null,o=!1;for(let s=0;s<t.length;s++){let a=t[s],h=i[s<<1],c=i[(s<<1)+1],d=Ye?this.stackID(a)+" -> ":"";if(a.deadEnd&&(o||(o=!0,a.restart(),Ye&&console.log(d+this.stackID(a)+" (restarted)"),this.advanceFully(a,r))))continue;let f=a.split(),m=d;for(let v=0;f.forceReduce()&&v<10&&(Ye&&console.log(m+this.stackID(f)+" (via force-reduce)"),!this.advanceFully(f,r));v++)Ye&&(m=this.stackID(f)+" -> ");for(let v of a.recoverByInsert(h))Ye&&console.log(d+this.stackID(v)+" (via recover-insert)"),this.advanceFully(v,r);this.stream.end>a.pos?(c==a.pos&&(c++,h=0),a.recoverByDelete(h,c),Ye&&console.log(d+this.stackID(a)+` (via recover-delete ${this.parser.getName(h)})`),cd(a,r)):(!n||n.score<a.score)&&(n=a)}return n}stackToTree(t){return t.close(),Ft.build({buffer:$s.create(t),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:t.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(t){let i=(Wl||(Wl=new WeakMap)).get(t);return i||Wl.set(t,i=String.fromCodePoint(this.nextStackID++)),i+t}}function cd(e,t){for(let i=0;i<t.length;i++){let r=t[i];if(r.pos==e.pos&&r.sameState(e)){t[i].score<e.score&&(t[i]=e);return}}t.push(e)}class sx{constructor(t,i,r){this.source=t,this.flags=i,this.disabled=r}allows(t){return!this.disabled||this.disabled[t]==0}}const jl=e=>e;class ox{constructor(t){this.start=t.start,this.shift=t.shift||jl,this.reduce=t.reduce||jl,this.reuse=t.reuse||jl,this.hash=t.hash||(()=>0),this.strict=t.strict!==!1}}class Bs extends nc{constructor(t){if(super(),this.wrappers=[],t.version!=14)throw new RangeError(`Parser version (${t.version}) doesn't match runtime version (${14})`);let i=t.nodeNames.split(" ");this.minRepeatTerm=i.length;for(let a=0;a<t.repeatNodeCount;a++)i.push("");let r=Object.keys(t.topRules).map(a=>t.topRules[a][1]),n=[];for(let a=0;a<i.length;a++)n.push([]);function o(a,h,c){n[a].push([h,h.deserialize(String(c))])}if(t.nodeProps)for(let a of t.nodeProps){let h=a[0];typeof h=="string"&&(h=ct[h]);for(let c=1;c<a.length;){let d=a[c++];if(d>=0)o(d,h,a[c++]);else{let f=a[c+-d];for(let m=-d;m>0;m--)o(a[c++],h,f);c++}}}this.nodeSet=new Ko(i.map((a,h)=>me.define({name:h>=this.minRepeatTerm?void 0:a,id:h,props:n[h],top:r.indexOf(h)>-1,error:h==0,skipped:t.skippedNodes&&t.skippedNodes.indexOf(h)>-1}))),t.propSources&&(this.nodeSet=this.nodeSet.extend(...t.propSources)),this.strict=!1,this.bufferLength=Ku;let s=Ms(t.tokenData);this.context=t.context,this.specializerSpecs=t.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(dd),this.states=Ms(t.states,Uint32Array),this.data=Ms(t.stateData),this.goto=Ms(t.goto),this.maxTerm=t.maxTerm,this.tokenizers=t.tokenizers.map(a=>typeof a=="number"?new Fs(s,a):a),this.topRules=t.topRules,this.dialects=t.dialects||{},this.dynamicPrecedences=t.dynamicPrecedences||null,this.tokenPrecTable=t.tokenPrec,this.termNames=t.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(t,i,r){let n=new nx(this,t,i,r);for(let o of this.wrappers)n=o(n,t,i,r);return n}getGoto(t,i,r=!1){let n=this.goto;if(i>=n[0])return-1;for(let o=n[i+1];;){let s=n[o++],a=s&1,h=n[o++];if(a&&r)return h;for(let c=o+(s>>1);o<c;o++)if(n[o]==t)return h;if(a)return-1}}hasAction(t,i){let r=this.data;for(let n=0;n<2;n++)for(let o=this.stateSlot(t,n?2:1),s;;o+=3){if((s=r[o])==65535)if(r[o+1]==1)s=r[o=hi(r,o+2)];else{if(r[o+1]==2)return hi(r,o+2);break}if(s==i||s==0)return hi(r,o+1)}return 0}stateSlot(t,i){return this.states[t*6+i]}stateFlag(t,i){return(this.stateSlot(t,0)&i)>0}validAction(t,i){if(i==this.stateSlot(t,4))return!0;for(let r=this.stateSlot(t,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=hi(this.data,r+2);else return!1;if(i==hi(this.data,r+1))return!0}}nextStates(t){let i=[];for(let r=this.stateSlot(t,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=hi(this.data,r+2);else break;if((this.data[r+2]&1)==0){let n=this.data[r+1];i.some((o,s)=>s&1&&o==n)||i.push(this.data[r],n)}}return i}overrides(t,i){let r=pd(this.data,this.tokenPrecTable,i);return r<0||pd(this.data,this.tokenPrecTable,t)<r}configure(t){let i=Object.assign(Object.create(Bs.prototype),this);if(t.props&&(i.nodeSet=this.nodeSet.extend(...t.props)),t.top){let r=this.topRules[t.top];if(!r)throw new RangeError(`Invalid top rule name ${t.top}`);i.top=r}return t.tokenizers&&(i.tokenizers=this.tokenizers.map(r=>{let n=t.tokenizers.find(o=>o.from==r);return n?n.to:r})),t.specializers&&(i.specializers=this.specializers.slice(),i.specializerSpecs=this.specializerSpecs.map((r,n)=>{let o=t.specializers.find(a=>a.from==r.external);if(!o)return r;let s=Object.assign(Object.assign({},r),{external:o.to});return i.specializers[n]=dd(s),s})),t.contextTracker&&(i.context=t.contextTracker),t.dialect&&(i.dialect=this.parseDialect(t.dialect)),t.strict!=null&&(i.strict=t.strict),t.wrap&&(i.wrappers=i.wrappers.concat(t.wrap)),t.bufferLength!=null&&(i.bufferLength=t.bufferLength),i}hasWrappers(){return this.wrappers.length>0}getName(t){return this.termNames?this.termNames[t]:String(t<=this.maxNode&&this.nodeSet.types[t].name||t)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(t){let i=this.dynamicPrecedences;return i==null?0:i[t]||0}parseDialect(t){let i=Object.keys(this.dialects),r=i.map(()=>!1);if(t)for(let o of t.split(" ")){let s=i.indexOf(o);s>=0&&(r[s]=!0)}let n=null;for(let o=0;o<i.length;o++)if(!r[o])for(let s=this.dialects[i[o]],a;(a=this.data[s++])!=65535;)(n||(n=new Uint8Array(this.maxTerm+1)))[a]=1;return new sx(t,r,n)}static deserialize(t){return new Bs(t)}}function hi(e,t){return e[t]|e[t+1]<<16}function pd(e,t,i){for(let r=t,n;(n=e[r])!=65535;r++)if(n==i)return r-t;return-1}function lx(e){let t=null;for(let i of e){let r=i.p.stoppedAt;(i.pos==i.p.stream.end||r!=null&&i.pos>r)&&i.p.parser.stateFlag(i.state,2)&&(!t||t.score<i.score)&&(t=i)}return t}function dd(e){if(e.external){let t=e.extend?1:0;return(i,r)=>e.external(i,r)<<1|t}return e.get}const ax=1,fd=281,md=2,hx=3,Rs=282,ux=4,cx=283,Od=284,px=286,dx=287,fx=5,mx=6,Ox=1,gx=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],gd=125,yx=123,xx=59,yd=47,vx=42,Px=43,Cx=45,Sx=36,wx=96,bx=92,Dx=new ox({start:!1,shift(e,t){return t==fx||t==mx||t==px?e:t==dx},strict:!1}),Ex=new cn((e,t)=>{let{next:i}=e;(i==gd||i==-1||t.context)&&t.canShift(Od)&&e.acceptToken(Od)},{contextual:!0,fallback:!0}),Tx=new cn((e,t)=>{let{next:i}=e,r;gx.indexOf(i)>-1||i==yd&&((r=e.peek(1))==yd||r==vx)||i!=gd&&i!=xx&&i!=-1&&!t.context&&t.canShift(fd)&&e.acceptToken(fd)},{contextual:!0}),Ax=new cn((e,t)=>{let{next:i}=e;if((i==Px||i==Cx)&&(e.advance(),i==e.next)){e.advance();let r=!t.context&&t.canShift(md);e.acceptToken(r?md:hx)}},{contextual:!0}),kx=new cn(e=>{for(let t=!1,i=0;;i++){let{next:r}=e;if(r<0){i&&e.acceptToken(Rs);break}else if(r==wx){i?e.acceptToken(Rs):e.acceptToken(cx,1);break}else if(r==yx&&t){i==1?e.acceptToken(ux,1):e.acceptToken(Rs,-1);break}else if(r==10&&i){e.advance(),e.acceptToken(Rs);break}else r==bx&&e.advance();t=r==Sx,e.advance()}}),_x=new cn((e,t)=>{if(!(e.next!=101||!t.dialectEnabled(Ox))){e.advance();for(let i=0;i<6;i++){if(e.next!="xtends".charCodeAt(i))return;e.advance()}e.next>=57&&e.next<=65||e.next>=48&&e.next<=90||e.next==95||e.next>=97&&e.next<=122||e.next>160||e.acceptToken(ax)}}),Ix=oc({"get set async static":N.modifier,"for while do if else switch try catch finally return throw break continue default case":N.controlKeyword,"in of await yield void typeof delete instanceof":N.operatorKeyword,"let var const function class extends":N.definitionKeyword,"import export from":N.moduleKeyword,"with debugger as new":N.keyword,TemplateString:N.special(N.string),super:N.atom,BooleanLiteral:N.bool,this:N.self,null:N.null,Star:N.modifier,VariableName:N.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":N.function(N.variableName),VariableDefinition:N.definition(N.variableName),Label:N.labelName,PropertyName:N.propertyName,PrivatePropertyName:N.special(N.propertyName),"CallExpression/MemberExpression/PropertyName":N.function(N.propertyName),"FunctionDeclaration/VariableDefinition":N.function(N.definition(N.variableName)),"ClassDeclaration/VariableDefinition":N.definition(N.className),PropertyDefinition:N.definition(N.propertyName),PrivatePropertyDefinition:N.definition(N.special(N.propertyName)),UpdateOp:N.updateOperator,LineComment:N.lineComment,BlockComment:N.blockComment,Number:N.number,String:N.string,ArithOp:N.arithmeticOperator,LogicOp:N.logicOperator,BitOp:N.bitwiseOperator,CompareOp:N.compareOperator,RegExp:N.regexp,Equals:N.definitionOperator,Arrow:N.function(N.punctuation),": Spread":N.punctuation,"( )":N.paren,"[ ]":N.squareBracket,"{ }":N.brace,"InterpolationStart InterpolationEnd":N.special(N.brace),".":N.derefOperator,", ;":N.separator,TypeName:N.typeName,TypeDefinition:N.definition(N.typeName),"type enum interface implements namespace module declare":N.definitionKeyword,"abstract global Privacy readonly override":N.modifier,"is keyof unique infer":N.operatorKeyword,JSXAttributeValue:N.attributeValue,JSXText:N.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":N.angleBracket,"JSXIdentifier JSXNameSpacedName":N.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":N.attributeName}),Lx={__proto__:null,export:18,as:23,from:29,default:32,async:37,function:38,this:48,true:56,false:56,void:66,typeof:70,null:86,super:88,new:122,await:139,yield:141,delete:142,class:152,extends:154,public:197,private:197,protected:197,readonly:199,instanceof:220,in:222,const:224,import:256,keyof:307,unique:311,infer:317,is:351,abstract:371,implements:373,type:375,let:378,var:380,interface:387,enum:391,namespace:397,module:399,declare:403,global:407,for:428,of:437,while:440,with:444,do:448,if:452,else:454,switch:458,case:464,try:470,catch:474,finally:478,return:482,throw:486,break:490,continue:494,debugger:498},Qx={__proto__:null,async:109,get:111,set:113,public:161,private:161,protected:161,static:163,abstract:165,override:167,readonly:173,new:355},Xx={__proto__:null,"<":129},$x=Bs.deserialize({version:14,states:"$8SO`QdOOO'QQ(C|O'#ChO'XOWO'#DVO)dQdO'#D]O)tQdO'#DhO){QdO'#DrO-xQdO'#DxOOQO'#E]'#E]O.]Q`O'#E[O.bQ`O'#E[OOQ(C['#Ef'#EfO0aQ(C|O'#ItO2wQ(C|O'#IuO3eQ`O'#EzO3jQ!bO'#FaOOQ(C['#FS'#FSO3rO#tO'#FSO4QQ&jO'#FhO5bQ`O'#FgOOQ(C['#Iu'#IuOOQ(CW'#It'#ItOOQS'#J^'#J^O5gQ`O'#HpO5lQ(ChO'#HqOOQS'#Ih'#IhOOQS'#Hr'#HrQ`QdOOO){QdO'#DjO5tQ`O'#G[O5yQ&jO'#CmO6XQ`O'#EZO6dQ`O'#EgO6iQ,UO'#FRO7TQ`O'#G[O7YQ`O'#G`O7eQ`O'#G`O7sQ`O'#GcO7sQ`O'#GdO7sQ`O'#GfO5tQ`O'#GiO8dQ`O'#GlO9rQ`O'#CdO:SQ`O'#GyO:[Q`O'#HPO:[Q`O'#HRO`QdO'#HTO:[Q`O'#HVO:[Q`O'#HYO:aQ`O'#H`O:fQ(CjO'#HfO){QdO'#HhO:qQ(CjO'#HjO:|Q(CjO'#HlO5lQ(ChO'#HnO){QdO'#DWOOOW'#Ht'#HtO;XOWO,59qOOQ(C[,59q,59qO=jQtO'#ChO=tQdO'#HuO>XQ`O'#IvO@WQtO'#IvO'dQdO'#IvO@_Q`O,59wO@uQ7[O'#DbOAnQ`O'#E]OA{Q`O'#JROBWQ`O'#JQOBWQ`O'#JQOB`Q`O,5:yOBeQ`O'#JPOBlQaO'#DyO5yQ&jO'#EZOBzQ`O'#EZOCVQpO'#FROOQ(C[,5:S,5:SOC_QdO,5:SOE]Q(C|O,5:^OEyQ`O,5:dOFdQ(ChO'#JOO7YQ`O'#I}OFkQ`O'#I}OFsQ`O,5:xOFxQ`O'#I}OGWQdO,5:vOIWQ&jO'#EWOJeQ`O,5:vOKwQ&jO'#DlOLOQdO'#DqOLYQ7[O,5;PO){QdO,5;POOQS'#Er'#ErOOQS'#Et'#EtO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;ROOQS'#Ex'#ExOLbQdO,5;cOOQ(C[,5;h,5;hOOQ(C[,5;i,5;iONbQ`O,5;iOOQ(C[,5;j,5;jO){QdO'#IPONgQ(ChO,5<TO! RQ&jO,5;RO){QdO,5;fO! kQ!bO'#JVO! YQ!bO'#JVO! rQ!bO'#JVO!!TQ!bO,5;qOOOO,5;{,5;{O!!cQdO'#FcOOOO'#IO'#IOO3rO#tO,5;nO!!jQ!bO'#FeOOQ(C[,5;n,5;nO!#WQ,VO'#CrOOQ(C]'#Cu'#CuO!#kQ`O'#CuO!#pOWO'#CyO!$^Q,VO,5<QO!$eQ`O,5<SO!%tQ&jO'#FrO!&RQ`O'#FsO!&WQ`O'#FsO!&]Q&jO'#FwO!'[Q7[O'#F{O!'}Q,VO'#IqOOQ(C]'#Iq'#IqO!(XQaO'#IpO!(gQ`O'#IoO!(oQ`O'#CqOOQ(C]'#Cs'#CsOOQ(C]'#C|'#C|O!(wQ`O'#DOOJjQ&jO'#FjOJjQ&jO'#FlO!(|Q`O'#FnO!)RQ`O'#FoO!&WQ`O'#FuOJjQ&jO'#FzO!)WQ`O'#E^O!)oQ`O,5<RO`QdO,5>[OOQS'#Ik'#IkOOQS,5>],5>]OOQS-E;p-E;pO!+kQ(C|O,5:UOOQ(CX'#Cp'#CpO!,[Q&kO,5<vOOQO'#Cf'#CfO!,mQ(ChO'#IlO5bQ`O'#IlO:aQ`O,59XO!-OQ!bO,59XO!-WQ&jO,59XO5yQ&jO,59XO!-cQ`O,5:vO!-kQ`O'#GxO!-yQ`O'#JbO){QdO,5;kO!.RQ7[O,5;mO!.WQ`O,5=cO!.]Q`O,5=cO!.bQ`O,5=cO5lQ(ChO,5=cO5tQ`O,5<vO!.pQ`O'#E_O!/UQ7[O'#E`OOQ(CW'#JP'#JPO!/gQ(ChO'#J_O5lQ(ChO,5<zO7sQ`O,5=QOOQP'#Cr'#CrO!/rQ!bO,5<}O!/zQ!cO,5=OO!0VQ`O,5=QO!0[QpO,5=TO:aQ`O'#GnO5tQ`O'#GpO!0dQ`O'#GpO5yQ&jO'#GsO!0iQ`O'#GsOOQS,5=W,5=WO!0nQ`O'#GtO!0vQ`O'#CmO!0{Q`O,59OO!1VQ`O,59OO!3XQdO,59OOOQS,59O,59OO!3fQ(ChO,59OO){QdO,59OO!3qQdO'#G{OOQS'#G|'#G|OOQS'#G}'#G}O`QdO,5=eO!4RQ`O,5=eO){QdO'#DxO`QdO,5=kO`QdO,5=mO!4WQ`O,5=oO`QdO,5=qO!4]Q`O,5=tO!4bQdO,5=zOOQS,5>Q,5>QO){QdO,5>QO5lQ(ChO,5>SOOQS,5>U,5>UO!8cQ`O,5>UOOQS,5>W,5>WO!8cQ`O,5>WOOQS,5>Y,5>YO!8hQpO,59rOOOW-E;r-E;rOOQ(C[1G/]1G/]O!8mQtO,5>aO'dQdO,5>aOOQO,5>f,5>fO!8wQdO'#HuOOQO-E;s-E;sO!9UQ`O,5?bO!9^QtO,5?bO!9eQ`O,5?lOOQ(C[1G/c1G/cO!9mQ!bO'#DTOOQO'#Ix'#IxO){QdO'#IxO!:[Q!bO'#IxO!:yQ!bO'#DcO!;[Q7[O'#DcO!=gQdO'#DcO!=nQ`O'#IwO!=vQ`O,59|O!={Q`O'#EaO!>ZQ`O'#JSO!>cQ`O,5:zO!>yQ7[O'#DcO){QdO,5?mO!?TQ`O'#HzOOQO-E;x-E;xO!9eQ`O,5?lOOQ(CW1G0e1G0eO!@aQ7[O'#D|OOQ(C[,5:e,5:eO){QdO,5:eOIWQ&jO,5:eO!@hQaO,5:eO:aQ`O,5:uO!-OQ!bO,5:uO!-WQ&jO,5:uO5yQ&jO,5:uOOQ(C[1G/n1G/nOOQ(C[1G0O1G0OOOQ(CW'#EV'#EVO){QdO,5?jO!@sQ(ChO,5?jO!AUQ(ChO,5?jO!A]Q`O,5?iO!AeQ`O'#H|O!A]Q`O,5?iOOQ(CW1G0d1G0dO7YQ`O,5?iOOQ(C[1G0b1G0bO!BPQ(C|O1G0bO!CRQ(CyO,5:rOOQ(C]'#Fq'#FqO!CoQ(C}O'#IqOGWQdO1G0bO!EqQ,VO'#IyO!E{Q`O,5:WO!FQQtO'#IzO){QdO'#IzO!F[Q`O,5:]OOQ(C]'#DT'#DTOOQ(C[1G0k1G0kO!FaQ`O1G0kO!HrQ(C|O1G0mO!HyQ(C|O1G0mO!K^Q(C|O1G0mO!KeQ(C|O1G0mO!MlQ(C|O1G0mO!NPQ(C|O1G0mO#!pQ(C|O1G0mO#!wQ(C|O1G0mO#%[Q(C|O1G0mO#%cQ(C|O1G0mO#'WQ(C|O1G0mO#*QQMlO'#ChO#+{QMlO1G0}O#-vQMlO'#IuOOQ(C[1G1T1G1TO#.ZQ(C|O,5>kOOQ(CW-E;}-E;}O#.zQ(C}O1G0mOOQ(C[1G0m1G0mO#1PQ(C|O1G1QO#1pQ!bO,5;sO#1uQ!bO,5;tO#1zQ!bO'#F[O#2`Q`O'#FZOOQO'#JW'#JWOOQO'#H}'#H}O#2eQ!bO1G1]OOQ(C[1G1]1G1]OOOO1G1f1G1fO#2sQMlO'#ItO#2}Q`O,5;}OLbQdO,5;}OOOO-E;|-E;|OOQ(C[1G1Y1G1YOOQ(C[,5<P,5<PO#3SQ!bO,5<POOQ(C],59a,59aOIWQ&jO'#C{OOOW'#Hs'#HsO#3XOWO,59eOOQ(C],59e,59eO){QdO1G1lO!)RQ`O'#IRO#3dQ`O,5<eOOQ(C],5<b,5<bOOQO'#GV'#GVOJjQ&jO,5<pOOQO'#GX'#GXOJjQ&jO,5<rOIWQ&jO,5<tOOQO1G1n1G1nO#3oQqO'#CpO#4SQqO,5<^O#4ZQ`O'#JZO5tQ`O'#JZO#4iQ`O,5<`OJjQ&jO,5<_O#4nQ`O'#FtO#4yQ`O,5<_O#5OQqO'#FqO#5]QqO'#J[O#5gQ`O'#J[OIWQ&jO'#J[O#5lQ`O,5<cOOQ(CW'#Dg'#DgO#5qQ!bO'#F|O!'VQ7[O'#F|O!'VQ7[O'#GOO#6SQ`O'#GPO!&WQ`O'#GSO#6XQ(ChO'#ITO#6dQ7[O,5<gOOQ(C],5<g,5<gO#6kQ7[O'#F|O#6yQ7[O'#F}O#7RQ7[O'#F}OOQ(C],5<u,5<uOJjQ&jO,5?[OJjQ&jO,5?[O#7WQ`O'#IUO#7cQ`O,5?ZO#7kQ`O,59]OOQ(C]'#Ch'#ChO#8[Q,VO,59jOOQ(C],59j,59jO#8}Q,VO,5<UO#9pQ,VO,5<WO#9zQ`O,5<YOOQ(C],5<Z,5<ZO#:PQ`O,5<aO#:UQ,VO,5<fOGWQdO1G1mO#:fQ`O1G1mOOQS1G3v1G3vOOQ(C[1G/p1G/pONbQ`O1G/pOOQS1G2b1G2bOIWQ&jO1G2bO){QdO1G2bOIWQ&jO1G2bO#:kQaO1G2bO#<QQ&jO'#EWOOQ(CW,5?W,5?WO#<[Q(ChO,5?WOOQS1G.s1G.sO:aQ`O1G.sO!-OQ!bO1G.sO!-WQ&jO1G.sO#<mQ`O1G0bO#<rQ`O'#ChO#<}Q`O'#JcO#=VQ`O,5=dO#=[Q`O'#JcO#=aQ`O'#JcO#=iQ`O'#I^O#=wQ`O,5?|O#>PQtO1G1VOOQ(C[1G1X1G1XO5tQ`O1G2}O#>WQ`O1G2}O#>]Q`O1G2}O#>bQ`O1G2}OOQS1G2}1G2}O#>gQ&kO1G2bO7YQ`O'#JQO7YQ`O'#EaO7YQ`O'#IWO#>xQ(ChO,5?yOOQS1G2f1G2fO!0VQ`O1G2lOIWQ&jO1G2iO#?TQ`O1G2iOOQS1G2j1G2jOIWQ&jO1G2jO#?YQaO1G2jO#?bQ7[O'#GhOOQS1G2l1G2lO!'VQ7[O'#IYO!0[QpO1G2oOOQS1G2o1G2oOOQS,5=Y,5=YO#?jQ&kO,5=[O5tQ`O,5=[O#6SQ`O,5=_O5bQ`O,5=_O!-OQ!bO,5=_O!-WQ&jO,5=_O5yQ&jO,5=_O#?{Q`O'#JaO#@WQ`O,5=`OOQS1G.j1G.jO#@]Q(ChO1G.jO#@hQ`O1G.jO#@mQ`O1G.jO5lQ(ChO1G.jO#@uQtO,5@OO#APQ`O,5@OO#A[QdO,5=gO#AcQ`O,5=gO7YQ`O,5@OOOQS1G3P1G3PO`QdO1G3POOQS1G3V1G3VOOQS1G3X1G3XO:[Q`O1G3ZO#AhQdO1G3]O#EcQdO'#H[OOQS1G3`1G3`O#EpQ`O'#HbO:aQ`O'#HdOOQS1G3f1G3fO#ExQdO1G3fO5lQ(ChO1G3lOOQS1G3n1G3nOOQ(CW'#Fx'#FxO5lQ(ChO1G3pO5lQ(ChO1G3rOOOW1G/^1G/^O#IvQpO,5<TO#JOQtO1G3{OOQO1G4Q1G4QO){QdO,5>aO#JYQ`O1G4|O#JbQ`O1G5WO#JjQ`O,5?dOLbQdO,5:{O7YQ`O,5:{O:aQ`O,59}OLbQdO,59}O!-OQ!bO,59}O#JoQMlO,59}OOQO,5:{,5:{O#JyQ7[O'#HvO#KaQ`O,5?cOOQ(C[1G/h1G/hO#KiQ7[O'#H{O#K}Q`O,5?nOOQ(CW1G0f1G0fO!;[Q7[O,59}O#LVQtO1G5XO7YQ`O,5>fOOQ(CW'#ES'#ESO#LaQ(DjO'#ETO!@XQ7[O'#D}OOQO'#Hy'#HyO#L{Q7[O,5:hOOQ(C[,5:h,5:hO#MSQ7[O'#D}O#MeQ7[O'#D}O#MlQ7[O'#EYO#MoQ7[O'#ETO#M|Q7[O'#ETO!@XQ7[O'#ETO#NaQ`O1G0PO#NfQqO1G0POOQ(C[1G0P1G0PO){QdO1G0POIWQ&jO1G0POOQ(C[1G0a1G0aO:aQ`O1G0aO!-OQ!bO1G0aO!-WQ&jO1G0aO#NmQ(C|O1G5UO){QdO1G5UO#N}Q(ChO1G5UO$ `Q`O1G5TO7YQ`O,5>hOOQO,5>h,5>hO$ hQ`O,5>hOOQO-E;z-E;zO$ `Q`O1G5TO$ vQ(C}O,59jO$#xQ(C}O,5<UO$%}Q(C}O,5<WO$(SQ(C}O,5<fOOQ(C[7+%|7+%|O$*_Q(C|O7+%|O$+OQ&jO'#HwO$+YQ`O,5?eOOQ(C]1G/r1G/rO$+bQdO'#HxO$+oQ`O,5?fO$+wQtO,5?fOOQ(C[1G/w1G/wOOQ(C[7+&V7+&VO$,RQMlO,5:^O){QdO7+&iO$,]QMlO,5:UOOQO1G1_1G1_OOQO1G1`1G1`O$,jQ!LQO,5;vOLbQdO,5;uOOQO-E;{-E;{OOQ(C[7+&w7+&wOOOO7+'Q7+'QOOOO1G1i1G1iO$,uQ`O1G1iOOQ(C[1G1k1G1kO$,zQqO,59gOOOW-E;q-E;qOOQ(C]1G/P1G/PO$-RQ(C|O7+'WOOQ(C],5>m,5>mO$-rQ`O,5>mOOQ(C]1G2P1G2PP$-wQ`O'#IRPOQ(C]-E<P-E<PO$.hQ,VO1G2[O$/ZQ,VO1G2^O$/eQqO1G2`OOQ(C]1G1x1G1xO$/lQ`O'#IQO$/zQ`O,5?uO$/zQ`O,5?uO$0SQ`O,5?uO$0_Q`O,5?uOOQO1G1z1G1zO$0mQ,VO1G1yOJjQ&jO1G1yO$0}Q&jO'#ISO$1_Q`O,5?vOIWQ&jO,5?vO$1gQqO,5?vOOQ(C]1G1}1G1}OOQ(CW,5<h,5<hOOQ(CW,5<i,5<iO$1qQ`O,5<iO#5}Q`O,5<iO!-OQ!bO,5<hO$1vQ`O,5<jOOQ(CW,5<k,5<kO$1qQ`O,5<nOOQO,5>o,5>oOOQO-E<R-E<ROOQ(C]1G2R1G2RO!'VQ7[O,5<hO$2OQ`O,5<iO!'VQ7[O,5<jO!'VQ7[O,5<iO$2ZQ,VO1G4vO$2eQ,VO1G4vOOQO,5>p,5>pOOQO-E<S-E<SOOQP1G.w1G.wO!.RQ7[O,59lO){QdO,59lO$2rQ`O1G1tOJjQ&jO1G1{O$2wQ(C|O7+'XOOQ(C[7+'X7+'XOGWQdO7+'XOOQ(C[7+%[7+%[O$3hQqO'#J]O#NaQ`O7+'|O$3rQ`O7+'|O$3zQqO7+'|OOQS7+'|7+'|OIWQ&jO7+'|O){QdO7+'|OIWQ&jO7+'|O$4UQ(CyO'#ChO$4iQ(CyO,5<lO$5ZQ`O,5<lOOQ(CW1G4r1G4rOOQS7+$_7+$_O:aQ`O7+$_O!-OQ!bO7+$_OGWQdO7+%|O$5`Q`O'#I]O$5qQ`O,5?}OOQO1G3O1G3OO5tQ`O,5?}O$5qQ`O,5?}O$5yQ`O,5?}OOQO,5>x,5>xOOQO-E<[-E<[OOQ(C[7+&q7+&qO$6OQ`O7+(iO5lQ(ChO7+(iO5tQ`O7+(iO$6TQ`O7+(iO$6YQaO7+'|OOQ(CW,5>r,5>rOOQ(CW-E<U-E<UOOQS7+(W7+(WO$6hQ(CyO7+(TOIWQ&jO7+(TO$6rQqO7+(UOOQS7+(U7+(UOIWQ&jO7+(UO$6yQ`O'#J`O$7UQ`O,5=SOOQO,5>t,5>tOOQO-E<W-E<WOOQS7+(Z7+(ZO$8OQ7[O'#GqOOQS1G2v1G2vOIWQ&jO1G2vO){QdO1G2vOIWQ&jO1G2vO$8VQaO1G2vO$8eQ&kO1G2vO5lQ(ChO1G2yO#6SQ`O1G2yO5bQ`O1G2yO!-OQ!bO1G2yO!-WQ&jO1G2yO$8vQ`O'#I[O$9RQ`O,5?{O$9ZQ7[O,5?{OOQ(CW1G2z1G2zOOQS7+$U7+$UO$9cQ`O7+$UO5lQ(ChO7+$UO$9hQ`O7+$UO){QdO1G5jO){QdO1G5kO$9mQdO1G3RO$9tQ`O1G3RO$9yQdO1G3RO$:QQ(ChO1G5jOOQS7+(k7+(kO5lQ(ChO7+(uO`QdO7+(wOOQS'#Jf'#JfOOQS'#I_'#I_O$:[QdO,5=vOOQS,5=v,5=vO){QdO'#H]O$:iQ`O'#H_OOQS,5=|,5=|O7YQ`O,5=|OOQS,5>O,5>OOOQS7+)Q7+)QOOQS7+)W7+)WOOQS7+)[7+)[OOQS7+)^7+)^OOQO1G5O1G5OO$:nQMlO1G0gO$:xQ`O1G0gOOQO1G/i1G/iO$;TQMlO1G/iO:aQ`O1G/iOLbQdO'#DcOOQO,5>b,5>bOOQO-E;t-E;tOOQO,5>g,5>gOOQO-E;y-E;yO!-OQ!bO1G/iO:aQ`O,5:iOOQO,5:o,5:oO){QdO,5:oO$;_Q(ChO,5:oO$;jQ(ChO,5:oO!-OQ!bO,5:iOOQO-E;w-E;wOOQ(C[1G0S1G0SO!@XQ7[O,5:iO$;xQ7[O,5:iO$<ZQ(DjO,5:oO$<uQ7[O,5:iO!@XQ7[O,5:oOOQO,5:t,5:tO$<|Q7[O,5:oO$=ZQ(ChO,5:oOOQ(C[7+%k7+%kO#NaQ`O7+%kO#NfQqO7+%kOOQ(C[7+%{7+%{O:aQ`O7+%{O!-OQ!bO7+%{O$=oQ(C|O7+*pO){QdO7+*pOOQO1G4S1G4SO7YQ`O1G4SO$>PQ`O7+*oO$>XQ(C}O1G2[O$@^Q(C}O1G2^O$BcQ(C}O1G1yO$DnQ,VO,5>cOOQO-E;u-E;uO$DxQtO,5>dO){QdO,5>dOOQO-E;v-E;vO$ESQ`O1G5QO$E[QMlO1G0bO$GcQMlO1G0mO$GjQMlO1G0mO$IkQMlO1G0mO$IrQMlO1G0mO$KgQMlO1G0mO$KzQMlO1G0mO$NXQMlO1G0mO$N`QMlO1G0mO%!aQMlO1G0mO%!hQMlO1G0mO%$]QMlO1G0mO%$pQ(C|O<<JTO%%rQMmO1G0mO%'|QMmO'#IqO%)iQMlO1G1QOLbQdO'#F^OOQO'#JX'#JXOOQO1G1b1G1bO%)vQ`O1G1aO%){QMlO,5>kOOOO7+'T7+'TOOOW1G/R1G/ROOQ(C]1G4X1G4XOJjQ&jO7+'zO%*VQ`O,5>lO5tQ`O,5>lOOQO-E<O-E<OO%*eQ`O1G5aO%*eQ`O1G5aO%*mQ`O1G5aO%*xQ,VO7+'eO%+YQqO,5>nO%+dQ`O,5>nOIWQ&jO,5>nOOQO-E<Q-E<QO%+iQqO1G5bO%+sQ`O1G5bOOQ(CW1G2T1G2TO$1qQ`O1G2TOOQ(CW1G2S1G2SO%+{Q`O1G2UOIWQ&jO1G2UOOQ(CW1G2Y1G2YO!-OQ!bO1G2SO#5}Q`O1G2TO%,QQ`O1G2UO%,YQ`O1G2TOJjQ&jO7+*bOOQ(C]1G/W1G/WO%,eQ`O1G/WOOQ(C]7+'`7+'`O%,jQ,VO7+'gO%,zQ(C|O<<JsOOQ(C[<<Js<<JsOIWQ&jO'#IVO%-kQ`O,5?wOOQS<<Kh<<KhOIWQ&jO<<KhO#NaQ`O<<KhO%-sQ`O<<KhO%-{QqO<<KhOIWQ&jO1G2WOOQS<<Gy<<GyO:aQ`O<<GyO%.VQ(C|O<<IhOOQ(C[<<Ih<<IhOOQO,5>w,5>wO%.vQ`O,5>wO%.{Q`O,5>wOOQO-E<Z-E<ZO%/TQ`O1G5iO%/TQ`O1G5iO5tQ`O1G5iO%/]Q`O<<LTOOQS<<LT<<LTO%/bQ`O<<LTO5lQ(ChO<<LTO){QdO<<KhOIWQ&jO<<KhOOQS<<Ko<<KoO$6hQ(CyO<<KoOOQS<<Kp<<KpO$6rQqO<<KpO%/gQ7[O'#IXO%/rQ`O,5?zOLbQdO,5?zOOQS1G2n1G2nO#LaQ(DjO'#ETO!@XQ7[O'#GrOOQO'#IZ'#IZO%/zQ7[O,5=]OOQS,5=],5=]O%0RQ7[O'#ETO%0^Q7[O'#ETO%0uQ7[O'#ETO%1PQ7[O'#GrO%1bQ`O7+(bO%1gQ`O7+(bO%1oQqO7+(bOOQS7+(b7+(bOIWQ&jO7+(bO){QdO7+(bOIWQ&jO7+(bO%1yQaO7+(bOOQS7+(e7+(eO5lQ(ChO7+(eO#6SQ`O7+(eO5bQ`O7+(eO!-OQ!bO7+(eO%2XQ`O,5>vOOQO-E<Y-E<YOOQO'#Gu'#GuO%2dQ`O1G5gO5lQ(ChO<<GpOOQS<<Gp<<GpO%2lQ`O<<GpO%2qQ`O7++UO%2vQ`O7++VOOQS7+(m7+(mO%2{Q`O7+(mO%3QQdO7+(mO%3XQ`O7+(mO){QdO7++UO){QdO7++VOOQS<<La<<LaOOQS<<Lc<<LcOOQS-E<]-E<]OOQS1G3b1G3bO%3^Q`O,5=wOOQS,5=y,5=yO%3cQ`O1G3hOLbQdO7+&ROOQO7+%T7+%TO%3hQMlO1G5XO:aQ`O7+%TOOQO1G0T1G0TO%3rQ(C|O1G0ZOOQO1G0Z1G0ZO){QdO1G0ZO%3|Q(ChO1G0ZO:aQ`O1G0TO!-OQ!bO1G0TO!@XQ7[O1G0TO%4XQ(ChO1G0ZO%4gQ7[O1G0TO%4xQ(ChO1G0ZO%5^Q(DjO1G0ZO%5hQ7[O1G0TO!@XQ7[O1G0ZOOQ(C[<<IV<<IVOOQ(C[<<Ig<<IgO:aQ`O<<IgO%5oQ(C|O<<N[OOQO7+)n7+)nO%6PQ(C}O7+'eO%8[Q(C}O7+'gO%:gQtO1G4OO%:qQMlO7+%|O%;gQMmO,59jO%=hQMmO,5<UO%?lQMmO,5<WO%A[QMmO,5<fO%B}QMlO7+'WO%C[QMlO7+'XO%CiQ`O,5;xOOQO7+&{7+&{O%CnQ,VO<<KfOOQO1G4W1G4WO%CuQ`O1G4WO%DQQ`O1G4WO%D`Q`O7+*{O%D`Q`O7+*{OIWQ&jO1G4YO%DhQqO1G4YO%DrQ`O7+*|OOQ(CW7+'o7+'oO$1qQ`O7+'pO%DzQqO7+'pOOQ(CW7+'n7+'nO$1qQ`O7+'oO%ERQ`O7+'pOIWQ&jO7+'pO#5}Q`O7+'oO%EWQ,VO<<M|OOQ(C]7+$r7+$rO%EbQqO,5>qOOQO-E<T-E<TO#NaQ`OANASOOQSANASANASOIWQ&jOANASO%ElQ(CyO7+'rOOQSAN=eAN=eO5tQ`O1G4cOOQO1G4c1G4cO%E|Q`O1G4cO%FRQ`O7++TO%FRQ`O7++TO5lQ(ChOANAoO%FZQ`OANAoOOQSANAoANAoO%F`Q`OANASO%FhQqOANASOOQSANAZANAZOOQSANA[ANA[O%FrQ`O,5>sOOQO-E<V-E<VO%F}QMlO1G5fO#6SQ`O,5=^O5bQ`O,5=^O!-OQ!bO,5=^OOQO-E<X-E<XOOQS1G2w1G2wO$<ZQ(DjO,5:oO!@XQ7[O,5=^O%GXQ7[O,5=^O%GjQ7[O,5:oOOQS<<K|<<K|OIWQ&jO<<K|O%1bQ`O<<K|O%GtQ`O<<K|O%G|QqO<<K|O){QdO<<K|OIWQ&jO<<K|OOQS<<LP<<LPO5lQ(ChO<<LPO#6SQ`O<<LPO5bQ`O<<LPO%HWQ7[O1G4bO%H`Q`O7++ROOQSAN=[AN=[O5lQ(ChOAN=[OOQS<<Np<<NpOOQS<<Nq<<NqOOQS<<LX<<LXO%HhQ`O<<LXO%HmQdO<<LXO%HtQ`O<<NpO%HyQ`O<<NqOOQS1G3c1G3cO:aQ`O7+)SO%IOQMlO<<ImOOQO<<Ho<<HoOOQO7+%u7+%uO%3rQ(C|O7+%uO){QdO7+%uOOQO7+%o7+%oO:aQ`O7+%oO!-OQ!bO7+%oO%IYQ(ChO7+%uO!@XQ7[O7+%oO%IeQ(ChO7+%uO%IsQ7[O7+%oO%JUQ(ChO7+%uOOQ(C[AN?RAN?RO%JjQMlO<<JTO%JwQMmO1G1yO%MOQMmO1G2[O& SQMmO1G2^O&!rQMlO<<JsO&#PQMlO<<IhOOQO1G1d1G1dOJjQ&jOANAQOOQO7+)r7+)rO&#^Q`O7+)rO&#iQ`O<<NgO&#qQqO7+)tOOQ(CW<<K[<<K[O$1qQ`O<<K[OOQ(CW<<KZ<<KZO&#{QqO<<K[O$1qQ`O<<KZOOQSG26nG26nO#NaQ`OG26nOOQO7+)}7+)}O5tQ`O7+)}O&$SQ`O<<NoOOQSG27ZG27ZO5lQ(ChOG27ZOIWQ&jOG26nOLbQdO1G4_O&$[Q`O7++QO5lQ(ChO1G2xO#6SQ`O1G2xO5bQ`O1G2xO!-OQ!bO1G2xO!@XQ7[O1G2xO%5^Q(DjO1G0ZO&$dQ7[O1G2xO%1bQ`OANAhOOQSANAhANAhOIWQ&jOANAhO&$uQ`OANAhO&$}QqOANAhOOQSANAkANAkO5lQ(ChOANAkO#6SQ`OANAkOOQO'#Gv'#GvOOQO7+)|7+)|OOQSG22vG22vOOQSANAsANAsO&%XQ`OANAsOOQSAND[AND[OOQSAND]AND]OOQS<<Ln<<LnOOQO<<Ia<<IaO%3rQ(C|O<<IaOOQO<<IZ<<IZO:aQ`O<<IZO){QdO<<IaO!-OQ!bO<<IZO&%^Q(ChO<<IaO!@XQ7[O<<IZO&%iQ(ChO<<IaO&%wQMmO7+'eO&'jQMmO7+'gO&)]Q,VOG26lOOQO<<M^<<M^OOQ(CWAN@vAN@vO$1qQ`OAN@vOOQ(CWAN@uAN@uOOQSLD,YLD,YOOQO<<Mi<<MiOOQSLD,uLD,uO#NaQ`OLD,YO&)mQMlO7+)yOOQO7+(d7+(dO5lQ(ChO7+(dO#6SQ`O7+(dO5bQ`O7+(dO!-OQ!bO7+(dO!@XQ7[O7+(dOOQSG27SG27SO%1bQ`OG27SOIWQ&jOG27SOOQSG27VG27VO5lQ(ChOG27VOOQSG27_G27_OOQOAN>{AN>{OOQOAN>uAN>uO%3rQ(C|OAN>{O:aQ`OAN>uO){QdOAN>{O!-OQ!bOAN>uO&)wQ(ChOAN>{O&*SQ(C}OG26lOOQ(CWG26bG26bOOQS!$( t!$( tOOQO<<LO<<LOO5lQ(ChO<<LOO#6SQ`O<<LOO5bQ`O<<LOO!-OQ!bO<<LOOOQSLD,nLD,nO%1bQ`OLD,nOOQSLD,qLD,qOOQOG24gG24gOOQOG24aG24aO%3rQ(C|OG24gO:aQ`OG24aO){QdOG24gO&,pQ!LRO,5:rO&-gQ$ITO'#IqOOQOANAjANAjO5lQ(ChOANAjO#6SQ`OANAjO5bQ`OANAjOOQS!$(!Y!$(!YOOQOLD*RLD*ROOQOLD){LD){O%3rQ(C|OLD*RO&.ZQMmOG26lO&/|Q!LRO,59jO&0pQ!LRO,5<UO&1dQ!LRO,5<WO&2WQ!LRO,5<fOOQOG27UG27UO5lQ(ChOG27UO#6SQ`OG27UOOQO!$'Mm!$'MmO&2}Q!LRO1G2[O&3qQ!LRO1G2^O&4eQ!LRO1G1yOOQOLD,pLD,pO5lQ(ChOLD,pO&5[Q!LRO7+'eO&6RQ!LRO7+'gOOQO!$(![!$(![O&6xQ!LROG26lOLbQdO'#DrO&7oQtO'#ItOLbQdO'#DjO&7vQ(C|O'#ChO&8aQtO'#ChO&8qQdO,5:vO&:qQ&jO'#EWOLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO'#IPO&<OQ`O,5<TO&=eQ&jO,5;ROLbQdO,5;fO!(wQ`O'#DOO!(wQ`O'#DOO!(wQ`O'#DOOIWQ&jO'#FjO&:qQ&jO'#FjO&<WQ&jO'#FjOIWQ&jO'#FlO&:qQ&jO'#FlO&<WQ&jO'#FlOIWQ&jO'#FzO&:qQ&jO'#FzO&<WQ&jO'#FzOLbQdO,5?mO&8qQdO1G0bO&=lQMlO'#ChOLbQdO1G1lOIWQ&jO,5<pO&:qQ&jO,5<pO&<WQ&jO,5<pOIWQ&jO,5<rO&:qQ&jO,5<rO&<WQ&jO,5<rOIWQ&jO,5<_O&:qQ&jO,5<_O&<WQ&jO,5<_O&8qQdO1G1mOLbQdO7+&iOIWQ&jO1G1yO&:qQ&jO1G1yO&<WQ&jO1G1yOIWQ&jO1G1{O&:qQ&jO1G1{O&<WQ&jO1G1{O&8qQdO7+'XO&8qQdO7+%|O&=vQ`O7+'pOIWQ&jOANAQO&:qQ&jOANAQO&<WQ&jOANAQO&=vQ`O<<K[O&=vQ`OAN@vO&={Q`O'#E[O&>QQ`O'#E[O&>YQ`O'#EzO&>_Q`O'#EgO&>dQ`O'#JRO&>oQ`O'#JPO&>zQ`O,5:vO&?PQ,VO,5<QO&?WQ`O'#FsO&?]Q`O'#FsO&?bQ`O'#FsO&?gQ`O,5<RO&?oQ`O,5:vO&?wQMlO1G0}O&@OQ`O,5<_O&@TQ`O,5<_O&@YQ`O,5<_O&@_Q`O,5<aO&@dQ`O,5<aO&@iQ`O,5<aO&@nQ`O1G1mO&@sQ`O1G0bO&@xQ`O1G2UO&@}Q,VO<<KfO&AUQ,VO<<KfO&A]Q,VO<<KfO&AdQqO7+'pO&AkQ`O7+'pO&ApQqO<<K[O4QQ&jO'#FhO5bQ`O'#FgOBzQ`O'#EZOLbQdO,5;cO!&WQ`O'#FsO!&WQ`O'#FsO!&WQ`O'#FsO!&WQ`O'#FuO!&WQ`O'#FuO!&WQ`O'#FuO&AwQ`O,5<jOJjQ&jO7+'zOJjQ&jO7+'zOJjQ&jO7+'zOIWQ&jO1G2UO&BPQ`O1G2UOIWQ&jO7+'pO!'VQ7[O'#GOO$/eQqO1G2`O$/eQqO1G2`O$/eQqO1G2`O!'VQ7[O,5<jOIWQ&jO,5<tOIWQ&jO,5<tOIWQ&jO,5<t",stateData:"&B}~O'YOS'ZOSTOSUOS~OQTORTOXyO]cO_hObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#dsO#tpO#x^O%PqO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO%axO%nzO%t{O%v|O%x}O%z!OO%}!PO&T!QO&Z!RO&]!SO&_!TO&a!UO&c!VO']PO'fQO'oYO'|aO~OQ[XZ[X_[Xj[Xu[Xv[Xx[X!R[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'W[X'f[X'p[X'w[X'x[X~O!]$lX~P$zOS!WO'U!XO'V!ZO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']![O'fQO'oYO'|aO~O!Q!`O!R!]O!O'jP!O'tP~P'dO!S!mO~P`OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9aO'fQO'oYO'|aO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O'fQO'oYO'|aO~O!Q!rO#U!uO#V!rO']9bO!c'qP~P+{O#W!vO~O!]!wO#W!vO~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!R#bO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_'hX'W'hX!c'hX!O'hX!T'hX%Q'hX!]'hX~P.jO!{#eO#o#eOQ'iXZ'iX_'iXj'iXu'iXv'iXx'iX!R'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX~O#c'iX'W'iX!O'iX!c'iXn'iX!T'iX%Q'iX!]'iX~P0zO!{#eO~O#z#fO$R#jO~O!T#kO#x^O$U#lO$W#nO~O]#qOh$QOj#rOk#qOl#qOq$ROs$SOx#yO!T#zO!_$XO!d#vO#V$YO#t$VO$_$TO$a$UO$d$WO']#pO'b$PO'f#sO'a'cP~O!d$ZO~O!]$]O~O_$^O'W$^O~O']$bO~O!d$ZO']$bO'^$dO'b$PO~Oc$jO!d$ZO']$bO~O#c#TO~O]$sOu$oO!T$lO!d$nO%R$rO']$bO'^$dO^(UP~O!n$tO~Ox$uO!T$vO']$bO~Ox$uO!T$vO%Z$zO']$bO~O']${O~O#dsO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO~Ob%UOc%TO!n%RO%P%SO%c%QO~P7xOb%XOcmO!T%WO!nlO#dsO%PqO%TrO%UrO%XuO%ZvO%^wO%_wO%axO~O`%[O!{%_O%R%YO'^$dO~P8wO!d%`O!g%dO~O!d%eO~O!TSO~O_$^O'T%mO'W$^O~O_$^O'T%pO'W$^O~O_$^O'T%rO'W$^O~OS!WO'U!XO'V%vO~OQ[XZ[Xj[Xu[Xv[Xx[X!R[X!RdX!a[X!b[X!d[X!j[X!{[X!{dX#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X~O!O[X!OdX~P;dO!Q%xO!O&iX!O&nX!R&iX!R&nX~P'dO!R%zO!O'jX~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!R%zO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O!O'jX~P>aO!O&PO~Ox&SO!W&^O!X&VO!Y&VO'^$dO~O]&TOk&TO!Q&WO'g&QO!S'kP!S'vP~P@dO!O'sX!R'sX!]'sX!c'sX'p'sX~O!{'sX#W#PX!S'sX~PA]O!{&_O!O'uX!R'uX~O!R&`O!O'tX~O!O&cO~O!{#eO~PA]OP&gO!T&dO!o&fO']$bO~Oc&lO!d$ZO']$bO~Ou$oO!d$nO~O!S&mO~P`Ou!{Ov!{Ox!|O!b!yO!d!zO'fQOQ!faZ!faj!fa!R!fa!a!fa!j!fa#[!fa#]!fa#^!fa#_!fa#`!fa#a!fa#b!fa#c!fa#e!fa#g!fa#i!fa#j!fa'p!fa'w!fa'x!fa~O_!fa'W!fa!O!fa!c!fan!fa!T!fa%Q!fa!]!fa~PCfO!c&nO~O!]!wO!{&pO'p&oO!R'rX_'rX'W'rX~O!c'rX~PFOO!R&tO!c'qX~O!c&vO~Ox$uO!T$vO#V&wO']$bO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9aO'fQO'oYO'|aO~O]#qOh$QOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO']&{O'b$PO'f#sO~O#W&}O~O]#qOh$QOj#rOk#qOl#qOq$ROs$SOx#yO!T#zO!_$XO!d#vO#V$YO#t$VO$_$TO$a$UO$d$WO']&{O'b$PO'f#sO~O'a'mP~PJjO!Q'RO!c'nP~P){O'g'TO'oYO~OQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!T!bO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O']'cO'fQO'oYO'|;^O~O!d!zO~O!R#bO_$]a'W$]a!c$]a!O$]a!T$]a%Q$]a!]$]a~O#d'jO~PIWO!]'lO!T'yX#w'yX#z'yX$R'yX~Ou'mO~P! YOu'mO!T'yX#w'yX#z'yX$R'yX~O!T'oO#w'sO#z'nO$R'tO~O!Q'wO~PLbO#z#fO$R'zO~OP$eXu$eXx$eX!b$eX'w$eX'x$eX~OPfX!RfX!{fX'afX'a$eX~P!!rOk'|O~OS'}O'U(OO'V(QO~OP(ZOu(SOx(TO'w(VO'x(XO~O'a(RO~P!#{O'a([O~O]#qOh$QOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO'b$PO'f#sO~O!Q(`O'](]O!c'}P~P!$jO#W(bO~O!d(cO~O!Q(hO'](eO!O(OP~P!$jOj(uOx(mO!W(sO!X(lO!Y(lO!d(cO!x(tO$w(oO'^$dO'g(jO~O!S(rO~P!&jO!b!yOP'eXu'eXx'eX'w'eX'x'eX!R'eX!{'eX~O'a'eX#m'eX~P!'cOP(xO!{(wO!R'dX'a'dX~O!R(yO'a'cX~O']${O'a'cP~O'](|O~O!d)RO~O']&{O~Ox$uO!Q!rO!T$vO#U!uO#V!rO']$bO!c'qP~O!]!wO#W)VO~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_!^a!R!^a'W!^a!O!^a!c!^an!^a!T!^a%Q!^a!]!^a~P!)wOP)_O!T&dO!o)^O%Q)]O'b$PO~O!])aO!T'`X_'`X!R'`X'W'`X~O!d$ZO'b$PO~O!d$ZO']$bO'b$PO~O!]!wO#W&}O~O])lO%R)mO'])iO!S(VP~O!R)nO^(UX~O'g'TO~OZ)rO~O^)sO~O!T$lO']$bO'^$dO^(UP~Ox$uO!Q)xO!R&`O!T$vO']$bO!O'tP~O]&ZOk&ZO!Q)yO'g'TO!S'vP~O!R)zO_(RX'W(RX~O!{*OO'b$PO~OP*RO!T#zO'b$PO~O!T*TO~Ou*VO!TSO~O!n*[O~Oc*aO~O'](|O!S(TP~Oc$jO~O%RtO']${O~P8wOZ*gO^*fO~OQTORTO]cObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#x^O%PqO'fQO'oYO'|aO~O!T!bO#t!lO']9aO~P!1_O^*fO_$^O'W$^O~O_*kO#d*mO%T*mO%U*mO~P){O!d%`O~O%t*rO~O!T*tO~O&V*vO&X*wOQ&SaR&SaX&Sa]&Sa_&Sab&Sac&Sah&Saj&Sak&Sal&Saq&Sas&Sax&Sa{&Sa|&Sa}&Sa!T&Sa!_&Sa!d&Sa!g&Sa!h&Sa!i&Sa!j&Sa!k&Sa!n&Sa#d&Sa#t&Sa#x&Sa%P&Sa%R&Sa%T&Sa%U&Sa%X&Sa%Z&Sa%^&Sa%_&Sa%a&Sa%n&Sa%t&Sa%v&Sa%x&Sa%z&Sa%}&Sa&T&Sa&Z&Sa&]&Sa&_&Sa&a&Sa&c&Sa'S&Sa']&Sa'f&Sa'o&Sa'|&Sa!S&Sa%{&Sa`&Sa&Q&Sa~O']*|O~On+PO~O!O&ia!R&ia~P!)wO!Q+TO!O&iX!R&iX~P){O!R%zO!O'ja~O!O'ja~P>aO!R&`O!O'ta~O!RwX!R!ZX!SwX!S!ZX!]wX!]!ZX!d!ZX!{wX'b!ZX~O!]+YO!{+XO!R#TX!R'lX!S#TX!S'lX!]'lX!d'lX'b'lX~O!]+[O!d$ZO'b$PO!R!VX!S!VX~O]&ROk&ROx&SO'g(jO~OQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!T!bO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O'fQO'oYO'|;^O~O']:SO~P!;jO!R+`O!S'kX~O!S+bO~O!]+YO!{+XO!R#TX!S#TX~O!R+cO!S'vX~O!S+eO~O]&ROk&ROx&SO'^$dO'g(jO~O!X+fO!Y+fO~P!>hOx$uO!Q+hO!T$vO']$bO!O&nX!R&nX~O_+lO!W+oO!X+kO!Y+kO!r+sO!s+qO!t+rO!u+pO!x+tO'^$dO'g(jO'o+iO~O!S+nO~P!?iOP+yO!T&dO!o+xO~O!{,PO!R'ra!c'ra_'ra'W'ra~O!]!wO~P!@sO!R&tO!c'qa~Ox$uO!Q,SO!T$vO#U,UO#V,SO']$bO!R&pX!c&pX~O_#Oi!R#Oi'W#Oi!O#Oi!c#Oin#Oi!T#Oi%Q#Oi!]#Oi~P!)wOP;tOu(SOx(TO'w(VO'x(XO~O#W!za!R!za!c!za!{!za!T!za_!za'W!za!O!za~P!BpO#W'eXQ'eXZ'eX_'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX'W'eX'f'eX'p'eX!c'eX!O'eX!T'eXn'eX%Q'eX!]'eX~P!'cO!R,_O'a'mX~P!#{O'a,aO~O!R,bO!c'nX~P!)wO!c,eO~O!O,fO~OQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zi_#Zij#Zi!R#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O#[#Zi~P!FfO#[#PO~P!FfOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO'fQOZ#Zi_#Zi!R#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~Oj#Zi~P!IQOj#RO~P!IQOQ#^Oj#ROu!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO'fQO_#Zi!R#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P!KlOZ#dO!a#TO#a#TO#b#TO#c#TO~P!KlOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO'fQO_#Zi!R#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'w#Zi~P!NdO'w!}O~P!NdOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO'fQO'w!}O_#Zi!R#Zi#i#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'x#Zi~P##OO'x#OO~P##OOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO'fQO'w!}O'x#OO~O_#Zi!R#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P#%jOQ[XZ[Xj[Xu[Xv[Xx[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X!R[X!S[X~O#m[X~P#'}OQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO#i9nO#j9oO'fQO'p#[O'w!}O'x#OO~O#m,hO~P#*XOQ'iXZ'iXj'iXu'iXv'iXx'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX!R'iX~O!{9sO#o9sO#c'iX#m'iX!S'iX~P#,SO_&sa!R&sa'W&sa!c&san&sa!O&sa!T&sa%Q&sa!]&sa~P!)wOQ#ZiZ#Zi_#Zij#Ziv#Zi!R#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'f#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P!BpO_#ni!R#ni'W#ni!O#ni!c#nin#ni!T#ni%Q#ni!]#ni~P!)wO#z,jO~O#z,kO~O!]'lO!{,lO!T$OX#w$OX#z$OX$R$OX~O!Q,mO~O!T'oO#w,oO#z'nO$R,pO~O!R9pO!S'hX~P#*XO!S,qO~O$R,sO~OS'}O'U(OO'V,vO~O],yOk,yO!O,zO~O!RdX!]dX!cdX!c$eX'pdX~P!!rO!c-QO~P!BpO!R-RO!]!wO'p&oO!c'}X~O!c-WO~O!Q(`O']$bO!c'}P~O#W-YO~O!O$eX!R$eX!]$lX~P!!rO!R-ZO!O(OX~P!BpO!]-]O~O!O-_O~Oj-cO!]!wO!d$ZO'b$PO'p&oO~O!])aO~O_$^O!R-hO'W$^O~O!S-jO~P!&jO!X-kO!Y-kO'^$dO'g(jO~Ox-mO'g(jO~O!x-nO~O']${O!R&xX'a&xX~O!R(yO'a'ca~O'a-sO~Ou-tOv-tOx-uOPra'wra'xra!Rra!{ra~O'ara#mra~P#7pOu(SOx(TOP$^a'w$^a'x$^a!R$^a!{$^a~O'a$^a#m$^a~P#8fOu(SOx(TOP$`a'w$`a'x$`a!R$`a!{$`a~O'a$`a#m$`a~P#9XO]-vO~O#W-wO~O'a$na!R$na!{$na#m$na~P!#{O#W-zO~OP.TO!T&dO!o.SO%Q.RO~O]#qOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO'b$PO'f#sO~Oh.VO'].UO~P#:yO!])aO!T'`a_'`a!R'`a'W'`a~O#W.]O~OZ[X!RdX!SdX~O!R.^O!S(VX~O!S.`O~OZ.aO~O].cO'])iO~O!T$lO']$bO^'QX!R'QX~O!R)nO^(Ua~O!c.fO~P!)wO].hO~OZ.iO~O^.jO~OP.TO!T&dO!o.SO%Q.RO'b$PO~O!R)zO_(Ra'W(Ra~O!{.pO~OP.sO!T#zO~O'g'TO!S(SP~OP.}O!T.yO!o.|O%Q.{O'b$PO~OZ/XO!R/VO!S(TX~O!S/YO~O^/[O_$^O'W$^O~O]/]O~O]/^O'](|O~O#c/_O%r/`O~P0zO!{#eO#c/_O%r/`O~O_/aO~P){O_/cO~O%{/gOQ%yiR%yiX%yi]%yi_%yib%yic%yih%yij%yik%yil%yiq%yis%yix%yi{%yi|%yi}%yi!T%yi!_%yi!d%yi!g%yi!h%yi!i%yi!j%yi!k%yi!n%yi#d%yi#t%yi#x%yi%P%yi%R%yi%T%yi%U%yi%X%yi%Z%yi%^%yi%_%yi%a%yi%n%yi%t%yi%v%yi%x%yi%z%yi%}%yi&T%yi&Z%yi&]%yi&_%yi&a%yi&c%yi'S%yi']%yi'f%yi'o%yi'|%yi!S%yi`%yi&Q%yi~O`/mO!S/kO&Q/lO~P`O!TSO!d/oO~O&X*wOQ&SiR&SiX&Si]&Si_&Sib&Sic&Sih&Sij&Sik&Sil&Siq&Sis&Six&Si{&Si|&Si}&Si!T&Si!_&Si!d&Si!g&Si!h&Si!i&Si!j&Si!k&Si!n&Si#d&Si#t&Si#x&Si%P&Si%R&Si%T&Si%U&Si%X&Si%Z&Si%^&Si%_&Si%a&Si%n&Si%t&Si%v&Si%x&Si%z&Si%}&Si&T&Si&Z&Si&]&Si&_&Si&a&Si&c&Si'S&Si']&Si'f&Si'o&Si'|&Si!S&Si%{&Si`&Si&Q&Si~O!R#bOn$]a~O!O&ii!R&ii~P!)wO!R%zO!O'ji~O!R&`O!O'ti~O!O/uO~O!R!Va!S!Va~P#*XO]&ROk&RO!Q/{O'g(jO!R&jX!S&jX~P@dO!R+`O!S'ka~O]&ZOk&ZO!Q)yO'g'TO!R&oX!S&oX~O!R+cO!S'va~O!O'ui!R'ui~P!)wO_$^O!]!wO!d$ZO!j0VO!{0TO'W$^O'b$PO'p&oO~O!S0YO~P!?iO!X0ZO!Y0ZO'^$dO'g(jO'o+iO~O!W0[O~P#MSO!TSO!W0[O!u0^O!x0_O~P#MSO!W0[O!s0aO!t0aO!u0^O!x0_O~P#MSO!T&dO~O!T&dO~P!BpO!R'ri!c'ri_'ri'W'ri~P!)wO!{0jO!R'ri!c'ri_'ri'W'ri~O!R&tO!c'qi~Ox$uO!T$vO#V0lO']$bO~O#WraQraZra_rajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra'Wra'fra'pra!cra!Ora!Tranra%Qra!]ra~P#7pO#W$^aQ$^aZ$^a_$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a'W$^a'f$^a'p$^a!c$^a!O$^a!T$^an$^a%Q$^a!]$^a~P#8fO#W$`aQ$`aZ$`a_$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a'W$`a'f$`a'p$`a!c$`a!O$`a!T$`an$`a%Q$`a!]$`a~P#9XO#W$naQ$naZ$na_$naj$nav$na!R$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na'W$na'f$na'p$na!c$na!O$na!T$na!{$nan$na%Q$na!]$na~P!BpO_#Oq!R#Oq'W#Oq!O#Oq!c#Oqn#Oq!T#Oq%Q#Oq!]#Oq~P!)wO!R&kX'a&kX~PJjO!R,_O'a'ma~O!Q0tO!R&lX!c&lX~P){O!R,bO!c'na~O!R,bO!c'na~P!)wO#m!fa!S!fa~PCfO#m!^a!R!^a!S!^a~P#*XO!T1XO#x^O$P1YO~O!S1^O~On1_O~P!BpO_$Yq!R$Yq'W$Yq!O$Yq!c$Yqn$Yq!T$Yq%Q$Yq!]$Yq~P!)wO!O1`O~O],yOk,yO~Ou(SOx(TO'x(XOP$xi'w$xi!R$xi!{$xi~O'a$xi#m$xi~P$.POu(SOx(TOP$zi'w$zi'x$zi!R$zi!{$zi~O'a$zi#m$zi~P$.rO'p#[O~P!BpO!Q1cO']$bO!R&tX!c&tX~O!R-RO!c'}a~O!R-RO!]!wO!c'}a~O!R-RO!]!wO'p&oO!c'}a~O'a$gi!R$gi!{$gi#m$gi~P!#{O!Q1kO'](eO!O&vX!R&vX~P!$jO!R-ZO!O(Oa~O!R-ZO!O(Oa~P!BpO!]!wO~O!]!wO#c1sO~Oj1vO!]!wO'p&oO~O!R'di'a'di~P!#{O!{1yO!R'di'a'di~P!#{O!c1|O~O_$Zq!R$Zq'W$Zq!O$Zq!c$Zqn$Zq!T$Zq%Q$Zq!]$Zq~P!)wO!R2QO!T(PX~P!BpO!T&dO%Q2TO~O!T&dO%Q2TO~P!BpO!T$eX$u[X_$eX!R$eX'W$eX~P!!rO$u2XOPgXugXxgX!TgX'wgX'xgX_gX!RgX'WgX~O$u2XO~O]2_O%R2`O'])iO!R'PX!S'PX~O!R.^O!S(Va~OZ2dO~O^2eO~O]2hO~OP2jO!T&dO!o2iO%Q2TO~O_$^O'W$^O~P!BpO!T#zO~P!BpO!R2oO!{2qO!S(SX~O!S2rO~Ox;oO!W2{O!X2tO!Y2tO!r2zO!s2yO!t2yO!x2xO'^$dO'g(jO'o+iO~O!S2wO~P$7ZOP3SO!T.yO!o3RO%Q3QO~OP3SO!T.yO!o3RO%Q3QO'b$PO~O'](|O!R'OX!S'OX~O!R/VO!S(Ta~O]3^O'g3]O~O]3_O~O^3aO~O!c3dO~P){O_3fO~O_3fO~P){O#c3hO%r3iO~PFOO`/mO!S3mO&Q/lO~P`O!]3oO~O!R#Ti!S#Ti~P#*XO!{3qO!R#Ti!S#Ti~O!R!Vi!S!Vi~P#*XO_$^O!{3xO'W$^O~O_$^O!]!wO!{3xO'W$^O~O!X3|O!Y3|O'^$dO'g(jO'o+iO~O_$^O!]!wO!d$ZO!j3}O!{3xO'W$^O'b$PO'p&oO~O!W4OO~P$;xO!W4OO!u4RO!x4SO~P$;xO_$^O!]!wO!j3}O!{3xO'W$^O'p&oO~O!R'rq!c'rq_'rq'W'rq~P!)wO!R&tO!c'qq~O#W$xiQ$xiZ$xi_$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi'W$xi'f$xi'p$xi!c$xi!O$xi!T$xin$xi%Q$xi!]$xi~P$.PO#W$ziQ$ziZ$zi_$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi'W$zi'f$zi'p$zi!c$zi!O$zi!T$zin$zi%Q$zi!]$zi~P$.rO#W$giQ$giZ$gi_$gij$giv$gi!R$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi'W$gi'f$gi'p$gi!c$gi!O$gi!T$gi!{$gin$gi%Q$gi!]$gi~P!BpO!R&ka'a&ka~P!#{O!R&la!c&la~P!)wO!R,bO!c'ni~O#m#Oi!R#Oi!S#Oi~P#*XOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zij#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~O#[#Zi~P$EiO#[9eO~P$EiOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO'fQOZ#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~Oj#Zi~P$GqOj9gO~P$GqOQ#^Oj9gOu!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO'fQO#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P$IyOZ9rO!a9iO#a9iO#b9iO#c9iO~P$IyOQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO'fQO#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'x#Zi!R#Zi!S#Zi~O'w#Zi~P$L_O'w!}O~P$L_OQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO'fQO'w!}O#i#Zi#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~O'x#Zi~P$NgO'x#OO~P$NgOQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO#i9nO'fQO'w!}O'x#OO~O#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~P%!oO_#ky!R#ky'W#ky!O#ky!c#kyn#ky!T#ky%Q#ky!]#ky~P!)wOP;vOu(SOx(TO'w(VO'x(XO~OQ#ZiZ#Zij#Ziv#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'f#Zi'p#Zi!R#Zi!S#Zi~P%%aO!b!yOP'eXu'eXx'eX'w'eX'x'eX!S'eX~OQ'eXZ'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX#m'eX'f'eX'p'eX!R'eX~P%'eO#m#ni!R#ni!S#ni~P#*XO!S4eO~O!R&sa!S&sa~P#*XO!]!wO'p&oO!R&ta!c&ta~O!R-RO!c'}i~O!R-RO!]!wO!c'}i~O'a$gq!R$gq!{$gq#m$gq~P!#{O!O&va!R&va~P!BpO!]4lO~O!R-ZO!O(Oi~P!BpO!R-ZO!O(Oi~O!O4pO~O!]!wO#c4uO~Oj4vO!]!wO'p&oO~O!O4xO~O'a$iq!R$iq!{$iq#m$iq~P!#{O_$Zy!R$Zy'W$Zy!O$Zy!c$Zyn$Zy!T$Zy%Q$Zy!]$Zy~P!)wO!R2QO!T(Pa~O!T&dO%Q4}O~O!T&dO%Q4}O~P!BpO_#Oy!R#Oy'W#Oy!O#Oy!c#Oyn#Oy!T#Oy%Q#Oy!]#Oy~P!)wOZ5QO~O]5SO'])iO~O!R.^O!S(Vi~O]5VO~O^5WO~O'g'TO!R&{X!S&{X~O!R2oO!S(Sa~O!S5eO~P$7ZOx;sO'g(jO'o+iO~O!W5hO!X5gO!Y5gO!x0_O'^$dO'g(jO'o+iO~O!s5iO!t5iO~P%0^O!X5gO!Y5gO'^$dO'g(jO'o+iO~O!T.yO~O!T.yO%Q5kO~O!T.yO%Q5kO~P!BpOP5pO!T.yO!o5oO%Q5kO~OZ5uO!R'Oa!S'Oa~O!R/VO!S(Ti~O]5xO~O!c5yO~O!c5zO~O!c5{O~O!c5{O~P){O_5}O~O!]6QO~O!c6RO~O!R'ui!S'ui~P#*XO_$^O'W$^O~P!)wO_$^O!{6WO'W$^O~O_$^O!]!wO!{6WO'W$^O~O!X6]O!Y6]O'^$dO'g(jO'o+iO~O_$^O!]!wO!j6^O!{6WO'W$^O'p&oO~O!d$ZO'b$PO~P%4xO!W6_O~P%4gO!R'ry!c'ry_'ry'W'ry~P!)wO#W$gqQ$gqZ$gq_$gqj$gqv$gq!R$gq!a$gq!b$gq!d$gq!j$gq#[$gq#]$gq#^$gq#_$gq#`$gq#a$gq#b$gq#c$gq#e$gq#g$gq#i$gq#j$gq'W$gq'f$gq'p$gq!c$gq!O$gq!T$gq!{$gqn$gq%Q$gq!]$gq~P!BpO#W$iqQ$iqZ$iq_$iqj$iqv$iq!R$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq'W$iq'f$iq'p$iq!c$iq!O$iq!T$iq!{$iqn$iq%Q$iq!]$iq~P!BpO!R&li!c&li~P!)wO#m#Oq!R#Oq!S#Oq~P#*XOu-tOv-tOx-uOPra'wra'xra!Sra~OQraZrajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra#mra'fra'pra!Rra~P%;OOu(SOx(TOP$^a'w$^a'x$^a!S$^a~OQ$^aZ$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a#m$^a'f$^a'p$^a!R$^a~P%=SOu(SOx(TOP$`a'w$`a'x$`a!S$`a~OQ$`aZ$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a#m$`a'f$`a'p$`a!R$`a~P%?WOQ$naZ$naj$nav$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na#m$na'f$na'p$na!R$na!S$na~P%%aO#m$Yq!R$Yq!S$Yq~P#*XO#m$Zq!R$Zq!S$Zq~P#*XO!S6hO~O#m6iO~P!#{O!]!wO!R&ti!c&ti~O!]!wO'p&oO!R&ti!c&ti~O!R-RO!c'}q~O!O&vi!R&vi~P!BpO!R-ZO!O(Oq~O!O6oO~P!BpO!O6oO~O!R'dy'a'dy~P!#{O!R&ya!T&ya~P!BpO!T$tq_$tq!R$tq'W$tq~P!BpOZ6vO~O!R.^O!S(Vq~O]6yO~O!T&dO%Q6zO~O!T&dO%Q6zO~P!BpO!{6{O!R&{a!S&{a~O!R2oO!S(Si~P#*XO!X7RO!Y7RO'^$dO'g(jO'o+iO~O!W7TO!x4SO~P%GXO!T.yO%Q7WO~O!T.yO%Q7WO~P!BpO]7_O'g7^O~O!R/VO!S(Tq~O!c7aO~O!c7aO~P){O!c7cO~O!c7dO~O!R#Ty!S#Ty~P#*XO_$^O!{7jO'W$^O~O_$^O!]!wO!{7jO'W$^O~O!X7mO!Y7mO'^$dO'g(jO'o+iO~O_$^O!]!wO!j7nO!{7jO'W$^O'p&oO~O#m#ky!R#ky!S#ky~P#*XOQ$giZ$gij$giv$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi#m$gi'f$gi'p$gi!R$gi!S$gi~P%%aOu(SOx(TO'x(XOP$xi'w$xi!S$xi~OQ$xiZ$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi#m$xi'f$xi'p$xi!R$xi~P%LjOu(SOx(TOP$zi'w$zi'x$zi!S$zi~OQ$ziZ$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi#m$zi'f$zi'p$zi!R$zi~P%NnO#m$Zy!R$Zy!S$Zy~P#*XO#m#Oy!R#Oy!S#Oy~P#*XO!]!wO!R&tq!c&tq~O!R-RO!c'}y~O!O&vq!R&vq~P!BpO!O7tO~P!BpO!R.^O!S(Vy~O!R2oO!S(Sq~O!X8QO!Y8QO'^$dO'g(jO'o+iO~O!T.yO%Q8TO~O!T.yO%Q8TO~P!BpO!c8WO~O_$^O!{8]O'W$^O~O_$^O!]!wO!{8]O'W$^O~OQ$gqZ$gqj$gqv$gq!a$gq!b$gq!d$gq!j$gq#[$gq#]$gq#^$gq#_$gq#`$gq#a$gq#b$gq#c$gq#e$gq#g$gq#i$gq#j$gq#m$gq'f$gq'p$gq!R$gq!S$gq~P%%aOQ$iqZ$iqj$iqv$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq#m$iq'f$iq'p$iq!R$iq!S$iq~P%%aO'a$|!Z!R$|!Z!{$|!Z#m$|!Z~P!#{O!R&{q!S&{q~P#*XO_$^O!{8oO'W$^O~O#W$|!ZQ$|!ZZ$|!Z_$|!Zj$|!Zv$|!Z!R$|!Z!a$|!Z!b$|!Z!d$|!Z!j$|!Z#[$|!Z#]$|!Z#^$|!Z#_$|!Z#`$|!Z#a$|!Z#b$|!Z#c$|!Z#e$|!Z#g$|!Z#i$|!Z#j$|!Z'W$|!Z'f$|!Z'p$|!Z!c$|!Z!O$|!Z!T$|!Z!{$|!Zn$|!Z%Q$|!Z!]$|!Z~P!BpOP;uOu(SOx(TO'w(VO'x(XO~O!S!za!W!za!X!za!Y!za!r!za!s!za!t!za!x!za'^!za'g!za'o!za~P&,_O!W'eX!X'eX!Y'eX!r'eX!s'eX!t'eX!x'eX'^'eX'g'eX'o'eX~P%'eOQ$|!ZZ$|!Zj$|!Zv$|!Z!a$|!Z!b$|!Z!d$|!Z!j$|!Z#[$|!Z#]$|!Z#^$|!Z#_$|!Z#`$|!Z#a$|!Z#b$|!Z#c$|!Z#e$|!Z#g$|!Z#i$|!Z#j$|!Z#m$|!Z'f$|!Z'p$|!Z!R$|!Z!S$|!Z~P%%aO!Wra!Xra!Yra!rra!sra!tra!xra'^ra'gra'ora~P%;OO!W$^a!X$^a!Y$^a!r$^a!s$^a!t$^a!x$^a'^$^a'g$^a'o$^a~P%=SO!W$`a!X$`a!Y$`a!r$`a!s$`a!t$`a!x$`a'^$`a'g$`a'o$`a~P%?WO!S$na!W$na!X$na!Y$na!r$na!s$na!t$na!x$na'^$na'g$na'o$na~P&,_O!W$xi!X$xi!Y$xi!r$xi!s$xi!t$xi!x$xi'^$xi'g$xi'o$xi~P%LjO!W$zi!X$zi!Y$zi!r$zi!s$zi!t$zi!x$zi'^$zi'g$zi'o$zi~P%NnO!S$gi!W$gi!X$gi!Y$gi!r$gi!s$gi!t$gi!x$gi'^$gi'g$gi'o$gi~P&,_O!S$gq!W$gq!X$gq!Y$gq!r$gq!s$gq!t$gq!x$gq'^$gq'g$gq'o$gq~P&,_O!S$iq!W$iq!X$iq!Y$iq!r$iq!s$iq!t$iq!x$iq'^$iq'g$iq'o$iq~P&,_O!S$|!Z!W$|!Z!X$|!Z!Y$|!Z!r$|!Z!s$|!Z!t$|!Z!x$|!Z'^$|!Z'g$|!Z'o$|!Z~P&,_On'hX~P.jOn[X!O[X!c[X%r[X!T[X%Q[X!][X~P$zO!]dX!c[X!cdX'pdX~P;dOQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!TSO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O']'cO'fQO'oYO'|;^O~O]#qOh$QOj#rOk#qOl#qOq$ROs9uOx#yO!T#zO!_;fO!d#vO#V:OO#t$VO$_9xO$a9{O$d$WO']&{O'b$PO'f#sO~O!R9pO!S$]a~O]#qOh$QOj#rOk#qOl#qOq$ROs9vOx#yO!T#zO!_;gO!d#vO#V:PO#t$VO$_9yO$a9|O$d$WO']&{O'b$PO'f#sO~O#d'jO~P&<WO!S[X!SdX~P;dO!]9dO~O#W9cO~O!]!wO#W9cO~O!{9sO~O#c9iO~O!{:QO!R'uX!S'uX~O!{9sO!R'sX!S'sX~O#W:RO~O'a:TO~P!#{O#W:[O~O#W:]O~O#W:^O~O!]!wO#W:_O~O!]!wO#W:RO~O#m:`O~P#*XO#W:aO~O#W:bO~O#W:cO~O#W:dO~O#W:eO~O#W:fO~O#W:gO~O#W:hO~O!O:iO~O#m:jO~P!#{O#m:kO~P!#{O#m:lO~P!#{O!O:mO~P!BpO!O:mO~O!O:nO~P!BpO!]!wO#c;lO~O!]!wO#c;nO~O#x~!b!r!t!u#U#V'|$_$a$d$u%P%Q%R%X%Z%^%_%a%c~UT#x'|#]}'Y'Z#z'Y']'g~",goto:"#Kk(ZPPPPPPPP([P(lP*`PPPP-zPP.a3s7o8SP8SPPP8SP:U8SP8SP:YPP:`P:t?VPPPP?ZPPPP?ZA{PPPBRDdP?ZPFwPPPPHp?ZPPPPPJi?ZPPMjNgPPPPNk!!TP!!]!#^PNg?Z?Z!&n!)i!.[!.[!1kPPP!1r!4h?ZPPPPPPPPPP!7_P!8pPP?Z!9}P?ZP?Z?Z?Z?ZP?Z!;dPP!>]P!AQ!AY!A^!A^P!>YP!Ab!AbP!DVP!DZ?Z?Z!Da!GT8SP8SP8S8SP!HW8S8S!Jf8S!M_8S# g8S8S#!T#$c#$c#$g#$c#$oP#$cP8S#%k8S#'X8S8S-zPPP#(yPP#)c#)cP#)cP#)x#)cPP#*OP#)uP#)u#*b!!X#)u#+P#+V#+Y([#+]([P#+d#+d#+dP([P([P([P([PP([P#+j#+mP#+m([P#+qP#+tP([P([P([P([P([P([([#+z#,U#,[#,b#,p#,v#,|#-W#-^#-m#-s#.R#.X#._#.m#/S#0z#1Y#1`#1f#1l#1r#1|#2S#2Y#2d#2v#2|PPPPPPPP#3SPP#3v#7OPP#8f#8m#8uPP#>a#@t#Fp#Fs#Fv#GR#GUPP#GX#G]#Gz#Hq#Hu#IZPP#I_#Ie#IiP#Il#Ip#Is#Jc#Jy#KO#KR#KU#K[#K_#Kc#KgmhOSj}!n$]%c%f%g%i*o*t/g/jQ$imQ$ppQ%ZyS&V!b+`Q&k!jS(l#z(qQ)g$jQ)t$rQ*`%TQ+f&^S+k&d+mQ+}&lQ-k(sQ/U*aY0Z+o+p+q+r+sS2t.y2vU3|0[0^0aU5g2y2z2{S6]4O4RS7R5h5iQ7m6_R8Q7T$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!j'e#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ(}$SQ)l$lQ*b%WQ*i%`Q,X9tQ.W)aQ.c)mQ/^*gQ2_.^Q3Z/VQ4^9vQ5S2`R8{9upeOSjy}!n$]%Y%c%f%g%i*o*t/g/jR*d%[&WVOSTjkn}!S!W!k!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%z&S&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;`;a[!cRU!]!`%x&WQ$clQ$hmS$mp$rv$wrs!r!u$Z$u&`&t&w)x)y)z*m+Y+h,S,U/o0lQ%PwQ&h!iQ&j!jS(_#v(cS)f$i$jQ)j$lQ)w$tQ*Z%RQ*_%TS+|&k&lQ-V(`Q.[)gQ.b)mQ.d)nQ.g)rQ/P*[S/T*`*aQ0h+}Q1b-RQ2^.^Q2b.aQ2g.iQ3Y/UQ4i1cQ5R2`Q5U2dQ6u5QR7w6vx#xa!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k!Y$fm!j$h$i$j&U&j&k&l(k)f)g+]+j+|+}-d.[0Q0W0]0h1u3{4Q6Z7k8^Q)`$cQ*P$|Q*S$}Q*^%TQ.k)wQ/O*ZU/S*_*`*aQ3T/PS3X/T/UQ5b2sQ5t3YS7P5c5fS8O7Q7SQ8f8PQ8u8g#[;b!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd;c9d9x9{:O:V:Y:]:b:e:ke;d9r9y9|:P:W:Z:^:c:f:lW#}a$P(y;^S$|t%YQ$}uQ%OvR)}$z%P#|a!w!y#d#v#y$T$U$Y&g'}(W(Y(Z(b(h(w(x)])_)a*O*R+y,_-Y-Z-]-w.R.T.p.s.{.}1a1k1s1y2Q2T2X2j3Q3S4l4u4}5k5p6i6z7W8T9d9r9w9x9y9z9{9|9}:O:P:U:V:W:X:Y:Z:[:]:^:a:b:c:d:e:f:j:k:l;^;i;j;k;l;n;t;u;vT(O#s(PX)O$S9t9u9vU&Z!b$v+cQ'U!{Q)q$oQ.t*TQ1z-tR5^2o&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a$]#aZ!_!o$a%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,i,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|T!XQ!Y&_cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ&X!bR/|+`Y&R!b&V&^+`+fS(k#z(qS+j&d+mS-d(l(sQ-e(mQ-l(tQ.v*VU0W+k+o+pU0]+q+r+sS0b+t2xQ1u-kQ1w-mQ1x-nS2s.y2vU3{0Z0[0^Q4P0_Q4Q0aS5c2t2{S5f2y2zU6Z3|4O4RQ6`4SS7Q5g5hQ7S5iS7k6]6_S8P7R7TQ8^7mQ8g8QQ;h;oR;m;slhOSj}!n$]%c%f%g%i*o*t/g/jQ%k!QS&x!v9cQ)d$gQ*X%PQ*Y%QQ+z&iS,]&}:RS-y)V:_Q.Y)eQ.x*WQ/n*vQ/p*wQ/x+ZQ0`+qQ0f+{S2P-z:gQ2Y.ZS2].]:hQ3r/zQ3u0RQ4U0gQ5P2ZQ6T3tQ6X3zQ6a4VQ7e6RQ7h6YQ8Y7iQ8l8[R8x8n$W#`Z!_!o%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|W(v#{&|1V8qT)Z$a,i$W#_Z!_!o%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|Q'f#`S)Y$a,iR-{)Z&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ%f{Q%g|Q%i!OQ%j!PR/f*rQ&e!iQ)[$cQ+w&hS.Q)`)wS0c+u+vW2S-}.O.P.kS4T0d0eU4|2U2V2WU6s4{5Y5ZQ7v6tR8b7yT+l&d+mS+j&d+mU0W+k+o+pU0]+q+r+sS0b+t2xS2s.y2vU3{0Z0[0^Q4P0_Q4Q0aS5c2t2{S5f2y2zU6Z3|4O4RQ6`4SS7Q5g5hQ7S5iS7k6]6_S8P7R7TQ8^7mR8g8QS+l&d+mT2u.y2vS&r!q/dQ-U(_Q-b(kS0V+j2sQ1g-VS1p-c-lU3}0]0b5fQ4h1bS4s1v1xU6^4P4Q7SQ6k4iQ6r4vR7n6`Q!xXS&q!q/dQ)W$[Q)b$eQ)h$kQ,Q&rQ-T(_Q-a(kQ-f(nQ.X)cQ/Q*]S0U+j2sS1f-U-VS1o-b-lQ1r-eQ1t-gQ3V/RW3y0V0]0b5fQ4g1bQ4k1gS4o1p1xQ4t1wQ5r3WW6[3}4P4Q7SS6j4h4iS6n4p:iQ6p4sQ6}5aQ7[5sS7l6^6`Q7r6kS7s6o:mQ7u6rQ7|7OQ8V7]Q8_7nS8a7t:nQ8d7}Q8s8eQ9Q8tQ9X9RQ:u:pQ;T:zQ;U:{Q;V;hR;[;m$rWORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oS!xn!k!j:o#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR:u;`$rXORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oQ$[b!Y$em!j$h$i$j&U&j&k&l(k)f)g+]+j+|+}-d.[0Q0W0]0h1u3{4Q6Z7k8^S$kn!kQ)c$fQ*]%TW/R*^*_*`*aU3W/S/T/UQ5a2sS5s3X3YU7O5b5c5fQ7]5tU7}7P7Q7SS8e8O8PS8t8f8gQ9R8u!j:p#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ:z;_R:{;`$f]OSTjk}!S!W!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oY!hRU!]!`%xv$wrs!r!u$Z$u&`&t&w)x)y)z*m+Y+h,S,U/o0lQ*j%`!h:q#]#k'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR:t&WS&[!b$vR0O+c$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!j'e#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR*i%`$roORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oQ'U!{!k:r#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a!h#VZ!_$a%w%}&y'Q'_'`'a'b'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_!R9k'd'u+^,i/v/y0w1P1Q1R1S1W1]3s4]4b4c5`6S6b6f6g7z:|!d#XZ!_$a%w%}&y'Q'a'b'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_}9m'd'u+^,i/v/y0w1R1S1W1]3s4]4b4c5`6S6b6f6g7z:|!`#]Z!_$a%w%}&y'Q'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_Q1a-Px;a'd'u+^,i/v/y0w1W1]3s4]4b4c5`6S6b6f6g7z:|Q;i;pQ;j;qR;k;r&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aS#l`#mR1Y,l&e_ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,l,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aS#g^#nT'n#i'rT#h^#nT'p#i'r&e`ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,l,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aT#l`#mQ#o`R'y#m$rbORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!k;_#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a#RdOSUj}!S!W!n!|#k$]%[%_%`%c%e%f%g%i%m&S&f'w)^*k*o*t+x,m-u.S.|/_/`/a/c/g/j/l1X2i3R3f3h3i5o5}x#{a!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k#[&|!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vQ)S$WQ,x(Sd1V9r9y9|:P:W:Z:^:c:f:le8q9d9x9{:O:V:Y:]:b:e:kx#wa!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;kQ(d#xS(n#z(qQ)T$XQ-g(o#[:w!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd:x9d9x9{:O:V:Y:]:b:e:kd:y9r9y9|:P:W:Z:^:c:f:lQ:};bQ;O;cQ;P;dQ;Q;eQ;R;fR;S;gx#{a!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k#[&|!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd1V9r9y9|:P:W:Z:^:c:f:le8q9d9x9{:O:V:Y:]:b:e:klfOSj}!n$]%c%f%g%i*o*t/g/jQ(g#yQ*}%pQ+O%rR1j-Z%O#|a!w!y#d#v#y$T$U$Y&g'}(W(Y(Z(b(h(w(x)])_)a*O*R+y,_-Y-Z-]-w.R.T.p.s.{.}1a1k1s1y2Q2T2X2j3Q3S4l4u4}5k5p6i6z7W8T9d9r9w9x9y9z9{9|9}:O:P:U:V:W:X:Y:Z:[:]:^:a:b:c:d:e:f:j:k:l;^;i;j;k;l;n;t;u;vQ*Q$}Q.r*SQ2m.qR5]2nT(p#z(qS(p#z(qT2u.y2vQ)b$eQ-f(nQ.X)cQ/Q*]Q3V/RQ5r3WQ6}5aQ7[5sQ7|7OQ8V7]Q8d7}Q8s8eQ9Q8tR9X9Rp(W#t'O)U-X-o-p0q1h1}4f4w7q:v;W;X;Y!n:U&z'i(^(f+v,[,t-P-^-|.P.o.q0e0p1i1m2W2l2n3O4Y4Z4m4q4y5O5Z5n6m6q7Y8`;Z;];p;q;r[:V8p9O9V9Y9Z9]]:W1U4a6c7o7p8zr(Y#t'O)U,}-X-o-p0q1h1}4f4w7q:v;W;X;Y!p:X&z'i(^(f+v,[,t-P-^-|.P.o.q0e0n0p1i1m2W2l2n3O4Y4Z4m4q4y5O5Z5n6m6q7Y8`;Z;];p;q;r^:Y8p9O9T9V9Y9Z9]_:Z1U4a6c6d7o7p8zpeOSjy}!n$]%Y%c%f%g%i*o*t/g/jQ%VxR*k%`peOSjy}!n$]%Y%c%f%g%i*o*t/g/jR%VxQ*U%OR.n)}qeOSjy}!n$]%Y%c%f%g%i*o*t/g/jQ.z*ZS3P/O/PW5j2|2}3O3TU7V5l5m5nU8R7U7X7YQ8h8SR8v8iQ%^yR*e%YR3^/XR7_5uS$mp$rR.d)nQ%czR*o%dR*u%jT/h*t/jR*y%kQ*x%kR/q*yQjOQ!nST$`j!nQ(P#sR,u(PQ!YQR%u!YQ!^RU%{!^%|+UQ%|!_R+U%}Q+a&XR/}+aQ,`'OR0r,`Q,c'QS0u,c0vR0v,dQ+m&dR0X+mS!eR$uU&a!e&b+VQ&b!fR+V&OQ+d&[R0P+dQ&u!sQ,R&sU,V&u,R0mR0m,WQ'r#iR,n'rQ#m`R'x#mQ#cZU'h#c+Q9qQ+Q9_R9q'uQ-S(_W1d-S1e4j6lU1e-T-U-VS4j1f1gR6l4k$k(U#t&z'O'i(^(f)P)Q)U+v,Y,Z,[,t,}-O-P-X-^-o-p-|.P.o.q0e0n0o0p0q1U1h1i1m1}2W2l2n3O4Y4Z4_4`4a4f4m4q4w4y5O5Z5n6c6d6e6m6q7Y7o7p7q8`8p8z8|8}9O9T9U9V9Y9Z9]:v;W;X;Y;Z;];p;q;rQ-[(fU1l-[1n4nQ1n-^R4n1mQ(q#zR-i(qQ(z$OR-r(zQ2R-|R4z2RQ){$xR.m){Q2p.tS5_2p6|R6|5`Q*W%PR.w*WQ2v.yR5d2vQ/W*bS3[/W5vR5v3^Q._)jW2a._2c5T6wQ2c.bQ5T2bR6w5UQ)o$mR.e)oQ/j*tR3l/jWiOSj!nQ%h}Q)X$]Q*n%cQ*p%fQ*q%gQ*s%iQ/e*oS/h*t/jR3k/gQ$_gQ%l!RQ%o!TQ%q!UQ%s!VQ)v$sQ)|$yQ*d%^Q*{%nQ-h(pS/Z*e*hQ/r*zQ/s*}Q/t+OS0S+j2sQ2f.hQ2k.oQ3U/QQ3`/]Q3j/fY3w0U0V0]0b5fQ5X2hQ5[2lQ5q3VQ5w3_[6U3v3y3}4P4Q7SQ6x5VQ7Z5rQ7`5xW7f6V6[6^6`Q7x6yQ7{6}Q8U7[U8X7g7l7nQ8c7|Q8j8VS8k8Z8_Q8r8dQ8w8mQ9P8sQ9S8yQ9W9QR9[9XQ$gmQ&i!jU)e$h$i$jQ+Z&UU+{&j&k&lQ-`(kS.Z)f)gQ/z+]Q0R+jS0g+|+}Q1q-dQ2Z.[Q3t0QS3z0W0]Q4V0hQ4r1uS6Y3{4QQ7i6ZQ8[7kR8n8^S#ua;^R({$PU$Oa$P;^R-q(yQ#taS&z!w)aQ'O!yQ'i#dQ(^#vQ(f#yQ)P$TQ)Q$UQ)U$YQ+v&gQ,Y9wQ,Z9zQ,[9}Q,t'}Q,}(WQ-O(YQ-P(ZQ-X(bQ-^(hQ-o(wQ-p(xd-|)].R.{2T3Q4}5k6z7W8TQ.P)_Q.o*OQ.q*RQ0e+yQ0n:UQ0o:XQ0p:[Q0q,_Q1U9rQ1h-YQ1i-ZQ1m-]Q1}-wQ2W.TQ2l.pQ2n.sQ3O.}Q4Y:aQ4Z:dQ4_9yQ4`9|Q4a:PQ4f1aQ4m1kQ4q1sQ4w1yQ4y2QQ5O2XQ5Z2jQ5n3SQ6c:^Q6d:WQ6e:ZQ6m4lQ6q4uQ7Y5pQ7o:cQ7p:fQ7q6iQ8`:jQ8p9dQ8z:lQ8|9xQ8}9{Q9O:OQ9T:VQ9U:YQ9V:]Q9Y:bQ9Z:eQ9]:kQ:v;^Q;W;iQ;X;jQ;Y;kQ;Z;lQ;];nQ;p;tQ;q;uR;r;vlgOSj}!n$]%c%f%g%i*o*t/g/jS!pU%eQ%n!SQ%t!WQ'V!|Q'v#kS*h%[%_Q*l%`Q*z%mQ+W&SQ+u&fQ,r'wQ.O)^Q/b*kQ0d+xQ1[,mQ1{-uQ2V.SQ2}.|Q3b/_Q3c/`Q3e/aQ3g/cQ3n/lQ4d1XQ5Y2iQ5m3RQ5|3fQ6O3hQ6P3iQ7X5oR7b5}!vZOSUj}!S!n!|$]%[%_%`%c%e%f%g%i%m&S&f)^*k*o*t+x-u.S.|/_/`/a/c/g/j/l2i3R3f3h3i5o5}Q!_RQ!oTQ$akS%w!]%zQ%}!`Q&y!vQ'Q!zQ'W#PQ'X#QQ'Y#RQ'Z#SQ'[#TQ']#UQ'^#VQ'_#WQ'`#XQ'a#YQ'b#ZQ'd#]Q'g#bQ'k#eW'u#k'w,m1XQ)p$nS+R%x+TS+^&W/{Q+g&_Q,O&pQ,^&}Q,d'RQ,g9^Q,i9`Q,w(RQ-x)VQ/v+XQ/y+[Q0i,PQ0s,bQ0w9cQ0x9eQ0y9fQ0z9gQ0{9hQ0|9iQ0}9jQ1O9kQ1P9lQ1Q9mQ1R9nQ1S9oQ1T,hQ1W9sQ1]9pQ2O-zQ2[.]Q3s:QQ3v0TQ4W0jQ4[0tQ4]:RQ4b:TQ4c:_Q5`2qQ6S3qQ6V3xQ6b:`Q6f:gQ6g:hQ7g6WQ7z6{Q8Z7jQ8m8]Q8y8oQ9_!WR:|;aR!aRR&Y!bS&U!b+`S+]&V&^R0Q+fR'P!yR'S!zT!tU$ZS!sU$ZU$xrs*mS&s!r!uQ,T&tQ,W&wQ.l)zS0k,S,UR4X0l`!dR!]!`$u%x&`)x+hh!qUrs!r!u$Z&t&w)z,S,U0lQ/d*mQ/w+YQ3p/oT:s&W)yT!gR$uS!fR$uS%y!]&`S&O!`)xS+S%x+hT+_&W)yT&]!b$vQ#i^R'{#nT'q#i'rR1Z,lT(a#v(cR(i#yQ-})]Q2U.RQ2|.{Q4{2TQ5l3QQ6t4}Q7U5kQ7y6zQ8S7WR8i8TlhOSj}!n$]%c%f%g%i*o*t/g/jQ%]yR*d%YV$yrs*mR.u*TR*c%WQ$qpR)u$rR)k$lT%az%dT%bz%dT/i*t/j",nodeNames:"\u26A0 extends ArithOp ArithOp InterpolationStart LineComment BlockComment Script ExportDeclaration export Star as VariableName String from ; default FunctionDeclaration async function VariableDefinition TypeParamList TypeDefinition ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Interpolation null super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression await yield delete LogicOp BitOp ParenthesizedExpression ClassExpression class extends ClassBody MethodDeclaration Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression PrivatePropertyName BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement",maxTerm:332,context:Dx,nodeProps:[["closedBy",4,"InterpolationEnd",40,"]",51,"}",66,")",132,"JSXSelfCloseEndTag JSXEndTag",146,"JSXEndTag"],["group",-26,8,15,17,58,184,188,191,192,194,197,200,211,213,219,221,223,225,228,234,240,242,244,246,248,250,251,"Statement",-30,12,13,24,27,28,41,43,44,45,47,52,60,68,74,75,91,92,101,103,119,122,124,125,126,127,129,130,148,149,151,"Expression",-22,23,25,29,32,34,152,154,156,157,159,160,161,163,164,165,167,168,169,178,180,182,183,"Type",-3,79,85,90,"ClassItem"],["openedBy",30,"InterpolationStart",46,"[",50,"{",65,"(",131,"JSXStartTag",141,"JSXStartTag JSXStartCloseTag"]],propSources:[Ix],skippedNodes:[0,5,6],repeatNodeCount:28,tokenData:"!C}~R!`OX%TXY%cYZ'RZ[%c[]%T]^'R^p%Tpq%cqr'crs(kst0htu2`uv4pvw5ewx6cxy<yyz=Zz{=k{|>k|}?O}!O>k!O!P?`!P!QCl!Q!R!0[!R![!1q![!]!7s!]!^!8V!^!_!8g!_!`!9d!`!a!:[!a!b!<R!b!c%T!c!}2`!}#O!=d#O#P%T#P#Q!=t#Q#R!>U#R#S2`#S#T!>i#T#o2`#o#p!>y#p#q!?O#q#r!?f#r#s!?x#s$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$I|2`$I|$I}!Bq$I}$JO!Bq$JO$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`W%YR$UWO!^%T!_#o%T#p~%T7Z%jg$UW'Y7ROX%TXY%cYZ%TZ[%c[p%Tpq%cq!^%T!_#o%T#p$f%T$f$g%c$g#BY%T#BY#BZ%c#BZ$IS%T$IS$I_%c$I_$JT%T$JT$JU%c$JU$KV%T$KV$KW%c$KW&FU%T&FU&FV%c&FV?HT%T?HT?HU%c?HU~%T7Z'YR$UW'Z7RO!^%T!_#o%T#p~%T$T'jS$UW!j#{O!^%T!_!`'v!`#o%T#p~%T$O'}S#e#v$UWO!^%T!_!`(Z!`#o%T#p~%T$O(bR#e#v$UWO!^%T!_#o%T#p~%T)X(rZ$UW]#eOY(kYZ)eZr(krs*rs!^(k!^!_+U!_#O(k#O#P-b#P#o(k#o#p+U#p~(k&r)jV$UWOr)ers*Ps!^)e!^!_*a!_#o)e#o#p*a#p~)e&r*WR$P&j$UWO!^%T!_#o%T#p~%T&j*dROr*ars*ms~*a&j*rO$P&j)X*{R$P&j$UW]#eO!^%T!_#o%T#p~%T)P+ZV]#eOY+UYZ*aZr+Urs+ps#O+U#O#P+w#P~+U)P+wO$P&j]#e)P+zROr+Urs,Ts~+U)P,[U$P&j]#eOY,nZr,nrs-Vs#O,n#O#P-[#P~,n#e,sU]#eOY,nZr,nrs-Vs#O,n#O#P-[#P~,n#e-[O]#e#e-_PO~,n)X-gV$UWOr(krs-|s!^(k!^!_+U!_#o(k#o#p+U#p~(k)X.VZ$P&j$UW]#eOY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x#m/PZ$UW]#eOY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x#m/yR$UW]#eO!^%T!_#o%T#p~%T#m0XT$UWO!^.x!^!_,n!_#o.x#o#p,n#p~.x3]0mZ$UWOt%Ttu1`u!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`3]1g]$UW'o3TOt%Ttu1`u!Q%T!Q![1`![!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`7Z2k_$UW#zS']$y'g3SOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`[3q_$UW#zSOt%Ttu3ju}%T}!O3j!O!Q%T!Q![3j![!^%T!_!c%T!c!}3j!}#R%T#R#S3j#S#T%T#T#o3j#p$g%T$g~3j$O4wS#^#v$UWO!^%T!_!`5T!`#o%T#p~%T$O5[R$UW#o#vO!^%T!_#o%T#p~%T5b5lU'x5Y$UWOv%Tvw6Ow!^%T!_!`5T!`#o%T#p~%T$O6VS$UW#i#vO!^%T!_!`5T!`#o%T#p~%T)X6jZ$UW]#eOY6cYZ7]Zw6cwx*rx!^6c!^!_8T!_#O6c#O#P:T#P#o6c#o#p8T#p~6c&r7bV$UWOw7]wx*Px!^7]!^!_7w!_#o7]#o#p7w#p~7]&j7zROw7wwx*mx~7w)P8YV]#eOY8TYZ7wZw8Twx+px#O8T#O#P8o#P~8T)P8rROw8Twx8{x~8T)P9SU$P&j]#eOY9fZw9fwx-Vx#O9f#O#P9}#P~9f#e9kU]#eOY9fZw9fwx-Vx#O9f#O#P9}#P~9f#e:QPO~9f)X:YV$UWOw6cwx:ox!^6c!^!_8T!_#o6c#o#p8T#p~6c)X:xZ$P&j$UW]#eOY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k#m;rZ$UW]#eOY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k#m<jT$UWO!^;k!^!_9f!_#o;k#o#p9f#p~;k&i=QR!d&a$UWO!^%T!_#o%T#p~%Tk=bR!cc$UWO!^%T!_#o%T#p~%T7V=tU'^4V#_#v$UWOz%Tz{>W{!^%T!_!`5T!`#o%T#p~%T$O>_S#[#v$UWO!^%T!_!`5T!`#o%T#p~%T%w>rSj%o$UWO!^%T!_!`5T!`#o%T#p~%T&i?VR!R&a$UWO!^%T!_#o%T#p~%T7Z?gVu5^$UWO!O%T!O!P?|!P!Q%T!Q![@r![!^%T!_#o%T#p~%T!{@RT$UWO!O%T!O!P@b!P!^%T!_#o%T#p~%T!{@iR!Q!s$UWO!^%T!_#o%T#p~%T!{@yZ$UWk!sO!Q%T!Q![@r![!^%T!_!g%T!g!hAl!h#R%T#R#S@r#S#X%T#X#YAl#Y#o%T#p~%T!{AqZ$UWO{%T{|Bd|}%T}!OBd!O!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T!{BiV$UWO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T!{CVV$UWk!sO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T7ZCs`$UW#]#vOYDuYZ%TZzDuz{Jl{!PDu!P!Q!-e!Q!^Du!^!_Fx!_!`!.^!`!a!/]!a!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXD|[$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXEy_$UW}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%TPF}V}POYFxZ!PFx!P!QGd!Q!}Fx!}#OG{#O#PHh#P~FxPGiU}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGdPHOTOYG{Z#OG{#O#PH_#P#QFx#Q~G{PHbQOYG{Z~G{PHkQOYFxZ~FxXHvY$UWOYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~HqXIkV$UWOYHqYZ%TZ!^Hq!^!_G{!_#oHq#o#pG{#p~HqXJVV$UWOYDuYZ%TZ!^Du!^!_Fx!_#oDu#o#pFx#p~Du7ZJs^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q!,R!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7ZKtV$UWOzKoz{LZ{!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZL`X$UWOzKoz{LZ{!PKo!P!QL{!Q!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZMSR$UWU7RO!^%T!_#o%T#p~%T7RM`ROzM]z{Mi{~M]7RMlTOzM]z{Mi{!PM]!P!QM{!Q~M]7RNQOU7R7ZNX^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q! T!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7Z! ^_$UWU7R}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%T7R!!bY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!&x!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#VY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!#u!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#|UU7R}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGd7R!$cWOY!$`YZM]Zz!$`z{!${{#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%OYOY!$`YZM]Zz!$`z{!${{!P!$`!P!Q!%n!Q#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%sTU7ROYG{Z#OG{#O#PH_#P#QFx#Q~G{7R!&VTOY!$`YZM]Zz!$`z{!${{~!$`7R!&iTOY!!]YZM]Zz!!]z{!#Q{~!!]7R!&}_}POzM]z{Mi{#ZM]#Z#[!&x#[#]M]#]#^!&x#^#aM]#a#b!&x#b#gM]#g#h!&x#h#iM]#i#j!&x#j#mM]#m#n!&x#n~M]7Z!(R[$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!(|^$UWOY!'|YZKoZz!'|z{!(w{!P!'|!P!Q!)x!Q!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!*PY$UWU7ROYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~Hq7Z!*tX$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#o!'|#o#p!$`#p~!'|7Z!+fX$UWOYJlYZKoZzJlz{NQ{!^Jl!^!_!!]!_#oJl#o#p!!]#p~Jl7Z!,Yc$UW}POzKoz{LZ{!^Ko!^!_M]!_#ZKo#Z#[!,R#[#]Ko#]#^!,R#^#aKo#a#b!,R#b#gKo#g#h!,R#h#iKo#i#j!,R#j#mKo#m#n!,R#n#oKo#o#pM]#p~Ko7Z!-lV$UWT7ROY!-eYZ%TZ!^!-e!^!_!.R!_#o!-e#o#p!.R#p~!-e7R!.WQT7ROY!.RZ~!.R$P!.g[$UW#o#v}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Du]!/f[#wS$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Du!{!0cd$UWk!sO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#U%T#U#V!3X#V#X%T#X#YAl#Y#b%T#b#c!2w#c#d!4m#d#l%T#l#m!5{#m#o%T#p~%T!{!1x_$UWk!sO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#X%T#X#YAl#Y#b%T#b#c!2w#c#o%T#p~%T!{!3OR$UWk!sO!^%T!_#o%T#p~%T!{!3^W$UWO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#o%T#p~%T!{!3}Y$UWk!sO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#b%T#b#c!2w#c#o%T#p~%T!{!4rV$UWO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#o%T#p~%T!{!5`X$UWk!sO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#b%T#b#c!2w#c#o%T#p~%T!{!6QZ$UWO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#o%T#p~%T!{!6z]$UWk!sO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#b%T#b#c!2w#c#o%T#p~%T$u!7|R!]V$UW#m$fO!^%T!_#o%T#p~%T!q!8^R_!i$UWO!^%T!_#o%T#p~%T5w!8rR'bd!a/n#x&s'|P!P!Q!8{!^!_!9Q!_!`!9_W!9QO$WW#v!9VP#`#v!_!`!9Y#v!9_O#o#v#v!9dO#a#v$u!9kT!{$m$UWO!^%T!_!`'v!`!a!9z!a#o%T#p~%T$P!:RR#W#w$UWO!^%T!_#o%T#p~%T%V!:gT'a!R#a#v$RS$UWO!^%T!_!`!:v!`!a!;W!a#o%T#p~%T$O!:}R#a#v$UWO!^%T!_#o%T#p~%T$O!;_T#`#v$UWO!^%T!_!`5T!`!a!;n!a#o%T#p~%T$O!;uS#`#v$UWO!^%T!_!`5T!`#o%T#p~%T*a!<YV'p#{$UWO!O%T!O!P!<o!P!^%T!_!a%T!a!b!=P!b#o%T#p~%T*[!<vRv*S$UWO!^%T!_#o%T#p~%T$O!=WS$UW#j#vO!^%T!_!`5T!`#o%T#p~%T7V!=kRx6}$UWO!^%T!_#o%T#p~%Tk!={R!Oc$UWO!^%T!_#o%T#p~%T$O!>]S#g#v$UWO!^%T!_!`5T!`#o%T#p~%T$a!>pR$UW'f$XO!^%T!_#o%T#p~%T~!?OO!T~5b!?VT'w5Y$UWO!^%T!_!`5T!`#o%T#p#q!=P#q~%T6X!?oR!S5}nQ$UWO!^%T!_#o%T#p~%TX!@PR!kP$UWO!^%T!_#o%T#p~%T7Z!@gr$UW'Y7R#zS']$y'g3SOX%TXY%cYZ%TZ[%c[p%Tpq%cqt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`7Z!CO_$UW'Z7R#zS']$y'g3SOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`",tokenizers:[_x,Tx,Ax,kx,0,1,2,3,4,5,6,7,8,9,Ex],topRules:{Script:[0,7]},dialects:{jsx:12107,ts:12109},dynamicPrecedences:{149:1,176:1},specialized:[{term:289,get:e=>Lx[e]||-1},{term:299,get:e=>Qx[e]||-1},{term:63,get:e=>Xx[e]||-1}],tokenPrec:12130}),Nx=[Re("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),Re("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),Re("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),Re("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),Re("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),Re(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),Re("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),Re(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),Re(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),Re('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),Re('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],xd=new uO,vd=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function pn(e){return(t,i)=>{let r=t.node.getChild("VariableDefinition");return r&&i(r,e),!0}}const Fx=["FunctionDeclaration"],Mx={FunctionDeclaration:pn("function"),ClassDeclaration:pn("class"),ClassExpression:()=>!0,EnumDeclaration:pn("constant"),TypeAliasDeclaration:pn("type"),NamespaceDeclaration:pn("namespace"),VariableDefinition(e,t){e.matchContext(Fx)||t(e,"variable")},TypeDefinition(e,t){t(e,"type")},__proto__:null};function Pd(e,t){let i=xd.get(t);if(i)return i;let r=[],n=!0;function o(s,a){let h=e.sliceString(s.from,s.to);r.push({label:h,type:a})}return t.cursor(zt.IncludeAnonymous).iterate(s=>{if(n)n=!1;else if(s.name){let a=Mx[s.name];if(a&&a(s,o)||vd.has(s.name))return!1}else if(s.to-s.from>8192){for(let a of Pd(e,s.node))r.push(a);return!1}}),xd.set(t,r),r}const Cd=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,Sd=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName"];function Bx(e){let t=Xt(e.state).resolveInner(e.pos,-1);if(Sd.indexOf(t.name)>-1)return null;let i=t.to-t.from<20&&Cd.test(e.state.sliceDoc(t.from,t.to));if(!i&&!e.explicit)return null;let r=[];for(let n=t;n;n=n.parent)vd.has(n.name)&&(r=r.concat(Pd(e.state.doc,n)));return{options:r,from:i?t.from:e.pos,validFor:Cd}}const ji=os.define({parser:$x.configure({props:[mc.add({IfStatement:hl({except:/^\s*({|else\b)/}),TryStatement:hl({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:_O,SwitchBody:e=>{let t=e.textAfter,i=/^\s*\}/.test(t),r=/^\s*(case|default)\b/.test(t);return e.baseIndent+(i?0:r?1:2)*e.unit},Block:kO({closing:"}"}),ArrowFunction:e=>e.baseIndent+e.unit,"TemplateString BlockComment":()=>null,"Statement Property":hl({except:/^{/}),JSXElement(e){let t=/^\s*<\//.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},JSXEscape(e){let t=/\s*\}/.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},"JSXOpenTag JSXSelfClosingTag"(e){return e.column(e.node.from)+e.unit}}),yc.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression":XO,BlockComment(e){return{from:e.from+2,to:e.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),Rx=ji.configure({dialect:"ts"}),Yx=ji.configure({dialect:"jsx"}),Wx=ji.configure({dialect:"jsx ts"}),jx="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(e=>({label:e,type:"keyword"}));function Zx(e={}){let t=e.jsx?e.typescript?Wx:Yx:e.typescript?Rx:ji;return new CO(t,[ji.data.of({autocomplete:Uy(Sd,Lp(Nx.concat(jx)))}),ji.data.of({autocomplete:Bx}),e.jsx?qx:[]])}function wd(e,t,i=e.length){if(!t)return"";let r=t.getChild("JSXIdentifier");return r?e.sliceString(r.from,Math.min(r.to,i)):""}const zx=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),qx=tt.inputHandler.of((e,t,i,r)=>{if((zx?e.composing:e.compositionStarted)||e.state.readOnly||t!=i||r!=">"&&r!="/"||!ji.isActiveAt(e.state,t,-1))return!1;let{state:n}=e,o=n.changeByRange(s=>{var a,h,c;let{head:d}=s,f=Xt(n).resolveInner(d,-1),m;if(f.name=="JSXStartTag"&&(f=f.parent),r==">"&&f.name=="JSXFragmentTag")return{range:Y.cursor(d+1),changes:{from:d,insert:"><>"}};if(r==">"&&f.name=="JSXIdentifier"){if(((h=(a=f.parent)===null||a===void 0?void 0:a.lastChild)===null||h===void 0?void 0:h.name)!="JSXEndTag"&&(m=wd(n.doc,f.parent,d)))return{range:Y.cursor(d+1),changes:{from:d,insert:`></${m}>`}}}else if(r=="/"&&f.name=="JSXFragmentTag"){let v=f.parent,S=v==null?void 0:v.parent;if(v.from==d-1&&((c=S.lastChild)===null||c===void 0?void 0:c.name)!="JSXEndTag"&&(m=wd(n.doc,S==null?void 0:S.firstChild,d))){let O=`/${m}>`;return{range:Y.cursor(d+O.length),changes:{from:d,insert:O}}}}return{range:s}});return o.changes.empty?!1:(e.dispatch(o,{userEvent:"input.type",scrollIntoView:!0}),!0)});Rt.define({create(e){return 0},update(e,t){if(t.docChanged){const{state:i}=t;return Xt(i),e+1}else return e},provide(e){return[]}});class Ux extends HTMLElement{constructor(){super(),this.view=void 0,this.state=void 0}foldRange(){}connectedCallback(){const t=[J1,Zx(),Zr.of([xy]),tn.of("  ")],i=Ot.create({extensions:t});this.view=new tt({state:i,parent:this})}}window.customElements.define("codemirror-2",Ux);const Gx=["./library/connectors/ESP8266_12E.json","./library/connectors/header_FTDI.json","./library/connectors/power_65mm.json","./library/connectors/ESP32_CAM.json","./library/connectors/USB_A_plug.json","./library/connectors/header_i0.json","./library/connectors/header_serial_reverse.json","./library/connectors/header_4.json","./library/connectors/header_signal.json","./library/connectors/MTA_i0.json","./library/connectors/HM11.json","./library/connectors/header_MFRC522.json","./library/connectors/header_serial_reverse_5V.json","./library/connectors/USB_mini_B.json","./library/connectors/ESC.json","./library/connectors/MTA_PS2.json","./library/connectors/header_APA.json","./library/connectors/MTA_ICP.json","./library/connectors/stereo_2_5mm.json","./library/connectors/header_VL53L1X_3415.json","./library/connectors/Molex_serial.json","./library/connectors/header_SWD_4_1.json","./library/connectors/ESP_01.json","./library/connectors/HCSR04.json","./library/connectors/header_SWD_4_05.json","./library/connectors/ESP32_WROOM.json","./library/connectors/header_serial.json","./library/connectors/header_PDI.json","./library/connectors/I2C4x1v.json","./library/connectors/header_power.json","./library/connectors/MTA_serial.json","./library/connectors/header_LSM6DS33_2736.json","./library/connectors/MTA_2.json","./library/connectors/MTA_3.json","./library/connectors/header_LCD.json","./library/connectors/screw_terminal_2.json","./library/connectors/HCSR501.json","./library/connectors/screw_terminal_i0.json","./library/connectors/header_unipolar_stepper.json","./library/connectors/screw_terminal_power.json","./library/connectors/header_nRF24L01.json","./library/connectors/header_serial_reverse_3V3.json","./library/connectors/MTA_power.json","./library/connectors/MTA_4.json","./library/connectors/RCWL0516.json","./library/connectors/ESP_WROOM_02D.json","./library/connectors/RN4871.json","./library/connectors/header_I2C.json","./library/connectors/header_SWD.json","./library/connectors/header_servo.json","./library/connectors/microSD.json","./library/connectors/header_4H.json","./library/connectors/header_UPDI.json","./library/connectors/I2C4x1i.json","./library/connectors/I2C4x1h.json","./library/connectors/header_ISP.json","./library/connectors/header_NEO_6M.json","./library/connectors/MTA_5.json","./library/connectors/header_6.json","./library/connectors/header_UPDI_reverse.json","./library/connectors/header_bus.json","./library/connectors/TFT8x1v.json","./library/connectors/header_2H.json","./library/connectors/header_ATP.json","./library/switches/button_6mm.json","./library/switches/slide_switch.json","./library/diodes_transistors_regulators_sensors/D_1206.json","./library/diodes_transistors_regulators_sensors/mic_SPM1437.json","./library/diodes_transistors_regulators_sensors/LED_1206.json","./library/diodes_transistors_regulators_sensors/NMOSFET_TO252AA.json","./library/diodes_transistors_regulators_sensors/regulator_SOT223.json","./library/diodes_transistors_regulators_sensors/regulator_SOT23.json","./library/diodes_transistors_regulators_sensors/VL53L1X.json","./library/diodes_transistors_regulators_sensors/H_bridge_SM8.json","./library/diodes_transistors_regulators_sensors/SPG08P4HM4H.json","./library/diodes_transistors_regulators_sensors/Hall_SOT23.json","./library/diodes_transistors_regulators_sensors/VEML6040.json","./library/diodes_transistors_regulators_sensors/phototransistor_1206.json","./library/diodes_transistors_regulators_sensors/LED_RGB.json","./library/diodes_transistors_regulators_sensors/accel_MXD6235M.json","./library/diodes_transistors_regulators_sensors/ADXL343.json","./library/diodes_transistors_regulators_sensors/mic_SPU0414HR5H.json","./library/diodes_transistors_regulators_sensors/D_SOD_123.json","./library/diodes_transistors_regulators_sensors/LED_3014_1100.json","./library/diodes_transistors_regulators_sensors/A4953_SOICN.json","./library/diodes_transistors_regulators_sensors/NMOSFET_SOT23.json","./library/diodes_transistors_regulators_sensors/phototransistor_PLCC2.json","./library/diodes_transistors_regulators_sensors/PMOSFET_SOT23.json","./library/diodes_transistors_regulators_sensors/DRV8428_HTSSOP.json","./library/diodes_transistors_regulators_sensors/CMM4030D261I2STR.json","./library/crystals_and_resonators/XTAL_CSM_7.json","./library/crystals_and_resonators/XTAL_NX5032GA.json","./library/crystals_and_resonators/XTAL_EFOBM.json","./library/discretes/R_0402.json","./library/discretes/ST4EB.json","./library/discretes/C_1206.json","./library/discretes/R_1206.json","./library/discretes/choke.json","./library/discretes/L_1210.json","./library/discretes/C_FND.json","./library/ICs/CBA.json","./library/ICs/SAMD21E.json","./library/ICs/AVRDB28.json","./library/ICs/FT230XS.json","./library/ICs/ATtiny1614.json","./library/ICs/fab.json","./library/ICs/ATtiny44_SOICN.json","./library/ICs/ATxmegaE5_TQFP.json","./library/ICs/op_amp_SOICN.json","./library/ICs/ATtiny45_SOIC.json","./library/ICs/ATmega88_TQFP.json","./library/ICs/SAMD11D.json","./library/ICs/TRC102.json","./library/ICs/ATtiny412.json","./library/ICs/ATmega644_TQFP.json","./library/ICs/op_amp_SOT23_5.json","./library/ICs/SAMD11C.json","./library/ICs/ATtiny3216.json"];function Vx(e){const t=bd(e),i=document.createElement("a");i.href=t,i.download=`${e.name===""?"anon":e.name}.svg`,document.body.appendChild(i),i.click(),document.body.removeChild(i)}function bd(e){const t=new XMLSerializer,i=document.querySelector("svg").cloneNode(!0),r=i.querySelectorAll(".no-download");for(const h of r)h.remove();const n=i.querySelector(".transform-group");n.style.transformOrigin="",n.style.transform="";const o=e.limits.x[1]-e.limits.x[0],s=e.limits.y[1]-e.limits.y[0];n.setAttribute("transform",`scale(1, -1) translate(0, ${-(e.limits.y[0]+e.limits.y[1])})`),i.setAttribute("style",""),i.setAttribute("width",`${o*e.mm_per_unit}mm`),i.setAttribute("height",`${s*e.mm_per_unit}mm`),i.setAttribute("viewBox",`${e.limits.x[0]} ${e.limits.y[0]} ${o} ${s}`),i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");const a=t.serializeToString(i);return"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(a)}function Hx(e,t){const i=new Blob([t],{type:"text/plain"});var r=document.createElement("a");r.href=URL.createObjectURL(i),r.download=`${e}`,r.click(),URL.revokeObjectURL(r)}function Jx(e,t=1e3){const i=bd(e);var r=25.4;const n=(e.limits.x[1]-e.limits.x[0])*e.mm_per_unit,o=(e.limits.y[1]-e.limits.y[0])*e.mm_per_unit;var s=t*n/r,a=t*o/r,h=new Image;h.width=s,h.height=a,h.setAttribute("src",i),h.onload=function(){const c=document.createElement("canvas");(s/t).toFixed(3)+""+(a/t).toFixed(3),(25.4*s/t).toFixed(3)+""+(25.4*a/t).toFixed(3),c.width=s,c.height=a;var d=c.getContext("2d");d.clearRect(0,0,s,a),d.drawImage(h,0,0,s,a),d.getImageData(0,0,s,a),Kx(c,`${e.name===""?"anon":e.name}`)}}function Kx(e,t){var i=e.toDataURL(),r=document.createElement("a");r.download=`${t}.png`,r.href=i,r.click()}const tv=e=>e.map(t=>t.slice(10)).map(t=>ki`
  <div class="menu-item" @mousedown=${async i=>{const r=await(await fetch(`components/${t}`)).text();pt("ADD_IMPORT",{text:r,name:i.target.innerText.split("/")[1].split(".")[0]})}}>${t}</div>
`);var x={};x.version="6.4.2.2",x.use_lines=!0,x.use_xyz=!1;var Dd=!1;if(typeof Lt<"u"&&Lt.exports?(Lt.exports=x,Dd=!0):typeof document<"u"?window.ClipperLib=x:self.ClipperLib=x,Dd)var Kt="chrome";else var Kt=navigator.userAgent.toString().toLowerCase();Kt.indexOf("chrome")!=-1&&Kt.indexOf("chromium")==-1,Kt.indexOf("chromium")!=-1,Kt.indexOf("safari")!=-1&&Kt.indexOf("chrome")==-1&&Kt.indexOf("chromium")==-1,Kt.indexOf("firefox")!=-1,Kt.indexOf("firefox/17")!=-1,Kt.indexOf("firefox/15")!=-1,Kt.indexOf("firefox/3")!=-1,Kt.indexOf("opera")!=-1,Kt.indexOf("msie 10")!=-1,Kt.indexOf("msie 9")!=-1,Kt.indexOf("msie 8")!=-1,Kt.indexOf("msie 7")!=-1,Kt.indexOf("msie ")!=-1;var Ed=function(e,t){var i;if(typeof Object.getOwnPropertyNames>"u"){for(i in t.prototype)(typeof e.prototype[i]>"u"||e.prototype[i]===Object.prototype[i])&&(e.prototype[i]=t.prototype[i]);for(i in t)typeof e[i]>"u"&&(e[i]=t[i]);e.$baseCtor=t}else{for(var r=Object.getOwnPropertyNames(t.prototype),n=0;n<r.length;n++)typeof Object.getOwnPropertyDescriptor(e.prototype,r[n])>"u"&&Object.defineProperty(e.prototype,r[n],Object.getOwnPropertyDescriptor(t.prototype,r[n]));for(i in t)typeof e[i]>"u"&&(e[i]=t[i]);e.$baseCtor=t}};x.Path=function(){return[]},x.Path.prototype.push=Array.prototype.push,x.Paths=function(){return[]},x.Paths.prototype.push=Array.prototype.push,x.PolyNode=function(){this.m_Parent=null,this.m_polygon=new x.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},x.PolyNode.prototype.IsHoleNode=function(){for(var e=!0,t=this.m_Parent;t!==null;)e=!e,t=t.m_Parent;return e},x.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},x.PolyNode.prototype.Contour=function(){return this.m_polygon},x.PolyNode.prototype.AddChild=function(e){var t=this.m_Childs.length;this.m_Childs.push(e),e.m_Parent=this,e.m_Index=t},x.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},x.PolyNode.prototype.GetNextSiblingUp=function(){return this.m_Parent===null?null:this.m_Index===this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},x.PolyNode.prototype.Childs=function(){return this.m_Childs},x.PolyNode.prototype.Parent=function(){return this.m_Parent},x.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},x.PolyTree=function(){this.m_AllPolys=[],x.PolyNode.call(this)},x.PolyTree.prototype.Clear=function(){for(var e=0,t=this.m_AllPolys.length;e<t;e++)this.m_AllPolys[e]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},x.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},x.PolyTree.prototype.Total=function(){var e=this.m_AllPolys.length;return e>0&&this.m_Childs[0]!==this.m_AllPolys[0]&&e--,e},Ed(x.PolyTree,x.PolyNode),x.Clear=function(e){e.length=0},x.PI=3.141592653589793,x.PI2=2*3.141592653589793,x.FPoint=function(){var e=arguments,t=e.length;if(this.X=0,this.Y=0,x.use_xyz)if(this.Z=0,t===3)this.X=e[0],this.Y=e[1],this.Z=e[2];else if(t===2)this.X=e[0],this.Y=e[1],this.Z=0;else if(t===1)if(e[0]instanceof x.FPoint){var i=e[0];this.X=i.X,this.Y=i.Y,this.Z=0}else{var r=e[0];typeof r.Z>"u"&&(r.Z=0),this.X=r.X,this.Y=r.Y,this.Z=r.Z}else this.X=0,this.Y=0,this.Z=0;else if(t===2)this.X=e[0],this.Y=e[1];else if(t===1)if(e[0]instanceof x.FPoint){var i=e[0];this.X=i.X,this.Y=i.Y}else{var r=e[0];this.X=r.X,this.Y=r.Y}else this.X=0,this.Y=0},x.FPoint.op_Equality=function(e,t){return e.X===t.X&&e.Y===t.Y},x.FPoint.op_Inequality=function(e,t){return e.X!==t.X||e.Y!==t.Y},x.FPoint0=function(){this.X=0,this.Y=0,x.use_xyz&&(this.Z=0)},x.FPoint0.prototype=x.FPoint.prototype,x.FPoint1=function(e){this.X=e.X,this.Y=e.Y,x.use_xyz&&(typeof e.Z>"u"?this.Z=0:this.Z=e.Z)},x.FPoint1.prototype=x.FPoint.prototype,x.FPoint1dp=function(e){this.X=e.X,this.Y=e.Y,x.use_xyz&&(this.Z=0)},x.FPoint1dp.prototype=x.FPoint.prototype,x.FPoint2=function(e,t,i){this.X=e,this.Y=t,x.use_xyz&&(typeof i>"u"?this.Z=0:this.Z=i)},x.FPoint2.prototype=x.FPoint.prototype,x.FRect=function(){var e=arguments,t=e.length;if(t===4)this.left=e[0],this.top=e[1],this.right=e[2],this.bottom=e[3];else if(t===1){var i=e[0];this.left=i.left,this.top=i.top,this.right=i.right,this.bottom=i.bottom}else this.left=0,this.top=0,this.right=0,this.bottom=0},x.FRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},x.FRect0.prototype=x.FRect.prototype,x.FRect1=function(e){this.left=e.left,this.top=e.top,this.right=e.right,this.bottom=e.bottom},x.FRect1.prototype=x.FRect.prototype,x.FRect4=function(e,t,i,r){this.left=e,this.top=t,this.right=i,this.bottom=r},x.FRect4.prototype=x.FRect.prototype,x.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},x.PolyType={ptSubject:0,ptClip:1},x.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},x.JoinType={jtSquare:0,jtRound:1,jtMiter:2},x.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},x.EdgeSide={esLeft:0,esRight:1},x.Direction={dRightToLeft:0,dLeftToRight:1},x.TEdge=function(){this.Bot=new x.FPoint0,this.Curr=new x.FPoint0,this.Top=new x.FPoint0,this.Delta=new x.FPoint0,this.Dx=0,this.PolyTyp=x.PolyType.ptSubject,this.Side=x.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},x.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new x.FPoint0},x.MyIntersectNodeSort=function(){},x.MyIntersectNodeSort.Compare=function(e,t){var i=t.Pt.Y-e.Pt.Y;return i>0?1:i<0?-1:0},x.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},x.Scanbeam=function(){this.Y=0,this.Next=null},x.Maxima=function(){this.X=0,this.Next=null,this.Prev=null},x.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},x.OutPt=function(){this.Idx=0,this.Pt=new x.FPoint0,this.Next=null,this.Prev=null},x.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new x.FPoint0},x.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_Scanbeam=null,this.m_PolyOuts=null,this.m_ActiveEdges=null},x.ClipperBase.horizontal=-34e37,x.ClipperBase.Skip=-2,x.ClipperBase.Unassigned=-1,x.ClipperBase.tolerance=1e-20,x.ClipperBase.maxValue=Math.sqrt(Number.MAX_VALUE),x.ClipperBase.minValue=Math.sqrt(Number.MIN_VALUE),x.ClipperBase.near_zero=function(e){return e>-x.ClipperBase.tolerance&&e<x.ClipperBase.tolerance},x.ClipperBase.IsHorizontal=function(e){return e.Delta.Y===0},x.ClipperBase.prototype.PointIsVertex=function(e,t){var i=t;do{if(x.FPoint.op_Equality(i.Pt,e))return!0;i=i.Next}while(i!==t);return!1},x.ClipperBase.prototype.PointOnLineSegment=function(e,t,i){return e.X===t.X&&e.Y===t.Y||e.X===i.X&&e.Y===i.Y||e.X>t.X==e.X<i.X&&e.Y>t.Y==e.Y<i.Y&&(e.X-t.X)*(i.Y-t.Y)===(i.X-t.X)*(e.Y-t.Y)},x.ClipperBase.prototype.PointOnPolygon=function(e,t){for(var i=t;;){if(this.PointOnLineSegment(e,i.Pt,i.Next.Pt))return!0;if(i=i.Next,i===t)break}return!1},x.ClipperBase.prototype.SlopesEqual=x.ClipperBase.SlopesEqual=function(){var e=arguments,t=e.length,i,r,n,o,s,a;return t===2?(i=e[0],r=e[1],i.Delta.Y*r.Delta.X===i.Delta.X*r.Delta.Y):t===3?(n=e[0],o=e[1],s=e[2],(n.Y-o.Y)*(o.X-s.X)-(n.X-o.X)*(o.Y-s.Y)===0):(n=e[0],o=e[1],s=e[2],a=e[3],(n.Y-o.Y)*(s.X-a.X)-(n.X-o.X)*(s.Y-a.Y)===0)},x.ClipperBase.SlopesEqual3=function(e,t){return e.Delta.Y*t.Delta.X===e.Delta.X*t.Delta.Y},x.ClipperBase.SlopesEqual4=function(e,t,i){return(e.Y-t.Y)*(t.X-i.X)-(e.X-t.X)*(t.Y-i.Y)===0},x.ClipperBase.SlopesEqual5=function(e,t,i,r){return(e.Y-t.Y)*(i.X-r.X)-(e.X-t.X)*(i.Y-r.Y)===0},x.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var e=0,t=this.m_edges.length;e<t;++e){for(var i=0,r=this.m_edges[e].length;i<r;++i)this.m_edges[e][i]=null;x.Clear(this.m_edges[e])}x.Clear(this.m_edges),this.m_HasOpenPaths=!1},x.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;this.m_MinimaList!==null;){var e=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=e}this.m_CurrentLM=null},x.ClipperBase.prototype.RangeTest=function(e){(e.X>x.ClipperBase.maxValue||e.X<-x.ClipperBase.maxValue||e.Y>x.ClipperBase.maxValue||e.Y<-x.ClipperBase.maxValue||e.X>0&&e.X<x.ClipperBase.minValue||e.Y>0&&e.Y<x.ClipperBase.minValue||e.X<0&&e.X>-x.ClipperBase.minValue||e.Y<0&&e.Y>-x.ClipperBase.minValue)&&x.Error("Coordinate outside allowed range in RangeTest().")},x.ClipperBase.prototype.InitEdge=function(e,t,i,r){e.Next=t,e.Prev=i,e.Curr.X=r.X,e.Curr.Y=r.Y,x.use_xyz&&(e.Curr.Z=r.Z),e.OutIdx=-1},x.ClipperBase.prototype.InitEdge2=function(e,t){e.Curr.Y>=e.Next.Curr.Y?(e.Bot.X=e.Curr.X,e.Bot.Y=e.Curr.Y,x.use_xyz&&(e.Bot.Z=e.Curr.Z),e.Top.X=e.Next.Curr.X,e.Top.Y=e.Next.Curr.Y,x.use_xyz&&(e.Top.Z=e.Next.Curr.Z)):(e.Top.X=e.Curr.X,e.Top.Y=e.Curr.Y,x.use_xyz&&(e.Top.Z=e.Curr.Z),e.Bot.X=e.Next.Curr.X,e.Bot.Y=e.Next.Curr.Y,x.use_xyz&&(e.Bot.Z=e.Next.Curr.Z)),this.SetDx(e),e.PolyTyp=t},x.ClipperBase.prototype.FindNextLocMin=function(e){for(var t;;){for(;x.FPoint.op_Inequality(e.Bot,e.Prev.Bot)||x.FPoint.op_Equality(e.Curr,e.Top);)e=e.Next;if(e.Dx!==x.ClipperBase.horizontal&&e.Prev.Dx!==x.ClipperBase.horizontal)break;for(;e.Prev.Dx===x.ClipperBase.horizontal;)e=e.Prev;for(t=e;e.Dx===x.ClipperBase.horizontal;)e=e.Next;if(e.Top.Y!==e.Prev.Bot.Y){t.Prev.Bot.X<e.Bot.X&&(e=t);break}}return e},x.ClipperBase.prototype.ProcessBound=function(e,t){var i,r=e,n;if(r.OutIdx===x.ClipperBase.Skip){if(e=r,t){for(;e.Top.Y===e.Next.Bot.Y;)e=e.Next;for(;e!==r&&e.Dx===x.ClipperBase.horizontal;)e=e.Prev}else{for(;e.Top.Y===e.Prev.Bot.Y;)e=e.Prev;for(;e!==r&&e.Dx===x.ClipperBase.horizontal;)e=e.Next}if(e===r)t?r=e.Next:r=e.Prev;else{t?e=r.Next:e=r.Prev;var o=new x.LocalMinima;o.Next=null,o.Y=e.Bot.Y,o.LeftBound=null,o.RightBound=e,e.WindDelta=0,r=this.ProcessBound(e,t),this.InsertLocalMinima(o)}return r}if(e.Dx===x.ClipperBase.horizontal&&(t?i=e.Prev:i=e.Next,i.Dx===x.ClipperBase.horizontal?i.Bot.X!==e.Bot.X&&i.Top.X!==e.Bot.X&&this.ReverseHorizontal(e):i.Bot.X!==e.Bot.X&&this.ReverseHorizontal(e)),i=e,t){for(;r.Top.Y===r.Next.Bot.Y&&r.Next.OutIdx!==x.ClipperBase.Skip;)r=r.Next;if(r.Dx===x.ClipperBase.horizontal&&r.Next.OutIdx!==x.ClipperBase.Skip){for(n=r;n.Prev.Dx===x.ClipperBase.horizontal;)n=n.Prev;n.Prev.Top.X>r.Next.Top.X&&(r=n.Prev)}for(;e!==r;)e.NextInLML=e.Next,e.Dx===x.ClipperBase.horizontal&&e!==i&&e.Bot.X!==e.Prev.Top.X&&this.ReverseHorizontal(e),e=e.Next;e.Dx===x.ClipperBase.horizontal&&e!==i&&e.Bot.X!==e.Prev.Top.X&&this.ReverseHorizontal(e),r=r.Next}else{for(;r.Top.Y===r.Prev.Bot.Y&&r.Prev.OutIdx!==x.ClipperBase.Skip;)r=r.Prev;if(r.Dx===x.ClipperBase.horizontal&&r.Prev.OutIdx!==x.ClipperBase.Skip){for(n=r;n.Next.Dx===x.ClipperBase.horizontal;)n=n.Next;(n.Next.Top.X===r.Prev.Top.X||n.Next.Top.X>r.Prev.Top.X)&&(r=n.Next)}for(;e!==r;)e.NextInLML=e.Prev,e.Dx===x.ClipperBase.horizontal&&e!==i&&e.Bot.X!==e.Next.Top.X&&this.ReverseHorizontal(e),e=e.Prev;e.Dx===x.ClipperBase.horizontal&&e!==i&&e.Bot.X!==e.Next.Top.X&&this.ReverseHorizontal(e),r=r.Prev}return r},x.ClipperBase.prototype.AddPath=function(e,t,i){x.use_lines?!i&&t===x.PolyType.ptClip&&x.Error("AddPath: Open paths must be subject."):i||x.Error("AddPath: Open paths have been disabled.");var r=e.length-1;if(i)for(;r>0&&x.FPoint.op_Equality(e[r],e[0]);)--r;for(;r>0&&x.FPoint.op_Equality(e[r],e[r-1]);)--r;if(i&&r<2||!i&&r<1)return!1;for(var n=new Array,o=0;o<=r;o++)n.push(new x.TEdge);var s=!0;n[1].Curr.X=e[1].X,n[1].Curr.Y=e[1].Y,x.use_xyz&&(n[1].Curr.Z=e[1].Z),this.RangeTest(e[0]),this.RangeTest(e[r]),this.InitEdge(n[0],n[1],n[r],e[0]),this.InitEdge(n[r],n[0],n[r-1],e[r]);for(var o=r-1;o>=1;--o)this.RangeTest(e[o]),this.InitEdge(n[o],n[o+1],n[o-1],e[o]);for(var a=n[0],h=a,c=a;;){if(h.Curr===h.Next.Curr&&(i||h.Next!==a)){if(h===h.Next)break;h===a&&(a=h.Next),h=this.RemoveEdge(h),c=h;continue}if(h.Prev===h.Next)break;if(i&&x.ClipperBase.SlopesEqual4(h.Prev.Curr,h.Curr,h.Next.Curr)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(h.Prev.Curr,h.Curr,h.Next.Curr))){h===a&&(a=h.Next),h=this.RemoveEdge(h),h=h.Prev,c=h;continue}if(h=h.Next,h===c||!i&&h.Next===a)break}if(!i&&h===h.Next||i&&h.Prev===h.Next)return!1;i||(this.m_HasOpenPaths=!0,a.Prev.OutIdx=x.ClipperBase.Skip),h=a;do this.InitEdge2(h,t),h=h.Next,s&&h.Curr.Y!==a.Curr.Y&&(s=!1);while(h!==a);if(s){if(i)return!1;h.Prev.OutIdx=x.ClipperBase.Skip;var d=new x.LocalMinima;for(d.Next=null,d.Y=h.Bot.Y,d.LeftBound=null,d.RightBound=h,d.RightBound.Side=x.EdgeSide.esRight,d.RightBound.WindDelta=0;h.Bot.X!==h.Prev.Top.X&&this.ReverseHorizontal(h),h.Next.OutIdx!==x.ClipperBase.Skip;)h.NextInLML=h.Next,h=h.Next;return this.InsertLocalMinima(d),this.m_edges.push(n),!0}this.m_edges.push(n);var f,m=null;for(x.FPoint.op_Equality(h.Prev.Bot,h.Prev.Top)&&(h=h.Next);h=this.FindNextLocMin(h),h!==m;){m===null&&(m=h);var d=new x.LocalMinima;d.Next=null,d.Y=h.Bot.Y,h.Dx<h.Prev.Dx?(d.LeftBound=h.Prev,d.RightBound=h,f=!1):(d.LeftBound=h,d.RightBound=h.Prev,f=!0),d.LeftBound.Side=x.EdgeSide.esLeft,d.RightBound.Side=x.EdgeSide.esRight,i?d.LeftBound.Next===d.RightBound?d.LeftBound.WindDelta=-1:d.LeftBound.WindDelta=1:d.LeftBound.WindDelta=0,d.RightBound.WindDelta=-d.LeftBound.WindDelta,h=this.ProcessBound(d.LeftBound,f),h.OutIdx===x.ClipperBase.Skip&&(h=this.ProcessBound(h,f));var v=this.ProcessBound(d.RightBound,!f);v.OutIdx===x.ClipperBase.Skip&&(v=this.ProcessBound(v,!f)),d.LeftBound.OutIdx===x.ClipperBase.Skip?d.LeftBound=null:d.RightBound.OutIdx===x.ClipperBase.Skip&&(d.RightBound=null),this.InsertLocalMinima(d),f||(h=v)}return!0},x.ClipperBase.prototype.AddPaths=function(e,t,i){for(var r=!1,n=0,o=e.length;n<o;++n)this.AddPath(e[n],t,i)&&(r=!0);return r},x.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(e,t,i){return x.FPoint.op_Equality(e,i)||x.FPoint.op_Equality(e,t)||x.FPoint.op_Equality(i,t)?!1:e.X!==i.X?t.X>e.X==t.X<i.X:t.Y>e.Y==t.Y<i.Y},x.ClipperBase.prototype.RemoveEdge=function(e){e.Prev.Next=e.Next,e.Next.Prev=e.Prev;var t=e.Next;return e.Prev=null,t},x.ClipperBase.prototype.SetDx=function(e){e.Delta.X=e.Top.X-e.Bot.X,e.Delta.Y=e.Top.Y-e.Bot.Y,e.Delta.Y===0?e.Dx=x.ClipperBase.horizontal:e.Dx=e.Delta.X/e.Delta.Y},x.ClipperBase.prototype.InsertLocalMinima=function(e){if(this.m_MinimaList===null)this.m_MinimaList=e;else if(e.Y>=this.m_MinimaList.Y)e.Next=this.m_MinimaList,this.m_MinimaList=e;else{for(var t=this.m_MinimaList;t.Next!==null&&e.Y<t.Next.Y;)t=t.Next;e.Next=t.Next,t.Next=e}},x.ClipperBase.prototype.PopLocalMinima=function(e,t){return t.v=this.m_CurrentLM,this.m_CurrentLM!==null&&this.m_CurrentLM.Y===e?(this.m_CurrentLM=this.m_CurrentLM.Next,!0):!1},x.ClipperBase.prototype.ReverseHorizontal=function(e){var t=e.Top.X;e.Top.X=e.Bot.X,e.Bot.X=t,x.use_xyz&&(t=e.Top.Z,e.Top.Z=e.Bot.Z,e.Bot.Z=t)},x.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,this.m_CurrentLM!==null){this.m_Scanbeam=null;for(var e=this.m_MinimaList;e!==null;){this.InsertScanbeam(e.Y);var t=e.LeftBound;t!==null&&(t.Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,x.use_xyz&&(t.Curr.Z=t.Bot.Z),t.OutIdx=x.ClipperBase.Unassigned),t=e.RightBound,t!==null&&(t.Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,x.use_xyz&&(t.Curr.Z=t.Bot.Z),t.OutIdx=x.ClipperBase.Unassigned),e=e.Next}this.m_ActiveEdges=null}},x.ClipperBase.prototype.InsertScanbeam=function(e){if(this.m_Scanbeam===null)this.m_Scanbeam=new x.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=e;else if(e>this.m_Scanbeam.Y){var t=new x.Scanbeam;t.Y=e,t.Next=this.m_Scanbeam,this.m_Scanbeam=t}else{for(var i=this.m_Scanbeam;i.Next!==null&&e<=i.Next.Y;)i=i.Next;if(e===i.Y)return;var r=new x.Scanbeam;r.Y=e,r.Next=i.Next,i.Next=r}},x.ClipperBase.prototype.PopScanbeam=function(e){return this.m_Scanbeam===null?(e.v=0,!1):(e.v=this.m_Scanbeam.Y,this.m_Scanbeam=this.m_Scanbeam.Next,!0)},x.ClipperBase.prototype.LocalMinimaPending=function(){return this.m_CurrentLM!==null},x.ClipperBase.prototype.CreateOutRec=function(){var e=new x.OutRec;return e.Idx=x.ClipperBase.Unassigned,e.IsHole=!1,e.IsOpen=!1,e.FirstLeft=null,e.Pts=null,e.BottomPt=null,e.PolyNode=null,this.m_PolyOuts.push(e),e.Idx=this.m_PolyOuts.length-1,e},x.ClipperBase.prototype.DisposeOutRec=function(e){var t=this.m_PolyOuts[e];t.Pts=null,t=null,this.m_PolyOuts[e]=null},x.ClipperBase.prototype.UpdateEdgeIntoAEL=function(e){e.NextInLML===null&&x.Error("UpdateEdgeIntoAEL: invalid call");var t=e.PrevInAEL,i=e.NextInAEL;return e.NextInLML.OutIdx=e.OutIdx,t!==null?t.NextInAEL=e.NextInLML:this.m_ActiveEdges=e.NextInLML,i!==null&&(i.PrevInAEL=e.NextInLML),e.NextInLML.Side=e.Side,e.NextInLML.WindDelta=e.WindDelta,e.NextInLML.WindCnt=e.WindCnt,e.NextInLML.WindCnt2=e.WindCnt2,e=e.NextInLML,e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,e.PrevInAEL=t,e.NextInAEL=i,x.ClipperBase.IsHorizontal(e)||this.InsertScanbeam(e.Top.Y),e},x.ClipperBase.prototype.SwapPositionsInAEL=function(e,t){if(!(e.NextInAEL===e.PrevInAEL||t.NextInAEL===t.PrevInAEL)){if(e.NextInAEL===t){var i=t.NextInAEL;i!==null&&(i.PrevInAEL=e);var r=e.PrevInAEL;r!==null&&(r.NextInAEL=t),t.PrevInAEL=r,t.NextInAEL=e,e.PrevInAEL=t,e.NextInAEL=i}else if(t.NextInAEL===e){var n=e.NextInAEL;n!==null&&(n.PrevInAEL=t);var o=t.PrevInAEL;o!==null&&(o.NextInAEL=e),e.PrevInAEL=o,e.NextInAEL=t,t.PrevInAEL=e,t.NextInAEL=n}else{var s=e.NextInAEL,a=e.PrevInAEL;e.NextInAEL=t.NextInAEL,e.NextInAEL!==null&&(e.NextInAEL.PrevInAEL=e),e.PrevInAEL=t.PrevInAEL,e.PrevInAEL!==null&&(e.PrevInAEL.NextInAEL=e),t.NextInAEL=s,t.NextInAEL!==null&&(t.NextInAEL.PrevInAEL=t),t.PrevInAEL=a,t.PrevInAEL!==null&&(t.PrevInAEL.NextInAEL=t)}e.PrevInAEL===null?this.m_ActiveEdges=e:t.PrevInAEL===null&&(this.m_ActiveEdges=t)}},x.ClipperBase.prototype.DeleteFromAEL=function(e){var t=e.PrevInAEL,i=e.NextInAEL;t===null&&i===null&&e!==this.m_ActiveEdges||(t!==null?t.NextInAEL=i:this.m_ActiveEdges=i,i!==null&&(i.PrevInAEL=t),e.NextInAEL=null,e.PrevInAEL=null)},x.Clipper=function(e){typeof e>"u"&&(e=0),this.m_PolyOuts=null,this.m_ClipType=x.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=x.PolyFillType.pftEvenOdd,this.m_SubjFillType=x.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,x.ClipperBase.call(this),this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=x.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=(1&e)!==0,this.StrictlySimple=(2&e)!==0,this.PreserveCollinear=(4&e)!==0,x.use_xyz&&(this.ZFillFunction=null)},x.Clipper.ioReverseSolution=1,x.Clipper.ioStrictlySimple=2,x.Clipper.ioPreserveCollinear=4,x.Clipper.prototype.Clear=function(){this.m_edges.length!==0&&(this.DisposeAllPolyPts(),x.ClipperBase.prototype.Clear.call(this))},x.Clipper.prototype.InsertMaxima=function(e){var t=new x.Maxima;if(t.X=e,this.m_Maxima===null)this.m_Maxima=t,this.m_Maxima.Next=null,this.m_Maxima.Prev=null;else if(e<this.m_Maxima.X)t.Next=this.m_Maxima,t.Prev=null,this.m_Maxima=t;else{for(var i=this.m_Maxima;i.Next!==null&&e>=i.Next.X;)i=i.Next;if(e===i.X)return;t.Next=i.Next,t.Prev=i,i.Next!==null&&(i.Next.Prev=t),i.Next=t}},x.Clipper.prototype.Execute=function(){var e=arguments,t=e.length,i=e[1]instanceof x.PolyTree;if(t===4&&!i){var r=e[0],n=e[1],o=e[2],s=e[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&x.Error("Error: PolyTree struct is needed for open path clipping."),this.m_ExecuteLocked=!0,x.Clear(n),this.m_SubjFillType=o,this.m_ClipFillType=s,this.m_ClipType=r,this.m_UsingPolyTree=!1;try{var a=this.ExecuteInternal();a&&this.BuildResult(n)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return a}else if(t===4&&i){var r=e[0],h=e[1],o=e[2],s=e[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=o,this.m_ClipFillType=s,this.m_ClipType=r,this.m_UsingPolyTree=!0;try{var a=this.ExecuteInternal();a&&this.BuildResult2(h)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return a}else if(t===2&&!i){var r=e[0],n=e[1];return this.Execute(r,n,x.PolyFillType.pftEvenOdd,x.PolyFillType.pftEvenOdd)}else if(t===2&&i){var r=e[0],h=e[1];return this.Execute(r,h,x.PolyFillType.pftEvenOdd,x.PolyFillType.pftEvenOdd)}},x.Clipper.prototype.FixHoleLinkage=function(e){if(!(e.FirstLeft===null||e.IsHole!==e.FirstLeft.IsHole&&e.FirstLeft.Pts!==null)){for(var t=e.FirstLeft;t!==null&&(t.IsHole===e.IsHole||t.Pts===null);)t=t.FirstLeft;e.FirstLeft=t}},x.Clipper.prototype.ExecuteInternal=function(){try{this.Reset(),this.m_SortedEdges=null,this.m_Maxima=null;var e={},t={};if(!this.PopScanbeam(e))return!1;for(this.InsertLocalMinimaIntoAEL(e.v);this.PopScanbeam(t)||this.LocalMinimaPending();){if(this.ProcessHorizontals(),this.m_GhostJoins.length=0,!this.ProcessIntersections(t.v))return!1;this.ProcessEdgesAtTopOfScanbeam(t.v),e.v=t.v,this.InsertLocalMinimaIntoAEL(e.v)}var i,r,n;for(r=0,n=this.m_PolyOuts.length;r<n;r++)i=this.m_PolyOuts[r],!(i.Pts===null||i.IsOpen)&&(i.IsHole^this.ReverseSolution)==this.Area$1(i)>0&&this.ReversePolyPtLinks(i.Pts);for(this.JoinCommonEdges(),r=0,n=this.m_PolyOuts.length;r<n;r++)i=this.m_PolyOuts[r],i.Pts!==null&&(i.IsOpen?this.FixupOutPolyline(i):this.FixupOutPolygon(i));return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{this.m_Joins.length=0,this.m_GhostJoins.length=0}},x.Clipper.prototype.DisposeAllPolyPts=function(){for(var e=0,t=this.m_PolyOuts.length;e<t;++e)this.DisposeOutRec(e);x.Clear(this.m_PolyOuts)},x.Clipper.prototype.AddJoin=function(e,t,i){var r=new x.Join;r.OutPt1=e,r.OutPt2=t,r.OffPt.X=i.X,r.OffPt.Y=i.Y,x.use_xyz&&(r.OffPt.Z=i.Z),this.m_Joins.push(r)},x.Clipper.prototype.AddGhostJoin=function(e,t){var i=new x.Join;i.OutPt1=e,i.OffPt.X=t.X,i.OffPt.Y=t.Y,x.use_xyz&&(i.OffPt.Z=t.Z),this.m_GhostJoins.push(i)},x.Clipper.prototype.SetZ=function(e,t,i){if(this.ZFillFunction!==null){if(e.Z!==0||this.ZFillFunction===null)return;x.FPoint.op_Equality(e,t.Bot)?e.Z=t.Bot.Z:x.FPoint.op_Equality(e,t.Top)?e.Z=t.Top.Z:x.FPoint.op_Equality(e,i.Bot)?e.Z=i.Bot.Z:x.FPoint.op_Equality(e,i.Top)?e.Z=i.Top.Z:this.ZFillFunction(t.Bot,t.Top,i.Bot,i.Top,e)}},x.Clipper.prototype.InsertLocalMinimaIntoAEL=function(e){for(var t={},i,r;this.PopLocalMinima(e,t);){i=t.v.LeftBound,r=t.v.RightBound;var n=null;if(i===null?(this.InsertEdgeIntoAEL(r,null),this.SetWindingCount(r),this.IsContributing(r)&&(n=this.AddOutPt(r,r.Bot))):r===null?(this.InsertEdgeIntoAEL(i,null),this.SetWindingCount(i),this.IsContributing(i)&&(n=this.AddOutPt(i,i.Bot)),this.InsertScanbeam(i.Top.Y)):(this.InsertEdgeIntoAEL(i,null),this.InsertEdgeIntoAEL(r,i),this.SetWindingCount(i),r.WindCnt=i.WindCnt,r.WindCnt2=i.WindCnt2,this.IsContributing(i)&&(n=this.AddLocalMinPoly(i,r,i.Bot)),this.InsertScanbeam(i.Top.Y)),r!==null&&(x.ClipperBase.IsHorizontal(r)?(r.NextInLML!==null&&this.InsertScanbeam(r.NextInLML.Top.Y),this.AddEdgeToSEL(r)):this.InsertScanbeam(r.Top.Y)),!(i===null||r===null)){if(n!==null&&x.ClipperBase.IsHorizontal(r)&&this.m_GhostJoins.length>0&&r.WindDelta!==0)for(var o=0,s=this.m_GhostJoins.length;o<s;o++){var a=this.m_GhostJoins[o];this.HorzSegmentsOverlap(a.OutPt1.Pt.X,a.OffPt.X,r.Bot.X,r.Top.X)&&this.AddJoin(a.OutPt1,n,a.OffPt)}if(i.OutIdx>=0&&i.PrevInAEL!==null&&i.PrevInAEL.Curr.X===i.Bot.X&&i.PrevInAEL.OutIdx>=0&&x.ClipperBase.SlopesEqual5(i.PrevInAEL.Curr,i.PrevInAEL.Top,i.Curr,i.Top)&&i.WindDelta!==0&&i.PrevInAEL.WindDelta!==0){var h=this.AddOutPt(i.PrevInAEL,i.Bot);this.AddJoin(n,h,i.Top)}if(i.NextInAEL!==r){if(r.OutIdx>=0&&r.PrevInAEL.OutIdx>=0&&x.ClipperBase.SlopesEqual5(r.PrevInAEL.Curr,r.PrevInAEL.Top,r.Curr,r.Top)&&r.WindDelta!==0&&r.PrevInAEL.WindDelta!==0){var h=this.AddOutPt(r.PrevInAEL,r.Bot);this.AddJoin(n,h,r.Top)}var c=i.NextInAEL;if(c!==null)for(;c!==r;)this.IntersectEdges(r,c,i.Curr),c=c.NextInAEL}}}},x.Clipper.prototype.InsertEdgeIntoAEL=function(e,t){if(this.m_ActiveEdges===null)e.PrevInAEL=null,e.NextInAEL=null,this.m_ActiveEdges=e;else if(t===null&&this.E2InsertsBeforeE1(this.m_ActiveEdges,e))e.PrevInAEL=null,e.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=e,this.m_ActiveEdges=e;else{for(t===null&&(t=this.m_ActiveEdges);t.NextInAEL!==null&&!this.E2InsertsBeforeE1(t.NextInAEL,e);)t=t.NextInAEL;e.NextInAEL=t.NextInAEL,t.NextInAEL!==null&&(t.NextInAEL.PrevInAEL=e),e.PrevInAEL=t,t.NextInAEL=e}},x.Clipper.prototype.E2InsertsBeforeE1=function(e,t){return t.Curr.X===e.Curr.X?t.Top.Y>e.Top.Y?t.Top.X<x.Clipper.TopX(e,t.Top.Y):e.Top.X>x.Clipper.TopX(t,e.Top.Y):t.Curr.X<e.Curr.X},x.Clipper.prototype.IsEvenOddFillType=function(e){return e.PolyTyp===x.PolyType.ptSubject?this.m_SubjFillType===x.PolyFillType.pftEvenOdd:this.m_ClipFillType===x.PolyFillType.pftEvenOdd},x.Clipper.prototype.IsEvenOddAltFillType=function(e){return e.PolyTyp===x.PolyType.ptSubject?this.m_ClipFillType===x.PolyFillType.pftEvenOdd:this.m_SubjFillType===x.PolyFillType.pftEvenOdd},x.Clipper.prototype.IsContributing=function(e){var t,i;switch(e.PolyTyp===x.PolyType.ptSubject?(t=this.m_SubjFillType,i=this.m_ClipFillType):(t=this.m_ClipFillType,i=this.m_SubjFillType),t){case x.PolyFillType.pftEvenOdd:if(e.WindDelta===0&&e.WindCnt!==1)return!1;break;case x.PolyFillType.pftNonZero:if(Math.abs(e.WindCnt)!==1)return!1;break;case x.PolyFillType.pftPositive:if(e.WindCnt!==1)return!1;break;default:if(e.WindCnt!==-1)return!1;break}switch(this.m_ClipType){case x.ClipType.ctIntersection:switch(i){case x.PolyFillType.pftEvenOdd:case x.PolyFillType.pftNonZero:return e.WindCnt2!==0;case x.PolyFillType.pftPositive:return e.WindCnt2>0;default:return e.WindCnt2<0}case x.ClipType.ctUnion:switch(i){case x.PolyFillType.pftEvenOdd:case x.PolyFillType.pftNonZero:return e.WindCnt2===0;case x.PolyFillType.pftPositive:return e.WindCnt2<=0;default:return e.WindCnt2>=0}case x.ClipType.ctDifference:if(e.PolyTyp===x.PolyType.ptSubject)switch(i){case x.PolyFillType.pftEvenOdd:case x.PolyFillType.pftNonZero:return e.WindCnt2===0;case x.PolyFillType.pftPositive:return e.WindCnt2<=0;default:return e.WindCnt2>=0}else switch(i){case x.PolyFillType.pftEvenOdd:case x.PolyFillType.pftNonZero:return e.WindCnt2!==0;case x.PolyFillType.pftPositive:return e.WindCnt2>0;default:return e.WindCnt2<0}case x.ClipType.ctXor:if(e.WindDelta===0)switch(i){case x.PolyFillType.pftEvenOdd:case x.PolyFillType.pftNonZero:return e.WindCnt2===0;case x.PolyFillType.pftPositive:return e.WindCnt2<=0;default:return e.WindCnt2>=0}else return!0}return!0},x.Clipper.prototype.SetWindingCount=function(e){for(var t=e.PrevInAEL;t!==null&&(t.PolyTyp!==e.PolyTyp||t.WindDelta===0);)t=t.PrevInAEL;if(t===null){var i=e.PolyTyp===x.PolyType.ptSubject?this.m_SubjFillType:this.m_ClipFillType;e.WindDelta===0?e.WindCnt=i===x.PolyFillType.pftNegative?-1:1:e.WindCnt=e.WindDelta,e.WindCnt2=0,t=this.m_ActiveEdges}else if(e.WindDelta===0&&this.m_ClipType!==x.ClipType.ctUnion)e.WindCnt=1,e.WindCnt2=t.WindCnt2,t=t.NextInAEL;else if(this.IsEvenOddFillType(e)){if(e.WindDelta===0){for(var r=!0,n=t.PrevInAEL;n!==null;)n.PolyTyp===t.PolyTyp&&n.WindDelta!==0&&(r=!r),n=n.PrevInAEL;e.WindCnt=r?0:1}else e.WindCnt=e.WindDelta;e.WindCnt2=t.WindCnt2,t=t.NextInAEL}else t.WindCnt*t.WindDelta<0?Math.abs(t.WindCnt)>1?t.WindDelta*e.WindDelta<0?e.WindCnt=t.WindCnt:e.WindCnt=t.WindCnt+e.WindDelta:e.WindCnt=e.WindDelta===0?1:e.WindDelta:e.WindDelta===0?e.WindCnt=t.WindCnt<0?t.WindCnt-1:t.WindCnt+1:t.WindDelta*e.WindDelta<0?e.WindCnt=t.WindCnt:e.WindCnt=t.WindCnt+e.WindDelta,e.WindCnt2=t.WindCnt2,t=t.NextInAEL;if(this.IsEvenOddAltFillType(e))for(;t!==e;)t.WindDelta!==0&&(e.WindCnt2=e.WindCnt2===0?1:0),t=t.NextInAEL;else for(;t!==e;)e.WindCnt2+=t.WindDelta,t=t.NextInAEL},x.Clipper.prototype.AddEdgeToSEL=function(e){this.m_SortedEdges===null?(this.m_SortedEdges=e,e.PrevInSEL=null,e.NextInSEL=null):(e.NextInSEL=this.m_SortedEdges,e.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=e,this.m_SortedEdges=e)},x.Clipper.prototype.PopEdgeFromSEL=function(e){if(e.v=this.m_SortedEdges,e.v===null)return!1;var t=e.v;return this.m_SortedEdges=e.v.NextInSEL,this.m_SortedEdges!==null&&(this.m_SortedEdges.PrevInSEL=null),t.NextInSEL=null,t.PrevInSEL=null,!0},x.Clipper.prototype.CopyAELToSEL=function(){var e=this.m_ActiveEdges;for(this.m_SortedEdges=e;e!==null;)e.PrevInSEL=e.PrevInAEL,e.NextInSEL=e.NextInAEL,e=e.NextInAEL},x.Clipper.prototype.SwapPositionsInSEL=function(e,t){if(!(e.NextInSEL===null&&e.PrevInSEL===null)&&!(t.NextInSEL===null&&t.PrevInSEL===null)){if(e.NextInSEL===t){var i=t.NextInSEL;i!==null&&(i.PrevInSEL=e);var r=e.PrevInSEL;r!==null&&(r.NextInSEL=t),t.PrevInSEL=r,t.NextInSEL=e,e.PrevInSEL=t,e.NextInSEL=i}else if(t.NextInSEL===e){var i=e.NextInSEL;i!==null&&(i.PrevInSEL=t);var r=t.PrevInSEL;r!==null&&(r.NextInSEL=e),e.PrevInSEL=r,e.NextInSEL=t,t.PrevInSEL=e,t.NextInSEL=i}else{var i=e.NextInSEL,r=e.PrevInSEL;e.NextInSEL=t.NextInSEL,e.NextInSEL!==null&&(e.NextInSEL.PrevInSEL=e),e.PrevInSEL=t.PrevInSEL,e.PrevInSEL!==null&&(e.PrevInSEL.NextInSEL=e),t.NextInSEL=i,t.NextInSEL!==null&&(t.NextInSEL.PrevInSEL=t),t.PrevInSEL=r,t.PrevInSEL!==null&&(t.PrevInSEL.NextInSEL=t)}e.PrevInSEL===null?this.m_SortedEdges=e:t.PrevInSEL===null&&(this.m_SortedEdges=t)}},x.Clipper.prototype.AddLocalMaxPoly=function(e,t,i){this.AddOutPt(e,i),t.WindDelta===0&&this.AddOutPt(t,i),e.OutIdx===t.OutIdx?(e.OutIdx=-1,t.OutIdx=-1):e.OutIdx<t.OutIdx?this.AppendPolygon(e,t):this.AppendPolygon(t,e)},x.Clipper.prototype.AddLocalMinPoly=function(e,t,i){var r,n,o;if(x.ClipperBase.IsHorizontal(t)||e.Dx>t.Dx?(r=this.AddOutPt(e,i),t.OutIdx=e.OutIdx,e.Side=x.EdgeSide.esLeft,t.Side=x.EdgeSide.esRight,n=e,n.PrevInAEL===t?o=t.PrevInAEL:o=n.PrevInAEL):(r=this.AddOutPt(t,i),e.OutIdx=t.OutIdx,e.Side=x.EdgeSide.esRight,t.Side=x.EdgeSide.esLeft,n=t,n.PrevInAEL===e?o=e.PrevInAEL:o=n.PrevInAEL),o!==null&&o.OutIdx>=0&&o.Top.Y<i.Y&&n.Top.Y<i.Y){var s=x.Clipper.TopX(o,i.Y),a=x.Clipper.TopX(n,i.Y);if(s===a&&n.WindDelta!==0&&o.WindDelta!==0&&x.ClipperBase.SlopesEqual5(new x.FPoint2(s,i.Y),o.Top,new x.FPoint2(a,i.Y),n.Top)){var h=this.AddOutPt(o,i);this.AddJoin(r,h,n.Top)}}return r},x.Clipper.prototype.AddOutPt=function(e,t){if(e.OutIdx<0){var i=this.CreateOutRec();i.IsOpen=e.WindDelta===0;var r=new x.OutPt;return i.Pts=r,r.Idx=i.Idx,r.Pt.X=t.X,r.Pt.Y=t.Y,x.use_xyz&&(r.Pt.Z=t.Z),r.Next=r,r.Prev=r,i.IsOpen||this.SetHoleState(e,i),e.OutIdx=i.Idx,r}else{var i=this.m_PolyOuts[e.OutIdx],n=i.Pts,o=e.Side===x.EdgeSide.esLeft;if(o&&x.FPoint.op_Equality(t,n.Pt))return n;if(!o&&x.FPoint.op_Equality(t,n.Prev.Pt))return n.Prev;var r=new x.OutPt;return r.Idx=i.Idx,r.Pt.X=t.X,r.Pt.Y=t.Y,x.use_xyz&&(r.Pt.Z=t.Z),r.Next=n,r.Prev=n.Prev,r.Prev.Next=r,n.Prev=r,o&&(i.Pts=r),r}},x.Clipper.prototype.GetLastOutPt=function(e){var t=this.m_PolyOuts[e.OutIdx];return e.Side===x.EdgeSide.esLeft?t.Pts:t.Pts.Prev},x.Clipper.prototype.SwapPoints=function(e,t){var i=new x.FPoint1(e.Value);e.Value.X=t.Value.X,e.Value.Y=t.Value.Y,x.use_xyz&&(e.Value.Z=t.Value.Z),t.Value.X=i.X,t.Value.Y=i.Y,x.use_xyz&&(t.Value.Z=i.Z)},x.Clipper.prototype.HorzSegmentsOverlap=function(e,t,i,r){var n;return e>t&&(n=e,e=t,t=n),i>r&&(n=i,i=r,r=n),e<r&&i<t},x.Clipper.prototype.SetHoleState=function(e,t){for(var i=e.PrevInAEL,r=null;i!==null;)i.OutIdx>=0&&i.WindDelta!==0&&(r===null?r=i:r.OutIdx===i.OutIdx&&(r=null)),i=i.PrevInAEL;r===null?(t.FirstLeft=null,t.IsHole=!1):(t.FirstLeft=this.m_PolyOuts[r.OutIdx],t.IsHole=!t.FirstLeft.IsHole)},x.Clipper.prototype.GetDx=function(e,t){return e.Y===t.Y?x.ClipperBase.horizontal:(t.X-e.X)/(t.Y-e.Y)},x.Clipper.prototype.FirstIsBottomPt=function(e,t){for(var i=e.Prev;x.FPoint.op_Equality(i.Pt,e.Pt)&&i!==e;)i=i.Prev;var r=Math.abs(this.GetDx(e.Pt,i.Pt));for(i=e.Next;x.FPoint.op_Equality(i.Pt,e.Pt)&&i!==e;)i=i.Next;var n=Math.abs(this.GetDx(e.Pt,i.Pt));for(i=t.Prev;x.FPoint.op_Equality(i.Pt,t.Pt)&&i!==t;)i=i.Prev;var o=Math.abs(this.GetDx(t.Pt,i.Pt));for(i=t.Next;x.FPoint.op_Equality(i.Pt,t.Pt)&&i!==t;)i=i.Next;var s=Math.abs(this.GetDx(t.Pt,i.Pt));return Math.max(r,n)===Math.max(o,s)&&Math.min(r,n)===Math.min(o,s)?this.Area(e)>0:r>=o&&r>=s||n>=o&&n>=s},x.Clipper.prototype.GetBottomPt=function(e){for(var t=null,i=e.Next;i!==e;)i.Pt.Y>e.Pt.Y?(e=i,t=null):i.Pt.Y===e.Pt.Y&&i.Pt.X<=e.Pt.X&&(i.Pt.X<e.Pt.X?(t=null,e=i):i.Next!==e&&i.Prev!==e&&(t=i)),i=i.Next;if(t!==null)for(;t!==i;)for(this.FirstIsBottomPt(i,t)||(e=t),t=t.Next;x.FPoint.op_Inequality(t.Pt,e.Pt);)t=t.Next;return e},x.Clipper.prototype.GetLowermostRec=function(e,t){e.BottomPt===null&&(e.BottomPt=this.GetBottomPt(e.Pts)),t.BottomPt===null&&(t.BottomPt=this.GetBottomPt(t.Pts));var i=e.BottomPt,r=t.BottomPt;return i.Pt.Y>r.Pt.Y?e:i.Pt.Y<r.Pt.Y?t:i.Pt.X<r.Pt.X?e:i.Pt.X>r.Pt.X||i.Next===i?t:r.Next===r||this.FirstIsBottomPt(i,r)?e:t},x.Clipper.prototype.OutRec1RightOfOutRec2=function(e,t){do if(e=e.FirstLeft,e===t)return!0;while(e!==null);return!1},x.Clipper.prototype.GetOutRec=function(e){for(var t=this.m_PolyOuts[e];t!==this.m_PolyOuts[t.Idx];)t=this.m_PolyOuts[t.Idx];return t},x.Clipper.prototype.AppendPolygon=function(e,t){var i=this.m_PolyOuts[e.OutIdx],r=this.m_PolyOuts[t.OutIdx],n;this.OutRec1RightOfOutRec2(i,r)?n=r:this.OutRec1RightOfOutRec2(r,i)?n=i:n=this.GetLowermostRec(i,r);var o=i.Pts,s=o.Prev,a=r.Pts,h=a.Prev;e.Side===x.EdgeSide.esLeft?t.Side===x.EdgeSide.esLeft?(this.ReversePolyPtLinks(a),a.Next=o,o.Prev=a,s.Next=h,h.Prev=s,i.Pts=h):(h.Next=o,o.Prev=h,a.Prev=s,s.Next=a,i.Pts=a):t.Side===x.EdgeSide.esRight?(this.ReversePolyPtLinks(a),s.Next=h,h.Prev=s,a.Next=o,o.Prev=a):(s.Next=a,a.Prev=s,o.Prev=h,h.Next=o),i.BottomPt=null,n===r&&(r.FirstLeft!==i&&(i.FirstLeft=r.FirstLeft),i.IsHole=r.IsHole),r.Pts=null,r.BottomPt=null,r.FirstLeft=i;var c=e.OutIdx,d=t.OutIdx;e.OutIdx=-1,t.OutIdx=-1;for(var f=this.m_ActiveEdges;f!==null;){if(f.OutIdx===d){f.OutIdx=c,f.Side=e.Side;break}f=f.NextInAEL}r.Idx=i.Idx},x.Clipper.prototype.ReversePolyPtLinks=function(e){if(e!==null){var t,i;t=e;do i=t.Next,t.Next=t.Prev,t.Prev=i,t=i;while(t!==e)}},x.Clipper.SwapSides=function(e,t){var i=e.Side;e.Side=t.Side,t.Side=i},x.Clipper.SwapPolyIndexes=function(e,t){var i=e.OutIdx;e.OutIdx=t.OutIdx,t.OutIdx=i},x.Clipper.prototype.IntersectEdges=function(e,t,i){var r=e.OutIdx>=0,n=t.OutIdx>=0;if(x.use_xyz&&this.SetZ(i,e,t),x.use_lines&&(e.WindDelta===0||t.WindDelta===0)){if(e.WindDelta===0&&t.WindDelta===0)return;e.PolyTyp===t.PolyTyp&&e.WindDelta!==t.WindDelta&&this.m_ClipType===x.ClipType.ctUnion?e.WindDelta===0?n&&(this.AddOutPt(e,i),r&&(e.OutIdx=-1)):r&&(this.AddOutPt(t,i),n&&(t.OutIdx=-1)):e.PolyTyp!==t.PolyTyp&&(e.WindDelta===0&&Math.abs(t.WindCnt)===1&&(this.m_ClipType!==x.ClipType.ctUnion||t.WindCnt2===0)?(this.AddOutPt(e,i),r&&(e.OutIdx=-1)):t.WindDelta===0&&Math.abs(e.WindCnt)===1&&(this.m_ClipType!==x.ClipType.ctUnion||e.WindCnt2===0)&&(this.AddOutPt(t,i),n&&(t.OutIdx=-1)));return}if(e.PolyTyp===t.PolyTyp)if(this.IsEvenOddFillType(e)){var o=e.WindCnt;e.WindCnt=t.WindCnt,t.WindCnt=o}else e.WindCnt+t.WindDelta===0?e.WindCnt=-e.WindCnt:e.WindCnt+=t.WindDelta,t.WindCnt-e.WindDelta===0?t.WindCnt=-t.WindCnt:t.WindCnt-=e.WindDelta;else this.IsEvenOddFillType(t)?e.WindCnt2=e.WindCnt2===0?1:0:e.WindCnt2+=t.WindDelta,this.IsEvenOddFillType(e)?t.WindCnt2=t.WindCnt2===0?1:0:t.WindCnt2-=e.WindDelta;var s,a,h,c;e.PolyTyp===x.PolyType.ptSubject?(s=this.m_SubjFillType,h=this.m_ClipFillType):(s=this.m_ClipFillType,h=this.m_SubjFillType),t.PolyTyp===x.PolyType.ptSubject?(a=this.m_SubjFillType,c=this.m_ClipFillType):(a=this.m_ClipFillType,c=this.m_SubjFillType);var d,f;switch(s){case x.PolyFillType.pftPositive:d=e.WindCnt;break;case x.PolyFillType.pftNegative:d=-e.WindCnt;break;default:d=Math.abs(e.WindCnt);break}switch(a){case x.PolyFillType.pftPositive:f=t.WindCnt;break;case x.PolyFillType.pftNegative:f=-t.WindCnt;break;default:f=Math.abs(t.WindCnt);break}if(r&&n)d!==0&&d!==1||f!==0&&f!==1||e.PolyTyp!==t.PolyTyp&&this.m_ClipType!==x.ClipType.ctXor?this.AddLocalMaxPoly(e,t,i):(this.AddOutPt(e,i),this.AddOutPt(t,i),x.Clipper.SwapSides(e,t),x.Clipper.SwapPolyIndexes(e,t));else if(r)(f===0||f===1)&&(this.AddOutPt(e,i),x.Clipper.SwapSides(e,t),x.Clipper.SwapPolyIndexes(e,t));else if(n)(d===0||d===1)&&(this.AddOutPt(t,i),x.Clipper.SwapSides(e,t),x.Clipper.SwapPolyIndexes(e,t));else if((d===0||d===1)&&(f===0||f===1)){var m,v;switch(h){case x.PolyFillType.pftPositive:m=e.WindCnt2;break;case x.PolyFillType.pftNegative:m=-e.WindCnt2;break;default:m=Math.abs(e.WindCnt2);break}switch(c){case x.PolyFillType.pftPositive:v=t.WindCnt2;break;case x.PolyFillType.pftNegative:v=-t.WindCnt2;break;default:v=Math.abs(t.WindCnt2);break}if(e.PolyTyp!==t.PolyTyp)this.AddLocalMinPoly(e,t,i);else if(d===1&&f===1)switch(this.m_ClipType){case x.ClipType.ctIntersection:m>0&&v>0&&this.AddLocalMinPoly(e,t,i);break;case x.ClipType.ctUnion:m<=0&&v<=0&&this.AddLocalMinPoly(e,t,i);break;case x.ClipType.ctDifference:(e.PolyTyp===x.PolyType.ptClip&&m>0&&v>0||e.PolyTyp===x.PolyType.ptSubject&&m<=0&&v<=0)&&this.AddLocalMinPoly(e,t,i);break;case x.ClipType.ctXor:this.AddLocalMinPoly(e,t,i);break}else x.Clipper.SwapSides(e,t)}},x.Clipper.prototype.DeleteFromSEL=function(e){var t=e.PrevInSEL,i=e.NextInSEL;t===null&&i===null&&e!==this.m_SortedEdges||(t!==null?t.NextInSEL=i:this.m_SortedEdges=i,i!==null&&(i.PrevInSEL=t),e.NextInSEL=null,e.PrevInSEL=null)},x.Clipper.prototype.ProcessHorizontals=function(){for(var e={};this.PopEdgeFromSEL(e);)this.ProcessHorizontal(e.v)},x.Clipper.prototype.GetHorzDirection=function(e,t){e.Bot.X<e.Top.X?(t.Left=e.Bot.X,t.Right=e.Top.X,t.Dir=x.Direction.dLeftToRight):(t.Left=e.Top.X,t.Right=e.Bot.X,t.Dir=x.Direction.dRightToLeft)},x.Clipper.prototype.ProcessHorizontal=function(e){var t={Dir:null,Left:null,Right:null};this.GetHorzDirection(e,t);for(var i=t.Dir,r=t.Left,n=t.Right,o=e.WindDelta===0,s=e,a=null;s.NextInLML!==null&&x.ClipperBase.IsHorizontal(s.NextInLML);)s=s.NextInLML;s.NextInLML===null&&(a=this.GetMaximaPair(s));var h=this.m_Maxima;if(h!==null)if(i===x.Direction.dLeftToRight){for(;h!==null&&h.X<=e.Bot.X;)h=h.Next;h!==null&&h.X>=s.Top.X&&(h=null)}else{for(;h.Next!==null&&h.Next.X<e.Bot.X;)h=h.Next;h.X<=s.Top.X&&(h=null)}for(var c=null;;){for(var d=e===s,f=this.GetNextInAEL(e,i);f!==null;){if(h!==null)if(i===x.Direction.dLeftToRight)for(;h!==null&&h.X<f.Curr.X;)e.OutIdx>=0&&!o&&this.AddOutPt(e,new x.FPoint2(h.X,e.Bot.Y)),h=h.Next;else for(;h!==null&&h.X>f.Curr.X;)e.OutIdx>=0&&!o&&this.AddOutPt(e,new x.FPoint2(h.X,e.Bot.Y)),h=h.Prev;if(i===x.Direction.dLeftToRight&&f.Curr.X>n||i===x.Direction.dRightToLeft&&f.Curr.X<r||f.Curr.X===e.Top.X&&e.NextInLML!==null&&f.Dx<e.NextInLML.Dx)break;if(e.OutIdx>=0&&!o){x.use_xyz&&(i===x.Direction.dLeftToRight?this.SetZ(f.Curr,e,f):this.SetZ(f.Curr,f,e)),c=this.AddOutPt(e,f.Curr);for(var m=this.m_SortedEdges;m!==null;){if(m.OutIdx>=0&&this.HorzSegmentsOverlap(e.Bot.X,e.Top.X,m.Bot.X,m.Top.X)){var v=this.GetLastOutPt(m);this.AddJoin(v,c,m.Top)}m=m.NextInSEL}this.AddGhostJoin(c,e.Bot)}if(f===a&&d){e.OutIdx>=0&&this.AddLocalMaxPoly(e,a,e.Top),this.DeleteFromAEL(e),this.DeleteFromAEL(a);return}if(i===x.Direction.dLeftToRight){var S=new x.FPoint2(f.Curr.X,e.Curr.Y);this.IntersectEdges(e,f,S)}else{var S=new x.FPoint2(f.Curr.X,e.Curr.Y);this.IntersectEdges(f,e,S)}var O=this.GetNextInAEL(f,i);this.SwapPositionsInAEL(e,f),f=O}if(e.NextInLML===null||!x.ClipperBase.IsHorizontal(e.NextInLML))break;e=this.UpdateEdgeIntoAEL(e),e.OutIdx>=0&&this.AddOutPt(e,e.Bot),t={Dir:i,Left:r,Right:n},this.GetHorzDirection(e,t),i=t.Dir,r=t.Left,n=t.Right}if(e.OutIdx>=0&&c===null){c=this.GetLastOutPt(e);for(var m=this.m_SortedEdges;m!==null;){if(m.OutIdx>=0&&this.HorzSegmentsOverlap(e.Bot.X,e.Top.X,m.Bot.X,m.Top.X)){var v=this.GetLastOutPt(m);this.AddJoin(v,c,m.Top)}m=m.NextInSEL}this.AddGhostJoin(c,e.Top)}if(e.NextInLML!==null)if(e.OutIdx>=0){if(c=this.AddOutPt(e,e.Top),e=this.UpdateEdgeIntoAEL(e),e.WindDelta===0)return;var y=e.PrevInAEL,O=e.NextInAEL;if(y!==null&&y.Curr.X===e.Bot.X&&y.Curr.Y===e.Bot.Y&&y.WindDelta===0&&y.OutIdx>=0&&y.Curr.Y>y.Top.Y&&x.ClipperBase.SlopesEqual3(e,y)){var v=this.AddOutPt(y,e.Bot);this.AddJoin(c,v,e.Top)}else if(O!==null&&O.Curr.X===e.Bot.X&&O.Curr.Y===e.Bot.Y&&O.WindDelta!==0&&O.OutIdx>=0&&O.Curr.Y>O.Top.Y&&x.ClipperBase.SlopesEqual3(e,O)){var v=this.AddOutPt(O,e.Bot);this.AddJoin(c,v,e.Top)}}else e=this.UpdateEdgeIntoAEL(e);else e.OutIdx>=0&&this.AddOutPt(e,e.Top),this.DeleteFromAEL(e)},x.Clipper.prototype.GetNextInAEL=function(e,t){return t===x.Direction.dLeftToRight?e.NextInAEL:e.PrevInAEL},x.Clipper.prototype.IsMinima=function(e){return e!==null&&e.Prev.NextInLML!==e&&e.Next.NextInLML!==e},x.Clipper.prototype.IsMaxima=function(e,t){return e!==null&&e.Top.Y===t&&e.NextInLML===null},x.Clipper.prototype.IsIntermediate=function(e,t){return e.Top.Y===t&&e.NextInLML!==null},x.Clipper.prototype.GetMaximaPair=function(e){return x.FPoint.op_Equality(e.Next.Top,e.Top)&&e.Next.NextInLML===null?e.Next:x.FPoint.op_Equality(e.Prev.Top,e.Top)&&e.Prev.NextInLML===null?e.Prev:null},x.Clipper.prototype.GetMaximaPairEx=function(e){var t=this.GetMaximaPair(e);return t===null||t.OutIdx===x.ClipperBase.Skip||t.NextInAEL===t.PrevInAEL&&!x.ClipperBase.IsHorizontal(t)?null:t},x.Clipper.prototype.ProcessIntersections=function(e){if(this.m_ActiveEdges===null)return!0;try{if(this.BuildIntersectList(e),this.m_IntersectList.length===0)return!0;if(this.m_IntersectList.length===1||this.FixupIntersectionOrder())this.ProcessIntersectList();else return!1}catch{this.m_SortedEdges=null,this.m_IntersectList.length=0,x.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},x.Clipper.prototype.BuildIntersectList=function(e){if(this.m_ActiveEdges!==null){var t=this.m_ActiveEdges;for(this.m_SortedEdges=t;t!==null;)t.PrevInSEL=t.PrevInAEL,t.NextInSEL=t.NextInAEL,t.Curr.X=x.Clipper.TopX(t,e),t=t.NextInAEL;for(var i=!0;i&&this.m_SortedEdges!==null;){for(i=!1,t=this.m_SortedEdges;t.NextInSEL!==null;){var r=t.NextInSEL,n=new x.FPoint0;if(t.Curr.X>r.Curr.X){this.IntersectPoint(t,r,n),n.Y<e&&(n=new x.FPoint2(x.Clipper.TopX(t,e),e));var o=new x.IntersectNode;o.Edge1=t,o.Edge2=r,o.Pt.X=n.X,o.Pt.Y=n.Y,x.use_xyz&&(o.Pt.Z=n.Z),this.m_IntersectList.push(o),this.SwapPositionsInSEL(t,r),i=!0}else t=r}if(t.PrevInSEL!==null)t.PrevInSEL.NextInSEL=null;else break}this.m_SortedEdges=null}},x.Clipper.prototype.EdgesAdjacent=function(e){return e.Edge1.NextInSEL===e.Edge2||e.Edge1.PrevInSEL===e.Edge2},x.Clipper.IntersectNodeSort=function(e,t){return t.Pt.Y-e.Pt.Y},x.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var e=this.m_IntersectList.length,t=0;t<e;t++){if(!this.EdgesAdjacent(this.m_IntersectList[t])){for(var i=t+1;i<e&&!this.EdgesAdjacent(this.m_IntersectList[i]);)i++;if(i===e)return!1;var r=this.m_IntersectList[t];this.m_IntersectList[t]=this.m_IntersectList[i],this.m_IntersectList[i]=r}this.SwapPositionsInSEL(this.m_IntersectList[t].Edge1,this.m_IntersectList[t].Edge2)}return!0},x.Clipper.prototype.ProcessIntersectList=function(){for(var e=0,t=this.m_IntersectList.length;e<t;e++){var i=this.m_IntersectList[e];this.IntersectEdges(i.Edge1,i.Edge2,i.Pt),this.SwapPositionsInAEL(i.Edge1,i.Edge2)}this.m_IntersectList.length=0},x.Clipper.TopX=function(e,t){return t===e.Top.Y?e.Top.X:e.Bot.X+e.Dx*(t-e.Bot.Y)},x.Clipper.prototype.IntersectPoint=function(e,t,i){i.X=0,i.Y=0;var r,n;if(e.Dx===t.Dx){i.Y=e.Curr.Y,i.X=x.Clipper.TopX(e,i.Y);return}if(e.Delta.X===0)i.X=e.Bot.X,x.ClipperBase.IsHorizontal(t)?i.Y=t.Bot.Y:(n=t.Bot.Y-t.Bot.X/t.Dx,i.Y=i.X/t.Dx+n);else if(t.Delta.X===0)i.X=t.Bot.X,x.ClipperBase.IsHorizontal(e)?i.Y=e.Bot.Y:(r=e.Bot.Y-e.Bot.X/e.Dx,i.Y=i.X/e.Dx+r);else{r=e.Bot.X-e.Bot.Y*e.Dx,n=t.Bot.X-t.Bot.Y*t.Dx;var o=(n-r)/(e.Dx-t.Dx);i.Y=o,Math.abs(e.Dx)<Math.abs(t.Dx)?i.X=e.Dx*o+r:i.X=t.Dx*o+n}if(i.Y<e.Top.Y||i.Y<t.Top.Y){if(e.Top.Y>t.Top.Y)return i.Y=e.Top.Y,i.X=x.Clipper.TopX(t,e.Top.Y),i.X<e.Top.X;i.Y=t.Top.Y,Math.abs(e.Dx)<Math.abs(t.Dx)?i.X=x.Clipper.TopX(e,i.Y):i.X=x.Clipper.TopX(t,i.Y)}i.Y>e.Curr.Y&&(i.Y=e.Curr.Y,Math.abs(e.Dx)>Math.abs(t.Dx)?i.X=x.Clipper.TopX(t,i.Y):i.X=x.Clipper.TopX(e,i.Y))},x.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(e){for(var t=this.m_ActiveEdges;t!==null;){var i=this.IsMaxima(t,e);if(i){var r=this.GetMaximaPairEx(t);i=r===null||!x.ClipperBase.IsHorizontal(r)}if(i){this.StrictlySimple&&this.InsertMaxima(t.Top.X);var n=t.PrevInAEL;this.DoMaxima(t),n===null?t=this.m_ActiveEdges:t=n.NextInAEL}else{if(this.IsIntermediate(t,e)&&x.ClipperBase.IsHorizontal(t.NextInLML)?(t=this.UpdateEdgeIntoAEL(t),t.OutIdx>=0&&this.AddOutPt(t,t.Bot),this.AddEdgeToSEL(t)):(t.Curr.X=x.Clipper.TopX(t,e),t.Curr.Y=e),x.use_xyz&&(t.Top.Y===e?t.Curr.Z=t.Top.Z:t.Bot.Y===e?t.Curr.Z=t.Bot.Z:t.Curr.Z=0),this.StrictlySimple){var n=t.PrevInAEL;if(t.OutIdx>=0&&t.WindDelta!==0&&n!==null&&n.OutIdx>=0&&n.Curr.X===t.Curr.X&&n.WindDelta!==0){var o=new x.FPoint1(t.Curr);x.use_xyz&&this.SetZ(o,n,t);var s=this.AddOutPt(n,o),a=this.AddOutPt(t,o);this.AddJoin(s,a,o)}}t=t.NextInAEL}}for(this.ProcessHorizontals(),this.m_Maxima=null,t=this.m_ActiveEdges;t!==null;){if(this.IsIntermediate(t,e)){var s=null;t.OutIdx>=0&&(s=this.AddOutPt(t,t.Top)),t=this.UpdateEdgeIntoAEL(t);var n=t.PrevInAEL,h=t.NextInAEL;if(n!==null&&n.Curr.X===t.Bot.X&&n.Curr.Y===t.Bot.Y&&s!==null&&n.OutIdx>=0&&n.Curr.Y===n.Top.Y&&x.ClipperBase.SlopesEqual5(t.Curr,t.Top,n.Curr,n.Top)&&t.WindDelta!==0&&n.WindDelta!==0){var a=this.AddOutPt(ePrev2,t.Bot);this.AddJoin(s,a,t.Top)}else if(h!==null&&h.Curr.X===t.Bot.X&&h.Curr.Y===t.Bot.Y&&s!==null&&h.OutIdx>=0&&h.Curr.Y===h.Top.Y&&x.ClipperBase.SlopesEqual5(t.Curr,t.Top,h.Curr,h.Top)&&t.WindDelta!==0&&h.WindDelta!==0){var a=this.AddOutPt(h,t.Bot);this.AddJoin(s,a,t.Top)}}t=t.NextInAEL}},x.Clipper.prototype.DoMaxima=function(e){var t=this.GetMaximaPairEx(e);if(t===null){e.OutIdx>=0&&this.AddOutPt(e,e.Top),this.DeleteFromAEL(e);return}for(var i=e.NextInAEL;i!==null&&i!==t;)this.IntersectEdges(e,i,e.Top),this.SwapPositionsInAEL(e,i),i=e.NextInAEL;e.OutIdx===-1&&t.OutIdx===-1?(this.DeleteFromAEL(e),this.DeleteFromAEL(t)):e.OutIdx>=0&&t.OutIdx>=0?(e.OutIdx>=0&&this.AddLocalMaxPoly(e,t,e.Top),this.DeleteFromAEL(e),this.DeleteFromAEL(t)):x.use_lines&&e.WindDelta===0?(e.OutIdx>=0&&(this.AddOutPt(e,e.Top),e.OutIdx=x.ClipperBase.Unassigned),this.DeleteFromAEL(e),t.OutIdx>=0&&(this.AddOutPt(t,e.Top),t.OutIdx=x.ClipperBase.Unassigned),this.DeleteFromAEL(t)):x.Error("DoMaxima error")},x.Clipper.ReversePaths=function(e){for(var t=0,i=e.length;t<i;t++)e[t].reverse()},x.Clipper.Orientation=function(e){return x.Clipper.Area(e)>=0},x.Clipper.prototype.PointCount=function(e){if(e===null)return 0;var t=0,i=e;do t++,i=i.Next;while(i!==e);return t},x.Clipper.prototype.BuildResult=function(e){x.Clear(e);for(var t=0,i=this.m_PolyOuts.length;t<i;t++){var r=this.m_PolyOuts[t];if(r.Pts!==null){var n=r.Pts.Prev,o=this.PointCount(n);if(!(o<2)){for(var s=new Array(o),a=0;a<o;a++)s[a]=n.Pt,n=n.Prev;e.push(s)}}}},x.Clipper.prototype.BuildResult2=function(e){e.Clear();for(var t=0,i=this.m_PolyOuts.length;t<i;t++){var r=this.m_PolyOuts[t],n=this.PointCount(r.Pts);if(!(r.IsOpen&&n<2||!r.IsOpen&&n<3)){this.FixHoleLinkage(r);var o=new x.PolyNode;e.m_AllPolys.push(o),r.PolyNode=o,o.m_polygon.length=n;for(var s=r.Pts.Prev,a=0;a<n;a++)o.m_polygon[a]=s.Pt,s=s.Prev}}for(var t=0,i=this.m_PolyOuts.length;t<i;t++){var r=this.m_PolyOuts[t];r.PolyNode!==null&&(r.IsOpen?(r.PolyNode.IsOpen=!0,e.AddChild(r.PolyNode)):r.FirstLeft!==null&&r.FirstLeft.PolyNode!==null?r.FirstLeft.PolyNode.AddChild(r.PolyNode):e.AddChild(r.PolyNode))}},x.Clipper.prototype.FixupOutPolyline=function(e){for(var t=e.Pts,i=t.Prev;t!==i;)if(t=t.Next,x.FPoint.op_Equality(t.Pt,t.Prev.Pt)){t===i&&(i=t.Prev);var r=t.Prev;r.Next=t.Next,t.Next.Prev=r,t=r}t===t.Prev&&(e.Pts=null)},x.Clipper.prototype.FixupOutPolygon=function(e){var t=null;e.BottomPt=null;for(var i=e.Pts,r=this.PreserveCollinear||this.StrictlySimple;;){if(i.Prev===i||i.Prev===i.Next){e.Pts=null;return}if(x.FPoint.op_Equality(i.Pt,i.Next.Pt)||x.FPoint.op_Equality(i.Pt,i.Prev.Pt)||x.ClipperBase.SlopesEqual4(i.Prev.Pt,i.Pt,i.Next.Pt)&&(!r||!this.Pt2IsBetweenPt1AndPt3(i.Prev.Pt,i.Pt,i.Next.Pt)))t=null,i.Prev.Next=i.Next,i.Next.Prev=i.Prev,i=i.Prev;else{if(i===t)break;t===null&&(t=i),i=i.Next}}e.Pts=i},x.Clipper.prototype.DupOutPt=function(e,t){var i=new x.OutPt;return i.Pt.X=e.Pt.X,i.Pt.Y=e.Pt.Y,x.use_xyz&&(i.Pt.Z=e.Pt.Z),i.Idx=e.Idx,t?(i.Next=e.Next,i.Prev=e,e.Next.Prev=i,e.Next=i):(i.Prev=e.Prev,i.Next=e,e.Prev.Next=i,e.Prev=i),i},x.Clipper.prototype.GetOverlap=function(e,t,i,r,n){return e<t?i<r?(n.Left=Math.max(e,i),n.Right=Math.min(t,r)):(n.Left=Math.max(e,r),n.Right=Math.min(t,i)):i<r?(n.Left=Math.max(t,i),n.Right=Math.min(e,r)):(n.Left=Math.max(t,r),n.Right=Math.min(e,i)),n.Left<n.Right},x.Clipper.prototype.JoinHorz=function(e,t,i,r,n,o){var s=e.Pt.X>t.Pt.X?x.Direction.dRightToLeft:x.Direction.dLeftToRight,a=i.Pt.X>r.Pt.X?x.Direction.dRightToLeft:x.Direction.dLeftToRight;if(s===a)return!1;if(s===x.Direction.dLeftToRight){for(;e.Next.Pt.X<=n.X&&e.Next.Pt.X>=e.Pt.X&&e.Next.Pt.Y===n.Y;)e=e.Next;o&&e.Pt.X!==n.X&&(e=e.Next),t=this.DupOutPt(e,!o),x.FPoint.op_Inequality(t.Pt,n)&&(e=t,e.Pt.X=n.X,e.Pt.Y=n.Y,x.use_xyz&&(e.Pt.Z=n.Z),t=this.DupOutPt(e,!o))}else{for(;e.Next.Pt.X>=n.X&&e.Next.Pt.X<=e.Pt.X&&e.Next.Pt.Y===n.Y;)e=e.Next;!o&&e.Pt.X!==n.X&&(e=e.Next),t=this.DupOutPt(e,o),x.FPoint.op_Inequality(t.Pt,n)&&(e=t,e.Pt.X=n.X,e.Pt.Y=n.Y,x.use_xyz&&(e.Pt.Z=n.Z),t=this.DupOutPt(e,o))}if(a===x.Direction.dLeftToRight){for(;i.Next.Pt.X<=n.X&&i.Next.Pt.X>=i.Pt.X&&i.Next.Pt.Y===n.Y;)i=i.Next;o&&i.Pt.X!==n.X&&(i=i.Next),r=this.DupOutPt(i,!o),x.FPoint.op_Inequality(r.Pt,n)&&(i=r,i.Pt.X=n.X,i.Pt.Y=n.Y,x.use_xyz&&(i.Pt.Z=n.Z),r=this.DupOutPt(i,!o))}else{for(;i.Next.Pt.X>=n.X&&i.Next.Pt.X<=i.Pt.X&&i.Next.Pt.Y===n.Y;)i=i.Next;!o&&i.Pt.X!==n.X&&(i=i.Next),r=this.DupOutPt(i,o),x.FPoint.op_Inequality(r.Pt,n)&&(i=r,i.Pt.X=n.X,i.Pt.Y=n.Y,x.use_xyz&&(i.Pt.Z=n.Z),r=this.DupOutPt(i,o))}return s===x.Direction.dLeftToRight===o?(e.Prev=i,i.Next=e,t.Next=r,r.Prev=t):(e.Next=i,i.Prev=e,t.Prev=r,r.Next=t),!0},x.Clipper.prototype.JoinPoints=function(e,t,i){var r=e.OutPt1,n=new x.OutPt,o=e.OutPt2,s=new x.OutPt,a=e.OutPt1.Pt.Y===e.OffPt.Y;if(a&&x.FPoint.op_Equality(e.OffPt,e.OutPt1.Pt)&&x.FPoint.op_Equality(e.OffPt,e.OutPt2.Pt)){if(t!==i)return!1;for(n=e.OutPt1.Next;n!==r&&x.FPoint.op_Equality(n.Pt,e.OffPt);)n=n.Next;var h=n.Pt.Y>e.OffPt.Y;for(s=e.OutPt2.Next;s!==o&&x.FPoint.op_Equality(s.Pt,e.OffPt);)s=s.Next;var c=s.Pt.Y>e.OffPt.Y;return h===c?!1:h?(n=this.DupOutPt(r,!1),s=this.DupOutPt(o,!0),r.Prev=o,o.Next=r,n.Next=s,s.Prev=n,e.OutPt1=r,e.OutPt2=n,!0):(n=this.DupOutPt(r,!0),s=this.DupOutPt(o,!1),r.Next=o,o.Prev=r,n.Prev=s,s.Next=n,e.OutPt1=r,e.OutPt2=n,!0)}else if(a){for(n=r;r.Prev.Pt.Y===r.Pt.Y&&r.Prev!==n&&r.Prev!==o;)r=r.Prev;for(;n.Next.Pt.Y===n.Pt.Y&&n.Next!==r&&n.Next!==o;)n=n.Next;if(n.Next===r||n.Next===o)return!1;for(s=o;o.Prev.Pt.Y===o.Pt.Y&&o.Prev!==s&&o.Prev!==n;)o=o.Prev;for(;s.Next.Pt.Y===s.Pt.Y&&s.Next!==o&&s.Next!==r;)s=s.Next;if(s.Next===o||s.Next===r)return!1;var d={Left:null,Right:null};if(!this.GetOverlap(r.Pt.X,n.Pt.X,o.Pt.X,s.Pt.X,d))return!1;var f=d.Left,m=d.Right,v=new x.FPoint0,S;return r.Pt.X>=f&&r.Pt.X<=m?(v.X=r.Pt.X,v.Y=r.Pt.Y,x.use_xyz&&(v.Z=r.Pt.Z),S=r.Pt.X>n.Pt.X):o.Pt.X>=f&&o.Pt.X<=m?(v.X=o.Pt.X,v.Y=o.Pt.Y,x.use_xyz&&(v.Z=o.Pt.Z),S=o.Pt.X>s.Pt.X):n.Pt.X>=f&&n.Pt.X<=m?(v.X=n.Pt.X,v.Y=n.Pt.Y,x.use_xyz&&(v.Z=n.Pt.Z),S=n.Pt.X>r.Pt.X):(v.X=s.Pt.X,v.Y=s.Pt.Y,x.use_xyz&&(v.Z=s.Pt.Z),S=s.Pt.X>o.Pt.X),e.OutPt1=r,e.OutPt2=o,this.JoinHorz(r,n,o,s,v,S)}else{for(n=r.Next;x.FPoint.op_Equality(n.Pt,r.Pt)&&n!==r;)n=n.Next;var O=n.Pt.Y>r.Pt.Y||!x.ClipperBase.SlopesEqual4(r.Pt,n.Pt,e.OffPt);if(O){for(n=r.Prev;x.FPoint.op_Equality(n.Pt,r.Pt)&&n!==r;)n=n.Prev;if(n.Pt.Y>r.Pt.Y||!x.ClipperBase.SlopesEqual4(r.Pt,n.Pt,e.OffPt))return!1}for(s=o.Next;x.FPoint.op_Equality(s.Pt,o.Pt)&&s!==o;)s=s.Next;var y=s.Pt.Y>o.Pt.Y||!x.ClipperBase.SlopesEqual4(o.Pt,s.Pt,e.OffPt);if(y){for(s=o.Prev;x.FPoint.op_Equality(s.Pt,o.Pt)&&s!==o;)s=s.Prev;if(s.Pt.Y>o.Pt.Y||!x.ClipperBase.SlopesEqual4(o.Pt,s.Pt,e.OffPt))return!1}return n===r||s===o||n===s||t===i&&O===y?!1:O?(n=this.DupOutPt(r,!1),s=this.DupOutPt(o,!0),r.Prev=o,o.Next=r,n.Next=s,s.Prev=n,e.OutPt1=r,e.OutPt2=n,!0):(n=this.DupOutPt(r,!0),s=this.DupOutPt(o,!1),r.Next=o,o.Prev=r,n.Prev=s,s.Next=n,e.OutPt1=r,e.OutPt2=n,!0)}},x.Clipper.GetBounds=function(e){for(var t=0,i=e.length;t<i&&e[t].length===0;)t++;if(t===i)return new x.FRect(0,0,0,0);var r=new x.FRect;for(r.left=e[t][0].X,r.right=r.left,r.top=e[t][0].Y,r.bottom=r.top;t<i;t++)for(var n=0,o=e[t].length;n<o;n++)e[t][n].X<r.left?r.left=e[t][n].X:e[t][n].X>r.right&&(r.right=e[t][n].X),e[t][n].Y<r.top?r.top=e[t][n].Y:e[t][n].Y>r.bottom&&(r.bottom=e[t][n].Y);return r},x.Clipper.prototype.GetBounds2=function(e){var t=e,i=new x.FRect;for(i.left=e.Pt.X,i.right=e.Pt.X,i.top=e.Pt.Y,i.bottom=e.Pt.Y,e=e.Next;e!==t;)e.Pt.X<i.left&&(i.left=e.Pt.X),e.Pt.X>i.right&&(i.right=e.Pt.X),e.Pt.Y<i.top&&(i.top=e.Pt.Y),e.Pt.Y>i.bottom&&(i.bottom=e.Pt.Y),e=e.Next;return i},x.Clipper.PointInPolygon=function(e,t){var i=0,r=t.length;if(r<3)return 0;for(var n=t[0],o=1;o<=r;++o){var s=o===r?t[0]:t[o];if(s.Y===e.Y&&(s.X===e.X||n.Y===e.Y&&s.X>e.X==n.X<e.X))return-1;if(n.Y<e.Y!=s.Y<e.Y){if(n.X>=e.X)if(s.X>e.X)i=1-i;else{var a=(n.X-e.X)*(s.Y-e.Y)-(s.X-e.X)*(n.Y-e.Y);if(a===0)return-1;a>0==s.Y>n.Y&&(i=1-i)}else if(s.X>e.X){var a=(n.X-e.X)*(s.Y-e.Y)-(s.X-e.X)*(n.Y-e.Y);if(a===0)return-1;a>0==s.Y>n.Y&&(i=1-i)}}n=s}return i},x.Clipper.prototype.PointInPolygon=function(e,t){var i=0,r=t,n=e.X,o=e.Y,s=t.Pt.X,a=t.Pt.Y;do{t=t.Next;var h=t.Pt.X,c=t.Pt.Y;if(c===o&&(h===n||a===o&&h>n==s<n))return-1;if(a<o!=c<o){if(s>=n)if(h>n)i=1-i;else{var d=(s-n)*(c-o)-(h-n)*(a-o);if(d===0)return-1;d>0==c>a&&(i=1-i)}else if(h>n){var d=(s-n)*(c-o)-(h-n)*(a-o);if(d===0)return-1;d>0==c>a&&(i=1-i)}}s=h,a=c}while(r!==t);return i},x.Clipper.prototype.Poly2ContainsPoly1=function(e,t){var i=e;do{var r=this.PointInPolygon(i.Pt,t);if(r>=0)return r>0;i=i.Next}while(i!==e);return!0},x.Clipper.prototype.FixupFirstLefts1=function(e,t){for(var i,r,n=0,o=this.m_PolyOuts.length;n<o;n++)i=this.m_PolyOuts[n],r=x.Clipper.ParseFirstLeft(i.FirstLeft),i.Pts!==null&&r===e&&this.Poly2ContainsPoly1(i.Pts,t.Pts)&&(i.FirstLeft=t)},x.Clipper.prototype.FixupFirstLefts2=function(e,t){for(var i=t.FirstLeft,r,n,o=0,s=this.m_PolyOuts.length;o<s;o++)r=this.m_PolyOuts[o],!(r.Pts===null||r===t||r===e)&&(n=x.Clipper.ParseFirstLeft(r.FirstLeft),!(n!==i&&n!==e&&n!==t)&&(this.Poly2ContainsPoly1(r.Pts,e.Pts)?r.FirstLeft=e:this.Poly2ContainsPoly1(r.Pts,t.Pts)?r.FirstLeft=t:(r.FirstLeft===e||r.FirstLeft===t)&&(r.FirstLeft=i)))},x.Clipper.prototype.FixupFirstLefts3=function(e,t){for(var i,r,n=0,o=this.m_PolyOuts.length;n<o;n++)i=this.m_PolyOuts[n],r=x.Clipper.ParseFirstLeft(i.FirstLeft),i.Pts!==null&&r===e&&(i.FirstLeft=t)},x.Clipper.ParseFirstLeft=function(e){for(;e!==null&&e.Pts===null;)e=e.FirstLeft;return e},x.Clipper.prototype.JoinCommonEdges=function(){for(var e=0,t=this.m_Joins.length;e<t;e++){var i=this.m_Joins[e],r=this.GetOutRec(i.OutPt1.Idx),n=this.GetOutRec(i.OutPt2.Idx);if(!(r.Pts===null||n.Pts===null)&&!(r.IsOpen||n.IsOpen)){var o;r===n?o=r:this.OutRec1RightOfOutRec2(r,n)?o=n:this.OutRec1RightOfOutRec2(n,r)?o=r:o=this.GetLowermostRec(r,n),this.JoinPoints(i,r,n)&&(r===n?(r.Pts=i.OutPt1,r.BottomPt=null,n=this.CreateOutRec(),n.Pts=i.OutPt2,this.UpdateOutPtIdxs(n),this.Poly2ContainsPoly1(n.Pts,r.Pts)?(n.IsHole=!r.IsHole,n.FirstLeft=r,this.m_UsingPolyTree&&this.FixupFirstLefts2(n,r),(n.IsHole^this.ReverseSolution)==this.Area$1(n)>0&&this.ReversePolyPtLinks(n.Pts)):this.Poly2ContainsPoly1(r.Pts,n.Pts)?(n.IsHole=r.IsHole,r.IsHole=!n.IsHole,n.FirstLeft=r.FirstLeft,r.FirstLeft=n,this.m_UsingPolyTree&&this.FixupFirstLefts2(r,n),(r.IsHole^this.ReverseSolution)==this.Area$1(r)>0&&this.ReversePolyPtLinks(r.Pts)):(n.IsHole=r.IsHole,n.FirstLeft=r.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(r,n))):(n.Pts=null,n.BottomPt=null,n.Idx=r.Idx,r.IsHole=o.IsHole,o===n&&(r.FirstLeft=n.FirstLeft),n.FirstLeft=r,this.m_UsingPolyTree&&this.FixupFirstLefts3(n,r)))}}},x.Clipper.prototype.UpdateOutPtIdxs=function(e){var t=e.Pts;do t.Idx=e.Idx,t=t.Prev;while(t!==e.Pts)},x.Clipper.prototype.DoSimplePolygons=function(){for(var e=0;e<this.m_PolyOuts.length;){var t=this.m_PolyOuts[e++],i=t.Pts;if(!(i===null||t.IsOpen))do{for(var r=i.Next;r!==t.Pts;){if(x.FPoint.op_Equality(i.Pt,r.Pt)&&r.Next!==i&&r.Prev!==i){var n=i.Prev,o=r.Prev;i.Prev=o,o.Next=i,r.Prev=n,n.Next=r,t.Pts=i;var s=this.CreateOutRec();s.Pts=r,this.UpdateOutPtIdxs(s),this.Poly2ContainsPoly1(s.Pts,t.Pts)?(s.IsHole=!t.IsHole,s.FirstLeft=t,this.m_UsingPolyTree&&this.FixupFirstLefts2(s,t)):this.Poly2ContainsPoly1(t.Pts,s.Pts)?(s.IsHole=t.IsHole,t.IsHole=!s.IsHole,s.FirstLeft=t.FirstLeft,t.FirstLeft=s,this.m_UsingPolyTree&&this.FixupFirstLefts2(t,s)):(s.IsHole=t.IsHole,s.FirstLeft=t.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(t,s)),r=i}r=r.Next}i=i.Next}while(i!==t.Pts)}},x.Clipper.Area=function(e){if(!Array.isArray(e))return 0;var t=e.length;if(t<3)return 0;for(var i=0,r=0,n=t-1;r<t;++r)i+=(e[n].X+e[r].X)*(e[n].Y-e[r].Y),n=r;return-i*.5},x.Clipper.prototype.Area=function(e){var t=e;if(e===null)return 0;var i=0;do i=i+(e.Prev.Pt.X+e.Pt.X)*(e.Prev.Pt.Y-e.Pt.Y),e=e.Next;while(e!==t);return i*.5},x.Clipper.prototype.Area$1=function(e){return this.Area(e.Pts)},x.Clipper.SimplifyPolygon=function(e,t){var i=new Array,r=new x.Clipper(0);return r.StrictlySimple=!0,r.AddPath(e,x.PolyType.ptSubject,!0),r.Execute(x.ClipType.ctUnion,i,t,t),i},x.Clipper.SimplifyPolygons=function(e,t){typeof t>"u"&&(t=x.PolyFillType.pftEvenOdd);var i=new Array,r=new x.Clipper(0);return r.StrictlySimple=!0,r.AddPaths(e,x.PolyType.ptSubject,!0),r.Execute(x.ClipType.ctUnion,i,t,t),i},x.Clipper.DistanceSqrd=function(e,t){var i=e.X-t.X,r=e.Y-t.Y;return i*i+r*r},x.Clipper.DistanceFromLineSqrd=function(e,t,i){var r=t.Y-i.Y,n=i.X-t.X,o=r*t.X+n*t.Y;return o=r*e.X+n*e.Y-o,o*o/(r*r+n*n)},x.Clipper.SlopesNearCollinear=function(e,t,i,r){return Math.abs(e.X-t.X)>Math.abs(e.Y-t.Y)?e.X>t.X==e.X<i.X?x.Clipper.DistanceFromLineSqrd(e,t,i)<r:t.X>e.X==t.X<i.X?x.Clipper.DistanceFromLineSqrd(t,e,i)<r:x.Clipper.DistanceFromLineSqrd(i,e,t)<r:e.Y>t.Y==e.Y<i.Y?x.Clipper.DistanceFromLineSqrd(e,t,i)<r:t.Y>e.Y==t.Y<i.Y?x.Clipper.DistanceFromLineSqrd(t,e,i)<r:x.Clipper.DistanceFromLineSqrd(i,e,t)<r},x.Clipper.PointsAreClose=function(e,t,i){var r=e.X-t.X,n=e.Y-t.Y;return r*r+n*n<=i},x.Clipper.ExcludeOp=function(e){var t=e.Prev;return t.Next=e.Next,e.Next.Prev=t,t.Idx=0,t},x.Clipper.CleanPolygon=function(e,t){typeof t>"u"&&(t=1.415);var i=e.length;if(i===0)return new Array;for(var r=new Array(i),n=0;n<i;++n)r[n]=new x.OutPt;for(var n=0;n<i;++n)r[n].Pt=e[n],r[n].Next=r[(n+1)%i],r[n].Next.Prev=r[n],r[n].Idx=0;for(var o=t*t,s=r[0];s.Idx===0&&s.Next!==s.Prev;)x.Clipper.PointsAreClose(s.Pt,s.Prev.Pt,o)?(s=x.Clipper.ExcludeOp(s),i--):x.Clipper.PointsAreClose(s.Prev.Pt,s.Next.Pt,o)?(x.Clipper.ExcludeOp(s.Next),s=x.Clipper.ExcludeOp(s),i-=2):x.Clipper.SlopesNearCollinear(s.Prev.Pt,s.Pt,s.Next.Pt,o)?(s=x.Clipper.ExcludeOp(s),i--):(s.Idx=1,s=s.Next);i<3&&(i=0);for(var a=new Array(i),n=0;n<i;++n)a[n]=new x.FPoint1(s.Pt),s=s.Next;return r=null,a},x.Clipper.CleanPolygons=function(e,t){for(var i=new Array(e.length),r=0,n=e.length;r<n;r++)i[r]=x.Clipper.CleanPolygon(e[r],t);return i},x.Clipper.Minkowski=function(e,t,i,r){var n=r?1:0,o=e.length,s=t.length,a=new Array;if(i)for(var h=0;h<s;h++){for(var c=new Array(o),d=0,f=e.length,m=e[d];d<f;d++,m=e[d])c[d]=new x.FPoint2(t[h].X+m.X,t[h].Y+m.Y);a.push(c)}else for(var h=0;h<s;h++){for(var c=new Array(o),d=0,f=e.length,m=e[d];d<f;d++,m=e[d])c[d]=new x.FPoint2(t[h].X-m.X,t[h].Y-m.Y);a.push(c)}for(var v=new Array,h=0;h<s-1+n;h++)for(var d=0;d<o;d++){var S=new Array;S.push(a[h%s][d%o]),S.push(a[(h+1)%s][d%o]),S.push(a[(h+1)%s][(d+1)%o]),S.push(a[h%s][(d+1)%o]),x.Clipper.Orientation(S)||S.reverse(),v.push(S)}return v},x.Clipper.MinkowskiSum=function(e,t,i){if(t[0]instanceof Array){for(var r=t,n=new x.Paths,o=new x.Clipper,s=0;s<r.length;++s){var a=x.Clipper.Minkowski(e,r[s],!0,i);if(o.AddPaths(a,x.PolyType.ptSubject,!0),i){var h=x.Clipper.TranslatePath(r[s],e[0]);o.AddPath(h,x.PolyType.ptClip,!0)}}return o.Execute(x.ClipType.ctUnion,n,x.PolyFillType.pftNonZero,x.PolyFillType.pftNonZero),n}else{var h=t,r=x.Clipper.Minkowski(e,h,!0,i),o=new x.Clipper;return o.AddPaths(r,x.PolyType.ptSubject,!0),o.Execute(x.ClipType.ctUnion,r,x.PolyFillType.pftNonZero,x.PolyFillType.pftNonZero),r}},x.Clipper.TranslatePath=function(e,t){for(var i=new x.Path,r=0;r<e.length;r++)i.push(new x.FPoint2(e[r].X+t.X,e[r].Y+t.Y));return i},x.Clipper.MinkowskiDiff=function(e,t){var i=x.Clipper.Minkowski(e,t,!1,!0),r=new x.Clipper;return r.AddPaths(i,x.PolyType.ptSubject,!0),r.Execute(x.ClipType.ctUnion,i,x.PolyFillType.pftNonZero,x.PolyFillType.pftNonZero),i},x.Clipper.PolyTreeToPaths=function(e){var t=new Array;return x.Clipper.AddPolyNodeToPaths(e,x.Clipper.NodeType.ntAny,t),t},x.Clipper.AddPolyNodeToPaths=function(e,t,i){var r=!0;switch(t){case x.Clipper.NodeType.ntOpen:return;case x.Clipper.NodeType.ntClosed:r=!e.IsOpen;break}e.m_polygon.length>0&&r&&i.push(e.m_polygon);for(var n=0,o=e.Childs(),s=o.length,a=o[n];n<s;n++,a=o[n])x.Clipper.AddPolyNodeToPaths(a,t,i)},x.Clipper.OpenPathsFromPolyTree=function(e){for(var t=new x.Paths,i=0,r=e.ChildCount();i<r;i++)e.Childs()[i].IsOpen&&t.push(e.Childs()[i].m_polygon);return t},x.Clipper.ClosedPathsFromPolyTree=function(e){var t=new x.Paths;return x.Clipper.AddPolyNodeToPaths(e,x.Clipper.NodeType.ntClosed,t),t},Ed(x.Clipper,x.ClipperBase),x.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},x.ClipperOffset=function(e,t){typeof e>"u"&&(e=2),typeof t>"u"&&(t=x.ClipperOffset.def_arc_tolerance),this.m_destPolys=new x.Paths,this.m_srcPoly=new x.Path,this.m_destPoly=new x.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new x.FPoint0,this.m_polyNodes=new x.PolyNode,this.MiterLimit=e,this.ArcTolerance=t,this.m_lowest.X=-1},x.ClipperOffset.two_pi=6.28318530717959,x.ClipperOffset.def_arc_tolerance=.25,x.ClipperOffset.prototype.Clear=function(){x.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},x.ClipperOffset.prototype.AddPath=function(e,t,i){var r=e.length-1;if(!(r<0)){var n=new x.PolyNode;if(n.m_jointype=t,n.m_endtype=i,i===x.EndType.etClosedLine||i===x.EndType.etClosedPolygon)for(;r>0&&x.FPoint.op_Equality(e[0],e[r]);)r--;n.m_polygon.push(e[0]);for(var o=0,s=0,a=1;a<=r;a++)x.FPoint.op_Inequality(n.m_polygon[o],e[a])&&(o++,n.m_polygon.push(e[a]),(e[a].Y>n.m_polygon[s].Y||e[a].Y===n.m_polygon[s].Y&&e[a].X<n.m_polygon[s].X)&&(s=o));if(!(i===x.EndType.etClosedPolygon&&o<2)&&(this.m_polyNodes.AddChild(n),i===x.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new x.FPoint2(this.m_polyNodes.ChildCount()-1,s);else{var h=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(n.m_polygon[s].Y>h.Y||n.m_polygon[s].Y===h.Y&&n.m_polygon[s].X<h.X)&&(this.m_lowest=new x.FPoint2(this.m_polyNodes.ChildCount()-1,s))}}},x.ClipperOffset.prototype.AddPaths=function(e,t,i){for(var r=0,n=e.length;r<n;r++)this.AddPath(e[r],t,i)},x.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!x.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var e=0;e<this.m_polyNodes.ChildCount();e++){var t=this.m_polyNodes.Childs()[e];(t.m_endtype===x.EndType.etClosedPolygon||t.m_endtype===x.EndType.etClosedLine&&x.Clipper.Orientation(t.m_polygon))&&t.m_polygon.reverse()}else for(var e=0;e<this.m_polyNodes.ChildCount();e++){var t=this.m_polyNodes.Childs()[e];t.m_endtype===x.EndType.etClosedLine&&!x.Clipper.Orientation(t.m_polygon)&&t.m_polygon.reverse()}},x.ClipperOffset.GetUnitNormal=function(e,t){var i=t.X-e.X,r=t.Y-e.Y;if(i===0&&r===0)return new x.FPoint2(0,0);var n=1/Math.sqrt(i*i+r*r);return i*=n,r*=n,new x.FPoint2(r,-i)},x.ClipperOffset.prototype.DoOffset=function(e){if(this.m_destPolys=new Array,this.m_delta=e,x.ClipperBase.near_zero(e)){for(var t=0;t<this.m_polyNodes.ChildCount();t++){var i=this.m_polyNodes.Childs()[t];i.m_endtype===x.EndType.etClosedPolygon&&this.m_destPolys.push(i.m_polygon)}return}this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5;var r;this.ArcTolerance<=0?r=x.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(e)*x.ClipperOffset.def_arc_tolerance?r=Math.abs(e)*x.ClipperOffset.def_arc_tolerance:r=this.ArcTolerance;var n=3.14159265358979/Math.acos(1-r/Math.abs(e));this.m_sin=Math.sin(x.ClipperOffset.two_pi/n),this.m_cos=Math.cos(x.ClipperOffset.two_pi/n),this.m_StepsPerRad=n/x.ClipperOffset.two_pi,e<0&&(this.m_sin=-this.m_sin);for(var t=0;t<this.m_polyNodes.ChildCount();t++){var i=this.m_polyNodes.Childs()[t];this.m_srcPoly=i.m_polygon;var o=this.m_srcPoly.length;if(!(o===0||e<=0&&(o<3||i.m_endtype!==x.EndType.etClosedPolygon))){if(this.m_destPoly=new Array,o===1){if(i.m_jointype===x.JoinType.jtRound)for(var s=1,a=0,h=1;h<=n;h++){this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[0].X+s*e,this.m_srcPoly[0].Y+a*e));var c=s;s=s*this.m_cos-this.m_sin*a,a=c*this.m_sin+a*this.m_cos}else for(var s=-1,a=-1,h=0;h<4;++h)this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[0].X+s*e,this.m_srcPoly[0].Y+a*e)),s<0?s=1:a<0?a=1:s=-1;this.m_destPolys.push(this.m_destPoly);continue}this.m_normals.length=0;for(var h=0;h<o-1;h++)this.m_normals.push(x.ClipperOffset.GetUnitNormal(this.m_srcPoly[h],this.m_srcPoly[h+1]));if(i.m_endtype===x.EndType.etClosedLine||i.m_endtype===x.EndType.etClosedPolygon?this.m_normals.push(x.ClipperOffset.GetUnitNormal(this.m_srcPoly[o-1],this.m_srcPoly[0])):this.m_normals.push(new x.FPoint1(this.m_normals[o-2])),i.m_endtype===x.EndType.etClosedPolygon){for(var d=o-1,h=0;h<o;h++)d=this.OffsetPoint(h,d,i.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(i.m_endtype===x.EndType.etClosedLine){for(var d=o-1,h=0;h<o;h++)d=this.OffsetPoint(h,d,i.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;for(var f=this.m_normals[o-1],h=o-1;h>0;h--)this.m_normals[h]=new x.FPoint2(-this.m_normals[h-1].X,-this.m_normals[h-1].Y);this.m_normals[0]=new x.FPoint2(-f.X,-f.Y),d=0;for(var h=o-1;h>=0;h--)d=this.OffsetPoint(h,d,i.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{for(var d=0,h=1;h<o-1;++h)d=this.OffsetPoint(h,d,i.m_jointype);var m;if(i.m_endtype===x.EndType.etOpenButt){var h=o-1;m=new x.FPoint2(this.m_srcPoly[h].X+this.m_normals[h].X*e,this.m_srcPoly[h].Y+this.m_normals[h].Y*e),this.m_destPoly.push(m),m=new x.FPoint2(this.m_srcPoly[h].X-this.m_normals[h].X*e,this.m_srcPoly[h].Y-this.m_normals[h].Y*e),this.m_destPoly.push(m)}else{var h=o-1;d=o-2,this.m_sinA=0,this.m_normals[h]=new x.FPoint2(-this.m_normals[h].X,-this.m_normals[h].Y),i.m_endtype===x.EndType.etOpenSquare?this.DoSquare(h,d):this.DoRound(h,d)}for(var h=o-1;h>0;h--)this.m_normals[h]=new x.FPoint2(-this.m_normals[h-1].X,-this.m_normals[h-1].Y);this.m_normals[0]=new x.FPoint2(-this.m_normals[1].X,-this.m_normals[1].Y),d=o-1;for(var h=d-1;h>0;--h)d=this.OffsetPoint(h,d,i.m_jointype);i.m_endtype===x.EndType.etOpenButt?(m=new x.FPoint2(this.m_srcPoly[0].X-this.m_normals[0].X*e,this.m_srcPoly[0].Y-this.m_normals[0].Y*e),this.m_destPoly.push(m),m=new x.FPoint2(this.m_srcPoly[0].X+this.m_normals[0].X*e,this.m_srcPoly[0].Y+this.m_normals[0].Y*e),this.m_destPoly.push(m)):(d=1,this.m_sinA=0,i.m_endtype===x.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}}},x.ClipperOffset.prototype.Execute=function(){var e=arguments,t=e[0]instanceof x.PolyTree;if(t){var i=e[0],r=e[1];i.Clear(),this.FixOrientations(),this.DoOffset(r);var n=new x.Clipper(0);if(n.AddPaths(this.m_destPolys,x.PolyType.ptSubject,!0),r>0)n.Execute(x.ClipType.ctUnion,i,x.PolyFillType.pftPositive,x.PolyFillType.pftPositive);else{var o=x.Clipper.GetBounds(this.m_destPolys),s=new x.Path;if(s.push(new x.FPoint2(o.left-10,o.bottom+10)),s.push(new x.FPoint2(o.right+10,o.bottom+10)),s.push(new x.FPoint2(o.right+10,o.top-10)),s.push(new x.FPoint2(o.left-10,o.top-10)),n.AddPath(s,x.PolyType.ptSubject,!0),n.ReverseSolution=!0,n.Execute(x.ClipType.ctUnion,i,x.PolyFillType.pftNegative,x.PolyFillType.pftNegative),i.ChildCount()===1&&i.Childs()[0].ChildCount()>0){var a=i.Childs()[0];i.Childs()[0]=a.Childs()[0],i.Childs()[0].m_Parent=i;for(var h=1;h<a.ChildCount();h++)i.AddChild(a.Childs()[h])}else i.Clear()}}else{var i=e[0],r=e[1];x.Clear(i),this.FixOrientations(),this.DoOffset(r);var n=new x.Clipper(0);if(n.AddPaths(this.m_destPolys,x.PolyType.ptSubject,!0),r>0)n.Execute(x.ClipType.ctUnion,i,x.PolyFillType.pftPositive,x.PolyFillType.pftPositive);else{var o=x.Clipper.GetBounds(this.m_destPolys),s=new x.Path;s.push(new x.FPoint2(o.left-10,o.bottom+10)),s.push(new x.FPoint2(o.right+10,o.bottom+10)),s.push(new x.FPoint2(o.right+10,o.top-10)),s.push(new x.FPoint2(o.left-10,o.top-10)),n.AddPath(s,x.PolyType.ptSubject,!0),n.ReverseSolution=!0,n.Execute(x.ClipType.ctUnion,i,x.PolyFillType.pftNegative,x.PolyFillType.pftNegative),i.length>0&&i.splice(0,1)}}},x.ClipperOffset.prototype.OffsetPoint=function(e,t,i){if(this.m_sinA=this.m_normals[t].X*this.m_normals[e].Y-this.m_normals[e].X*this.m_normals[t].Y,this.m_sinA===0)return t;if(this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1),this.m_sinA*this.m_delta<0)this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[e].X+this.m_normals[t].X*this.m_delta,this.m_srcPoly[e].Y+this.m_normals[t].Y*this.m_delta)),this.m_destPoly.push(new x.FPoint1(this.m_srcPoly[e])),this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[e].X+this.m_normals[e].X*this.m_delta,this.m_srcPoly[e].Y+this.m_normals[e].Y*this.m_delta));else switch(i){case x.JoinType.jtMiter:{var r=1+(this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y);r>=this.m_miterLim?this.DoMiter(e,t,r):this.DoSquare(e,t);break}case x.JoinType.jtSquare:this.DoSquare(e,t);break;case x.JoinType.jtRound:this.DoRound(e,t);break}return t=e,t},x.ClipperOffset.prototype.DoSquare=function(e,t){var i=Math.tan(Math.atan2(this.m_sinA,this.m_normals[t].X*this.m_normals[e].X+this.m_normals[t].Y*this.m_normals[e].Y)/4);this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[e].X+this.m_delta*(this.m_normals[t].X-this.m_normals[t].Y*i),this.m_srcPoly[e].Y+this.m_delta*(this.m_normals[t].Y+this.m_normals[t].X*i))),this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[e].X+this.m_delta*(this.m_normals[e].X+this.m_normals[e].Y*i),this.m_srcPoly[e].Y+this.m_delta*(this.m_normals[e].Y-this.m_normals[e].X*i)))},x.ClipperOffset.prototype.DoMiter=function(e,t,i){var r=this.m_delta/i;this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[e].X+(this.m_normals[t].X+this.m_normals[e].X)*r,this.m_srcPoly[e].Y+(this.m_normals[t].Y+this.m_normals[e].Y)*r))},x.ClipperOffset.prototype.DoRound=function(e,t){for(var i=Math.atan2(this.m_sinA,this.m_normals[t].X*this.m_normals[e].X+this.m_normals[t].Y*this.m_normals[e].Y),r=Math.max(Math.round(this.m_StepsPerRad*Math.abs(i)),1),n=this.m_normals[t].X,o=this.m_normals[t].Y,s,a=0;a<r;++a)this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[e].X+n*this.m_delta,this.m_srcPoly[e].Y+o*this.m_delta)),s=n,n=n*this.m_cos-this.m_sin*o,o=s*this.m_sin+o*this.m_cos;this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[e].X+this.m_normals[e].X*this.m_delta,this.m_srcPoly[e].Y+this.m_normals[e].Y*this.m_delta))},x.Error=function(e){try{throw new Error(e)}catch(t){alert(t.message)}},x.JS={},x.JS.AreaOfPolygon=function(e){return x.Clipper.Area(e)},x.JS.AreaOfPolygons=function(e){for(var t=0,i=0;i<e.length;i++)t+=x.Clipper.Area(e[i]);return t},x.JS.BoundsOfPath=function(e){return x.JS.BoundsOfPaths([e])},x.JS.BoundsOfPaths=function(e){var t=x.Clipper.GetBounds(e);return t},x.JS.Clean=function(r,t){if(!(r instanceof Array))return[];var i=r[0]instanceof Array,r=x.JS.Clone(r);if(typeof t!="number"||t===null)return x.Error("Delta is not a number in Clean()."),r;if(r.length===0||r.length===1&&r[0].length===0||t<0)return r;i||(r=[r]);for(var n=r.length,o,s,a,h,c,d,f,m=[],v=0;v<n;v++)if(s=r[v],o=s.length,o!==0){if(o<3){a=s,m.push(a);continue}for(a=s,h=t*t,c=s[0],d=1,f=1;f<o;f++)(s[f].X-c.X)*(s[f].X-c.X)+(s[f].Y-c.Y)*(s[f].Y-c.Y)<=h||(a[d]=s[f],c=s[f],d++);c=s[d-1],(s[0].X-c.X)*(s[0].X-c.X)+(s[0].Y-c.Y)*(s[0].Y-c.Y)<=h&&d--,d<o&&a.splice(d,o-d),a.length&&m.push(a)}return!i&&m.length?m=m[0]:!i&&m.length===0?m=[]:i&&m.length===0&&(m=[[]]),m},x.JS.Clone=function(e){if(!(e instanceof Array))return[];if(e.length===0)return[];if(e.length===1&&e[0].length===0)return[[]];var t=e[0]instanceof Array;t||(e=[e]);var i=e.length,r,n,o,s,a=new Array(i);for(n=0;n<i;n++){for(r=e[n].length,s=new Array(r),o=0;o<r;o++)s[o]={X:e[n][o].X,Y:e[n][o].Y};a[n]=s}return t||(a=a[0]),a},x.JS.Lighten=function(e,t){if(!(e instanceof Array))return[];if(typeof t!="number"||t===null)return x.Error("Tolerance is not a number in Lighten()."),x.JS.Clone(e);if(e.length===0||e.length===1&&e[0].length===0||t<0)return x.JS.Clone(e);var i=e[0]instanceof Array;i||(e=[e]);var r,n,o,s,a,h,c,d,f,m,v,S,O,y,P,w,E,T=e.length,_=t*t,I=[];for(r=0;r<T;r++)if(o=e[r],h=o.length,h!==0){for(s=0;s<1e6;s++){for(a=[],h=o.length,o[h-1].X!==o[0].X||o[h-1].Y!==o[0].Y?(S=1,o.push({X:o[0].X,Y:o[0].Y}),h=o.length):S=0,v=[],n=0;n<h-2;n++)c=o[n],f=o[n+1],d=o[n+2],w=c.X,E=c.Y,O=d.X-w,y=d.Y-E,(O!==0||y!==0)&&(P=((f.X-w)*O+(f.Y-E)*y)/(O*O+y*y),P>1?(w=d.X,E=d.Y):P>0&&(w+=O*P,E+=y*P)),O=f.X-w,y=f.Y-E,m=O*O+y*y,m<=_&&(v[n+1]=1,n++);for(a.push({X:o[0].X,Y:o[0].Y}),n=1;n<h-1;n++)v[n]||a.push({X:o[n].X,Y:o[n].Y});if(a.push({X:o[h-1].X,Y:o[h-1].Y}),S&&o.pop(),v.length)o=a;else break}h=a.length,a[h-1].X===a[0].X&&a[h-1].Y===a[0].Y&&a.pop(),a.length>2&&I.push(a)}return i||(I=I[0]),typeof I>"u"&&(I=[]),I},x.JS.PerimeterOfPath=function(e,t){if(typeof e>"u")return 0;var i=Math.sqrt,r=0,n,o,s=0,a=0,h=0,c=0,d=e.length;if(d<2)return 0;for(t&&(e[d]=e[0],d++);--d;)n=e[d],s=n.X,a=n.Y,o=e[d-1],h=o.X,c=o.Y,r+=i((s-h)*(s-h)+(a-c)*(a-c));return t&&e.pop(),r},x.JS.PerimeterOfPaths=function(e,t){for(var i=0,r=0;r<e.length;r++)i+=x.JS.PerimeterOfPath(e[r],t);return i},x.ExPolygons=function(){return[]},x.ExPolygon=function(){this.outer=null,this.holes=null},x.JS.AddOuterPolyNodeToExPolygons=function(e,t){var i=new x.ExPolygon;i.outer=e.Contour();var r=e.Childs(),n=r.length;i.holes=new Array(n);var o,s,a,h,c,d;for(a=0;a<n;a++)for(o=r[a],i.holes[a]=o.Contour(),h=0,c=o.Childs(),d=c.length;h<d;h++)s=c[h],x.JS.AddOuterPolyNodeToExPolygons(s,t);t.push(i)},x.JS.ExPolygonsToPaths=function(e){var t,i,r,n,o=new x.Paths;for(t=0,r=e.length;t<r;t++)for(o.push(e[t].outer),i=0,n=e[t].holes.length;i<n;i++)o.push(e[t].holes[i]);return o},x.JS.PolyTreeToExPolygons=function(e){var t=new x.ExPolygons,i,r,n,o;for(r=0,n=e.Childs(),o=n.length;r<o;r++)i=n[r],x.JS.AddOuterPolyNodeToExPolygons(i,t);return t};const ev=(e,t)=>1e-8>Math.abs(e.x-t.x)+Math.abs(e.y-t.y),iv=e=>{if(e.length===0)return!0;const t=e[0][0],i=e.at(-1).at(-1);return ev(t,i)};function Ys(e,t,i={}){const r={openSquare:0,openRound:1,openButt:2,closedLine:3,closedPolygon:4},n={square:0,round:1,miter:2};let o=i.endType;o in r||(o="closedPolygon");let s=i.joinType;s in n||(s="round");const a=i.miterLimit||2,h=i.arcTolerance||.1,c=r[o],d=n[s],f=P=>P.map(({x:w,y:E})=>({X:w,Y:E})),m=P=>P.map(({X:w,Y:E})=>({x:w,y:E}));iv(e);const v=e.map(f),S=new x.ClipperOffset(a,h);S.AddPaths(v,d,c);const O=new x.Paths;S.Execute(O,t);const y=O.map(m);for(;e.length>y.length;)e.pop();return y.forEach((P,w)=>{e[w]=P,e[w].push({x:P[0].x,y:P[0].y})}),e}const rv="modulepreload",nv=function(e){return"/"+e},Td={},sv=function(e,t,i){return!t||t.length===0?e():Promise.all(t.map(r=>{if(r=nv(r),r in Td)return;Td[r]=!0;const n=r.endsWith(".css"),o=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${o}`))return;const s=document.createElement("link");if(s.rel=n?"stylesheet":rv,n||(s.as="script",s.crossOrigin=""),s.href=r,document.head.appendChild(s),n)return new Promise((a,h)=>{s.addEventListener("load",a),s.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e())};let dn,Zl;(()=>{const e=new Map;dn={register(a,h,c){e.set(a,{d:h,f:c,exp:{}})}};async function t(a,h){let c=a.replace(/\.\w+$/i,"");if(c.includes("./")){const[d,...f]=c.split("/").reverse(),[,...m]=h.split("/").reverse(),v=[d];let S=0,O;for(;O=f.shift();)if(O==="..")S++;else{if(O===".")break;v.push(O)}S<m.length&&v.push(...m.slice(S)),c=v.reverse().join("/")}return e.has(c)?o(c):sv(()=>dS(()=>uS(()=>import(a),[]),[]),[])}function i(a,h){return{id:a,import:c=>t(c,a),meta:{url:a,main:h}}}function r(a){return(h,c)=>{c=typeof h=="string"?{[h]:c}:h;for(const[d,f]of Object.entries(c))Object.defineProperty(a,d,{value:f,writable:!0,enumerable:!0})}}function n(a){for(const[h,c]of e.entries()){const{f:d,exp:f}=c,{execute:m,setters:v}=d(r(f),i(h,h===a));delete c.f,c.e=m,c.s=v}}async function o(a){if(!e.has(a))return;const h=e.get(a);if(h.s){const{d:c,e:d,s:f}=h;delete h.s,delete h.e;for(let v=0;v<f.length;v++)f[v](await o(c[v]));const m=d();m&&await m}return h.exp}function s(a){if(!e.has(a))return;const h=e.get(a);if(h.s){const{d:c,e:d,s:f}=h;delete h.s,delete h.e;for(let m=0;m<f.length;m++)f[m](s(c[m]));d()}return h.exp}Zl=a=>(dn=Zl=void 0,n(a),s(a))})(),dn.register("-/clipper-lib@v6.4.2-JisZmmhC7gDAFmHQLYDu/dist=es2020/clipper-lib",[],function(e,t){var i;t&&t.id;function r(o,s,a){return a={path:s,exports:{},require:function(h,c){return n(h,c==null?a.path:c)}},o(a,a.exports),a.exports}function n(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}return{setters:[],execute:function(){i=r(function(o){(function(){var s={};s.version="6.4.2.2",s.use_lines=!0,s.use_xyz=!1;var a=!1;o.exports?(o.exports=s,a=!0):typeof document<"u"?window.ClipperLib=s:self.ClipperLib=s;var h;if(a){var c="chrome";h="Netscape"}else{var c=navigator.userAgent.toString().toLowerCase();h=navigator.appName}var d={};c.indexOf("chrome")!=-1&&c.indexOf("chromium")==-1?d.chrome=1:d.chrome=0,c.indexOf("chromium")!=-1?d.chromium=1:d.chromium=0,c.indexOf("safari")!=-1&&c.indexOf("chrome")==-1&&c.indexOf("chromium")==-1?d.safari=1:d.safari=0,c.indexOf("firefox")!=-1?d.firefox=1:d.firefox=0,c.indexOf("firefox/17")!=-1?d.firefox17=1:d.firefox17=0,c.indexOf("firefox/15")!=-1?d.firefox15=1:d.firefox15=0,c.indexOf("firefox/3")!=-1?d.firefox3=1:d.firefox3=0,c.indexOf("opera")!=-1?d.opera=1:d.opera=0,c.indexOf("msie 10")!=-1?d.msie10=1:d.msie10=0,c.indexOf("msie 9")!=-1?d.msie9=1:d.msie9=0,c.indexOf("msie 8")!=-1?d.msie8=1:d.msie8=0,c.indexOf("msie 7")!=-1?d.msie7=1:d.msie7=0,c.indexOf("msie ")!=-1?d.msie=1:d.msie=0,s.biginteger_used=null;var f;function m(l,u,p){s.biginteger_used=1,l!=null&&(typeof l=="number"&&typeof u>"u"?this.fromInt(l):typeof l=="number"?this.fromNumber(l,u,p):u==null&&typeof l!="string"?this.fromString(l,256):this.fromString(l,u))}function v(){return new m(null,void 0,void 0)}function S(l,u,p,g,C,b){for(;--b>=0;){var D=u*this[l++]+p[g]+C;C=Math.floor(D/67108864),p[g++]=D&67108863}return C}function O(l,u,p,g,C,b){for(var D=u&32767,A=u>>15;--b>=0;){var k=this[l]&32767,L=this[l++]>>15,W=A*k+L*D;k=D*k+((W&32767)<<15)+p[g]+(C&1073741823),C=(k>>>30)+(W>>>15)+A*L+(C>>>30),p[g++]=k&1073741823}return C}function y(l,u,p,g,C,b){for(var D=u&16383,A=u>>14;--b>=0;){var k=this[l]&16383,L=this[l++]>>14,W=A*k+L*D;k=D*k+((W&16383)<<14)+p[g]+C,C=(k>>28)+(W>>14)+A*L,p[g++]=k&268435455}return C}h=="Microsoft Internet Explorer"?(m.prototype.am=O,f=30):h!="Netscape"?(m.prototype.am=S,f=26):(m.prototype.am=y,f=28),m.prototype.DB=f,m.prototype.DM=(1<<f)-1,m.prototype.DV=1<<f;var P=52;m.prototype.FV=Math.pow(2,P),m.prototype.F1=P-f,m.prototype.F2=2*f-P;var w="0123456789abcdefghijklmnopqrstuvwxyz",E=new Array,T,_;for(T="0".charCodeAt(0),_=0;_<=9;++_)E[T++]=_;for(T="a".charCodeAt(0),_=10;_<36;++_)E[T++]=_;for(T="A".charCodeAt(0),_=10;_<36;++_)E[T++]=_;function I(l){return w.charAt(l)}function F(l,u){var p=E[l.charCodeAt(u)];return p==null?-1:p}function q(l){for(var u=this.t-1;u>=0;--u)l[u]=this[u];l.t=this.t,l.s=this.s}function j(l){this.t=1,this.s=l<0?-1:0,l>0?this[0]=l:l<-1?this[0]=l+this.DV:this.t=0}function z(l){var u=v();return u.fromInt(l),u}function B(l,u){var p;if(u==16)p=4;else if(u==8)p=3;else if(u==256)p=8;else if(u==2)p=1;else if(u==32)p=5;else if(u==4)p=2;else{this.fromRadix(l,u);return}this.t=0,this.s=0;for(var g=l.length,C=!1,b=0;--g>=0;){var D=p==8?l[g]&255:F(l,g);if(D<0){l.charAt(g)=="-"&&(C=!0);continue}C=!1,b==0?this[this.t++]=D:b+p>this.DB?(this[this.t-1]|=(D&(1<<this.DB-b)-1)<<b,this[this.t++]=D>>this.DB-b):this[this.t-1]|=D<<b,b+=p,b>=this.DB&&(b-=this.DB)}p==8&&(l[0]&128)!=0&&(this.s=-1,b>0&&(this[this.t-1]|=(1<<this.DB-b)-1<<b)),this.clamp(),C&&m.ZERO.subTo(this,this)}function Q(){for(var l=this.s&this.DM;this.t>0&&this[this.t-1]==l;)--this.t}function R(l){if(this.s<0)return"-"+this.negate().toString(l);var u;if(l==16)u=4;else if(l==8)u=3;else if(l==2)u=1;else if(l==32)u=5;else if(l==4)u=2;else return this.toRadix(l);var p=(1<<u)-1,g,C=!1,b="",D=this.t,A=this.DB-D*this.DB%u;if(D-- >0)for(A<this.DB&&(g=this[D]>>A)>0&&(C=!0,b=I(g));D>=0;)A<u?(g=(this[D]&(1<<A)-1)<<u-A,g|=this[--D]>>(A+=this.DB-u)):(g=this[D]>>(A-=u)&p,A<=0&&(A+=this.DB,--D)),g>0&&(C=!0),C&&(b+=I(g));return C?b:"0"}function U(){var l=v();return m.ZERO.subTo(this,l),l}function K(){return this.s<0?this.negate():this}function ot(l){var u=this.s-l.s;if(u!=0)return u;var p=this.t;if(u=p-l.t,u!=0)return this.s<0?-u:u;for(;--p>=0;)if((u=this[p]-l[p])!=0)return u;return 0}function ht(l){var u=1,p;return(p=l>>>16)!=0&&(l=p,u+=16),(p=l>>8)!=0&&(l=p,u+=8),(p=l>>4)!=0&&(l=p,u+=4),(p=l>>2)!=0&&(l=p,u+=2),(p=l>>1)!=0&&(l=p,u+=1),u}function dt(){return this.t<=0?0:this.DB*(this.t-1)+ht(this[this.t-1]^this.s&this.DM)}function gt(l,u){var p;for(p=this.t-1;p>=0;--p)u[p+l]=this[p];for(p=l-1;p>=0;--p)u[p]=0;u.t=this.t+l,u.s=this.s}function ft(l,u){for(var p=l;p<this.t;++p)u[p-l]=this[p];u.t=Math.max(this.t-l,0),u.s=this.s}function Et(l,u){var p=l%this.DB,g=this.DB-p,C=(1<<g)-1,b=Math.floor(l/this.DB),D=this.s<<p&this.DM,A;for(A=this.t-1;A>=0;--A)u[A+b+1]=this[A]>>g|D,D=(this[A]&C)<<p;for(A=b-1;A>=0;--A)u[A]=0;u[b]=D,u.t=this.t+b+1,u.s=this.s,u.clamp()}function Dt(l,u){u.s=this.s;var p=Math.floor(l/this.DB);if(p>=this.t){u.t=0;return}var g=l%this.DB,C=this.DB-g,b=(1<<g)-1;u[0]=this[p]>>g;for(var D=p+1;D<this.t;++D)u[D-p-1]|=(this[D]&b)<<C,u[D-p]=this[D]>>g;g>0&&(u[this.t-p-1]|=(this.s&b)<<C),u.t=this.t-p,u.clamp()}function _t(l,u){for(var p=0,g=0,C=Math.min(l.t,this.t);p<C;)g+=this[p]-l[p],u[p++]=g&this.DM,g>>=this.DB;if(l.t<this.t){for(g-=l.s;p<this.t;)g+=this[p],u[p++]=g&this.DM,g>>=this.DB;g+=this.s}else{for(g+=this.s;p<l.t;)g-=l[p],u[p++]=g&this.DM,g>>=this.DB;g-=l.s}u.s=g<0?-1:0,g<-1?u[p++]=this.DV+g:g>0&&(u[p++]=g),u.t=p,u.clamp()}function oe(l,u){var p=this.abs(),g=l.abs(),C=p.t;for(u.t=C+g.t;--C>=0;)u[C]=0;for(C=0;C<g.t;++C)u[C+p.t]=p.am(0,g[C],u,C,0,p.t);u.s=0,u.clamp(),this.s!=l.s&&m.ZERO.subTo(u,u)}function qt(l){for(var u=this.abs(),p=l.t=2*u.t;--p>=0;)l[p]=0;for(p=0;p<u.t-1;++p){var g=u.am(p,u[p],l,2*p,0,1);(l[p+u.t]+=u.am(p+1,2*u[p],l,2*p+1,g,u.t-p-1))>=u.DV&&(l[p+u.t]-=u.DV,l[p+u.t+1]=1)}l.t>0&&(l[l.t-1]+=u.am(p,u[p],l,2*p,0,1)),l.s=0,l.clamp()}function ye(l,u,p){var g=l.abs();if(!(g.t<=0)){var C=this.abs();if(C.t<g.t){u!=null&&u.fromInt(0),p!=null&&this.copyTo(p);return}p==null&&(p=v());var b=v(),D=this.s,A=l.s,k=this.DB-ht(g[g.t-1]);k>0?(g.lShiftTo(k,b),C.lShiftTo(k,p)):(g.copyTo(b),C.copyTo(p));var L=b.t,W=b[L-1];if(W!=0){var M=W*(1<<this.F1)+(L>1?b[L-2]>>this.F2:0),V=this.FV/M,it=(1<<this.F1)/M,at=1<<this.F2,ut=p.t,vt=ut-L,xe=u==null?v():u;for(b.dlShiftTo(vt,xe),p.compareTo(xe)>=0&&(p[p.t++]=1,p.subTo(xe,p)),m.ONE.dlShiftTo(L,xe),xe.subTo(b,b);b.t<L;)b[b.t++]=0;for(;--vt>=0;){var si=p[--ut]==W?this.DM:Math.floor(p[ut]*V+(p[ut-1]+at)*it);if((p[ut]+=b.am(0,si,p,vt,0,L))<si)for(b.dlShiftTo(vt,xe),p.subTo(xe,p);p[ut]<--si;)p.subTo(xe,p)}u!=null&&(p.drShiftTo(L,u),D!=A&&m.ZERO.subTo(u,u)),p.t=L,p.clamp(),k>0&&p.rShiftTo(k,p),D<0&&m.ZERO.subTo(p,p)}}}function Xe(l){var u=v();return this.abs().divRemTo(l,null,u),this.s<0&&u.compareTo(m.ZERO)>0&&l.subTo(u,u),u}function te(l){this.m=l}function Ut(l){return l.s<0||l.compareTo(this.m)>=0?l.mod(this.m):l}function $e(l){return l}function ee(l){l.divRemTo(this.m,null,l)}function Ne(l,u,p){l.multiplyTo(u,p),this.reduce(p)}function Ee(l,u){l.squareTo(u),this.reduce(u)}te.prototype.convert=Ut,te.prototype.revert=$e,te.prototype.reduce=ee,te.prototype.mulTo=Ne,te.prototype.sqrTo=Ee;function ri(){if(this.t<1)return 0;var l=this[0];if((l&1)==0)return 0;var u=l&3;return u=u*(2-(l&15)*u)&15,u=u*(2-(l&255)*u)&255,u=u*(2-((l&65535)*u&65535))&65535,u=u*(2-l*u%this.DV)%this.DV,u>0?this.DV-u:-u}function $t(l){this.m=l,this.mp=l.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<l.DB-15)-1,this.mt2=2*l.t}function ce(l){var u=v();return l.abs().dlShiftTo(this.m.t,u),u.divRemTo(this.m,null,u),l.s<0&&u.compareTo(m.ZERO)>0&&this.m.subTo(u,u),u}function Fe(l){var u=v();return l.copyTo(u),this.reduce(u),u}function ni(l){for(;l.t<=this.mt2;)l[l.t++]=0;for(var u=0;u<this.m.t;++u){var p=l[u]&32767,g=p*this.mpl+((p*this.mph+(l[u]>>15)*this.mpl&this.um)<<15)&l.DM;for(p=u+this.m.t,l[p]+=this.m.am(0,g,l,u,0,this.m.t);l[p]>=l.DV;)l[p]-=l.DV,l[++p]++}l.clamp(),l.drShiftTo(this.m.t,l),l.compareTo(this.m)>=0&&l.subTo(this.m,l)}function On(l,u){l.squareTo(u),this.reduce(u)}function qi(l,u,p){l.multiplyTo(u,p),this.reduce(p)}$t.prototype.convert=ce,$t.prototype.revert=Fe,$t.prototype.reduce=ni,$t.prototype.mulTo=qi,$t.prototype.sqrTo=On;function gn(){return(this.t>0?this[0]&1:this.s)==0}function na(l,u){if(l>4294967295||l<1)return m.ONE;var p=v(),g=v(),C=u.convert(this),b=ht(l)-1;for(C.copyTo(p);--b>=0;)if(u.sqrTo(p,g),(l&1<<b)>0)u.mulTo(g,C,p);else{var D=p;p=g,g=D}return u.revert(p)}function sa(l,u){var p;return l<256||u.isEven()?p=new te(u):p=new $t(u),this.exp(l,p)}m.prototype.copyTo=q,m.prototype.fromInt=j,m.prototype.fromString=B,m.prototype.clamp=Q,m.prototype.dlShiftTo=gt,m.prototype.drShiftTo=ft,m.prototype.lShiftTo=Et,m.prototype.rShiftTo=Dt,m.prototype.subTo=_t,m.prototype.multiplyTo=oe,m.prototype.squareTo=qt,m.prototype.divRemTo=ye,m.prototype.invDigit=ri,m.prototype.isEven=gn,m.prototype.exp=na,m.prototype.toString=R,m.prototype.negate=U,m.prototype.abs=K,m.prototype.compareTo=ot,m.prototype.bitLength=dt,m.prototype.mod=Xe,m.prototype.modPowInt=sa,m.ZERO=z(0),m.ONE=z(1);function oa(){var l=v();return this.copyTo(l),l}function la(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function aa(){return this.t==0?this.s:this[0]<<24>>24}function ha(){return this.t==0?this.s:this[0]<<16>>16}function ua(l){return Math.floor(Math.LN2*this.DB/Math.log(l))}function ca(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function pa(l){if(l==null&&(l=10),this.signum()==0||l<2||l>36)return"0";var u=this.chunkSize(l),p=Math.pow(l,u),g=z(p),C=v(),b=v(),D="";for(this.divRemTo(g,C,b);C.signum()>0;)D=(p+b.intValue()).toString(l).substr(1)+D,C.divRemTo(g,C,b);return b.intValue().toString(l)+D}function da(l,u){this.fromInt(0),u==null&&(u=10);for(var p=this.chunkSize(u),g=Math.pow(u,p),C=!1,b=0,D=0,A=0;A<l.length;++A){var k=F(l,A);if(k<0){l.charAt(A)=="-"&&this.signum()==0&&(C=!0);continue}D=u*D+k,++b>=p&&(this.dMultiply(g),this.dAddOffset(D,0),b=0,D=0)}b>0&&(this.dMultiply(Math.pow(u,b)),this.dAddOffset(D,0)),C&&m.ZERO.subTo(this,this)}function fa(l,u,p){if(typeof u=="number")if(l<2)this.fromInt(1);else for(this.fromNumber(l,p),this.testBit(l-1)||this.bitwiseTo(m.ONE.shiftLeft(l-1),yn,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(u);)this.dAddOffset(2,0),this.bitLength()>l&&this.subTo(m.ONE.shiftLeft(l-1),this);else{var g=new Array,C=l&7;g.length=(l>>3)+1,u.nextBytes(g),C>0?g[0]&=(1<<C)-1:g[0]=0,this.fromString(g,256)}}function ma(){var l=this.t,u=new Array;u[0]=this.s;var p=this.DB-l*this.DB%8,g,C=0;if(l-- >0)for(p<this.DB&&(g=this[l]>>p)!=(this.s&this.DM)>>p&&(u[C++]=g|this.s<<this.DB-p);l>=0;)p<8?(g=(this[l]&(1<<p)-1)<<8-p,g|=this[--l]>>(p+=this.DB-8)):(g=this[l]>>(p-=8)&255,p<=0&&(p+=this.DB,--l)),(g&128)!=0&&(g|=-256),C==0&&(this.s&128)!=(g&128)&&++C,(C>0||g!=this.s)&&(u[C++]=g);return u}function Oa(l){return this.compareTo(l)==0}function ga(l){return this.compareTo(l)<0?this:l}function ya(l){return this.compareTo(l)>0?this:l}function xa(l,u,p){var g,C,b=Math.min(l.t,this.t);for(g=0;g<b;++g)p[g]=u(this[g],l[g]);if(l.t<this.t){for(C=l.s&this.DM,g=b;g<this.t;++g)p[g]=u(this[g],C);p.t=this.t}else{for(C=this.s&this.DM,g=b;g<l.t;++g)p[g]=u(C,l[g]);p.t=l.t}p.s=u(this.s,l.s),p.clamp()}function va(l,u){return l&u}function Pa(l){var u=v();return this.bitwiseTo(l,va,u),u}function yn(l,u){return l|u}function Ca(l){var u=v();return this.bitwiseTo(l,yn,u),u}function X(l,u){return l^u}function $(l){var u=v();return this.bitwiseTo(l,X,u),u}function Z(l,u){return l&~u}function st(l){var u=v();return this.bitwiseTo(l,Z,u),u}function pe(){for(var l=v(),u=0;u<this.t;++u)l[u]=this.DM&~this[u];return l.t=this.t,l.s=~this.s,l}function xn(l){var u=v();return l<0?this.rShiftTo(-l,u):this.lShiftTo(l,u),u}function Sa(l){var u=v();return l<0?this.lShiftTo(-l,u):this.rShiftTo(l,u),u}function vC(l){if(l==0)return-1;var u=0;return(l&65535)==0&&(l>>=16,u+=16),(l&255)==0&&(l>>=8,u+=8),(l&15)==0&&(l>>=4,u+=4),(l&3)==0&&(l>>=2,u+=2),(l&1)==0&&++u,u}function PC(){for(var l=0;l<this.t;++l)if(this[l]!=0)return l*this.DB+vC(this[l]);return this.s<0?this.t*this.DB:-1}function CC(l){for(var u=0;l!=0;)l&=l-1,++u;return u}function SC(){for(var l=0,u=this.s&this.DM,p=0;p<this.t;++p)l+=CC(this[p]^u);return l}function wC(l){var u=Math.floor(l/this.DB);return u>=this.t?this.s!=0:(this[u]&1<<l%this.DB)!=0}function bC(l,u){var p=m.ONE.shiftLeft(l);return this.bitwiseTo(p,u,p),p}function DC(l){return this.changeBit(l,yn)}function EC(l){return this.changeBit(l,Z)}function TC(l){return this.changeBit(l,X)}function AC(l,u){for(var p=0,g=0,C=Math.min(l.t,this.t);p<C;)g+=this[p]+l[p],u[p++]=g&this.DM,g>>=this.DB;if(l.t<this.t){for(g+=l.s;p<this.t;)g+=this[p],u[p++]=g&this.DM,g>>=this.DB;g+=this.s}else{for(g+=this.s;p<l.t;)g+=l[p],u[p++]=g&this.DM,g>>=this.DB;g+=l.s}u.s=g<0?-1:0,g>0?u[p++]=g:g<-1&&(u[p++]=this.DV+g),u.t=p,u.clamp()}function kC(l){var u=v();return this.addTo(l,u),u}function _C(l){var u=v();return this.subTo(l,u),u}function IC(l){var u=v();return this.multiplyTo(l,u),u}function LC(){var l=v();return this.squareTo(l),l}function QC(l){var u=v();return this.divRemTo(l,u,null),u}function XC(l){var u=v();return this.divRemTo(l,null,u),u}function $C(l){var u=v(),p=v();return this.divRemTo(l,u,p),new Array(u,p)}function NC(l){this[this.t]=this.am(0,l-1,this,0,0,this.t),++this.t,this.clamp()}function FC(l,u){if(l!=0){for(;this.t<=u;)this[this.t++]=0;for(this[u]+=l;this[u]>=this.DV;)this[u]-=this.DV,++u>=this.t&&(this[this.t++]=0),++this[u]}}function vn(){}function df(l){return l}function MC(l,u,p){l.multiplyTo(u,p)}function BC(l,u){l.squareTo(u)}vn.prototype.convert=df,vn.prototype.revert=df,vn.prototype.mulTo=MC,vn.prototype.sqrTo=BC;function RC(l){return this.exp(l,new vn)}function YC(l,u,p){var g=Math.min(this.t+l.t,u);for(p.s=0,p.t=g;g>0;)p[--g]=0;var C;for(C=p.t-this.t;g<C;++g)p[g+this.t]=this.am(0,l[g],p,g,0,this.t);for(C=Math.min(l.t,u);g<C;++g)this.am(0,l[g],p,g,0,u-g);p.clamp()}function WC(l,u,p){--u;var g=p.t=this.t+l.t-u;for(p.s=0;--g>=0;)p[g]=0;for(g=Math.max(u-this.t,0);g<l.t;++g)p[this.t+g-u]=this.am(u-g,l[g],p,0,0,this.t+g-u);p.clamp(),p.drShiftTo(1,p)}function yr(l){this.r2=v(),this.q3=v(),m.ONE.dlShiftTo(2*l.t,this.r2),this.mu=this.r2.divide(l),this.m=l}function jC(l){if(l.s<0||l.t>2*this.m.t)return l.mod(this.m);if(l.compareTo(this.m)<0)return l;var u=v();return l.copyTo(u),this.reduce(u),u}function ZC(l){return l}function zC(l){for(l.drShiftTo(this.m.t-1,this.r2),l.t>this.m.t+1&&(l.t=this.m.t+1,l.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);l.compareTo(this.r2)<0;)l.dAddOffset(1,this.m.t+1);for(l.subTo(this.r2,l);l.compareTo(this.m)>=0;)l.subTo(this.m,l)}function qC(l,u){l.squareTo(u),this.reduce(u)}function UC(l,u,p){l.multiplyTo(u,p),this.reduce(p)}yr.prototype.convert=jC,yr.prototype.revert=ZC,yr.prototype.reduce=zC,yr.prototype.mulTo=UC,yr.prototype.sqrTo=qC;function GC(l,u){var p=l.bitLength(),g,C=z(1),b;if(p<=0)return C;p<18?g=1:p<48?g=3:p<144?g=4:p<768?g=5:g=6,p<8?b=new te(u):u.isEven()?b=new yr(u):b=new $t(u);var D=new Array,A=3,k=g-1,L=(1<<g)-1;if(D[1]=b.convert(this),g>1){var W=v();for(b.sqrTo(D[1],W);A<=L;)D[A]=v(),b.mulTo(W,D[A-2],D[A]),A+=2}var M=l.t-1,V,it=!0,at=v(),ut;for(p=ht(l[M])-1;M>=0;){for(p>=k?V=l[M]>>p-k&L:(V=(l[M]&(1<<p+1)-1)<<k-p,M>0&&(V|=l[M-1]>>this.DB+p-k)),A=g;(V&1)==0;)V>>=1,--A;if((p-=A)<0&&(p+=this.DB,--M),it)D[V].copyTo(C),it=!1;else{for(;A>1;)b.sqrTo(C,at),b.sqrTo(at,C),A-=2;A>0?b.sqrTo(C,at):(ut=C,C=at,at=ut),b.mulTo(at,D[V],C)}for(;M>=0&&(l[M]&1<<p)==0;)b.sqrTo(C,at),ut=C,C=at,at=ut,--p<0&&(p=this.DB-1,--M)}return b.revert(C)}function VC(l){var u=this.s<0?this.negate():this.clone(),p=l.s<0?l.negate():l.clone();if(u.compareTo(p)<0){var g=u;u=p,p=g}var C=u.getLowestSetBit(),b=p.getLowestSetBit();if(b<0)return u;for(C<b&&(b=C),b>0&&(u.rShiftTo(b,u),p.rShiftTo(b,p));u.signum()>0;)(C=u.getLowestSetBit())>0&&u.rShiftTo(C,u),(C=p.getLowestSetBit())>0&&p.rShiftTo(C,p),u.compareTo(p)>=0?(u.subTo(p,u),u.rShiftTo(1,u)):(p.subTo(u,p),p.rShiftTo(1,p));return b>0&&p.lShiftTo(b,p),p}function HC(l){if(l<=0)return 0;var u=this.DV%l,p=this.s<0?l-1:0;if(this.t>0)if(u==0)p=this[0]%l;else for(var g=this.t-1;g>=0;--g)p=(u*p+this[g])%l;return p}function JC(l){var u=l.isEven();if(this.isEven()&&u||l.signum()==0)return m.ZERO;for(var p=l.clone(),g=this.clone(),C=z(1),b=z(0),D=z(0),A=z(1);p.signum()!=0;){for(;p.isEven();)p.rShiftTo(1,p),u?((!C.isEven()||!b.isEven())&&(C.addTo(this,C),b.subTo(l,b)),C.rShiftTo(1,C)):b.isEven()||b.subTo(l,b),b.rShiftTo(1,b);for(;g.isEven();)g.rShiftTo(1,g),u?((!D.isEven()||!A.isEven())&&(D.addTo(this,D),A.subTo(l,A)),D.rShiftTo(1,D)):A.isEven()||A.subTo(l,A),A.rShiftTo(1,A);p.compareTo(g)>=0?(p.subTo(g,p),u&&C.subTo(D,C),b.subTo(A,b)):(g.subTo(p,g),u&&D.subTo(C,D),A.subTo(b,A))}if(g.compareTo(m.ONE)!=0)return m.ZERO;if(A.compareTo(l)>=0)return A.subtract(l);if(A.signum()<0)A.addTo(l,A);else return A;return A.signum()<0?A.add(l):A}var de=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],KC=(1<<26)/de[de.length-1];function tS(l){var u,p=this.abs();if(p.t==1&&p[0]<=de[de.length-1]){for(u=0;u<de.length;++u)if(p[0]==de[u])return!0;return!1}if(p.isEven())return!1;for(u=1;u<de.length;){for(var g=de[u],C=u+1;C<de.length&&g<KC;)g*=de[C++];for(g=p.modInt(g);u<C;)if(g%de[u++]==0)return!1}return p.millerRabin(l)}function eS(l){var u=this.subtract(m.ONE),p=u.getLowestSetBit();if(p<=0)return!1;var g=u.shiftRight(p);l=l+1>>1,l>de.length&&(l=de.length);for(var C=v(),b=0;b<l;++b){C.fromInt(de[Math.floor(Math.random()*de.length)]);var D=C.modPow(g,this);if(D.compareTo(m.ONE)!=0&&D.compareTo(u)!=0){for(var A=1;A++<p&&D.compareTo(u)!=0;)if(D=D.modPowInt(2,this),D.compareTo(m.ONE)==0)return!1;if(D.compareTo(u)!=0)return!1}}return!0}m.prototype.chunkSize=ua,m.prototype.toRadix=pa,m.prototype.fromRadix=da,m.prototype.fromNumber=fa,m.prototype.bitwiseTo=xa,m.prototype.changeBit=bC,m.prototype.addTo=AC,m.prototype.dMultiply=NC,m.prototype.dAddOffset=FC,m.prototype.multiplyLowerTo=YC,m.prototype.multiplyUpperTo=WC,m.prototype.modInt=HC,m.prototype.millerRabin=eS,m.prototype.clone=oa,m.prototype.intValue=la,m.prototype.byteValue=aa,m.prototype.shortValue=ha,m.prototype.signum=ca,m.prototype.toByteArray=ma,m.prototype.equals=Oa,m.prototype.min=ga,m.prototype.max=ya,m.prototype.and=Pa,m.prototype.or=Ca,m.prototype.xor=$,m.prototype.andNot=st,m.prototype.not=pe,m.prototype.shiftLeft=xn,m.prototype.shiftRight=Sa,m.prototype.getLowestSetBit=PC,m.prototype.bitCount=SC,m.prototype.testBit=wC,m.prototype.setBit=DC,m.prototype.clearBit=EC,m.prototype.flipBit=TC,m.prototype.add=kC,m.prototype.subtract=_C,m.prototype.multiply=IC,m.prototype.divide=QC,m.prototype.remainder=XC,m.prototype.divideAndRemainder=$C,m.prototype.modPow=GC,m.prototype.modInverse=JC,m.prototype.pow=RC,m.prototype.gcd=VC,m.prototype.isProbablePrime=tS,m.prototype.square=LC;var lt=m;lt.prototype.IsNegative=function(){return this.compareTo(lt.ZERO)==-1},lt.op_Equality=function(l,u){return l.compareTo(u)==0},lt.op_Inequality=function(l,u){return l.compareTo(u)!=0},lt.op_GreaterThan=function(l,u){return l.compareTo(u)>0},lt.op_LessThan=function(l,u){return l.compareTo(u)<0},lt.op_Addition=function(l,u){return new lt(l,void 0,void 0).add(new lt(u,void 0,void 0))},lt.op_Subtraction=function(l,u){return new lt(l,void 0,void 0).subtract(new lt(u,void 0,void 0))},lt.Int128Mul=function(l,u){return new lt(l,void 0,void 0).multiply(new lt(u,void 0,void 0))},lt.op_Division=function(l,u){return l.divide(u)},lt.prototype.ToDouble=function(){return parseFloat(this.toString())};var ff=function(l,u){var p;if(typeof Object.getOwnPropertyNames>"u"){for(p in u.prototype)(typeof l.prototype[p]>"u"||l.prototype[p]===Object.prototype[p])&&(l.prototype[p]=u.prototype[p]);for(p in u)typeof l[p]>"u"&&(l[p]=u[p]);l.$baseCtor=u}else{for(var g=Object.getOwnPropertyNames(u.prototype),C=0;C<g.length;C++)typeof Object.getOwnPropertyDescriptor(l.prototype,g[C])>"u"&&Object.defineProperty(l.prototype,g[C],Object.getOwnPropertyDescriptor(u.prototype,g[C]));for(p in u)typeof l[p]>"u"&&(l[p]=u[p]);l.$baseCtor=u}};s.Path=function(){return[]},s.Path.prototype.push=Array.prototype.push,s.Paths=function(){return[]},s.Paths.prototype.push=Array.prototype.push,s.DoublePoint=function(){var l=arguments;this.X=0,this.Y=0,l.length===1?(this.X=l[0].X,this.Y=l[0].Y):l.length===2&&(this.X=l[0],this.Y=l[1])},s.DoublePoint0=function(){this.X=0,this.Y=0},s.DoublePoint0.prototype=s.DoublePoint.prototype,s.DoublePoint1=function(l){this.X=l.X,this.Y=l.Y},s.DoublePoint1.prototype=s.DoublePoint.prototype,s.DoublePoint2=function(l,u){this.X=l,this.Y=u},s.DoublePoint2.prototype=s.DoublePoint.prototype,s.PolyNode=function(){this.m_Parent=null,this.m_polygon=new s.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},s.PolyNode.prototype.IsHoleNode=function(){for(var l=!0,u=this.m_Parent;u!==null;)l=!l,u=u.m_Parent;return l},s.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},s.PolyNode.prototype.Contour=function(){return this.m_polygon},s.PolyNode.prototype.AddChild=function(l){var u=this.m_Childs.length;this.m_Childs.push(l),l.m_Parent=this,l.m_Index=u},s.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},s.PolyNode.prototype.GetNextSiblingUp=function(){return this.m_Parent===null?null:this.m_Index===this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},s.PolyNode.prototype.Childs=function(){return this.m_Childs},s.PolyNode.prototype.Parent=function(){return this.m_Parent},s.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},s.PolyTree=function(){this.m_AllPolys=[],s.PolyNode.call(this)},s.PolyTree.prototype.Clear=function(){for(var l=0,u=this.m_AllPolys.length;l<u;l++)this.m_AllPolys[l]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},s.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},s.PolyTree.prototype.Total=function(){var l=this.m_AllPolys.length;return l>0&&this.m_Childs[0]!==this.m_AllPolys[0]&&l--,l},ff(s.PolyTree,s.PolyNode),s.Math_Abs_Int64=s.Math_Abs_Int32=s.Math_Abs_Double=function(l){return Math.abs(l)},s.Math_Max_Int32_Int32=function(l,u){return Math.max(l,u)},d.msie||d.opera||d.safari?s.Cast_Int32=function(l){return l|0}:s.Cast_Int32=function(l){return~~l},typeof Number.toInteger>"u"&&(Number.toInteger=null),d.chrome?s.Cast_Int64=function(l){return l<-2147483648||l>2147483647?l<0?Math.ceil(l):Math.floor(l):~~l}:d.firefox&&typeof Number.toInteger=="function"?s.Cast_Int64=function(l){return Number.toInteger(l)}:d.msie7||d.msie8?s.Cast_Int64=function(l){return parseInt(l,10)}:d.msie?s.Cast_Int64=function(l){return l<-2147483648||l>2147483647?l<0?Math.ceil(l):Math.floor(l):l|0}:s.Cast_Int64=function(l){return l<0?Math.ceil(l):Math.floor(l)},s.Clear=function(l){l.length=0},s.PI=3.141592653589793,s.PI2=2*3.141592653589793,s.IntPoint=function(){var l=arguments,u=l.length;if(this.X=0,this.Y=0,s.use_xyz)if(this.Z=0,u===3)this.X=l[0],this.Y=l[1],this.Z=l[2];else if(u===2)this.X=l[0],this.Y=l[1],this.Z=0;else if(u===1)if(l[0]instanceof s.DoublePoint){var p=l[0];this.X=s.Clipper.Round(p.X),this.Y=s.Clipper.Round(p.Y),this.Z=0}else{var g=l[0];typeof g.Z>"u"&&(g.Z=0),this.X=g.X,this.Y=g.Y,this.Z=g.Z}else this.X=0,this.Y=0,this.Z=0;else if(u===2)this.X=l[0],this.Y=l[1];else if(u===1)if(l[0]instanceof s.DoublePoint){var p=l[0];this.X=s.Clipper.Round(p.X),this.Y=s.Clipper.Round(p.Y)}else{var g=l[0];this.X=g.X,this.Y=g.Y}else this.X=0,this.Y=0},s.IntPoint.op_Equality=function(l,u){return l.X===u.X&&l.Y===u.Y},s.IntPoint.op_Inequality=function(l,u){return l.X!==u.X||l.Y!==u.Y},s.IntPoint0=function(){this.X=0,this.Y=0,s.use_xyz&&(this.Z=0)},s.IntPoint0.prototype=s.IntPoint.prototype,s.IntPoint1=function(l){this.X=l.X,this.Y=l.Y,s.use_xyz&&(typeof l.Z>"u"?this.Z=0:this.Z=l.Z)},s.IntPoint1.prototype=s.IntPoint.prototype,s.IntPoint1dp=function(l){this.X=s.Clipper.Round(l.X),this.Y=s.Clipper.Round(l.Y),s.use_xyz&&(this.Z=0)},s.IntPoint1dp.prototype=s.IntPoint.prototype,s.IntPoint2=function(l,u,p){this.X=l,this.Y=u,s.use_xyz&&(typeof p>"u"?this.Z=0:this.Z=p)},s.IntPoint2.prototype=s.IntPoint.prototype,s.IntRect=function(){var l=arguments,u=l.length;if(u===4)this.left=l[0],this.top=l[1],this.right=l[2],this.bottom=l[3];else if(u===1){var p=l[0];this.left=p.left,this.top=p.top,this.right=p.right,this.bottom=p.bottom}else this.left=0,this.top=0,this.right=0,this.bottom=0},s.IntRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},s.IntRect0.prototype=s.IntRect.prototype,s.IntRect1=function(l){this.left=l.left,this.top=l.top,this.right=l.right,this.bottom=l.bottom},s.IntRect1.prototype=s.IntRect.prototype,s.IntRect4=function(l,u,p,g){this.left=l,this.top=u,this.right=p,this.bottom=g},s.IntRect4.prototype=s.IntRect.prototype,s.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},s.PolyType={ptSubject:0,ptClip:1},s.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},s.JoinType={jtSquare:0,jtRound:1,jtMiter:2},s.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},s.EdgeSide={esLeft:0,esRight:1},s.Direction={dRightToLeft:0,dLeftToRight:1},s.TEdge=function(){this.Bot=new s.IntPoint0,this.Curr=new s.IntPoint0,this.Top=new s.IntPoint0,this.Delta=new s.IntPoint0,this.Dx=0,this.PolyTyp=s.PolyType.ptSubject,this.Side=s.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},s.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new s.IntPoint0},s.MyIntersectNodeSort=function(){},s.MyIntersectNodeSort.Compare=function(l,u){var p=u.Pt.Y-l.Pt.Y;return p>0?1:p<0?-1:0},s.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},s.Scanbeam=function(){this.Y=0,this.Next=null},s.Maxima=function(){this.X=0,this.Next=null,this.Prev=null},s.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},s.OutPt=function(){this.Idx=0,this.Pt=new s.IntPoint0,this.Next=null,this.Prev=null},s.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new s.IntPoint0},s.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_Scanbeam=null,this.m_PolyOuts=null,this.m_ActiveEdges=null},s.ClipperBase.horizontal=-9007199254740992,s.ClipperBase.Skip=-2,s.ClipperBase.Unassigned=-1,s.ClipperBase.tolerance=1e-20,s.ClipperBase.loRange=47453132,s.ClipperBase.hiRange=0xfffffffffffff,s.ClipperBase.near_zero=function(l){return l>-s.ClipperBase.tolerance&&l<s.ClipperBase.tolerance},s.ClipperBase.IsHorizontal=function(l){return l.Delta.Y===0},s.ClipperBase.prototype.PointIsVertex=function(l,u){var p=u;do{if(s.IntPoint.op_Equality(p.Pt,l))return!0;p=p.Next}while(p!==u);return!1},s.ClipperBase.prototype.PointOnLineSegment=function(l,u,p,g){return g?l.X===u.X&&l.Y===u.Y||l.X===p.X&&l.Y===p.Y||l.X>u.X==l.X<p.X&&l.Y>u.Y==l.Y<p.Y&&lt.op_Equality(lt.Int128Mul(l.X-u.X,p.Y-u.Y),lt.Int128Mul(p.X-u.X,l.Y-u.Y)):l.X===u.X&&l.Y===u.Y||l.X===p.X&&l.Y===p.Y||l.X>u.X==l.X<p.X&&l.Y>u.Y==l.Y<p.Y&&(l.X-u.X)*(p.Y-u.Y)===(p.X-u.X)*(l.Y-u.Y)},s.ClipperBase.prototype.PointOnPolygon=function(l,u,p){for(var g=u;;){if(this.PointOnLineSegment(l,g.Pt,g.Next.Pt,p))return!0;if(g=g.Next,g===u)break}return!1},s.ClipperBase.prototype.SlopesEqual=s.ClipperBase.SlopesEqual=function(){var l=arguments,u=l.length,p,g,C,b,D,A,k;return u===3?(p=l[0],g=l[1],k=l[2],k?lt.op_Equality(lt.Int128Mul(p.Delta.Y,g.Delta.X),lt.Int128Mul(p.Delta.X,g.Delta.Y)):s.Cast_Int64(p.Delta.Y*g.Delta.X)===s.Cast_Int64(p.Delta.X*g.Delta.Y)):u===4?(C=l[0],b=l[1],D=l[2],k=l[3],k?lt.op_Equality(lt.Int128Mul(C.Y-b.Y,b.X-D.X),lt.Int128Mul(C.X-b.X,b.Y-D.Y)):s.Cast_Int64((C.Y-b.Y)*(b.X-D.X))-s.Cast_Int64((C.X-b.X)*(b.Y-D.Y))===0):(C=l[0],b=l[1],D=l[2],A=l[3],k=l[4],k?lt.op_Equality(lt.Int128Mul(C.Y-b.Y,D.X-A.X),lt.Int128Mul(C.X-b.X,D.Y-A.Y)):s.Cast_Int64((C.Y-b.Y)*(D.X-A.X))-s.Cast_Int64((C.X-b.X)*(D.Y-A.Y))===0)},s.ClipperBase.SlopesEqual3=function(l,u,p){return p?lt.op_Equality(lt.Int128Mul(l.Delta.Y,u.Delta.X),lt.Int128Mul(l.Delta.X,u.Delta.Y)):s.Cast_Int64(l.Delta.Y*u.Delta.X)===s.Cast_Int64(l.Delta.X*u.Delta.Y)},s.ClipperBase.SlopesEqual4=function(l,u,p,g){return g?lt.op_Equality(lt.Int128Mul(l.Y-u.Y,u.X-p.X),lt.Int128Mul(l.X-u.X,u.Y-p.Y)):s.Cast_Int64((l.Y-u.Y)*(u.X-p.X))-s.Cast_Int64((l.X-u.X)*(u.Y-p.Y))===0},s.ClipperBase.SlopesEqual5=function(l,u,p,g,C){return C?lt.op_Equality(lt.Int128Mul(l.Y-u.Y,p.X-g.X),lt.Int128Mul(l.X-u.X,p.Y-g.Y)):s.Cast_Int64((l.Y-u.Y)*(p.X-g.X))-s.Cast_Int64((l.X-u.X)*(p.Y-g.Y))===0},s.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var l=0,u=this.m_edges.length;l<u;++l){for(var p=0,g=this.m_edges[l].length;p<g;++p)this.m_edges[l][p]=null;s.Clear(this.m_edges[l])}s.Clear(this.m_edges),this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},s.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;this.m_MinimaList!==null;){var l=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=l}this.m_CurrentLM=null},s.ClipperBase.prototype.RangeTest=function(l,u){u.Value?(l.X>s.ClipperBase.hiRange||l.Y>s.ClipperBase.hiRange||-l.X>s.ClipperBase.hiRange||-l.Y>s.ClipperBase.hiRange)&&s.Error("Coordinate outside allowed range in RangeTest()."):(l.X>s.ClipperBase.loRange||l.Y>s.ClipperBase.loRange||-l.X>s.ClipperBase.loRange||-l.Y>s.ClipperBase.loRange)&&(u.Value=!0,this.RangeTest(l,u))},s.ClipperBase.prototype.InitEdge=function(l,u,p,g){l.Next=u,l.Prev=p,l.Curr.X=g.X,l.Curr.Y=g.Y,s.use_xyz&&(l.Curr.Z=g.Z),l.OutIdx=-1},s.ClipperBase.prototype.InitEdge2=function(l,u){l.Curr.Y>=l.Next.Curr.Y?(l.Bot.X=l.Curr.X,l.Bot.Y=l.Curr.Y,s.use_xyz&&(l.Bot.Z=l.Curr.Z),l.Top.X=l.Next.Curr.X,l.Top.Y=l.Next.Curr.Y,s.use_xyz&&(l.Top.Z=l.Next.Curr.Z)):(l.Top.X=l.Curr.X,l.Top.Y=l.Curr.Y,s.use_xyz&&(l.Top.Z=l.Curr.Z),l.Bot.X=l.Next.Curr.X,l.Bot.Y=l.Next.Curr.Y,s.use_xyz&&(l.Bot.Z=l.Next.Curr.Z)),this.SetDx(l),l.PolyTyp=u},s.ClipperBase.prototype.FindNextLocMin=function(l){for(var u;;){for(;s.IntPoint.op_Inequality(l.Bot,l.Prev.Bot)||s.IntPoint.op_Equality(l.Curr,l.Top);)l=l.Next;if(l.Dx!==s.ClipperBase.horizontal&&l.Prev.Dx!==s.ClipperBase.horizontal)break;for(;l.Prev.Dx===s.ClipperBase.horizontal;)l=l.Prev;for(u=l;l.Dx===s.ClipperBase.horizontal;)l=l.Next;if(l.Top.Y!==l.Prev.Bot.Y){u.Prev.Bot.X<l.Bot.X&&(l=u);break}}return l},s.ClipperBase.prototype.ProcessBound=function(l,u){var p,g=l,C;if(g.OutIdx===s.ClipperBase.Skip){if(l=g,u){for(;l.Top.Y===l.Next.Bot.Y;)l=l.Next;for(;l!==g&&l.Dx===s.ClipperBase.horizontal;)l=l.Prev}else{for(;l.Top.Y===l.Prev.Bot.Y;)l=l.Prev;for(;l!==g&&l.Dx===s.ClipperBase.horizontal;)l=l.Next}if(l===g)u?g=l.Next:g=l.Prev;else{u?l=g.Next:l=g.Prev;var b=new s.LocalMinima;b.Next=null,b.Y=l.Bot.Y,b.LeftBound=null,b.RightBound=l,l.WindDelta=0,g=this.ProcessBound(l,u),this.InsertLocalMinima(b)}return g}if(l.Dx===s.ClipperBase.horizontal&&(u?p=l.Prev:p=l.Next,p.Dx===s.ClipperBase.horizontal?p.Bot.X!==l.Bot.X&&p.Top.X!==l.Bot.X&&this.ReverseHorizontal(l):p.Bot.X!==l.Bot.X&&this.ReverseHorizontal(l)),p=l,u){for(;g.Top.Y===g.Next.Bot.Y&&g.Next.OutIdx!==s.ClipperBase.Skip;)g=g.Next;if(g.Dx===s.ClipperBase.horizontal&&g.Next.OutIdx!==s.ClipperBase.Skip){for(C=g;C.Prev.Dx===s.ClipperBase.horizontal;)C=C.Prev;C.Prev.Top.X>g.Next.Top.X&&(g=C.Prev)}for(;l!==g;)l.NextInLML=l.Next,l.Dx===s.ClipperBase.horizontal&&l!==p&&l.Bot.X!==l.Prev.Top.X&&this.ReverseHorizontal(l),l=l.Next;l.Dx===s.ClipperBase.horizontal&&l!==p&&l.Bot.X!==l.Prev.Top.X&&this.ReverseHorizontal(l),g=g.Next}else{for(;g.Top.Y===g.Prev.Bot.Y&&g.Prev.OutIdx!==s.ClipperBase.Skip;)g=g.Prev;if(g.Dx===s.ClipperBase.horizontal&&g.Prev.OutIdx!==s.ClipperBase.Skip){for(C=g;C.Next.Dx===s.ClipperBase.horizontal;)C=C.Next;(C.Next.Top.X===g.Prev.Top.X||C.Next.Top.X>g.Prev.Top.X)&&(g=C.Next)}for(;l!==g;)l.NextInLML=l.Prev,l.Dx===s.ClipperBase.horizontal&&l!==p&&l.Bot.X!==l.Next.Top.X&&this.ReverseHorizontal(l),l=l.Prev;l.Dx===s.ClipperBase.horizontal&&l!==p&&l.Bot.X!==l.Next.Top.X&&this.ReverseHorizontal(l),g=g.Prev}return g},s.ClipperBase.prototype.AddPath=function(l,u,p){s.use_lines?!p&&u===s.PolyType.ptClip&&s.Error("AddPath: Open paths must be subject."):p||s.Error("AddPath: Open paths have been disabled.");var g=l.length-1;if(p)for(;g>0&&s.IntPoint.op_Equality(l[g],l[0]);)--g;for(;g>0&&s.IntPoint.op_Equality(l[g],l[g-1]);)--g;if(p&&g<2||!p&&g<1)return!1;for(var C=new Array,b=0;b<=g;b++)C.push(new s.TEdge);var D=!0;C[1].Curr.X=l[1].X,C[1].Curr.Y=l[1].Y,s.use_xyz&&(C[1].Curr.Z=l[1].Z);var A={Value:this.m_UseFullRange};this.RangeTest(l[0],A),this.m_UseFullRange=A.Value,A.Value=this.m_UseFullRange,this.RangeTest(l[g],A),this.m_UseFullRange=A.Value,this.InitEdge(C[0],C[1],C[g],l[0]),this.InitEdge(C[g],C[0],C[g-1],l[g]);for(var b=g-1;b>=1;--b)A.Value=this.m_UseFullRange,this.RangeTest(l[b],A),this.m_UseFullRange=A.Value,this.InitEdge(C[b],C[b+1],C[b-1],l[b]);for(var k=C[0],L=k,W=k;;){if(L.Curr===L.Next.Curr&&(p||L.Next!==k)){if(L===L.Next)break;L===k&&(k=L.Next),L=this.RemoveEdge(L),W=L;continue}if(L.Prev===L.Next)break;if(p&&s.ClipperBase.SlopesEqual4(L.Prev.Curr,L.Curr,L.Next.Curr,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(L.Prev.Curr,L.Curr,L.Next.Curr))){L===k&&(k=L.Next),L=this.RemoveEdge(L),L=L.Prev,W=L;continue}if(L=L.Next,L===W||!p&&L.Next===k)break}if(!p&&L===L.Next||p&&L.Prev===L.Next)return!1;p||(this.m_HasOpenPaths=!0,k.Prev.OutIdx=s.ClipperBase.Skip),L=k;do this.InitEdge2(L,u),L=L.Next,D&&L.Curr.Y!==k.Curr.Y&&(D=!1);while(L!==k);if(D){if(p)return!1;L.Prev.OutIdx=s.ClipperBase.Skip;var M=new s.LocalMinima;for(M.Next=null,M.Y=L.Bot.Y,M.LeftBound=null,M.RightBound=L,M.RightBound.Side=s.EdgeSide.esRight,M.RightBound.WindDelta=0;L.Bot.X!==L.Prev.Top.X&&this.ReverseHorizontal(L),L.Next.OutIdx!==s.ClipperBase.Skip;)L.NextInLML=L.Next,L=L.Next;return this.InsertLocalMinima(M),this.m_edges.push(C),!0}this.m_edges.push(C);var V,it=null;for(s.IntPoint.op_Equality(L.Prev.Bot,L.Prev.Top)&&(L=L.Next);L=this.FindNextLocMin(L),L!==it;){it===null&&(it=L);var M=new s.LocalMinima;M.Next=null,M.Y=L.Bot.Y,L.Dx<L.Prev.Dx?(M.LeftBound=L.Prev,M.RightBound=L,V=!1):(M.LeftBound=L,M.RightBound=L.Prev,V=!0),M.LeftBound.Side=s.EdgeSide.esLeft,M.RightBound.Side=s.EdgeSide.esRight,p?M.LeftBound.Next===M.RightBound?M.LeftBound.WindDelta=-1:M.LeftBound.WindDelta=1:M.LeftBound.WindDelta=0,M.RightBound.WindDelta=-M.LeftBound.WindDelta,L=this.ProcessBound(M.LeftBound,V),L.OutIdx===s.ClipperBase.Skip&&(L=this.ProcessBound(L,V));var at=this.ProcessBound(M.RightBound,!V);at.OutIdx===s.ClipperBase.Skip&&(at=this.ProcessBound(at,!V)),M.LeftBound.OutIdx===s.ClipperBase.Skip?M.LeftBound=null:M.RightBound.OutIdx===s.ClipperBase.Skip&&(M.RightBound=null),this.InsertLocalMinima(M),V||(L=at)}return!0},s.ClipperBase.prototype.AddPaths=function(l,u,p){for(var g=!1,C=0,b=l.length;C<b;++C)this.AddPath(l[C],u,p)&&(g=!0);return g},s.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(l,u,p){return s.IntPoint.op_Equality(l,p)||s.IntPoint.op_Equality(l,u)||s.IntPoint.op_Equality(p,u)?!1:l.X!==p.X?u.X>l.X==u.X<p.X:u.Y>l.Y==u.Y<p.Y},s.ClipperBase.prototype.RemoveEdge=function(l){l.Prev.Next=l.Next,l.Next.Prev=l.Prev;var u=l.Next;return l.Prev=null,u},s.ClipperBase.prototype.SetDx=function(l){l.Delta.X=l.Top.X-l.Bot.X,l.Delta.Y=l.Top.Y-l.Bot.Y,l.Delta.Y===0?l.Dx=s.ClipperBase.horizontal:l.Dx=l.Delta.X/l.Delta.Y},s.ClipperBase.prototype.InsertLocalMinima=function(l){if(this.m_MinimaList===null)this.m_MinimaList=l;else if(l.Y>=this.m_MinimaList.Y)l.Next=this.m_MinimaList,this.m_MinimaList=l;else{for(var u=this.m_MinimaList;u.Next!==null&&l.Y<u.Next.Y;)u=u.Next;l.Next=u.Next,u.Next=l}},s.ClipperBase.prototype.PopLocalMinima=function(l,u){return u.v=this.m_CurrentLM,this.m_CurrentLM!==null&&this.m_CurrentLM.Y===l?(this.m_CurrentLM=this.m_CurrentLM.Next,!0):!1},s.ClipperBase.prototype.ReverseHorizontal=function(l){var u=l.Top.X;l.Top.X=l.Bot.X,l.Bot.X=u,s.use_xyz&&(u=l.Top.Z,l.Top.Z=l.Bot.Z,l.Bot.Z=u)},s.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,this.m_CurrentLM!==null){this.m_Scanbeam=null;for(var l=this.m_MinimaList;l!==null;){this.InsertScanbeam(l.Y);var u=l.LeftBound;u!==null&&(u.Curr.X=u.Bot.X,u.Curr.Y=u.Bot.Y,s.use_xyz&&(u.Curr.Z=u.Bot.Z),u.OutIdx=s.ClipperBase.Unassigned),u=l.RightBound,u!==null&&(u.Curr.X=u.Bot.X,u.Curr.Y=u.Bot.Y,s.use_xyz&&(u.Curr.Z=u.Bot.Z),u.OutIdx=s.ClipperBase.Unassigned),l=l.Next}this.m_ActiveEdges=null}},s.ClipperBase.prototype.InsertScanbeam=function(l){if(this.m_Scanbeam===null)this.m_Scanbeam=new s.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=l;else if(l>this.m_Scanbeam.Y){var u=new s.Scanbeam;u.Y=l,u.Next=this.m_Scanbeam,this.m_Scanbeam=u}else{for(var p=this.m_Scanbeam;p.Next!==null&&l<=p.Next.Y;)p=p.Next;if(l===p.Y)return;var g=new s.Scanbeam;g.Y=l,g.Next=p.Next,p.Next=g}},s.ClipperBase.prototype.PopScanbeam=function(l){return this.m_Scanbeam===null?(l.v=0,!1):(l.v=this.m_Scanbeam.Y,this.m_Scanbeam=this.m_Scanbeam.Next,!0)},s.ClipperBase.prototype.LocalMinimaPending=function(){return this.m_CurrentLM!==null},s.ClipperBase.prototype.CreateOutRec=function(){var l=new s.OutRec;return l.Idx=s.ClipperBase.Unassigned,l.IsHole=!1,l.IsOpen=!1,l.FirstLeft=null,l.Pts=null,l.BottomPt=null,l.PolyNode=null,this.m_PolyOuts.push(l),l.Idx=this.m_PolyOuts.length-1,l},s.ClipperBase.prototype.DisposeOutRec=function(l){var u=this.m_PolyOuts[l];u.Pts=null,u=null,this.m_PolyOuts[l]=null},s.ClipperBase.prototype.UpdateEdgeIntoAEL=function(l){l.NextInLML===null&&s.Error("UpdateEdgeIntoAEL: invalid call");var u=l.PrevInAEL,p=l.NextInAEL;return l.NextInLML.OutIdx=l.OutIdx,u!==null?u.NextInAEL=l.NextInLML:this.m_ActiveEdges=l.NextInLML,p!==null&&(p.PrevInAEL=l.NextInLML),l.NextInLML.Side=l.Side,l.NextInLML.WindDelta=l.WindDelta,l.NextInLML.WindCnt=l.WindCnt,l.NextInLML.WindCnt2=l.WindCnt2,l=l.NextInLML,l.Curr.X=l.Bot.X,l.Curr.Y=l.Bot.Y,l.PrevInAEL=u,l.NextInAEL=p,s.ClipperBase.IsHorizontal(l)||this.InsertScanbeam(l.Top.Y),l},s.ClipperBase.prototype.SwapPositionsInAEL=function(l,u){if(!(l.NextInAEL===l.PrevInAEL||u.NextInAEL===u.PrevInAEL)){if(l.NextInAEL===u){var p=u.NextInAEL;p!==null&&(p.PrevInAEL=l);var g=l.PrevInAEL;g!==null&&(g.NextInAEL=u),u.PrevInAEL=g,u.NextInAEL=l,l.PrevInAEL=u,l.NextInAEL=p}else if(u.NextInAEL===l){var C=l.NextInAEL;C!==null&&(C.PrevInAEL=u);var b=u.PrevInAEL;b!==null&&(b.NextInAEL=l),l.PrevInAEL=b,l.NextInAEL=u,u.PrevInAEL=l,u.NextInAEL=C}else{var D=l.NextInAEL,A=l.PrevInAEL;l.NextInAEL=u.NextInAEL,l.NextInAEL!==null&&(l.NextInAEL.PrevInAEL=l),l.PrevInAEL=u.PrevInAEL,l.PrevInAEL!==null&&(l.PrevInAEL.NextInAEL=l),u.NextInAEL=D,u.NextInAEL!==null&&(u.NextInAEL.PrevInAEL=u),u.PrevInAEL=A,u.PrevInAEL!==null&&(u.PrevInAEL.NextInAEL=u)}l.PrevInAEL===null?this.m_ActiveEdges=l:u.PrevInAEL===null&&(this.m_ActiveEdges=u)}},s.ClipperBase.prototype.DeleteFromAEL=function(l){var u=l.PrevInAEL,p=l.NextInAEL;u===null&&p===null&&l!==this.m_ActiveEdges||(u!==null?u.NextInAEL=p:this.m_ActiveEdges=p,p!==null&&(p.PrevInAEL=u),l.NextInAEL=null,l.PrevInAEL=null)},s.Clipper=function(l){typeof l>"u"&&(l=0),this.m_PolyOuts=null,this.m_ClipType=s.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=s.PolyFillType.pftEvenOdd,this.m_SubjFillType=s.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,s.ClipperBase.call(this),this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=s.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=(1&l)!==0,this.StrictlySimple=(2&l)!==0,this.PreserveCollinear=(4&l)!==0,s.use_xyz&&(this.ZFillFunction=null)},s.Clipper.ioReverseSolution=1,s.Clipper.ioStrictlySimple=2,s.Clipper.ioPreserveCollinear=4,s.Clipper.prototype.Clear=function(){this.m_edges.length!==0&&(this.DisposeAllPolyPts(),s.ClipperBase.prototype.Clear.call(this))},s.Clipper.prototype.InsertMaxima=function(l){var u=new s.Maxima;if(u.X=l,this.m_Maxima===null)this.m_Maxima=u,this.m_Maxima.Next=null,this.m_Maxima.Prev=null;else if(l<this.m_Maxima.X)u.Next=this.m_Maxima,u.Prev=null,this.m_Maxima=u;else{for(var p=this.m_Maxima;p.Next!==null&&l>=p.Next.X;)p=p.Next;if(l===p.X)return;u.Next=p.Next,u.Prev=p,p.Next!==null&&(p.Next.Prev=u),p.Next=u}},s.Clipper.prototype.Execute=function(){var l=arguments,u=l.length,p=l[1]instanceof s.PolyTree;if(u===4&&!p){var g=l[0],C=l[1],b=l[2],D=l[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&s.Error("Error: PolyTree struct is needed for open path clipping."),this.m_ExecuteLocked=!0,s.Clear(C),this.m_SubjFillType=b,this.m_ClipFillType=D,this.m_ClipType=g,this.m_UsingPolyTree=!1;try{var A=this.ExecuteInternal();A&&this.BuildResult(C)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return A}else if(u===4&&p){var g=l[0],k=l[1],b=l[2],D=l[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=b,this.m_ClipFillType=D,this.m_ClipType=g,this.m_UsingPolyTree=!0;try{var A=this.ExecuteInternal();A&&this.BuildResult2(k)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return A}else if(u===2&&!p){var g=l[0],C=l[1];return this.Execute(g,C,s.PolyFillType.pftEvenOdd,s.PolyFillType.pftEvenOdd)}else if(u===2&&p){var g=l[0],k=l[1];return this.Execute(g,k,s.PolyFillType.pftEvenOdd,s.PolyFillType.pftEvenOdd)}},s.Clipper.prototype.FixHoleLinkage=function(l){if(!(l.FirstLeft===null||l.IsHole!==l.FirstLeft.IsHole&&l.FirstLeft.Pts!==null)){for(var u=l.FirstLeft;u!==null&&(u.IsHole===l.IsHole||u.Pts===null);)u=u.FirstLeft;l.FirstLeft=u}},s.Clipper.prototype.ExecuteInternal=function(){try{this.Reset(),this.m_SortedEdges=null,this.m_Maxima=null;var l={},u={};if(!this.PopScanbeam(l))return!1;for(this.InsertLocalMinimaIntoAEL(l.v);this.PopScanbeam(u)||this.LocalMinimaPending();){if(this.ProcessHorizontals(),this.m_GhostJoins.length=0,!this.ProcessIntersections(u.v))return!1;this.ProcessEdgesAtTopOfScanbeam(u.v),l.v=u.v,this.InsertLocalMinimaIntoAEL(l.v)}var p,g,C;for(g=0,C=this.m_PolyOuts.length;g<C;g++)p=this.m_PolyOuts[g],!(p.Pts===null||p.IsOpen)&&(p.IsHole^this.ReverseSolution)==this.Area$1(p)>0&&this.ReversePolyPtLinks(p.Pts);for(this.JoinCommonEdges(),g=0,C=this.m_PolyOuts.length;g<C;g++)p=this.m_PolyOuts[g],p.Pts!==null&&(p.IsOpen?this.FixupOutPolyline(p):this.FixupOutPolygon(p));return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{this.m_Joins.length=0,this.m_GhostJoins.length=0}},s.Clipper.prototype.DisposeAllPolyPts=function(){for(var l=0,u=this.m_PolyOuts.length;l<u;++l)this.DisposeOutRec(l);s.Clear(this.m_PolyOuts)},s.Clipper.prototype.AddJoin=function(l,u,p){var g=new s.Join;g.OutPt1=l,g.OutPt2=u,g.OffPt.X=p.X,g.OffPt.Y=p.Y,s.use_xyz&&(g.OffPt.Z=p.Z),this.m_Joins.push(g)},s.Clipper.prototype.AddGhostJoin=function(l,u){var p=new s.Join;p.OutPt1=l,p.OffPt.X=u.X,p.OffPt.Y=u.Y,s.use_xyz&&(p.OffPt.Z=u.Z),this.m_GhostJoins.push(p)},s.Clipper.prototype.SetZ=function(l,u,p){if(this.ZFillFunction!==null){if(l.Z!==0||this.ZFillFunction===null)return;s.IntPoint.op_Equality(l,u.Bot)?l.Z=u.Bot.Z:s.IntPoint.op_Equality(l,u.Top)?l.Z=u.Top.Z:s.IntPoint.op_Equality(l,p.Bot)?l.Z=p.Bot.Z:s.IntPoint.op_Equality(l,p.Top)?l.Z=p.Top.Z:this.ZFillFunction(u.Bot,u.Top,p.Bot,p.Top,l)}},s.Clipper.prototype.InsertLocalMinimaIntoAEL=function(l){for(var u={},p,g;this.PopLocalMinima(l,u);){p=u.v.LeftBound,g=u.v.RightBound;var C=null;if(p===null?(this.InsertEdgeIntoAEL(g,null),this.SetWindingCount(g),this.IsContributing(g)&&(C=this.AddOutPt(g,g.Bot))):g===null?(this.InsertEdgeIntoAEL(p,null),this.SetWindingCount(p),this.IsContributing(p)&&(C=this.AddOutPt(p,p.Bot)),this.InsertScanbeam(p.Top.Y)):(this.InsertEdgeIntoAEL(p,null),this.InsertEdgeIntoAEL(g,p),this.SetWindingCount(p),g.WindCnt=p.WindCnt,g.WindCnt2=p.WindCnt2,this.IsContributing(p)&&(C=this.AddLocalMinPoly(p,g,p.Bot)),this.InsertScanbeam(p.Top.Y)),g!==null&&(s.ClipperBase.IsHorizontal(g)?(g.NextInLML!==null&&this.InsertScanbeam(g.NextInLML.Top.Y),this.AddEdgeToSEL(g)):this.InsertScanbeam(g.Top.Y)),!(p===null||g===null)){if(C!==null&&s.ClipperBase.IsHorizontal(g)&&this.m_GhostJoins.length>0&&g.WindDelta!==0)for(var b=0,D=this.m_GhostJoins.length;b<D;b++){var A=this.m_GhostJoins[b];this.HorzSegmentsOverlap(A.OutPt1.Pt.X,A.OffPt.X,g.Bot.X,g.Top.X)&&this.AddJoin(A.OutPt1,C,A.OffPt)}if(p.OutIdx>=0&&p.PrevInAEL!==null&&p.PrevInAEL.Curr.X===p.Bot.X&&p.PrevInAEL.OutIdx>=0&&s.ClipperBase.SlopesEqual5(p.PrevInAEL.Curr,p.PrevInAEL.Top,p.Curr,p.Top,this.m_UseFullRange)&&p.WindDelta!==0&&p.PrevInAEL.WindDelta!==0){var k=this.AddOutPt(p.PrevInAEL,p.Bot);this.AddJoin(C,k,p.Top)}if(p.NextInAEL!==g){if(g.OutIdx>=0&&g.PrevInAEL.OutIdx>=0&&s.ClipperBase.SlopesEqual5(g.PrevInAEL.Curr,g.PrevInAEL.Top,g.Curr,g.Top,this.m_UseFullRange)&&g.WindDelta!==0&&g.PrevInAEL.WindDelta!==0){var k=this.AddOutPt(g.PrevInAEL,g.Bot);this.AddJoin(C,k,g.Top)}var L=p.NextInAEL;if(L!==null)for(;L!==g;)this.IntersectEdges(g,L,p.Curr),L=L.NextInAEL}}}},s.Clipper.prototype.InsertEdgeIntoAEL=function(l,u){if(this.m_ActiveEdges===null)l.PrevInAEL=null,l.NextInAEL=null,this.m_ActiveEdges=l;else if(u===null&&this.E2InsertsBeforeE1(this.m_ActiveEdges,l))l.PrevInAEL=null,l.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=l,this.m_ActiveEdges=l;else{for(u===null&&(u=this.m_ActiveEdges);u.NextInAEL!==null&&!this.E2InsertsBeforeE1(u.NextInAEL,l);)u=u.NextInAEL;l.NextInAEL=u.NextInAEL,u.NextInAEL!==null&&(u.NextInAEL.PrevInAEL=l),l.PrevInAEL=u,u.NextInAEL=l}},s.Clipper.prototype.E2InsertsBeforeE1=function(l,u){return u.Curr.X===l.Curr.X?u.Top.Y>l.Top.Y?u.Top.X<s.Clipper.TopX(l,u.Top.Y):l.Top.X>s.Clipper.TopX(u,l.Top.Y):u.Curr.X<l.Curr.X},s.Clipper.prototype.IsEvenOddFillType=function(l){return l.PolyTyp===s.PolyType.ptSubject?this.m_SubjFillType===s.PolyFillType.pftEvenOdd:this.m_ClipFillType===s.PolyFillType.pftEvenOdd},s.Clipper.prototype.IsEvenOddAltFillType=function(l){return l.PolyTyp===s.PolyType.ptSubject?this.m_ClipFillType===s.PolyFillType.pftEvenOdd:this.m_SubjFillType===s.PolyFillType.pftEvenOdd},s.Clipper.prototype.IsContributing=function(l){var u,p;switch(l.PolyTyp===s.PolyType.ptSubject?(u=this.m_SubjFillType,p=this.m_ClipFillType):(u=this.m_ClipFillType,p=this.m_SubjFillType),u){case s.PolyFillType.pftEvenOdd:if(l.WindDelta===0&&l.WindCnt!==1)return!1;break;case s.PolyFillType.pftNonZero:if(Math.abs(l.WindCnt)!==1)return!1;break;case s.PolyFillType.pftPositive:if(l.WindCnt!==1)return!1;break;default:if(l.WindCnt!==-1)return!1;break}switch(this.m_ClipType){case s.ClipType.ctIntersection:switch(p){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return l.WindCnt2!==0;case s.PolyFillType.pftPositive:return l.WindCnt2>0;default:return l.WindCnt2<0}case s.ClipType.ctUnion:switch(p){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return l.WindCnt2===0;case s.PolyFillType.pftPositive:return l.WindCnt2<=0;default:return l.WindCnt2>=0}case s.ClipType.ctDifference:if(l.PolyTyp===s.PolyType.ptSubject)switch(p){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return l.WindCnt2===0;case s.PolyFillType.pftPositive:return l.WindCnt2<=0;default:return l.WindCnt2>=0}else switch(p){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return l.WindCnt2!==0;case s.PolyFillType.pftPositive:return l.WindCnt2>0;default:return l.WindCnt2<0}case s.ClipType.ctXor:if(l.WindDelta===0)switch(p){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return l.WindCnt2===0;case s.PolyFillType.pftPositive:return l.WindCnt2<=0;default:return l.WindCnt2>=0}else return!0}return!0},s.Clipper.prototype.SetWindingCount=function(l){for(var u=l.PrevInAEL;u!==null&&(u.PolyTyp!==l.PolyTyp||u.WindDelta===0);)u=u.PrevInAEL;if(u===null){var p=l.PolyTyp===s.PolyType.ptSubject?this.m_SubjFillType:this.m_ClipFillType;l.WindDelta===0?l.WindCnt=p===s.PolyFillType.pftNegative?-1:1:l.WindCnt=l.WindDelta,l.WindCnt2=0,u=this.m_ActiveEdges}else if(l.WindDelta===0&&this.m_ClipType!==s.ClipType.ctUnion)l.WindCnt=1,l.WindCnt2=u.WindCnt2,u=u.NextInAEL;else if(this.IsEvenOddFillType(l)){if(l.WindDelta===0){for(var g=!0,C=u.PrevInAEL;C!==null;)C.PolyTyp===u.PolyTyp&&C.WindDelta!==0&&(g=!g),C=C.PrevInAEL;l.WindCnt=g?0:1}else l.WindCnt=l.WindDelta;l.WindCnt2=u.WindCnt2,u=u.NextInAEL}else u.WindCnt*u.WindDelta<0?Math.abs(u.WindCnt)>1?u.WindDelta*l.WindDelta<0?l.WindCnt=u.WindCnt:l.WindCnt=u.WindCnt+l.WindDelta:l.WindCnt=l.WindDelta===0?1:l.WindDelta:l.WindDelta===0?l.WindCnt=u.WindCnt<0?u.WindCnt-1:u.WindCnt+1:u.WindDelta*l.WindDelta<0?l.WindCnt=u.WindCnt:l.WindCnt=u.WindCnt+l.WindDelta,l.WindCnt2=u.WindCnt2,u=u.NextInAEL;if(this.IsEvenOddAltFillType(l))for(;u!==l;)u.WindDelta!==0&&(l.WindCnt2=l.WindCnt2===0?1:0),u=u.NextInAEL;else for(;u!==l;)l.WindCnt2+=u.WindDelta,u=u.NextInAEL},s.Clipper.prototype.AddEdgeToSEL=function(l){this.m_SortedEdges===null?(this.m_SortedEdges=l,l.PrevInSEL=null,l.NextInSEL=null):(l.NextInSEL=this.m_SortedEdges,l.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=l,this.m_SortedEdges=l)},s.Clipper.prototype.PopEdgeFromSEL=function(l){if(l.v=this.m_SortedEdges,l.v===null)return!1;var u=l.v;return this.m_SortedEdges=l.v.NextInSEL,this.m_SortedEdges!==null&&(this.m_SortedEdges.PrevInSEL=null),u.NextInSEL=null,u.PrevInSEL=null,!0},s.Clipper.prototype.CopyAELToSEL=function(){var l=this.m_ActiveEdges;for(this.m_SortedEdges=l;l!==null;)l.PrevInSEL=l.PrevInAEL,l.NextInSEL=l.NextInAEL,l=l.NextInAEL},s.Clipper.prototype.SwapPositionsInSEL=function(l,u){if(!(l.NextInSEL===null&&l.PrevInSEL===null)&&!(u.NextInSEL===null&&u.PrevInSEL===null)){if(l.NextInSEL===u){var p=u.NextInSEL;p!==null&&(p.PrevInSEL=l);var g=l.PrevInSEL;g!==null&&(g.NextInSEL=u),u.PrevInSEL=g,u.NextInSEL=l,l.PrevInSEL=u,l.NextInSEL=p}else if(u.NextInSEL===l){var p=l.NextInSEL;p!==null&&(p.PrevInSEL=u);var g=u.PrevInSEL;g!==null&&(g.NextInSEL=l),l.PrevInSEL=g,l.NextInSEL=u,u.PrevInSEL=l,u.NextInSEL=p}else{var p=l.NextInSEL,g=l.PrevInSEL;l.NextInSEL=u.NextInSEL,l.NextInSEL!==null&&(l.NextInSEL.PrevInSEL=l),l.PrevInSEL=u.PrevInSEL,l.PrevInSEL!==null&&(l.PrevInSEL.NextInSEL=l),u.NextInSEL=p,u.NextInSEL!==null&&(u.NextInSEL.PrevInSEL=u),u.PrevInSEL=g,u.PrevInSEL!==null&&(u.PrevInSEL.NextInSEL=u)}l.PrevInSEL===null?this.m_SortedEdges=l:u.PrevInSEL===null&&(this.m_SortedEdges=u)}},s.Clipper.prototype.AddLocalMaxPoly=function(l,u,p){this.AddOutPt(l,p),u.WindDelta===0&&this.AddOutPt(u,p),l.OutIdx===u.OutIdx?(l.OutIdx=-1,u.OutIdx=-1):l.OutIdx<u.OutIdx?this.AppendPolygon(l,u):this.AppendPolygon(u,l)},s.Clipper.prototype.AddLocalMinPoly=function(l,u,p){var g,C,b;if(s.ClipperBase.IsHorizontal(u)||l.Dx>u.Dx?(g=this.AddOutPt(l,p),u.OutIdx=l.OutIdx,l.Side=s.EdgeSide.esLeft,u.Side=s.EdgeSide.esRight,C=l,C.PrevInAEL===u?b=u.PrevInAEL:b=C.PrevInAEL):(g=this.AddOutPt(u,p),l.OutIdx=u.OutIdx,l.Side=s.EdgeSide.esRight,u.Side=s.EdgeSide.esLeft,C=u,C.PrevInAEL===l?b=l.PrevInAEL:b=C.PrevInAEL),b!==null&&b.OutIdx>=0&&b.Top.Y<p.Y&&C.Top.Y<p.Y){var D=s.Clipper.TopX(b,p.Y),A=s.Clipper.TopX(C,p.Y);if(D===A&&C.WindDelta!==0&&b.WindDelta!==0&&s.ClipperBase.SlopesEqual5(new s.IntPoint2(D,p.Y),b.Top,new s.IntPoint2(A,p.Y),C.Top,this.m_UseFullRange)){var k=this.AddOutPt(b,p);this.AddJoin(g,k,C.Top)}}return g},s.Clipper.prototype.AddOutPt=function(l,u){if(l.OutIdx<0){var p=this.CreateOutRec();p.IsOpen=l.WindDelta===0;var g=new s.OutPt;return p.Pts=g,g.Idx=p.Idx,g.Pt.X=u.X,g.Pt.Y=u.Y,s.use_xyz&&(g.Pt.Z=u.Z),g.Next=g,g.Prev=g,p.IsOpen||this.SetHoleState(l,p),l.OutIdx=p.Idx,g}else{var p=this.m_PolyOuts[l.OutIdx],C=p.Pts,b=l.Side===s.EdgeSide.esLeft;if(b&&s.IntPoint.op_Equality(u,C.Pt))return C;if(!b&&s.IntPoint.op_Equality(u,C.Prev.Pt))return C.Prev;var g=new s.OutPt;return g.Idx=p.Idx,g.Pt.X=u.X,g.Pt.Y=u.Y,s.use_xyz&&(g.Pt.Z=u.Z),g.Next=C,g.Prev=C.Prev,g.Prev.Next=g,C.Prev=g,b&&(p.Pts=g),g}},s.Clipper.prototype.GetLastOutPt=function(l){var u=this.m_PolyOuts[l.OutIdx];return l.Side===s.EdgeSide.esLeft?u.Pts:u.Pts.Prev},s.Clipper.prototype.SwapPoints=function(l,u){var p=new s.IntPoint1(l.Value);l.Value.X=u.Value.X,l.Value.Y=u.Value.Y,s.use_xyz&&(l.Value.Z=u.Value.Z),u.Value.X=p.X,u.Value.Y=p.Y,s.use_xyz&&(u.Value.Z=p.Z)},s.Clipper.prototype.HorzSegmentsOverlap=function(l,u,p,g){var C;return l>u&&(C=l,l=u,u=C),p>g&&(C=p,p=g,g=C),l<g&&p<u},s.Clipper.prototype.SetHoleState=function(l,u){for(var p=l.PrevInAEL,g=null;p!==null;)p.OutIdx>=0&&p.WindDelta!==0&&(g===null?g=p:g.OutIdx===p.OutIdx&&(g=null)),p=p.PrevInAEL;g===null?(u.FirstLeft=null,u.IsHole=!1):(u.FirstLeft=this.m_PolyOuts[g.OutIdx],u.IsHole=!u.FirstLeft.IsHole)},s.Clipper.prototype.GetDx=function(l,u){return l.Y===u.Y?s.ClipperBase.horizontal:(u.X-l.X)/(u.Y-l.Y)},s.Clipper.prototype.FirstIsBottomPt=function(l,u){for(var p=l.Prev;s.IntPoint.op_Equality(p.Pt,l.Pt)&&p!==l;)p=p.Prev;var g=Math.abs(this.GetDx(l.Pt,p.Pt));for(p=l.Next;s.IntPoint.op_Equality(p.Pt,l.Pt)&&p!==l;)p=p.Next;var C=Math.abs(this.GetDx(l.Pt,p.Pt));for(p=u.Prev;s.IntPoint.op_Equality(p.Pt,u.Pt)&&p!==u;)p=p.Prev;var b=Math.abs(this.GetDx(u.Pt,p.Pt));for(p=u.Next;s.IntPoint.op_Equality(p.Pt,u.Pt)&&p!==u;)p=p.Next;var D=Math.abs(this.GetDx(u.Pt,p.Pt));return Math.max(g,C)===Math.max(b,D)&&Math.min(g,C)===Math.min(b,D)?this.Area(l)>0:g>=b&&g>=D||C>=b&&C>=D},s.Clipper.prototype.GetBottomPt=function(l){for(var u=null,p=l.Next;p!==l;)p.Pt.Y>l.Pt.Y?(l=p,u=null):p.Pt.Y===l.Pt.Y&&p.Pt.X<=l.Pt.X&&(p.Pt.X<l.Pt.X?(u=null,l=p):p.Next!==l&&p.Prev!==l&&(u=p)),p=p.Next;if(u!==null)for(;u!==p;)for(this.FirstIsBottomPt(p,u)||(l=u),u=u.Next;s.IntPoint.op_Inequality(u.Pt,l.Pt);)u=u.Next;return l},s.Clipper.prototype.GetLowermostRec=function(l,u){l.BottomPt===null&&(l.BottomPt=this.GetBottomPt(l.Pts)),u.BottomPt===null&&(u.BottomPt=this.GetBottomPt(u.Pts));var p=l.BottomPt,g=u.BottomPt;return p.Pt.Y>g.Pt.Y?l:p.Pt.Y<g.Pt.Y?u:p.Pt.X<g.Pt.X?l:p.Pt.X>g.Pt.X||p.Next===p?u:g.Next===g||this.FirstIsBottomPt(p,g)?l:u},s.Clipper.prototype.OutRec1RightOfOutRec2=function(l,u){do if(l=l.FirstLeft,l===u)return!0;while(l!==null);return!1},s.Clipper.prototype.GetOutRec=function(l){for(var u=this.m_PolyOuts[l];u!==this.m_PolyOuts[u.Idx];)u=this.m_PolyOuts[u.Idx];return u},s.Clipper.prototype.AppendPolygon=function(l,u){var p=this.m_PolyOuts[l.OutIdx],g=this.m_PolyOuts[u.OutIdx],C;this.OutRec1RightOfOutRec2(p,g)?C=g:this.OutRec1RightOfOutRec2(g,p)?C=p:C=this.GetLowermostRec(p,g);var b=p.Pts,D=b.Prev,A=g.Pts,k=A.Prev;l.Side===s.EdgeSide.esLeft?u.Side===s.EdgeSide.esLeft?(this.ReversePolyPtLinks(A),A.Next=b,b.Prev=A,D.Next=k,k.Prev=D,p.Pts=k):(k.Next=b,b.Prev=k,A.Prev=D,D.Next=A,p.Pts=A):u.Side===s.EdgeSide.esRight?(this.ReversePolyPtLinks(A),D.Next=k,k.Prev=D,A.Next=b,b.Prev=A):(D.Next=A,A.Prev=D,b.Prev=k,k.Next=b),p.BottomPt=null,C===g&&(g.FirstLeft!==p&&(p.FirstLeft=g.FirstLeft),p.IsHole=g.IsHole),g.Pts=null,g.BottomPt=null,g.FirstLeft=p;var L=l.OutIdx,W=u.OutIdx;l.OutIdx=-1,u.OutIdx=-1;for(var M=this.m_ActiveEdges;M!==null;){if(M.OutIdx===W){M.OutIdx=L,M.Side=l.Side;break}M=M.NextInAEL}g.Idx=p.Idx},s.Clipper.prototype.ReversePolyPtLinks=function(l){if(l!==null){var u,p;u=l;do p=u.Next,u.Next=u.Prev,u.Prev=p,u=p;while(u!==l)}},s.Clipper.SwapSides=function(l,u){var p=l.Side;l.Side=u.Side,u.Side=p},s.Clipper.SwapPolyIndexes=function(l,u){var p=l.OutIdx;l.OutIdx=u.OutIdx,u.OutIdx=p},s.Clipper.prototype.IntersectEdges=function(l,u,p){var g=l.OutIdx>=0,C=u.OutIdx>=0;if(s.use_xyz&&this.SetZ(p,l,u),s.use_lines&&(l.WindDelta===0||u.WindDelta===0)){if(l.WindDelta===0&&u.WindDelta===0)return;l.PolyTyp===u.PolyTyp&&l.WindDelta!==u.WindDelta&&this.m_ClipType===s.ClipType.ctUnion?l.WindDelta===0?C&&(this.AddOutPt(l,p),g&&(l.OutIdx=-1)):g&&(this.AddOutPt(u,p),C&&(u.OutIdx=-1)):l.PolyTyp!==u.PolyTyp&&(l.WindDelta===0&&Math.abs(u.WindCnt)===1&&(this.m_ClipType!==s.ClipType.ctUnion||u.WindCnt2===0)?(this.AddOutPt(l,p),g&&(l.OutIdx=-1)):u.WindDelta===0&&Math.abs(l.WindCnt)===1&&(this.m_ClipType!==s.ClipType.ctUnion||l.WindCnt2===0)&&(this.AddOutPt(u,p),C&&(u.OutIdx=-1)));return}if(l.PolyTyp===u.PolyTyp)if(this.IsEvenOddFillType(l)){var b=l.WindCnt;l.WindCnt=u.WindCnt,u.WindCnt=b}else l.WindCnt+u.WindDelta===0?l.WindCnt=-l.WindCnt:l.WindCnt+=u.WindDelta,u.WindCnt-l.WindDelta===0?u.WindCnt=-u.WindCnt:u.WindCnt-=l.WindDelta;else this.IsEvenOddFillType(u)?l.WindCnt2=l.WindCnt2===0?1:0:l.WindCnt2+=u.WindDelta,this.IsEvenOddFillType(l)?u.WindCnt2=u.WindCnt2===0?1:0:u.WindCnt2-=l.WindDelta;var D,A,k,L;l.PolyTyp===s.PolyType.ptSubject?(D=this.m_SubjFillType,k=this.m_ClipFillType):(D=this.m_ClipFillType,k=this.m_SubjFillType),u.PolyTyp===s.PolyType.ptSubject?(A=this.m_SubjFillType,L=this.m_ClipFillType):(A=this.m_ClipFillType,L=this.m_SubjFillType);var W,M;switch(D){case s.PolyFillType.pftPositive:W=l.WindCnt;break;case s.PolyFillType.pftNegative:W=-l.WindCnt;break;default:W=Math.abs(l.WindCnt);break}switch(A){case s.PolyFillType.pftPositive:M=u.WindCnt;break;case s.PolyFillType.pftNegative:M=-u.WindCnt;break;default:M=Math.abs(u.WindCnt);break}if(g&&C)W!==0&&W!==1||M!==0&&M!==1||l.PolyTyp!==u.PolyTyp&&this.m_ClipType!==s.ClipType.ctXor?this.AddLocalMaxPoly(l,u,p):(this.AddOutPt(l,p),this.AddOutPt(u,p),s.Clipper.SwapSides(l,u),s.Clipper.SwapPolyIndexes(l,u));else if(g)(M===0||M===1)&&(this.AddOutPt(l,p),s.Clipper.SwapSides(l,u),s.Clipper.SwapPolyIndexes(l,u));else if(C)(W===0||W===1)&&(this.AddOutPt(u,p),s.Clipper.SwapSides(l,u),s.Clipper.SwapPolyIndexes(l,u));else if((W===0||W===1)&&(M===0||M===1)){var V,it;switch(k){case s.PolyFillType.pftPositive:V=l.WindCnt2;break;case s.PolyFillType.pftNegative:V=-l.WindCnt2;break;default:V=Math.abs(l.WindCnt2);break}switch(L){case s.PolyFillType.pftPositive:it=u.WindCnt2;break;case s.PolyFillType.pftNegative:it=-u.WindCnt2;break;default:it=Math.abs(u.WindCnt2);break}if(l.PolyTyp!==u.PolyTyp)this.AddLocalMinPoly(l,u,p);else if(W===1&&M===1)switch(this.m_ClipType){case s.ClipType.ctIntersection:V>0&&it>0&&this.AddLocalMinPoly(l,u,p);break;case s.ClipType.ctUnion:V<=0&&it<=0&&this.AddLocalMinPoly(l,u,p);break;case s.ClipType.ctDifference:(l.PolyTyp===s.PolyType.ptClip&&V>0&&it>0||l.PolyTyp===s.PolyType.ptSubject&&V<=0&&it<=0)&&this.AddLocalMinPoly(l,u,p);break;case s.ClipType.ctXor:this.AddLocalMinPoly(l,u,p);break}else s.Clipper.SwapSides(l,u)}},s.Clipper.prototype.DeleteFromSEL=function(l){var u=l.PrevInSEL,p=l.NextInSEL;u===null&&p===null&&l!==this.m_SortedEdges||(u!==null?u.NextInSEL=p:this.m_SortedEdges=p,p!==null&&(p.PrevInSEL=u),l.NextInSEL=null,l.PrevInSEL=null)},s.Clipper.prototype.ProcessHorizontals=function(){for(var l={};this.PopEdgeFromSEL(l);)this.ProcessHorizontal(l.v)},s.Clipper.prototype.GetHorzDirection=function(l,u){l.Bot.X<l.Top.X?(u.Left=l.Bot.X,u.Right=l.Top.X,u.Dir=s.Direction.dLeftToRight):(u.Left=l.Top.X,u.Right=l.Bot.X,u.Dir=s.Direction.dRightToLeft)},s.Clipper.prototype.ProcessHorizontal=function(l){var u={Dir:null,Left:null,Right:null};this.GetHorzDirection(l,u);for(var p=u.Dir,g=u.Left,C=u.Right,b=l.WindDelta===0,D=l,A=null;D.NextInLML!==null&&s.ClipperBase.IsHorizontal(D.NextInLML);)D=D.NextInLML;D.NextInLML===null&&(A=this.GetMaximaPair(D));var k=this.m_Maxima;if(k!==null)if(p===s.Direction.dLeftToRight){for(;k!==null&&k.X<=l.Bot.X;)k=k.Next;k!==null&&k.X>=D.Top.X&&(k=null)}else{for(;k.Next!==null&&k.Next.X<l.Bot.X;)k=k.Next;k.X<=D.Top.X&&(k=null)}for(var L=null;;){for(var W=l===D,M=this.GetNextInAEL(l,p);M!==null;){if(k!==null)if(p===s.Direction.dLeftToRight)for(;k!==null&&k.X<M.Curr.X;)l.OutIdx>=0&&!b&&this.AddOutPt(l,new s.IntPoint2(k.X,l.Bot.Y)),k=k.Next;else for(;k!==null&&k.X>M.Curr.X;)l.OutIdx>=0&&!b&&this.AddOutPt(l,new s.IntPoint2(k.X,l.Bot.Y)),k=k.Prev;if(p===s.Direction.dLeftToRight&&M.Curr.X>C||p===s.Direction.dRightToLeft&&M.Curr.X<g||M.Curr.X===l.Top.X&&l.NextInLML!==null&&M.Dx<l.NextInLML.Dx)break;if(l.OutIdx>=0&&!b){s.use_xyz&&(p===s.Direction.dLeftToRight?this.SetZ(M.Curr,l,M):this.SetZ(M.Curr,M,l)),L=this.AddOutPt(l,M.Curr);for(var V=this.m_SortedEdges;V!==null;){if(V.OutIdx>=0&&this.HorzSegmentsOverlap(l.Bot.X,l.Top.X,V.Bot.X,V.Top.X)){var it=this.GetLastOutPt(V);this.AddJoin(it,L,V.Top)}V=V.NextInSEL}this.AddGhostJoin(L,l.Bot)}if(M===A&&W){l.OutIdx>=0&&this.AddLocalMaxPoly(l,A,l.Top),this.DeleteFromAEL(l),this.DeleteFromAEL(A);return}if(p===s.Direction.dLeftToRight){var at=new s.IntPoint2(M.Curr.X,l.Curr.Y);this.IntersectEdges(l,M,at)}else{var at=new s.IntPoint2(M.Curr.X,l.Curr.Y);this.IntersectEdges(M,l,at)}var ut=this.GetNextInAEL(M,p);this.SwapPositionsInAEL(l,M),M=ut}if(l.NextInLML===null||!s.ClipperBase.IsHorizontal(l.NextInLML))break;l=this.UpdateEdgeIntoAEL(l),l.OutIdx>=0&&this.AddOutPt(l,l.Bot),u={Dir:p,Left:g,Right:C},this.GetHorzDirection(l,u),p=u.Dir,g=u.Left,C=u.Right}if(l.OutIdx>=0&&L===null){L=this.GetLastOutPt(l);for(var V=this.m_SortedEdges;V!==null;){if(V.OutIdx>=0&&this.HorzSegmentsOverlap(l.Bot.X,l.Top.X,V.Bot.X,V.Top.X)){var it=this.GetLastOutPt(V);this.AddJoin(it,L,V.Top)}V=V.NextInSEL}this.AddGhostJoin(L,l.Top)}if(l.NextInLML!==null)if(l.OutIdx>=0){if(L=this.AddOutPt(l,l.Top),l=this.UpdateEdgeIntoAEL(l),l.WindDelta===0)return;var vt=l.PrevInAEL,ut=l.NextInAEL;if(vt!==null&&vt.Curr.X===l.Bot.X&&vt.Curr.Y===l.Bot.Y&&vt.WindDelta===0&&vt.OutIdx>=0&&vt.Curr.Y>vt.Top.Y&&s.ClipperBase.SlopesEqual3(l,vt,this.m_UseFullRange)){var it=this.AddOutPt(vt,l.Bot);this.AddJoin(L,it,l.Top)}else if(ut!==null&&ut.Curr.X===l.Bot.X&&ut.Curr.Y===l.Bot.Y&&ut.WindDelta!==0&&ut.OutIdx>=0&&ut.Curr.Y>ut.Top.Y&&s.ClipperBase.SlopesEqual3(l,ut,this.m_UseFullRange)){var it=this.AddOutPt(ut,l.Bot);this.AddJoin(L,it,l.Top)}}else l=this.UpdateEdgeIntoAEL(l);else l.OutIdx>=0&&this.AddOutPt(l,l.Top),this.DeleteFromAEL(l)},s.Clipper.prototype.GetNextInAEL=function(l,u){return u===s.Direction.dLeftToRight?l.NextInAEL:l.PrevInAEL},s.Clipper.prototype.IsMinima=function(l){return l!==null&&l.Prev.NextInLML!==l&&l.Next.NextInLML!==l},s.Clipper.prototype.IsMaxima=function(l,u){return l!==null&&l.Top.Y===u&&l.NextInLML===null},s.Clipper.prototype.IsIntermediate=function(l,u){return l.Top.Y===u&&l.NextInLML!==null},s.Clipper.prototype.GetMaximaPair=function(l){return s.IntPoint.op_Equality(l.Next.Top,l.Top)&&l.Next.NextInLML===null?l.Next:s.IntPoint.op_Equality(l.Prev.Top,l.Top)&&l.Prev.NextInLML===null?l.Prev:null},s.Clipper.prototype.GetMaximaPairEx=function(l){var u=this.GetMaximaPair(l);return u===null||u.OutIdx===s.ClipperBase.Skip||u.NextInAEL===u.PrevInAEL&&!s.ClipperBase.IsHorizontal(u)?null:u},s.Clipper.prototype.ProcessIntersections=function(l){if(this.m_ActiveEdges===null)return!0;try{if(this.BuildIntersectList(l),this.m_IntersectList.length===0)return!0;if(this.m_IntersectList.length===1||this.FixupIntersectionOrder())this.ProcessIntersectList();else return!1}catch{this.m_SortedEdges=null,this.m_IntersectList.length=0,s.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},s.Clipper.prototype.BuildIntersectList=function(l){if(this.m_ActiveEdges!==null){var u=this.m_ActiveEdges;for(this.m_SortedEdges=u;u!==null;)u.PrevInSEL=u.PrevInAEL,u.NextInSEL=u.NextInAEL,u.Curr.X=s.Clipper.TopX(u,l),u=u.NextInAEL;for(var p=!0;p&&this.m_SortedEdges!==null;){for(p=!1,u=this.m_SortedEdges;u.NextInSEL!==null;){var g=u.NextInSEL,C=new s.IntPoint0;if(u.Curr.X>g.Curr.X){this.IntersectPoint(u,g,C),C.Y<l&&(C=new s.IntPoint2(s.Clipper.TopX(u,l),l));var b=new s.IntersectNode;b.Edge1=u,b.Edge2=g,b.Pt.X=C.X,b.Pt.Y=C.Y,s.use_xyz&&(b.Pt.Z=C.Z),this.m_IntersectList.push(b),this.SwapPositionsInSEL(u,g),p=!0}else u=g}if(u.PrevInSEL!==null)u.PrevInSEL.NextInSEL=null;else break}this.m_SortedEdges=null}},s.Clipper.prototype.EdgesAdjacent=function(l){return l.Edge1.NextInSEL===l.Edge2||l.Edge1.PrevInSEL===l.Edge2},s.Clipper.IntersectNodeSort=function(l,u){return u.Pt.Y-l.Pt.Y},s.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var l=this.m_IntersectList.length,u=0;u<l;u++){if(!this.EdgesAdjacent(this.m_IntersectList[u])){for(var p=u+1;p<l&&!this.EdgesAdjacent(this.m_IntersectList[p]);)p++;if(p===l)return!1;var g=this.m_IntersectList[u];this.m_IntersectList[u]=this.m_IntersectList[p],this.m_IntersectList[p]=g}this.SwapPositionsInSEL(this.m_IntersectList[u].Edge1,this.m_IntersectList[u].Edge2)}return!0},s.Clipper.prototype.ProcessIntersectList=function(){for(var l=0,u=this.m_IntersectList.length;l<u;l++){var p=this.m_IntersectList[l];this.IntersectEdges(p.Edge1,p.Edge2,p.Pt),this.SwapPositionsInAEL(p.Edge1,p.Edge2)}this.m_IntersectList.length=0};var iS=function(l){return l<0?Math.ceil(l-.5):Math.round(l)},rS=function(l){return l<0?Math.ceil(l-.5):Math.floor(l+.5)},nS=function(l){return l<0?-Math.round(Math.abs(l)):Math.round(l)},sS=function(l){return l<0?(l-=.5,l<-2147483648?Math.ceil(l):l|0):(l+=.5,l>2147483647?Math.floor(l):l|0)};d.msie?s.Clipper.Round=iS:d.chromium?s.Clipper.Round=nS:d.safari?s.Clipper.Round=sS:s.Clipper.Round=rS,s.Clipper.TopX=function(l,u){return u===l.Top.Y?l.Top.X:l.Bot.X+s.Clipper.Round(l.Dx*(u-l.Bot.Y))},s.Clipper.prototype.IntersectPoint=function(l,u,p){p.X=0,p.Y=0;var g,C;if(l.Dx===u.Dx){p.Y=l.Curr.Y,p.X=s.Clipper.TopX(l,p.Y);return}if(l.Delta.X===0)p.X=l.Bot.X,s.ClipperBase.IsHorizontal(u)?p.Y=u.Bot.Y:(C=u.Bot.Y-u.Bot.X/u.Dx,p.Y=s.Clipper.Round(p.X/u.Dx+C));else if(u.Delta.X===0)p.X=u.Bot.X,s.ClipperBase.IsHorizontal(l)?p.Y=l.Bot.Y:(g=l.Bot.Y-l.Bot.X/l.Dx,p.Y=s.Clipper.Round(p.X/l.Dx+g));else{g=l.Bot.X-l.Bot.Y*l.Dx,C=u.Bot.X-u.Bot.Y*u.Dx;var b=(C-g)/(l.Dx-u.Dx);p.Y=s.Clipper.Round(b),Math.abs(l.Dx)<Math.abs(u.Dx)?p.X=s.Clipper.Round(l.Dx*b+g):p.X=s.Clipper.Round(u.Dx*b+C)}if(p.Y<l.Top.Y||p.Y<u.Top.Y){if(l.Top.Y>u.Top.Y)return p.Y=l.Top.Y,p.X=s.Clipper.TopX(u,l.Top.Y),p.X<l.Top.X;p.Y=u.Top.Y,Math.abs(l.Dx)<Math.abs(u.Dx)?p.X=s.Clipper.TopX(l,p.Y):p.X=s.Clipper.TopX(u,p.Y)}p.Y>l.Curr.Y&&(p.Y=l.Curr.Y,Math.abs(l.Dx)>Math.abs(u.Dx)?p.X=s.Clipper.TopX(u,p.Y):p.X=s.Clipper.TopX(l,p.Y))},s.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(l){for(var u=this.m_ActiveEdges;u!==null;){var p=this.IsMaxima(u,l);if(p){var g=this.GetMaximaPairEx(u);p=g===null||!s.ClipperBase.IsHorizontal(g)}if(p){this.StrictlySimple&&this.InsertMaxima(u.Top.X);var C=u.PrevInAEL;this.DoMaxima(u),C===null?u=this.m_ActiveEdges:u=C.NextInAEL}else{if(this.IsIntermediate(u,l)&&s.ClipperBase.IsHorizontal(u.NextInLML)?(u=this.UpdateEdgeIntoAEL(u),u.OutIdx>=0&&this.AddOutPt(u,u.Bot),this.AddEdgeToSEL(u)):(u.Curr.X=s.Clipper.TopX(u,l),u.Curr.Y=l),s.use_xyz&&(u.Top.Y===l?u.Curr.Z=u.Top.Z:u.Bot.Y===l?u.Curr.Z=u.Bot.Z:u.Curr.Z=0),this.StrictlySimple){var C=u.PrevInAEL;if(u.OutIdx>=0&&u.WindDelta!==0&&C!==null&&C.OutIdx>=0&&C.Curr.X===u.Curr.X&&C.WindDelta!==0){var b=new s.IntPoint1(u.Curr);s.use_xyz&&this.SetZ(b,C,u);var D=this.AddOutPt(C,b),A=this.AddOutPt(u,b);this.AddJoin(D,A,b)}}u=u.NextInAEL}}for(this.ProcessHorizontals(),this.m_Maxima=null,u=this.m_ActiveEdges;u!==null;){if(this.IsIntermediate(u,l)){var D=null;u.OutIdx>=0&&(D=this.AddOutPt(u,u.Top)),u=this.UpdateEdgeIntoAEL(u);var C=u.PrevInAEL,k=u.NextInAEL;if(C!==null&&C.Curr.X===u.Bot.X&&C.Curr.Y===u.Bot.Y&&D!==null&&C.OutIdx>=0&&C.Curr.Y===C.Top.Y&&s.ClipperBase.SlopesEqual5(u.Curr,u.Top,C.Curr,C.Top,this.m_UseFullRange)&&u.WindDelta!==0&&C.WindDelta!==0){var A=this.AddOutPt(ePrev2,u.Bot);this.AddJoin(D,A,u.Top)}else if(k!==null&&k.Curr.X===u.Bot.X&&k.Curr.Y===u.Bot.Y&&D!==null&&k.OutIdx>=0&&k.Curr.Y===k.Top.Y&&s.ClipperBase.SlopesEqual5(u.Curr,u.Top,k.Curr,k.Top,this.m_UseFullRange)&&u.WindDelta!==0&&k.WindDelta!==0){var A=this.AddOutPt(k,u.Bot);this.AddJoin(D,A,u.Top)}}u=u.NextInAEL}},s.Clipper.prototype.DoMaxima=function(l){var u=this.GetMaximaPairEx(l);if(u===null){l.OutIdx>=0&&this.AddOutPt(l,l.Top),this.DeleteFromAEL(l);return}for(var p=l.NextInAEL;p!==null&&p!==u;)this.IntersectEdges(l,p,l.Top),this.SwapPositionsInAEL(l,p),p=l.NextInAEL;l.OutIdx===-1&&u.OutIdx===-1?(this.DeleteFromAEL(l),this.DeleteFromAEL(u)):l.OutIdx>=0&&u.OutIdx>=0?(l.OutIdx>=0&&this.AddLocalMaxPoly(l,u,l.Top),this.DeleteFromAEL(l),this.DeleteFromAEL(u)):s.use_lines&&l.WindDelta===0?(l.OutIdx>=0&&(this.AddOutPt(l,l.Top),l.OutIdx=s.ClipperBase.Unassigned),this.DeleteFromAEL(l),u.OutIdx>=0&&(this.AddOutPt(u,l.Top),u.OutIdx=s.ClipperBase.Unassigned),this.DeleteFromAEL(u)):s.Error("DoMaxima error")},s.Clipper.ReversePaths=function(l){for(var u=0,p=l.length;u<p;u++)l[u].reverse()},s.Clipper.Orientation=function(l){return s.Clipper.Area(l)>=0},s.Clipper.prototype.PointCount=function(l){if(l===null)return 0;var u=0,p=l;do u++,p=p.Next;while(p!==l);return u},s.Clipper.prototype.BuildResult=function(l){s.Clear(l);for(var u=0,p=this.m_PolyOuts.length;u<p;u++){var g=this.m_PolyOuts[u];if(g.Pts!==null){var C=g.Pts.Prev,b=this.PointCount(C);if(!(b<2)){for(var D=new Array(b),A=0;A<b;A++)D[A]=C.Pt,C=C.Prev;l.push(D)}}}},s.Clipper.prototype.BuildResult2=function(l){l.Clear();for(var u=0,p=this.m_PolyOuts.length;u<p;u++){var g=this.m_PolyOuts[u],C=this.PointCount(g.Pts);if(!(g.IsOpen&&C<2||!g.IsOpen&&C<3)){this.FixHoleLinkage(g);var b=new s.PolyNode;l.m_AllPolys.push(b),g.PolyNode=b,b.m_polygon.length=C;for(var D=g.Pts.Prev,A=0;A<C;A++)b.m_polygon[A]=D.Pt,D=D.Prev}}for(var u=0,p=this.m_PolyOuts.length;u<p;u++){var g=this.m_PolyOuts[u];g.PolyNode!==null&&(g.IsOpen?(g.PolyNode.IsOpen=!0,l.AddChild(g.PolyNode)):g.FirstLeft!==null&&g.FirstLeft.PolyNode!==null?g.FirstLeft.PolyNode.AddChild(g.PolyNode):l.AddChild(g.PolyNode))}},s.Clipper.prototype.FixupOutPolyline=function(l){for(var u=l.Pts,p=u.Prev;u!==p;)if(u=u.Next,s.IntPoint.op_Equality(u.Pt,u.Prev.Pt)){u===p&&(p=u.Prev);var g=u.Prev;g.Next=u.Next,u.Next.Prev=g,u=g}u===u.Prev&&(l.Pts=null)},s.Clipper.prototype.FixupOutPolygon=function(l){var u=null;l.BottomPt=null;for(var p=l.Pts,g=this.PreserveCollinear||this.StrictlySimple;;){if(p.Prev===p||p.Prev===p.Next){l.Pts=null;return}if(s.IntPoint.op_Equality(p.Pt,p.Next.Pt)||s.IntPoint.op_Equality(p.Pt,p.Prev.Pt)||s.ClipperBase.SlopesEqual4(p.Prev.Pt,p.Pt,p.Next.Pt,this.m_UseFullRange)&&(!g||!this.Pt2IsBetweenPt1AndPt3(p.Prev.Pt,p.Pt,p.Next.Pt)))u=null,p.Prev.Next=p.Next,p.Next.Prev=p.Prev,p=p.Prev;else{if(p===u)break;u===null&&(u=p),p=p.Next}}l.Pts=p},s.Clipper.prototype.DupOutPt=function(l,u){var p=new s.OutPt;return p.Pt.X=l.Pt.X,p.Pt.Y=l.Pt.Y,s.use_xyz&&(p.Pt.Z=l.Pt.Z),p.Idx=l.Idx,u?(p.Next=l.Next,p.Prev=l,l.Next.Prev=p,l.Next=p):(p.Prev=l.Prev,p.Next=l,l.Prev.Next=p,l.Prev=p),p},s.Clipper.prototype.GetOverlap=function(l,u,p,g,C){return l<u?p<g?(C.Left=Math.max(l,p),C.Right=Math.min(u,g)):(C.Left=Math.max(l,g),C.Right=Math.min(u,p)):p<g?(C.Left=Math.max(u,p),C.Right=Math.min(l,g)):(C.Left=Math.max(u,g),C.Right=Math.min(l,p)),C.Left<C.Right},s.Clipper.prototype.JoinHorz=function(l,u,p,g,C,b){var D=l.Pt.X>u.Pt.X?s.Direction.dRightToLeft:s.Direction.dLeftToRight,A=p.Pt.X>g.Pt.X?s.Direction.dRightToLeft:s.Direction.dLeftToRight;if(D===A)return!1;if(D===s.Direction.dLeftToRight){for(;l.Next.Pt.X<=C.X&&l.Next.Pt.X>=l.Pt.X&&l.Next.Pt.Y===C.Y;)l=l.Next;b&&l.Pt.X!==C.X&&(l=l.Next),u=this.DupOutPt(l,!b),s.IntPoint.op_Inequality(u.Pt,C)&&(l=u,l.Pt.X=C.X,l.Pt.Y=C.Y,s.use_xyz&&(l.Pt.Z=C.Z),u=this.DupOutPt(l,!b))}else{for(;l.Next.Pt.X>=C.X&&l.Next.Pt.X<=l.Pt.X&&l.Next.Pt.Y===C.Y;)l=l.Next;!b&&l.Pt.X!==C.X&&(l=l.Next),u=this.DupOutPt(l,b),s.IntPoint.op_Inequality(u.Pt,C)&&(l=u,l.Pt.X=C.X,l.Pt.Y=C.Y,s.use_xyz&&(l.Pt.Z=C.Z),u=this.DupOutPt(l,b))}if(A===s.Direction.dLeftToRight){for(;p.Next.Pt.X<=C.X&&p.Next.Pt.X>=p.Pt.X&&p.Next.Pt.Y===C.Y;)p=p.Next;b&&p.Pt.X!==C.X&&(p=p.Next),g=this.DupOutPt(p,!b),s.IntPoint.op_Inequality(g.Pt,C)&&(p=g,p.Pt.X=C.X,p.Pt.Y=C.Y,s.use_xyz&&(p.Pt.Z=C.Z),g=this.DupOutPt(p,!b))}else{for(;p.Next.Pt.X>=C.X&&p.Next.Pt.X<=p.Pt.X&&p.Next.Pt.Y===C.Y;)p=p.Next;!b&&p.Pt.X!==C.X&&(p=p.Next),g=this.DupOutPt(p,b),s.IntPoint.op_Inequality(g.Pt,C)&&(p=g,p.Pt.X=C.X,p.Pt.Y=C.Y,s.use_xyz&&(p.Pt.Z=C.Z),g=this.DupOutPt(p,b))}return D===s.Direction.dLeftToRight===b?(l.Prev=p,p.Next=l,u.Next=g,g.Prev=u):(l.Next=p,p.Prev=l,u.Prev=g,g.Next=u),!0},s.Clipper.prototype.JoinPoints=function(l,u,p){var g=l.OutPt1,C=new s.OutPt,b=l.OutPt2,D=new s.OutPt,A=l.OutPt1.Pt.Y===l.OffPt.Y;if(A&&s.IntPoint.op_Equality(l.OffPt,l.OutPt1.Pt)&&s.IntPoint.op_Equality(l.OffPt,l.OutPt2.Pt)){if(u!==p)return!1;for(C=l.OutPt1.Next;C!==g&&s.IntPoint.op_Equality(C.Pt,l.OffPt);)C=C.Next;var k=C.Pt.Y>l.OffPt.Y;for(D=l.OutPt2.Next;D!==b&&s.IntPoint.op_Equality(D.Pt,l.OffPt);)D=D.Next;var L=D.Pt.Y>l.OffPt.Y;return k===L?!1:k?(C=this.DupOutPt(g,!1),D=this.DupOutPt(b,!0),g.Prev=b,b.Next=g,C.Next=D,D.Prev=C,l.OutPt1=g,l.OutPt2=C,!0):(C=this.DupOutPt(g,!0),D=this.DupOutPt(b,!1),g.Next=b,b.Prev=g,C.Prev=D,D.Next=C,l.OutPt1=g,l.OutPt2=C,!0)}else if(A){for(C=g;g.Prev.Pt.Y===g.Pt.Y&&g.Prev!==C&&g.Prev!==b;)g=g.Prev;for(;C.Next.Pt.Y===C.Pt.Y&&C.Next!==g&&C.Next!==b;)C=C.Next;if(C.Next===g||C.Next===b)return!1;for(D=b;b.Prev.Pt.Y===b.Pt.Y&&b.Prev!==D&&b.Prev!==C;)b=b.Prev;for(;D.Next.Pt.Y===D.Pt.Y&&D.Next!==b&&D.Next!==g;)D=D.Next;if(D.Next===b||D.Next===g)return!1;var W={Left:null,Right:null};if(!this.GetOverlap(g.Pt.X,C.Pt.X,b.Pt.X,D.Pt.X,W))return!1;var M=W.Left,V=W.Right,it=new s.IntPoint0,at;return g.Pt.X>=M&&g.Pt.X<=V?(it.X=g.Pt.X,it.Y=g.Pt.Y,s.use_xyz&&(it.Z=g.Pt.Z),at=g.Pt.X>C.Pt.X):b.Pt.X>=M&&b.Pt.X<=V?(it.X=b.Pt.X,it.Y=b.Pt.Y,s.use_xyz&&(it.Z=b.Pt.Z),at=b.Pt.X>D.Pt.X):C.Pt.X>=M&&C.Pt.X<=V?(it.X=C.Pt.X,it.Y=C.Pt.Y,s.use_xyz&&(it.Z=C.Pt.Z),at=C.Pt.X>g.Pt.X):(it.X=D.Pt.X,it.Y=D.Pt.Y,s.use_xyz&&(it.Z=D.Pt.Z),at=D.Pt.X>b.Pt.X),l.OutPt1=g,l.OutPt2=b,this.JoinHorz(g,C,b,D,it,at)}else{for(C=g.Next;s.IntPoint.op_Equality(C.Pt,g.Pt)&&C!==g;)C=C.Next;var ut=C.Pt.Y>g.Pt.Y||!s.ClipperBase.SlopesEqual4(g.Pt,C.Pt,l.OffPt,this.m_UseFullRange);if(ut){for(C=g.Prev;s.IntPoint.op_Equality(C.Pt,g.Pt)&&C!==g;)C=C.Prev;if(C.Pt.Y>g.Pt.Y||!s.ClipperBase.SlopesEqual4(g.Pt,C.Pt,l.OffPt,this.m_UseFullRange))return!1}for(D=b.Next;s.IntPoint.op_Equality(D.Pt,b.Pt)&&D!==b;)D=D.Next;var vt=D.Pt.Y>b.Pt.Y||!s.ClipperBase.SlopesEqual4(b.Pt,D.Pt,l.OffPt,this.m_UseFullRange);if(vt){for(D=b.Prev;s.IntPoint.op_Equality(D.Pt,b.Pt)&&D!==b;)D=D.Prev;if(D.Pt.Y>b.Pt.Y||!s.ClipperBase.SlopesEqual4(b.Pt,D.Pt,l.OffPt,this.m_UseFullRange))return!1}return C===g||D===b||C===D||u===p&&ut===vt?!1:ut?(C=this.DupOutPt(g,!1),D=this.DupOutPt(b,!0),g.Prev=b,b.Next=g,C.Next=D,D.Prev=C,l.OutPt1=g,l.OutPt2=C,!0):(C=this.DupOutPt(g,!0),D=this.DupOutPt(b,!1),g.Next=b,b.Prev=g,C.Prev=D,D.Next=C,l.OutPt1=g,l.OutPt2=C,!0)}},s.Clipper.GetBounds=function(l){for(var u=0,p=l.length;u<p&&l[u].length===0;)u++;if(u===p)return new s.IntRect(0,0,0,0);var g=new s.IntRect;for(g.left=l[u][0].X,g.right=g.left,g.top=l[u][0].Y,g.bottom=g.top;u<p;u++)for(var C=0,b=l[u].length;C<b;C++)l[u][C].X<g.left?g.left=l[u][C].X:l[u][C].X>g.right&&(g.right=l[u][C].X),l[u][C].Y<g.top?g.top=l[u][C].Y:l[u][C].Y>g.bottom&&(g.bottom=l[u][C].Y);return g},s.Clipper.prototype.GetBounds2=function(l){var u=l,p=new s.IntRect;for(p.left=l.Pt.X,p.right=l.Pt.X,p.top=l.Pt.Y,p.bottom=l.Pt.Y,l=l.Next;l!==u;)l.Pt.X<p.left&&(p.left=l.Pt.X),l.Pt.X>p.right&&(p.right=l.Pt.X),l.Pt.Y<p.top&&(p.top=l.Pt.Y),l.Pt.Y>p.bottom&&(p.bottom=l.Pt.Y),l=l.Next;return p},s.Clipper.PointInPolygon=function(l,u){var p=0,g=u.length;if(g<3)return 0;for(var C=u[0],b=1;b<=g;++b){var D=b===g?u[0]:u[b];if(D.Y===l.Y&&(D.X===l.X||C.Y===l.Y&&D.X>l.X==C.X<l.X))return-1;if(C.Y<l.Y!=D.Y<l.Y){if(C.X>=l.X)if(D.X>l.X)p=1-p;else{var A=(C.X-l.X)*(D.Y-l.Y)-(D.X-l.X)*(C.Y-l.Y);if(A===0)return-1;A>0==D.Y>C.Y&&(p=1-p)}else if(D.X>l.X){var A=(C.X-l.X)*(D.Y-l.Y)-(D.X-l.X)*(C.Y-l.Y);if(A===0)return-1;A>0==D.Y>C.Y&&(p=1-p)}}C=D}return p},s.Clipper.prototype.PointInPolygon=function(l,u){var p=0,g=u,C=l.X,b=l.Y,D=u.Pt.X,A=u.Pt.Y;do{u=u.Next;var k=u.Pt.X,L=u.Pt.Y;if(L===b&&(k===C||A===b&&k>C==D<C))return-1;if(A<b!=L<b){if(D>=C)if(k>C)p=1-p;else{var W=(D-C)*(L-b)-(k-C)*(A-b);if(W===0)return-1;W>0==L>A&&(p=1-p)}else if(k>C){var W=(D-C)*(L-b)-(k-C)*(A-b);if(W===0)return-1;W>0==L>A&&(p=1-p)}}D=k,A=L}while(g!==u);return p},s.Clipper.prototype.Poly2ContainsPoly1=function(l,u){var p=l;do{var g=this.PointInPolygon(p.Pt,u);if(g>=0)return g>0;p=p.Next}while(p!==l);return!0},s.Clipper.prototype.FixupFirstLefts1=function(l,u){for(var p,g,C=0,b=this.m_PolyOuts.length;C<b;C++)p=this.m_PolyOuts[C],g=s.Clipper.ParseFirstLeft(p.FirstLeft),p.Pts!==null&&g===l&&this.Poly2ContainsPoly1(p.Pts,u.Pts)&&(p.FirstLeft=u)},s.Clipper.prototype.FixupFirstLefts2=function(l,u){for(var p=u.FirstLeft,g,C,b=0,D=this.m_PolyOuts.length;b<D;b++)g=this.m_PolyOuts[b],!(g.Pts===null||g===u||g===l)&&(C=s.Clipper.ParseFirstLeft(g.FirstLeft),!(C!==p&&C!==l&&C!==u)&&(this.Poly2ContainsPoly1(g.Pts,l.Pts)?g.FirstLeft=l:this.Poly2ContainsPoly1(g.Pts,u.Pts)?g.FirstLeft=u:(g.FirstLeft===l||g.FirstLeft===u)&&(g.FirstLeft=p)))},s.Clipper.prototype.FixupFirstLefts3=function(l,u){for(var p,g,C=0,b=this.m_PolyOuts.length;C<b;C++)p=this.m_PolyOuts[C],g=s.Clipper.ParseFirstLeft(p.FirstLeft),p.Pts!==null&&g===l&&(p.FirstLeft=u)},s.Clipper.ParseFirstLeft=function(l){for(;l!==null&&l.Pts===null;)l=l.FirstLeft;return l},s.Clipper.prototype.JoinCommonEdges=function(){for(var l=0,u=this.m_Joins.length;l<u;l++){var p=this.m_Joins[l],g=this.GetOutRec(p.OutPt1.Idx),C=this.GetOutRec(p.OutPt2.Idx);if(!(g.Pts===null||C.Pts===null)&&!(g.IsOpen||C.IsOpen)){var b;g===C?b=g:this.OutRec1RightOfOutRec2(g,C)?b=C:this.OutRec1RightOfOutRec2(C,g)?b=g:b=this.GetLowermostRec(g,C),this.JoinPoints(p,g,C)&&(g===C?(g.Pts=p.OutPt1,g.BottomPt=null,C=this.CreateOutRec(),C.Pts=p.OutPt2,this.UpdateOutPtIdxs(C),this.Poly2ContainsPoly1(C.Pts,g.Pts)?(C.IsHole=!g.IsHole,C.FirstLeft=g,this.m_UsingPolyTree&&this.FixupFirstLefts2(C,g),(C.IsHole^this.ReverseSolution)==this.Area$1(C)>0&&this.ReversePolyPtLinks(C.Pts)):this.Poly2ContainsPoly1(g.Pts,C.Pts)?(C.IsHole=g.IsHole,g.IsHole=!C.IsHole,C.FirstLeft=g.FirstLeft,g.FirstLeft=C,this.m_UsingPolyTree&&this.FixupFirstLefts2(g,C),(g.IsHole^this.ReverseSolution)==this.Area$1(g)>0&&this.ReversePolyPtLinks(g.Pts)):(C.IsHole=g.IsHole,C.FirstLeft=g.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(g,C))):(C.Pts=null,C.BottomPt=null,C.Idx=g.Idx,g.IsHole=b.IsHole,b===C&&(g.FirstLeft=C.FirstLeft),C.FirstLeft=g,this.m_UsingPolyTree&&this.FixupFirstLefts3(C,g)))}}},s.Clipper.prototype.UpdateOutPtIdxs=function(l){var u=l.Pts;do u.Idx=l.Idx,u=u.Prev;while(u!==l.Pts)},s.Clipper.prototype.DoSimplePolygons=function(){for(var l=0;l<this.m_PolyOuts.length;){var u=this.m_PolyOuts[l++],p=u.Pts;if(!(p===null||u.IsOpen))do{for(var g=p.Next;g!==u.Pts;){if(s.IntPoint.op_Equality(p.Pt,g.Pt)&&g.Next!==p&&g.Prev!==p){var C=p.Prev,b=g.Prev;p.Prev=b,b.Next=p,g.Prev=C,C.Next=g,u.Pts=p;var D=this.CreateOutRec();D.Pts=g,this.UpdateOutPtIdxs(D),this.Poly2ContainsPoly1(D.Pts,u.Pts)?(D.IsHole=!u.IsHole,D.FirstLeft=u,this.m_UsingPolyTree&&this.FixupFirstLefts2(D,u)):this.Poly2ContainsPoly1(u.Pts,D.Pts)?(D.IsHole=u.IsHole,u.IsHole=!D.IsHole,D.FirstLeft=u.FirstLeft,u.FirstLeft=D,this.m_UsingPolyTree&&this.FixupFirstLefts2(u,D)):(D.IsHole=u.IsHole,D.FirstLeft=u.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(u,D)),g=p}g=g.Next}p=p.Next}while(p!==u.Pts)}},s.Clipper.Area=function(l){if(!Array.isArray(l))return 0;var u=l.length;if(u<3)return 0;for(var p=0,g=0,C=u-1;g<u;++g)p+=(l[C].X+l[g].X)*(l[C].Y-l[g].Y),C=g;return-p*.5},s.Clipper.prototype.Area=function(l){var u=l;if(l===null)return 0;var p=0;do p=p+(l.Prev.Pt.X+l.Pt.X)*(l.Prev.Pt.Y-l.Pt.Y),l=l.Next;while(l!==u);return p*.5},s.Clipper.prototype.Area$1=function(l){return this.Area(l.Pts)},s.Clipper.SimplifyPolygon=function(l,u){var p=new Array,g=new s.Clipper(0);return g.StrictlySimple=!0,g.AddPath(l,s.PolyType.ptSubject,!0),g.Execute(s.ClipType.ctUnion,p,u,u),p},s.Clipper.SimplifyPolygons=function(l,u){typeof u>"u"&&(u=s.PolyFillType.pftEvenOdd);var p=new Array,g=new s.Clipper(0);return g.StrictlySimple=!0,g.AddPaths(l,s.PolyType.ptSubject,!0),g.Execute(s.ClipType.ctUnion,p,u,u),p},s.Clipper.DistanceSqrd=function(l,u){var p=l.X-u.X,g=l.Y-u.Y;return p*p+g*g},s.Clipper.DistanceFromLineSqrd=function(l,u,p){var g=u.Y-p.Y,C=p.X-u.X,b=g*u.X+C*u.Y;return b=g*l.X+C*l.Y-b,b*b/(g*g+C*C)},s.Clipper.SlopesNearCollinear=function(l,u,p,g){return Math.abs(l.X-u.X)>Math.abs(l.Y-u.Y)?l.X>u.X==l.X<p.X?s.Clipper.DistanceFromLineSqrd(l,u,p)<g:u.X>l.X==u.X<p.X?s.Clipper.DistanceFromLineSqrd(u,l,p)<g:s.Clipper.DistanceFromLineSqrd(p,l,u)<g:l.Y>u.Y==l.Y<p.Y?s.Clipper.DistanceFromLineSqrd(l,u,p)<g:u.Y>l.Y==u.Y<p.Y?s.Clipper.DistanceFromLineSqrd(u,l,p)<g:s.Clipper.DistanceFromLineSqrd(p,l,u)<g},s.Clipper.PointsAreClose=function(l,u,p){var g=l.X-u.X,C=l.Y-u.Y;return g*g+C*C<=p},s.Clipper.ExcludeOp=function(l){var u=l.Prev;return u.Next=l.Next,l.Next.Prev=u,u.Idx=0,u},s.Clipper.CleanPolygon=function(l,u){typeof u>"u"&&(u=1.415);var p=l.length;if(p===0)return new Array;for(var g=new Array(p),C=0;C<p;++C)g[C]=new s.OutPt;for(var C=0;C<p;++C)g[C].Pt=l[C],g[C].Next=g[(C+1)%p],g[C].Next.Prev=g[C],g[C].Idx=0;for(var b=u*u,D=g[0];D.Idx===0&&D.Next!==D.Prev;)s.Clipper.PointsAreClose(D.Pt,D.Prev.Pt,b)?(D=s.Clipper.ExcludeOp(D),p--):s.Clipper.PointsAreClose(D.Prev.Pt,D.Next.Pt,b)?(s.Clipper.ExcludeOp(D.Next),D=s.Clipper.ExcludeOp(D),p-=2):s.Clipper.SlopesNearCollinear(D.Prev.Pt,D.Pt,D.Next.Pt,b)?(D=s.Clipper.ExcludeOp(D),p--):(D.Idx=1,D=D.Next);p<3&&(p=0);for(var A=new Array(p),C=0;C<p;++C)A[C]=new s.IntPoint1(D.Pt),D=D.Next;return g=null,A},s.Clipper.CleanPolygons=function(l,u){for(var p=new Array(l.length),g=0,C=l.length;g<C;g++)p[g]=s.Clipper.CleanPolygon(l[g],u);return p},s.Clipper.Minkowski=function(l,u,p,g){var C=g?1:0,b=l.length,D=u.length,A=new Array;if(p)for(var k=0;k<D;k++){for(var L=new Array(b),W=0,M=l.length,V=l[W];W<M;W++,V=l[W])L[W]=new s.IntPoint2(u[k].X+V.X,u[k].Y+V.Y);A.push(L)}else for(var k=0;k<D;k++){for(var L=new Array(b),W=0,M=l.length,V=l[W];W<M;W++,V=l[W])L[W]=new s.IntPoint2(u[k].X-V.X,u[k].Y-V.Y);A.push(L)}for(var it=new Array,k=0;k<D-1+C;k++)for(var W=0;W<b;W++){var at=new Array;at.push(A[k%D][W%b]),at.push(A[(k+1)%D][W%b]),at.push(A[(k+1)%D][(W+1)%b]),at.push(A[k%D][(W+1)%b]),s.Clipper.Orientation(at)||at.reverse(),it.push(at)}return it},s.Clipper.MinkowskiSum=function(l,u,p){if(u[0]instanceof Array){for(var g=u,C=new s.Paths,b=new s.Clipper,D=0;D<g.length;++D){var A=s.Clipper.Minkowski(l,g[D],!0,p);if(b.AddPaths(A,s.PolyType.ptSubject,!0),p){var k=s.Clipper.TranslatePath(g[D],l[0]);b.AddPath(k,s.PolyType.ptClip,!0)}}return b.Execute(s.ClipType.ctUnion,C,s.PolyFillType.pftNonZero,s.PolyFillType.pftNonZero),C}else{var k=u,g=s.Clipper.Minkowski(l,k,!0,p),b=new s.Clipper;return b.AddPaths(g,s.PolyType.ptSubject,!0),b.Execute(s.ClipType.ctUnion,g,s.PolyFillType.pftNonZero,s.PolyFillType.pftNonZero),g}},s.Clipper.TranslatePath=function(l,u){for(var p=new s.Path,g=0;g<l.length;g++)p.push(new s.IntPoint2(l[g].X+u.X,l[g].Y+u.Y));return p},s.Clipper.MinkowskiDiff=function(l,u){var p=s.Clipper.Minkowski(l,u,!1,!0),g=new s.Clipper;return g.AddPaths(p,s.PolyType.ptSubject,!0),g.Execute(s.ClipType.ctUnion,p,s.PolyFillType.pftNonZero,s.PolyFillType.pftNonZero),p},s.Clipper.PolyTreeToPaths=function(l){var u=new Array;return s.Clipper.AddPolyNodeToPaths(l,s.Clipper.NodeType.ntAny,u),u},s.Clipper.AddPolyNodeToPaths=function(l,u,p){var g=!0;switch(u){case s.Clipper.NodeType.ntOpen:return;case s.Clipper.NodeType.ntClosed:g=!l.IsOpen;break}l.m_polygon.length>0&&g&&p.push(l.m_polygon);for(var C=0,b=l.Childs(),D=b.length,A=b[C];C<D;C++,A=b[C])s.Clipper.AddPolyNodeToPaths(A,u,p)},s.Clipper.OpenPathsFromPolyTree=function(l){for(var u=new s.Paths,p=0,g=l.ChildCount();p<g;p++)l.Childs()[p].IsOpen&&u.push(l.Childs()[p].m_polygon);return u},s.Clipper.ClosedPathsFromPolyTree=function(l){var u=new s.Paths;return s.Clipper.AddPolyNodeToPaths(l,s.Clipper.NodeType.ntClosed,u),u},ff(s.Clipper,s.ClipperBase),s.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},s.ClipperOffset=function(l,u){typeof l>"u"&&(l=2),typeof u>"u"&&(u=s.ClipperOffset.def_arc_tolerance),this.m_destPolys=new s.Paths,this.m_srcPoly=new s.Path,this.m_destPoly=new s.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new s.IntPoint0,this.m_polyNodes=new s.PolyNode,this.MiterLimit=l,this.ArcTolerance=u,this.m_lowest.X=-1},s.ClipperOffset.two_pi=6.28318530717959,s.ClipperOffset.def_arc_tolerance=.25,s.ClipperOffset.prototype.Clear=function(){s.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},s.ClipperOffset.Round=s.Clipper.Round,s.ClipperOffset.prototype.AddPath=function(l,u,p){var g=l.length-1;if(!(g<0)){var C=new s.PolyNode;if(C.m_jointype=u,C.m_endtype=p,p===s.EndType.etClosedLine||p===s.EndType.etClosedPolygon)for(;g>0&&s.IntPoint.op_Equality(l[0],l[g]);)g--;C.m_polygon.push(l[0]);for(var b=0,D=0,A=1;A<=g;A++)s.IntPoint.op_Inequality(C.m_polygon[b],l[A])&&(b++,C.m_polygon.push(l[A]),(l[A].Y>C.m_polygon[D].Y||l[A].Y===C.m_polygon[D].Y&&l[A].X<C.m_polygon[D].X)&&(D=b));if(!(p===s.EndType.etClosedPolygon&&b<2)&&(this.m_polyNodes.AddChild(C),p===s.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new s.IntPoint2(this.m_polyNodes.ChildCount()-1,D);else{var k=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(C.m_polygon[D].Y>k.Y||C.m_polygon[D].Y===k.Y&&C.m_polygon[D].X<k.X)&&(this.m_lowest=new s.IntPoint2(this.m_polyNodes.ChildCount()-1,D))}}},s.ClipperOffset.prototype.AddPaths=function(l,u,p){for(var g=0,C=l.length;g<C;g++)this.AddPath(l[g],u,p)},s.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!s.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var l=0;l<this.m_polyNodes.ChildCount();l++){var u=this.m_polyNodes.Childs()[l];(u.m_endtype===s.EndType.etClosedPolygon||u.m_endtype===s.EndType.etClosedLine&&s.Clipper.Orientation(u.m_polygon))&&u.m_polygon.reverse()}else for(var l=0;l<this.m_polyNodes.ChildCount();l++){var u=this.m_polyNodes.Childs()[l];u.m_endtype===s.EndType.etClosedLine&&!s.Clipper.Orientation(u.m_polygon)&&u.m_polygon.reverse()}},s.ClipperOffset.GetUnitNormal=function(l,u){var p=u.X-l.X,g=u.Y-l.Y;if(p===0&&g===0)return new s.DoublePoint2(0,0);var C=1/Math.sqrt(p*p+g*g);return p*=C,g*=C,new s.DoublePoint2(g,-p)},s.ClipperOffset.prototype.DoOffset=function(l){if(this.m_destPolys=new Array,this.m_delta=l,s.ClipperBase.near_zero(l)){for(var u=0;u<this.m_polyNodes.ChildCount();u++){var p=this.m_polyNodes.Childs()[u];p.m_endtype===s.EndType.etClosedPolygon&&this.m_destPolys.push(p.m_polygon)}return}this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5;var g;this.ArcTolerance<=0?g=s.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(l)*s.ClipperOffset.def_arc_tolerance?g=Math.abs(l)*s.ClipperOffset.def_arc_tolerance:g=this.ArcTolerance;var C=3.14159265358979/Math.acos(1-g/Math.abs(l));this.m_sin=Math.sin(s.ClipperOffset.two_pi/C),this.m_cos=Math.cos(s.ClipperOffset.two_pi/C),this.m_StepsPerRad=C/s.ClipperOffset.two_pi,l<0&&(this.m_sin=-this.m_sin);for(var u=0;u<this.m_polyNodes.ChildCount();u++){var p=this.m_polyNodes.Childs()[u];this.m_srcPoly=p.m_polygon;var b=this.m_srcPoly.length;if(!(b===0||l<=0&&(b<3||p.m_endtype!==s.EndType.etClosedPolygon))){if(this.m_destPoly=new Array,b===1){if(p.m_jointype===s.JoinType.jtRound)for(var D=1,A=0,k=1;k<=C;k++){this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[0].X+D*l),s.ClipperOffset.Round(this.m_srcPoly[0].Y+A*l)));var L=D;D=D*this.m_cos-this.m_sin*A,A=L*this.m_sin+A*this.m_cos}else for(var D=-1,A=-1,k=0;k<4;++k)this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[0].X+D*l),s.ClipperOffset.Round(this.m_srcPoly[0].Y+A*l))),D<0?D=1:A<0?A=1:D=-1;this.m_destPolys.push(this.m_destPoly);continue}this.m_normals.length=0;for(var k=0;k<b-1;k++)this.m_normals.push(s.ClipperOffset.GetUnitNormal(this.m_srcPoly[k],this.m_srcPoly[k+1]));if(p.m_endtype===s.EndType.etClosedLine||p.m_endtype===s.EndType.etClosedPolygon?this.m_normals.push(s.ClipperOffset.GetUnitNormal(this.m_srcPoly[b-1],this.m_srcPoly[0])):this.m_normals.push(new s.DoublePoint1(this.m_normals[b-2])),p.m_endtype===s.EndType.etClosedPolygon){for(var W=b-1,k=0;k<b;k++)W=this.OffsetPoint(k,W,p.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(p.m_endtype===s.EndType.etClosedLine){for(var W=b-1,k=0;k<b;k++)W=this.OffsetPoint(k,W,p.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;for(var M=this.m_normals[b-1],k=b-1;k>0;k--)this.m_normals[k]=new s.DoublePoint2(-this.m_normals[k-1].X,-this.m_normals[k-1].Y);this.m_normals[0]=new s.DoublePoint2(-M.X,-M.Y),W=0;for(var k=b-1;k>=0;k--)W=this.OffsetPoint(k,W,p.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{for(var W=0,k=1;k<b-1;++k)W=this.OffsetPoint(k,W,p.m_jointype);var V;if(p.m_endtype===s.EndType.etOpenButt){var k=b-1;V=new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[k].X+this.m_normals[k].X*l),s.ClipperOffset.Round(this.m_srcPoly[k].Y+this.m_normals[k].Y*l)),this.m_destPoly.push(V),V=new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[k].X-this.m_normals[k].X*l),s.ClipperOffset.Round(this.m_srcPoly[k].Y-this.m_normals[k].Y*l)),this.m_destPoly.push(V)}else{var k=b-1;W=b-2,this.m_sinA=0,this.m_normals[k]=new s.DoublePoint2(-this.m_normals[k].X,-this.m_normals[k].Y),p.m_endtype===s.EndType.etOpenSquare?this.DoSquare(k,W):this.DoRound(k,W)}for(var k=b-1;k>0;k--)this.m_normals[k]=new s.DoublePoint2(-this.m_normals[k-1].X,-this.m_normals[k-1].Y);this.m_normals[0]=new s.DoublePoint2(-this.m_normals[1].X,-this.m_normals[1].Y),W=b-1;for(var k=W-1;k>0;--k)W=this.OffsetPoint(k,W,p.m_jointype);p.m_endtype===s.EndType.etOpenButt?(V=new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*l),s.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*l)),this.m_destPoly.push(V),V=new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*l),s.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*l)),this.m_destPoly.push(V)):(W=1,this.m_sinA=0,p.m_endtype===s.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}}},s.ClipperOffset.prototype.Execute=function(){var l=arguments,u=l[0]instanceof s.PolyTree;if(u){var p=l[0],g=l[1];p.Clear(),this.FixOrientations(),this.DoOffset(g);var C=new s.Clipper(0);if(C.AddPaths(this.m_destPolys,s.PolyType.ptSubject,!0),g>0)C.Execute(s.ClipType.ctUnion,p,s.PolyFillType.pftPositive,s.PolyFillType.pftPositive);else{var b=s.Clipper.GetBounds(this.m_destPolys),D=new s.Path;if(D.push(new s.IntPoint2(b.left-10,b.bottom+10)),D.push(new s.IntPoint2(b.right+10,b.bottom+10)),D.push(new s.IntPoint2(b.right+10,b.top-10)),D.push(new s.IntPoint2(b.left-10,b.top-10)),C.AddPath(D,s.PolyType.ptSubject,!0),C.ReverseSolution=!0,C.Execute(s.ClipType.ctUnion,p,s.PolyFillType.pftNegative,s.PolyFillType.pftNegative),p.ChildCount()===1&&p.Childs()[0].ChildCount()>0){var A=p.Childs()[0];p.Childs()[0]=A.Childs()[0],p.Childs()[0].m_Parent=p;for(var k=1;k<A.ChildCount();k++)p.AddChild(A.Childs()[k])}else p.Clear()}}else{var p=l[0],g=l[1];s.Clear(p),this.FixOrientations(),this.DoOffset(g);var C=new s.Clipper(0);if(C.AddPaths(this.m_destPolys,s.PolyType.ptSubject,!0),g>0)C.Execute(s.ClipType.ctUnion,p,s.PolyFillType.pftPositive,s.PolyFillType.pftPositive);else{var b=s.Clipper.GetBounds(this.m_destPolys),D=new s.Path;D.push(new s.IntPoint2(b.left-10,b.bottom+10)),D.push(new s.IntPoint2(b.right+10,b.bottom+10)),D.push(new s.IntPoint2(b.right+10,b.top-10)),D.push(new s.IntPoint2(b.left-10,b.top-10)),C.AddPath(D,s.PolyType.ptSubject,!0),C.ReverseSolution=!0,C.Execute(s.ClipType.ctUnion,p,s.PolyFillType.pftNegative,s.PolyFillType.pftNegative),p.length>0&&p.splice(0,1)}}},s.ClipperOffset.prototype.OffsetPoint=function(l,u,p){if(this.m_sinA=this.m_normals[u].X*this.m_normals[l].Y-this.m_normals[l].X*this.m_normals[u].Y,Math.abs(this.m_sinA*this.m_delta)<1){var g=this.m_normals[u].X*this.m_normals[l].X+this.m_normals[l].Y*this.m_normals[u].Y;if(g>0)return this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[l].X+this.m_normals[u].X*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[l].Y+this.m_normals[u].Y*this.m_delta))),u}else this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1);if(this.m_sinA*this.m_delta<0)this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[l].X+this.m_normals[u].X*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[l].Y+this.m_normals[u].Y*this.m_delta))),this.m_destPoly.push(new s.IntPoint1(this.m_srcPoly[l])),this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[l].X+this.m_normals[l].X*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[l].Y+this.m_normals[l].Y*this.m_delta)));else switch(p){case s.JoinType.jtMiter:{var C=1+(this.m_normals[l].X*this.m_normals[u].X+this.m_normals[l].Y*this.m_normals[u].Y);C>=this.m_miterLim?this.DoMiter(l,u,C):this.DoSquare(l,u);break}case s.JoinType.jtSquare:this.DoSquare(l,u);break;case s.JoinType.jtRound:this.DoRound(l,u);break}return u=l,u},s.ClipperOffset.prototype.DoSquare=function(l,u){var p=Math.tan(Math.atan2(this.m_sinA,this.m_normals[u].X*this.m_normals[l].X+this.m_normals[u].Y*this.m_normals[l].Y)/4);this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[l].X+this.m_delta*(this.m_normals[u].X-this.m_normals[u].Y*p)),s.ClipperOffset.Round(this.m_srcPoly[l].Y+this.m_delta*(this.m_normals[u].Y+this.m_normals[u].X*p)))),this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[l].X+this.m_delta*(this.m_normals[l].X+this.m_normals[l].Y*p)),s.ClipperOffset.Round(this.m_srcPoly[l].Y+this.m_delta*(this.m_normals[l].Y-this.m_normals[l].X*p))))},s.ClipperOffset.prototype.DoMiter=function(l,u,p){var g=this.m_delta/p;this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[l].X+(this.m_normals[u].X+this.m_normals[l].X)*g),s.ClipperOffset.Round(this.m_srcPoly[l].Y+(this.m_normals[u].Y+this.m_normals[l].Y)*g)))},s.ClipperOffset.prototype.DoRound=function(l,u){for(var p=Math.atan2(this.m_sinA,this.m_normals[u].X*this.m_normals[l].X+this.m_normals[u].Y*this.m_normals[l].Y),g=Math.max(s.Cast_Int32(s.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(p))),1),C=this.m_normals[u].X,b=this.m_normals[u].Y,D,A=0;A<g;++A)this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[l].X+C*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[l].Y+b*this.m_delta))),D=C,C=C*this.m_cos-this.m_sin*b,b=D*this.m_sin+b*this.m_cos;this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[l].X+this.m_normals[l].X*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[l].Y+this.m_normals[l].Y*this.m_delta)))},s.Error=function(l){try{throw new Error(l)}catch(u){alert(u.message)}},s.JS={},s.JS.AreaOfPolygon=function(l,u){return u||(u=1),s.Clipper.Area(l)/(u*u)},s.JS.AreaOfPolygons=function(l,u){u||(u=1);for(var p=0,g=0;g<l.length;g++)p+=s.Clipper.Area(l[g]);return p/(u*u)},s.JS.BoundsOfPath=function(l,u){return s.JS.BoundsOfPaths([l],u)},s.JS.BoundsOfPaths=function(l,u){u||(u=1);var p=s.Clipper.GetBounds(l);return p.left/=u,p.bottom/=u,p.right/=u,p.top/=u,p},s.JS.Clean=function(g,u){if(!(g instanceof Array))return[];var p=g[0]instanceof Array,g=s.JS.Clone(g);if(typeof u!="number"||u===null)return s.Error("Delta is not a number in Clean()."),g;if(g.length===0||g.length===1&&g[0].length===0||u<0)return g;p||(g=[g]);for(var C=g.length,b,D,A,k,L,W,M,V=[],it=0;it<C;it++)if(D=g[it],b=D.length,b!==0){if(b<3){A=D,V.push(A);continue}for(A=D,k=u*u,L=D[0],W=1,M=1;M<b;M++)(D[M].X-L.X)*(D[M].X-L.X)+(D[M].Y-L.Y)*(D[M].Y-L.Y)<=k||(A[W]=D[M],L=D[M],W++);L=D[W-1],(D[0].X-L.X)*(D[0].X-L.X)+(D[0].Y-L.Y)*(D[0].Y-L.Y)<=k&&W--,W<b&&A.splice(W,b-W),A.length&&V.push(A)}return!p&&V.length?V=V[0]:!p&&V.length===0?V=[]:p&&V.length===0&&(V=[[]]),V},s.JS.Clone=function(l){if(!(l instanceof Array))return[];if(l.length===0)return[];if(l.length===1&&l[0].length===0)return[[]];var u=l[0]instanceof Array;u||(l=[l]);var p=l.length,g,C,b,D,A=new Array(p);for(C=0;C<p;C++){for(g=l[C].length,D=new Array(g),b=0;b<g;b++)D[b]={X:l[C][b].X,Y:l[C][b].Y};A[C]=D}return u||(A=A[0]),A},s.JS.Lighten=function(l,u){if(!(l instanceof Array))return[];if(typeof u!="number"||u===null)return s.Error("Tolerance is not a number in Lighten()."),s.JS.Clone(l);if(l.length===0||l.length===1&&l[0].length===0||u<0)return s.JS.Clone(l);var p=l[0]instanceof Array;p||(l=[l]);var g,C,b,D,A,k,L,W,M,V,it,at,ut,vt,xe,si,xr,oS=l.length,lS=u*u,vr=[];for(g=0;g<oS;g++)if(b=l[g],k=b.length,k!==0){for(D=0;D<1e6;D++){for(A=[],k=b.length,b[k-1].X!==b[0].X||b[k-1].Y!==b[0].Y?(at=1,b.push({X:b[0].X,Y:b[0].Y}),k=b.length):at=0,it=[],C=0;C<k-2;C++)L=b[C],M=b[C+1],W=b[C+2],si=L.X,xr=L.Y,ut=W.X-si,vt=W.Y-xr,(ut!==0||vt!==0)&&(xe=((M.X-si)*ut+(M.Y-xr)*vt)/(ut*ut+vt*vt),xe>1?(si=W.X,xr=W.Y):xe>0&&(si+=ut*xe,xr+=vt*xe)),ut=M.X-si,vt=M.Y-xr,V=ut*ut+vt*vt,V<=lS&&(it[C+1]=1,C++);for(A.push({X:b[0].X,Y:b[0].Y}),C=1;C<k-1;C++)it[C]||A.push({X:b[C].X,Y:b[C].Y});if(A.push({X:b[k-1].X,Y:b[k-1].Y}),at&&b.pop(),it.length)b=A;else break}k=A.length,A[k-1].X===A[0].X&&A[k-1].Y===A[0].Y&&A.pop(),A.length>2&&vr.push(A)}return p||(vr=vr[0]),typeof vr>"u"&&(vr=[]),vr},s.JS.PerimeterOfPath=function(l,u,p){if(typeof l>"u")return 0;var g=Math.sqrt,C=0,b,D,A=0,k=0,L=0,W=0,M=l.length;if(M<2)return 0;for(u&&(l[M]=l[0],M++);--M;)b=l[M],A=b.X,k=b.Y,D=l[M-1],L=D.X,W=D.Y,C+=g((A-L)*(A-L)+(k-W)*(k-W));return u&&l.pop(),C/p},s.JS.PerimeterOfPaths=function(l,u,p){p||(p=1);for(var g=0,C=0;C<l.length;C++)g+=s.JS.PerimeterOfPath(l[C],u,p);return g},s.JS.ScaleDownPath=function(l,u){var p,g;for(u||(u=1),p=l.length;p--;)g=l[p],g.X=g.X/u,g.Y=g.Y/u},s.JS.ScaleDownPaths=function(l,u){var p,g,C;for(u||(u=1),p=l.length;p--;)for(g=l[p].length;g--;)C=l[p][g],C.X=C.X/u,C.Y=C.Y/u},s.JS.ScaleUpPath=function(l,u){var p,g,C=Math.round;for(u||(u=1),p=l.length;p--;)g=l[p],g.X=C(g.X*u),g.Y=C(g.Y*u)},s.JS.ScaleUpPaths=function(l,u){var p,g,C,b=Math.round;for(u||(u=1),p=l.length;p--;)for(g=l[p].length;g--;)C=l[p][g],C.X=b(C.X*u),C.Y=b(C.Y*u)},s.ExPolygons=function(){return[]},s.ExPolygon=function(){this.outer=null,this.holes=null},s.JS.AddOuterPolyNodeToExPolygons=function(l,u){var p=new s.ExPolygon;p.outer=l.Contour();var g=l.Childs(),C=g.length;p.holes=new Array(C);var b,D,A,k,L,W;for(A=0;A<C;A++)for(b=g[A],p.holes[A]=b.Contour(),k=0,L=b.Childs(),W=L.length;k<W;k++)D=L[k],s.JS.AddOuterPolyNodeToExPolygons(D,u);u.push(p)},s.JS.ExPolygonsToPaths=function(l){var u,p,g,C,b=new s.Paths;for(u=0,g=l.length;u<g;u++)for(b.push(l[u].outer),p=0,C=l[u].holes.length;p<C;p++)b.push(l[u].holes[p]);return b},s.JS.PolyTreeToExPolygons=function(l){var u=new s.ExPolygons,p,g,C,b;for(g=0,C=l.Childs(),b=C.length;g<b;g++)p=C[g],s.JS.AddOuterPolyNodeToExPolygons(p,u);return u}})()}),e("default",i),e("__esModule",!0)}}}),dn.register("-/clipper-js@v1.0.2-Mou0diNPTgyilhisGDlW/dist=es2020/clipper-js",["-/clipper-lib@v6.4.2-JisZmmhC7gDAFmHQLYDu/dist=es2020/clipper-lib"],function(e,t){var i,r,n;t&&t.id;function o(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}function s(h,c,d){return d={path:c,exports:{},require:function(f,m){return a(f,m==null?d.path:m)}},h(d,d.exports),d.exports}function a(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}return{setters:[function(h){i=h}],execute:function(){r=s(function(h,c){Object.defineProperty(c,"__esModule",{value:!0}),c.setErrorCallback=void 0;var d=function(){function B(Q,R){for(var U=0;U<R.length;U++){var K=R[U];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(Q,K.key,K)}}return function(Q,R,U){return R&&B(Q.prototype,R),U&&B(Q,U),Q}}(),f=m(i.default);function m(B){return B&&B.__esModule?B:{default:B}}function v(B){if(Array.isArray(B)){for(var Q=0,R=Array(B.length);Q<B.length;Q++)R[Q]=B[Q];return R}else return Array.from(B)}function S(B,Q){if(!(B instanceof Q))throw new TypeError("Cannot call a class as a function")}var O=void 0;c.setErrorCallback=function(B){O=B},f.default.Error=function(B){O&&O(B)};var y=new f.default.Clipper,P=new f.default.ClipperOffset,w=function(){function B(){var Q=arguments.length<=0||arguments[0]===void 0?[]:arguments[0],R=arguments.length<=1||arguments[1]===void 0?!0:arguments[1],U=arguments.length<=2||arguments[2]===void 0?!1:arguments[2],K=arguments.length<=3||arguments[3]===void 0?!1:arguments[3],ot=arguments.length<=4||arguments[4]===void 0?!1:arguments[4];S(this,B),this.paths=Q,U&&(this.paths=this.paths.map(_)),K&&(this.paths=this.paths.map(F)),ot&&(this.paths=this.paths.map(j)),this.closed=R}return d(B,[{key:"_clip",value:function(Q,R){var U=new f.default.PolyTree;y.Clear(),y.AddPaths(this.paths,f.default.PolyType.ptSubject,this.closed),y.AddPaths(Q.paths,f.default.PolyType.ptClip,Q.closed),y.Execute(R,U);var K=f.default.Clipper.PolyTreeToPaths(U);return new B(K,this.closed)}},{key:"union",value:function(Q){return this._clip(Q,f.default.ClipType.ctUnion)}},{key:"difference",value:function(Q){return this._clip(Q,f.default.ClipType.ctDifference)}},{key:"intersect",value:function(Q){return this._clip(Q,f.default.ClipType.ctIntersection)}},{key:"xor",value:function(Q){return this._clip(Q,f.default.ClipType.ctXor)}},{key:"offset",value:function(Q){var R=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],U=R.jointType,K=U===void 0?"jtSquare":U,ot=R.endType,ht=ot===void 0?"etClosedPolygon":ot,dt=R.miterLimit,gt=dt===void 0?2:dt,ft=R.roundPrecision,Et=ft===void 0?.25:ft;P.Clear(),P.ArcTolerance=Et,P.MiterLimit=gt;var Dt=new f.default.Paths;return P.AddPaths(this.paths,f.default.JoinType[K],f.default.EndType[ht]),P.Execute(Dt,Q),new B(Dt,!0)}},{key:"scaleUp",value:function(Q){return f.default.JS.ScaleUpPaths(this.paths,Q),this}},{key:"scaleDown",value:function(Q){return f.default.JS.ScaleDownPaths(this.paths,Q),this}},{key:"firstPoint",value:function(){var Q=arguments.length<=0||arguments[0]===void 0?!1:arguments[0];if(this.paths.length!==0){var R=this.paths[0],U=R[0];return Q?T(U):U}}},{key:"lastPoint",value:function(){var Q=arguments.length<=0||arguments[0]===void 0?!1:arguments[0];if(this.paths.length!==0){var R=this.paths[this.paths.length-1],U=this.closed?R[0]:R[R.length-1];return Q?T(U):U}}},{key:"areas",value:function(){var Q=this,R=this.paths.map(function(U,K){return Q.area(K)});return R}},{key:"area",value:function(Q){var R=this.paths[Q],U=f.default.Clipper.Area(R);return U}},{key:"totalArea",value:function(){return this.areas().reduce(function(Q,R){return Q+R},0)}},{key:"perimeter",value:function(Q){var R=this.paths[Q],U=f.default.JS.PerimeterOfPath(R,this.closed,1);return U}},{key:"perimeters",value:function(){var Q=this;return this.paths.map(function(R){return f.default.JS.PerimeterOfPath(R,Q.closed,1)})}},{key:"totalPerimeter",value:function(){var Q=f.default.JS.PerimeterOfPaths(this.paths,this.closed);return Q}},{key:"reverse",value:function(){return f.default.Clipper.ReversePaths(this.paths),this}},{key:"thresholdArea",value:function(Q){for(var R=[].concat(v(this.paths)),U=0;U<R.length;U++){var K=R[U],ot=Math.abs(f.default.Clipper.Area(shape));if(ot<Q){var ht=this.paths.indexOf(K);this.splice(ht,1)}}}},{key:"join",value:function(Q){var R;return(R=this.paths).splice.apply(R,[this.paths.length,0].concat(v(Q.paths))),this}},{key:"clone",value:function(){return new B(f.default.JS.Clone(this.paths),this.closed)}},{key:"shapeBounds",value:function(){var Q=f.default.JS.BoundsOfPaths(this.paths);return Q.width=Q.right-Q.left,Q.height=Q.bottom-Q.top,Q.size=Q.width*Q.height,Q}},{key:"pathBounds",value:function(Q){var R=this.paths[Q],U=f.default.JS.BoundsOfPath(R);return U.width=U.right-U.left,U.height=U.bottom-U.top,U.size=U.width*U.height,U}},{key:"clean",value:function(Q){return new B(f.default.Clipper.CleanPolygons(this.paths,Q),this.closed)}},{key:"orientation",value:function(Q){var R=this.paths[Q];return f.default.Clipper.Orientation(R)}},{key:"pointInShape",value:function(Q){var R=arguments.length<=1||arguments[1]===void 0?!1:arguments[1],U=arguments.length<=2||arguments[2]===void 0?!1:arguments[2];R&&(Q=I(Q)),U&&(Q=q(Q));for(var K=0;K<this.paths.length;K++){var ot=this.pointInPath(K,Q),ht=this.orientation(K);if(!ot&&ht||ot&&!ht)return!1}return!0}},{key:"pointInPath",value:function(Q,R){var U=arguments.length<=2||arguments[2]===void 0?!1:arguments[2],K=arguments.length<=3||arguments[3]===void 0?!1:arguments[3];U&&(R=I(R)),K&&(R=q(R));var ot=this.paths[Q],ht={X:Math.round(R.X),Y:Math.round(R.Y)};return f.default.Clipper.PointInPolygon(ht,ot)>0}},{key:"fixOrientation",value:function(){return this.closed?(this.totalArea()<0&&this.reverse(),this):this}},{key:"removeOverlap",value:function(){console.warn("Shape.removeOverlap is being depricated, use Shape.simplify('pftNonZero') instead"),this.simplify("pftNonZero")}},{key:"simplify",value:function(Q){if(this.closed){var R=f.default.Clipper.SimplifyPolygons(this.paths,f.default.PolyFillType[Q]);return new B(R,!0)}else return this}},{key:"seperateShapes",value:function(){var Q=this,R=[];if(this.closed)(function(){for(var ft=new WeakMap,Et=[],Dt=[],_t=0;_t<Q.paths.length;_t++){var oe=Q.paths[_t],qt=Q.orientation(_t);if(qt){var ye=Q.area(_t);ft.set(oe,ye),Et.push(oe)}else Dt.push(oe)}Et.sort(function(qi,gn){return ft.get(qi)-ft.get(gn)});var Xe=!0,te=!1,Ut=void 0;try{for(var $e=Et[Symbol.iterator](),ee;!(Xe=(ee=$e.next()).done);Xe=!0){for(var Ne=ee.value,Ee=[Ne],ri=Q.paths.indexOf(Ne),$t=[].concat(Dt),ce=0;ce<$t.length;ce++){var Fe=$t[ce],ni=Q.pointInPath(ri,Fe[0]);if(ni){Ee.push(Fe);var On=Dt.indexOf(Fe);Dt.splice(On,1)}}R.push(new B(Ee,!0))}}catch(qi){te=!0,Ut=qi}finally{try{!Xe&&$e.return&&$e.return()}finally{if(te)throw Ut}}})();else{var U=!0,K=!1,ot=void 0;try{for(var ht=this.paths[Symbol.iterator](),dt;!(U=(dt=ht.next()).done);U=!0){var gt=dt.value;R.push(new B([gt],!1))}}catch(ft){K=!0,ot=ft}finally{try{!U&&ht.return&&ht.return()}finally{if(K)throw ot}}}return R}},{key:"round",value:function(){return new B(this.paths.map(F),this.closed)}},{key:"removeDuplicates",value:function(){return new B(this.paths.map(j),this.closed)}},{key:"mapToLower",value:function(){return this.paths.map(E)}}]),B}();c.default=w;function E(B){return B.map(T)}function T(B){var Q=B.X,R=B.Y;return{x:Q,y:R}}function _(B){return B.map(I)}function I(B){var Q=B.x,R=B.y;return{X:Q,Y:R}}function F(B){return B.map(q)}function q(B){var Q=B.X,R=B.Y;return{X:Math.round(Q),Y:Math.round(R)}}function j(B){return B.filter(z)}function z(B,Q,R){if(Q===0)return!0;var U=R[Q-1];return!(B.X===U.X&&B.Y===U.Y)}}),n=o(r),e("default",n),e("__esModule",!0)}}}),dn.register("clipper-js",["-/clipper-js@v1.0.2-Mou0diNPTgyilhisGDlW/dist=es2020/clipper-js"],function(e,t){t&&t.id;var i={default:!0};function r(n){var o={};for(var s in n)s!=="default"&&!i.hasOwnProperty(s)&&(o[s]=n[s]);e(o)}return{setters:[function(n){r(n),e({default:n.default})}],execute:function(){}}});const Ad=Zl("clipper-js"),ov=Ad.default;Ad.__esModule;const lv=(e,t)=>1e-8>Math.abs(e.x-t.x)+Math.abs(e.y-t.y);function kd(e,t,i={}){let{endType:r,jointType:n="jtRound",miterLimit:o=2,roundPrecision:s=.25}=i;if(!r){const f=e[0][0],m=e.at(-1).at(-1);r=lv(f,m)?"etClosedRound":"etOpenRound"}const{data:a,scale:h}=uv(e,t),c=new ov(a,!0).offset(t*h,{jointType:n,endType:r,miterLimit:o,roundPrecision:s}),d=cv(c,h);for(;e.length>d.length;)e.pop();return d.forEach((f,m)=>{e[m]=f}),e}const av=(e,t)=>{const i={};return i.X=Math.round(e.x*t),i.Y=Math.round(e.y*t),i},hv=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2);function uv(e,t){const i=[],r=e.flat();for(let o=0;o<r.length-2;o+=1){const s=r[o],a=r[o+1],h=hv(s,a);Math.abs(h)!==0&&i.push(h)}const n=t!==0?(1/Math.min(...i,t)+1)*10:(1/Math.min(...i)+1)*10;return{data:e.map((o,s)=>o.map(a=>av(a,n))),scale:n}}function cv(e,t){return Object.values(e.paths).map(i=>(i=i.map(({X:r,Y:n})=>({x:r/t,y:n/t})),[...i,i[0]],[...i,i[0]]))}function fn(e,t,i){const r=d=>d.map(({x:f,y:m})=>({X:f,Y:m})),n=d=>d.map(({X:f,Y:m})=>({x:f,y:m})),o=e.map(r);t=t.map(r);const s=new x.Paths,a=new x.Clipper;a.AddPaths(o,x.PolyType.ptSubject,!0),a.AddPaths(t,x.PolyType.ptClip,!0);const h={intersection:x.ClipType.ctIntersection,union:x.ClipType.ctUnion,difference:x.ClipType.ctDifference,xor:x.ClipType.ctXor};a.Execute(h[i],s);const c=s.map(n);for(;e.length>c.length;)e.pop();return c.forEach((d,f)=>{e[f]=d,e[f].push({x:d[0].x,y:d[0].y})}),e}// @license
const Ws={Z:"Z",M:"M",L:"L",C:"C",Q:"Q",A:"A",H:"H",V:"V",S:"S",T:"T",z:"Z",m:"m",l:"l",c:"c",q:"q",a:"a",h:"h",v:"v",s:"s",t:"t"},_d=function(e){this._string=e,this._currentIndex=0,this._endIndex=this._string.length,this._prevCommand=null,this._skipOptionalSpaces()};_d.prototype={parseSegment:function(){var e=this._string[this._currentIndex],t=Ws[e]?Ws[e]:null;if(t===null){if(this._prevCommand===null||((e==="+"||e==="-"||e==="."||e>="0"&&e<="9")&&this._prevCommand!=="Z"?this._prevCommand==="M"?t="L":this._prevCommand==="m"?t="l":t=this._prevCommand:t=null,t===null))return null}else this._currentIndex+=1;this._prevCommand=t;var i=null,r=t.toUpperCase();return r==="H"||r==="V"?i=[this._parseNumber()]:r==="M"||r==="L"||r==="T"?i=[this._parseNumber(),this._parseNumber()]:r==="S"||r==="Q"?i=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:r==="C"?i=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:r==="A"?i=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseArcFlag(),this._parseArcFlag(),this._parseNumber(),this._parseNumber()]:r==="Z"&&(this._skipOptionalSpaces(),i=[]),i===null||i.indexOf(null)>=0?null:{type:t,values:i}},hasMoreData:function(){return this._currentIndex<this._endIndex},peekSegmentType:function(){var e=this._string[this._currentIndex];return Ws[e]?Ws[e]:null},initialCommandIsMoveTo:function(){if(!this.hasMoreData())return!0;var e=this.peekSegmentType();return e==="M"||e==="m"},_isCurrentSpace:function(){var e=this._string[this._currentIndex];return e<=" "&&(e===" "||e===`
`||e==="	"||e==="\r"||e==="\f")},_skipOptionalSpaces:function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex+=1;return this._currentIndex<this._endIndex},_skipOptionalSpacesOrDelimiter:function(){return this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&this._string[this._currentIndex]!==","?!1:(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&this._string[this._currentIndex]===","&&(this._currentIndex+=1,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},_parseNumber:function(){var e=0,t=0,i=1,r=0,n=1,o=1,s=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="+"?this._currentIndex+=1:this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="-"&&(this._currentIndex+=1,n=-1),this._currentIndex===this._endIndex||(this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")&&this._string[this._currentIndex]!==".")return null;for(var a=this._currentIndex;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)this._currentIndex+=1;if(this._currentIndex!==a)for(var h=this._currentIndex-1,c=1;h>=a;)t+=c*(this._string[h]-"0"),h-=1,c*=10;if(this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="."){if(this._currentIndex+=1,this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")return null;for(;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)i*=10,r+=(this._string.charAt(this._currentIndex)-"0")/i,this._currentIndex+=1}if(this._currentIndex!==s&&this._currentIndex+1<this._endIndex&&(this._string[this._currentIndex]==="e"||this._string[this._currentIndex]==="E")&&this._string[this._currentIndex+1]!=="x"&&this._string[this._currentIndex+1]!=="m"){if(this._currentIndex+=1,this._string[this._currentIndex]==="+"?this._currentIndex+=1:this._string[this._currentIndex]==="-"&&(this._currentIndex+=1,o=-1),this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")return null;for(;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)e*=10,e+=this._string[this._currentIndex]-"0",this._currentIndex+=1}var d=t+r;return d*=n,e&&(d*=Math.pow(10,o*e)),s===this._currentIndex?null:(this._skipOptionalSpacesOrDelimiter(),d)},_parseArcFlag:function(){if(this._currentIndex>=this._endIndex)return null;var e=null,t=this._string[this._currentIndex];if(this._currentIndex+=1,t==="0")e=0;else if(t==="1")e=1;else return null;return this._skipOptionalSpacesOrDelimiter(),e}};const Id=function(e){if(!e||e.length===0)return[];var t=new _d(e),i=[];if(t.initialCommandIsMoveTo())for(;t.hasMoreData();){var r=t.parseSegment();if(r===null)break;i.push(r)}return i},fr=typeof Symbol<"u"?Symbol():"__cachedPathData",zl=typeof Symbol<"u"?Symbol():"__cachedNormalizedPathData";var Ld=function(e,t,i,r,n,o,s,a,h,c){var d=function(ee){return Math.PI*ee/180},f=function(ee,Ne,Ee){var ri=ee*Math.cos(Ee)-Ne*Math.sin(Ee),$t=ee*Math.sin(Ee)+Ne*Math.cos(Ee);return{x:ri,y:$t}},m=d(s),v=[],S,O,y,P;if(c)S=c[0],O=c[1],y=c[2],P=c[3];else{var w=f(e,t,-m);e=w.x,t=w.y;var E=f(i,r,-m);i=E.x,r=E.y;var T=(e-i)/2,_=(t-r)/2,I=T*T/(n*n)+_*_/(o*o);I>1&&(I=Math.sqrt(I),n=I*n,o=I*o);var F;a===h?F=-1:F=1;var q=n*n,j=o*o,z=q*j-q*_*_-j*T*T,B=q*_*_+j*T*T,Q=F*Math.sqrt(Math.abs(z/B));y=Q*n*_/o+(e+i)/2,P=Q*-o*T/n+(t+r)/2,S=Math.asin(parseFloat(((t-P)/o).toFixed(9))),O=Math.asin(parseFloat(((r-P)/o).toFixed(9))),e<y&&(S=Math.PI-S),i<y&&(O=Math.PI-O),S<0&&(S=Math.PI*2+S),O<0&&(O=Math.PI*2+O),h&&S>O&&(S=S-Math.PI*2),!h&&O>S&&(O=O-Math.PI*2)}var R=O-S;if(Math.abs(R)>Math.PI*120/180){var U=O,K=i,ot=r;h&&O>S?O=S+Math.PI*120/180*1:O=S+Math.PI*120/180*-1,i=y+n*Math.cos(O),r=P+o*Math.sin(O),v=Ld(i,r,K,ot,n,o,s,0,h,[O,U,y,P])}R=O-S;var ht=Math.cos(S),dt=Math.sin(S),gt=Math.cos(O),ft=Math.sin(O),Et=Math.tan(R/4),Dt=4/3*n*Et,_t=4/3*o*Et,oe=[e,t],qt=[e+Dt*dt,t-_t*ht],ye=[i+Dt*ft,r-_t*gt],Xe=[i,r];if(qt[0]=2*oe[0]-qt[0],qt[1]=2*oe[1]-qt[1],c)return[qt,ye,Xe].concat(v);v=[qt,ye,Xe].concat(v);for(var te=[],Ut=0;Ut<v.length;Ut+=3){var n=f(v[Ut][0],v[Ut][1],m),o=f(v[Ut+1][0],v[Ut+1][1],m),$e=f(v[Ut+2][0],v[Ut+2][1],m);te.push([n.x,n.y,o.x,o.y,$e.x,$e.y])}return te},mr=function(e){return e.map(function(t){return{type:t.type,values:Array.prototype.slice.call(t.values)}})},pv=function(e){var t=[],i=null,r=null,n=null,o=null;return e.forEach(function(s){var a=s.type;if(a==="M"){var h=s.values[0],c=s.values[1];t.push({type:"M",values:[h,c]}),n=h,o=c,i=h,r=c}else if(a==="m"){var h=i+s.values[0],c=r+s.values[1];t.push({type:"M",values:[h,c]}),n=h,o=c,i=h,r=c}else if(a==="L"){var h=s.values[0],c=s.values[1];t.push({type:"L",values:[h,c]}),i=h,r=c}else if(a==="l"){var h=i+s.values[0],c=r+s.values[1];t.push({type:"L",values:[h,c]}),i=h,r=c}else if(a==="C"){var d=s.values[0],f=s.values[1],m=s.values[2],v=s.values[3],h=s.values[4],c=s.values[5];t.push({type:"C",values:[d,f,m,v,h,c]}),i=h,r=c}else if(a==="c"){var d=i+s.values[0],f=r+s.values[1],m=i+s.values[2],v=r+s.values[3],h=i+s.values[4],c=r+s.values[5];t.push({type:"C",values:[d,f,m,v,h,c]}),i=h,r=c}else if(a==="Q"){var d=s.values[0],f=s.values[1],h=s.values[2],c=s.values[3];t.push({type:"Q",values:[d,f,h,c]}),i=h,r=c}else if(a==="q"){var d=i+s.values[0],f=r+s.values[1],h=i+s.values[2],c=r+s.values[3];t.push({type:"Q",values:[d,f,h,c]}),i=h,r=c}else if(a==="A"){var h=s.values[5],c=s.values[6];t.push({type:"A",values:[s.values[0],s.values[1],s.values[2],s.values[3],s.values[4],h,c]}),i=h,r=c}else if(a==="a"){var h=i+s.values[5],c=r+s.values[6];t.push({type:"A",values:[s.values[0],s.values[1],s.values[2],s.values[3],s.values[4],h,c]}),i=h,r=c}else if(a==="H"){var h=s.values[0];t.push({type:"H",values:[h]}),i=h}else if(a==="h"){var h=i+s.values[0];t.push({type:"H",values:[h]}),i=h}else if(a==="V"){var c=s.values[0];t.push({type:"V",values:[c]}),r=c}else if(a==="v"){var c=r+s.values[0];t.push({type:"V",values:[c]}),r=c}else if(a==="S"){var m=s.values[0],v=s.values[1],h=s.values[2],c=s.values[3];t.push({type:"S",values:[m,v,h,c]}),i=h,r=c}else if(a==="s"){var m=i+s.values[0],v=r+s.values[1],h=i+s.values[2],c=r+s.values[3];t.push({type:"S",values:[m,v,h,c]}),i=h,r=c}else if(a==="T"){var h=s.values[0],c=s.values[1];t.push({type:"T",values:[h,c]}),i=h,r=c}else if(a==="t"){var h=i+s.values[0],c=r+s.values[1];t.push({type:"T",values:[h,c]}),i=h,r=c}else(a==="Z"||a==="z")&&(t.push({type:"Z",values:[]}),i=n,r=o)}),t},js=function(e){var t=[],i=null,r=null,n=null,o=null,s=null,a=null,h=null;return e.forEach(function(c){if(c.type==="M"){var d=c.values[0],f=c.values[1];t.push({type:"M",values:[d,f]}),a=d,h=f,o=d,s=f}else if(c.type==="C"){var m=c.values[0],v=c.values[1],S=c.values[2],O=c.values[3],d=c.values[4],f=c.values[5];t.push({type:"C",values:[m,v,S,O,d,f]}),r=S,n=O,o=d,s=f}else if(c.type==="L"){var d=c.values[0],f=c.values[1];t.push({type:"L",values:[d,f]}),o=d,s=f}else if(c.type==="H"){var d=c.values[0];t.push({type:"L",values:[d,s]}),o=d}else if(c.type==="V"){var f=c.values[0];t.push({type:"L",values:[o,f]}),s=f}else if(c.type==="S"){var S=c.values[0],O=c.values[1],d=c.values[2],f=c.values[3],y,P;i==="C"||i==="S"?(y=o+(o-r),P=s+(s-n)):(y=o,P=s),t.push({type:"C",values:[y,P,S,O,d,f]}),r=S,n=O,o=d,s=f}else if(c.type==="T"){var d=c.values[0],f=c.values[1],m,v;i==="Q"||i==="T"?(m=o+(o-r),v=s+(s-n)):(m=o,v=s);var y=o+2*(m-o)/3,P=s+2*(v-s)/3,w=d+2*(m-d)/3,E=f+2*(v-f)/3;t.push({type:"C",values:[y,P,w,E,d,f]}),r=m,n=v,o=d,s=f}else if(c.type==="Q"){var m=c.values[0],v=c.values[1],d=c.values[2],f=c.values[3],y=o+2*(m-o)/3,P=s+2*(v-s)/3,w=d+2*(m-d)/3,E=f+2*(v-f)/3;t.push({type:"C",values:[y,P,w,E,d,f]}),r=m,n=v,o=d,s=f}else if(c.type==="A"){var T=Math.abs(c.values[0]),_=Math.abs(c.values[1]),I=c.values[2],F=c.values[3],q=c.values[4],d=c.values[5],f=c.values[6];if(T===0||_===0)t.push({type:"C",values:[o,s,d,f,d,f]}),o=d,s=f;else if(o!==d||s!==f){var j=Ld(o,s,d,f,T,_,I,F,q);j.forEach(function(Q){t.push({type:"C",values:Q})}),o=d,s=f}}else c.type==="Z"&&(t.push(c),o=a,s=h);i=c.type}),t};const Wt=(e,t)=>t in e&&"baseVal"in e[t]?e[t].baseVal.value:+e.getAttribute(t),dv=function(e){if(e&&e.normalize){if(this[zl])return mr(this[zl]);var t;this[fr]?t=mr(this[fr]):(t=Id(this.getAttribute("d")||""),this[fr]=mr(t));var i=js(pv(t));return this[zl]=mr(i),i}else{if(this[fr])return mr(this[fr]);var t=Id(this.getAttribute("d")||"");return this[fr]=mr(t),t}},fv=function(e){var t=Wt(this,"x"),i=Wt(this,"y"),r=Wt(this,"width"),n=Wt(this,"height"),o=this.hasAttribute("rx")?Wt(this,"rx"):Wt(this,"ry"),s=this.hasAttribute("ry")?Wt(this,"ry"):Wt(this,"rx");o>r/2&&(o=r/2),s>n/2&&(s=n/2);var a=[{type:"M",values:[t+o,i]},{type:"H",values:[t+r-o]},{type:"A",values:[o,s,0,0,1,t+r,i+s]},{type:"V",values:[i+n-s]},{type:"A",values:[o,s,0,0,1,t+r-o,i+n]},{type:"H",values:[t+o]},{type:"A",values:[o,s,0,0,1,t,i+n-s]},{type:"V",values:[i+s]},{type:"A",values:[o,s,0,0,1,t+o,i]},{type:"Z",values:[]}];return a=a.filter(function(h){return!(h.type==="A"&&(h.values[0]===0||h.values[1]===0))}),e&&e.normalize===!0&&(a=js(a)),a},mv=function(e){var t=Wt(this,"cx"),i=Wt(this,"cy"),r=Wt(this,"r"),n=[{type:"M",values:[t+r,i]},{type:"A",values:[r,r,0,0,1,t,i+r]},{type:"A",values:[r,r,0,0,1,t-r,i]},{type:"A",values:[r,r,0,0,1,t,i-r]},{type:"A",values:[r,r,0,0,1,t+r,i]},{type:"Z",values:[]}];return e&&e.normalize===!0&&(n=js(n)),n},Ov=function(e){var t=Wt(this,"cx"),i=Wt(this,"cy"),r=Wt(this,"rx"),n=Wt(this,"ry"),o=[{type:"M",values:[t+r,i]},{type:"A",values:[r,n,0,0,1,t,i+n]},{type:"A",values:[r,n,0,0,1,t-r,i]},{type:"A",values:[r,n,0,0,1,t,i-n]},{type:"A",values:[r,n,0,0,1,t+r,i]},{type:"Z",values:[]}];return e&&e.normalize===!0&&(o=js(o)),o},gv=function(){const e=Wt(this,"x1"),t=Wt(this,"x2"),i=Wt(this,"y1"),r=Wt(this,"y2");return[{type:"M",values:[e,i]},{type:"L",values:[t,r]}]},yv=function(){for(var e=[],t=0;t<this.points.numberOfItems;t+=1){var i=this.points.getItem(t);e.push({type:t===0?"M":"L",values:[i.x,i.y]})}return e},xv=function(){for(var e=[],t=0;t<this.points.numberOfItems;t+=1){var i=this.points.getItem(t);e.push({type:t===0?"M":"L",values:[i.x,i.y]})}return e.push({type:"Z",values:[]}),e},Qd={circle:mv,ellipse:Ov,path:dv,polygon:xv,polyline:yv,line:gv,rect:fv};function vv(e,t){const i=e.nodeName.toLowerCase();if(i in Qd)return Qd[i].call(e,t);throw new Error(`Unsupported SVG element type: '${i}'`)}function Pv([e,t,i,r,n,o,s,a],h){const c=3*i-2*e-s,d=3*r-2*t-a,f=3*n-2*s-e,m=3*o-2*a-t;return Math.max(c*c,f*f)+Math.max(d*d,m*m)<=16*h*h}function Cv([e,t,i,r,n,o,s,a],h){h===void 0&&(h=.5);let c=1-h,d=c*e+h*i,f=c*t+h*r,m=c*i+h*n,v=c*r+h*o,S=c*n+h*s,O=c*o+h*a,y=c*d+h*m,P=c*f+h*v,w=c*m+h*S,E=c*v+h*O,T=c*y+h*w,_=c*P+h*E;return[[e,t,d,f,y,P,T,_],[T,_,w,E,S,O,s,a]]}function Sv(e,t,i=32){const r=1/i,n=[];function o(s,a,h){if(h-a>r&&!Pv(s,t)){const c=Cv(s,.5),d=(a+h)/2;o(c[0],a,d),o(c[1],d,h)}else{const c=s[6]-s[0],d=s[7]-s[1];Math.sqrt(c*c+d*d)>0&&n.push(s)}}return o(e,0,1),n}function wv(e,t={}){const i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttribute("d",e);const{maxError:r=.1}=t,n=[],o=([c,d])=>[c,d],s=vv(i,{normalize:!0});let a=null,h=null;for(const c of s)if(c.type==="M")a=o(c.values),h=a,n.push({points:[a]});else if(c.type==="L")a=o(c.values),n[n.length-1].points.push(a);else if(c.type==="C"){const[d,f,m,v,S,O]=c.values,[y,P]=a,[w,E]=o([d,f]),[T,_]=o([m,v]),[I,F]=o([S,O]),q=Sv([y,P,w,E,T,_,I,F],r);for(const j of q)n[n.length-1].points.push([j[6],j[7]]);a=[I,F]}else if(c.type==="A"){const[d,f,m,v,S,O,y]=c.values,P=m,w=S,E=v,{cos:T,sin:_,atan2:I,sqrt:F,sign:q,acos:j,abs:z,ceil:B}=Math,Q=(a[0]-O)/2,R=(a[1]-y)/2,U=T(P)*Q+_(P)*R,K=-_(P)*Q+T(P)*R,ot=U*U,ht=K*K,dt=ot/(d*d)+ht/(f*f),gt=dt<=1?F(dt)*d:d,ft=dt<=1?F(dt)*f:f,Et=gt*gt,Dt=ft*ft;let _t=(Et*Dt-Et*ht-Dt*ot)/(Et*ht+Dt*ot);if(z(_t)<1e-4&&(_t=0),_t<0)throw new Error(`bad arc args ${_t}`);const oe=(E===w?-1:1)*F(_t),qt=oe*gt*K/ft,ye=oe*-ft*U/gt,Xe=T(P)*qt-_(P)*ye+(a[0]+O)/2,te=_(P)*qt+T(P)*ye+(a[1]+y)/2,Ut=($t,ce,Fe,ni)=>I($t*ni-ce*Fe,$t*Fe+ce*ni),$e=Ut(1,0,(U-qt)/gt,(K-ye)/ft),ee=Ut((U-qt)/gt,(K-ye)/ft,(-U-qt)/gt,(-K-ye)/ft)%(Math.PI*2),Ne=w===0&&ee>0?ee-Math.PI*2:w===1&&ee<0?ee+Math.PI*2:ee,Ee=r,ri=B(z(Ne)/j(1-Ee/gt));for(let $t=1;$t<=ri;$t++){const ce=$e+Ne*$t/ri,Fe=T(P)*gt*T(ce)-_(P)*ft*_(ce)+Xe,ni=_(P)*gt*T(ce)+T(P)*ft*_(ce)+te;n[n.length-1].points.push([Fe,ni])}a=[O,y]}else if(c.type==="Z")h&&(a[0]!==h[0]||a[1]!==h[1])&&n[n.length-1].points.push(h);else throw Error(`Unexpected path command: "${c}"`);return n}const Xd=(e,t,i)=>({x:(1-e)*t.x+e*i.x,y:(1-e)*t.y+e*i.y}),$d=(e,t,i,...r)=>r.length>0?[Xd(e,t,i),...$d(e,i,...r)]:[Xd(e,t,i)],Nd=(e,t)=>t.length>1?Nd(e,$d(e,...t)):t[0],bv=e=>Array.isArray(e)?{x:e[0],y:e[1]}:e;function Dv(e,...t){t=t.map(bv),e.length<0&&(e=[[{x:0,y:0}]]),t=[e.at(-1).at(-1),...t];const i=[];for(let r=0;r<=1;r+=1/32){const n=Nd(r,t);i.push(n)}return i.forEach(r=>e.at(-1).push(r)),e}const Zi=(e,t,i={x:0,y:0})=>{t=Fd(t),i=Fd(i);const{x:r,y:n}=i,{x:o,y:s}=t,a=o-r,h=s-n;return Ev(e,c=>({x:c.x+a,y:c.y+h}))},Ev=(e,t)=>(e.forEach((i,r)=>{e[r]=i.map(t)}),e),Fd=e=>Array.isArray(e)?{x:e[0],y:e[1]}:e,Zs=e=>{let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.flat().forEach(o=>{t>o.x&&(t=o.x),i<o.x&&(i=o.x),r>o.y&&(r=o.y),n<o.y&&(n=o.y)}),{xMin:t,xMax:i,yMin:r,yMax:n}},zi=(e,t)=>{if(e.length===0&&e.push([{x:0,y:0}]),t==="start")return e[0][0];if(t==="end")return e.at(-1).at(-1);let{xMax:i,xMin:r,yMax:n,yMin:o}=Zs(e),s=(i+r)/2,a=(n+o)/2;if(t==="cc")return{x:s,y:a};if(t==="lb")return{x:r,y:o};if(t==="rt")return{x:i,y:n};if(t==="lc")return{x:r,y:a};if(t==="lt")return{x:r,y:n};if(t==="cb")return{x:s,y:o};if(t==="ct")return{x:s,y:n};if(t==="rb")return{x:i,y:o};if(t==="rc")return{x:i,y:a};throw'"'+t+'" is not an origin point. "right" or "left" come first then "bottom" or "top"'},ql=(e,t,i)=>(i||(i=zi(e,"cc")),i=Tv(i),Av(e,r=>{let n=t/180*Math.PI,o=r.x-i.x,s=r.y-i.y;return{x:o*Math.cos(n)-s*Math.sin(n)+i.x,y:s*Math.cos(n)+o*Math.sin(n)+i.y}})),Tv=e=>Array.isArray(e)?{x:e[0],y:e[1]}:e,Av=(e,t)=>(e.forEach((i,r)=>{e[r]=i.map(t)}),e),Md=(e,t,i)=>{if(e.length===0&&e.push([{x:0,y:0}]),i===0)return e;const r=e.at(-1).at(-1),n=kv(e)+t,o=Math.cos(Bd(n)),s=Math.sin(Bd(n)),a=r.x+i*o,h=r.y+i*s;return e.at(-1).push({x:a,y:h}),e};function kv(e){const t=e.at(-1);if(t.length<2)return 0;const i=t.at(-1),r=t.at(-2),n=i.x-r.x,o=i.y-r.y;return Math.atan2(o,n)*180/Math.PI}const Bd=e=>e/180*Math.PI;function Rd(e){const t=e.at(-1);if(t.length<2)return 0;const i=t.at(-1),r=t.at(-2),n=i.x-r.x,o=i.y-r.y;return Math.atan2(o,n)*180/Math.PI}const _v=(e,t,i)=>{if(t===0||i===0)return e;e.length===0&&e.push([{x:0,y:0}]);const r=32,n=[[]],o=t/180*Math.PI,s=e.at(-1).at(-1),a=Rd(e),h=(f,m)=>m*Math.cos(f),c=(f,m)=>m*Math.sin(f);for(let f=0;f<=r;f++){const m=o/r*f,v=h(m,i),S=c(m,i);n[0].push({x:v,y:S})}Zi(n,s,n[0][0]),ql(n,a+(t<0?90:-90),n[0][0]),n[0].slice(1).forEach(f=>e.at(-1).push(f));const d=Rd(e);return Md(e,t+a-d,i/1e12),console.log("arc pts",n),e},Yd=(e,t,i)=>{i||(i=zi(e,"cc"));const{x:r,y:n}=Lv(i);typeof t=="number"&&(t=[t,t]);const[o,s]=t;return Iv(e,a=>({x:(a.x-r)*o+r,y:(a.y-n)*s+n}))},Iv=(e,t)=>(e.forEach((i,r)=>{e[r]=i.map(t)}),e),Lv=e=>Array.isArray(e)?{x:e[0],y:e[1]}:e,mn=(e,t)=>Ul(e,t)<1e-6,Ul=([e,t],[i,r])=>Math.sqrt((i-e)**2+(r-t)**2),Qv=(e,t)=>Math.sqrt((t[0]-e[0])**2+(t[1]-e[1])**2),zs=(e,t)=>{const i=Qv(e,t);return[(t[0]-e[0])/i,(t[1]-e[1])/i]},Xv=e=>{const t=Math.sqrt(e[0]**2+e[1]**2);return[e[0]/t,e[1]/t]},$v=(e,t,i,r)=>{const n=Math.sin(r*(1-e))/Math.sin(r),o=Math.sin(r*e)/Math.sin(r);return[t[0]*n+i[0]*o,t[1]*n+i[1]*o]};function Wd(e){if(typeof e[0]!="string")return e;if(e[0]==="chamfer"){const[t,i,r]=e;return r}else if(e[0]==="fillet"){const[t,i,r]=e;return r}else{if(e[0]==="bezier")throw"Can't begin wire with bezier.";return null}}function Nv(e){const t=[];let i=!1;return e.forEach(r=>{r[0]==="bezier"&&i===!0?t.at(-1).push(...r.slice(1)):(t.push(r),i=!1),r[0]==="bezier"&&(i=!0)}),t}function Gl(e){if(e.length===0)return[];e=Nv(e);let t=Wd(e[0]);const i=[t];for(let r=1;r<e.length;r++){const n=e[r];let o=null,s=r+1,a=e[s];for(;a&&a[0]!=="bezier"&&(o=Wd(a),o===null);)s++,a=e[s];if(typeof n[0]!="string"){if(mn(n,t))continue;i.push(n),t=n}else if(n[0]==="chamfer"){const[h,c,d]=n;if(t&&o){if(mn(d,t)||mn(d,o))continue;const[f,m]=Array.isArray(c)?c:[c,c],v=zs(d,t),S=[d[0]+v[0]*f,d[1]+v[1]*f],O=zs(d,o),y=[d[0]+O[0]*m,d[1]+O[1]*m];i.push(S),i.push(y)}else throw"Chamfering requires previous and next points.";t=i.at(-1)}else if(n[0]==="fillet"){let[h,c,d]=n;if(c<0&&(c=1e-8),t&&o){if(mn(d,t)||mn(d,o))continue;const f=zs(d,t),m=zs(d,o),v=Math.acos(f[0]*m[0]+f[1]*m[1]);let S=c/Math.tan(v/2);const O=Ul(t,d),y=Ul(o,d);S=Math.min(O,y,S),c=Math.min(S*Math.tan(v/2),c);const P=[d[0]+f[0]*S,d[1]+f[1]*S],w=[d[0]+m[0]*S,d[1]+m[1]*S],E=[],T=Xv([f[0]+m[0],f[1]+m[1]]),_=Math.sqrt(S**2+c**2),I=[d[0]+T[0]*_,d[1]+T[1]*_],F=Math.PI-v,q=[P[0]-I[0],P[1]-I[1]],j=[w[0]-I[0],w[1]-I[1]];for(let z=1/20;z<1;z+=1/20){const[B,Q]=$v(z,q,j,F);let R=[I[0]+B,I[1]+Q];E.push(R)}i.push(...E)}else throw"Filleting requires previous and next points.";t=i.at(-1)}else if(n[0]==="bezier"){const[h,...c]=n;if(t&&o){let d=Fv([t,...c,o]);d=d.slice(1,-1),d.length>0&&i.push(...d)}else throw"Beziers requires previous and next points.";t=i.at(-1)}}return[i.map(([r,n])=>({x:r,y:n}))]}const jd=(e,t,i)=>[(1-e)*t[0]+e*i[0],(1-e)*t[1]+e*i[1]],Zd=(e,t,i,...r)=>r.length>0?[jd(e,t,i),...Zd(e,i,...r)]:[jd(e,t,i)],zd=(e,t)=>t.length>1?zd(e,Zd(e,...t)):t[0];function Fv(e){const t=[];for(let i=0;i<=1;i+=1/64){const r=zd(i,e);t.push(r)}return t}function qd(){const[e,...t]=arguments;return t.reduce((i,r)=>fn(i,r,"union"),e)}function Mv(){const[e,...t]=arguments;return t.reduce((i,r)=>fn(i,r,"intersect"),e)}function Bv(){const[e,...t]=arguments;return t.reduce((i,r)=>fn(i,r,"difference"),e)}function Rv(){const[e,...t]=arguments;return t.reduce((i,r)=>fn(i,r,"xor"),e)}function Yv(e){if(e.length===0)throw new Error("Shape must have at least one pt.");const t=e.at(-1);if(t.length<2)return 0;const i=t.at(-1),r=t.at(-2),n=i.x-r.x,o=i.y-r.y;return Math.atan2(o,n)*180/Math.PI}const Wv=(e,[t,i])=>{e.length===0&&e.push([{x:0,y:0}]);const{x:r,y:n}=e.at(-1).at(-1);return e.at(-1).push({x:r+t,y:n+i}),e},jv=e=>{if(e.length===0)throw new Error("Shape must have at least one pt.");const{x:t,y:i}=e[0][0];return e.at(-1).push({x:t,y:i}),e},Zv=e=>{const t=e.flat();if(t.length===1)return t[0];if(t.length===2)return{x:(t[0].x+t[1].x)/2,y:(t[0].y+t[1].y)/2};var i=t[0],r=t[t.length-1];(i.x!=r.x||i.y!=r.y)&&t.push(i);for(var n=0,o=0,s=0,a=t.length,h,c,d,f=0,m=a-1;f<a;m=f++)h=t[f],c=t[m],d=h.x*c.y-c.x*h.y,n+=d,o+=(h.x+c.x)*d,s+=(h.y+c.y)*d;return d=n*3,{x:o/d,y:s/d}},zv=e=>JSON.parse(JSON.stringify(e)),Ud=e=>{const{xMin:t,xMax:i}=Zs(e);return i-t},Gd=e=>{const{yMin:t,yMax:i}=Zs(e);return i-t},qv=e=>{const t=zi(e,"cc");return Zi([0,0],t)},Uv=(e,t)=>(e.at(-1).push(t),e),Gv=e=>e.map(t=>t.reverse()).reverse(),Vv=e=>Ys(e,0,{endType:"etClosedPolygon"}),Hv=(e,t)=>Ys(e,t,{endType:"etClosedPolygon"}),Jv=(e,t)=>{const i=(s,a)=>1e-8>Math.abs(s.x-a.x)+Math.abs(s.y-a.y),r=e[0][0],n=e.at(-1).at(-1),o=i(r,n)?"etClosedLine":"etOpenButt";return Ys(e,t/2,{endType:o,jointType:"jtMiter"})},Kv=(e,t,i)=>{const r=zv(e);for(let n=0;n<t;n++)e.push(...i(r));return e},ui=e=>{let t="";return e.forEach(i=>{const{x:r,y:n}=i[0];t+=`M ${r},${n}`,i.slice(1).forEach(o=>{const{x:s,y:a}=o;t+=`L ${s},${a}`})}),t};function Vl(e,t){return wv(t,{maxError:.001}).map(i=>i.points).forEach(i=>{e.push(i.map((r,n)=>({x:r[0],y:r[1]})))}),e}const Hl=(e,t)=>{const i={x:-e/2,y:t/2},r={x:e/2,y:t/2},n={x:e/2,y:-t/2},o={x:-e/2,y:-t/2};return[[i,r,n,o,i]]},Or=e=>{const t=[],i=(s,a)=>a*Math.cos(s),r=(s,a)=>a*Math.sin(s);for(let s=0;s<180;s++){const a=Math.PI*2/180*s,h=i(a,e),c=r(a,e);t.push({x:h,y:c})}const{x:n,y:o}=t[0];return t.push({x:n,y:o}),[t]},tP=Object.freeze(Object.defineProperty({__proto__:null,turnForward:Md,vec:Wv,close:jv,translate:Zi,rotate:ql,scale:Yd,originate:qv,goTo:Uv,reverse:Gv,thicken:Jv,copyPaste:Kv,offset:Ys,offset2:kd,outline:Vv,expand:Hv,intersect:Mv,difference:Bv,union:qd,xor:Rv,getAngle:Yv,extrema:Zs,getPoint:zi,centroid:Zv,width:Ud,height:Gd,getPathData:ui,pathD:Vl,arc:_v,rectangle:Hl,circle:Or,bezier:Dv,path:Gl,boolean:fn},Symbol.toStringTag,{value:"Module"})),eP=([e,t,i],r)=>{const n=a=>Ae`
    <path
      class="path-footprint"
      d="${ui([a])}"
      fill-rule="nonzero"
      />
  `,[o,s]=r;return ki`
    <style>
      .path-footprint-dragged {
        fill: black;
      }
    </style>

    <svg 
      style="position: absolute; left: ${o}; top: ${s}; transform: translate(-50%, -50%) scale(1, -1);"
      width="50px"
      height="50px">
      ${i.map(n)}
    </svg>

  `},iP=e=>e.reduce((t,i,r)=>`${t} ${r===0?"M":"L"} ${i.join(",")}`,""),rP=(e,t)=>{e.lt.x,(e.lt.y+e.lb.y)/2,e.rt.x,(e.rt.y+e.rb.y)/2,(e.lt.x+e.rt.x)/2,e.lt.y,(e.lb.x+e.rb.x)/2,e.lb.y;const i=[[e.lt.x,0],[e.rt.x,0]],r=[[0,e.lt.y],[0,e.lb.y]],n=[e.lt.x,e.rt.x];Math.abs(n[1]-n[0]);const o=[e.lb.y,e.lt.y];Math.abs(o[1]-o[0]);const s=t,a=(v,S)=>{let O=[],y=S*Math.ceil(v[0]/S)-S;for(;y<v[1]+S;)y=y+S,O.push(y);return O},h=v=>[[e.lt.x,v],[e.rt.x,v]],c=v=>[[v,e.lt.y],[v,e.lb.y]],d=v=>S=>Ae`<path stroke="black" vector-effect="non-scaling-stroke" stroke-width="${v}" d="${iP(S)}"/>`,f=a(o,s).map(h).map(d(.2)),m=a(n,s).map(c).map(d(.2));return Ae`
        <g class="grid no-download">
            ${d(.6)(i)}
            ${d(.6)(r)}
            ${f}
            ${m}
        </g>
    `},nP=({data:e,color:t,groupId:i=""})=>{const r=parseInt(t.slice(-2),16)/255,n=h=>Ae`
    <path
        d="${h}"
        fill-rule="nonzero"
        fill="${t.slice(0,-2)}"
        fill-opacity=${r}/>
  `,o=h=>Ae`
    <text 
      text-anchor="middle" 
      x=${h.translate[0]} 
      y=${-h.translate[1]+h.size*.352778}
      transform=${"scale(1 -1)"}
      style=${`font: ${h.size}pt sans-serif;`}
      fill=${t.slice(0,-2)}
      opacity=${r}
      >
      ${h.value}
    </text>
  `,s=({data:h,thickness:c})=>Ae`
    <path
      d=${h}
      stroke-linecap="round"
      stroke-linejoin="round"
      stroke-width=${c}
      fill-rule="nonzero"
      stroke="${t.slice(0,-2)}"
      fill="none"
      stroke-opacity=${r}/>
  `,a=[];return e.forEach(h=>{typeof h=="string"?h.split(/(?=M)/g).forEach(c=>{a.push(n(c))}):h.type==="text"?a.push(o(h)):h.type==="wire"&&a.push(s(h))}),Ae`
    <g id=${i}>
      ${a}
    </g>
  `},sP=({pt:e,start:t,end:i,text:r},n)=>Ae`
  <circle
    class="draggable-pt"
    cx=${e[0]}
    cy=${e[1]}
    r="0.015"
    data-index=${n}
    data-start=${t}
    data-end=${i}
    data-text=${r}></circle>
`,oP=({d:e,stroke:t,strokeWidth:i,fill:r})=>Ae`
  <path d=${e} stroke=${t} stroke-width=${i} fill=${r}></path>
`,lP=e=>{var t;const i=e.shapes.map(nP),r=e.paths.map(oP),n=e.pts.map(sP);return(t=e.panZoomParams)==null||t.corners(),Ae`
    <svg id="viewer" style="width: 100%; height: 100%; transform: scale(1, -1);">
      <g class="transform-group">
            ${e.selectBox.start&&e.selectBox.end?Ae`
              <path
                class="selectBox"
                d="
                  M ${e.selectBox.start.x} ${e.selectBox.start.y}
                  L ${e.selectBox.end.x} ${e.selectBox.start.y}
                  L ${e.selectBox.end.x} ${e.selectBox.end.y}
                  L ${e.selectBox.start.x} ${e.selectBox.end.y}
                "
              />`:""}

          <g class="shapes">${i}</g>
          <g class="paths">${r}</g>


        ${e.panZoomParams&&e.gridSize>0&&e.grid?rP(e.panZoomParams.corners(),e.gridSize):""}

        <rect
          class="limits no-download"
          width="${e.limits.x[1]-e.limits.x[0]}"
          height="${e.limits.y[1]-e.limits.y[0]}"
          stroke="black" fill="transparent" stroke-width="1"
          vector-effect="non-scaling-stroke"
          transform="translate(${e.limits.x[0]}, ${e.limits.y[0]})"/>
        <g class="pts no-download">${e.viewHandles?n:""}</g>
      </g>

    </svg>
  `},aP=([e,t,i],r)=>{const n=o=>Ae`
    <path
      class="path-footprint"
      data-index=${r}
      d="${ui([o])}"
      fill-rule="nonzero"
      />
  `;return ki`
    <style>
      .path-footprint {
        fill: black;
      }

      .footprint-svg:hover .path-footprint {
        fill: orange;
      }
    </style>
    <div class="footprint-item">
      <svg
        data-index=${r}
        class="footprint-svg footprint-${r}"
        width="50px"
        height="50px"
        transform="scale(1, -1)">
        ${i.map(n)}
      </svg>
      <span style="padding-left: 5px;">${e}</span>
    </div>
  `},Mt={codemirror:void 0,storedPCB:void 0,transforming:!1,transformUpdate:()=>{},selectBox:{},footprints:[],wires:[],shapes:[],limits:{x:[0,1],y:[0,1]},mm_per_unit:25.4,grid:!0,gridSize:.05,viewHandles:!0,selectedPath:null,panZoomParams:void 0,previewFootprint:null,paths:[],pts:[],name:"",error:""};window.getState=()=>Mt;function hP(){Mt.selectedPath=null,Mt.codemirror.view.state.selection.ranges,Mt.codemirror.view.dispatch({selection:{anchor:0}}),pt("RENDER")}function uP(e){return ki`
		${cP(e)}

		<div class="content">
			<div class="left-side">
				<codemirror-2 class="code-editor"></codemirror-2>
				${e.error!==""?ki`<div class="error-log">${e.error}</div>`:""}
			</div>
			<div class="right-side">
				${lP(e)}
				${e.selectedPath!==null?ki`<div class="path-selected" @click=${hP}>Clear Selected Path</div>`:""}
				<div class="footprint-toolbox">${e.footprints.map(aP)}</div>
				${e.previewFootprint?eP(...e.previewFootprint):""}
			</div>
			<div id="vertical-bar"></div>
		</div>
	`}const cP=e=>ki`
	<div class="top-menu">
		<img src="logo.svg" class="logo" alt="fab-circuit-logo" />
		<div class="left">
			<div
				class="menu-item"
				@click=${()=>pt("RUN")}>
				run (shift + enter)
			</div>
			<div class="menu-item" @click=${()=>pt("NEW_FILE")}>new</div>
			<div class="menu-item dropdown-container">
			 	import
			 	<div class="dropdown-content">
			 		${tv(Gx)}
			 	</div>
			 </div>
			 <div class="menu-item dropdown-container">
				download
				<div class="dropdown-content">
					<div class="menu-item"
						@click=${()=>{pt("RUN",{flatten:!0}),Vx(e)}}>
						svg
					</div class="menu-item">
					<div class="menu-item"
						@click=${()=>{pt("RUN",{flatten:!0}),Jx(e)}}>
						png
					</div class="menu-item">
					<div class="menu-item"
						@click=${()=>Hx(`${e.name===""?"anon":e.name}.js`,e.codemirror.view.state.doc.toString())}>
						js
					</div class="menu-item">
					<input 
						.value=${e.name} 
						placeholder="name-here"
						@input=${t=>{e.name=t.target.value}}/>
				</div>
			</div>
			<div class="menu-item dropdown-container">
				drawing
				<div class="dropdown-content">
					<button
						class="center-button"
						@click=${()=>{e.panZoomParams.setScaleXY(e.limits)}}>
						center
					</button>
					<div>
						<span>handles</span>
						<input
							type="checkbox"
							checked=${e.viewHandles}
							@change=${t=>{e.viewHandles=t.target.checked,pt("RENDER")}}
							class="handles-checkbox">
						</input>
					</div>
					<div>
						<span>grid</span>
						<input
							type="checkbox"
							.checked=${e.grid}
							@change=${t=>{e.grid=t.target.checked,pt("RENDER")}}
							>
						</input>
					</div>
					<div>
						<span>grid size:</span>
						<input
							type="number"
							step="0.005"
							min="0"
							value=${e.gridSize}
							@change=${t=>{e.gridSize=Number(t.target.value),pt("RENDER")}}>
						</input>
					</div>
				</div>
			</div>
		</div>
	</div>
`;var pP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ei={exports:{}};(function(e,t){(function(i,r){e.exports=r()})(pP,function(){return function(i){var r={};function n(o){if(r[o])return r[o].exports;var s=r[o]={exports:{},id:o,loaded:!1};return i[o].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}return n.m=i,n.c=r,n.p="",n(0)}([function(i,r,n){Object.defineProperty(r,"__esModule",{value:!0});var o=n(1),s=n(3),a=n(8),h=n(15);function c(S,O,y){var P=null,w=function(z,B){y&&y(z,B),P&&P.visit(z,B)},E=typeof y=="function"?w:null,T=!1;if(O){T=typeof O.comment=="boolean"&&O.comment;var _=typeof O.attachComment=="boolean"&&O.attachComment;(T||_)&&(P=new o.CommentHandler,P.attach=_,O.comment=!0,E=w)}var I=!1;O&&typeof O.sourceType=="string"&&(I=O.sourceType==="module");var F;O&&typeof O.jsx=="boolean"&&O.jsx?F=new s.JSXParser(S,O,E):F=new a.Parser(S,O,E);var q=I?F.parseModule():F.parseScript(),j=q;return T&&P&&(j.comments=P.comments),F.config.tokens&&(j.tokens=F.tokens),F.config.tolerant&&(j.errors=F.errorHandler.errors),j}r.parse=c;function d(S,O,y){var P=O||{};return P.sourceType="module",c(S,P,y)}r.parseModule=d;function f(S,O,y){var P=O||{};return P.sourceType="script",c(S,P,y)}r.parseScript=f;function m(S,O,y){var P=new h.Tokenizer(S,O),w;w=[];try{for(;;){var E=P.getNextToken();if(!E)break;y&&(E=y(E)),w.push(E)}}catch(T){P.errorHandler.tolerate(T)}return P.errorHandler.tolerant&&(w.errors=P.errors()),w}r.tokenize=m;var v=n(2);r.Syntax=v.Syntax,r.version="4.0.1"},function(i,r,n){Object.defineProperty(r,"__esModule",{value:!0});var o=n(2),s=function(){function a(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}return a.prototype.insertInnerComments=function(h,c){if(h.type===o.Syntax.BlockStatement&&h.body.length===0){for(var d=[],f=this.leading.length-1;f>=0;--f){var m=this.leading[f];c.end.offset>=m.start&&(d.unshift(m.comment),this.leading.splice(f,1),this.trailing.splice(f,1))}d.length&&(h.innerComments=d)}},a.prototype.findTrailingComments=function(h){var c=[];if(this.trailing.length>0){for(var d=this.trailing.length-1;d>=0;--d){var f=this.trailing[d];f.start>=h.end.offset&&c.unshift(f.comment)}return this.trailing.length=0,c}var m=this.stack[this.stack.length-1];if(m&&m.node.trailingComments){var v=m.node.trailingComments[0];v&&v.range[0]>=h.end.offset&&(c=m.node.trailingComments,delete m.node.trailingComments)}return c},a.prototype.findLeadingComments=function(h){for(var c=[],d;this.stack.length>0;){var f=this.stack[this.stack.length-1];if(f&&f.start>=h.start.offset)d=f.node,this.stack.pop();else break}if(d){for(var m=d.leadingComments?d.leadingComments.length:0,v=m-1;v>=0;--v){var S=d.leadingComments[v];S.range[1]<=h.start.offset&&(c.unshift(S),d.leadingComments.splice(v,1))}return d.leadingComments&&d.leadingComments.length===0&&delete d.leadingComments,c}for(var v=this.leading.length-1;v>=0;--v){var f=this.leading[v];f.start<=h.start.offset&&(c.unshift(f.comment),this.leading.splice(v,1))}return c},a.prototype.visitNode=function(h,c){if(!(h.type===o.Syntax.Program&&h.body.length>0)){this.insertInnerComments(h,c);var d=this.findTrailingComments(c),f=this.findLeadingComments(c);f.length>0&&(h.leadingComments=f),d.length>0&&(h.trailingComments=d),this.stack.push({node:h,start:c.start.offset})}},a.prototype.visitComment=function(h,c){var d=h.type[0]==="L"?"Line":"Block",f={type:d,value:h.value};if(h.range&&(f.range=h.range),h.loc&&(f.loc=h.loc),this.comments.push(f),this.attach){var m={comment:{type:d,value:h.value,range:[c.start.offset,c.end.offset]},start:c.start.offset};h.loc&&(m.comment.loc=h.loc),h.type=d,this.leading.push(m),this.trailing.push(m)}},a.prototype.visit=function(h,c){h.type==="LineComment"?this.visitComment(h,c):h.type==="BlockComment"?this.visitComment(h,c):this.attach&&this.visitNode(h,c)},a}();r.CommentHandler=s},function(i,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(i,r,n){var o=this&&this.__extends||function(){var O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,P){y.__proto__=P}||function(y,P){for(var w in P)P.hasOwnProperty(w)&&(y[w]=P[w])};return function(y,P){O(y,P);function w(){this.constructor=y}y.prototype=P===null?Object.create(P):(w.prototype=P.prototype,new w)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=n(4),a=n(5),h=n(6),c=n(7),d=n(8),f=n(13),m=n(14);f.TokenName[100]="JSXIdentifier",f.TokenName[101]="JSXText";function v(O){var y;switch(O.type){case h.JSXSyntax.JSXIdentifier:var P=O;y=P.name;break;case h.JSXSyntax.JSXNamespacedName:var w=O;y=v(w.namespace)+":"+v(w.name);break;case h.JSXSyntax.JSXMemberExpression:var E=O;y=v(E.object)+"."+v(E.property);break}return y}var S=function(O){o(y,O);function y(P,w,E){return O.call(this,P,w,E)||this}return y.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():O.prototype.parsePrimaryExpression.call(this)},y.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.line,this.scanner.lineStart=this.startMarker.index-this.startMarker.column},y.prototype.finishJSX=function(){this.nextToken()},y.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},y.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},y.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},y.prototype.scanXHTMLEntity=function(P){for(var w="&",E=!0,T=!1,_=!1,I=!1;!this.scanner.eof()&&E&&!T;){var F=this.scanner.source[this.scanner.index];if(F===P)break;if(T=F===";",w+=F,++this.scanner.index,!T)switch(w.length){case 2:_=F==="#";break;case 3:_&&(I=F==="x",E=I||s.Character.isDecimalDigit(F.charCodeAt(0)),_=_&&!I);break;default:E=E&&!(_&&!s.Character.isDecimalDigit(F.charCodeAt(0))),E=E&&!(I&&!s.Character.isHexDigit(F.charCodeAt(0)));break}}if(E&&T&&w.length>2){var q=w.substr(1,w.length-2);_&&q.length>1?w=String.fromCharCode(parseInt(q.substr(1),10)):I&&q.length>2?w=String.fromCharCode(parseInt("0"+q.substr(1),16)):!_&&!I&&m.XHTMLEntities[q]&&(w=m.XHTMLEntities[q])}return w},y.prototype.lexJSX=function(){var P=this.scanner.source.charCodeAt(this.scanner.index);if(P===60||P===62||P===47||P===58||P===61||P===123||P===125){var w=this.scanner.source[this.scanner.index++];return{type:7,value:w,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index}}if(P===34||P===39){for(var E=this.scanner.index,T=this.scanner.source[this.scanner.index++],_="";!this.scanner.eof();){var I=this.scanner.source[this.scanner.index++];if(I===T)break;I==="&"?_+=this.scanXHTMLEntity(T):_+=I}return{type:8,value:_,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:E,end:this.scanner.index}}if(P===46){var F=this.scanner.source.charCodeAt(this.scanner.index+1),q=this.scanner.source.charCodeAt(this.scanner.index+2),w=F===46&&q===46?"...":".",E=this.scanner.index;return this.scanner.index+=w.length,{type:7,value:w,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:E,end:this.scanner.index}}if(P===96)return{type:10,value:"",lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(s.Character.isIdentifierStart(P)&&P!==92){var E=this.scanner.index;for(++this.scanner.index;!this.scanner.eof();){var I=this.scanner.source.charCodeAt(this.scanner.index);if(s.Character.isIdentifierPart(I)&&I!==92)++this.scanner.index;else if(I===45)++this.scanner.index;else break}var j=this.scanner.source.slice(E,this.scanner.index);return{type:100,value:j,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:E,end:this.scanner.index}}return this.scanner.lex()},y.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var P=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(P)),P},y.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;for(var P=this.scanner.index,w="";!this.scanner.eof();){var E=this.scanner.source[this.scanner.index];if(E==="{"||E==="<")break;++this.scanner.index,w+=E,s.Character.isLineTerminator(E.charCodeAt(0))&&(++this.scanner.lineNumber,E==="\r"&&this.scanner.source[this.scanner.index]===`
`&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart;var T={type:101,value:w,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:P,end:this.scanner.index};return w.length>0&&this.config.tokens&&this.tokens.push(this.convertToken(T)),T},y.prototype.peekJSXToken=function(){var P=this.scanner.saveState();this.scanner.scanComments();var w=this.lexJSX();return this.scanner.restoreState(P),w},y.prototype.expectJSX=function(P){var w=this.nextJSXToken();(w.type!==7||w.value!==P)&&this.throwUnexpectedToken(w)},y.prototype.matchJSX=function(P){var w=this.peekJSXToken();return w.type===7&&w.value===P},y.prototype.parseJSXIdentifier=function(){var P=this.createJSXNode(),w=this.nextJSXToken();return w.type!==100&&this.throwUnexpectedToken(w),this.finalize(P,new a.JSXIdentifier(w.value))},y.prototype.parseJSXElementName=function(){var P=this.createJSXNode(),w=this.parseJSXIdentifier();if(this.matchJSX(":")){var E=w;this.expectJSX(":");var T=this.parseJSXIdentifier();w=this.finalize(P,new a.JSXNamespacedName(E,T))}else if(this.matchJSX("."))for(;this.matchJSX(".");){var _=w;this.expectJSX(".");var I=this.parseJSXIdentifier();w=this.finalize(P,new a.JSXMemberExpression(_,I))}return w},y.prototype.parseJSXAttributeName=function(){var P=this.createJSXNode(),w,E=this.parseJSXIdentifier();if(this.matchJSX(":")){var T=E;this.expectJSX(":");var _=this.parseJSXIdentifier();w=this.finalize(P,new a.JSXNamespacedName(T,_))}else w=E;return w},y.prototype.parseJSXStringLiteralAttribute=function(){var P=this.createJSXNode(),w=this.nextJSXToken();w.type!==8&&this.throwUnexpectedToken(w);var E=this.getTokenRaw(w);return this.finalize(P,new c.Literal(w.value,E))},y.prototype.parseJSXExpressionAttribute=function(){var P=this.createJSXNode();this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression");var w=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(P,new a.JSXExpressionContainer(w))},y.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},y.prototype.parseJSXNameValueAttribute=function(){var P=this.createJSXNode(),w=this.parseJSXAttributeName(),E=null;return this.matchJSX("=")&&(this.expectJSX("="),E=this.parseJSXAttributeValue()),this.finalize(P,new a.JSXAttribute(w,E))},y.prototype.parseJSXSpreadAttribute=function(){var P=this.createJSXNode();this.expectJSX("{"),this.expectJSX("..."),this.finishJSX();var w=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(P,new a.JSXSpreadAttribute(w))},y.prototype.parseJSXAttributes=function(){for(var P=[];!this.matchJSX("/")&&!this.matchJSX(">");){var w=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();P.push(w)}return P},y.prototype.parseJSXOpeningElement=function(){var P=this.createJSXNode();this.expectJSX("<");var w=this.parseJSXElementName(),E=this.parseJSXAttributes(),T=this.matchJSX("/");return T&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(P,new a.JSXOpeningElement(w,T,E))},y.prototype.parseJSXBoundaryElement=function(){var P=this.createJSXNode();if(this.expectJSX("<"),this.matchJSX("/")){this.expectJSX("/");var w=this.parseJSXElementName();return this.expectJSX(">"),this.finalize(P,new a.JSXClosingElement(w))}var E=this.parseJSXElementName(),T=this.parseJSXAttributes(),_=this.matchJSX("/");return _&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(P,new a.JSXOpeningElement(E,_,T))},y.prototype.parseJSXEmptyExpression=function(){var P=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.finalize(P,new a.JSXEmptyExpression)},y.prototype.parseJSXExpressionContainer=function(){var P=this.createJSXNode();this.expectJSX("{");var w;return this.matchJSX("}")?(w=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),w=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(P,new a.JSXExpressionContainer(w))},y.prototype.parseJSXChildren=function(){for(var P=[];!this.scanner.eof();){var w=this.createJSXChildNode(),E=this.nextJSXText();if(E.start<E.end){var T=this.getTokenRaw(E),_=this.finalize(w,new a.JSXText(E.value,T));P.push(_)}if(this.scanner.source[this.scanner.index]==="{"){var I=this.parseJSXExpressionContainer();P.push(I)}else break}return P},y.prototype.parseComplexJSXElement=function(P){for(var w=[];!this.scanner.eof();){P.children=P.children.concat(this.parseJSXChildren());var E=this.createJSXChildNode(),T=this.parseJSXBoundaryElement();if(T.type===h.JSXSyntax.JSXOpeningElement){var _=T;if(_.selfClosing){var I=this.finalize(E,new a.JSXElement(_,[],null));P.children.push(I)}else w.push(P),P={node:E,opening:_,closing:null,children:[]}}if(T.type===h.JSXSyntax.JSXClosingElement){P.closing=T;var F=v(P.opening.name),q=v(P.closing.name);if(F!==q&&this.tolerateError("Expected corresponding JSX closing tag for %0",F),w.length>0){var I=this.finalize(P.node,new a.JSXElement(P.opening,P.children,P.closing));P=w[w.length-1],P.children.push(I),w.pop()}else break}}return P},y.prototype.parseJSXElement=function(){var P=this.createJSXNode(),w=this.parseJSXOpeningElement(),E=[],T=null;if(!w.selfClosing){var _=this.parseComplexJSXElement({node:P,opening:w,closing:T,children:E});E=_.children,T=_.closing}return this.finalize(P,new a.JSXElement(w,E,T))},y.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var P=this.parseJSXElement();return this.finishJSX(),P},y.prototype.isStartOfExpression=function(){return O.prototype.isStartOfExpression.call(this)||this.match("<")},y}(d.Parser);r.JSXParser=S},function(i,r){Object.defineProperty(r,"__esModule",{value:!0});var n={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};r.Character={fromCodePoint:function(o){return o<65536?String.fromCharCode(o):String.fromCharCode(55296+(o-65536>>10))+String.fromCharCode(56320+(o-65536&1023))},isWhiteSpace:function(o){return o===32||o===9||o===11||o===12||o===160||o>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(o)>=0},isLineTerminator:function(o){return o===10||o===13||o===8232||o===8233},isIdentifierStart:function(o){return o===36||o===95||o>=65&&o<=90||o>=97&&o<=122||o===92||o>=128&&n.NonAsciiIdentifierStart.test(r.Character.fromCodePoint(o))},isIdentifierPart:function(o){return o===36||o===95||o>=65&&o<=90||o>=97&&o<=122||o>=48&&o<=57||o===92||o>=128&&n.NonAsciiIdentifierPart.test(r.Character.fromCodePoint(o))},isDecimalDigit:function(o){return o>=48&&o<=57},isHexDigit:function(o){return o>=48&&o<=57||o>=65&&o<=70||o>=97&&o<=102},isOctalDigit:function(o){return o>=48&&o<=55}}},function(i,r,n){Object.defineProperty(r,"__esModule",{value:!0});var o=n(6),s=function(){function P(w){this.type=o.JSXSyntax.JSXClosingElement,this.name=w}return P}();r.JSXClosingElement=s;var a=function(){function P(w,E,T){this.type=o.JSXSyntax.JSXElement,this.openingElement=w,this.children=E,this.closingElement=T}return P}();r.JSXElement=a;var h=function(){function P(){this.type=o.JSXSyntax.JSXEmptyExpression}return P}();r.JSXEmptyExpression=h;var c=function(){function P(w){this.type=o.JSXSyntax.JSXExpressionContainer,this.expression=w}return P}();r.JSXExpressionContainer=c;var d=function(){function P(w){this.type=o.JSXSyntax.JSXIdentifier,this.name=w}return P}();r.JSXIdentifier=d;var f=function(){function P(w,E){this.type=o.JSXSyntax.JSXMemberExpression,this.object=w,this.property=E}return P}();r.JSXMemberExpression=f;var m=function(){function P(w,E){this.type=o.JSXSyntax.JSXAttribute,this.name=w,this.value=E}return P}();r.JSXAttribute=m;var v=function(){function P(w,E){this.type=o.JSXSyntax.JSXNamespacedName,this.namespace=w,this.name=E}return P}();r.JSXNamespacedName=v;var S=function(){function P(w,E,T){this.type=o.JSXSyntax.JSXOpeningElement,this.name=w,this.selfClosing=E,this.attributes=T}return P}();r.JSXOpeningElement=S;var O=function(){function P(w){this.type=o.JSXSyntax.JSXSpreadAttribute,this.argument=w}return P}();r.JSXSpreadAttribute=O;var y=function(){function P(w,E){this.type=o.JSXSyntax.JSXText,this.value=w,this.raw=E}return P}();r.JSXText=y},function(i,r){Object.defineProperty(r,"__esModule",{value:!0}),r.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(i,r,n){Object.defineProperty(r,"__esModule",{value:!0});var o=n(2),s=function(){function X($){this.type=o.Syntax.ArrayExpression,this.elements=$}return X}();r.ArrayExpression=s;var a=function(){function X($){this.type=o.Syntax.ArrayPattern,this.elements=$}return X}();r.ArrayPattern=a;var h=function(){function X($,Z,st){this.type=o.Syntax.ArrowFunctionExpression,this.id=null,this.params=$,this.body=Z,this.generator=!1,this.expression=st,this.async=!1}return X}();r.ArrowFunctionExpression=h;var c=function(){function X($,Z,st){this.type=o.Syntax.AssignmentExpression,this.operator=$,this.left=Z,this.right=st}return X}();r.AssignmentExpression=c;var d=function(){function X($,Z){this.type=o.Syntax.AssignmentPattern,this.left=$,this.right=Z}return X}();r.AssignmentPattern=d;var f=function(){function X($,Z,st){this.type=o.Syntax.ArrowFunctionExpression,this.id=null,this.params=$,this.body=Z,this.generator=!1,this.expression=st,this.async=!0}return X}();r.AsyncArrowFunctionExpression=f;var m=function(){function X($,Z,st){this.type=o.Syntax.FunctionDeclaration,this.id=$,this.params=Z,this.body=st,this.generator=!1,this.expression=!1,this.async=!0}return X}();r.AsyncFunctionDeclaration=m;var v=function(){function X($,Z,st){this.type=o.Syntax.FunctionExpression,this.id=$,this.params=Z,this.body=st,this.generator=!1,this.expression=!1,this.async=!0}return X}();r.AsyncFunctionExpression=v;var S=function(){function X($){this.type=o.Syntax.AwaitExpression,this.argument=$}return X}();r.AwaitExpression=S;var O=function(){function X($,Z,st){var pe=$==="||"||$==="&&";this.type=pe?o.Syntax.LogicalExpression:o.Syntax.BinaryExpression,this.operator=$,this.left=Z,this.right=st}return X}();r.BinaryExpression=O;var y=function(){function X($){this.type=o.Syntax.BlockStatement,this.body=$}return X}();r.BlockStatement=y;var P=function(){function X($){this.type=o.Syntax.BreakStatement,this.label=$}return X}();r.BreakStatement=P;var w=function(){function X($,Z){this.type=o.Syntax.CallExpression,this.callee=$,this.arguments=Z}return X}();r.CallExpression=w;var E=function(){function X($,Z){this.type=o.Syntax.CatchClause,this.param=$,this.body=Z}return X}();r.CatchClause=E;var T=function(){function X($){this.type=o.Syntax.ClassBody,this.body=$}return X}();r.ClassBody=T;var _=function(){function X($,Z,st){this.type=o.Syntax.ClassDeclaration,this.id=$,this.superClass=Z,this.body=st}return X}();r.ClassDeclaration=_;var I=function(){function X($,Z,st){this.type=o.Syntax.ClassExpression,this.id=$,this.superClass=Z,this.body=st}return X}();r.ClassExpression=I;var F=function(){function X($,Z){this.type=o.Syntax.MemberExpression,this.computed=!0,this.object=$,this.property=Z}return X}();r.ComputedMemberExpression=F;var q=function(){function X($,Z,st){this.type=o.Syntax.ConditionalExpression,this.test=$,this.consequent=Z,this.alternate=st}return X}();r.ConditionalExpression=q;var j=function(){function X($){this.type=o.Syntax.ContinueStatement,this.label=$}return X}();r.ContinueStatement=j;var z=function(){function X(){this.type=o.Syntax.DebuggerStatement}return X}();r.DebuggerStatement=z;var B=function(){function X($,Z){this.type=o.Syntax.ExpressionStatement,this.expression=$,this.directive=Z}return X}();r.Directive=B;var Q=function(){function X($,Z){this.type=o.Syntax.DoWhileStatement,this.body=$,this.test=Z}return X}();r.DoWhileStatement=Q;var R=function(){function X(){this.type=o.Syntax.EmptyStatement}return X}();r.EmptyStatement=R;var U=function(){function X($){this.type=o.Syntax.ExportAllDeclaration,this.source=$}return X}();r.ExportAllDeclaration=U;var K=function(){function X($){this.type=o.Syntax.ExportDefaultDeclaration,this.declaration=$}return X}();r.ExportDefaultDeclaration=K;var ot=function(){function X($,Z,st){this.type=o.Syntax.ExportNamedDeclaration,this.declaration=$,this.specifiers=Z,this.source=st}return X}();r.ExportNamedDeclaration=ot;var ht=function(){function X($,Z){this.type=o.Syntax.ExportSpecifier,this.exported=Z,this.local=$}return X}();r.ExportSpecifier=ht;var dt=function(){function X($){this.type=o.Syntax.ExpressionStatement,this.expression=$}return X}();r.ExpressionStatement=dt;var gt=function(){function X($,Z,st){this.type=o.Syntax.ForInStatement,this.left=$,this.right=Z,this.body=st,this.each=!1}return X}();r.ForInStatement=gt;var ft=function(){function X($,Z,st){this.type=o.Syntax.ForOfStatement,this.left=$,this.right=Z,this.body=st}return X}();r.ForOfStatement=ft;var Et=function(){function X($,Z,st,pe){this.type=o.Syntax.ForStatement,this.init=$,this.test=Z,this.update=st,this.body=pe}return X}();r.ForStatement=Et;var Dt=function(){function X($,Z,st,pe){this.type=o.Syntax.FunctionDeclaration,this.id=$,this.params=Z,this.body=st,this.generator=pe,this.expression=!1,this.async=!1}return X}();r.FunctionDeclaration=Dt;var _t=function(){function X($,Z,st,pe){this.type=o.Syntax.FunctionExpression,this.id=$,this.params=Z,this.body=st,this.generator=pe,this.expression=!1,this.async=!1}return X}();r.FunctionExpression=_t;var oe=function(){function X($){this.type=o.Syntax.Identifier,this.name=$}return X}();r.Identifier=oe;var qt=function(){function X($,Z,st){this.type=o.Syntax.IfStatement,this.test=$,this.consequent=Z,this.alternate=st}return X}();r.IfStatement=qt;var ye=function(){function X($,Z){this.type=o.Syntax.ImportDeclaration,this.specifiers=$,this.source=Z}return X}();r.ImportDeclaration=ye;var Xe=function(){function X($){this.type=o.Syntax.ImportDefaultSpecifier,this.local=$}return X}();r.ImportDefaultSpecifier=Xe;var te=function(){function X($){this.type=o.Syntax.ImportNamespaceSpecifier,this.local=$}return X}();r.ImportNamespaceSpecifier=te;var Ut=function(){function X($,Z){this.type=o.Syntax.ImportSpecifier,this.local=$,this.imported=Z}return X}();r.ImportSpecifier=Ut;var $e=function(){function X($,Z){this.type=o.Syntax.LabeledStatement,this.label=$,this.body=Z}return X}();r.LabeledStatement=$e;var ee=function(){function X($,Z){this.type=o.Syntax.Literal,this.value=$,this.raw=Z}return X}();r.Literal=ee;var Ne=function(){function X($,Z){this.type=o.Syntax.MetaProperty,this.meta=$,this.property=Z}return X}();r.MetaProperty=Ne;var Ee=function(){function X($,Z,st,pe,xn){this.type=o.Syntax.MethodDefinition,this.key=$,this.computed=Z,this.value=st,this.kind=pe,this.static=xn}return X}();r.MethodDefinition=Ee;var ri=function(){function X($){this.type=o.Syntax.Program,this.body=$,this.sourceType="module"}return X}();r.Module=ri;var $t=function(){function X($,Z){this.type=o.Syntax.NewExpression,this.callee=$,this.arguments=Z}return X}();r.NewExpression=$t;var ce=function(){function X($){this.type=o.Syntax.ObjectExpression,this.properties=$}return X}();r.ObjectExpression=ce;var Fe=function(){function X($){this.type=o.Syntax.ObjectPattern,this.properties=$}return X}();r.ObjectPattern=Fe;var ni=function(){function X($,Z,st,pe,xn,Sa){this.type=o.Syntax.Property,this.key=Z,this.computed=st,this.value=pe,this.kind=$,this.method=xn,this.shorthand=Sa}return X}();r.Property=ni;var On=function(){function X($,Z,st,pe){this.type=o.Syntax.Literal,this.value=$,this.raw=Z,this.regex={pattern:st,flags:pe}}return X}();r.RegexLiteral=On;var qi=function(){function X($){this.type=o.Syntax.RestElement,this.argument=$}return X}();r.RestElement=qi;var gn=function(){function X($){this.type=o.Syntax.ReturnStatement,this.argument=$}return X}();r.ReturnStatement=gn;var na=function(){function X($){this.type=o.Syntax.Program,this.body=$,this.sourceType="script"}return X}();r.Script=na;var sa=function(){function X($){this.type=o.Syntax.SequenceExpression,this.expressions=$}return X}();r.SequenceExpression=sa;var oa=function(){function X($){this.type=o.Syntax.SpreadElement,this.argument=$}return X}();r.SpreadElement=oa;var la=function(){function X($,Z){this.type=o.Syntax.MemberExpression,this.computed=!1,this.object=$,this.property=Z}return X}();r.StaticMemberExpression=la;var aa=function(){function X(){this.type=o.Syntax.Super}return X}();r.Super=aa;var ha=function(){function X($,Z){this.type=o.Syntax.SwitchCase,this.test=$,this.consequent=Z}return X}();r.SwitchCase=ha;var ua=function(){function X($,Z){this.type=o.Syntax.SwitchStatement,this.discriminant=$,this.cases=Z}return X}();r.SwitchStatement=ua;var ca=function(){function X($,Z){this.type=o.Syntax.TaggedTemplateExpression,this.tag=$,this.quasi=Z}return X}();r.TaggedTemplateExpression=ca;var pa=function(){function X($,Z){this.type=o.Syntax.TemplateElement,this.value=$,this.tail=Z}return X}();r.TemplateElement=pa;var da=function(){function X($,Z){this.type=o.Syntax.TemplateLiteral,this.quasis=$,this.expressions=Z}return X}();r.TemplateLiteral=da;var fa=function(){function X(){this.type=o.Syntax.ThisExpression}return X}();r.ThisExpression=fa;var ma=function(){function X($){this.type=o.Syntax.ThrowStatement,this.argument=$}return X}();r.ThrowStatement=ma;var Oa=function(){function X($,Z,st){this.type=o.Syntax.TryStatement,this.block=$,this.handler=Z,this.finalizer=st}return X}();r.TryStatement=Oa;var ga=function(){function X($,Z){this.type=o.Syntax.UnaryExpression,this.operator=$,this.argument=Z,this.prefix=!0}return X}();r.UnaryExpression=ga;var ya=function(){function X($,Z,st){this.type=o.Syntax.UpdateExpression,this.operator=$,this.argument=Z,this.prefix=st}return X}();r.UpdateExpression=ya;var xa=function(){function X($,Z){this.type=o.Syntax.VariableDeclaration,this.declarations=$,this.kind=Z}return X}();r.VariableDeclaration=xa;var va=function(){function X($,Z){this.type=o.Syntax.VariableDeclarator,this.id=$,this.init=Z}return X}();r.VariableDeclarator=va;var Pa=function(){function X($,Z){this.type=o.Syntax.WhileStatement,this.test=$,this.body=Z}return X}();r.WhileStatement=Pa;var yn=function(){function X($,Z){this.type=o.Syntax.WithStatement,this.object=$,this.body=Z}return X}();r.WithStatement=yn;var Ca=function(){function X($,Z){this.type=o.Syntax.YieldExpression,this.argument=$,this.delegate=Z}return X}();r.YieldExpression=Ca},function(i,r,n){Object.defineProperty(r,"__esModule",{value:!0});var o=n(9),s=n(10),a=n(11),h=n(7),c=n(12),d=n(2),f=n(13),m="ArrowParameterPlaceHolder",v=function(){function S(O,y,P){y===void 0&&(y={}),this.config={range:typeof y.range=="boolean"&&y.range,loc:typeof y.loc=="boolean"&&y.loc,source:null,tokens:typeof y.tokens=="boolean"&&y.tokens,comment:typeof y.comment=="boolean"&&y.comment,tolerant:typeof y.tolerant=="boolean"&&y.tolerant},this.config.loc&&y.source&&y.source!==null&&(this.config.source=String(y.source)),this.delegate=P,this.errorHandler=new s.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new c.Scanner(O,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={isModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}return S.prototype.throwError=function(O){var y=Array.prototype.slice.call(arguments,1),P=O.replace(/%(\d)/g,function(_,I){return o.assert(I<y.length,"Message reference must be in range"),y[I]}),w=this.lastMarker.index,E=this.lastMarker.line,T=this.lastMarker.column+1;throw this.errorHandler.createError(w,E,T,P)},S.prototype.tolerateError=function(O){var y=Array.prototype.slice.call(arguments,1),P=O.replace(/%(\d)/g,function(_,I){return o.assert(I<y.length,"Message reference must be in range"),y[I]}),w=this.lastMarker.index,E=this.scanner.lineNumber,T=this.lastMarker.column+1;this.errorHandler.tolerateError(w,E,T,P)},S.prototype.unexpectedTokenError=function(O,y){var P=y||a.Messages.UnexpectedToken,w;if(O?(y||(P=O.type===2?a.Messages.UnexpectedEOS:O.type===3?a.Messages.UnexpectedIdentifier:O.type===6?a.Messages.UnexpectedNumber:O.type===8?a.Messages.UnexpectedString:O.type===10?a.Messages.UnexpectedTemplate:a.Messages.UnexpectedToken,O.type===4&&(this.scanner.isFutureReservedWord(O.value)?P=a.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(O.value)&&(P=a.Messages.StrictReservedWord))),w=O.value):w="ILLEGAL",P=P.replace("%0",w),O&&typeof O.lineNumber=="number"){var E=O.start,T=O.lineNumber,_=this.lastMarker.index-this.lastMarker.column,I=O.start-_+1;return this.errorHandler.createError(E,T,I,P)}else{var E=this.lastMarker.index,T=this.lastMarker.line,I=this.lastMarker.column+1;return this.errorHandler.createError(E,T,I,P)}},S.prototype.throwUnexpectedToken=function(O,y){throw this.unexpectedTokenError(O,y)},S.prototype.tolerateUnexpectedToken=function(O,y){this.errorHandler.tolerate(this.unexpectedTokenError(O,y))},S.prototype.collectComments=function(){if(!this.config.comment)this.scanner.scanComments();else{var O=this.scanner.scanComments();if(O.length>0&&this.delegate)for(var y=0;y<O.length;++y){var P=O[y],w=void 0;w={type:P.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(P.slice[0],P.slice[1])},this.config.range&&(w.range=P.range),this.config.loc&&(w.loc=P.loc);var E={start:{line:P.loc.start.line,column:P.loc.start.column,offset:P.range[0]},end:{line:P.loc.end.line,column:P.loc.end.column,offset:P.range[1]}};this.delegate(w,E)}}},S.prototype.getTokenRaw=function(O){return this.scanner.source.slice(O.start,O.end)},S.prototype.convertToken=function(O){var y={type:f.TokenName[O.type],value:this.getTokenRaw(O)};if(this.config.range&&(y.range=[O.start,O.end]),this.config.loc&&(y.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),O.type===9){var P=O.pattern,w=O.flags;y.regex={pattern:P,flags:w}}return y},S.prototype.nextToken=function(){var O=this.lookahead;this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var y=this.scanner.lex();return this.hasLineTerminator=O.lineNumber!==y.lineNumber,y&&this.context.strict&&y.type===3&&this.scanner.isStrictModeReservedWord(y.value)&&(y.type=4),this.lookahead=y,this.config.tokens&&y.type!==2&&this.tokens.push(this.convertToken(y)),O},S.prototype.nextRegexToken=function(){this.collectComments();var O=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(O))),this.lookahead=O,this.nextToken(),O},S.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}},S.prototype.startNode=function(O,y){y===void 0&&(y=0);var P=O.start-O.lineStart,w=O.lineNumber;return P<0&&(P+=y,w--),{index:O.start,line:w,column:P}},S.prototype.finalize=function(O,y){if(this.config.range&&(y.range=[O.index,this.lastMarker.index]),this.config.loc&&(y.loc={start:{line:O.line,column:O.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(y.loc.source=this.config.source)),this.delegate){var P={start:{line:O.line,column:O.column,offset:O.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}};this.delegate(y,P)}return y},S.prototype.expect=function(O){var y=this.nextToken();(y.type!==7||y.value!==O)&&this.throwUnexpectedToken(y)},S.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var O=this.lookahead;O.type===7&&O.value===","?this.nextToken():O.type===7&&O.value===";"?(this.nextToken(),this.tolerateUnexpectedToken(O)):this.tolerateUnexpectedToken(O,a.Messages.UnexpectedToken)}else this.expect(",")},S.prototype.expectKeyword=function(O){var y=this.nextToken();(y.type!==4||y.value!==O)&&this.throwUnexpectedToken(y)},S.prototype.match=function(O){return this.lookahead.type===7&&this.lookahead.value===O},S.prototype.matchKeyword=function(O){return this.lookahead.type===4&&this.lookahead.value===O},S.prototype.matchContextualKeyword=function(O){return this.lookahead.type===3&&this.lookahead.value===O},S.prototype.matchAssign=function(){if(this.lookahead.type!==7)return!1;var O=this.lookahead.value;return O==="="||O==="*="||O==="**="||O==="/="||O==="%="||O==="+="||O==="-="||O==="<<="||O===">>="||O===">>>="||O==="&="||O==="^="||O==="|="},S.prototype.isolateCoverGrammar=function(O){var y=this.context.isBindingElement,P=this.context.isAssignmentTarget,w=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var E=O.call(this);return this.context.firstCoverInitializedNameError!==null&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=y,this.context.isAssignmentTarget=P,this.context.firstCoverInitializedNameError=w,E},S.prototype.inheritCoverGrammar=function(O){var y=this.context.isBindingElement,P=this.context.isAssignmentTarget,w=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var E=O.call(this);return this.context.isBindingElement=this.context.isBindingElement&&y,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&P,this.context.firstCoverInitializedNameError=w||this.context.firstCoverInitializedNameError,E},S.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(this.lookahead.type!==2&&!this.match("}")&&this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)},S.prototype.parsePrimaryExpression=function(){var O=this.createNode(),y,P,w;switch(this.lookahead.type){case 3:(this.context.isModule||this.context.await)&&this.lookahead.value==="await"&&this.tolerateUnexpectedToken(this.lookahead),y=this.matchAsyncFunction()?this.parseFunctionExpression():this.finalize(O,new h.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,a.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,P=this.nextToken(),w=this.getTokenRaw(P),y=this.finalize(O,new h.Literal(P.value,w));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,P=this.nextToken(),w=this.getTokenRaw(P),y=this.finalize(O,new h.Literal(P.value==="true",w));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,P=this.nextToken(),w=this.getTokenRaw(P),y=this.finalize(O,new h.Literal(null,w));break;case 10:y=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,y=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":y=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":y=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,P=this.nextRegexToken(),w=this.getTokenRaw(P),y=this.finalize(O,new h.RegexLiteral(P.regex,w,P.pattern,P.flags));break;default:y=this.throwUnexpectedToken(this.nextToken())}break;case 4:!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?y=this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?y=this.finalize(O,new h.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?y=this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),y=this.finalize(O,new h.ThisExpression)):this.matchKeyword("class")?y=this.parseClassExpression():y=this.throwUnexpectedToken(this.nextToken()));break;default:y=this.throwUnexpectedToken(this.nextToken())}return y},S.prototype.parseSpreadElement=function(){var O=this.createNode();this.expect("...");var y=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(O,new h.SpreadElement(y))},S.prototype.parseArrayInitializer=function(){var O=this.createNode(),y=[];for(this.expect("[");!this.match("]");)if(this.match(","))this.nextToken(),y.push(null);else if(this.match("...")){var P=this.parseSpreadElement();this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),y.push(P)}else y.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(",");return this.expect("]"),this.finalize(O,new h.ArrayExpression(y))},S.prototype.parsePropertyMethod=function(O){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var y=this.context.strict,P=this.context.allowStrictDirective;this.context.allowStrictDirective=O.simple;var w=this.isolateCoverGrammar(this.parseFunctionSourceElements);return this.context.strict&&O.firstRestricted&&this.tolerateUnexpectedToken(O.firstRestricted,O.message),this.context.strict&&O.stricted&&this.tolerateUnexpectedToken(O.stricted,O.message),this.context.strict=y,this.context.allowStrictDirective=P,w},S.prototype.parsePropertyMethodFunction=function(){var O=!1,y=this.createNode(),P=this.context.allowYield;this.context.allowYield=!0;var w=this.parseFormalParameters(),E=this.parsePropertyMethod(w);return this.context.allowYield=P,this.finalize(y,new h.FunctionExpression(null,w.params,E,O))},S.prototype.parsePropertyMethodAsyncFunction=function(){var O=this.createNode(),y=this.context.allowYield,P=this.context.await;this.context.allowYield=!1,this.context.await=!0;var w=this.parseFormalParameters(),E=this.parsePropertyMethod(w);return this.context.allowYield=y,this.context.await=P,this.finalize(O,new h.AsyncFunctionExpression(null,w.params,E))},S.prototype.parseObjectPropertyKey=function(){var O=this.createNode(),y=this.nextToken(),P;switch(y.type){case 8:case 6:this.context.strict&&y.octal&&this.tolerateUnexpectedToken(y,a.Messages.StrictOctalLiteral);var w=this.getTokenRaw(y);P=this.finalize(O,new h.Literal(y.value,w));break;case 3:case 1:case 5:case 4:P=this.finalize(O,new h.Identifier(y.value));break;case 7:y.value==="["?(P=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):P=this.throwUnexpectedToken(y);break;default:P=this.throwUnexpectedToken(y)}return P},S.prototype.isPropertyKey=function(O,y){return O.type===d.Syntax.Identifier&&O.name===y||O.type===d.Syntax.Literal&&O.value===y},S.prototype.parseObjectProperty=function(O){var y=this.createNode(),P=this.lookahead,w,E=null,T=null,_=!1,I=!1,F=!1,q=!1;if(P.type===3){var j=P.value;this.nextToken(),_=this.match("["),q=!this.hasLineTerminator&&j==="async"&&!this.match(":")&&!this.match("(")&&!this.match("*")&&!this.match(","),E=q?this.parseObjectPropertyKey():this.finalize(y,new h.Identifier(j))}else this.match("*")?this.nextToken():(_=this.match("["),E=this.parseObjectPropertyKey());var z=this.qualifiedPropertyName(this.lookahead);if(P.type===3&&!q&&P.value==="get"&&z)w="get",_=this.match("["),E=this.parseObjectPropertyKey(),this.context.allowYield=!1,T=this.parseGetterMethod();else if(P.type===3&&!q&&P.value==="set"&&z)w="set",_=this.match("["),E=this.parseObjectPropertyKey(),T=this.parseSetterMethod();else if(P.type===7&&P.value==="*"&&z)w="init",_=this.match("["),E=this.parseObjectPropertyKey(),T=this.parseGeneratorMethod(),I=!0;else if(E||this.throwUnexpectedToken(this.lookahead),w="init",this.match(":")&&!q)!_&&this.isPropertyKey(E,"__proto__")&&(O.value&&this.tolerateError(a.Messages.DuplicateProtoProperty),O.value=!0),this.nextToken(),T=this.inheritCoverGrammar(this.parseAssignmentExpression);else if(this.match("("))T=q?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),I=!0;else if(P.type===3){var j=this.finalize(y,new h.Identifier(P.value));if(this.match("=")){this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),F=!0;var B=this.isolateCoverGrammar(this.parseAssignmentExpression);T=this.finalize(y,new h.AssignmentPattern(j,B))}else F=!0,T=j}else this.throwUnexpectedToken(this.nextToken());return this.finalize(y,new h.Property(w,E,_,T,I,F))},S.prototype.parseObjectInitializer=function(){var O=this.createNode();this.expect("{");for(var y=[],P={value:!1};!this.match("}");)y.push(this.parseObjectProperty(P)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(O,new h.ObjectExpression(y))},S.prototype.parseTemplateHead=function(){o.assert(this.lookahead.head,"Template literal must start with a template head");var O=this.createNode(),y=this.nextToken(),P=y.value,w=y.cooked;return this.finalize(O,new h.TemplateElement({raw:P,cooked:w},y.tail))},S.prototype.parseTemplateElement=function(){this.lookahead.type!==10&&this.throwUnexpectedToken();var O=this.createNode(),y=this.nextToken(),P=y.value,w=y.cooked;return this.finalize(O,new h.TemplateElement({raw:P,cooked:w},y.tail))},S.prototype.parseTemplateLiteral=function(){var O=this.createNode(),y=[],P=[],w=this.parseTemplateHead();for(P.push(w);!w.tail;)y.push(this.parseExpression()),w=this.parseTemplateElement(),P.push(w);return this.finalize(O,new h.TemplateLiteral(P,y))},S.prototype.reinterpretExpressionAsPattern=function(O){switch(O.type){case d.Syntax.Identifier:case d.Syntax.MemberExpression:case d.Syntax.RestElement:case d.Syntax.AssignmentPattern:break;case d.Syntax.SpreadElement:O.type=d.Syntax.RestElement,this.reinterpretExpressionAsPattern(O.argument);break;case d.Syntax.ArrayExpression:O.type=d.Syntax.ArrayPattern;for(var y=0;y<O.elements.length;y++)O.elements[y]!==null&&this.reinterpretExpressionAsPattern(O.elements[y]);break;case d.Syntax.ObjectExpression:O.type=d.Syntax.ObjectPattern;for(var y=0;y<O.properties.length;y++)this.reinterpretExpressionAsPattern(O.properties[y].value);break;case d.Syntax.AssignmentExpression:O.type=d.Syntax.AssignmentPattern,delete O.operator,this.reinterpretExpressionAsPattern(O.left);break}},S.prototype.parseGroupExpression=function(){var O;if(this.expect("("),this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),O={type:m,params:[],async:!1};else{var y=this.lookahead,P=[];if(this.match("..."))O=this.parseRestElement(P),this.expect(")"),this.match("=>")||this.expect("=>"),O={type:m,params:[O],async:!1};else{var w=!1;if(this.context.isBindingElement=!0,O=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(",")){var E=[];for(this.context.isAssignmentTarget=!1,E.push(O);this.lookahead.type!==2&&this.match(",");){if(this.nextToken(),this.match(")")){this.nextToken();for(var T=0;T<E.length;T++)this.reinterpretExpressionAsPattern(E[T]);w=!0,O={type:m,params:E,async:!1}}else if(this.match("...")){this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),E.push(this.parseRestElement(P)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1;for(var T=0;T<E.length;T++)this.reinterpretExpressionAsPattern(E[T]);w=!0,O={type:m,params:E,async:!1}}else E.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(w)break}w||(O=this.finalize(this.startNode(y),new h.SequenceExpression(E)))}if(!w){if(this.expect(")"),this.match("=>")&&(O.type===d.Syntax.Identifier&&O.name==="yield"&&(w=!0,O={type:m,params:[O],async:!1}),!w)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),O.type===d.Syntax.SequenceExpression)for(var T=0;T<O.expressions.length;T++)this.reinterpretExpressionAsPattern(O.expressions[T]);else this.reinterpretExpressionAsPattern(O);var _=O.type===d.Syntax.SequenceExpression?O.expressions:[O];O={type:m,params:_,async:!1}}this.context.isBindingElement=!1}}}return O},S.prototype.parseArguments=function(){this.expect("(");var O=[];if(!this.match(")"))for(;;){var y=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(O.push(y),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),O},S.prototype.isIdentifierName=function(O){return O.type===3||O.type===4||O.type===1||O.type===5},S.prototype.parseIdentifierName=function(){var O=this.createNode(),y=this.nextToken();return this.isIdentifierName(y)||this.throwUnexpectedToken(y),this.finalize(O,new h.Identifier(y.value))},S.prototype.parseNewExpression=function(){var O=this.createNode(),y=this.parseIdentifierName();o.assert(y.name==="new","New expression must start with `new`");var P;if(this.match("."))if(this.nextToken(),this.lookahead.type===3&&this.context.inFunctionBody&&this.lookahead.value==="target"){var w=this.parseIdentifierName();P=new h.MetaProperty(y,w)}else this.throwUnexpectedToken(this.lookahead);else{var E=this.isolateCoverGrammar(this.parseLeftHandSideExpression),T=this.match("(")?this.parseArguments():[];P=new h.NewExpression(E,T),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return this.finalize(O,P)},S.prototype.parseAsyncArgument=function(){var O=this.parseAssignmentExpression();return this.context.firstCoverInitializedNameError=null,O},S.prototype.parseAsyncArguments=function(){this.expect("(");var O=[];if(!this.match(")"))for(;;){var y=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAsyncArgument);if(O.push(y),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),O},S.prototype.parseLeftHandSideExpressionAllowCall=function(){var O=this.lookahead,y=this.matchContextualKeyword("async"),P=this.context.allowIn;this.context.allowIn=!0;var w;for(this.matchKeyword("super")&&this.context.inFunctionBody?(w=this.createNode(),this.nextToken(),w=this.finalize(w,new h.Super),!this.match("(")&&!this.match(".")&&!this.match("[")&&this.throwUnexpectedToken(this.lookahead)):w=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var E=this.parseIdentifierName();w=this.finalize(this.startNode(O),new h.StaticMemberExpression(w,E))}else if(this.match("(")){var T=y&&O.lineNumber===this.lookahead.lineNumber;this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;var _=T?this.parseAsyncArguments():this.parseArguments();if(w=this.finalize(this.startNode(O),new h.CallExpression(w,_)),T&&this.match("=>")){for(var I=0;I<_.length;++I)this.reinterpretExpressionAsPattern(_[I]);w={type:m,params:_,async:!0}}}else if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var E=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),w=this.finalize(this.startNode(O),new h.ComputedMemberExpression(w,E))}else if(this.lookahead.type===10&&this.lookahead.head){var F=this.parseTemplateLiteral();w=this.finalize(this.startNode(O),new h.TaggedTemplateExpression(w,F))}else break;return this.context.allowIn=P,w},S.prototype.parseSuper=function(){var O=this.createNode();return this.expectKeyword("super"),!this.match("[")&&!this.match(".")&&this.throwUnexpectedToken(this.lookahead),this.finalize(O,new h.Super)},S.prototype.parseLeftHandSideExpression=function(){o.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var O=this.startNode(this.lookahead),y=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var P=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),y=this.finalize(O,new h.ComputedMemberExpression(y,P))}else if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var P=this.parseIdentifierName();y=this.finalize(O,new h.StaticMemberExpression(y,P))}else if(this.lookahead.type===10&&this.lookahead.head){var w=this.parseTemplateLiteral();y=this.finalize(O,new h.TaggedTemplateExpression(y,w))}else break;return y},S.prototype.parseUpdateExpression=function(){var O,y=this.lookahead;if(this.match("++")||this.match("--")){var P=this.startNode(y),w=this.nextToken();O=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&O.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(O.name)&&this.tolerateError(a.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(a.Messages.InvalidLHSInAssignment);var E=!0;O=this.finalize(P,new h.UpdateExpression(w.value,O,E)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(O=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&this.lookahead.type===7&&(this.match("++")||this.match("--"))){this.context.strict&&O.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(O.name)&&this.tolerateError(a.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(a.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var T=this.nextToken().value,E=!1;O=this.finalize(this.startNode(y),new h.UpdateExpression(T,O,E))}return O},S.prototype.parseAwaitExpression=function(){var O=this.createNode();this.nextToken();var y=this.parseUnaryExpression();return this.finalize(O,new h.AwaitExpression(y))},S.prototype.parseUnaryExpression=function(){var O;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var y=this.startNode(this.lookahead),P=this.nextToken();O=this.inheritCoverGrammar(this.parseUnaryExpression),O=this.finalize(y,new h.UnaryExpression(P.value,O)),this.context.strict&&O.operator==="delete"&&O.argument.type===d.Syntax.Identifier&&this.tolerateError(a.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else this.context.await&&this.matchContextualKeyword("await")?O=this.parseAwaitExpression():O=this.parseUpdateExpression();return O},S.prototype.parseExponentiationExpression=function(){var O=this.lookahead,y=this.inheritCoverGrammar(this.parseUnaryExpression);if(y.type!==d.Syntax.UnaryExpression&&this.match("**")){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var P=y,w=this.isolateCoverGrammar(this.parseExponentiationExpression);y=this.finalize(this.startNode(O),new h.BinaryExpression("**",P,w))}return y},S.prototype.binaryPrecedence=function(O){var y=O.value,P;return O.type===7?P=this.operatorPrecedence[y]||0:O.type===4?P=y==="instanceof"||this.context.allowIn&&y==="in"?7:0:P=0,P},S.prototype.parseBinaryExpression=function(){var O=this.lookahead,y=this.inheritCoverGrammar(this.parseExponentiationExpression),P=this.lookahead,w=this.binaryPrecedence(P);if(w>0){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var E=[O,this.lookahead],T=y,_=this.isolateCoverGrammar(this.parseExponentiationExpression),I=[T,P.value,_],F=[w];w=this.binaryPrecedence(this.lookahead),!(w<=0);){for(;I.length>2&&w<=F[F.length-1];){_=I.pop();var q=I.pop();F.pop(),T=I.pop(),E.pop();var j=this.startNode(E[E.length-1]);I.push(this.finalize(j,new h.BinaryExpression(q,T,_)))}I.push(this.nextToken().value),F.push(w),E.push(this.lookahead),I.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var z=I.length-1;y=I[z];for(var B=E.pop();z>1;){var Q=E.pop(),R=B&&B.lineStart,j=this.startNode(Q,R),q=I[z-1];y=this.finalize(j,new h.BinaryExpression(q,I[z-2],y)),z-=2,B=Q}}return y},S.prototype.parseConditionalExpression=function(){var O=this.lookahead,y=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var P=this.context.allowIn;this.context.allowIn=!0;var w=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=P,this.expect(":");var E=this.isolateCoverGrammar(this.parseAssignmentExpression);y=this.finalize(this.startNode(O),new h.ConditionalExpression(y,w,E)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return y},S.prototype.checkPatternParam=function(O,y){switch(y.type){case d.Syntax.Identifier:this.validateParam(O,y,y.name);break;case d.Syntax.RestElement:this.checkPatternParam(O,y.argument);break;case d.Syntax.AssignmentPattern:this.checkPatternParam(O,y.left);break;case d.Syntax.ArrayPattern:for(var P=0;P<y.elements.length;P++)y.elements[P]!==null&&this.checkPatternParam(O,y.elements[P]);break;case d.Syntax.ObjectPattern:for(var P=0;P<y.properties.length;P++)this.checkPatternParam(O,y.properties[P].value);break}O.simple=O.simple&&y instanceof h.Identifier},S.prototype.reinterpretAsCoverFormalsList=function(O){var y=[O],P,w=!1;switch(O.type){case d.Syntax.Identifier:break;case m:y=O.params,w=O.async;break;default:return null}P={simple:!0,paramSet:{}};for(var E=0;E<y.length;++E){var T=y[E];T.type===d.Syntax.AssignmentPattern?T.right.type===d.Syntax.YieldExpression&&(T.right.argument&&this.throwUnexpectedToken(this.lookahead),T.right.type=d.Syntax.Identifier,T.right.name="yield",delete T.right.argument,delete T.right.delegate):w&&T.type===d.Syntax.Identifier&&T.name==="await"&&this.throwUnexpectedToken(this.lookahead),this.checkPatternParam(P,T),y[E]=T}if(this.context.strict||!this.context.allowYield)for(var E=0;E<y.length;++E){var T=y[E];T.type===d.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead)}if(P.message===a.Messages.StrictParamDupe){var _=this.context.strict?P.stricted:P.firstRestricted;this.throwUnexpectedToken(_,P.message)}return{simple:P.simple,params:y,stricted:P.stricted,firstRestricted:P.firstRestricted,message:P.message}},S.prototype.parseAssignmentExpression=function(){var O;if(!this.context.allowYield&&this.matchKeyword("yield"))O=this.parseYieldExpression();else{var y=this.lookahead,P=y;if(O=this.parseConditionalExpression(),P.type===3&&P.lineNumber===this.lookahead.lineNumber&&P.value==="async"&&(this.lookahead.type===3||this.matchKeyword("yield"))){var w=this.parsePrimaryExpression();this.reinterpretExpressionAsPattern(w),O={type:m,params:[w],async:!0}}if(O.type===m||this.match("=>")){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var E=O.async,T=this.reinterpretAsCoverFormalsList(O);if(T){this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null;var _=this.context.strict,I=this.context.allowStrictDirective;this.context.allowStrictDirective=T.simple;var F=this.context.allowYield,q=this.context.await;this.context.allowYield=!0,this.context.await=E;var j=this.startNode(y);this.expect("=>");var z=void 0;if(this.match("{")){var B=this.context.allowIn;this.context.allowIn=!0,z=this.parseFunctionSourceElements(),this.context.allowIn=B}else z=this.isolateCoverGrammar(this.parseAssignmentExpression);var Q=z.type!==d.Syntax.BlockStatement;this.context.strict&&T.firstRestricted&&this.throwUnexpectedToken(T.firstRestricted,T.message),this.context.strict&&T.stricted&&this.tolerateUnexpectedToken(T.stricted,T.message),O=E?this.finalize(j,new h.AsyncArrowFunctionExpression(T.params,z,Q)):this.finalize(j,new h.ArrowFunctionExpression(T.params,z,Q)),this.context.strict=_,this.context.allowStrictDirective=I,this.context.allowYield=F,this.context.await=q}}else if(this.matchAssign()){if(this.context.isAssignmentTarget||this.tolerateError(a.Messages.InvalidLHSInAssignment),this.context.strict&&O.type===d.Syntax.Identifier){var R=O;this.scanner.isRestrictedWord(R.name)&&this.tolerateUnexpectedToken(P,a.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(R.name)&&this.tolerateUnexpectedToken(P,a.Messages.StrictReservedWord)}this.match("=")?this.reinterpretExpressionAsPattern(O):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1),P=this.nextToken();var U=P.value,K=this.isolateCoverGrammar(this.parseAssignmentExpression);O=this.finalize(this.startNode(y),new h.AssignmentExpression(U,O,K)),this.context.firstCoverInitializedNameError=null}}return O},S.prototype.parseExpression=function(){var O=this.lookahead,y=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var P=[];for(P.push(y);this.lookahead.type!==2&&this.match(",");)this.nextToken(),P.push(this.isolateCoverGrammar(this.parseAssignmentExpression));y=this.finalize(this.startNode(O),new h.SequenceExpression(P))}return y},S.prototype.parseStatementListItem=function(){var O;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,this.lookahead.type===4)switch(this.lookahead.value){case"export":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,a.Messages.IllegalExportDeclaration),O=this.parseExportDeclaration();break;case"import":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,a.Messages.IllegalImportDeclaration),O=this.parseImportDeclaration();break;case"const":O=this.parseLexicalDeclaration({inFor:!1});break;case"function":O=this.parseFunctionDeclaration();break;case"class":O=this.parseClassDeclaration();break;case"let":O=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:O=this.parseStatement();break}else O=this.parseStatement();return O},S.prototype.parseBlock=function(){var O=this.createNode();this.expect("{");for(var y=[];!this.match("}");)y.push(this.parseStatementListItem());return this.expect("}"),this.finalize(O,new h.BlockStatement(y))},S.prototype.parseLexicalBinding=function(O,y){var P=this.createNode(),w=[],E=this.parsePattern(w,O);this.context.strict&&E.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(E.name)&&this.tolerateError(a.Messages.StrictVarName);var T=null;return O==="const"?!this.matchKeyword("in")&&!this.matchContextualKeyword("of")&&(this.match("=")?(this.nextToken(),T=this.isolateCoverGrammar(this.parseAssignmentExpression)):this.throwError(a.Messages.DeclarationMissingInitializer,"const")):(!y.inFor&&E.type!==d.Syntax.Identifier||this.match("="))&&(this.expect("="),T=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(P,new h.VariableDeclarator(E,T))},S.prototype.parseBindingList=function(O,y){for(var P=[this.parseLexicalBinding(O,y)];this.match(",");)this.nextToken(),P.push(this.parseLexicalBinding(O,y));return P},S.prototype.isLexicalDeclaration=function(){var O=this.scanner.saveState();this.scanner.scanComments();var y=this.scanner.lex();return this.scanner.restoreState(O),y.type===3||y.type===7&&y.value==="["||y.type===7&&y.value==="{"||y.type===4&&y.value==="let"||y.type===4&&y.value==="yield"},S.prototype.parseLexicalDeclaration=function(O){var y=this.createNode(),P=this.nextToken().value;o.assert(P==="let"||P==="const","Lexical declaration must be either let or const");var w=this.parseBindingList(P,O);return this.consumeSemicolon(),this.finalize(y,new h.VariableDeclaration(w,P))},S.prototype.parseBindingRestElement=function(O,y){var P=this.createNode();this.expect("...");var w=this.parsePattern(O,y);return this.finalize(P,new h.RestElement(w))},S.prototype.parseArrayPattern=function(O,y){var P=this.createNode();this.expect("[");for(var w=[];!this.match("]");)if(this.match(","))this.nextToken(),w.push(null);else{if(this.match("...")){w.push(this.parseBindingRestElement(O,y));break}else w.push(this.parsePatternWithDefault(O,y));this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(P,new h.ArrayPattern(w))},S.prototype.parsePropertyPattern=function(O,y){var P=this.createNode(),w=!1,E=!1,T=!1,_,I;if(this.lookahead.type===3){var F=this.lookahead;_=this.parseVariableIdentifier();var q=this.finalize(P,new h.Identifier(F.value));if(this.match("=")){O.push(F),E=!0,this.nextToken();var j=this.parseAssignmentExpression();I=this.finalize(this.startNode(F),new h.AssignmentPattern(q,j))}else this.match(":")?(this.expect(":"),I=this.parsePatternWithDefault(O,y)):(O.push(F),E=!0,I=q)}else w=this.match("["),_=this.parseObjectPropertyKey(),this.expect(":"),I=this.parsePatternWithDefault(O,y);return this.finalize(P,new h.Property("init",_,w,I,T,E))},S.prototype.parseObjectPattern=function(O,y){var P=this.createNode(),w=[];for(this.expect("{");!this.match("}");)w.push(this.parsePropertyPattern(O,y)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(P,new h.ObjectPattern(w))},S.prototype.parsePattern=function(O,y){var P;return this.match("[")?P=this.parseArrayPattern(O,y):this.match("{")?P=this.parseObjectPattern(O,y):(this.matchKeyword("let")&&(y==="const"||y==="let")&&this.tolerateUnexpectedToken(this.lookahead,a.Messages.LetInLexicalBinding),O.push(this.lookahead),P=this.parseVariableIdentifier(y)),P},S.prototype.parsePatternWithDefault=function(O,y){var P=this.lookahead,w=this.parsePattern(O,y);if(this.match("=")){this.nextToken();var E=this.context.allowYield;this.context.allowYield=!0;var T=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=E,w=this.finalize(this.startNode(P),new h.AssignmentPattern(w,T))}return w},S.prototype.parseVariableIdentifier=function(O){var y=this.createNode(),P=this.nextToken();return P.type===4&&P.value==="yield"?this.context.strict?this.tolerateUnexpectedToken(P,a.Messages.StrictReservedWord):this.context.allowYield||this.throwUnexpectedToken(P):P.type!==3?this.context.strict&&P.type===4&&this.scanner.isStrictModeReservedWord(P.value)?this.tolerateUnexpectedToken(P,a.Messages.StrictReservedWord):(this.context.strict||P.value!=="let"||O!=="var")&&this.throwUnexpectedToken(P):(this.context.isModule||this.context.await)&&P.type===3&&P.value==="await"&&this.tolerateUnexpectedToken(P),this.finalize(y,new h.Identifier(P.value))},S.prototype.parseVariableDeclaration=function(O){var y=this.createNode(),P=[],w=this.parsePattern(P,"var");this.context.strict&&w.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(w.name)&&this.tolerateError(a.Messages.StrictVarName);var E=null;return this.match("=")?(this.nextToken(),E=this.isolateCoverGrammar(this.parseAssignmentExpression)):w.type!==d.Syntax.Identifier&&!O.inFor&&this.expect("="),this.finalize(y,new h.VariableDeclarator(w,E))},S.prototype.parseVariableDeclarationList=function(O){var y={inFor:O.inFor},P=[];for(P.push(this.parseVariableDeclaration(y));this.match(",");)this.nextToken(),P.push(this.parseVariableDeclaration(y));return P},S.prototype.parseVariableStatement=function(){var O=this.createNode();this.expectKeyword("var");var y=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(O,new h.VariableDeclaration(y,"var"))},S.prototype.parseEmptyStatement=function(){var O=this.createNode();return this.expect(";"),this.finalize(O,new h.EmptyStatement)},S.prototype.parseExpressionStatement=function(){var O=this.createNode(),y=this.parseExpression();return this.consumeSemicolon(),this.finalize(O,new h.ExpressionStatement(y))},S.prototype.parseIfClause=function(){return this.context.strict&&this.matchKeyword("function")&&this.tolerateError(a.Messages.StrictFunction),this.parseStatement()},S.prototype.parseIfStatement=function(){var O=this.createNode(),y,P=null;this.expectKeyword("if"),this.expect("(");var w=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),y=this.finalize(this.createNode(),new h.EmptyStatement)):(this.expect(")"),y=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),P=this.parseIfClause())),this.finalize(O,new h.IfStatement(w,y,P))},S.prototype.parseDoWhileStatement=function(){var O=this.createNode();this.expectKeyword("do");var y=this.context.inIteration;this.context.inIteration=!0;var P=this.parseStatement();this.context.inIteration=y,this.expectKeyword("while"),this.expect("(");var w=this.parseExpression();return!this.match(")")&&this.config.tolerant?this.tolerateUnexpectedToken(this.nextToken()):(this.expect(")"),this.match(";")&&this.nextToken()),this.finalize(O,new h.DoWhileStatement(P,w))},S.prototype.parseWhileStatement=function(){var O=this.createNode(),y;this.expectKeyword("while"),this.expect("(");var P=this.parseExpression();if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),y=this.finalize(this.createNode(),new h.EmptyStatement);else{this.expect(")");var w=this.context.inIteration;this.context.inIteration=!0,y=this.parseStatement(),this.context.inIteration=w}return this.finalize(O,new h.WhileStatement(P,y))},S.prototype.parseForStatement=function(){var O=null,y=null,P=null,w=!0,E,T,_=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){O=this.createNode(),this.nextToken();var I=this.context.allowIn;this.context.allowIn=!1;var F=this.parseVariableDeclarationList({inFor:!0});if(this.context.allowIn=I,F.length===1&&this.matchKeyword("in")){var q=F[0];q.init&&(q.id.type===d.Syntax.ArrayPattern||q.id.type===d.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(a.Messages.ForInOfLoopInitializer,"for-in"),O=this.finalize(O,new h.VariableDeclaration(F,"var")),this.nextToken(),E=O,T=this.parseExpression(),O=null}else F.length===1&&F[0].init===null&&this.matchContextualKeyword("of")?(O=this.finalize(O,new h.VariableDeclaration(F,"var")),this.nextToken(),E=O,T=this.parseAssignmentExpression(),O=null,w=!1):(O=this.finalize(O,new h.VariableDeclaration(F,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){O=this.createNode();var j=this.nextToken().value;if(!this.context.strict&&this.lookahead.value==="in")O=this.finalize(O,new h.Identifier(j)),this.nextToken(),E=O,T=this.parseExpression(),O=null;else{var I=this.context.allowIn;this.context.allowIn=!1;var F=this.parseBindingList(j,{inFor:!0});this.context.allowIn=I,F.length===1&&F[0].init===null&&this.matchKeyword("in")?(O=this.finalize(O,new h.VariableDeclaration(F,j)),this.nextToken(),E=O,T=this.parseExpression(),O=null):F.length===1&&F[0].init===null&&this.matchContextualKeyword("of")?(O=this.finalize(O,new h.VariableDeclaration(F,j)),this.nextToken(),E=O,T=this.parseAssignmentExpression(),O=null,w=!1):(this.consumeSemicolon(),O=this.finalize(O,new h.VariableDeclaration(F,j)))}}else{var z=this.lookahead,I=this.context.allowIn;if(this.context.allowIn=!1,O=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=I,this.matchKeyword("in"))(!this.context.isAssignmentTarget||O.type===d.Syntax.AssignmentExpression)&&this.tolerateError(a.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(O),E=O,T=this.parseExpression(),O=null;else if(this.matchContextualKeyword("of"))(!this.context.isAssignmentTarget||O.type===d.Syntax.AssignmentExpression)&&this.tolerateError(a.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(O),E=O,T=this.parseAssignmentExpression(),O=null,w=!1;else{if(this.match(",")){for(var B=[O];this.match(",");)this.nextToken(),B.push(this.isolateCoverGrammar(this.parseAssignmentExpression));O=this.finalize(this.startNode(z),new h.SequenceExpression(B))}this.expect(";")}}typeof E>"u"&&(this.match(";")||(y=this.parseExpression()),this.expect(";"),this.match(")")||(P=this.parseExpression()));var Q;if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),Q=this.finalize(this.createNode(),new h.EmptyStatement);else{this.expect(")");var R=this.context.inIteration;this.context.inIteration=!0,Q=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=R}return typeof E>"u"?this.finalize(_,new h.ForStatement(O,y,P,Q)):w?this.finalize(_,new h.ForInStatement(E,T,Q)):this.finalize(_,new h.ForOfStatement(E,T,Q))},S.prototype.parseContinueStatement=function(){var O=this.createNode();this.expectKeyword("continue");var y=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var P=this.parseVariableIdentifier();y=P;var w="$"+P.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,w)||this.throwError(a.Messages.UnknownLabel,P.name)}return this.consumeSemicolon(),y===null&&!this.context.inIteration&&this.throwError(a.Messages.IllegalContinue),this.finalize(O,new h.ContinueStatement(y))},S.prototype.parseBreakStatement=function(){var O=this.createNode();this.expectKeyword("break");var y=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var P=this.parseVariableIdentifier(),w="$"+P.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,w)||this.throwError(a.Messages.UnknownLabel,P.name),y=P}return this.consumeSemicolon(),y===null&&!this.context.inIteration&&!this.context.inSwitch&&this.throwError(a.Messages.IllegalBreak),this.finalize(O,new h.BreakStatement(y))},S.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(a.Messages.IllegalReturn);var O=this.createNode();this.expectKeyword("return");var y=!this.match(";")&&!this.match("}")&&!this.hasLineTerminator&&this.lookahead.type!==2||this.lookahead.type===8||this.lookahead.type===10,P=y?this.parseExpression():null;return this.consumeSemicolon(),this.finalize(O,new h.ReturnStatement(P))},S.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(a.Messages.StrictModeWith);var O=this.createNode(),y;this.expectKeyword("with"),this.expect("(");var P=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),y=this.finalize(this.createNode(),new h.EmptyStatement)):(this.expect(")"),y=this.parseStatement()),this.finalize(O,new h.WithStatement(P,y))},S.prototype.parseSwitchCase=function(){var O=this.createNode(),y;this.matchKeyword("default")?(this.nextToken(),y=null):(this.expectKeyword("case"),y=this.parseExpression()),this.expect(":");for(var P=[];!(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"));)P.push(this.parseStatementListItem());return this.finalize(O,new h.SwitchCase(y,P))},S.prototype.parseSwitchStatement=function(){var O=this.createNode();this.expectKeyword("switch"),this.expect("(");var y=this.parseExpression();this.expect(")");var P=this.context.inSwitch;this.context.inSwitch=!0;var w=[],E=!1;for(this.expect("{");!this.match("}");){var T=this.parseSwitchCase();T.test===null&&(E&&this.throwError(a.Messages.MultipleDefaultsInSwitch),E=!0),w.push(T)}return this.expect("}"),this.context.inSwitch=P,this.finalize(O,new h.SwitchStatement(y,w))},S.prototype.parseLabelledStatement=function(){var O=this.createNode(),y=this.parseExpression(),P;if(y.type===d.Syntax.Identifier&&this.match(":")){this.nextToken();var w=y,E="$"+w.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,E)&&this.throwError(a.Messages.Redeclaration,"Label",w.name),this.context.labelSet[E]=!0;var T=void 0;if(this.matchKeyword("class"))this.tolerateUnexpectedToken(this.lookahead),T=this.parseClassDeclaration();else if(this.matchKeyword("function")){var _=this.lookahead,I=this.parseFunctionDeclaration();this.context.strict?this.tolerateUnexpectedToken(_,a.Messages.StrictFunction):I.generator&&this.tolerateUnexpectedToken(_,a.Messages.GeneratorInLegacyContext),T=I}else T=this.parseStatement();delete this.context.labelSet[E],P=new h.LabeledStatement(w,T)}else this.consumeSemicolon(),P=new h.ExpressionStatement(y);return this.finalize(O,P)},S.prototype.parseThrowStatement=function(){var O=this.createNode();this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(a.Messages.NewlineAfterThrow);var y=this.parseExpression();return this.consumeSemicolon(),this.finalize(O,new h.ThrowStatement(y))},S.prototype.parseCatchClause=function(){var O=this.createNode();this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead);for(var y=[],P=this.parsePattern(y),w={},E=0;E<y.length;E++){var T="$"+y[E].value;Object.prototype.hasOwnProperty.call(w,T)&&this.tolerateError(a.Messages.DuplicateBinding,y[E].value),w[T]=!0}this.context.strict&&P.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(P.name)&&this.tolerateError(a.Messages.StrictCatchVariable),this.expect(")");var _=this.parseBlock();return this.finalize(O,new h.CatchClause(P,_))},S.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},S.prototype.parseTryStatement=function(){var O=this.createNode();this.expectKeyword("try");var y=this.parseBlock(),P=this.matchKeyword("catch")?this.parseCatchClause():null,w=this.matchKeyword("finally")?this.parseFinallyClause():null;return!P&&!w&&this.throwError(a.Messages.NoCatchOrFinally),this.finalize(O,new h.TryStatement(y,P,w))},S.prototype.parseDebuggerStatement=function(){var O=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(O,new h.DebuggerStatement)},S.prototype.parseStatement=function(){var O;switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:O=this.parseExpressionStatement();break;case 7:var y=this.lookahead.value;y==="{"?O=this.parseBlock():y==="("?O=this.parseExpressionStatement():y===";"?O=this.parseEmptyStatement():O=this.parseExpressionStatement();break;case 3:O=this.matchAsyncFunction()?this.parseFunctionDeclaration():this.parseLabelledStatement();break;case 4:switch(this.lookahead.value){case"break":O=this.parseBreakStatement();break;case"continue":O=this.parseContinueStatement();break;case"debugger":O=this.parseDebuggerStatement();break;case"do":O=this.parseDoWhileStatement();break;case"for":O=this.parseForStatement();break;case"function":O=this.parseFunctionDeclaration();break;case"if":O=this.parseIfStatement();break;case"return":O=this.parseReturnStatement();break;case"switch":O=this.parseSwitchStatement();break;case"throw":O=this.parseThrowStatement();break;case"try":O=this.parseTryStatement();break;case"var":O=this.parseVariableStatement();break;case"while":O=this.parseWhileStatement();break;case"with":O=this.parseWithStatement();break;default:O=this.parseExpressionStatement();break}break;default:O=this.throwUnexpectedToken(this.lookahead)}return O},S.prototype.parseFunctionSourceElements=function(){var O=this.createNode();this.expect("{");var y=this.parseDirectivePrologues(),P=this.context.labelSet,w=this.context.inIteration,E=this.context.inSwitch,T=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;this.lookahead.type!==2&&!this.match("}");)y.push(this.parseStatementListItem());return this.expect("}"),this.context.labelSet=P,this.context.inIteration=w,this.context.inSwitch=E,this.context.inFunctionBody=T,this.finalize(O,new h.BlockStatement(y))},S.prototype.validateParam=function(O,y,P){var w="$"+P;this.context.strict?(this.scanner.isRestrictedWord(P)&&(O.stricted=y,O.message=a.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(O.paramSet,w)&&(O.stricted=y,O.message=a.Messages.StrictParamDupe)):O.firstRestricted||(this.scanner.isRestrictedWord(P)?(O.firstRestricted=y,O.message=a.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(P)?(O.firstRestricted=y,O.message=a.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(O.paramSet,w)&&(O.stricted=y,O.message=a.Messages.StrictParamDupe)),typeof Object.defineProperty=="function"?Object.defineProperty(O.paramSet,w,{value:!0,enumerable:!0,writable:!0,configurable:!0}):O.paramSet[w]=!0},S.prototype.parseRestElement=function(O){var y=this.createNode();this.expect("...");var P=this.parsePattern(O);return this.match("=")&&this.throwError(a.Messages.DefaultRestParameter),this.match(")")||this.throwError(a.Messages.ParameterAfterRestParameter),this.finalize(y,new h.RestElement(P))},S.prototype.parseFormalParameter=function(O){for(var y=[],P=this.match("...")?this.parseRestElement(y):this.parsePatternWithDefault(y),w=0;w<y.length;w++)this.validateParam(O,y[w],y[w].value);O.simple=O.simple&&P instanceof h.Identifier,O.params.push(P)},S.prototype.parseFormalParameters=function(O){var y;if(y={simple:!0,params:[],firstRestricted:O},this.expect("("),!this.match(")"))for(y.paramSet={};this.lookahead.type!==2&&(this.parseFormalParameter(y),!(this.match(")")||(this.expect(","),this.match(")")))););return this.expect(")"),{simple:y.simple,params:y.params,stricted:y.stricted,firstRestricted:y.firstRestricted,message:y.message}},S.prototype.matchAsyncFunction=function(){var O=this.matchContextualKeyword("async");if(O){var y=this.scanner.saveState();this.scanner.scanComments();var P=this.scanner.lex();this.scanner.restoreState(y),O=y.lineNumber===P.lineNumber&&P.type===4&&P.value==="function"}return O},S.prototype.parseFunctionDeclaration=function(O){var y=this.createNode(),P=this.matchContextualKeyword("async");P&&this.nextToken(),this.expectKeyword("function");var w=P?!1:this.match("*");w&&this.nextToken();var E,T=null,_=null;if(!O||!this.match("(")){var I=this.lookahead;T=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(I.value)&&this.tolerateUnexpectedToken(I,a.Messages.StrictFunctionName):this.scanner.isRestrictedWord(I.value)?(_=I,E=a.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(I.value)&&(_=I,E=a.Messages.StrictReservedWord)}var F=this.context.await,q=this.context.allowYield;this.context.await=P,this.context.allowYield=!w;var j=this.parseFormalParameters(_),z=j.params,B=j.stricted;_=j.firstRestricted,j.message&&(E=j.message);var Q=this.context.strict,R=this.context.allowStrictDirective;this.context.allowStrictDirective=j.simple;var U=this.parseFunctionSourceElements();return this.context.strict&&_&&this.throwUnexpectedToken(_,E),this.context.strict&&B&&this.tolerateUnexpectedToken(B,E),this.context.strict=Q,this.context.allowStrictDirective=R,this.context.await=F,this.context.allowYield=q,P?this.finalize(y,new h.AsyncFunctionDeclaration(T,z,U)):this.finalize(y,new h.FunctionDeclaration(T,z,U,w))},S.prototype.parseFunctionExpression=function(){var O=this.createNode(),y=this.matchContextualKeyword("async");y&&this.nextToken(),this.expectKeyword("function");var P=y?!1:this.match("*");P&&this.nextToken();var w,E=null,T,_=this.context.await,I=this.context.allowYield;if(this.context.await=y,this.context.allowYield=!P,!this.match("(")){var F=this.lookahead;E=!this.context.strict&&!P&&this.matchKeyword("yield")?this.parseIdentifierName():this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(F.value)&&this.tolerateUnexpectedToken(F,a.Messages.StrictFunctionName):this.scanner.isRestrictedWord(F.value)?(T=F,w=a.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(F.value)&&(T=F,w=a.Messages.StrictReservedWord)}var q=this.parseFormalParameters(T),j=q.params,z=q.stricted;T=q.firstRestricted,q.message&&(w=q.message);var B=this.context.strict,Q=this.context.allowStrictDirective;this.context.allowStrictDirective=q.simple;var R=this.parseFunctionSourceElements();return this.context.strict&&T&&this.throwUnexpectedToken(T,w),this.context.strict&&z&&this.tolerateUnexpectedToken(z,w),this.context.strict=B,this.context.allowStrictDirective=Q,this.context.await=_,this.context.allowYield=I,y?this.finalize(O,new h.AsyncFunctionExpression(E,j,R)):this.finalize(O,new h.FunctionExpression(E,j,R,P))},S.prototype.parseDirective=function(){var O=this.lookahead,y=this.createNode(),P=this.parseExpression(),w=P.type===d.Syntax.Literal?this.getTokenRaw(O).slice(1,-1):null;return this.consumeSemicolon(),this.finalize(y,w?new h.Directive(P,w):new h.ExpressionStatement(P))},S.prototype.parseDirectivePrologues=function(){for(var O=null,y=[];;){var P=this.lookahead;if(P.type!==8)break;var w=this.parseDirective();y.push(w);var E=w.directive;if(typeof E!="string")break;E==="use strict"?(this.context.strict=!0,O&&this.tolerateUnexpectedToken(O,a.Messages.StrictOctalLiteral),this.context.allowStrictDirective||this.tolerateUnexpectedToken(P,a.Messages.IllegalLanguageModeDirective)):!O&&P.octal&&(O=P)}return y},S.prototype.qualifiedPropertyName=function(O){switch(O.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return O.value==="["}return!1},S.prototype.parseGetterMethod=function(){var O=this.createNode(),y=!1,P=this.context.allowYield;this.context.allowYield=!y;var w=this.parseFormalParameters();w.params.length>0&&this.tolerateError(a.Messages.BadGetterArity);var E=this.parsePropertyMethod(w);return this.context.allowYield=P,this.finalize(O,new h.FunctionExpression(null,w.params,E,y))},S.prototype.parseSetterMethod=function(){var O=this.createNode(),y=!1,P=this.context.allowYield;this.context.allowYield=!y;var w=this.parseFormalParameters();w.params.length!==1?this.tolerateError(a.Messages.BadSetterArity):w.params[0]instanceof h.RestElement&&this.tolerateError(a.Messages.BadSetterRestParameter);var E=this.parsePropertyMethod(w);return this.context.allowYield=P,this.finalize(O,new h.FunctionExpression(null,w.params,E,y))},S.prototype.parseGeneratorMethod=function(){var O=this.createNode(),y=!0,P=this.context.allowYield;this.context.allowYield=!0;var w=this.parseFormalParameters();this.context.allowYield=!1;var E=this.parsePropertyMethod(w);return this.context.allowYield=P,this.finalize(O,new h.FunctionExpression(null,w.params,E,y))},S.prototype.isStartOfExpression=function(){var O=!0,y=this.lookahead.value;switch(this.lookahead.type){case 7:O=y==="["||y==="("||y==="{"||y==="+"||y==="-"||y==="!"||y==="~"||y==="++"||y==="--"||y==="/"||y==="/=";break;case 4:O=y==="class"||y==="delete"||y==="function"||y==="let"||y==="new"||y==="super"||y==="this"||y==="typeof"||y==="void"||y==="yield";break}return O},S.prototype.parseYieldExpression=function(){var O=this.createNode();this.expectKeyword("yield");var y=null,P=!1;if(!this.hasLineTerminator){var w=this.context.allowYield;this.context.allowYield=!1,P=this.match("*"),P?(this.nextToken(),y=this.parseAssignmentExpression()):this.isStartOfExpression()&&(y=this.parseAssignmentExpression()),this.context.allowYield=w}return this.finalize(O,new h.YieldExpression(y,P))},S.prototype.parseClassElement=function(O){var y=this.lookahead,P=this.createNode(),w="",E=null,T=null,_=!1,I=!1,F=!1,q=!1;if(this.match("*"))this.nextToken();else{_=this.match("["),E=this.parseObjectPropertyKey();var j=E;if(j.name==="static"&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(y=this.lookahead,F=!0,_=this.match("["),this.match("*")?this.nextToken():E=this.parseObjectPropertyKey()),y.type===3&&!this.hasLineTerminator&&y.value==="async"){var z=this.lookahead.value;z!==":"&&z!=="("&&z!=="*"&&(q=!0,y=this.lookahead,E=this.parseObjectPropertyKey(),y.type===3&&y.value==="constructor"&&this.tolerateUnexpectedToken(y,a.Messages.ConstructorIsAsync))}}var B=this.qualifiedPropertyName(this.lookahead);return y.type===3?y.value==="get"&&B?(w="get",_=this.match("["),E=this.parseObjectPropertyKey(),this.context.allowYield=!1,T=this.parseGetterMethod()):y.value==="set"&&B&&(w="set",_=this.match("["),E=this.parseObjectPropertyKey(),T=this.parseSetterMethod()):y.type===7&&y.value==="*"&&B&&(w="init",_=this.match("["),E=this.parseObjectPropertyKey(),T=this.parseGeneratorMethod(),I=!0),!w&&E&&this.match("(")&&(w="init",T=q?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),I=!0),w||this.throwUnexpectedToken(this.lookahead),w==="init"&&(w="method"),_||(F&&this.isPropertyKey(E,"prototype")&&this.throwUnexpectedToken(y,a.Messages.StaticPrototype),!F&&this.isPropertyKey(E,"constructor")&&((w!=="method"||!I||T&&T.generator)&&this.throwUnexpectedToken(y,a.Messages.ConstructorSpecialMethod),O.value?this.throwUnexpectedToken(y,a.Messages.DuplicateConstructor):O.value=!0,w="constructor")),this.finalize(P,new h.MethodDefinition(E,_,T,w,F))},S.prototype.parseClassElementList=function(){var O=[],y={value:!1};for(this.expect("{");!this.match("}");)this.match(";")?this.nextToken():O.push(this.parseClassElement(y));return this.expect("}"),O},S.prototype.parseClassBody=function(){var O=this.createNode(),y=this.parseClassElementList();return this.finalize(O,new h.ClassBody(y))},S.prototype.parseClassDeclaration=function(O){var y=this.createNode(),P=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var w=O&&this.lookahead.type!==3?null:this.parseVariableIdentifier(),E=null;this.matchKeyword("extends")&&(this.nextToken(),E=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var T=this.parseClassBody();return this.context.strict=P,this.finalize(y,new h.ClassDeclaration(w,E,T))},S.prototype.parseClassExpression=function(){var O=this.createNode(),y=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var P=this.lookahead.type===3?this.parseVariableIdentifier():null,w=null;this.matchKeyword("extends")&&(this.nextToken(),w=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var E=this.parseClassBody();return this.context.strict=y,this.finalize(O,new h.ClassExpression(P,w,E))},S.prototype.parseModule=function(){this.context.strict=!0,this.context.isModule=!0,this.scanner.isModule=!0;for(var O=this.createNode(),y=this.parseDirectivePrologues();this.lookahead.type!==2;)y.push(this.parseStatementListItem());return this.finalize(O,new h.Module(y))},S.prototype.parseScript=function(){for(var O=this.createNode(),y=this.parseDirectivePrologues();this.lookahead.type!==2;)y.push(this.parseStatementListItem());return this.finalize(O,new h.Script(y))},S.prototype.parseModuleSpecifier=function(){var O=this.createNode();this.lookahead.type!==8&&this.throwError(a.Messages.InvalidModuleSpecifier);var y=this.nextToken(),P=this.getTokenRaw(y);return this.finalize(O,new h.Literal(y.value,P))},S.prototype.parseImportSpecifier=function(){var O=this.createNode(),y,P;return this.lookahead.type===3?(y=this.parseVariableIdentifier(),P=y,this.matchContextualKeyword("as")&&(this.nextToken(),P=this.parseVariableIdentifier())):(y=this.parseIdentifierName(),P=y,this.matchContextualKeyword("as")?(this.nextToken(),P=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(O,new h.ImportSpecifier(P,y))},S.prototype.parseNamedImports=function(){this.expect("{");for(var O=[];!this.match("}");)O.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),O},S.prototype.parseImportDefaultSpecifier=function(){var O=this.createNode(),y=this.parseIdentifierName();return this.finalize(O,new h.ImportDefaultSpecifier(y))},S.prototype.parseImportNamespaceSpecifier=function(){var O=this.createNode();this.expect("*"),this.matchContextualKeyword("as")||this.throwError(a.Messages.NoAsAfterImportNamespace),this.nextToken();var y=this.parseIdentifierName();return this.finalize(O,new h.ImportNamespaceSpecifier(y))},S.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(a.Messages.IllegalImportDeclaration);var O=this.createNode();this.expectKeyword("import");var y,P=[];if(this.lookahead.type===8)y=this.parseModuleSpecifier();else{if(this.match("{")?P=P.concat(this.parseNamedImports()):this.match("*")?P.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(P.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?P.push(this.parseImportNamespaceSpecifier()):this.match("{")?P=P.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),!this.matchContextualKeyword("from")){var w=this.lookahead.value?a.Messages.UnexpectedToken:a.Messages.MissingFromClause;this.throwError(w,this.lookahead.value)}this.nextToken(),y=this.parseModuleSpecifier()}return this.consumeSemicolon(),this.finalize(O,new h.ImportDeclaration(P,y))},S.prototype.parseExportSpecifier=function(){var O=this.createNode(),y=this.parseIdentifierName(),P=y;return this.matchContextualKeyword("as")&&(this.nextToken(),P=this.parseIdentifierName()),this.finalize(O,new h.ExportSpecifier(y,P))},S.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(a.Messages.IllegalExportDeclaration);var O=this.createNode();this.expectKeyword("export");var y;if(this.matchKeyword("default"))if(this.nextToken(),this.matchKeyword("function")){var P=this.parseFunctionDeclaration(!0);y=this.finalize(O,new h.ExportDefaultDeclaration(P))}else if(this.matchKeyword("class")){var P=this.parseClassDeclaration(!0);y=this.finalize(O,new h.ExportDefaultDeclaration(P))}else if(this.matchContextualKeyword("async")){var P=this.matchAsyncFunction()?this.parseFunctionDeclaration(!0):this.parseAssignmentExpression();y=this.finalize(O,new h.ExportDefaultDeclaration(P))}else{this.matchContextualKeyword("from")&&this.throwError(a.Messages.UnexpectedToken,this.lookahead.value);var P=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression();this.consumeSemicolon(),y=this.finalize(O,new h.ExportDefaultDeclaration(P))}else if(this.match("*")){if(this.nextToken(),!this.matchContextualKeyword("from")){var w=this.lookahead.value?a.Messages.UnexpectedToken:a.Messages.MissingFromClause;this.throwError(w,this.lookahead.value)}this.nextToken();var E=this.parseModuleSpecifier();this.consumeSemicolon(),y=this.finalize(O,new h.ExportAllDeclaration(E))}else if(this.lookahead.type===4){var P=void 0;switch(this.lookahead.value){case"let":case"const":P=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":P=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}y=this.finalize(O,new h.ExportNamedDeclaration(P,[],null))}else if(this.matchAsyncFunction()){var P=this.parseFunctionDeclaration();y=this.finalize(O,new h.ExportNamedDeclaration(P,[],null))}else{var T=[],_=null,I=!1;for(this.expect("{");!this.match("}");)I=I||this.matchKeyword("default"),T.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");if(this.expect("}"),this.matchContextualKeyword("from"))this.nextToken(),_=this.parseModuleSpecifier(),this.consumeSemicolon();else if(I){var w=this.lookahead.value?a.Messages.UnexpectedToken:a.Messages.MissingFromClause;this.throwError(w,this.lookahead.value)}else this.consumeSemicolon();y=this.finalize(O,new h.ExportNamedDeclaration(null,T,_))}return y},S}();r.Parser=v},function(i,r){Object.defineProperty(r,"__esModule",{value:!0});function n(o,s){if(!o)throw new Error("ASSERT: "+s)}r.assert=n},function(i,r){Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function o(){this.errors=[],this.tolerant=!1}return o.prototype.recordError=function(s){this.errors.push(s)},o.prototype.tolerate=function(s){if(this.tolerant)this.recordError(s);else throw s},o.prototype.constructError=function(s,a){var h=new Error(s);try{throw h}catch(c){Object.create&&Object.defineProperty&&(h=Object.create(c),Object.defineProperty(h,"column",{value:a}))}return h},o.prototype.createError=function(s,a,h,c){var d="Line "+a+": "+c,f=this.constructError(d,h);return f.index=s,f.lineNumber=a,f.description=c,f},o.prototype.throwError=function(s,a,h,c){throw this.createError(s,a,h,c)},o.prototype.tolerateError=function(s,a,h,c){var d=this.createError(s,a,h,c);if(this.tolerant)this.recordError(d);else throw d},o}();r.ErrorHandler=n},function(i,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Messages={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}},function(i,r,n){Object.defineProperty(r,"__esModule",{value:!0});var o=n(9),s=n(4),a=n(11);function h(f){return"0123456789abcdef".indexOf(f.toLowerCase())}function c(f){return"01234567".indexOf(f)}var d=function(){function f(m,v){this.source=m,this.errorHandler=v,this.trackComment=!1,this.isModule=!1,this.length=m.length,this.index=0,this.lineNumber=m.length>0?1:0,this.lineStart=0,this.curlyStack=[]}return f.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart}},f.prototype.restoreState=function(m){this.index=m.index,this.lineNumber=m.lineNumber,this.lineStart=m.lineStart},f.prototype.eof=function(){return this.index>=this.length},f.prototype.throwUnexpectedToken=function(m){return m===void 0&&(m=a.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,m)},f.prototype.tolerateUnexpectedToken=function(m){m===void 0&&(m=a.Messages.UnexpectedTokenIllegal),this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,m)},f.prototype.skipSingleLineComment=function(m){var v=[],S,O;for(this.trackComment&&(v=[],S=this.index-m,O={start:{line:this.lineNumber,column:this.index-this.lineStart-m},end:{}});!this.eof();){var y=this.source.charCodeAt(this.index);if(++this.index,s.Character.isLineTerminator(y)){if(this.trackComment){O.end={line:this.lineNumber,column:this.index-this.lineStart-1};var P={multiLine:!1,slice:[S+m,this.index-1],range:[S,this.index-1],loc:O};v.push(P)}return y===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,v}}if(this.trackComment){O.end={line:this.lineNumber,column:this.index-this.lineStart};var P={multiLine:!1,slice:[S+m,this.index],range:[S,this.index],loc:O};v.push(P)}return v},f.prototype.skipMultiLineComment=function(){var m=[],v,S;for(this.trackComment&&(m=[],v=this.index-2,S={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var O=this.source.charCodeAt(this.index);if(s.Character.isLineTerminator(O))O===13&&this.source.charCodeAt(this.index+1)===10&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(O===42){if(this.source.charCodeAt(this.index+1)===47){if(this.index+=2,this.trackComment){S.end={line:this.lineNumber,column:this.index-this.lineStart};var y={multiLine:!0,slice:[v+2,this.index-2],range:[v,this.index],loc:S};m.push(y)}return m}++this.index}else++this.index}if(this.trackComment){S.end={line:this.lineNumber,column:this.index-this.lineStart};var y={multiLine:!0,slice:[v+2,this.index],range:[v,this.index],loc:S};m.push(y)}return this.tolerateUnexpectedToken(),m},f.prototype.scanComments=function(){var m;this.trackComment&&(m=[]);for(var v=this.index===0;!this.eof();){var S=this.source.charCodeAt(this.index);if(s.Character.isWhiteSpace(S))++this.index;else if(s.Character.isLineTerminator(S))++this.index,S===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,v=!0;else if(S===47)if(S=this.source.charCodeAt(this.index+1),S===47){this.index+=2;var O=this.skipSingleLineComment(2);this.trackComment&&(m=m.concat(O)),v=!0}else if(S===42){this.index+=2;var O=this.skipMultiLineComment();this.trackComment&&(m=m.concat(O))}else break;else if(v&&S===45)if(this.source.charCodeAt(this.index+1)===45&&this.source.charCodeAt(this.index+2)===62){this.index+=3;var O=this.skipSingleLineComment(3);this.trackComment&&(m=m.concat(O))}else break;else if(S===60&&!this.isModule)if(this.source.slice(this.index+1,this.index+4)==="!--"){this.index+=4;var O=this.skipSingleLineComment(4);this.trackComment&&(m=m.concat(O))}else break;else break}return m},f.prototype.isFutureReservedWord=function(m){switch(m){case"enum":case"export":case"import":case"super":return!0;default:return!1}},f.prototype.isStrictModeReservedWord=function(m){switch(m){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},f.prototype.isRestrictedWord=function(m){return m==="eval"||m==="arguments"},f.prototype.isKeyword=function(m){switch(m.length){case 2:return m==="if"||m==="in"||m==="do";case 3:return m==="var"||m==="for"||m==="new"||m==="try"||m==="let";case 4:return m==="this"||m==="else"||m==="case"||m==="void"||m==="with"||m==="enum";case 5:return m==="while"||m==="break"||m==="catch"||m==="throw"||m==="const"||m==="yield"||m==="class"||m==="super";case 6:return m==="return"||m==="typeof"||m==="delete"||m==="switch"||m==="export"||m==="import";case 7:return m==="default"||m==="finally"||m==="extends";case 8:return m==="function"||m==="continue"||m==="debugger";case 10:return m==="instanceof";default:return!1}},f.prototype.codePointAt=function(m){var v=this.source.charCodeAt(m);if(v>=55296&&v<=56319){var S=this.source.charCodeAt(m+1);if(S>=56320&&S<=57343){var O=v;v=(O-55296)*1024+S-56320+65536}}return v},f.prototype.scanHexEscape=function(m){for(var v=m==="u"?4:2,S=0,O=0;O<v;++O)if(!this.eof()&&s.Character.isHexDigit(this.source.charCodeAt(this.index)))S=S*16+h(this.source[this.index++]);else return null;return String.fromCharCode(S)},f.prototype.scanUnicodeCodePointEscape=function(){var m=this.source[this.index],v=0;for(m==="}"&&this.throwUnexpectedToken();!this.eof()&&(m=this.source[this.index++],!!s.Character.isHexDigit(m.charCodeAt(0)));)v=v*16+h(m);return(v>1114111||m!=="}")&&this.throwUnexpectedToken(),s.Character.fromCodePoint(v)},f.prototype.getIdentifier=function(){for(var m=this.index++;!this.eof();){var v=this.source.charCodeAt(this.index);if(v===92)return this.index=m,this.getComplexIdentifier();if(v>=55296&&v<57343)return this.index=m,this.getComplexIdentifier();if(s.Character.isIdentifierPart(v))++this.index;else break}return this.source.slice(m,this.index)},f.prototype.getComplexIdentifier=function(){var m=this.codePointAt(this.index),v=s.Character.fromCodePoint(m);this.index+=v.length;var S;for(m===92&&(this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,S=this.scanUnicodeCodePointEscape()):(S=this.scanHexEscape("u"),(S===null||S==="\\"||!s.Character.isIdentifierStart(S.charCodeAt(0)))&&this.throwUnexpectedToken()),v=S);!this.eof()&&(m=this.codePointAt(this.index),!!s.Character.isIdentifierPart(m));)S=s.Character.fromCodePoint(m),v+=S,this.index+=S.length,m===92&&(v=v.substr(0,v.length-1),this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,S=this.scanUnicodeCodePointEscape()):(S=this.scanHexEscape("u"),(S===null||S==="\\"||!s.Character.isIdentifierPart(S.charCodeAt(0)))&&this.throwUnexpectedToken()),v+=S);return v},f.prototype.octalToDecimal=function(m){var v=m!=="0",S=c(m);return!this.eof()&&s.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(v=!0,S=S*8+c(this.source[this.index++]),"0123".indexOf(m)>=0&&!this.eof()&&s.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(S=S*8+c(this.source[this.index++]))),{code:S,octal:v}},f.prototype.scanIdentifier=function(){var m,v=this.index,S=this.source.charCodeAt(v)===92?this.getComplexIdentifier():this.getIdentifier();if(S.length===1?m=3:this.isKeyword(S)?m=4:S==="null"?m=5:S==="true"||S==="false"?m=1:m=3,m!==3&&v+S.length!==this.index){var O=this.index;this.index=v,this.tolerateUnexpectedToken(a.Messages.InvalidEscapedReservedWord),this.index=O}return{type:m,value:S,lineNumber:this.lineNumber,lineStart:this.lineStart,start:v,end:this.index}},f.prototype.scanPunctuator=function(){var m=this.index,v=this.source[this.index];switch(v){case"(":case"{":v==="{"&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,this.source[this.index]==="."&&this.source[this.index+1]==="."&&(this.index+=2,v="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:v=this.source.substr(this.index,4),v===">>>="?this.index+=4:(v=v.substr(0,3),v==="==="||v==="!=="||v===">>>"||v==="<<="||v===">>="||v==="**="?this.index+=3:(v=v.substr(0,2),v==="&&"||v==="||"||v==="=="||v==="!="||v==="+="||v==="-="||v==="*="||v==="/="||v==="++"||v==="--"||v==="<<"||v===">>"||v==="&="||v==="|="||v==="^="||v==="%="||v==="<="||v===">="||v==="=>"||v==="**"?this.index+=2:(v=this.source[this.index],"<>=!+-*%&|^/".indexOf(v)>=0&&++this.index)))}return this.index===m&&this.throwUnexpectedToken(),{type:7,value:v,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},f.prototype.scanHexLiteral=function(m){for(var v="";!this.eof()&&s.Character.isHexDigit(this.source.charCodeAt(this.index));)v+=this.source[this.index++];return v.length===0&&this.throwUnexpectedToken(),s.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt("0x"+v,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},f.prototype.scanBinaryLiteral=function(m){for(var v="",S;!this.eof()&&(S=this.source[this.index],!(S!=="0"&&S!=="1"));)v+=this.source[this.index++];return v.length===0&&this.throwUnexpectedToken(),this.eof()||(S=this.source.charCodeAt(this.index),(s.Character.isIdentifierStart(S)||s.Character.isDecimalDigit(S))&&this.throwUnexpectedToken()),{type:6,value:parseInt(v,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},f.prototype.scanOctalLiteral=function(m,v){var S="",O=!1;for(s.Character.isOctalDigit(m.charCodeAt(0))?(O=!0,S="0"+this.source[this.index++]):++this.index;!this.eof()&&s.Character.isOctalDigit(this.source.charCodeAt(this.index));)S+=this.source[this.index++];return!O&&S.length===0&&this.throwUnexpectedToken(),(s.Character.isIdentifierStart(this.source.charCodeAt(this.index))||s.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(S,8),octal:O,lineNumber:this.lineNumber,lineStart:this.lineStart,start:v,end:this.index}},f.prototype.isImplicitOctalLiteral=function(){for(var m=this.index+1;m<this.length;++m){var v=this.source[m];if(v==="8"||v==="9")return!1;if(!s.Character.isOctalDigit(v.charCodeAt(0)))return!0}return!0},f.prototype.scanNumericLiteral=function(){var m=this.index,v=this.source[m];o.assert(s.Character.isDecimalDigit(v.charCodeAt(0))||v===".","Numeric literal must start with a decimal digit or a decimal point");var S="";if(v!=="."){if(S=this.source[this.index++],v=this.source[this.index],S==="0"){if(v==="x"||v==="X")return++this.index,this.scanHexLiteral(m);if(v==="b"||v==="B")return++this.index,this.scanBinaryLiteral(m);if(v==="o"||v==="O")return this.scanOctalLiteral(v,m);if(v&&s.Character.isOctalDigit(v.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(v,m)}for(;s.Character.isDecimalDigit(this.source.charCodeAt(this.index));)S+=this.source[this.index++];v=this.source[this.index]}if(v==="."){for(S+=this.source[this.index++];s.Character.isDecimalDigit(this.source.charCodeAt(this.index));)S+=this.source[this.index++];v=this.source[this.index]}if(v==="e"||v==="E")if(S+=this.source[this.index++],v=this.source[this.index],(v==="+"||v==="-")&&(S+=this.source[this.index++]),s.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;s.Character.isDecimalDigit(this.source.charCodeAt(this.index));)S+=this.source[this.index++];else this.throwUnexpectedToken();return s.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(S),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},f.prototype.scanStringLiteral=function(){var m=this.index,v=this.source[m];o.assert(v==="'"||v==='"',"String literal must starts with a quote"),++this.index;for(var S=!1,O="";!this.eof();){var y=this.source[this.index++];if(y===v){v="";break}else if(y==="\\")if(y=this.source[this.index++],!y||!s.Character.isLineTerminator(y.charCodeAt(0)))switch(y){case"u":if(this.source[this.index]==="{")++this.index,O+=this.scanUnicodeCodePointEscape();else{var P=this.scanHexEscape(y);P===null&&this.throwUnexpectedToken(),O+=P}break;case"x":var w=this.scanHexEscape(y);w===null&&this.throwUnexpectedToken(a.Messages.InvalidHexEscapeSequence),O+=w;break;case"n":O+=`
`;break;case"r":O+="\r";break;case"t":O+="	";break;case"b":O+="\b";break;case"f":O+="\f";break;case"v":O+="\v";break;case"8":case"9":O+=y,this.tolerateUnexpectedToken();break;default:if(y&&s.Character.isOctalDigit(y.charCodeAt(0))){var E=this.octalToDecimal(y);S=E.octal||S,O+=String.fromCharCode(E.code)}else O+=y;break}else++this.lineNumber,y==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else{if(s.Character.isLineTerminator(y.charCodeAt(0)))break;O+=y}}return v!==""&&(this.index=m,this.throwUnexpectedToken()),{type:8,value:O,octal:S,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},f.prototype.scanTemplate=function(){var m="",v=!1,S=this.index,O=this.source[S]==="`",y=!1,P=2;for(++this.index;!this.eof();){var w=this.source[this.index++];if(w==="`"){P=1,y=!0,v=!0;break}else if(w==="$"){if(this.source[this.index]==="{"){this.curlyStack.push("${"),++this.index,v=!0;break}m+=w}else if(w==="\\")if(w=this.source[this.index++],s.Character.isLineTerminator(w.charCodeAt(0)))++this.lineNumber,w==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else switch(w){case"n":m+=`
`;break;case"r":m+="\r";break;case"t":m+="	";break;case"u":if(this.source[this.index]==="{")++this.index,m+=this.scanUnicodeCodePointEscape();else{var E=this.index,T=this.scanHexEscape(w);T!==null?m+=T:(this.index=E,m+=w)}break;case"x":var _=this.scanHexEscape(w);_===null&&this.throwUnexpectedToken(a.Messages.InvalidHexEscapeSequence),m+=_;break;case"b":m+="\b";break;case"f":m+="\f";break;case"v":m+="\v";break;default:w==="0"?(s.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(a.Messages.TemplateOctalLiteral),m+="\0"):s.Character.isOctalDigit(w.charCodeAt(0))?this.throwUnexpectedToken(a.Messages.TemplateOctalLiteral):m+=w;break}else s.Character.isLineTerminator(w.charCodeAt(0))?(++this.lineNumber,w==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index,m+=`
`):m+=w}return v||this.throwUnexpectedToken(),O||this.curlyStack.pop(),{type:10,value:this.source.slice(S+1,this.index-P),cooked:m,head:O,tail:y,lineNumber:this.lineNumber,lineStart:this.lineStart,start:S,end:this.index}},f.prototype.testRegExp=function(m,v){var S="\uFFFF",O=m,y=this;v.indexOf("u")>=0&&(O=O.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(P,w,E){var T=parseInt(w||E,16);return T>1114111&&y.throwUnexpectedToken(a.Messages.InvalidRegExp),T<=65535?String.fromCharCode(T):S}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,S));try{RegExp(O)}catch{this.throwUnexpectedToken(a.Messages.InvalidRegExp)}try{return new RegExp(m,v)}catch{return null}},f.prototype.scanRegExpBody=function(){var m=this.source[this.index];o.assert(m==="/","Regular expression literal must start with a slash");for(var v=this.source[this.index++],S=!1,O=!1;!this.eof();)if(m=this.source[this.index++],v+=m,m==="\\")m=this.source[this.index++],s.Character.isLineTerminator(m.charCodeAt(0))&&this.throwUnexpectedToken(a.Messages.UnterminatedRegExp),v+=m;else if(s.Character.isLineTerminator(m.charCodeAt(0)))this.throwUnexpectedToken(a.Messages.UnterminatedRegExp);else if(S)m==="]"&&(S=!1);else if(m==="/"){O=!0;break}else m==="["&&(S=!0);return O||this.throwUnexpectedToken(a.Messages.UnterminatedRegExp),v.substr(1,v.length-2)},f.prototype.scanRegExpFlags=function(){for(var m="",v="";!this.eof();){var S=this.source[this.index];if(!s.Character.isIdentifierPart(S.charCodeAt(0)))break;if(++this.index,S==="\\"&&!this.eof())if(S=this.source[this.index],S==="u"){++this.index;var O=this.index,y=this.scanHexEscape("u");if(y!==null)for(v+=y,m+="\\u";O<this.index;++O)m+=this.source[O];else this.index=O,v+="u",m+="\\u";this.tolerateUnexpectedToken()}else m+="\\",this.tolerateUnexpectedToken();else v+=S,m+=S}return v},f.prototype.scanRegExp=function(){var m=this.index,v=this.scanRegExpBody(),S=this.scanRegExpFlags(),O=this.testRegExp(v,S);return{type:9,value:"",pattern:v,flags:S,regex:O,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},f.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var m=this.source.charCodeAt(this.index);return s.Character.isIdentifierStart(m)?this.scanIdentifier():m===40||m===41||m===59?this.scanPunctuator():m===39||m===34?this.scanStringLiteral():m===46?s.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():s.Character.isDecimalDigit(m)?this.scanNumericLiteral():m===96||m===125&&this.curlyStack[this.curlyStack.length-1]==="${"?this.scanTemplate():m>=55296&&m<57343&&s.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()},f}();r.Scanner=d},function(i,r){Object.defineProperty(r,"__esModule",{value:!0}),r.TokenName={},r.TokenName[1]="Boolean",r.TokenName[2]="<end>",r.TokenName[3]="Identifier",r.TokenName[4]="Keyword",r.TokenName[5]="Null",r.TokenName[6]="Numeric",r.TokenName[7]="Punctuator",r.TokenName[8]="String",r.TokenName[9]="RegularExpression",r.TokenName[10]="Template"},function(i,r){Object.defineProperty(r,"__esModule",{value:!0}),r.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",times:"\xD7",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",divide:"\xF7",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",frasl:"\u2044",euro:"\u20AC",image:"\u2111",weierp:"\u2118",real:"\u211C",trade:"\u2122",alefsym:"\u2135",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lArr:"\u21D0",uArr:"\u21D1",rArr:"\u21D2",dArr:"\u21D3",hArr:"\u21D4",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666",lang:"\u27E8",rang:"\u27E9"}},function(i,r,n){Object.defineProperty(r,"__esModule",{value:!0});var o=n(10),s=n(12),a=n(13),h=function(){function d(){this.values=[],this.curly=this.paren=-1}return d.prototype.beforeFunctionExpression=function(f){return["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(f)>=0},d.prototype.isRegexStart=function(){var f=this.values[this.values.length-1],m=f!==null;switch(f){case"this":case"]":m=!1;break;case")":var v=this.values[this.paren-1];m=v==="if"||v==="while"||v==="for"||v==="with";break;case"}":if(m=!1,this.values[this.curly-3]==="function"){var S=this.values[this.curly-4];m=S?!this.beforeFunctionExpression(S):!1}else if(this.values[this.curly-4]==="function"){var S=this.values[this.curly-5];m=S?!this.beforeFunctionExpression(S):!0}break}return m},d.prototype.push=function(f){f.type===7||f.type===4?(f.value==="{"?this.curly=this.values.length:f.value==="("&&(this.paren=this.values.length),this.values.push(f.value)):this.values.push(null)},d}(),c=function(){function d(f,m){this.errorHandler=new o.ErrorHandler,this.errorHandler.tolerant=m?typeof m.tolerant=="boolean"&&m.tolerant:!1,this.scanner=new s.Scanner(f,this.errorHandler),this.scanner.trackComment=m?typeof m.comment=="boolean"&&m.comment:!1,this.trackRange=m?typeof m.range=="boolean"&&m.range:!1,this.trackLoc=m?typeof m.loc=="boolean"&&m.loc:!1,this.buffer=[],this.reader=new h}return d.prototype.errors=function(){return this.errorHandler.errors},d.prototype.getNextToken=function(){if(this.buffer.length===0){var f=this.scanner.scanComments();if(this.scanner.trackComment)for(var m=0;m<f.length;++m){var v=f[m],S=this.scanner.source.slice(v.slice[0],v.slice[1]),O={type:v.multiLine?"BlockComment":"LineComment",value:S};this.trackRange&&(O.range=v.range),this.trackLoc&&(O.loc=v.loc),this.buffer.push(O)}if(!this.scanner.eof()){var y=void 0;this.trackLoc&&(y={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});var P=this.scanner.source[this.scanner.index]==="/"&&this.reader.isRegexStart(),w=P?this.scanner.scanRegExp():this.scanner.lex();this.reader.push(w);var E={type:a.TokenName[w.type],value:this.scanner.source.slice(w.start,w.end)};if(this.trackRange&&(E.range=[w.start,w.end]),this.trackLoc&&(y.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},E.loc=y),w.type===9){var T=w.pattern,_=w.flags;E.regex={pattern:T,flags:_}}this.buffer.push(E)}}return this.buffer.shift()},d}();r.Tokenizer=c}])})})(Ei);function Ti(e,t){var i=[e],r,n,o,s,a,h,c;for(r=0;r<i.length;r+=1)if(a=i[r],typeof a!="number"){t(a);for(o in a)if(o!=="parent")if(h=a[o],h instanceof Array)for(n=0,s=h.length;n<s;n+=1)c=h[n],c instanceof Object&&(c.parent=a),i.push(c);else h!=null&&typeof h.type=="string"&&(h.parent=a,i.push(h))}}function dP(e,t){const i=document.querySelector("svg");let r=!1,n,o,s;t("mousedown",".translate-handle-trigger",a=>{const h=i.panZoomParams.svgPoint;h({x:a.offsetX,y:a.offsetY}),r=!0,e.transforming=!0,n=Number(a.target.dataset.index),o=e.storedPCB.components[n].pos,s=[],Hd(e).forEach((c,d)=>{if(d!==n)return;const{start:f,ast:m}=c,[v,S]=m.body[0].expression.elements,O=Vd(s);Ti(v,P=>O(P));const y=Vd(s);Ti(S,P=>y(P))}),e.transformUpdate=(c,d)=>{const f=[],m=mP(f);Hd(e).forEach((v,S)=>{if(S!==n)return;const{start:O,ast:y}=v,[P,w]=y.body[0].expression.elements,E=m(O);Ti(P,_=>E(_,c));const T=m(O);Ti(w,_=>T(_,d))}),e.codemirror.view.dispatch({changes:f})}}),t("mousemove","",a=>{if(!r)return;const h=O=>e.gridSize===0||!e.grid?O:Jl(fP(O,e.gridSize),8),c=i.panZoomParams.svgPoint,d=c({x:a.offsetX,y:a.offsetY}),f=o[0]-s[0],m=o[1]-s[1],v=Jl(h(d.x)-f,8),S=Jl(h(d.y)-m,8);pt("TRANSLATE",{x:v,y:S,index:n})}),t("mouseup","",a=>{r=!1,e.transforming=!1}),t("mouseleave","",a=>{r=!1,e.transforming=!1})}const fP=(e,t)=>Math.round(e/t)*t,Jl=(e,t)=>Math.round(e*10**t)/10**t,mP=(e,t)=>i=>{let r=!1,n=!1;return(o,s)=>{if(!n&&o.type==="Literal"&&typeof o.value=="number"){let a=o.range[0];if(o.parent&&o.parent.operator==="/")return;o.parent&&o.parent.operator,o.parent&&o.parent.type==="BinaryExpression"&&(o.parent.operator==="+"||o.parent.operator==="-")&&o.parent.right==o&&(r=!0,a=o.parent.left.range[1]),o.parent&&o.parent.type==="UnaryExpression"&&o.parent.operator==="-"&&(a=o.parent.range[0]);let h=s,c=h<0,d;c?d=`-${Math.abs(h)}`:r?d=`+${h}`:d=`${h}`,e.push({from:a+i,to:o.range[1]+i,insert:d}),n=!0}}},Vd=e=>{let t=!1;return i=>{let r=0;if(i.type==="Literal"&&typeof i.value=="number"){if(i.range[0],i.parent&&i.parent.operator==="/")return;i.parent&&i.parent.operator==="-"&&(t=!0),i.parent&&i.parent.type==="BinaryExpression"&&(i.parent.operator==="+"||i.parent.operator==="-")&&i.parent.right==i&&i.parent.left.range[1],i.parent&&i.parent.type==="UnaryExpression"&&i.parent.operator==="-"&&i.parent.range[0];let n;t?n=-i.value:n=i.value,r=n,r<0?r=-Math.abs(r):r=r,e.push(r)}return r}};function Hd(e){const t=e.codemirror.view.state.doc.toString(),i=Xt(e.codemirror.view.state);let r=[];const n=i.cursor();do{const o=t.slice(n.from,n.to);if(n.name!=="PropertyDefinition"||o!=="translate")continue;n.next(),n.next();const s=t.slice(n.from,n.to);r.push({text:s,start:n.from})}while(n.next());return r.map(o=>({...o,ast:Ei.exports.parseScript(o.text,{range:!0,comment:!0})}))}function OP(e,t){const i=document.querySelector("svg");let r=!1,n,o,s,a;t("mousedown",".draggable-pt",h=>{const c=i.panZoomParams.svgPoint;c({x:h.offsetX,y:h.offsetY}),r=!0,e.transforming=!0,n=Number(h.target.dataset.index),o=[Number(h.target.getAttribute("cx")),Number(h.target.getAttribute("cy"))];const[d,f]=h.target.dataset.text.split(",");s=[...o];const m=Ei.exports.parse(d,{range:!0,comment:!0}).body[0],v=Ei.exports.parse(f,{range:!0,comment:!0}).body[0],S=Jd(s,0);Ti(m,y=>S(y));const O=Jd(s,1);Ti(v,y=>O(y)),a=(y,P,w)=>{const E=e.pts[w],[T,_]=E.text.split(","),I=Ei.exports.parse(T,{range:!0,comment:!0}).body[0],F=Ei.exports.parse(_,{range:!0,comment:!0}).body[0],q=E.start,j=q+T.length+1,z=[],B=yP(z),Q=B(q);Ti(I,U=>Q(U,y));const R=B(j);Ti(F,U=>R(U,P)),e.codemirror.view.dispatch({changes:z}),pt("RUN",{dragging:!0})}}),t("mousemove","",h=>{if(!r)return;const c=y=>e.gridSize===0||!e.grid?y:Kl(gP(y,e.gridSize),8),d=i.panZoomParams.svgPoint,f=d({x:h.offsetX,y:h.offsetY}),m=o[0]-s[0],v=o[1]-s[1],S=Kl(c(f.x)-m,8),O=Kl(c(f.y)-v,8);a(S,O,n)}),t("mouseup","",h=>{r=!1,e.transforming=!1}),t("mouseleave","",h=>{r=!1,e.transforming=!1})}const gP=(e,t)=>Math.round(e/t)*t,Kl=(e,t)=>Math.round(e*10**t)/10**t,yP=(e,t)=>i=>{let r=!1,n=!1;return(o,s)=>{if(!n&&o.type==="Literal"&&typeof o.value=="number"){let a=o.range[0];if(o.parent&&o.parent.operator==="/")return;o.parent&&o.parent.operator,o.parent&&o.parent.type==="BinaryExpression"&&(o.parent.operator==="+"||o.parent.operator==="-")&&o.parent.right==o&&(r=!0,a=o.parent.left.range[1]),o.parent&&o.parent.type==="UnaryExpression"&&o.parent.operator==="-"&&(a=o.parent.range[0]);let h=s,c=h<0,d;c?d=`-${Math.abs(h)}`:r?d=`+${h}`:d=`${h}`,e.push({from:a+i,to:o.range[1]+i,insert:d}),n=!0}}},Jd=(e,t)=>{let i=!1;return r=>{let n=0;if(r.type==="Literal"&&typeof r.value=="number"){if(r.range[0],r.parent&&r.parent.operator==="/")return;r.parent&&r.parent.operator==="-"&&(i=!0),r.parent&&r.parent.type==="BinaryExpression"&&(r.parent.operator==="+"||r.parent.operator==="-")&&r.parent.right==r&&r.parent.left.range[1],r.parent&&r.parent.type==="UnaryExpression"&&r.parent.operator==="-"&&r.parent.range[0];let o;i?o=-r.value:o=r.value,n=o,n<0?n=-Math.abs(n):n=n,e[t]=n}return n}};function xP(e,t){let i=!1;t("mousedown","#vertical-bar",r=>{i=!0}),t("mousemove","",r=>{if(!i)return;let n=r.clientX/window.innerWidth*100;if(n===0)return;const o=1,s=99;n<o&&(n=o),n>s&&(n=s),document.documentElement.style.setProperty("--vertical-bar",`${n}%`),pauseEvent(r)}),t("mouseup","",r=>{i&&pt("RENDER"),i=!1})}function vP(e,t){let i=!1,r=1,n=0,o=0,s={x:0,y:0};function a(f){f.style.transformOrigin=`${0}px ${0}px`,f.style.transform="translate("+n+"px, "+o+"px) scale("+r+")",e.gridSize>0&&pt("RENDER")}function h({x:f,y:m}){let v=(f-n)/r,S=(m-o)/r;return{x:v,y:S}}t("mousedown","",f=>{f.shiftKey||(i=!0,s={x:f.offsetX-n,y:f.offsetY-o},f.detail===2&&console.log(f.offsetX,f.offsetY,h({x:f.offsetX,y:f.offsetY})))}),t("mousemove","",f=>{if(!i||e.transforming)return;n=f.offsetX-s.x,o=f.offsetY-s.y;const m=document.querySelectorAll(".transform-group");for(const v of m)a(v)}),t("mouseup","",f=>{i=!1}),t("wheel","",f=>{let m=(f.offsetX-n)/r,v=(f.offsetY-o)/r;Math.sign(f.deltaY)<0?r*=1.03:r/=1.03,n=f.offsetX-m*r,o=f.offsetY-v*r;const S=document.querySelectorAll(".transform-group");for(const O of S)a(O);f.preventDefault()});function c(f){const m=document.querySelector("svg").getBoundingClientRect(),v=f.x[1]-f.x[0],S=f.y[1]-f.y[0],O=m.width/v,y=m.height/S,P=Math.min(O,y)*.9;r=P;const w={x:(f.x[0]+f.x[1])/2*P-m.width/2,y:(f.y[0]+f.y[1])/2*P-m.height/2};n=-w.x,o=-w.y;const E=document.querySelectorAll(".transform-group");for(const T of E)a(T)}function d(){const f=document.querySelector("svg");if(f===null)return null;const{left:m,right:v,bottom:S,top:O,width:y,height:P}=f.getBoundingClientRect(),w=h({x:y,y:P}),E=h({x:0,y:P}),T=h({x:y,y:0}),_=h({x:0,y:0});return{rt:w,lt:E,rb:T,lb:_}}return{scale:()=>r,x:()=>n,y:()=>o,corners:d,svgPoint:h,setScaleXY:c}}let Kd=0;function PP(e){var t=new FileReader;t.readAsText(e),t.onloadend=i=>{let r=t.result;pt("UPLOAD_COMP",{text:r,name:`component${Kd}`}),Kd++}}function CP(e){var t=new FileReader;t.readAsText(e),t.onloadend=i=>{let r=t.result;pt("UPLOAD_JS",{text:r})}}function SP(e,t=[]){let i=e[0],r=i.name.split(".");r[0];const n=r[r.length-1];if(n==="kicad_mod")PP(i);else if(n==="js")CP(i);else throw Error("Unknown extension:",n)}function wP(e,t){t("drop","",function(i){let r=i.dataTransfer.files;SP(r),pauseEvent(i)}),t("dragover","",function(i){pauseEvent(i)})}function bP(e,t){let i=null,r=null;const n=document.querySelector("svg");t("mousedown","",o=>{!o.shiftKey||(i=n.panZoomParams.svgPoint({x:o.offsetX,y:o.offsetY}))}),t("mousemove","",o=>{document.body.classList.add("no-select"),!!o.shiftKey&&i!==null&&(r=n.panZoomParams.svgPoint({x:o.offsetX,y:o.offsetY}),e.selectBox.start=i,e.selectBox.end=r,pt("RENDER"))}),t("mouseup","",o=>{!o.shiftKey||(document.body.classList.remove("no-select"),i=null,r=null,e.selectBox.start=i,e.selectBox.end=r,pt("RENDER"))})}const tf=e=>/[0-9]/i.test(e)||e===".";function DP(e,t){let i=!1,r,n,o,s,a,h=null,c=!1,d=!1;t("mousedown",".\u037Cd",f=>{const m=e.codemirror.view.state,v=m.doc,S=m.selection.main.head;v.lineAt(S);let{from:O,to:y,text:P}=v.lineAt(S),w=S,E=S;for(;w>O&&tf(P[w-O-1]);)w--;for(;E<y&&tf(P[E-O]);)E++;let T;if(w>O){let _=w;for(;_>O;)if(_--,T=P[_-O],T!==" ")if(T==="+")h=_;else if(T==="-")h=_,d=!0;else{if(["(","[",",","/","*",";","{","=",":"].includes(T))break;c=!0;break}}a=P.slice(w-O,E-O),r=Number(a),d&&(r=-r),i=!0,n=w,s=a.includes("."),o=a.includes(".")?a.split(".")[1].length:1}),t("mousemove","",f=>{if(!i)return;const m=e.codemirror;let v,S=a.length;if(0>f.movementX,s){let O=Math.round(r*10**o)+f.movementX;O=Math.round(O)/10**o,r=O,v=`${Math.abs(r).toFixed(o)}`}else r+=f.movementX,v=`${Math.abs(r)}`;c?(h==null&&(v=(r<0?"-":"+")+v),m.view.dispatch({changes:{from:n,to:n+S,insert:v}}),h!=null&&m.view.dispatch({changes:{from:h,to:h+1,insert:r<0?"-":"+"}})):h!=null?r<0?(m.view.dispatch({changes:{from:n,to:n+S,insert:v}}),m.view.dispatch({changes:{from:h,to:h+1,insert:"-"}})):(m.view.dispatch({changes:{from:h,to:n+S,insert:v}}),n=h,h=null):(r<0&&(v="-"+v),m.view.dispatch({changes:{from:n,to:n+S,insert:v}})),a=v,pt("RUN",{dragging:!0}),pauseEvent(f)}),t("mouseup","",f=>{i=!1,h=null,c=!1,d=!1})}function ta(e,t){const i=new RegExp(`\\/\\*\\s*--\\s*${e}\\s*--\\s*\\*\\/`,"g"),r=t.matchAll(i).next();return r.value!==void 0?r.value.index+r.value[0].length+1:null}function EP(e,t){const i=document.querySelector("svg");let r=!1,n,o;t("mousedown",".footprint-svg, .path-footprint",s=>{r=!0,n=s.target.dataset.index,o=e.codemirror.view.state.doc.toString(),Ei.exports.parseScript(o,{range:!0,comment:!0})}),t("mousemove","",s=>{if(!r)return;const a=i.panZoomParams.svgPoint;a({x:s.offsetX,y:s.offsetY});var h=event.path||event.composedPath&&event.composedPath();if(!h)return;h.some(m=>m.matches&&m.matches("#viewer"));const c=document.querySelector("#viewer").getBoundingClientRect(),d=s.clientX-c.left,f=s.clientY-c.top;e.previewFootprint=[e.footprints[n],[d,f]],pt("RENDER")}),t("mouseup","",s=>{if(e.previewFootprint!==null){const a=document.querySelector("#viewer").getBoundingClientRect(),h=s.clientX-a.left,c=a.bottom-s.clientY,d=i.panZoomParams.svgPoint,f=d({x:h,y:c}),m=e.codemirror.view.state.doc.toString(),v=ta("ADD_COMPONENTS",m);if(v!==null){const S=e.previewFootprint[0][0],O=`board.add(${S}, { translate: pt(${f.x}, ${f.y}), name: ${S} })
`;e.codemirror.view.dispatch({changes:{from:v,insert:O}}),pt("RUN")}}e.previewFootprint=null,r&&pt("RENDER"),r=!1}),t("mouseleave","",s=>{e.previewFootprint=null,r=!1})}function ef(e,t){const i=e.codemirror.view.state.doc.toString();let r=[],n=[];const o=t.cursor();do{const s=i.slice(o.from,o.to);o.name==="CallExpression"&&s.slice(0,2)==="pt"&&r.push([o.from,o.to]),o.name==="CallExpression"&&s.slice(0,4)==="path"&&n.push([o.from,o.to])}while(o.next());return{pts:r,paths:n}}const TP=(e,t)=>Math.round(e/t)*t,AP=(e,t)=>Math.round(e*10**t)/10**t;function kP(e,t){setInterval(()=>_P(e),300);const i=document.querySelector("svg"),r=n=>e.gridSize===0||!e.grid?n:AP(TP(n,e.gridSize),8);t("mousedown","",n=>{if(e.selectedPath===null)return;const o=i.panZoomParams.svgPoint,s=o({x:n.offsetX,y:n.offsetY}),a={x:r(s.x),y:r(s.y)},h=e.codemirror.view.state.doc.toString();let c=e.selectedPath.pathEnd-2;const d=[" ","	",`
`];let f=" ";for(;c>0&&(f=h[c],!!d.includes(f));)c--;if(f===","||f==="("){const m=`
  pt(${a.x}, ${a.y}),`;e.codemirror.view.dispatch({changes:{from:c+1,insert:m}}),pt("RUN")}})}function _P(e){const t=e.codemirror.view.state.doc;let i=t.toString();const r=pc(e.codemirror.view.state,t.length,1e4),{pts:n,paths:o}=ef(e,r);let s=null;o.forEach(a=>{const[h,c]=a;Mt.codemirror.view.state.selection.ranges.some(d=>{const{from:f,to:m}=d;return f>h&&m<c})&&(s={pathStart:h,pathEnd:c,str:i.substr(h,c-h)})}),Mt.selectedPath=s,pt("RENDER")}function IP(e){return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,!1}window.pauseEvent=IP;const rf=e=>e.composedPath()[0],LP=(e,t)=>rf(e).matches(t),nf=e=>(t,i,r)=>{e.addEventListener(t,n=>{n.trigger=rf(n),(i===""||LP(n,i))&&r(n)})};function QP(e){const t=document.querySelector("svg"),i=nf(t);t.panZoomParams=vP(e,i),e.panZoomParams=t.panZoomParams,bP(e,i),dP(e,i),OP(e,i),kP(e,i);const r=document.querySelector("body"),n=nf(r);EP(e,n),wP(e,n),DP(e,n),xP(e,n),n("keydown","",o=>{let s=event.code;s==="Enter"&&event.shiftKey?(event.preventDefault(),pt("RUN")):s==="KeyT"&&event.shiftKey}),window.addEventListener("unload",()=>{const o=e.codemirror.view.state.doc.toString();window.localStorage.setItem("svg-pcb",o)})}const XP=(e,t)=>({F:{pos:[0,0],shape:ui(Or(t)),layers:["F.Cu"],index:1},B:{pos:[0,0],shape:ui(Or(t)),layers:["B.Cu"],index:2},drill:{pos:[0,0],shape:ui(Or(e)),layers:["drill"]}}),$P=([e,t],[i,r])=>[e+i,t+r],NP=([e,t],i)=>[e*Math.cos(i)-t*Math.sin(i),t*Math.cos(i)+e*Math.sin(i)];class FP{constructor({pads:t,layers:i}){this.pads=t,this.layers=i}pad(t){return this.pads[t]}padX(t){return this.pads[t][0]}padY(t){return this.pads[t][1]}get pos(){return this.pads.center}get posX(){return this.pads.center[0]}get posY(){return this.pads.center[1]}}function MP(e,t={}){let i=t.translate||[0,0],r=t.rotate||0,n=t.padLabelSize||.02;const o=r*Math.PI/180,s={},a=[];let h={};for(const c in e){let{pos:d,shape:f,layers:m,origin:v}=e[c];typeof f=="string"&&(f=Vl([],f));let S=[d[0],d[1]];v!==void 0&&(S[0]=v[0],S[1]=v[1]),Zi(f,S),Zi(f,i),ql(f,r,i);let O=$P(NP(d,o),i);s[c]=O,c.includes("drill")||a.push({type:"text",value:c,translate:O,rotate:r,size:n}),m.forEach(y=>{y in h?h[y].push(f):h[y]=[f]})}return s.center=i,h.padLabels=a,new FP({pads:s,layers:h})}class BP{constructor(){this.layers={},this.components=[]}add(t,i={}){const r=i.name||"",n={translate:i.translate||[0,0],rotate:i.rotate||0,padLabelSize:i.padLabelSize||.03,componentLabelSize:i.componentLabelSize||.04},o=MP(t,n);for(const s in o.layers)o.layers[s].forEach(a=>{this.addShape(s,a)});return r!==""&&!r.includes("drill")&&this.addShape("componentLabels",{type:"text",value:r,translate:n.translate,rotate:0,size:n.componentLabelSize}),this.components.push(o),o}addShape(t,i){return i[0]&&(typeof i[0][0]=="number"||typeof i[0][0]=="string")&&(i=Gl(i)),t in this.layers?this.layers[t].push(i):this.layers[t]=[i],this.layers[t]}getLayer(t,i=!1){if(!(t in this.layers))return[];const r=[],n=[],o=[];return this.layers[t].forEach(s=>{s.type==="wire"?o.push({type:"wire",data:ui(s.shape),thickness:s.thickness,shape:s.shape}):Array.isArray(s)?r.push(s):s.type==="text"&&n.push(s)}),i?[ui((()=>{var s;return(s=qd(...r,...o.map(a=>kd(a.shape,a.thickness/2,{endType:"etOpenRound",jointType:"jtRound"}))))!=null?s:[]})()),...n]:[...r.map(ui),...n,...o]}wire(t,i,r="F.Cu"){const n={type:"wire",shape:Gl(t),thickness:i};this.addShape(r,n)}}function se(e){this._line=this._col=this._pos=0,this._stream=e}se.not_whitespace_or_end=/^(\S|$)/,se.space_quote_paren_escaped_or_end=/^(\s|\\|"|'|`|,|\(|\)|$)/,se.string_or_escaped_or_end=/^(\\|"|$)/,se.string_delimiters=/["]/,se.quotes=/['`,]/,se.quotes_map={"'":"quote","`":"quasiquote",",":"unquote"},se.prototype={peek:WP,consume:jP,until:ZP,error:YP,string:zP,atom:qP,quoted:UP,expr:GP,list:VP};function RP(e){var t=new se(e),i=t.expr();return i instanceof Error?i:t.peek()!=""?t.error("Superfluous characters after expression: `"+t.peek()+"`"):i}function YP(e){var t=new Error("Syntax error: "+e);return t.line=this._line+1,t.col=this._col+1,t}function WP(){return this._stream.length==this._pos?"":this._stream[this._pos]}function jP(){if(this._stream.length==this._pos)return"";var e=this._stream[this._pos];return this._pos+=1,e=="\r"?(this.peek()==`
`&&(this._pos+=1,e+=`
`),this._line++,this._col=0):e==`
`?(this._line++,this._col=0):this._col++,e}function ZP(e){for(var t="";!e.test(this.peek());)t+=this.consume();return t}function zP(){for(var e=this.consume(),t="";;){t+=this.until(se.string_or_escaped_or_end);var i=this.peek();if(i=="")return this.error("Unterminated string literal");if(i==e){this.consume();break}if(i=="\\"){this.consume(),i=this.peek(),i=="r"?(this.consume(),t+="\r"):i=="t"?(this.consume(),t+="	"):i=="n"?(this.consume(),t+=`
`):i=="f"?(this.consume(),t+="\f"):i=="b"?(this.consume(),t+="\b"):t+=this.consume();continue}t+=this.consume()}return new String(t)}function qP(){if(se.string_delimiters.test(this.peek()))return this.string();for(var e="";;){e+=this.until(se.space_quote_paren_escaped_or_end);var t=this.peek();if(t=="\\"){this.consume(),e+=this.consume();continue}break}return e}function UP(){var e=this.consume(),t=se.quotes_map[e];t=="unquote"&&this.peek()=="@"&&(this.consume(),t="unquote-splicing",e=",@"),this.until(se.not_whitespace_or_end);var i=this.expr();return i instanceof Error?i:i===""?this.error("Unexpected `"+this.peek()+"` after `"+e+"`"):[t,i]}function GP(){if(this.until(se.not_whitespace_or_end),se.quotes.test(this.peek()))return this.quoted();var e=this.peek()=="("?this.list():this.atom();return this.until(se.not_whitespace_or_end),e}function VP(){if(this.peek()!="(")return this.error("Expected `(` - saw `"+this.peek()+"` instead.");this.consume();var e=[],t=this.expr();if(t instanceof Error)return t;if(t!=="")for(e.push(t);(t=this.expr())!=="";){if(t instanceof Error)return t;e.push(t)}return this.peek()!=")"?this.error("Expected `)` - saw: `"+this.peek()+"`"):(this.consume(),e)}const HP=e=>e.reduce((t,i)=>{let r=i.split(".");return r.length===0?t:r[0]!=="*"?[...t,i]:[...t,`F.${r[1]}`,`B.${r[1]}`]},[]);function JP(e){let t=RP(e),i=1/25.4;const r={};for(const o of t){const s=o[0]==="pad",a=o[2]==="smd",h=o[2]==="thru_hole",c=o[3];if(s&&(a||h)){let d=o[1],f=o[4].slice(1).map(y=>Number(y)*i);f[1]=-f[1];let m=o[o.length-1];m=m?m.slice(1):[],m=HP(m);let v=o[5].slice(1).map(y=>Number(y)*i);const S={rect:()=>Hl(...v),roundrect:()=>Hl(...v),circle:()=>Or(...v)};let O=c in S?S[c]():[];if(r[d]===void 0?r[d]=[{pos:f,shape:O,layers:m}]:r[d].push({pos:f,shape:O,layers:m}),o[o.length-2]?o[o.length-2][0]==="drill":!1){let y=Number(o[o.length-2][1])/25.4,P={pos:f,shape:Or(y),layers:["drill"]};r[`${d}_drill`]===void 0?r[`${d}_drill`]=[P]:r[`${d}_drill`].push(P)}}}let n=Object.entries(r).reduce((o,s)=>{const[a,h]=s;return h.length===1?o[a]=h[0]:h.forEach((c,d)=>{o[`${a}_${d+1}`]=c}),o},{});return Object.keys(n).forEach(o=>{let s="";n[o].shape.forEach(a=>{a.forEach((h,c)=>{const{x:d,y:f}=h;s+=`${c==0?"M":"L"} ${d} ${f} `})}),n[o].shape=s,n[o].layers=["F.Cu"]}),n}const{stringify:KP}=JSON;if(!String.prototype.repeat)throw new Error("String.prototype.repeat is undefined, see https://github.com/davidbonnet/astring#installation");if(!String.prototype.endsWith)throw new Error("String.prototype.endsWith is undefined, see https://github.com/davidbonnet/astring#installation");const qs={"||":3,"&&":4,"|":5,"??":5,"^":6,"&":7,"==":8,"!=":8,"===":8,"!==":8,"<":9,">":9,"<=":9,">=":9,in:9,instanceof:9,"<<":10,">>":10,">>>":10,"+":11,"-":11,"*":12,"%":12,"/":12,"**":13},We=17,tC={ArrayExpression:20,TaggedTemplateExpression:20,ThisExpression:20,Identifier:20,PrivateIdentifier:20,Literal:18,TemplateLiteral:20,Super:20,SequenceExpression:20,MemberExpression:19,ChainExpression:19,CallExpression:19,NewExpression:19,ArrowFunctionExpression:We,ClassExpression:We,FunctionExpression:We,ObjectExpression:We,UpdateExpression:16,UnaryExpression:15,AwaitExpression:15,BinaryExpression:14,LogicalExpression:13,ConditionalExpression:4,AssignmentExpression:3,YieldExpression:2,RestElement:1};function gr(e,t){const{generator:i}=e;if(e.write("("),t!=null&&t.length>0){i[t[0].type](t[0],e);const{length:r}=t;for(let n=1;n<r;n++){const o=t[n];e.write(", "),i[o.type](o,e)}}e.write(")")}function sf(e,t,i,r){const n=e.expressionsPrecedence[t.type];if(n===We)return!0;const o=e.expressionsPrecedence[i.type];return n!==o?!r&&n===15&&o===14&&i.operator==="**"||n<o:n!==13&&n!==14?!1:t.operator==="**"&&i.operator==="**"?!r:r?qs[t.operator]<=qs[i.operator]:qs[t.operator]<qs[i.operator]}function Us(e,t,i,r){const{generator:n}=e;sf(e,t,i,r)?(e.write("("),n[t.type](t,e),e.write(")")):n[t.type](t,e)}function eC(e,t,i,r){const n=t.split(`
`),o=n.length-1;if(e.write(n[0].trim()),o>0){e.write(r);for(let s=1;s<o;s++)e.write(i+n[s].trim()+r);e.write(i+n[o].trim())}}function ue(e,t,i,r){const{length:n}=t;for(let o=0;o<n;o++){const s=t[o];e.write(i),s.type[0]==="L"?e.write("// "+s.value.trim()+`
`,s):(e.write("/*"),eC(e,s.value,i,r),e.write("*/"+r))}}function iC(e){let t=e;for(;t!=null;){const{type:i}=t;if(i[0]==="C"&&i[1]==="a")return!0;if(i[0]==="M"&&i[1]==="e"&&i[2]==="m")t=t.object;else return!1}}function ea(e,t){const{generator:i}=e,{declarations:r}=t;e.write(t.kind+" ");const{length:n}=r;if(n>0){i.VariableDeclarator(r[0],e);for(let o=1;o<n;o++)e.write(", "),i.VariableDeclarator(r[o],e)}}let of,lf,af,hf,uf,cf;const rC={Program(e,t){const i=t.indent.repeat(t.indentLevel),{lineEnd:r,writeComments:n}=t;n&&e.comments!=null&&ue(t,e.comments,i,r);const o=e.body,{length:s}=o;for(let a=0;a<s;a++){const h=o[a];n&&h.comments!=null&&ue(t,h.comments,i,r),t.write(i),this[h.type](h,t),t.write(r)}n&&e.trailingComments!=null&&ue(t,e.trailingComments,i,r)},BlockStatement:cf=function(e,t){const i=t.indent.repeat(t.indentLevel++),{lineEnd:r,writeComments:n}=t,o=i+t.indent;t.write("{");const s=e.body;if(s!=null&&s.length>0){t.write(r),n&&e.comments!=null&&ue(t,e.comments,o,r);const{length:a}=s;for(let h=0;h<a;h++){const c=s[h];n&&c.comments!=null&&ue(t,c.comments,o,r),t.write(o),this[c.type](c,t),t.write(r)}t.write(i)}else n&&e.comments!=null&&(t.write(r),ue(t,e.comments,o,r),t.write(i));n&&e.trailingComments!=null&&ue(t,e.trailingComments,o,r),t.write("}"),t.indentLevel--},ClassBody:cf,StaticBlock(e,t){t.write("static "),this.BlockStatement(e,t)},EmptyStatement(e,t){t.write(";")},ExpressionStatement(e,t){const i=t.expressionsPrecedence[e.expression.type];i===We||i===3&&e.expression.left.type[0]==="O"?(t.write("("),this[e.expression.type](e.expression,t),t.write(")")):this[e.expression.type](e.expression,t),t.write(";")},IfStatement(e,t){t.write("if ("),this[e.test.type](e.test,t),t.write(") "),this[e.consequent.type](e.consequent,t),e.alternate!=null&&(t.write(" else "),this[e.alternate.type](e.alternate,t))},LabeledStatement(e,t){this[e.label.type](e.label,t),t.write(": "),this[e.body.type](e.body,t)},BreakStatement(e,t){t.write("break"),e.label!=null&&(t.write(" "),this[e.label.type](e.label,t)),t.write(";")},ContinueStatement(e,t){t.write("continue"),e.label!=null&&(t.write(" "),this[e.label.type](e.label,t)),t.write(";")},WithStatement(e,t){t.write("with ("),this[e.object.type](e.object,t),t.write(") "),this[e.body.type](e.body,t)},SwitchStatement(e,t){const i=t.indent.repeat(t.indentLevel++),{lineEnd:r,writeComments:n}=t;t.indentLevel++;const o=i+t.indent,s=o+t.indent;t.write("switch ("),this[e.discriminant.type](e.discriminant,t),t.write(") {"+r);const{cases:a}=e,{length:h}=a;for(let c=0;c<h;c++){const d=a[c];n&&d.comments!=null&&ue(t,d.comments,o,r),d.test?(t.write(o+"case "),this[d.test.type](d.test,t),t.write(":"+r)):t.write(o+"default:"+r);const{consequent:f}=d,{length:m}=f;for(let v=0;v<m;v++){const S=f[v];n&&S.comments!=null&&ue(t,S.comments,s,r),t.write(s),this[S.type](S,t),t.write(r)}}t.indentLevel-=2,t.write(i+"}")},ReturnStatement(e,t){t.write("return"),e.argument&&(t.write(" "),this[e.argument.type](e.argument,t)),t.write(";")},ThrowStatement(e,t){t.write("throw "),this[e.argument.type](e.argument,t),t.write(";")},TryStatement(e,t){if(t.write("try "),this[e.block.type](e.block,t),e.handler){const{handler:i}=e;i.param==null?t.write(" catch "):(t.write(" catch ("),this[i.param.type](i.param,t),t.write(") ")),this[i.body.type](i.body,t)}e.finalizer&&(t.write(" finally "),this[e.finalizer.type](e.finalizer,t))},WhileStatement(e,t){t.write("while ("),this[e.test.type](e.test,t),t.write(") "),this[e.body.type](e.body,t)},DoWhileStatement(e,t){t.write("do "),this[e.body.type](e.body,t),t.write(" while ("),this[e.test.type](e.test,t),t.write(");")},ForStatement(e,t){if(t.write("for ("),e.init!=null){const{init:i}=e;i.type[0]==="V"?ea(t,i):this[i.type](i,t)}t.write("; "),e.test&&this[e.test.type](e.test,t),t.write("; "),e.update&&this[e.update.type](e.update,t),t.write(") "),this[e.body.type](e.body,t)},ForInStatement:of=function(e,t){t.write(`for ${e.await?"await ":""}(`);const{left:i}=e;i.type[0]==="V"?ea(t,i):this[i.type](i,t),t.write(e.type[3]==="I"?" in ":" of "),this[e.right.type](e.right,t),t.write(") "),this[e.body.type](e.body,t)},ForOfStatement:of,DebuggerStatement(e,t){t.write("debugger;",e)},FunctionDeclaration:lf=function(e,t){t.write((e.async?"async ":"")+(e.generator?"function* ":"function ")+(e.id?e.id.name:""),e),gr(t,e.params),t.write(" "),this[e.body.type](e.body,t)},FunctionExpression:lf,VariableDeclaration(e,t){ea(t,e),t.write(";")},VariableDeclarator(e,t){this[e.id.type](e.id,t),e.init!=null&&(t.write(" = "),this[e.init.type](e.init,t))},ClassDeclaration(e,t){if(t.write("class "+(e.id?`${e.id.name} `:""),e),e.superClass){t.write("extends ");const{superClass:i}=e,{type:r}=i,n=t.expressionsPrecedence[r];(r[0]!=="C"||r[1]!=="l"||r[5]!=="E")&&(n===We||n<t.expressionsPrecedence.ClassExpression)?(t.write("("),this[e.superClass.type](i,t),t.write(")")):this[i.type](i,t),t.write(" ")}this.ClassBody(e.body,t)},ImportDeclaration(e,t){t.write("import ");const{specifiers:i}=e,{length:r}=i;let n=0;if(r>0){for(;n<r;){n>0&&t.write(", ");const o=i[n],s=o.type[6];if(s==="D")t.write(o.local.name,o),n++;else if(s==="N")t.write("* as "+o.local.name,o),n++;else break}if(n<r){for(t.write("{");;){const o=i[n],{name:s}=o.imported;if(t.write(s,o),s!==o.local.name&&t.write(" as "+o.local.name),++n<r)t.write(", ");else break}t.write("}")}t.write(" from ")}this.Literal(e.source,t),t.write(";")},ImportExpression(e,t){t.write("import("),this[e.source.type](e.source,t),t.write(")")},ExportDefaultDeclaration(e,t){t.write("export default "),this[e.declaration.type](e.declaration,t),t.expressionsPrecedence[e.declaration.type]!=null&&e.declaration.type[0]!=="F"&&t.write(";")},ExportNamedDeclaration(e,t){if(t.write("export "),e.declaration)this[e.declaration.type](e.declaration,t);else{t.write("{");const{specifiers:i}=e,{length:r}=i;if(r>0)for(let n=0;;){const o=i[n],{name:s}=o.local;if(t.write(s,o),s!==o.exported.name&&t.write(" as "+o.exported.name),++n<r)t.write(", ");else break}t.write("}"),e.source&&(t.write(" from "),this.Literal(e.source,t)),t.write(";")}},ExportAllDeclaration(e,t){e.exported!=null?t.write("export * as "+e.exported.name+" from "):t.write("export * from "),this.Literal(e.source,t),t.write(";")},MethodDefinition(e,t){e.static&&t.write("static ");const i=e.kind[0];(i==="g"||i==="s")&&t.write(e.kind+" "),e.value.async&&t.write("async "),e.value.generator&&t.write("*"),e.computed?(t.write("["),this[e.key.type](e.key,t),t.write("]")):this[e.key.type](e.key,t),gr(t,e.value.params),t.write(" "),this[e.value.body.type](e.value.body,t)},ClassExpression(e,t){this.ClassDeclaration(e,t)},ArrowFunctionExpression(e,t){t.write(e.async?"async ":"",e);const{params:i}=e;i!=null&&(i.length===1&&i[0].type[0]==="I"?t.write(i[0].name,i[0]):gr(t,e.params)),t.write(" => "),e.body.type[0]==="O"?(t.write("("),this.ObjectExpression(e.body,t),t.write(")")):this[e.body.type](e.body,t)},ThisExpression(e,t){t.write("this",e)},Super(e,t){t.write("super",e)},RestElement:af=function(e,t){t.write("..."),this[e.argument.type](e.argument,t)},SpreadElement:af,YieldExpression(e,t){t.write(e.delegate?"yield*":"yield"),e.argument&&(t.write(" "),this[e.argument.type](e.argument,t))},AwaitExpression(e,t){t.write("await ",e),Us(t,e.argument,e)},TemplateLiteral(e,t){const{quasis:i,expressions:r}=e;t.write("`");const{length:n}=r;for(let s=0;s<n;s++){const a=r[s],h=i[s];t.write(h.value.raw,h),t.write("${"),this[a.type](a,t),t.write("}")}const o=i[i.length-1];t.write(o.value.raw,o),t.write("`")},TemplateElement(e,t){t.write(e.value.raw,e)},TaggedTemplateExpression(e,t){Us(t,e.tag,e),this[e.quasi.type](e.quasi,t)},ArrayExpression:uf=function(e,t){if(t.write("["),e.elements.length>0){const{elements:i}=e,{length:r}=i;for(let n=0;;){const o=i[n];if(o!=null&&this[o.type](o,t),++n<r)t.write(", ");else{o==null&&t.write(", ");break}}}t.write("]")},ArrayPattern:uf,ObjectExpression(e,t){const i=t.indent.repeat(t.indentLevel++),{lineEnd:r,writeComments:n}=t,o=i+t.indent;if(t.write("{"),e.properties.length>0){t.write(r),n&&e.comments!=null&&ue(t,e.comments,o,r);const s=","+r,{properties:a}=e,{length:h}=a;for(let c=0;;){const d=a[c];if(n&&d.comments!=null&&ue(t,d.comments,o,r),t.write(o),this[d.type](d,t),++c<h)t.write(s);else break}t.write(r),n&&e.trailingComments!=null&&ue(t,e.trailingComments,o,r),t.write(i+"}")}else n?e.comments!=null?(t.write(r),ue(t,e.comments,o,r),e.trailingComments!=null&&ue(t,e.trailingComments,o,r),t.write(i+"}")):e.trailingComments!=null?(t.write(r),ue(t,e.trailingComments,o,r),t.write(i+"}")):t.write("}"):t.write("}");t.indentLevel--},Property(e,t){e.method||e.kind[0]!=="i"?this.MethodDefinition(e,t):(e.shorthand||(e.computed?(t.write("["),this[e.key.type](e.key,t),t.write("]")):this[e.key.type](e.key,t),t.write(": ")),this[e.value.type](e.value,t))},PropertyDefinition(e,t){e.static&&t.write("static "),this[e.key.type](e.key,t),e.value!=null&&(t.write(" = "),this[e.value.type](e.value,t))},ObjectPattern(e,t){if(t.write("{"),e.properties.length>0){const{properties:i}=e,{length:r}=i;for(let n=0;this[i[n].type](i[n],t),++n<r;)t.write(", ")}t.write("}")},SequenceExpression(e,t){gr(t,e.expressions)},UnaryExpression(e,t){if(e.prefix){const{operator:i,argument:r,argument:{type:n}}=e;t.write(i);const o=sf(t,r,e);!o&&(i.length>1||n[0]==="U"&&(n[1]==="n"||n[1]==="p")&&r.prefix&&r.operator[0]===i&&(i==="+"||i==="-"))&&t.write(" "),o?(t.write(i.length>1?" (":"("),this[n](r,t),t.write(")")):this[n](r,t)}else this[e.argument.type](e.argument,t),t.write(e.operator)},UpdateExpression(e,t){e.prefix?(t.write(e.operator),this[e.argument.type](e.argument,t)):(this[e.argument.type](e.argument,t),t.write(e.operator))},AssignmentExpression(e,t){this[e.left.type](e.left,t),t.write(" "+e.operator+" "),this[e.right.type](e.right,t)},AssignmentPattern(e,t){this[e.left.type](e.left,t),t.write(" = "),this[e.right.type](e.right,t)},BinaryExpression:hf=function(e,t){const i=e.operator==="in";i&&t.write("("),Us(t,e.left,e,!1),t.write(" "+e.operator+" "),Us(t,e.right,e,!0),i&&t.write(")")},LogicalExpression:hf,ConditionalExpression(e,t){const{test:i}=e,r=t.expressionsPrecedence[i.type];r===We||r<=t.expressionsPrecedence.ConditionalExpression?(t.write("("),this[i.type](i,t),t.write(")")):this[i.type](i,t),t.write(" ? "),this[e.consequent.type](e.consequent,t),t.write(" : "),this[e.alternate.type](e.alternate,t)},NewExpression(e,t){t.write("new ");const i=t.expressionsPrecedence[e.callee.type];i===We||i<t.expressionsPrecedence.CallExpression||iC(e.callee)?(t.write("("),this[e.callee.type](e.callee,t),t.write(")")):this[e.callee.type](e.callee,t),gr(t,e.arguments)},CallExpression(e,t){const i=t.expressionsPrecedence[e.callee.type];i===We||i<t.expressionsPrecedence.CallExpression?(t.write("("),this[e.callee.type](e.callee,t),t.write(")")):this[e.callee.type](e.callee,t),e.optional&&t.write("?."),gr(t,e.arguments)},ChainExpression(e,t){this[e.expression.type](e.expression,t)},MemberExpression(e,t){const i=t.expressionsPrecedence[e.object.type];i===We||i<t.expressionsPrecedence.MemberExpression?(t.write("("),this[e.object.type](e.object,t),t.write(")")):this[e.object.type](e.object,t),e.computed?(e.optional&&t.write("?."),t.write("["),this[e.property.type](e.property,t),t.write("]")):(e.optional?t.write("?."):t.write("."),this[e.property.type](e.property,t))},MetaProperty(e,t){t.write(e.meta.name+"."+e.property.name,e)},Identifier(e,t){t.write(e.name,e)},PrivateIdentifier(e,t){t.write(`#${e.name}`,e)},Literal(e,t){e.raw!=null?t.write(e.raw,e):e.regex!=null?this.RegExpLiteral(e,t):e.bigint!=null?t.write(e.bigint+"n",e):t.write(KP(e.value),e)},RegExpLiteral(e,t){const{regex:i}=e;t.write(`/${i.pattern}/${i.flags}`,e)}},nC={};class sC{constructor(t){const i=t==null?nC:t;this.output="",i.output!=null?(this.output=i.output,this.write=this.writeToStream):this.output="",this.generator=i.generator!=null?i.generator:rC,this.expressionsPrecedence=i.expressionsPrecedence!=null?i.expressionsPrecedence:tC,this.indent=i.indent!=null?i.indent:"  ",this.lineEnd=i.lineEnd!=null?i.lineEnd:`
`,this.indentLevel=i.startingIndentLevel!=null?i.startingIndentLevel:0,this.writeComments=i.comments?i.comments:!1,i.sourceMap!=null&&(this.write=i.output==null?this.writeAndMap:this.writeToStreamAndMap,this.sourceMap=i.sourceMap,this.line=1,this.column=0,this.lineEndSize=this.lineEnd.split(`
`).length-1,this.mapping={original:null,generated:this,name:void 0,source:i.sourceMap.file||i.sourceMap._file})}write(t){this.output+=t}writeToStream(t){this.output.write(t)}writeAndMap(t,i){this.output+=t,this.map(t,i)}writeToStreamAndMap(t,i){this.output.write(t),this.map(t,i)}map(t,i){if(i!=null){const{type:o}=i;if(o[0]==="L"&&o[2]==="n"){this.column=0,this.line++;return}if(i.loc!=null){const{mapping:s}=this;s.original=i.loc.start,s.name=i.name,this.sourceMap.addMapping(s)}if(o[0]==="T"&&o[8]==="E"||o[0]==="L"&&o[1]==="i"&&typeof i.value=="string"){const{length:s}=t;let{column:a,line:h}=this;for(let c=0;c<s;c++)t[c]===`
`?(a=0,h++):a++;this.column=a,this.line=h;return}}const{length:r}=t,{lineEnd:n}=this;r>0&&(this.lineEndSize>0&&(n.length===1?t[r-1]===n:t.endsWith(n))?(this.line+=this.lineEndSize,this.column=0):this.column+=r)}toString(){return this.output}}function oC(e,t){const i=new sC(t);return i.generator[e.type](e,i),i.output}function lC(e){const t=[];for(const o in e){const s=e[o];if(!s.layers.includes("F.Cu"))continue;let a=[s.pos[0],s.pos[1]];s.origin!=null&&(a[0]=s.origin[0],a[1]=s.origin[1]),t.push(...Zi(Vl([],s.shape),a))}const i=Ud(t),r=Gd(t);zi(t,"cc");const n=Math.max(i,r);return Zi(t,zi(t,"cc"),[-25,-25]),Yd(t,[40/n,40/n],zi(t,"cc")),t}const aC=e=>{let t=!1;return e.type!=="ObjectExpression"?!1:(e.properties.forEach(i=>{if(i.value.type!=="ObjectExpression")return;const r=i.value.properties.map(n=>n.key.value);t=t||["shape","pos","layers"].every(n=>r.includes(n))}),t)};function hC(e,t){e.type==="VariableDeclaration"&&e.declarations.forEach(i=>{if(i.type==="VariableDeclarator"&&aC(i.init)){const r=oC(i.init);try{const n=JSON.parse(r),o=[i.id.name,n,lC(n)];t.push(o)}catch{}}})}function uC(e){const t=Ei.exports.parseScript(e,{range:!0,comment:!0}),i=[];return t.body.forEach(r=>{hC(r,i)}),{footprints:i}}const ia={shapes:[],limits:{x:[0,1],y:[0,1]},mm_per_unit:25.4};function cC({shapes:e,limits:t,mm_per_unit:i}){e===void 0&&(e=ia.shapes),t===void 0&&(t=ia.limits),i===void 0&&(i=ia.mm_per_unit),Mt.shapes=e,Mt.limits=t,Mt.mm_per_unit=i}function pC(e){var t,i,r,n;const o=(t=e.d)!=null?t:"",s=(i=e.stroke)!=null?i:"black",a=(r=e.fill)!=null?r:"none",h=(n=e.strokeWidth)!=null?n:.03;Mt.paths.push({d:o,stroke:s,fill:a,strokeWidth:h})}const ra={pcb:null,layerColors:{"F.Cu":"#ff8c00cc"},limits:{x:[0,1],y:[0,1]},mm_per_unit:25.4},dC=e=>({pcb:t,layerColors:i,limits:r,mm_per_unit:n})=>{t===void 0&&console.log("renderPCB must include pcb param"),i===void 0&&(i=ra.layerColors),r===void 0&&(r=ra.limits),n===void 0&&(n=ra.mm_per_unit);const o=[];for(const s in i)o.push({data:t.getLayer(s,e),color:i[s],groupId:s});Mt.shapes=o,Mt.limits=r,Mt.mm_per_unit=n};async function fC(e,t){const i=await(await fetch(e,{mode:"cors"})).text();t.codemirror.view.dispatch({changes:{from:0,insert:i}});const r=a=>a.includes("return kicadToObj("),n=t.codemirror.view.state.doc.toString().split(`
`);let o=0,s=0;for(;;){const a=n[o];if(!a||(s+=a.length,o>n.length)||n[o]==="`)})()"&&!r(n[o+1]))break;o++}t.codemirror.foldRange(0,s+o),pt("RUN"),document.querySelector(".center-button").click()}const mC=`/* -- DECLARE_COMPONENTS -- */
const Molex_serial = {"Rx":{"shape":"M -0.015499999999999998 0.026500000000000003L 0.015500000000000002 0.026500000000000003L 0.015500000000000005 -0.026499999999999996L -0.015499999999999991 -0.026500000000000003L -0.015500000000000005 0.026499999999999996","pos":[-0.075,0.064],"layers":["F.Cu"],"index":1},"Tx":{"shape":"M -0.015499999999999998 0.026500000000000003L 0.015500000000000002 0.026500000000000003L 0.015500000000000005 -0.026499999999999996L -0.015499999999999991 -0.026500000000000003L -0.015500000000000005 0.026499999999999996","pos":[-0.025,0.064],"layers":["F.Cu"],"index":2},"DTR":{"shape":"M -0.015499999999999998 0.026500000000000003L 0.015500000000000002 0.026500000000000003L 0.015500000000000005 -0.026499999999999996L -0.015499999999999991 -0.026500000000000003L -0.015500000000000005 0.026499999999999996","pos":[0.025,0.064],"layers":["F.Cu"],"index":3},"GND":{"shape":"M -0.015499999999999998 0.026500000000000003L 0.015500000000000002 0.026500000000000003L 0.015500000000000005 -0.026499999999999996L -0.015499999999999991 -0.026500000000000003L -0.015500000000000005 0.026499999999999996","pos":[0.075,0.064],"layers":["F.Cu"],"index":4},"NC1":{"shape":"M -0.055 0.065L 0.055 0.065L 0.055000000000000014 -0.065L -0.055 -0.065L -0.055000000000000014 0.065","pos":[-0.16,-0.065],"layers":["F.Cu"],"index":0},"NC2":{"shape":"M -0.055 0.065L 0.055 0.065L 0.055000000000000014 -0.065L -0.055 -0.065L -0.055000000000000014 0.065","pos":[0.16,-0.065],"layers":["F.Cu"],"index":0}}
const DRV8428_HTSSOP = {"VM":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966 M -0.029 -0.0053L -0.028815032667476745 -0.005296771383201207L -0.028630290689156138 -0.005287089466377069L -0.028445999144681437 -0.005270966045451849L -0.028262382564911655 -0.005248420764330322L -0.02807966465836527 -0.0052194810909647026L -0.027898068038665878 -0.00518418228388917L -0.027717813953321763 -0.005142567349262782L -0.027539122014169908 -0.00509468698847309L -0.02736220992981278 -0.005040599536364314L -0.027187293240373958 -0.004980370890165314L -0.02701458505489567 -0.004914074429203974L -0.02684429579169826 -0.004841790925505785L -0.02667663292201789 -0.004763608445385585L -0.02651180071723478 -0.0046796222421523126L -0.026350000000000002 -0.004589934640057525L -0.026191427899564017 -0.004494654909629058L -0.026036277611605044 -0.00439389913454172L -0.025884738162849894 -0.004287790070187222L -0.025736994180774013 -0.004176456994115627L -0.025593225668661342 -0.004060035548530584L -0.025453607786298054 -0.00393866757503019L -0.025318310636567316 -0.0038125009417948512L -0.02518749905820515 -0.003681689363432686L -0.02506133242496981 -0.003546392213701949L -0.02493996445146942 -0.0034067743313386583L -0.024823543005884376 -0.003263005819225989L -0.02471220992981278 -0.0031152618371501077L -0.02460610086545828 -0.002963722388394958L -0.024505345090370945 -0.002808572100435986L -0.024410065359942477 -0.002650000000000001L -0.024320377757847688 -0.002488199282765222L -0.024236391554614416 -0.002323367077982111L -0.024158209074494216 -0.0021557042083017413L -0.02408592557079603 -0.001985414945104333L -0.024019629109834687 -0.0018127067596260447L -0.023959400463635688 -0.0016377900701872211L -0.023905313011526912 -0.0014608779858300957L -0.02385743265073722 -0.0012821860466782397L -0.023815817716110833 -0.0011019319613341256L -0.0237805189090353 -0.0009203353416347322L -0.02375157923566968 -0.0007376174350883485L -0.023729033954548152 -0.0005540008553185632L -0.023712910533622934 -0.0003697093108438647L -0.023703228616798792 -0.00018496733252325575L -0.023700000000000002 -8.673617379884035e-19L -0.023703228616798792 0.00018496733252325401L -0.023712910533622934 0.00036970931084386385L -0.023729033954548152 0.0005540008553185632L -0.02375157923566968 0.0007376174350883467L -0.0237805189090353 0.0009203353416347313L -0.023815817716110833 0.001101931961334123L -0.02385743265073722 0.0012821860466782405L -0.023905313011526912 0.0014608779858300957L -0.023959400463635688 0.0016377900701872216L -0.024019629109834687 0.001812706759626045L -0.02408592557079603 0.0019854149451043347L -0.024158209074494216 0.002155704208301739L -0.024236391554614416 0.0023233670779821127L -0.024320377757847688 0.00248819928276522L -0.024410065359942477 0.0026499999999999987L -0.024505345090370945 0.0028085721004359855L -0.02460610086545828 0.002963722388394958L -0.02471220992981278 0.0031152618371501064L -0.024823543005884373 0.0032630058192259894L -0.02493996445146942 0.0034067743313386566L -0.02506133242496981 0.0035463922137019483L -0.025187499058205148 0.0036816893634326843L -0.025318310636567316 0.0038125009417948512L -0.02545360778629805 0.003938667575030189L -0.025593225668661342 0.004060035548530583L -0.025736994180774013 0.004176456994115624L -0.025884738162849894 0.004287790070187221L -0.026036277611605044 0.00439389913454172L -0.026191427899564017 0.004494654909629058L -0.026350000000000002 0.004589934640057526L -0.026511800717234777 0.004679622242152314L -0.02667663292201789 0.004763608445385584L -0.02684429579169826 0.004841790925505784L -0.027014585054895665 0.004914074429203973L -0.027187293240373958 0.0049803708901653134L -0.02736220992981278 0.005040599536364315L -0.027539122014169904 0.005094686988473088L -0.027717813953321763 0.00514256734926278L -0.027898068038665878 0.005184182283889169L -0.02807966465836527 0.005219481090964702L -0.028262382564911655 0.0052484207643303206L -0.028445999144681437 0.005270966045451848L -0.028630290689156138 0.005287089466377068L -0.02881503266747675 0.005296771383201208L -0.029 0.0053L -0.029184967332523255 0.005296771383201208L -0.029369709310843862 0.005287089466377068L -0.029554000855318563 0.005270966045451848L -0.029737617435088348 0.0052484207643303206L -0.029920335341634734 0.005219481090964702L -0.030101931961334125 0.005184182283889171L -0.03028218604667824 0.005142567349262782L -0.030460877985830095 0.005094686988473092L -0.030637790070187226 0.005040599536364313L -0.030812706759626045 0.0049803708901653134L -0.030985414945104334 0.004914074429203973L -0.03115570420830174 0.004841790925505784L -0.03132336707798211 0.004763608445385584L -0.03148819928276522 0.004679622242152314L -0.031650000000000005 0.004589934640057526L -0.031808572100435986 0.004494654909629058L -0.03196372238839496 0.004393899134541722L -0.032115261837150105 0.004287790070187223L -0.03226300581922599 0.004176456994115628L -0.03240677433133866 0.004060035548530583L -0.03254639221370195 0.003938667575030189L -0.03268168936343269 0.0038125009417948512L -0.03281250094179485 0.0036816893634326877L -0.03293866757503019 0.00354639221370195L -0.033060035548530584 0.00340677433133866L -0.03317645699411563 0.0032630058192259876L -0.03328779007018722 0.003115261837150108L -0.03339389913454172 0.0029637223883949614L -0.03349465490962906 0.0028085721004359873L -0.03358993464005752 0.002650000000000002L -0.03367962224215232 0.0024881992827652227L -0.03376360844538558 0.0023233670779821127L -0.03384179092550579 0.002155704208301741L -0.03391407442920397 0.0019854149451043347L -0.03398037089016531 0.0018127067596260486L -0.03404059953636431 0.0016377900701872216L -0.034094686988473094 0.001460877985830093L -0.034142567349262784 0.0012821860466782405L -0.03418418228388917 0.0011019319613341265L -0.034219481090964704 0.0009203353416347313L -0.03424842076433032 0.0007376174350883441L -0.03427096604545185 0.0005540008553185632L -0.03428708946637707 0.0003697093108438656L -0.03429677138320121 0.00018496733252325922L -0.034300000000000004 8.673617379884035e-19L -0.03429677138320121 -0.00018496733252325748L -0.03428708946637707 -0.000369709310843863L -0.03427096604545185 -0.0005540008553185614L -0.03424842076433032 -0.0007376174350883467L -0.034219481090964704 -0.0009203353416347287L -0.03418418228388917 -0.0011019319613341213L -0.034142567349262784 -0.001282186046678238L -0.034094686988473094 -0.0014608779858300974L -0.03404059953636432 -0.0016377900701872198L -0.03398037089016532 -0.0018127067596260408L -0.03391407442920397 -0.001985414945104333L -0.03384179092550579 -0.002155704208301744L -0.03376360844538558 -0.002323367077982111L -0.03367962224215232 -0.002488199282765219L -0.03358993464005752 -0.002650000000000001L -0.03349465490962906 -0.002808572100435985L -0.03339389913454172 -0.0029637223883949553L -0.03328779007018722 -0.003115261837150107L -0.03317645699411563 -0.00326300581922599L -0.033060035548530584 -0.003406774331338658L -0.032938667575030195 -0.0035463922137019465L -0.03281250094179486 -0.0036816893634326825L -0.03268168936343269 -0.0038125009417948495L -0.03254639221370195 -0.00393866757503019L -0.032406774331338664 -0.004060035548530582L -0.03226300581922599 -0.004176456994115624L -0.03211526183715011 -0.004287790070187221L -0.03196372238839496 -0.004393899134541719L -0.03180857210043599 -0.004494654909629055L -0.031650000000000005 -0.004589934640057523L -0.03148819928276522 -0.0046796222421523126L -0.03132336707798211 -0.004763608445385586L -0.031155704208301743 -0.004841790925505785L -0.030985414945104338 -0.004914074429203973L -0.030812706759626045 -0.004980370890165314L -0.030637790070187222 -0.005040599536364314L -0.0304608779858301 -0.005094686988473089L -0.03028218604667824 -0.005142567349262781L -0.03010193196133413 -0.005184182283889169L -0.029920335341634737 -0.005219481090964702L -0.02973761743508835 -0.005248420764330322L -0.029554000855318563 -0.005270966045451849L -0.029369709310843862 -0.005287089466377069L -0.029184967332523255 -0.005296771383201207L -0.029 -0.0053","pos":[-0.12,0.089565],"layers":["F.Cu"],"index":1},"PGND":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[-0.12,0.063975],"layers":["F.Cu"],"index":2},"AOUT1":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[-0.12,0.038385],"layers":["F.Cu"],"index":3},"AOUT2":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[-0.12,0.012795],"layers":["F.Cu"],"index":4},"BOUT2":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[-0.12,-0.012795],"layers":["F.Cu"],"index":5},"BOUT1":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[-0.12,-0.038385],"layers":["F.Cu"],"index":6},"GND1":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[-0.12,-0.063975],"layers":["F.Cu"],"index":7},"GND2":{"shape":"M -0.05999999999999999 0.09000000000000001L 0.060000000000000005 0.09000000000000001L 0.06000000000000002 -0.08999999999999998L -0.05999999999999996 -0.09000000000000001L -0.06000000000000002 0.08999999999999998","pos":[0,0],"layers":["F.Cu"],"index":17},"DVDD":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[-0.12,-0.089565],"layers":["F.Cu"],"index":8},"VREF":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,-0.089565],"layers":["F.Cu"],"index":9},"M0":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,-0.063975],"layers":["F.Cu"],"index":10},"DECAY":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,-0.038385],"layers":["F.Cu"],"index":11},"M1":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,-0.012795],"layers":["F.Cu"],"index":12},"STEP":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,0.012795],"layers":["F.Cu"],"index":13},"DIR":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,0.038385],"layers":["F.Cu"],"index":14},"EN":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,0.063975],"layers":["F.Cu"],"index":15},"SLEEP":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,0.089565],"layers":["F.Cu"],"index":16}};

// constants
const width = 1;
const height = 1;

/* -- DECLARE_PCB -- */
let board = new PCB();

let interior = geo.rectangle(width, height)

board.addShape("interior", interior);

/* -- ADD_COMPONENTS -- */

/* -- ADD_WIRES -- */

/* -- RENDER_PCB -- */
renderPCB({
  pcb: board,
  layerColors: {
    "interior": "#002d00ff",
    "B.Cu": "#ff4c007f",
    "F.Cu": "#ff8c00cc",
    "drill": "#ff3300e5",
    "padLabels": "#ffff99e5",
    "componentLabels": "#00e5e5e5",
  },
  limits: {
    x: [-width/2, width/2],
    y: [-height/2, height/2]
  },
  mm_per_unit: 25.4
});
`;function pf(e){Mt.error=e,pt("RENDER")}class OC extends BP{constructor(){super(),Mt.storedPCB=this}}const gC=()=>Mt.codemirror.view.state.doc.toString(),yC=e=>({geo:tP,PCB:OC,via:XP,renderPCB:dC(e),renderShapes:cC,renderPath:pC,document:null,window:null,localStorage:null,Function:null,eval:null,pt:(t,i,r=-1,n=-1)=>{const o=Mt.pts.some(h=>h.start===r);if(r===-1||o)return[t,i];const s=gC().slice(r,n),a={pt:[t,i],start:r,end:n,text:s};return Mt.pts.push(a),[t,i]},path:(...t)=>t}),xC={INIT(e,t){pt("RENDER"),t.codemirror=document.querySelector(".code-editor"),QP(t),new URL(window.location.href);const i=window.location.search,r=new URLSearchParams(i).get("code"),n=new URLSearchParams(i).get("file"),o=new URLSearchParams(i).get("bezier")==="false",s=new URLSearchParams(i).get("grid")==="false";if(o&&(t.viewHandles=!1),s&&(t.grid=!1),!r)if(n){let a=n;n.startsWith("http")||(a=`examples/${n}`),fC(a,t)}else{const a=window.localStorage.getItem("svg-pcb");t.codemirror.view.dispatch({changes:{from:0,insert:a!=null?a:""}}),pt("RUN"),document.querySelector(".center-button").click()}pt("RENDER")},RUN({dragging:e=!1,flatten:t=!1}={},i){var r;i.paths=[],i.pts=[],i.error="";const n=i.codemirror.view.state.doc;let o=n.toString();const s=pc(i.codemirror.view.state,n.length,1e4);if(!e){let m=[],v=[];try{const S=uC(o,e);m=S.footprints,v=(r=S.layers)!=null?r:[]}catch(S){console.error(S),pf(S)}i.footprints=m,i.layers=v}const{pts:a,paths:h}=ef(i,s),c=[];let d=0;a.sort((m,v)=>m[0]-v[0]).forEach((m,v)=>{const[S,O]=m;c.push(o.substr(d,S-d));const y=o.substr(S,O-S),P=y.indexOf("("),w=`${y.slice(0,-1)}, ${S+P+1}, ${O-1})`;c.push(w),d=O,v===a.length-1&&c.push(o.substr(O))}),c.length>0&&(o=c.join(""));const f=yC(t);try{new Function(...Object.keys(f),o)(...Object.values(f))}catch(m){console.error("prog erred",m),pf(m)}pt("RENDER")},NEW_FILE(e,t){pt("UPLOAD_JS",{text:mC})},UPLOAD_COMP({text:e,name:t},i){var r;e=e.replaceAll("$",""),e=JSON.stringify(JP(e)),e=`const temp_name = ${e}
`;const n=i.codemirror.view.state.doc.toString(),o=(r=ta("DECLARE_COMPONENTS",n))!=null?r:0;i.codemirror.view.dispatch({changes:{from:o,insert:e}}),i.codemirror.foldRange(0,e.length),pt("RENDER")},UPLOAD_JS({text:e},t){const i=t.codemirror.view.state.doc.toString().length;t.codemirror.view.dispatch({changes:{from:0,to:i,insert:e}}),pt("RUN"),document.querySelector(".center-button").click()},ADD_IMPORT({text:e,name:t},i){var r;if(i.footprints.map(s=>s[0]).includes(t))return;const n=i.codemirror.view.state.doc.toString(),o=(r=ta("DECLARE_COMPONENTS",n))!=null?r:0;e=`const ${t} = ${e}
`,i.codemirror.view.dispatch({changes:{from:o,insert:e}}),pt("RUN")},TRANSLATE({x:e,y:t,index:i},r){r.transformUpdate(e,t),pt("RUN",{dragging:!0})},RENDER(){yf(uP(Mt),document.getElementById("root"))}};function pt(e,t={}){const i=xC[e];if(i)return i(t,Mt);console.log("Action not recongnized:",e)}window.addEventListener("load",()=>{pt("INIT")})});mS();
