(function(){const at=document.createElement("link").relList;if(at&&at.supports&&at.supports("modulepreload"))return;for(const R of document.querySelectorAll('link[rel="modulepreload"]'))M(R);new MutationObserver(R=>{for(const lt of R)if(lt.type==="childList")for(const rt of lt.addedNodes)rt.tagName==="LINK"&&rt.rel==="modulepreload"&&M(rt)}).observe(document,{childList:!0,subtree:!0});function St(R){const lt={};return R.integrity&&(lt.integrity=R.integrity),R.referrerpolicy&&(lt.referrerPolicy=R.referrerpolicy),R.crossorigin==="use-credentials"?lt.credentials="include":R.crossorigin==="anonymous"?lt.credentials="omit":lt.credentials="same-origin",lt}function M(R){if(R.ep)return;R.ep=!0;const lt=St(R);fetch(R.href,lt)}})();const pS="modulepreload",dS=function(st){return"/"+st},mf={},fS=function(at,St,M){return!St||St.length===0?at():Promise.all(St.map(R=>{if(R=dS(R),R in mf)return;mf[R]=!0;const lt=R.endsWith(".css"),rt=lt?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${R}"]${rt}`))return;const Mt=document.createElement("link");if(Mt.rel=lt?"stylesheet":pS,lt||(Mt.as="script",Mt.crossOrigin=""),Mt.href=R,document.head.appendChild(Mt),lt)return new Promise((Ce,pi)=>{Mt.addEventListener("load",Ce),Mt.addEventListener("error",()=>pi(new Error(`Unable to preload CSS for ${R}`)))})})).then(()=>at())};(function(){const st=document.createElement("link").relList;if(st&&st.supports&&st.supports("modulepreload"))return;for(const M of document.querySelectorAll('link[rel="modulepreload"]'))St(M);new MutationObserver(M=>{for(const R of M)if(R.type==="childList")for(const lt of R.addedNodes)lt.tagName==="LINK"&&lt.rel==="modulepreload"&&St(lt)}).observe(document,{childList:!0,subtree:!0});function at(M){const R={};return M.integrity&&(R.integrity=M.integrity),M.referrerpolicy&&(R.referrerPolicy=M.referrerpolicy),M.crossorigin==="use-credentials"?R.credentials="include":M.crossorigin==="anonymous"?R.credentials="omit":R.credentials="same-origin",R}function St(M){if(M.ep)return;M.ep=!0;const R=at(M);fetch(M.href,R)}})();const mS="modulepreload",gS=function(st){return"/"+st},gf={},OS=function(st,at,St){return!at||at.length===0?st():Promise.all(at.map(M=>{if(M=gS(M),M in gf)return;gf[M]=!0;const R=M.endsWith(".css"),lt=R?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${M}"]${lt}`))return;const rt=document.createElement("link");if(rt.rel=R?"stylesheet":mS,R||(rt.as="script",rt.crossOrigin=""),rt.href=M,document.head.appendChild(rt),R)return new Promise((Mt,Ce)=>{rt.addEventListener("load",Mt),rt.addEventListener("error",()=>Ce(new Error(`Unable to preload CSS for ${M}`)))})})).then(()=>st())};(function(){const st=document.createElement("link").relList;if(st&&st.supports&&st.supports("modulepreload"))return;for(const M of document.querySelectorAll('link[rel="modulepreload"]'))St(M);new MutationObserver(M=>{for(const R of M)if(R.type==="childList")for(const lt of R.addedNodes)lt.tagName==="LINK"&&lt.rel==="modulepreload"&&St(lt)}).observe(document,{childList:!0,subtree:!0});function at(M){const R={};return M.integrity&&(R.integrity=M.integrity),M.referrerpolicy&&(R.referrerPolicy=M.referrerpolicy),M.crossorigin==="use-credentials"?R.credentials="include":M.crossorigin==="anonymous"?R.credentials="omit":R.credentials="same-origin",R}function St(M){if(M.ep)return;M.ep=!0;const R=at(M);fetch(M.href,R)}})();const yS="modulepreload",xS=function(st){return"/"+st},Of={},vS=function(st,at,St){return!at||at.length===0?st():Promise.all(at.map(M=>{if(M=xS(M),M in Of)return;Of[M]=!0;const R=M.endsWith(".css"),lt=R?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${M}"]${lt}`))return;const rt=document.createElement("link");if(rt.rel=R?"stylesheet":yS,R||(rt.as="script",rt.crossOrigin=""),rt.href=M,document.head.appendChild(rt),R)return new Promise((Mt,Ce)=>{rt.addEventListener("load",Mt),rt.addEventListener("error",()=>Ce(new Error(`Unable to preload CSS for ${M}`)))})})).then(()=>st())};(function(){const st=document.createElement("link").relList;if(st&&st.supports&&st.supports("modulepreload"))return;for(const M of document.querySelectorAll('link[rel="modulepreload"]'))St(M);new MutationObserver(M=>{for(const R of M)if(R.type==="childList")for(const lt of R.addedNodes)lt.tagName==="LINK"&&lt.rel==="modulepreload"&&St(lt)}).observe(document,{childList:!0,subtree:!0});function at(M){const R={};return M.integrity&&(R.integrity=M.integrity),M.referrerpolicy&&(R.referrerPolicy=M.referrerpolicy),M.crossorigin==="use-credentials"?R.credentials="include":M.crossorigin==="anonymous"?R.credentials="omit":R.credentials="same-origin",R}function St(M){if(M.ep)return;M.ep=!0;const R=at(M);fetch(M.href,R)}})();const PS="modulepreload",CS=function(st){return"/"+st},yf={},SS=function(st,at,St){return!at||at.length===0?st():Promise.all(at.map(M=>{if(M=CS(M),M in yf)return;yf[M]=!0;const R=M.endsWith(".css"),lt=R?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${M}"]${lt}`))return;const rt=document.createElement("link");if(rt.rel=R?"stylesheet":PS,R||(rt.as="script",rt.crossOrigin=""),rt.href=M,document.head.appendChild(rt),R)return new Promise((Mt,Ce)=>{rt.addEventListener("load",Mt),rt.addEventListener("error",()=>Ce(new Error(`Unable to preload CSS for ${M}`)))})})).then(()=>st())};(function(){const st=document.createElement("link").relList;if(st&&st.supports&&st.supports("modulepreload"))return;for(const M of document.querySelectorAll('link[rel="modulepreload"]'))St(M);new MutationObserver(M=>{for(const R of M)if(R.type==="childList")for(const lt of R.addedNodes)lt.tagName==="LINK"&&lt.rel==="modulepreload"&&St(lt)}).observe(document,{childList:!0,subtree:!0});function at(M){const R={};return M.integrity&&(R.integrity=M.integrity),M.referrerpolicy&&(R.referrerPolicy=M.referrerpolicy),M.crossorigin==="use-credentials"?R.credentials="include":M.crossorigin==="anonymous"?R.credentials="omit":R.credentials="same-origin",R}function St(M){if(M.ep)return;M.ep=!0;const R=at(M);fetch(M.href,R)}})();const wS="modulepreload",bS=function(st){return"/"+st},xf={},ES=function(st,at,St){return!at||at.length===0?st():Promise.all(at.map(M=>{if(M=bS(M),M in xf)return;xf[M]=!0;const R=M.endsWith(".css"),lt=R?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${M}"]${lt}`))return;const rt=document.createElement("link");if(rt.rel=R?"stylesheet":wS,R||(rt.as="script",rt.crossOrigin=""),rt.href=M,document.head.appendChild(rt),R)return new Promise((Mt,Ce)=>{rt.addEventListener("load",Mt),rt.addEventListener("error",()=>Ce(new Error(`Unable to preload CSS for ${M}`)))})})).then(()=>st())};(function(){const st=document.createElement("link").relList;if(st&&st.supports&&st.supports("modulepreload"))return;for(const M of document.querySelectorAll('link[rel="modulepreload"]'))St(M);new MutationObserver(M=>{for(const R of M)if(R.type==="childList")for(const lt of R.addedNodes)lt.tagName==="LINK"&&lt.rel==="modulepreload"&&St(lt)}).observe(document,{childList:!0,subtree:!0});function at(M){const R={};return M.integrity&&(R.integrity=M.integrity),M.referrerpolicy&&(R.referrerPolicy=M.referrerpolicy),M.crossorigin==="use-credentials"?R.credentials="include":M.crossorigin==="anonymous"?R.credentials="omit":R.credentials="same-origin",R}function St(M){if(M.ep)return;M.ep=!0;const R=at(M);fetch(M.href,R)}})();const DS="modulepreload",TS=function(st){return"/"+st},vf={},AS=function(st,at,St){return!at||at.length===0?st():Promise.all(at.map(M=>{if(M=TS(M),M in vf)return;vf[M]=!0;const R=M.endsWith(".css"),lt=R?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${M}"]${lt}`))return;const rt=document.createElement("link");if(rt.rel=R?"stylesheet":DS,R||(rt.as="script",rt.crossOrigin=""),rt.href=M,document.head.appendChild(rt),R)return new Promise((Mt,Ce)=>{rt.addEventListener("load",Mt),rt.addEventListener("error",()=>Ce(new Error(`Unable to preload CSS for ${M}`)))})})).then(()=>st())};var kS=(st,at)=>()=>(at||st((at={exports:{}}).exports,at),at.exports),_S=kS((st,at)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();/**
* @license
* Copyright 2017 Google LLC
* SPDX-License-Identifier: BSD-3-Clause
*/var St;const M=window,R=M.trustedTypes,lt=R?R.createPolicy("lit-html",{createHTML:e=>e}):void 0,rt=`lit$${(Math.random()+"").slice(9)}$`,Mt="?"+rt,Ce=`<${Mt}>`,pi=document,Sn=(e="")=>pi.createComment(e),wn=e=>e===null||typeof e!="object"&&typeof e!="function",wa=Array.isArray,Pf=e=>wa(e)||typeof(e==null?void 0:e[Symbol.iterator])=="function",bn=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,ba=/-->/g,Ea=/>/g,ki=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Da=/'/g,Ta=/"/g,Aa=/^(?:script|style|textarea|title)$/i,ka=e=>(t,...i)=>({_$litType$:e,strings:t,values:i}),_i=ka(1),ke=ka(2),En=Symbol.for("lit-noChange"),qt=Symbol.for("lit-nothing"),_a=new WeakMap,Cf=(e,t,i)=>{var n,r;const o=(n=i==null?void 0:i.renderBefore)!==null&&n!==void 0?n:t;let s=o._$litPart$;if(s===void 0){const a=(r=i==null?void 0:i.renderBefore)!==null&&r!==void 0?r:null;o._$litPart$=s=new Tn(t.insertBefore(Sn(),a),a,void 0,i!=null?i:{})}return s._$AI(e),s},Gi=pi.createTreeWalker(pi,129,null,!1),Sf=(e,t)=>{const i=e.length-1,n=[];let r,o=t===2?"<svg>":"",s=bn;for(let h=0;h<i;h++){const c=e[h];let d,f,m=-1,v=0;for(;v<c.length&&(s.lastIndex=v,f=s.exec(c),f!==null);)v=s.lastIndex,s===bn?f[1]==="!--"?s=ba:f[1]!==void 0?s=Ea:f[2]!==void 0?(Aa.test(f[2])&&(r=RegExp("</"+f[2],"g")),s=ki):f[3]!==void 0&&(s=ki):s===ki?f[0]===">"?(s=r!=null?r:bn,m=-1):f[1]===void 0?m=-2:(m=s.lastIndex-f[2].length,d=f[1],s=f[3]===void 0?ki:f[3]==='"'?Ta:Da):s===Ta||s===Da?s=ki:s===ba||s===Ea?s=bn:(s=ki,r=void 0);const S=s===ki&&e[h+1].startsWith("/>")?" ":"";o+=s===bn?c+Ce:m>=0?(n.push(d),c.slice(0,m)+"$lit$"+c.slice(m)+rt+S):c+rt+(m===-2?(n.push(void 0),h):S)}const a=o+(e[i]||"<?>")+(t===2?"</svg>":"");if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return[lt!==void 0?lt.createHTML(a):a,n]};class Dn{constructor({strings:t,_$litType$:i},n){let r;this.parts=[];let o=0,s=0;const a=t.length-1,h=this.parts,[c,d]=Sf(t,i);if(this.el=Dn.createElement(c,n),Gi.currentNode=this.el.content,i===2){const f=this.el.content,m=f.firstChild;m.remove(),f.append(...m.childNodes)}for(;(r=Gi.nextNode())!==null&&h.length<a;){if(r.nodeType===1){if(r.hasAttributes()){const f=[];for(const m of r.getAttributeNames())if(m.endsWith("$lit$")||m.startsWith(rt)){const v=d[s++];if(f.push(m),v!==void 0){const S=r.getAttribute(v.toLowerCase()+"$lit$").split(rt),g=/([.?@])?(.*)/.exec(v);h.push({type:1,index:o,name:g[2],strings:S,ctor:g[1]==="."?bf:g[1]==="?"?Df:g[1]==="@"?Tf:Pr})}else h.push({type:6,index:o})}for(const m of f)r.removeAttribute(m)}if(Aa.test(r.tagName)){const f=r.textContent.split(rt),m=f.length-1;if(m>0){r.textContent=R?R.emptyScript:"";for(let v=0;v<m;v++)r.append(f[v],Sn()),Gi.nextNode(),h.push({type:2,index:++o});r.append(f[m],Sn())}}}else if(r.nodeType===8)if(r.data===Mt)h.push({type:2,index:o});else{let f=-1;for(;(f=r.data.indexOf(rt,f+1))!==-1;)h.push({type:7,index:o}),f+=rt.length-1}o++}}static createElement(t,i){const n=pi.createElement("template");return n.innerHTML=t,n}}function Vi(e,t,i=e,n){var r,o,s,a;if(t===En)return t;let h=n!==void 0?(r=i._$Cl)===null||r===void 0?void 0:r[n]:i._$Cu;const c=wn(t)?void 0:t._$litDirective$;return(h==null?void 0:h.constructor)!==c&&((o=h==null?void 0:h._$AO)===null||o===void 0||o.call(h,!1),c===void 0?h=void 0:(h=new c(e),h._$AT(e,i,n)),n!==void 0?((s=(a=i)._$Cl)!==null&&s!==void 0?s:a._$Cl=[])[n]=h:i._$Cu=h),h!==void 0&&(t=Vi(e,h._$AS(e,t.values),h,n)),t}class wf{constructor(t,i){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var i;const{el:{content:n},parts:r}=this._$AD,o=((i=t==null?void 0:t.creationScope)!==null&&i!==void 0?i:pi).importNode(n,!0);Gi.currentNode=o;let s=Gi.nextNode(),a=0,h=0,c=r[0];for(;c!==void 0;){if(a===c.index){let d;c.type===2?d=new Tn(s,s.nextSibling,this,t):c.type===1?d=new c.ctor(s,c.name,c.strings,this,t):c.type===6&&(d=new Af(s,this,t)),this.v.push(d),c=r[++h]}a!==(c==null?void 0:c.index)&&(s=Gi.nextNode(),a++)}return o}m(t){let i=0;for(const n of this.v)n!==void 0&&(n.strings!==void 0?(n._$AI(t,n,i),i+=n.strings.length-2):n._$AI(t[i])),i++}}class Tn{constructor(t,i,n,r){var o;this.type=2,this._$AH=qt,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=n,this.options=r,this._$C_=(o=r==null?void 0:r.isConnected)===null||o===void 0||o}get _$AU(){var t,i;return(i=(t=this._$AM)===null||t===void 0?void 0:t._$AU)!==null&&i!==void 0?i:this._$C_}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return i!==void 0&&t.nodeType===11&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=Vi(this,t,i),wn(t)?t===qt||t==null||t===""?(this._$AH!==qt&&this._$AR(),this._$AH=qt):t!==this._$AH&&t!==En&&this.$(t):t._$litType$!==void 0?this.T(t):t.nodeType!==void 0?this.k(t):Pf(t)?this.O(t):this.$(t)}S(t,i=this._$AB){return this._$AA.parentNode.insertBefore(t,i)}k(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t))}$(t){this._$AH!==qt&&wn(this._$AH)?this._$AA.nextSibling.data=t:this.k(pi.createTextNode(t)),this._$AH=t}T(t){var i;const{values:n,_$litType$:r}=t,o=typeof r=="number"?this._$AC(t):(r.el===void 0&&(r.el=Dn.createElement(r.h,this.options)),r);if(((i=this._$AH)===null||i===void 0?void 0:i._$AD)===o)this._$AH.m(n);else{const s=new wf(o,this),a=s.p(this.options);s.m(n),this.k(a),this._$AH=s}}_$AC(t){let i=_a.get(t.strings);return i===void 0&&_a.set(t.strings,i=new Dn(t)),i}O(t){wa(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let n,r=0;for(const o of t)r===i.length?i.push(n=new Tn(this.S(Sn()),this.S(Sn()),this,this.options)):n=i[r],n._$AI(o),r++;r<i.length&&(this._$AR(n&&n._$AB.nextSibling,r),i.length=r)}_$AR(t=this._$AA.nextSibling,i){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,i);t&&t!==this._$AB;){const r=t.nextSibling;t.remove(),t=r}}setConnected(t){var i;this._$AM===void 0&&(this._$C_=t,(i=this._$AP)===null||i===void 0||i.call(this,t))}}class Pr{constructor(t,i,n,r,o){this.type=1,this._$AH=qt,this._$AN=void 0,this.element=t,this.name=i,this._$AM=r,this.options=o,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=qt}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,i=this,n,r){const o=this.strings;let s=!1;if(o===void 0)t=Vi(this,t,i,0),s=!wn(t)||t!==this._$AH&&t!==En,s&&(this._$AH=t);else{const a=t;let h,c;for(t=o[0],h=0;h<o.length-1;h++)c=Vi(this,a[n+h],i,h),c===En&&(c=this._$AH[h]),s||(s=!wn(c)||c!==this._$AH[h]),c===qt?t=qt:t!==qt&&(t+=(c!=null?c:"")+o[h+1]),this._$AH[h]=c}s&&!r&&this.P(t)}P(t){t===qt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t!=null?t:"")}}class bf extends Pr{constructor(){super(...arguments),this.type=3}P(t){this.element[this.name]=t===qt?void 0:t}}const Ef=R?R.emptyScript:"";class Df extends Pr{constructor(){super(...arguments),this.type=4}P(t){t&&t!==qt?this.element.setAttribute(this.name,Ef):this.element.removeAttribute(this.name)}}class Tf extends Pr{constructor(t,i,n,r,o){super(t,i,n,r,o),this.type=5}_$AI(t,i=this){var n;if((t=(n=Vi(this,t,i,0))!==null&&n!==void 0?n:qt)===En)return;const r=this._$AH,o=t===qt&&r!==qt||t.capture!==r.capture||t.once!==r.once||t.passive!==r.passive,s=t!==qt&&(r===qt||o);o&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var i,n;typeof this._$AH=="function"?this._$AH.call((n=(i=this.options)===null||i===void 0?void 0:i.host)!==null&&n!==void 0?n:this.element,t):this._$AH.handleEvent(t)}}class Af{constructor(t,i,n){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(t){Vi(this,t)}}const Ia=M.litHtmlPolyfillSupport;Ia==null||Ia(Dn,Tn),((St=M.litHtmlVersions)!==null&&St!==void 0?St:M.litHtmlVersions=[]).push("2.3.1");class Ct{constructor(){}lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t,!1,1,0)}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t,!0,1,0)}replace(t,i,n){let r=[];return this.decompose(0,t,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(i,this.length,r,1),Ze.from(r,this.length-(i-t)+n.length)}append(t){return this.replace(this.length,this.length,t)}slice(t,i=this.length){let n=[];return this.decompose(t,i,n,0),Ze.from(n,i-t)}eq(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;let i=this.scanIdentical(t,1),n=this.length-this.scanIdentical(t,-1),r=new An(this),o=new An(t);for(let s=i,a=i;;){if(r.next(s),o.next(s),s=0,r.lineBreak!=o.lineBreak||r.done!=o.done||r.value!=o.value)return!1;if(a+=r.value.length,r.done||a>=n)return!0}}iter(t=1){return new An(this,t)}iterRange(t,i=this.length){return new Qa(this,t,i)}iterLines(t,i){let n;if(t==null)n=this.iter();else{i==null&&(i=this.lines+1);let r=this.line(t).from;n=this.iterRange(r,Math.max(r,i==this.lines+1?this.length:i<=1?0:this.line(i-1).to))}return new Xa(n)}toString(){return this.sliceString(0)}toJSON(){let t=[];return this.flatten(t),t}static of(t){if(t.length==0)throw new RangeError("A document must have at least one line");return t.length==1&&!t[0]?Ct.empty:t.length<=32?new $t(t):Ze.from($t.split(t,[]))}}class $t extends Ct{constructor(t,i=kf(t)){super(),this.text=t,this.length=i}get lines(){return this.text.length}get children(){return null}lineInner(t,i,n,r){for(let o=0;;o++){let s=this.text[o],a=r+s.length;if((i?n:a)>=t)return new _f(r,a,n,s);r=a+1,n++}}decompose(t,i,n,r){let o=t<=0&&i>=this.length?this:new $t(La(this.text,t,i),Math.min(i,this.length)-Math.max(0,t));if(r&1){let s=n.pop(),a=Cr(o.text,s.text.slice(),0,o.length);if(a.length<=32)n.push(new $t(a,s.length+o.length));else{let h=a.length>>1;n.push(new $t(a.slice(0,h)),new $t(a.slice(h)))}}else n.push(o)}replace(t,i,n){if(!(n instanceof $t))return super.replace(t,i,n);let r=Cr(this.text,Cr(n.text,La(this.text,0,t)),i),o=this.length+n.length-(i-t);return r.length<=32?new $t(r,o):Ze.from($t.split(r,[]),o)}sliceString(t,i=this.length,n=`
`){let r="";for(let o=0,s=0;o<=i&&s<this.text.length;s++){let a=this.text[s],h=o+a.length;o>t&&s&&(r+=n),t<h&&i>o&&(r+=a.slice(Math.max(0,t-o),i-o)),o=h+1}return r}flatten(t){for(let i of this.text)t.push(i)}scanIdentical(){return 0}static split(t,i){let n=[],r=-1;for(let o of t)n.push(o),r+=o.length+1,n.length==32&&(i.push(new $t(n,r)),n=[],r=-1);return r>-1&&i.push(new $t(n,r)),i}}class Ze extends Ct{constructor(t,i){super(),this.children=t,this.length=i,this.lines=0;for(let n of t)this.lines+=n.lines}lineInner(t,i,n,r){for(let o=0;;o++){let s=this.children[o],a=r+s.length,h=n+s.lines-1;if((i?h:a)>=t)return s.lineInner(t,i,n,r);r=a+1,n=h+1}}decompose(t,i,n,r){for(let o=0,s=0;s<=i&&o<this.children.length;o++){let a=this.children[o],h=s+a.length;if(t<=h&&i>=s){let c=r&((s<=t?1:0)|(h>=i?2:0));s>=t&&h<=i&&!c?n.push(a):a.decompose(t-s,i-s,n,c)}s=h+1}}replace(t,i,n){if(n.lines<this.lines)for(let r=0,o=0;r<this.children.length;r++){let s=this.children[r],a=o+s.length;if(t>=o&&i<=a){let h=s.replace(t-o,i-o,n),c=this.lines-s.lines+h.lines;if(h.lines<c>>5-1&&h.lines>c>>5+1){let d=this.children.slice();return d[r]=h,new Ze(d,this.length-(i-t)+n.length)}return super.replace(o,a,h)}o=a+1}return super.replace(t,i,n)}sliceString(t,i=this.length,n=`
`){let r="";for(let o=0,s=0;o<this.children.length&&s<=i;o++){let a=this.children[o],h=s+a.length;s>t&&o&&(r+=n),t<h&&i>s&&(r+=a.sliceString(t-s,i-s,n)),s=h+1}return r}flatten(t){for(let i of this.children)i.flatten(t)}scanIdentical(t,i){if(!(t instanceof Ze))return 0;let n=0,[r,o,s,a]=i>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;r+=i,o+=i){if(r==s||o==a)return n;let h=this.children[r],c=t.children[o];if(h!=c)return n+h.scanIdentical(c,i);n+=h.length+1}}static from(t,i=t.reduce((n,r)=>n+r.length+1,-1)){let n=0;for(let v of t)n+=v.lines;if(n<32){let v=[];for(let S of t)S.flatten(v);return new $t(v,i)}let r=Math.max(32,n>>5),o=r<<1,s=r>>1,a=[],h=0,c=-1,d=[];function f(v){let S;if(v.lines>o&&v instanceof Ze)for(let g of v.children)f(g);else v.lines>s&&(h>s||!h)?(m(),a.push(v)):v instanceof $t&&h&&(S=d[d.length-1])instanceof $t&&v.lines+S.lines<=32?(h+=v.lines,c+=v.length+1,d[d.length-1]=new $t(S.text.concat(v.text),S.length+1+v.length)):(h+v.lines>r&&m(),h+=v.lines,c+=v.length+1,d.push(v))}function m(){h!=0&&(a.push(d.length==1?d[0]:Ze.from(d,c)),c=-1,h=d.length=0)}for(let v of t)f(v);return m(),a.length==1?a[0]:new Ze(a,i)}}Ct.empty=new $t([""],0);function kf(e){let t=-1;for(let i of e)t+=i.length+1;return t}function Cr(e,t,i=0,n=1e9){for(let r=0,o=0,s=!0;o<e.length&&r<=n;o++){let a=e[o],h=r+a.length;h>=i&&(h>n&&(a=a.slice(0,n-r)),r<i&&(a=a.slice(i-r)),s?(t[t.length-1]+=a,s=!1):t.push(a)),r=h+1}return t}function La(e,t,i){return Cr(e,[""],t,i)}class An{constructor(t,i=1){this.dir=i,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[i>0?1:(t instanceof $t?t.text.length:t.children.length)<<1]}nextInner(t,i){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,r=this.nodes[n],o=this.offsets[n],s=o>>1,a=r instanceof $t?r.text.length:r.children.length;if(s==(i>0?a:0)){if(n==0)return this.done=!0,this.value="",this;i>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(i>0?0:1)){if(this.offsets[n]+=i,t==0)return this.lineBreak=!0,this.value=`
`,this;t--}else if(r instanceof $t){let h=r.text[s+(i<0?-1:0)];if(this.offsets[n]+=i,h.length>Math.max(0,t))return this.value=t==0?h:i>0?h.slice(t):h.slice(0,h.length-t),this;t-=h.length}else{let h=r.children[s+(i<0?-1:0)];t>h.length?(t-=h.length,this.offsets[n]+=i):(i<0&&this.offsets[n]--,this.nodes.push(h),this.offsets.push(i>0?1:(h instanceof $t?h.text.length:h.children.length)<<1))}}}next(t=0){return t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)}}class Qa{constructor(t,i,n){this.value="",this.done=!1,this.cursor=new An(t,i>n?-1:1),this.pos=i>n?t.length:0,this.from=Math.min(i,n),this.to=Math.max(i,n)}nextInner(t,i){if(i<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,i<0?this.pos-this.to:this.from-this.pos);let n=i<0?this.pos-this.from:this.to-this.pos;t>n&&(t=n),n-=t;let{value:r}=this.cursor.next(t);return this.pos+=(r.length+t)*i,this.value=r.length<=n?r:i<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}next(t=0){return t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Xa{constructor(t){this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}next(t=0){let{done:i,lineBreak:n,value:r}=this.inner.next(t);return i?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Ct.prototype[Symbol.iterator]=function(){return this.iter()},An.prototype[Symbol.iterator]=Qa.prototype[Symbol.iterator]=Xa.prototype[Symbol.iterator]=function(){return this});class _f{constructor(t,i,n,r){this.from=t,this.to=i,this.number=n,this.text=r}get length(){return this.to-this.from}}let Hi="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=1;e<Hi.length;e++)Hi[e]+=Hi[e-1];function If(e){for(let t=1;t<Hi.length;t+=2)if(Hi[t]>e)return Hi[t-1]<=e;return!1}function $a(e){return e>=127462&&e<=127487}const Na=8205;function ue(e,t,i=!0,n=!0){return(i?Fa:Lf)(e,t,n)}function Fa(e,t,i){if(t==e.length)return t;t&&Ma(e.charCodeAt(t))&&Ba(e.charCodeAt(t-1))&&t--;let n=Jt(e,t);for(t+=Se(n);t<e.length;){let r=Jt(e,t);if(n==Na||r==Na||i&&If(r))t+=Se(r),n=r;else if($a(r)){let o=0,s=t-2;for(;s>=0&&$a(Jt(e,s));)o++,s-=2;if(o%2==0)break;t+=2}else break}return t}function Lf(e,t,i){for(;t>0;){let n=Fa(e,t-2,i);if(n<t)return n;t--}return 0}function Ma(e){return e>=56320&&e<57344}function Ba(e){return e>=55296&&e<56320}function Jt(e,t){let i=e.charCodeAt(t);if(!Ba(i)||t+1==e.length)return i;let n=e.charCodeAt(t+1);return Ma(n)?(i-55296<<10)+(n-56320)+65536:i}function Gs(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}function Se(e){return e<65536?1:2}const Vs=/\r\n?|\n/;var Kt=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(Kt||(Kt={}));class ze{constructor(t){this.sections=t}get length(){let t=0;for(let i=0;i<this.sections.length;i+=2)t+=this.sections[i];return t}get newLength(){let t=0;for(let i=0;i<this.sections.length;i+=2){let n=this.sections[i+1];t+=n<0?this.sections[i]:n}return t}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(t){for(let i=0,n=0,r=0;i<this.sections.length;){let o=this.sections[i++],s=this.sections[i++];s<0?(t(n,r,o),r+=o):r+=s,n+=o}}iterChangedRanges(t,i=!1){Hs(this,t,i)}get invertedDesc(){let t=[];for(let i=0;i<this.sections.length;){let n=this.sections[i++],r=this.sections[i++];r<0?t.push(n,r):t.push(r,n)}return new ze(t)}composeDesc(t){return this.empty?t:t.empty?this:Ra(this,t)}mapDesc(t,i=!1){return t.empty?this:Js(this,t,i)}mapPos(t,i=-1,n=Kt.Simple){let r=0,o=0;for(let s=0;s<this.sections.length;){let a=this.sections[s++],h=this.sections[s++],c=r+a;if(h<0){if(c>t)return o+(t-r);o+=a}else{if(n!=Kt.Simple&&c>=t&&(n==Kt.TrackDel&&r<t&&c>t||n==Kt.TrackBefore&&r<t||n==Kt.TrackAfter&&c>t))return null;if(c>t||c==t&&i<0&&!a)return t==r||i<0?o:o+h;o+=h}r=c}if(t>r)throw new RangeError(`Position ${t} is out of range for changeset of length ${r}`);return o}touchesRange(t,i=t){for(let n=0,r=0;n<this.sections.length&&r<=i;){let o=this.sections[n++],s=this.sections[n++],a=r+o;if(s>=0&&r<=i&&a>=t)return r<t&&a>i?"cover":!0;r=a}return!1}toString(){let t="";for(let i=0;i<this.sections.length;){let n=this.sections[i++],r=this.sections[i++];t+=(t?" ":"")+n+(r>=0?":"+r:"")}return t}toJSON(){return this.sections}static fromJSON(t){if(!Array.isArray(t)||t.length%2||t.some(i=>typeof i!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ze(t)}static create(t){return new ze(t)}}class Wt extends ze{constructor(t,i){super(t),this.inserted=i}apply(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return Hs(this,(i,n,r,o,s)=>t=t.replace(r,r+(n-i),s),!1),t}mapDesc(t,i=!1){return Js(this,t,i,!0)}invert(t){let i=this.sections.slice(),n=[];for(let r=0,o=0;r<i.length;r+=2){let s=i[r],a=i[r+1];if(a>=0){i[r]=a,i[r+1]=s;let h=r>>1;for(;n.length<h;)n.push(Ct.empty);n.push(s?t.slice(o,o+s):Ct.empty)}o+=s}return new Wt(i,n)}compose(t){return this.empty?t:t.empty?this:Ra(this,t,!0)}map(t,i=!1){return t.empty?this:Js(this,t,i,!0)}iterChanges(t,i=!1){Hs(this,t,i)}get desc(){return ze.create(this.sections)}filter(t){let i=[],n=[],r=[],o=new kn(this);t:for(let s=0,a=0;;){let h=s==t.length?1e9:t[s++];for(;a<h||a==h&&o.len==0;){if(o.done)break t;let d=Math.min(o.len,h-a);se(r,d,-1);let f=o.ins==-1?-1:o.off==0?o.ins:0;se(i,d,f),f>0&&di(n,i,o.text),o.forward(d),a+=d}let c=t[s++];for(;a<c;){if(o.done)break t;let d=Math.min(o.len,c-a);se(i,d,-1),se(r,d,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(d),a+=d}}return{changes:new Wt(i,n),filtered:ze.create(r)}}toJSON(){let t=[];for(let i=0;i<this.sections.length;i+=2){let n=this.sections[i],r=this.sections[i+1];r<0?t.push(n):r==0?t.push([n]):t.push([n].concat(this.inserted[i>>1].toJSON()))}return t}static of(t,i,n){let r=[],o=[],s=0,a=null;function h(d=!1){if(!d&&!r.length)return;s<i&&se(r,i-s,-1);let f=new Wt(r,o);a=a?a.compose(f.map(a)):f,r=[],o=[],s=0}function c(d){if(Array.isArray(d))for(let f of d)c(f);else if(d instanceof Wt){if(d.length!=i)throw new RangeError(`Mismatched change set length (got ${d.length}, expected ${i})`);h(),a=a?a.compose(d.map(a)):d}else{let{from:f,to:m=f,insert:v}=d;if(f>m||f<0||m>i)throw new RangeError(`Invalid change range ${f} to ${m} (in doc of length ${i})`);let S=v?typeof v=="string"?Ct.of(v.split(n||Vs)):v:Ct.empty,g=S.length;if(f==m&&g==0)return;f<s&&h(),f>s&&se(r,f-s,-1),se(r,m-f,g),di(o,r,S),s=m}}return c(t),h(!a),a}static empty(t){return new Wt(t?[t,-1]:[],[])}static fromJSON(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");let i=[],n=[];for(let r=0;r<t.length;r++){let o=t[r];if(typeof o=="number")i.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((s,a)=>a&&typeof s!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)i.push(o[0],0);else{for(;n.length<r;)n.push(Ct.empty);n[r]=Ct.of(o.slice(1)),i.push(o[0],n[r].length)}}}return new Wt(i,n)}static createSet(t,i){return new Wt(t,i)}}function se(e,t,i,n=!1){if(t==0&&i<=0)return;let r=e.length-2;r>=0&&i<=0&&i==e[r+1]?e[r]+=t:t==0&&e[r]==0?e[r+1]+=i:n?(e[r]+=t,e[r+1]+=i):e.push(t,i)}function di(e,t,i){if(i.length==0)return;let n=t.length-2>>1;if(n<e.length)e[e.length-1]=e[e.length-1].append(i);else{for(;e.length<n;)e.push(Ct.empty);e.push(i)}}function Hs(e,t,i){let n=e.inserted;for(let r=0,o=0,s=0;s<e.sections.length;){let a=e.sections[s++],h=e.sections[s++];if(h<0)r+=a,o+=a;else{let c=r,d=o,f=Ct.empty;for(;c+=a,d+=h,h&&n&&(f=f.append(n[s-2>>1])),!(i||s==e.sections.length||e.sections[s+1]<0);)a=e.sections[s++],h=e.sections[s++];t(r,c,o,d,f),r=c,o=d}}}function Js(e,t,i,n=!1){let r=[],o=n?[]:null,s=new kn(e),a=new kn(t);for(let h=-1;;)if(s.ins==-1&&a.ins==-1){let c=Math.min(s.len,a.len);se(r,c,-1),s.forward(c),a.forward(c)}else if(a.ins>=0&&(s.ins<0||h==s.i||s.off==0&&(a.len<s.len||a.len==s.len&&!i))){let c=a.len;for(se(r,a.ins,-1);c;){let d=Math.min(s.len,c);s.ins>=0&&h<s.i&&s.len<=d&&(se(r,0,s.ins),o&&di(o,r,s.text),h=s.i),s.forward(d),c-=d}a.next()}else if(s.ins>=0){let c=0,d=s.len;for(;d;)if(a.ins==-1){let f=Math.min(d,a.len);c+=f,d-=f,a.forward(f)}else if(a.ins==0&&a.len<d)d-=a.len,a.next();else break;se(r,c,h<s.i?s.ins:0),o&&h<s.i&&di(o,r,s.text),h=s.i,s.forward(s.len-d)}else{if(s.done&&a.done)return o?Wt.createSet(r,o):ze.create(r);throw new Error("Mismatched change set lengths")}}function Ra(e,t,i=!1){let n=[],r=i?[]:null,o=new kn(e),s=new kn(t);for(let a=!1;;){if(o.done&&s.done)return r?Wt.createSet(n,r):ze.create(n);if(o.ins==0)se(n,o.len,0,a),o.next();else if(s.len==0&&!s.done)se(n,0,s.ins,a),r&&di(r,n,s.text),s.next();else{if(o.done||s.done)throw new Error("Mismatched change set lengths");{let h=Math.min(o.len2,s.len),c=n.length;if(o.ins==-1){let d=s.ins==-1?-1:s.off?0:s.ins;se(n,h,d,a),r&&d&&di(r,n,s.text)}else s.ins==-1?(se(n,o.off?0:o.len,h,a),r&&di(r,n,o.textBit(h))):(se(n,o.off?0:o.len,s.off?0:s.ins,a),r&&!s.off&&di(r,n,s.text));a=(o.ins>h||s.ins>=0&&s.len>h)&&(a||n.length>c),o.forward2(h),s.forward(h)}}}}class kn{constructor(t){this.set=t,this.i=0,this.next()}next(){let{sections:t}=this.set;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length?Ct.empty:t[i]}textBit(t){let{inserted:i}=this.set,n=this.i-2>>1;return n>=i.length&&!t?Ct.empty:i[n].slice(this.off,t==null?void 0:this.off+t)}forward(t){t==this.len?this.next():(this.len-=t,this.off+=t)}forward2(t){this.ins==-1?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}}class Ii{constructor(t,i,n){this.from=t,this.to=i,this.flags=n}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let t=this.flags&3;return t==3?null:t}get goalColumn(){let t=this.flags>>5;return t==33554431?void 0:t}map(t,i=-1){let n,r;return this.empty?n=r=t.mapPos(this.from,i):(n=t.mapPos(this.from,1),r=t.mapPos(this.to,-1)),n==this.from&&r==this.to?this:new Ii(n,r,this.flags)}extend(t,i=t){if(t<=this.anchor&&i>=this.anchor)return j.range(t,i);let n=Math.abs(t-this.anchor)>Math.abs(i-this.anchor)?t:i;return j.range(this.anchor,n)}eq(t){return this.anchor==t.anchor&&this.head==t.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return j.range(t.anchor,t.head)}static create(t,i,n){return new Ii(t,i,n)}}class j{constructor(t,i){this.ranges=t,this.mainIndex=i}map(t,i=-1){return t.empty?this:j.create(this.ranges.map(n=>n.map(t,i)),this.mainIndex)}eq(t){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(t.ranges[i]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new j([this.main],0)}addRange(t,i=!0){return j.create([t].concat(this.ranges),i?0:this.mainIndex+1)}replaceRange(t,i=this.mainIndex){let n=this.ranges.slice();return n[i]=t,j.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(t=>t.toJSON()),main:this.mainIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||typeof t.main!="number"||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new j(t.ranges.map(i=>Ii.fromJSON(i)),t.main)}static single(t,i=t){return new j([j.range(t,i)],0)}static create(t,i=0){if(t.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,r=0;r<t.length;r++){let o=t[r];if(o.empty?o.from<=n:o.from<n)return j.normalized(t.slice(),i);n=o.to}return new j(t,i)}static cursor(t,i=0,n,r){return Ii.create(t,t,(i==0?0:i<0?4:8)|(n==null?3:Math.min(2,n))|(r!=null?r:33554431)<<5)}static range(t,i,n){let r=(n!=null?n:33554431)<<5;return i<t?Ii.create(i,t,16|r|8):Ii.create(t,i,r|(i>t?4:0))}static normalized(t,i=0){let n=t[i];t.sort((r,o)=>r.from-o.from),i=t.indexOf(n);for(let r=1;r<t.length;r++){let o=t[r],s=t[r-1];if(o.empty?o.from<=s.to:o.from<s.to){let a=s.from,h=Math.max(o.to,s.to);r<=i&&i--,t.splice(--r,2,o.anchor>o.head?j.range(h,a):j.range(a,h))}}return new j(t,i)}}function Ya(e,t){for(let i of e.ranges)if(i.to>t)throw new RangeError("Selection points outside of document")}let Ks=0;class K{constructor(t,i,n,r,o){this.combine=t,this.compareInput=i,this.compare=n,this.isStatic=r,this.id=Ks++,this.default=t([]),this.extensions=typeof o=="function"?o(this):o}static define(t={}){return new K(t.combine||(i=>i),t.compareInput||((i,n)=>i===n),t.compare||(t.combine?(i,n)=>i===n:to),!!t.static,t.enables)}of(t){return new Sr([],this,0,t)}compute(t,i){if(this.isStatic)throw new Error("Can't compute a static facet");return new Sr(t,this,1,i)}computeN(t,i){if(this.isStatic)throw new Error("Can't compute a static facet");return new Sr(t,this,2,i)}from(t,i){return i||(i=n=>n),this.compute([t],n=>i(n.field(t)))}}function to(e,t){return e==t||e.length==t.length&&e.every((i,n)=>i===t[n])}class Sr{constructor(t,i,n,r){this.dependencies=t,this.facet=i,this.type=n,this.value=r,this.id=Ks++}dynamicSlot(t){var i;let n=this.value,r=this.facet.compareInput,o=this.id,s=t[o]>>1,a=this.type==2,h=!1,c=!1,d=[];for(let f of this.dependencies)f=="doc"?h=!0:f=="selection"?c=!0:(((i=t[f.id])!==null&&i!==void 0?i:1)&1)==0&&d.push(t[f.id]);return{create(f){return f.values[s]=n(f),1},update(f,m){if(h&&m.docChanged||c&&(m.docChanged||m.selection)||eo(f,d)){let v=n(f);if(a?!Wa(v,f.values[s],r):!r(v,f.values[s]))return f.values[s]=v,1}return 0},reconfigure:(f,m)=>{let v=n(f),S=m.config.address[o];if(S!=null){let g=Er(m,S);if(this.dependencies.every(y=>y instanceof K?m.facet(y)===f.facet(y):y instanceof jt?m.field(y,!1)==f.field(y,!1):!0)||(a?Wa(v,g,r):r(v,g)))return f.values[s]=g,0}return f.values[s]=v,1}}}}function Wa(e,t,i){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!i(e[n],t[n]))return!1;return!0}function eo(e,t){let i=!1;for(let n of t)In(e,n)&1&&(i=!0);return i}function Qf(e,t,i){let n=i.map(h=>e[h.id]),r=i.map(h=>h.type),o=n.filter(h=>!(h&1)),s=e[t.id]>>1;function a(h){let c=[];for(let d=0;d<n.length;d++){let f=Er(h,n[d]);if(r[d]==2)for(let m of f)c.push(m);else c.push(f)}return t.combine(c)}return{create(h){for(let c of n)In(h,c);return h.values[s]=a(h),1},update(h,c){if(!eo(h,o))return 0;let d=a(h);return t.compare(d,h.values[s])?0:(h.values[s]=d,1)},reconfigure(h,c){let d=eo(h,n),f=c.config.facets[t.id],m=c.facet(t);if(f&&!d&&to(i,f))return h.values[s]=m,0;let v=a(h);return t.compare(v,m)?(h.values[s]=m,0):(h.values[s]=v,1)}}}const ja=K.define({static:!0});class jt{constructor(t,i,n,r,o){this.id=t,this.createF=i,this.updateF=n,this.compareF=r,this.spec=o,this.provides=void 0}static define(t){let i=new jt(Ks++,t.create,t.update,t.compare||((n,r)=>n===r),t);return t.provide&&(i.provides=t.provide(i)),i}create(t){let i=t.facet(ja).find(n=>n.field==this);return((i==null?void 0:i.create)||this.createF)(t)}slot(t){let i=t[this.id]>>1;return{create:n=>(n.values[i]=this.create(n),1),update:(n,r)=>{let o=n.values[i],s=this.updateF(o,r);return this.compareF(o,s)?0:(n.values[i]=s,1)},reconfigure:(n,r)=>r.config.address[this.id]!=null?(n.values[i]=r.field(this),0):(n.values[i]=this.create(n),1)}}init(t){return[this,ja.of({field:this,create:t})]}get extension(){return this}}const Li={lowest:4,low:3,default:2,high:1,highest:0};function _n(e){return t=>new Za(t,e)}const Qi={highest:_n(Li.highest),high:_n(Li.high),default:_n(Li.default),low:_n(Li.low),lowest:_n(Li.lowest)};class Za{constructor(t,i){this.inner=t,this.prec=i}}class wr{of(t){return new io(this,t)}reconfigure(t){return wr.reconfigure.of({compartment:this,extension:t})}get(t){return t.config.compartments.get(this)}}class io{constructor(t,i){this.compartment=t,this.inner=i}}class br{constructor(t,i,n,r,o,s){for(this.base=t,this.compartments=i,this.dynamicSlots=n,this.address=r,this.staticValues=o,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(t){let i=this.address[t.id];return i==null?t.default:this.staticValues[i>>1]}static resolve(t,i,n){let r=[],o=Object.create(null),s=new Map;for(let m of Xf(t,i,s))m instanceof jt?r.push(m):(o[m.facet.id]||(o[m.facet.id]=[])).push(m);let a=Object.create(null),h=[],c=[];for(let m of r)a[m.id]=c.length<<1,c.push(v=>m.slot(v));let d=n==null?void 0:n.config.facets;for(let m in o){let v=o[m],S=v[0].facet,g=d&&d[m]||[];if(v.every(y=>y.type==0))if(a[S.id]=h.length<<1|1,to(g,v))h.push(n.facet(S));else{let y=S.combine(v.map(P=>P.value));h.push(n&&S.compare(y,n.facet(S))?n.facet(S):y)}else{for(let y of v)y.type==0?(a[y.id]=h.length<<1|1,h.push(y.value)):(a[y.id]=c.length<<1,c.push(P=>y.dynamicSlot(P)));a[S.id]=c.length<<1,c.push(y=>Qf(y,S,v))}}let f=c.map(m=>m(a));return new br(t,s,f,a,h,o)}}function Xf(e,t,i){let n=[[],[],[],[],[]],r=new Map;function o(s,a){let h=r.get(s);if(h!=null){if(h<=a)return;let c=n[h].indexOf(s);c>-1&&n[h].splice(c,1),s instanceof io&&i.delete(s.compartment)}if(r.set(s,a),Array.isArray(s))for(let c of s)o(c,a);else if(s instanceof io){if(i.has(s.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=t.get(s.compartment)||s.inner;i.set(s.compartment,c),o(c,a)}else if(s instanceof Za)o(s.inner,s.prec);else if(s instanceof jt)n[a].push(s),s.provides&&o(s.provides,a);else if(s instanceof Sr)n[a].push(s),s.facet.extensions&&o(s.facet.extensions,Li.default);else{let c=s.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(c,a)}}return o(e,Li.default),n.reduce((s,a)=>s.concat(a))}function In(e,t){if(t&1)return 2;let i=t>>1,n=e.status[i];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;e.status[i]=4;let r=e.computeSlot(e,e.config.dynamicSlots[i]);return e.status[i]=2|r}function Er(e,t){return t&1?e.config.staticValues[t>>1]:e.values[t>>1]}const za=K.define(),qa=K.define({combine:e=>e.some(t=>t),static:!0}),Ua=K.define({combine:e=>e.length?e[0]:void 0,static:!0}),Ga=K.define(),Va=K.define(),Ha=K.define(),Ja=K.define({combine:e=>e.length?e[0]:!1});class Xi{constructor(t,i){this.type=t,this.value=i}static define(){return new $f}}class $f{of(t){return new Xi(this,t)}}class Nf{constructor(t){this.map=t}of(t){return new ht(this,t)}}class ht{constructor(t,i){this.type=t,this.value=i}map(t){let i=this.type.map(this.value,t);return i===void 0?void 0:i==this.value?this:new ht(this.type,i)}is(t){return this.type==t}static define(t={}){return new Nf(t.map||(i=>i))}static mapEffects(t,i){if(!t.length)return t;let n=[];for(let r of t){let o=r.map(i);o&&n.push(o)}return n}}ht.reconfigure=ht.define(),ht.appendConfig=ht.define();class Zt{constructor(t,i,n,r,o,s){this.startState=t,this.changes=i,this.selection=n,this.effects=r,this.annotations=o,this.scrollIntoView=s,this._doc=null,this._state=null,n&&Ya(n,i.newLength),o.some(a=>a.type==Zt.time)||(this.annotations=o.concat(Zt.time.of(Date.now())))}static create(t,i,n,r,o,s){return new Zt(t,i,n,r,o,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let i of this.annotations)if(i.type==t)return i.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let i=this.annotation(Zt.userEvent);return!!(i&&(i==t||i.length>t.length&&i.slice(0,t.length)==t&&i[t.length]=="."))}}Zt.time=Xi.define(),Zt.userEvent=Xi.define(),Zt.addToHistory=Xi.define(),Zt.remote=Xi.define();function Ff(e,t){let i=[];for(let n=0,r=0;;){let o,s;if(n<e.length&&(r==t.length||t[r]>=e[n]))o=e[n++],s=e[n++];else if(r<t.length)o=t[r++],s=t[r++];else return i;!i.length||i[i.length-1]<o?i.push(o,s):i[i.length-1]<s&&(i[i.length-1]=s)}}function Ka(e,t,i){var n;let r,o,s;return i?(r=t.changes,o=Wt.empty(t.changes.length),s=e.changes.compose(t.changes)):(r=t.changes.map(e.changes),o=e.changes.mapDesc(t.changes,!0),s=e.changes.compose(r)),{changes:s,selection:t.selection?t.selection.map(o):(n=e.selection)===null||n===void 0?void 0:n.map(r),effects:ht.mapEffects(e.effects,r).concat(ht.mapEffects(t.effects,o)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function no(e,t,i){let n=t.selection,r=Ji(t.annotations);return t.userEvent&&(r=r.concat(Zt.userEvent.of(t.userEvent))),{changes:t.changes instanceof Wt?t.changes:Wt.of(t.changes||[],i,e.facet(Ua)),selection:n&&(n instanceof j?n:j.single(n.anchor,n.head)),effects:Ji(t.effects),annotations:r,scrollIntoView:!!t.scrollIntoView}}function th(e,t,i){let n=no(e,t.length?t[0]:{},e.doc.length);t.length&&t[0].filter===!1&&(i=!1);for(let o=1;o<t.length;o++){t[o].filter===!1&&(i=!1);let s=!!t[o].sequential;n=Ka(n,no(e,t[o],s?n.changes.newLength:e.doc.length),s)}let r=Zt.create(e,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return Bf(i?Mf(r):r)}function Mf(e){let t=e.startState,i=!0;for(let r of t.facet(Ga)){let o=r(e);if(o===!1){i=!1;break}Array.isArray(o)&&(i=i===!0?o:Ff(i,o))}if(i!==!0){let r,o;if(i===!1)o=e.changes.invertedDesc,r=Wt.empty(t.doc.length);else{let s=e.changes.filter(i);r=s.changes,o=s.filtered.mapDesc(s.changes).invertedDesc}e=Zt.create(t,r,e.selection&&e.selection.map(o),ht.mapEffects(e.effects,o),e.annotations,e.scrollIntoView)}let n=t.facet(Va);for(let r=n.length-1;r>=0;r--){let o=n[r](e);o instanceof Zt?e=o:Array.isArray(o)&&o.length==1&&o[0]instanceof Zt?e=o[0]:e=th(t,Ji(o),!1)}return e}function Bf(e){let t=e.startState,i=t.facet(Ha),n=e;for(let r=i.length-1;r>=0;r--){let o=i[r](e);o&&Object.keys(o).length&&(n=Ka(e,no(t,o,e.changes.newLength),!0))}return n==e?e:Zt.create(t,e.changes,e.selection,n.effects,n.annotations,n.scrollIntoView)}const Rf=[];function Ji(e){return e==null?Rf:Array.isArray(e)?e:[e]}var It=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(It||(It={}));const Yf=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let ro;try{ro=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Wf(e){if(ro)return ro.test(e);for(let t=0;t<e.length;t++){let i=e[t];if(/\w/.test(i)||i>"\x80"&&(i.toUpperCase()!=i.toLowerCase()||Yf.test(i)))return!0}return!1}function jf(e){return t=>{if(!/\S/.test(t))return It.Space;if(Wf(t))return It.Word;for(let i=0;i<e.length;i++)if(t.indexOf(e[i])>-1)return It.Word;return It.Other}}class vt{constructor(t,i,n,r,o,s){this.config=t,this.doc=i,this.selection=n,this.values=r,this.status=t.statusTemplate.slice(),this.computeSlot=o,s&&(s._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)In(this,a<<1);this.computeSlot=null}field(t,i=!0){let n=this.config.address[t.id];if(n==null){if(i)throw new RangeError("Field is not present in this state");return}return In(this,n),Er(this,n)}update(...t){return th(this,t,!0)}applyTransaction(t){let i=this.config,{base:n,compartments:r}=i;for(let s of t.effects)s.is(wr.reconfigure)?(i&&(r=new Map,i.compartments.forEach((a,h)=>r.set(h,a)),i=null),r.set(s.value.compartment,s.value.extension)):s.is(ht.reconfigure)?(i=null,n=s.value):s.is(ht.appendConfig)&&(i=null,n=Ji(n).concat(s.value));let o;i?o=t.startState.values.slice():(i=br.resolve(n,r,this),o=new vt(i,this.doc,this.selection,i.dynamicSlots.map(()=>null),(s,a)=>a.reconfigure(s,this),null).values),new vt(i,t.newDoc,t.newSelection,o,(s,a)=>a.update(s,t),t)}replaceSelection(t){return typeof t=="string"&&(t=this.toText(t)),this.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:t},range:j.cursor(i.from+t.length)}))}changeByRange(t){let i=this.selection,n=t(i.ranges[0]),r=this.changes(n.changes),o=[n.range],s=Ji(n.effects);for(let a=1;a<i.ranges.length;a++){let h=t(i.ranges[a]),c=this.changes(h.changes),d=c.map(r);for(let m=0;m<a;m++)o[m]=o[m].map(d);let f=r.mapDesc(c,!0);o.push(h.range.map(f)),r=r.compose(d),s=ht.mapEffects(s,d).concat(ht.mapEffects(Ji(h.effects),f))}return{changes:r,selection:j.create(o,i.mainIndex),effects:s}}changes(t=[]){return t instanceof Wt?t:Wt.of(t,this.doc.length,this.facet(vt.lineSeparator))}toText(t){return Ct.of(t.split(this.facet(vt.lineSeparator)||Vs))}sliceDoc(t=0,i=this.doc.length){return this.doc.sliceString(t,i,this.lineBreak)}facet(t){let i=this.config.address[t.id];return i==null?t.default:(In(this,i),Er(this,i))}toJSON(t){let i={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let n in t){let r=t[n];r instanceof jt&&this.config.address[r.id]!=null&&(i[n]=r.spec.toJSON(this.field(t[n]),this))}return i}static fromJSON(t,i={},n){if(!t||typeof t.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(n){for(let o in n)if(Object.prototype.hasOwnProperty.call(t,o)){let s=n[o],a=t[o];r.push(s.init(h=>s.spec.fromJSON(a,h)))}}return vt.create({doc:t.doc,selection:j.fromJSON(t.selection),extensions:i.extensions?r.concat([i.extensions]):r})}static create(t={}){let i=br.resolve(t.extensions||[],new Map),n=t.doc instanceof Ct?t.doc:Ct.of((t.doc||"").split(i.staticFacet(vt.lineSeparator)||Vs)),r=t.selection?t.selection instanceof j?t.selection:j.single(t.selection.anchor,t.selection.head):j.single(0);return Ya(r,n.length),i.staticFacet(qa)||(r=r.asSingle()),new vt(i,n,r,i.dynamicSlots.map(()=>null),(o,s)=>s.create(o),null)}get tabSize(){return this.facet(vt.tabSize)}get lineBreak(){return this.facet(vt.lineSeparator)||`
`}get readOnly(){return this.facet(Ja)}phrase(t,...i){for(let n of this.facet(vt.phrases))if(Object.prototype.hasOwnProperty.call(n,t)){t=n[t];break}return i.length&&(t=t.replace(/\$(\$|\d*)/g,(n,r)=>{if(r=="$")return"$";let o=+(r||1);return!o||o>i.length?n:i[o-1]})),t}languageDataAt(t,i,n=-1){let r=[];for(let o of this.facet(za))for(let s of o(this,i,n))Object.prototype.hasOwnProperty.call(s,t)&&r.push(s[t]);return r}charCategorizer(t){return jf(this.languageDataAt("wordChars",t).join(""))}wordAt(t){let{text:i,from:n,length:r}=this.doc.lineAt(t),o=this.charCategorizer(t),s=t-n,a=t-n;for(;s>0;){let h=ue(i,s,!1);if(o(i.slice(h,s))!=It.Word)break;s=h}for(;a<r;){let h=ue(i,a);if(o(i.slice(a,h))!=It.Word)break;a=h}return s==a?null:j.range(s+n,a+n)}}vt.allowMultipleSelections=qa,vt.tabSize=K.define({combine:e=>e.length?e[0]:4}),vt.lineSeparator=Ua,vt.readOnly=Ja,vt.phrases=K.define({compare(e,t){let i=Object.keys(e),n=Object.keys(t);return i.length==n.length&&i.every(r=>e[r]==t[r])}}),vt.languageData=za,vt.changeFilter=Ga,vt.transactionFilter=Va,vt.transactionExtender=Ha,wr.reconfigure=ht.define();function qe(e,t,i={}){let n={};for(let r of e)for(let o of Object.keys(r)){let s=r[o],a=n[o];if(a===void 0)n[o]=s;else if(!(a===s||s===void 0))if(Object.hasOwnProperty.call(i,o))n[o]=i[o](a,s);else throw new Error("Config merge conflict for field "+o)}for(let r in t)n[r]===void 0&&(n[r]=t[r]);return n}class $i{eq(t){return this==t}range(t,i=t){return Ln.create(t,i,this)}}$i.prototype.startSide=$i.prototype.endSide=0,$i.prototype.point=!1,$i.prototype.mapMode=Kt.TrackDel;class Ln{constructor(t,i,n){this.from=t,this.to=i,this.value=n}static create(t,i,n){return new Ln(t,i,n)}}function so(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class oo{constructor(t,i,n,r){this.from=t,this.to=i,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(t,i,n,r=0){let o=n?this.to:this.from;for(let s=r,a=o.length;;){if(s==a)return s;let h=s+a>>1,c=o[h]-t||(n?this.value[h].endSide:this.value[h].startSide)-i;if(h==s)return c>=0?s:a;c>=0?a=h:s=h+1}}between(t,i,n,r){for(let o=this.findIndex(i,-1e9,!0),s=this.findIndex(n,1e9,!1,o);o<s;o++)if(r(this.from[o]+t,this.to[o]+t,this.value[o])===!1)return!1}map(t,i){let n=[],r=[],o=[],s=-1,a=-1;for(let h=0;h<this.value.length;h++){let c=this.value[h],d=this.from[h]+t,f=this.to[h]+t,m,v;if(d==f){let S=i.mapPos(d,c.startSide,c.mapMode);if(S==null||(m=v=S,c.startSide!=c.endSide&&(v=i.mapPos(d,c.endSide),v<m)))continue}else if(m=i.mapPos(d,c.startSide),v=i.mapPos(f,c.endSide),m>v||m==v&&c.startSide>0&&c.endSide<=0)continue;(v-m||c.endSide-c.startSide)<0||(s<0&&(s=m),c.point&&(a=Math.max(a,v-m)),n.push(c),r.push(m-s),o.push(v-s))}return{mapped:n.length?new oo(r,o,n,a):null,pos:s}}}class wt{constructor(t,i,n,r){this.chunkPos=t,this.chunk=i,this.nextLayer=n,this.maxPoint=r}static create(t,i,n,r){return new wt(t,i,n,r)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let i of this.chunk)t+=i.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:i=[],sort:n=!1,filterFrom:r=0,filterTo:o=this.length}=t,s=t.filter;if(i.length==0&&!s)return this;if(n&&(i=i.slice().sort(so)),this.isEmpty)return i.length?wt.of(i):this;let a=new ih(this,null,-1).goto(0),h=0,c=[],d=new fi;for(;a.value||h<i.length;)if(h<i.length&&(a.from-i[h].from||a.startSide-i[h].value.startSide)>=0){let f=i[h++];d.addInner(f.from,f.to,f.value)||c.push(f)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(h==i.length||this.chunkEnd(a.chunkIndex)<i[h].from)&&(!s||r>this.chunkEnd(a.chunkIndex)||o<this.chunkPos[a.chunkIndex])&&d.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!s||r>a.to||o<a.from||s(a.from,a.to,a.value))&&(d.addInner(a.from,a.to,a.value)||c.push(Ln.create(a.from,a.to,a.value))),a.next());return d.finishInner(this.nextLayer.isEmpty&&!c.length?wt.empty:this.nextLayer.update({add:c,filter:s,filterFrom:r,filterTo:o}))}map(t){if(t.empty||this.isEmpty)return this;let i=[],n=[],r=-1;for(let s=0;s<this.chunk.length;s++){let a=this.chunkPos[s],h=this.chunk[s],c=t.touchesRange(a,a+h.length);if(c===!1)r=Math.max(r,h.maxPoint),i.push(h),n.push(t.mapPos(a));else if(c===!0){let{mapped:d,pos:f}=h.map(a,t);d&&(r=Math.max(r,d.maxPoint),i.push(d),n.push(f))}}let o=this.nextLayer.map(t);return i.length==0?o:new wt(n,i,o||wt.empty,r)}between(t,i,n){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let o=this.chunkPos[r],s=this.chunk[r];if(i>=o&&t<=o+s.length&&s.between(o,t-o,i-o,n)===!1)return}this.nextLayer.between(t,i,n)}}iter(t=0){return Qn.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,i=0){return Qn.from(t).goto(i)}static compare(t,i,n,r,o=-1){let s=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),a=i.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),h=eh(s,a,n),c=new Xn(s,h,o),d=new Xn(a,h,o);n.iterGaps((f,m,v)=>nh(c,f,d,m,v,r)),n.empty&&n.length==0&&nh(c,0,d,0,0,r)}static eq(t,i,n=0,r){r==null&&(r=1e9);let o=t.filter(d=>!d.isEmpty&&i.indexOf(d)<0),s=i.filter(d=>!d.isEmpty&&t.indexOf(d)<0);if(o.length!=s.length)return!1;if(!o.length)return!0;let a=eh(o,s),h=new Xn(o,a,0).goto(n),c=new Xn(s,a,0).goto(n);for(;;){if(h.to!=c.to||!ao(h.active,c.active)||h.point&&(!c.point||!h.point.eq(c.point)))return!1;if(h.to>r)return!0;h.next(),c.next()}}static spans(t,i,n,r,o=-1){let s=new Xn(t,null,o).goto(i),a=i,h=s.openStart;for(;;){let c=Math.min(s.to,n);if(s.point?(r.point(a,c,s.point,s.activeForPoint(s.to),h,s.pointRank),h=s.openEnd(c)+(s.to>c?1:0)):c>a&&(r.span(a,c,s.active,h),h=s.openEnd(c)),s.to>n)break;a=s.to,s.next()}return h}static of(t,i=!1){let n=new fi;for(let r of t instanceof Ln?[t]:i?Zf(t):t)n.add(r.from,r.to,r.value);return n.finish()}}wt.empty=new wt([],[],null,-1);function Zf(e){if(e.length>1)for(let t=e[0],i=1;i<e.length;i++){let n=e[i];if(so(t,n)>0)return e.slice().sort(so);t=n}return e}wt.empty.nextLayer=wt.empty;class fi{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(t){this.chunks.push(new oo(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}add(t,i,n){this.addInner(t,i,n)||(this.nextLayer||(this.nextLayer=new fi)).add(t,i,n)}addInner(t,i,n){let r=t-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(t-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(i-this.chunkStart),this.last=n,this.lastFrom=t,this.lastTo=i,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,i-t)),!0)}addChunk(t,i){if((t-this.lastTo||i.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,i.maxPoint),this.chunks.push(i),this.chunkPos.push(t);let n=i.value.length-1;return this.last=i.value[n],this.lastFrom=i.from[n]+t,this.lastTo=i.to[n]+t,!0}finish(){return this.finishInner(wt.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return t;let i=wt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,i}}function eh(e,t,i){let n=new Map;for(let o of e)for(let s=0;s<o.chunk.length;s++)o.chunk[s].maxPoint<=0&&n.set(o.chunk[s],o.chunkPos[s]);let r=new Set;for(let o of t)for(let s=0;s<o.chunk.length;s++){let a=n.get(o.chunk[s]);a!=null&&(i?i.mapPos(a):a)==o.chunkPos[s]&&!(i!=null&&i.touchesRange(a,a+o.chunk[s].length))&&r.add(o.chunk[s])}return r}class ih{constructor(t,i,n,r=0){this.layer=t,this.skip=i,this.minPoint=n,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t,i=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,i,!1),this}gotoInner(t,i,n){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<t||r.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],i,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(t,i){(this.to-t||this.endSide-i)<0&&this.gotoInner(t,i,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let t=this.layer.chunkPos[this.chunkIndex],i=this.layer.chunk[this.chunkIndex],n=t+i.from[this.rangeIndex];if(this.from=n,this.to=t+i.to[this.rangeIndex],this.value=i.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.rank-t.rank||this.to-t.to||this.endSide-t.endSide}}class Qn{constructor(t){this.heap=t}static from(t,i=null,n=-1){let r=[];for(let o=0;o<t.length;o++)for(let s=t[o];!s.isEmpty;s=s.nextLayer)s.maxPoint>=n&&r.push(new ih(s,i,n,o));return r.length==1?r[0]:new Qn(r)}get startSide(){return this.value?this.value.startSide:0}goto(t,i=-1e9){for(let n of this.heap)n.goto(t,i);for(let n=this.heap.length>>1;n>=0;n--)lo(this.heap,n);return this.next(),this}forward(t,i){for(let n of this.heap)n.forward(t,i);for(let n=this.heap.length>>1;n>=0;n--)lo(this.heap,n);(this.to-t||this.value.endSide-i)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),lo(this.heap,0)}}}function lo(e,t){for(let i=e[t];;){let n=(t<<1)+1;if(n>=e.length)break;let r=e[n];if(n+1<e.length&&r.compare(e[n+1])>=0&&(r=e[n+1],n++),i.compare(r)<0)break;e[n]=i,e[t]=r,t=n}}class Xn{constructor(t,i,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Qn.from(t,i,n)}goto(t,i=-1e9){return this.cursor.goto(t,i),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=i,this.openStart=-1,this.next(),this}forward(t,i){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-i)<0;)this.removeActive(this.minActive);this.cursor.forward(t,i)}removeActive(t){Dr(this.active,t),Dr(this.activeTo,t),Dr(this.activeRank,t),this.minActive=rh(this.active,this.activeTo)}addActive(t){let i=0,{value:n,to:r,rank:o}=this.cursor;for(;i<this.activeRank.length&&this.activeRank[i]<=o;)i++;Tr(this.active,i,n),Tr(this.activeTo,i,r),Tr(this.activeRank,i,o),t&&Tr(t,i,this.cursor.from),this.minActive=rh(this.active,this.activeTo)}next(){let t=this.to,i=this.point;this.point=null;let n=this.openStart<0?[]:null,r=0;for(;;){let o=this.minActive;if(o>-1&&(this.activeTo[o]-this.cursor.from||this.active[o].endSide-this.cursor.startSide)<0){if(this.activeTo[o]>t){this.to=this.activeTo[o],this.endSide=this.active[o].endSide;break}this.removeActive(o),n&&Dr(n,o)}else if(this.cursor.value)if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(n),this.cursor.from<t&&this.cursor.to>t&&r++,this.cursor.next();else if(i&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.from<t&&(r=1),this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){let o=0;for(;o<n.length&&n[o]<t;)o++;this.openStart=o+r}}activeForPoint(t){if(!this.active.length)return this.active;let i=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>t||this.activeTo[n]==t&&this.active[n].endSide>=this.point.endSide)&&i.push(this.active[n]);return i.reverse()}openEnd(t){let i=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>t;n--)i++;return i}}function nh(e,t,i,n,r,o){e.goto(t),i.goto(n);let s=n+r,a=n,h=n-t;for(;;){let c=e.to+h-i.to||e.endSide-i.endSide,d=c<0?e.to+h:i.to,f=Math.min(d,s);if(e.point||i.point?e.point&&i.point&&(e.point==i.point||e.point.eq(i.point))&&ao(e.activeForPoint(e.to+h),i.activeForPoint(i.to))||o.comparePoint(a,f,e.point,i.point):f>a&&!ao(e.active,i.active)&&o.compareRange(a,f,e.active,i.active),d>s)break;a=d,c<=0&&e.next(),c>=0&&i.next()}}function ao(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!=t[i]&&!e[i].eq(t[i]))return!1;return!0}function Dr(e,t){for(let i=t,n=e.length-1;i<n;i++)e[i]=e[i+1];e.pop()}function Tr(e,t,i){for(let n=e.length-1;n>=t;n--)e[n+1]=e[n];e[t]=i}function rh(e,t){let i=-1,n=1e9;for(let r=0;r<t.length;r++)(t[r]-n||e[r].endSide-e[i].endSide)<0&&(i=r,n=t[r]);return i}function $n(e,t,i=e.length){let n=0;for(let r=0;r<i;)e.charCodeAt(r)==9?(n+=t-n%t,r++):(n++,r=ue(e,r));return n}function ho(e,t,i,n){for(let r=0,o=0;;){if(o>=t)return r;if(r==e.length)break;o+=e.charCodeAt(r)==9?i-o%i:1,r=ue(e,r)}return n===!0?-1:e.length}const uo="\u037C",sh=typeof Symbol>"u"?"__"+uo:Symbol.for(uo),co=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class mi{constructor(t,i){this.rules=[];let{finish:n}=i||{};function r(s){return/^@/.test(s)?[s]:s.split(/,\s*/)}function o(s,a,h,c){let d=[],f=/^@(\w+)\b/.exec(s[0]),m=f&&f[1]=="keyframes";if(f&&a==null)return h.push(s[0]+";");for(let v in a){let S=a[v];if(/&/.test(v))o(v.split(/,\s*/).map(g=>s.map(y=>g.replace(/&/,y))).reduce((g,y)=>g.concat(y)),S,h);else if(S&&typeof S=="object"){if(!f)throw new RangeError("The value of a property ("+v+") should be a primitive value.");o(r(v),S,d,m)}else S!=null&&d.push(v.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+S+";")}(d.length||m)&&h.push((n&&!f&&!c?s.map(n):s).join(", ")+" {"+d.join(" ")+"}")}for(let s in t)o(r(s),t[s],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let t=oh[sh]||1;return oh[sh]=t+1,uo+t.toString(36)}static mount(t,i){(t[co]||new zf(t)).mount(Array.isArray(i)?i:[i])}}let Ar=null;class zf{constructor(t){if(!t.head&&t.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(Ar)return t.adoptedStyleSheets=[Ar.sheet].concat(t.adoptedStyleSheets),t[co]=Ar;this.sheet=new CSSStyleSheet,t.adoptedStyleSheets=[this.sheet].concat(t.adoptedStyleSheets),Ar=this}else{this.styleTag=(t.ownerDocument||t).createElement("style");let i=t.head||t;i.insertBefore(this.styleTag,i.firstChild)}this.modules=[],t[co]=this}mount(t){let i=this.sheet,n=0,r=0;for(let o=0;o<t.length;o++){let s=t[o],a=this.modules.indexOf(s);if(a<r&&a>-1&&(this.modules.splice(a,1),r--,a=-1),a==-1){if(this.modules.splice(r++,0,s),i)for(let h=0;h<s.rules.length;h++)i.insertRule(s.rules[h],n++)}else{for(;r<a;)n+=this.modules[r++].rules.length;n+=s.rules.length,r++}}if(!i){let o="";for(let s=0;s<this.modules.length;s++)o+=this.modules[s].getRules()+`
`;this.styleTag.textContent=o}}}var gi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Nn={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},lh=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent);typeof navigator<"u"&&/Gecko\/\d+/.test(navigator.userAgent);for(var qf=typeof navigator<"u"&&/Mac/.test(navigator.platform),Uf=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Gf=qf||lh&&+lh[1]<57,te=0;te<10;te++)gi[48+te]=gi[96+te]=String(te);for(var te=1;te<=24;te++)gi[te+111]="F"+te;for(var te=65;te<=90;te++)gi[te]=String.fromCharCode(te+32),Nn[te]=String.fromCharCode(te);for(var po in gi)Nn.hasOwnProperty(po)||(Nn[po]=gi[po]);function Vf(e){var t=Gf&&(e.ctrlKey||e.altKey||e.metaKey)||Uf&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",i=!t&&e.key||(e.shiftKey?Nn:gi)[e.keyCode]||e.key||"Unidentified";return i=="Esc"&&(i="Escape"),i=="Del"&&(i="Delete"),i=="Left"&&(i="ArrowLeft"),i=="Up"&&(i="ArrowUp"),i=="Right"&&(i="ArrowRight"),i=="Down"&&(i="ArrowDown"),i}function kr(e){let t;return e.nodeType==11?t=e.getSelection?e:e.ownerDocument:t=e,t.getSelection()}function Ki(e,t){return t?e==t||e.contains(t.nodeType!=1?t.parentNode:t):!1}function Hf(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function _r(e,t){if(!t.anchorNode)return!1;try{return Ki(e,t.anchorNode)}catch{return!1}}function Fn(e){return e.nodeType==3?en(e,0,e.nodeValue.length).getClientRects():e.nodeType==1?e.getClientRects():[]}function Ir(e,t,i,n){return i?ah(e,t,i,n,-1)||ah(e,t,i,n,1):!1}function Lr(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t}function ah(e,t,i,n,r){for(;;){if(e==i&&t==n)return!0;if(t==(r<0?0:Mn(e))){if(e.nodeName=="DIV")return!1;let o=e.parentNode;if(!o||o.nodeType!=1)return!1;t=Lr(e)+(r<0?0:1),e=o}else if(e.nodeType==1){if(e=e.childNodes[t+(r<0?-1:0)],e.nodeType==1&&e.contentEditable=="false")return!1;t=r<0?Mn(e):0}else return!1}}function Mn(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}const hh={left:0,right:0,top:0,bottom:0};function Qr(e,t){let i=t?e.left:e.right;return{left:i,right:i,top:e.top,bottom:e.bottom}}function Jf(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function Kf(e,t,i,n,r,o,s,a){let h=e.ownerDocument,c=h.defaultView;for(let d=e;d;)if(d.nodeType==1){let f,m=d==h.body;if(m)f=Jf(c);else{if(d.scrollHeight<=d.clientHeight&&d.scrollWidth<=d.clientWidth){d=d.assignedSlot||d.parentNode;continue}let g=d.getBoundingClientRect();f={left:g.left,right:g.left+d.clientWidth,top:g.top,bottom:g.top+d.clientHeight}}let v=0,S=0;if(r=="nearest")t.top<f.top?(S=-(f.top-t.top+s),i>0&&t.bottom>f.bottom+S&&(S=t.bottom-f.bottom+S+s)):t.bottom>f.bottom&&(S=t.bottom-f.bottom+s,i<0&&t.top-S<f.top&&(S=-(f.top+S-t.top+s)));else{let g=t.bottom-t.top,y=f.bottom-f.top;S=(r=="center"&&g<=y?t.top+g/2-y/2:r=="start"||r=="center"&&i<0?t.top-s:t.bottom-y+s)-f.top}if(n=="nearest"?t.left<f.left?(v=-(f.left-t.left+o),i>0&&t.right>f.right+v&&(v=t.right-f.right+v+o)):t.right>f.right&&(v=t.right-f.right+o,i<0&&t.left<f.left+v&&(v=-(f.left+v-t.left+o))):v=(n=="center"?t.left+(t.right-t.left)/2-(f.right-f.left)/2:n=="start"==a?t.left-o:t.right-(f.right-f.left)+o)-f.left,v||S)if(m)c.scrollBy(v,S);else{let g=0,y=0;if(S){let P=d.scrollTop;d.scrollTop+=S,y=d.scrollTop-P}if(v){let P=d.scrollLeft;d.scrollLeft+=v,g=d.scrollLeft-P}t={left:t.left-g,top:t.top-y,right:t.right-g,bottom:t.bottom-y},g&&Math.abs(g-v)<1&&(n="nearest"),y&&Math.abs(y-S)<1&&(r="nearest")}if(m)break;d=d.assignedSlot||d.parentNode}else if(d.nodeType==11)d=d.host;else break}class t0{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){this.set(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset)}set(t,i,n,r){this.anchorNode=t,this.anchorOffset=i,this.focusNode=n,this.focusOffset=r}}let tn=null;function uh(e){if(e.setActive)return e.setActive();if(tn)return e.focus(tn);let t=[];for(let i=e;i&&(t.push(i,i.scrollTop,i.scrollLeft),i!=i.ownerDocument);i=i.parentNode);if(e.focus(tn==null?{get preventScroll(){return tn={preventScroll:!0},!0}}:void 0),!tn){tn=!1;for(let i=0;i<t.length;){let n=t[i++],r=t[i++],o=t[i++];n.scrollTop!=r&&(n.scrollTop=r),n.scrollLeft!=o&&(n.scrollLeft=o)}}}let ch;function en(e,t,i=t){let n=ch||(ch=document.createRange());return n.setEnd(e,i),n.setStart(e,t),n}function Bn(e,t,i){let n={key:t,code:t,keyCode:i,which:i,cancelable:!0},r=new KeyboardEvent("keydown",n);r.synthetic=!0,e.dispatchEvent(r);let o=new KeyboardEvent("keyup",n);return o.synthetic=!0,e.dispatchEvent(o),r.defaultPrevented||o.defaultPrevented}function e0(e){for(;e;){if(e&&(e.nodeType==9||e.nodeType==11&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}function ph(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}function i0(e,t){let i=t.focusNode,n=t.focusOffset;if(!i||t.anchorNode!=i||t.anchorOffset!=n)return!1;for(;;)if(n){if(i.nodeType!=1)return!1;let r=i.childNodes[n-1];r.contentEditable=="false"?n--:(i=r,n=Mn(i))}else{if(i==e)return!0;n=Lr(i),i=i.parentNode}}class oe{constructor(t,i,n=!0){this.node=t,this.offset=i,this.precise=n}static before(t,i){return new oe(t.parentNode,Lr(t),i)}static after(t,i){return new oe(t.parentNode,Lr(t)+1,i)}}const fo=[];class Tt{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let i=this.posAtStart;for(let n of this.children){if(n==t)return i;i+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}coordsAt(t,i){return null}sync(t){if(this.dirty&2){let i=this.dom,n=null,r;for(let o of this.children){if(o.dirty){if(!o.dom&&(r=n?n.nextSibling:i.firstChild)){let s=Tt.get(r);(!s||!s.parent&&s.constructor==o.constructor)&&o.reuseDOM(r)}o.sync(t),o.dirty=0}if(r=n?n.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&r!=o.dom&&(t.written=!0),o.dom.parentNode==i)for(;r&&r!=o.dom;)r=dh(r);else i.insertBefore(o.dom,r);n=o.dom}for(r=n?n.nextSibling:i.firstChild,r&&t&&t.node==i&&(t.written=!0);r;)r=dh(r)}else if(this.dirty&1)for(let i of this.children)i.dirty&&(i.sync(t),i.dirty=0)}reuseDOM(t){}localPosFromDOM(t,i){let n;if(t==this.dom)n=this.dom.childNodes[i];else{let r=Mn(t)==0?0:i==0?-1:1;for(;;){let o=t.parentNode;if(o==this.dom)break;r==0&&o.firstChild!=o.lastChild&&(t==o.firstChild?r=-1:r=1),t=o}r<0?n=t:n=t.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!Tt.get(n);)n=n.nextSibling;if(!n)return this.length;for(let r=0,o=0;;r++){let s=this.children[r];if(s.dom==n)return o;o+=s.length+s.breakAfter}}domBoundsAround(t,i,n=0){let r=-1,o=-1,s=-1,a=-1;for(let h=0,c=n,d=n;h<this.children.length;h++){let f=this.children[h],m=c+f.length;if(c<t&&m>i)return f.domBoundsAround(t,i,c);if(m>=t&&r==-1&&(r=h,o=c),c>i&&f.dom.parentNode==this.dom){s=h,a=d;break}d=m,c=m+f.breakAfter}return{from:o,to:a<0?n+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(t=!1){this.dirty|=2,this.markParentsDirty(t)}markParentsDirty(t){for(let i=this.parent;i;i=i.parent){if(t&&(i.dirty|=2),i.dirty&1)return;i.dirty|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,this.dirty&&this.markParentsDirty(!0))}setDOM(t){this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this}get rootView(){for(let t=this;;){let i=t.parent;if(!i)return t;t=i}}replaceChildren(t,i,n=fo){this.markDirty();for(let r=t;r<i;r++){let o=this.children[r];o.parent==this&&o.destroy()}this.children.splice(t,i-t,...n);for(let r=0;r<n.length;r++)n[r].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new fh(this.children,t,this.children.length)}childPos(t,i=1){return this.childCursor().findPos(t,i)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+(t=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}get isEditable(){return!0}merge(t,i,n,r,o,s){return!1}become(t){return!1}getSide(){return 0}destroy(){this.parent=null}}Tt.prototype.breakAfter=0;function dh(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class fh{constructor(t,i,n){this.children=t,this.pos=i,this.i=n,this.off=0}findPos(t,i=1){for(;;){if(t>this.pos||t==this.pos&&(i>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function mh(e,t,i,n,r,o,s,a,h){let{children:c}=e,d=c.length?c[t]:null,f=o.length?o[o.length-1]:null,m=f?f.breakAfter:s;if(!(t==n&&d&&!s&&!m&&o.length<2&&d.merge(i,r,o.length?f:null,i==0,a,h))){if(n<c.length){let v=c[n];v&&r<v.length?(t==n&&(v=v.split(r),r=0),!m&&f&&v.merge(0,r,f,!0,0,h)?o[o.length-1]=v:(r&&v.merge(0,r,null,!1,0,h),o.push(v))):v!=null&&v.breakAfter&&(f?f.breakAfter=1:s=1),n++}for(d&&(d.breakAfter=s,i>0&&(!s&&o.length&&d.merge(i,d.length,o[0],!1,a,0)?d.breakAfter=o.shift().breakAfter:(i<d.length||d.children.length&&d.children[d.children.length-1].length==0)&&d.merge(i,d.length,null,!1,a,0),t++));t<n&&o.length;)if(c[n-1].become(o[o.length-1]))n--,o.pop(),h=o.length?0:a;else if(c[t].become(o[0]))t++,o.shift(),a=o.length?0:h;else break;!o.length&&t&&n<c.length&&!c[t-1].breakAfter&&c[n].merge(0,0,c[t-1],!1,a,h)&&t--,(t<n||o.length)&&e.replaceChildren(t,n,o)}}function gh(e,t,i,n,r,o){let s=e.childCursor(),{i:a,off:h}=s.findPos(i,1),{i:c,off:d}=s.findPos(t,-1),f=t-i;for(let m of n)f+=m.length;e.length+=f,mh(e,c,d,a,h,n,0,r,o)}let we=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},mo=typeof document<"u"?document:{documentElement:{style:{}}};const go=/Edge\/(\d+)/.exec(we.userAgent),Oh=/MSIE \d/.test(we.userAgent),Oo=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(we.userAgent),Xr=!!(Oh||Oo||go),yh=!Xr&&/gecko\/(\d+)/i.test(we.userAgent),yo=!Xr&&/Chrome\/(\d+)/.exec(we.userAgent),xh="webkitFontSmoothing"in mo.documentElement.style,vh=!Xr&&/Apple Computer/.test(we.vendor),Ph=vh&&(/Mobile\/\w+/.test(we.userAgent)||we.maxTouchPoints>2);var tt={mac:Ph||/Mac/.test(we.platform),windows:/Win/.test(we.platform),linux:/Linux|X11/.test(we.platform),ie:Xr,ie_version:Oh?mo.documentMode||6:Oo?+Oo[1]:go?+go[1]:0,gecko:yh,gecko_version:yh?+(/Firefox\/(\d+)/.exec(we.userAgent)||[0,0])[1]:0,chrome:!!yo,chrome_version:yo?+yo[1]:0,ios:Ph,android:/Android\b/.test(we.userAgent),webkit:xh,safari:vh,webkit_version:xh?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:mo.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const n0=256;class Oi extends Tt{constructor(t){super(),this.text=t}get length(){return this.text.length}createDOM(t){this.setDOM(t||document.createTextNode(this.text))}sync(t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(t){t.nodeType==3&&this.createDOM(t)}merge(t,i,n){return n&&(!(n instanceof Oi)||this.length-(i-t)+n.length>n0)?!1:(this.text=this.text.slice(0,t)+(n?n.text:"")+this.text.slice(i),this.markDirty(),!0)}split(t){let i=new Oi(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),i}localPosFromDOM(t,i){return t==this.dom?i:i?this.text.length:0}domAtPos(t){return new oe(this.dom,t)}domBoundsAround(t,i,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,i){return xo(this.dom,t,i)}}class Ue extends Tt{constructor(t,i=[],n=0){super(),this.mark=t,this.children=i,this.length=n;for(let r of i)r.setParent(this)}setAttrs(t){if(ph(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(let i in this.mark.attrs)t.setAttribute(i,this.mark.attrs[i]);return t}reuseDOM(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.dirty|=6)}sync(t){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(t)}merge(t,i,n,r,o,s){return n&&(!(n instanceof Ue&&n.mark.eq(this.mark))||t&&o<=0||i<this.length&&s<=0)?!1:(gh(this,t,i,n?n.children:[],o-1,s-1),this.markDirty(),!0)}split(t){let i=[],n=0,r=-1,o=0;for(let a of this.children){let h=n+a.length;h>t&&i.push(n<t?a.split(t-n):a),r<0&&n>=t&&(r=o),n=h,o++}let s=this.length-t;return this.length=t,r>-1&&(this.children.length=r,this.markDirty()),new Ue(this.mark,i,s)}domAtPos(t){return wh(this,t)}coordsAt(t,i){return Eh(this,t,i)}}function xo(e,t,i){let n=e.nodeValue.length;t>n&&(t=n);let r=t,o=t,s=0;t==0&&i<0||t==n&&i>=0?tt.chrome||tt.gecko||(t?(r--,s=1):o<n&&(o++,s=-1)):i<0?r--:o<n&&o++;let a=en(e,r,o).getClientRects();if(!a.length)return hh;let h=a[(s?s<0:i>=0)?0:a.length-1];return tt.safari&&!s&&h.width==0&&(h=Array.prototype.find.call(a,c=>c.width)||h),s?Qr(h,s<0):h||null}class yi extends Tt{constructor(t,i,n){super(),this.widget=t,this.length=i,this.side=n,this.prevWidget=null}static create(t,i,n){return new(t.customView||yi)(t,i,n)}split(t){let i=yi.create(this.widget,this.length-t,this.side);return this.length-=t,i}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(t,i,n,r,o,s){return n&&(!(n instanceof yi)||!this.widget.compare(n.widget)||t>0&&o<=0||i<this.length&&s<=0)?!1:(this.length=t+(n?n.length:0)+(this.length-i),!0)}become(t){return t.length==this.length&&t instanceof yi&&t.side==this.side&&this.widget.constructor==t.widget.constructor?(this.widget.eq(t.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(this.length==0)return Ct.empty;let t=this;for(;t.parent;)t=t.parent;let i=t.editorView,n=i&&i.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):Ct.empty}domAtPos(t){return t==0?oe.before(this.dom):oe.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,i){let n=this.dom.getClientRects(),r=null;if(!n.length)return hh;for(let o=t>0?n.length-1:0;r=n[o],!(t>0?o==0:o==n.length-1||r.top<r.bottom);o+=t>0?-1:1);return t==0&&i>0||t==this.length&&i<=0?r:Qr(r,t==0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Ch extends yi{domAtPos(t){let{topView:i,text:n}=this.widget;return i?vo(t,0,i,n,(r,o)=>r.domAtPos(o),r=>new oe(n,Math.min(r,n.nodeValue.length))):new oe(n,Math.min(t,n.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(t,i){let{topView:n,text:r}=this.widget;return n?Sh(t,i,n,r):Math.min(i,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(t,i){let{topView:n,text:r}=this.widget;return n?vo(t,i,n,r,(o,s,a)=>o.coordsAt(s,a),(o,s)=>xo(r,o,s)):xo(r,t,i)}destroy(){var t;super.destroy(),(t=this.widget.topView)===null||t===void 0||t.destroy()}get isEditable(){return!0}}function vo(e,t,i,n,r,o){if(i instanceof Ue){for(let s=i.dom.firstChild;s;s=s.nextSibling){let a=Tt.get(s);if(!a)return o(e,t);let h=Ki(s,n),c=a.length+(h?n.nodeValue.length:0);if(e<c||e==c&&a.getSide()<=0)return h?vo(e,t,a,n,r,o):r(a,e,t);e-=c}return r(i,i.length,-1)}else return i.dom==n?o(e,t):r(i,e,t)}function Sh(e,t,i,n){if(i instanceof Ue)for(let r of i.children){let o=0,s=Ki(r.dom,n);if(Ki(r.dom,e))return o+(s?Sh(e,t,r,n):r.localPosFromDOM(e,t));o+=s?n.nodeValue.length:r.length}else if(i.dom==n)return Math.min(t,n.nodeValue.length);return i.localPosFromDOM(e,t)}class nn extends Tt{constructor(t){super(),this.side=t}get length(){return 0}merge(){return!1}become(t){return t instanceof nn&&t.side==this.side}split(){return new nn(this.side)}sync(){if(!this.dom){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),this.setDOM(t)}}getSide(){return this.side}domAtPos(t){return oe.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(t){let i=this.dom.getBoundingClientRect(),n=r0(this,this.side>0?-1:1);return n&&n.top<i.bottom&&n.bottom>i.top?{left:i.left,right:i.right,top:n.top,bottom:n.bottom}:i}get overrideDOMText(){return Ct.empty}}Oi.prototype.children=yi.prototype.children=nn.prototype.children=fo;function r0(e,t){let i=e.parent,n=i?i.children.indexOf(e):-1;for(;i&&n>=0;)if(t<0?n>0:n<i.children.length){let r=i.children[n+t];if(r instanceof Oi){let o=r.coordsAt(t<0?r.length:0,t);if(o)return o}n+=t}else if(i instanceof Ue&&i.parent)n=i.parent.children.indexOf(i)+(t<0?0:1),i=i.parent;else{let r=i.dom.lastChild;if(r&&r.nodeName=="BR")return r.getClientRects()[0];break}}function wh(e,t){let i=e.dom,{children:n}=e,r=0;for(let o=0;r<n.length;r++){let s=n[r],a=o+s.length;if(!(a==o&&s.getSide()<=0)){if(t>o&&t<a&&s.dom.parentNode==i)return s.domAtPos(t-o);if(t<=o)break;o=a}}for(let o=r;o>0;o--){let s=n[o-1];if(s.dom.parentNode==i)return s.domAtPos(s.length)}for(let o=r;o<n.length;o++){let s=n[o];if(s.dom.parentNode==i)return s.domAtPos(0)}return new oe(i,0)}function bh(e,t,i){let n,{children:r}=e;i>0&&t instanceof Ue&&r.length&&(n=r[r.length-1])instanceof Ue&&n.mark.eq(t.mark)?bh(n,t.children[0],i-1):(r.push(t),t.setParent(e)),e.length+=t.length}function Eh(e,t,i){for(let o=0,s=0;s<e.children.length;s++){let a=e.children[s],h=o+a.length,c;if((i<=0||h==e.length||a.getSide()>0?h>=t:h>t)&&(t<h||s+1==e.children.length||(c=e.children[s+1]).length||c.getSide()>0)){let d=0;if(h==o){if(a.getSide()<=0)continue;d=i=-a.getSide()}let f=a.coordsAt(Math.max(0,t-o),i);return d&&f?Qr(f,i<0):f}o=h}let n=e.dom.lastChild;if(!n)return e.dom.getBoundingClientRect();let r=Fn(n);return r[r.length-1]||null}function Po(e,t){for(let i in e)i=="class"&&t.class?t.class+=" "+e.class:i=="style"&&t.style?t.style+=";"+e.style:t[i]=e[i];return t}function Co(e,t){if(e==t)return!0;if(!e||!t)return!1;let i=Object.keys(e),n=Object.keys(t);if(i.length!=n.length)return!1;for(let r of i)if(n.indexOf(r)==-1||e[r]!==t[r])return!1;return!0}function So(e,t,i){let n=null;if(t)for(let r in t)i&&r in i||e.removeAttribute(n=r);if(i)for(let r in i)t&&t[r]==i[r]||e.setAttribute(n=r,i[r]);return!!n}class li{eq(t){return!1}updateDOM(t){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}ignoreEvent(t){return!0}get customView(){return null}destroy(t){}}var Et=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(Et||(Et={}));class nt extends $i{constructor(t,i,n,r){super(),this.startSide=t,this.endSide=i,this.widget=n,this.spec=r}get heightRelevant(){return!1}static mark(t){return new $r(t)}static widget(t){let i=t.side||0,n=!!t.block;return i+=n?i>0?3e8:-4e8:i>0?1e8:-1e8,new Ni(t,i,i,n,t.widget||null,!1)}static replace(t){let i=!!t.block,n,r;if(t.isBlockGap)n=-5e8,r=4e8;else{let{start:o,end:s}=Dh(t,i);n=(o?i?-3e8:-1:5e8)-1,r=(s?i?2e8:1:-6e8)+1}return new Ni(t,n,r,i,t.widget||null,!0)}static line(t){return new Rn(t)}static set(t,i=!1){return wt.of(t,i)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}nt.none=wt.empty;class $r extends nt{constructor(t){let{start:i,end:n}=Dh(t);super(i?-1:5e8,n?1:-6e8,null,t),this.tagName=t.tagName||"span",this.class=t.class||"",this.attrs=t.attributes||null}eq(t){return this==t||t instanceof $r&&this.tagName==t.tagName&&this.class==t.class&&Co(this.attrs,t.attrs)}range(t,i=t){if(t>=i)throw new RangeError("Mark decorations may not be empty");return super.range(t,i)}}$r.prototype.point=!1;class Rn extends nt{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof Rn&&Co(this.spec.attributes,t.spec.attributes)}range(t,i=t){if(i!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,i)}}Rn.prototype.mapMode=Kt.TrackBefore,Rn.prototype.point=!0;class Ni extends nt{constructor(t,i,n,r,o,s){super(i,n,o,t),this.block=r,this.isReplace=s,this.mapMode=r?i<=0?Kt.TrackBefore:Kt.TrackAfter:Kt.TrackDel}get type(){return this.startSide<this.endSide?Et.WidgetRange:this.startSide<=0?Et.WidgetBefore:Et.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(t){return t instanceof Ni&&s0(this.widget,t.widget)&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide}range(t,i=t){if(this.isReplace&&(t>i||t==i&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&i!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,i)}}Ni.prototype.point=!0;function Dh(e,t=!1){let{inclusiveStart:i,inclusiveEnd:n}=e;return i==null&&(i=e.inclusive),n==null&&(n=e.inclusive),{start:i!=null?i:t,end:n!=null?n:t}}function s0(e,t){return e==t||!!(e&&t&&e.compare(t))}function wo(e,t,i,n=0){let r=i.length-1;r>=0&&i[r]+n>=e?i[r]=Math.max(i[r],t):i.push(e,t)}class ce extends Tt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,i,n,r,o,s){if(n){if(!(n instanceof ce))return!1;this.dom||n.transferDOM(this)}return r&&this.setDeco(n?n.attrs:null),gh(this,t,i,n?n.children:[],o,s),!0}split(t){let i=new ce;if(i.breakAfter=this.breakAfter,this.length==0)return i;let{i:n,off:r}=this.childPos(t);r&&(i.append(this.children[n].split(r),0),this.children[n].merge(r,this.children[n].length,null,!1,0,0),n++);for(let o=n;o<this.children.length;o++)i.append(this.children[o],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=t,i}transferDOM(t){!this.dom||(this.markDirty(),t.setDOM(this.dom),t.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){Co(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t,i){bh(this,t,i)}addLineDeco(t){let i=t.spec.attributes,n=t.spec.class;i&&(this.attrs=Po(i,this.attrs||{})),n&&(this.attrs=Po({class:n},this.attrs||{}))}domAtPos(t){return wh(this,t)}reuseDOM(t){t.nodeName=="DIV"&&(this.setDOM(t),this.dirty|=6)}sync(t){var i;this.dom?this.dirty&4&&(ph(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(So(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(t);let n=this.dom.lastChild;for(;n&&Tt.get(n)instanceof Ue;)n=n.lastChild;if(!n||!this.length||n.nodeName!="BR"&&((i=Tt.get(n))===null||i===void 0?void 0:i.isEditable)==!1&&(!tt.ios||!this.children.some(r=>r instanceof Oi))){let r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let t=0;for(let i of this.children){if(!(i instanceof Oi)||/[^ -~]/.test(i.text))return null;let n=Fn(i.dom);if(n.length!=1)return null;t+=n[0].width}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length}:null}coordsAt(t,i){return Eh(this,t,i)}become(t){return!1}get type(){return Et.Text}static find(t,i){for(let n=0,r=0;n<t.children.length;n++){let o=t.children[n],s=r+o.length;if(s>=i){if(o instanceof ce)return o;if(s>i)break}r=s+o.breakAfter}return null}}class Fi extends Tt{constructor(t,i,n){super(),this.widget=t,this.length=i,this.type=n,this.breakAfter=0,this.prevWidget=null}merge(t,i,n,r,o,s){return n&&(!(n instanceof Fi)||!this.widget.compare(n.widget)||t>0&&o<=0||i<this.length&&s<=0)?!1:(this.length=t+(n?n.length:0)+(this.length-i),!0)}domAtPos(t){return t==0?oe.before(this.dom):oe.after(this.dom,t==this.length)}split(t){let i=this.length-t;this.length=t;let n=new Fi(this.widget,i,this.type);return n.breakAfter=this.breakAfter,n}get children(){return fo}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Ct.empty}domBoundsAround(){return null}become(t){return t instanceof Fi&&t.type==this.type&&t.widget.constructor==this.widget.constructor?(t.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,this.breakAfter=t.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class bo{constructor(t,i,n,r){this.doc=t,this.pos=i,this.end=n,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=i}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!t.breakAfter&&!(t instanceof Fi&&t.type==Et.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new ce),this.atCursorPos=!0),this.curLine}flushBuffer(t){this.pendingBuffer&&(this.curLine.append(Nr(new nn(-1),t),t.length),this.pendingBuffer=0)}addBlockWidget(t){this.flushBuffer([]),this.curLine=null,this.content.push(t)}finish(t){t?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(t,i,n){for(;t>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:s,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(s){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,t--;continue}else this.text=o,this.textOff=0}let r=Math.min(this.text.length-this.textOff,t,512);this.flushBuffer(i.slice(0,n)),this.getLine().append(Nr(new Oi(this.text.slice(this.textOff,this.textOff+r)),i),n),this.atCursorPos=!0,this.textOff+=r,t-=r,n=0}}span(t,i,n,r){this.buildText(i-t,n,r),this.pos=i,this.openStart<0&&(this.openStart=r)}point(t,i,n,r,o,s){if(this.disallowBlockEffectsFor[s]&&n instanceof Ni){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(i>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=i-t;if(n instanceof Ni)if(n.block){let{type:h}=n;h==Et.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Fi(n.widget||new Th("div"),a,h))}else{let h=yi.create(n.widget||new Th("span"),a,n.startSide),c=this.atCursorPos&&!h.isEditable&&o<=r.length&&(t<i||n.startSide>0),d=!h.isEditable&&(t<i||n.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!c&&(this.pendingBuffer=0),this.flushBuffer(r),c&&(f.append(Nr(new nn(1),r),o),o=r.length+Math.max(0,o-r.length)),f.append(Nr(h,r),o),this.atCursorPos=d,this.pendingBuffer=d?t<i?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=i),this.openStart<0&&(this.openStart=o)}static build(t,i,n,r,o){let s=new bo(t,i,n,o);return s.openEnd=wt.spans(r,i,n,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}}function Nr(e,t){for(let i of t)e=new Ue(i,[e],e.length);return e}class Th extends li{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}}const Ah=K.define(),kh=K.define(),_h=K.define(),Ih=K.define(),Eo=K.define(),Lh=K.define(),Qh=K.define({combine:e=>e.some(t=>t)});class Fr{constructor(t,i="nearest",n="nearest",r=5,o=5){this.range=t,this.y=i,this.x=n,this.yMargin=r,this.xMargin=o}map(t){return t.empty?this:new Fr(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin)}}const Xh=ht.define({map:(e,t)=>e.map(t)});function be(e,t,i){let n=e.facet(Ih);n.length?n[0](t):window.onerror?window.onerror(String(t),i,void 0,void 0,t):i?console.error(i+":",t):console.error(t)}const Mr=K.define({combine:e=>e.length?e[0]:!0});let o0=0;const Yn=K.define();class Bt{constructor(t,i,n,r){this.id=t,this.create=i,this.domEventHandlers=n,this.extension=r(this)}static define(t,i){const{eventHandlers:n,provide:r,decorations:o}=i||{};return new Bt(o0++,t,n,s=>{let a=[Yn.of(s)];return o&&a.push(Wn.of(h=>{let c=h.plugin(s);return c?o(c):nt.none})),r&&a.push(r(s)),a})}static fromClass(t,i){return Bt.define(n=>new t(n),i)}}class Do{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}update(t){if(this.value){if(this.mustUpdate){let i=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(i)}catch(n){if(be(i.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(t)}catch(i){be(t.state,i,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var i;if(!((i=this.value)===null||i===void 0)&&i.destroy)try{this.value.destroy()}catch(n){be(t.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const $h=K.define(),Nh=K.define(),Wn=K.define(),Fh=K.define(),Mh=K.define(),jn=K.define();class ai{constructor(t,i,n,r){this.fromA=t,this.toA=i,this.fromB=n,this.toB=r}join(t){return new ai(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let i=t.length,n=this;for(;i>0;i--){let r=t[i-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),t.splice(i-1,1)}}return t.splice(i,0,n),t}static extendWithRanges(t,i){if(i.length==0)return t;let n=[];for(let r=0,o=0,s=0,a=0;;r++){let h=r==t.length?null:t[r],c=s-a,d=h?h.fromB:1e9;for(;o<i.length&&i[o]<d;){let f=i[o],m=i[o+1],v=Math.max(a,f),S=Math.min(d,m);if(v<=S&&new ai(v+c,S+c,v,S).addToSet(n),m>d)break;o+=2}if(!h)return n;new ai(h.fromA,h.toA,h.fromB,h.toB).addToSet(n),s=h.toA,a=h.toB}}}class Br{constructor(t,i,n){this.view=t,this.state=i,this.transactions=n,this.flags=0,this.startState=t.state,this.changes=Wt.empty(this.startState.doc.length);for(let s of n)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,a,h,c)=>r.push(new ai(s,a,h,c))),this.changedRanges=r;let o=t.hasFocus;o!=t.inputState.notifiedFocused&&(t.inputState.notifiedFocused=o,this.flags|=1)}static create(t,i,n){return new Br(t,i,n)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(t=>t.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Lt=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(Lt||(Lt={}));const To=Lt.LTR,l0=Lt.RTL;function Bh(e){let t=[];for(let i=0;i<e.length;i++)t.push(1<<+e[i]);return t}const a0=Bh("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),h0=Bh("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Ao=Object.create(null),Ge=[];for(let e of["()","[]","{}"]){let t=e.charCodeAt(0),i=e.charCodeAt(1);Ao[t]=i,Ao[i]=-t}function u0(e){return e<=247?a0[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?h0[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8203?256:64336<=e&&e<=65023?4:e==8204?256:1}const c0=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class rn{constructor(t,i,n){this.from=t,this.to=i,this.level=n}get dir(){return this.level%2?l0:To}side(t,i){return this.dir==i==t?this.to:this.from}static find(t,i,n,r){let o=-1;for(let s=0;s<t.length;s++){let a=t[s];if(a.from<=i&&a.to>=i){if(a.level==n)return s;(o<0||(r!=0?r<0?a.from<i:a.to>i:t[o].level>a.level))&&(o=s)}}if(o<0)throw new RangeError("Index out of range");return o}}const Qt=[];function p0(e,t){let i=e.length,n=t==To?1:2,r=t==To?2:1;if(!e||n==1&&!c0.test(e))return Rh(i);for(let s=0,a=n,h=n;s<i;s++){let c=u0(e.charCodeAt(s));c==512?c=a:c==8&&h==4&&(c=16),Qt[s]=c==4?2:c,c&7&&(h=c),a=c}for(let s=0,a=n,h=n;s<i;s++){let c=Qt[s];if(c==128)s<i-1&&a==Qt[s+1]&&a&24?c=Qt[s]=a:Qt[s]=256;else if(c==64){let d=s+1;for(;d<i&&Qt[d]==64;)d++;let f=s&&a==8||d<i&&Qt[d]==8?h==1?1:8:256;for(let m=s;m<d;m++)Qt[m]=f;s=d-1}else c==8&&h==1&&(Qt[s]=1);a=c,c&7&&(h=c)}for(let s=0,a=0,h=0,c,d,f;s<i;s++)if(d=Ao[c=e.charCodeAt(s)])if(d<0){for(let m=a-3;m>=0;m-=3)if(Ge[m+1]==-d){let v=Ge[m+2],S=v&2?n:v&4?v&1?r:n:0;S&&(Qt[s]=Qt[Ge[m]]=S),a=m;break}}else{if(Ge.length==189)break;Ge[a++]=s,Ge[a++]=c,Ge[a++]=h}else if((f=Qt[s])==2||f==1){let m=f==n;h=m?0:1;for(let v=a-3;v>=0;v-=3){let S=Ge[v+2];if(S&2)break;if(m)Ge[v+2]|=2;else{if(S&4)break;Ge[v+2]|=4}}}for(let s=0;s<i;s++)if(Qt[s]==256){let a=s+1;for(;a<i&&Qt[a]==256;)a++;let h=(s?Qt[s-1]:n)==1,c=(a<i?Qt[a]:n)==1,d=h==c?h?1:2:n;for(let f=s;f<a;f++)Qt[f]=d;s=a-1}let o=[];if(n==1)for(let s=0;s<i;){let a=s,h=Qt[s++]!=1;for(;s<i&&h==(Qt[s]!=1);)s++;if(h)for(let c=s;c>a;){let d=c,f=Qt[--c]!=2;for(;c>a&&f==(Qt[c-1]!=2);)c--;o.push(new rn(c,d,f?2:1))}else o.push(new rn(a,s,0))}else for(let s=0;s<i;){let a=s,h=Qt[s++]==2;for(;s<i&&h==(Qt[s]==2);)s++;o.push(new rn(a,s,h?1:2))}return o}function Rh(e){return[new rn(0,e,0)]}let Yh="";function d0(e,t,i,n,r){var o;let s=n.head-e.from,a=-1;if(s==0){if(!r||!e.length)return null;t[0].level!=i&&(s=t[0].side(!1,i),a=0)}else if(s==e.length){if(r)return null;let m=t[t.length-1];m.level!=i&&(s=m.side(!0,i),a=t.length-1)}a<0&&(a=rn.find(t,s,(o=n.bidiLevel)!==null&&o!==void 0?o:-1,n.assoc));let h=t[a];s==h.side(r,i)&&(h=t[a+=r?1:-1],s=h.side(!r,i));let c=r==(h.dir==i),d=ue(e.text,s,c);if(Yh=e.text.slice(Math.min(s,d),Math.max(s,d)),d!=h.side(r,i))return j.cursor(d+e.from,c?-1:1,h.level);let f=a==(r?t.length-1:0)?null:t[a+(r?1:-1)];return!f&&h.level!=i?j.cursor(r?e.to:e.from,r?-1:1,i):f&&f.level<h.level?j.cursor(f.side(!r,i)+e.from,r?1:-1,f.level):j.cursor(d+e.from,r?-1:1,h.level)}const xi="\uFFFF";class Wh{constructor(t,i){this.points=t,this.text="",this.lineSeparator=i.facet(vt.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=xi}readRange(t,i){if(!t)return this;let n=t.parentNode;for(let r=t;;){this.findPointBefore(n,r),this.readNode(r);let o=r.nextSibling;if(o==i)break;let s=Tt.get(r),a=Tt.get(o);(s&&a?s.breakAfter:(s?s.breakAfter:jh(r))||jh(o)&&(r.nodeName!="BR"||r.cmIgnore))&&this.lineBreak(),r=o}return this.findPointBefore(n,i),this}readTextNode(t){let i=t.nodeValue;for(let n of this.points)n.node==t&&(n.pos=this.text.length+Math.min(n.offset,i.length));for(let n=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,s=1,a;if(this.lineSeparator?(o=i.indexOf(this.lineSeparator,n),s=this.lineSeparator.length):(a=r.exec(i))&&(o=a.index,s=a[0].length),this.append(i.slice(n,o<0?i.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let h of this.points)h.node==t&&h.pos>this.text.length&&(h.pos-=s-1);n=o+s}}readNode(t){if(t.cmIgnore)return;let i=Tt.get(t),n=i&&i.overrideDOMText;if(n!=null){this.findPointInside(t,n.length);for(let r=n.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else t.nodeType==3?this.readTextNode(t):t.nodeName=="BR"?t.nextSibling&&this.lineBreak():t.nodeType==1&&this.readRange(t.firstChild,null)}findPointBefore(t,i){for(let n of this.points)n.node==t&&t.childNodes[n.offset]==i&&(n.pos=this.text.length)}findPointInside(t,i){for(let n of this.points)(t.nodeType==3?n.node==t:t.contains(n.node))&&(n.pos=this.text.length+Math.min(i,n.offset))}}function jh(e){return e.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}class Zh{constructor(t,i){this.node=t,this.offset=i,this.pos=-1}}class zh extends Tt{constructor(t){super(),this.view=t,this.compositionDeco=nt.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(t.contentDOM),this.children=[new ce],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ai(0,0,0,t.state.doc.length)],0)}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(t){let i=t.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:s,toA:a})=>a<this.minWidthFrom||s>this.minWidthTo)?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=nt.none:(t.transactions.length||this.dirty)&&(this.compositionDeco=m0(this.view,t.changes)),(tt.ie||tt.chrome)&&!this.compositionDeco.size&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let n=this.decorations,r=this.updateDeco(),o=x0(n,r,t.changes);return i=ai.extendWithRanges(i,o),this.dirty==0&&i.length==0?!1:(this.updateInner(i,t.startState.doc.length),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,i);let{observer:n}=this.view;n.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=tt.chrome||tt.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(o),this.dirty=0,o&&(o.written||n.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""});let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Fi&&o.widget instanceof qh&&r.push(o.dom);n.updateGaps(r)}updateChildren(t,i){let n=this.childCursor(i);for(let r=t.length-1;;r--){let o=r>=0?t[r]:null;if(!o)break;let{fromA:s,toA:a,fromB:h,toB:c}=o,{content:d,breakAtStart:f,openStart:m,openEnd:v}=bo.build(this.view.state.doc,h,c,this.decorations,this.dynamicDecorationMap),{i:S,off:g}=n.findPos(a,1),{i:y,off:P}=n.findPos(s,-1);mh(this,y,P,S,g,d,f,m,v)}}updateSelection(t=!1,i=!1){if((t||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!(i||this.mayControlSelection()))return;let n=this.forceSelection;this.forceSelection=!1;let r=this.view.state.selection.main,o=this.domAtPos(r.anchor),s=r.empty?o:this.domAtPos(r.head);if(tt.gecko&&r.empty&&f0(o)){let h=document.createTextNode("");this.view.observer.ignore(()=>o.node.insertBefore(h,o.node.childNodes[o.offset]||null)),o=s=new oe(h,0),n=!0}let a=this.view.observer.selectionRange;(n||!a.focusNode||!Ir(o.node,o.offset,a.anchorNode,a.anchorOffset)||!Ir(s.node,s.offset,a.focusNode,a.focusOffset))&&(this.view.observer.ignore(()=>{tt.android&&tt.chrome&&this.dom.contains(a.focusNode)&&v0(a.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let h=kr(this.view.root);if(h)if(r.empty){if(tt.gecko){let c=O0(o.node,o.offset);if(c&&c!=3){let d=Gh(o.node,o.offset,c==1?1:-1);d&&(o=new oe(d,c==1?0:d.nodeValue.length))}}h.collapse(o.node,o.offset),r.bidiLevel!=null&&a.cursorBidiLevel!=null&&(a.cursorBidiLevel=r.bidiLevel)}else if(h.extend)h.collapse(o.node,o.offset),h.extend(s.node,s.offset);else{let c=document.createRange();r.anchor>r.head&&([o,s]=[s,o]),c.setEnd(s.node,s.offset),c.setStart(o.node,o.offset),h.removeAllRanges(),h.addRange(c)}}),this.view.observer.setSelectionRange(o,s)),this.impreciseAnchor=o.precise?null:new oe(a.anchorNode,a.anchorOffset),this.impreciseHead=s.precise?null:new oe(a.focusNode,a.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let t=this.view.state.selection.main,i=kr(this.view.root);if(!i||!t.empty||!t.assoc||!i.modify)return;let n=ce.find(this,t.head);if(!n)return;let r=n.posAtStart;if(t.head==r||t.head==r+n.length)return;let o=this.coordsAt(t.head,-1),s=this.coordsAt(t.head,1);if(!o||!s||o.bottom>s.top)return;let a=this.domAtPos(t.head+t.assoc);i.collapse(a.node,a.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){let t=this.view.root.activeElement;return t==this.dom||_r(this.dom,this.view.observer.selectionRange)&&!(t&&this.dom.contains(t))}nearest(t){for(let i=t;i;){let n=Tt.get(i);if(n&&n.rootView==this)return n;i=i.parentNode}return null}posFromDOM(t,i){let n=this.nearest(t);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(t,i)+n.posAtStart}domAtPos(t){let{i,off:n}=this.childCursor().findPos(t,-1);for(;i<this.children.length-1;){let r=this.children[i];if(n<r.length||r instanceof ce)break;i++,n=0}return this.children[i].domAtPos(n)}coordsAt(t,i){for(let n=this.length,r=this.children.length-1;;r--){let o=this.children[r],s=n-o.breakAfter-o.length;if(t>s||t==s&&o.type!=Et.WidgetBefore&&o.type!=Et.WidgetAfter&&(!r||i==2||this.children[r-1].breakAfter||this.children[r-1].type==Et.WidgetBefore&&i>-2))return o.coordsAt(t-s,i);n=s}}measureVisibleLineHeights(t){let i=[],{from:n,to:r}=t,o=this.view.contentDOM.clientWidth,s=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,h=this.view.textDirection==Lt.LTR;for(let c=0,d=0;d<this.children.length;d++){let f=this.children[d],m=c+f.length;if(m>r)break;if(c>=n){let v=f.dom.getBoundingClientRect();if(i.push(v.height),s){let S=f.dom.lastChild,g=S?Fn(S):[];if(g.length){let y=g[g.length-1],P=h?y.right-v.left:v.right-y.left;P>a&&(a=P,this.minWidth=o,this.minWidthFrom=c,this.minWidthTo=m)}}}c=m+f.breakAfter}return i}textDirectionAt(t){let{i}=this.childPos(t,1);return getComputedStyle(this.children[i].dom).direction=="rtl"?Lt.RTL:Lt.LTR}measureTextSize(){for(let r of this.children)if(r instanceof ce){let o=r.measureTextSize();if(o)return o}let t=document.createElement("div"),i,n;return t.className="cm-line",t.style.width="99999px",t.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(t);let r=Fn(t.firstChild)[0];i=t.getBoundingClientRect().height,n=r?r.width/27:7,t.remove()}),{lineHeight:i,charWidth:n}}childCursor(t=this.length){let i=this.children.length;return i&&(t-=this.children[--i].length),new fh(this.children,t,i)}computeBlockGapDeco(){let t=[],i=this.view.viewState;for(let n=0,r=0;;r++){let o=r==i.viewports.length?null:i.viewports[r],s=o?o.from-1:this.length;if(s>n){let a=i.lineBlockAt(s).bottom-i.lineBlockAt(n).top;t.push(nt.replace({widget:new qh(a),block:!0,inclusive:!0,isBlockGap:!0}).range(n,s))}if(!o)break;n=o.to+1}return nt.set(t)}updateDeco(){let t=this.view.state.facet(Wn).map((i,n)=>(this.dynamicDecorationMap[n]=typeof i=="function")?i(this.view):i);for(let i=t.length;i<t.length+3;i++)this.dynamicDecorationMap[i]=!1;return this.decorations=[...t,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(t){let{range:i}=t,n=this.coordsAt(i.head,i.empty?i.assoc:i.head>i.anchor?-1:1),r;if(!n)return;!i.empty&&(r=this.coordsAt(i.anchor,i.anchor>i.head?-1:1))&&(n={left:Math.min(n.left,r.left),top:Math.min(n.top,r.top),right:Math.max(n.right,r.right),bottom:Math.max(n.bottom,r.bottom)});let o=0,s=0,a=0,h=0;for(let d of this.view.state.facet(Mh).map(f=>f(this.view)))if(d){let{left:f,right:m,top:v,bottom:S}=d;f!=null&&(o=Math.max(o,f)),m!=null&&(s=Math.max(s,m)),v!=null&&(a=Math.max(a,v)),S!=null&&(h=Math.max(h,S))}let c={left:n.left-o,top:n.top-a,right:n.right+s,bottom:n.bottom+h};Kf(this.view.scrollDOM,c,i.head<i.anchor?-1:1,t.x,t.y,t.xMargin,t.yMargin,this.view.textDirection==Lt.LTR)}}function f0(e){return e.node.nodeType==1&&e.node.firstChild&&(e.offset==0||e.node.childNodes[e.offset-1].contentEditable=="false")&&(e.offset==e.node.childNodes.length||e.node.childNodes[e.offset].contentEditable=="false")}class qh extends li{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function Uh(e){let t=e.observer.selectionRange,i=t.focusNode&&Gh(t.focusNode,t.focusOffset,0);if(!i)return null;let n=e.docView.nearest(i);if(!n)return null;if(n instanceof ce){let r=i;for(;r.parentNode!=n.dom;)r=r.parentNode;let o=r.previousSibling;for(;o&&!Tt.get(o);)o=o.previousSibling;let s=o?Tt.get(o).posAtEnd:n.posAtStart;return{from:s,to:s,node:r,text:i}}else{for(;;){let{parent:o}=n;if(!o)return null;if(o instanceof ce)break;n=o}let r=n.posAtStart;return{from:r,to:r+n.length,node:n.dom,text:i}}}function m0(e,t){let i=Uh(e);if(!i)return nt.none;let{from:n,to:r,node:o,text:s}=i,a=t.mapPos(n,1),h=Math.max(a,t.mapPos(r,-1)),{state:c}=e,d=o.nodeType==3?o.nodeValue:new Wh([],c).readRange(o.firstChild,null).text;if(h-a<d.length)if(c.doc.sliceString(a,Math.min(c.doc.length,a+d.length),xi)==d)h=a+d.length;else if(c.doc.sliceString(Math.max(0,h-d.length),h,xi)==d)a=h-d.length;else return nt.none;else if(c.doc.sliceString(a,h,xi)!=d)return nt.none;let f=Tt.get(o);return f instanceof Ch?f=f.widget.topView:f&&(f.parent=null),nt.set(nt.replace({widget:new g0(o,s,f),inclusive:!0}).range(a,h))}class g0 extends li{constructor(t,i,n){super(),this.top=t,this.text=i,this.topView=n}eq(t){return this.top==t.top&&this.text==t.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return Ch}}function Gh(e,t,i){for(;;){if(e.nodeType==3)return e;if(e.nodeType==1&&t>0&&i<=0)e=e.childNodes[t-1],t=Mn(e);else if(e.nodeType==1&&t<e.childNodes.length&&i>=0)e=e.childNodes[t],t=0;else return null}}function O0(e,t){return e.nodeType!=1?0:(t&&e.childNodes[t-1].contentEditable=="false"?1:0)|(t<e.childNodes.length&&e.childNodes[t].contentEditable=="false"?2:0)}class y0{constructor(){this.changes=[]}compareRange(t,i){wo(t,i,this.changes)}comparePoint(t,i){wo(t,i,this.changes)}}function x0(e,t,i){let n=new y0;return wt.compare(e,t,i,n),n.changes}function v0(e,t){for(let i=e;i&&i!=t;i=i.assignedSlot||i.parentNode)if(i.nodeType==1&&i.contentEditable=="false")return!0;return!1}function P0(e,t,i=1){let n=e.charCategorizer(t),r=e.doc.lineAt(t),o=t-r.from;if(r.length==0)return j.cursor(t);o==0?i=1:o==r.length&&(i=-1);let s=o,a=o;i<0?s=ue(r.text,o,!1):a=ue(r.text,o);let h=n(r.text.slice(s,a));for(;s>0;){let c=ue(r.text,s,!1);if(n(r.text.slice(c,s))!=h)break;s=c}for(;a<r.length;){let c=ue(r.text,a);if(n(r.text.slice(a,c))!=h)break;a=c}return j.range(s+r.from,a+r.from)}function C0(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function S0(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function ko(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function Vh(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function Hh(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function _o(e,t,i){let n,r,o,s,a=!1,h,c,d,f;for(let S=e.firstChild;S;S=S.nextSibling){let g=Fn(S);for(let y=0;y<g.length;y++){let P=g[y];r&&ko(r,P)&&(P=Vh(Hh(P,r.bottom),r.top));let w=C0(t,P),D=S0(i,P);if(w==0&&D==0)return S.nodeType==3?Jh(S,t,i):_o(S,t,i);(!n||s>D||s==D&&o>w)&&(n=S,r=P,o=w,s=D,a=!w||(w>0?y<g.length-1:y>0)),w==0?i>P.bottom&&(!d||d.bottom<P.bottom)?(h=S,d=P):i<P.top&&(!f||f.top>P.top)&&(c=S,f=P):d&&ko(d,P)?d=Hh(d,P.bottom):f&&ko(f,P)&&(f=Vh(f,P.top))}}if(d&&d.bottom>=i?(n=h,r=d):f&&f.top<=i&&(n=c,r=f),!n)return{node:e,offset:0};let m=Math.max(r.left,Math.min(r.right,t));if(n.nodeType==3)return Jh(n,m,i);if(a&&n.contentEditable!="false")return _o(n,m,i);let v=Array.prototype.indexOf.call(e.childNodes,n)+(t>=(r.left+r.right)/2?1:0);return{node:e,offset:v}}function Jh(e,t,i){let n=e.nodeValue.length,r=-1,o=1e9,s=0;for(let a=0;a<n;a++){let h=en(e,a,a+1).getClientRects();for(let c=0;c<h.length;c++){let d=h[c];if(d.top==d.bottom)continue;s||(s=t-d.left);let f=(d.top>i?d.top-i:i-d.bottom)-1;if(d.left-1<=t&&d.right+1>=t&&f<o){let m=t>=(d.left+d.right)/2,v=m;if((tt.chrome||tt.gecko)&&en(e,a).getBoundingClientRect().left==d.right&&(v=!m),f<=0)return{node:e,offset:a+(v?1:0)};r=a+(v?1:0),o=f}}}return{node:e,offset:r>-1?r:s>0?e.nodeValue.length:0}}function Kh(e,{x:t,y:i},n,r=-1){var o;let s=e.contentDOM.getBoundingClientRect(),a=s.top+e.viewState.paddingTop,h,{docHeight:c}=e.viewState,d=i-a;if(d<0)return 0;if(d>c)return e.state.doc.length;for(let P=e.defaultLineHeight/2,w=!1;h=e.elementAtHeight(d),h.type!=Et.Text;)for(;d=r>0?h.bottom+P:h.top-P,!(d>=0&&d<=c);){if(w)return n?null:0;w=!0,r=-r}i=a+d;let f=h.from;if(f<e.viewport.from)return e.viewport.from==0?0:n?null:tu(e,s,h,t,i);if(f>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:n?null:tu(e,s,h,t,i);let m=e.dom.ownerDocument,v=e.root.elementFromPoint?e.root:m,S=v.elementFromPoint(t,i);S&&!e.contentDOM.contains(S)&&(S=null),S||(t=Math.max(s.left+1,Math.min(s.right-1,t)),S=v.elementFromPoint(t,i),S&&!e.contentDOM.contains(S)&&(S=null));let g,y=-1;if(S&&((o=e.docView.nearest(S))===null||o===void 0?void 0:o.isEditable)!=!1){if(m.caretPositionFromPoint){let P=m.caretPositionFromPoint(t,i);P&&({offsetNode:g,offset:y}=P)}else if(m.caretRangeFromPoint){let P=m.caretRangeFromPoint(t,i);P&&({startContainer:g,startOffset:y}=P,(!e.contentDOM.contains(g)||tt.safari&&w0(g,y,t)||tt.chrome&&b0(g,y,t))&&(g=void 0))}}if(!g||!e.docView.dom.contains(g)){let P=ce.find(e.docView,f);if(!P)return d>h.top+h.height/2?h.to:h.from;({node:g,offset:y}=_o(P.dom,t,i))}return e.docView.posFromDOM(g,y)}function tu(e,t,i,n,r){let o=Math.round((n-t.left)*e.defaultCharacterWidth);e.lineWrapping&&i.height>e.defaultLineHeight*1.5&&(o+=Math.floor((r-i.top)/e.defaultLineHeight)*e.viewState.heightOracle.lineLength);let s=e.state.sliceDoc(i.from,i.to);return i.from+ho(s,o,e.state.tabSize)}function w0(e,t,i){let n;if(e.nodeType!=3||t!=(n=e.nodeValue.length))return!1;for(let r=e.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return en(e,n-1,n).getBoundingClientRect().left>i}function b0(e,t,i){if(t!=0)return!1;for(let r=e;;){let o=r.parentNode;if(!o||o.nodeType!=1||o.firstChild!=r)return!1;if(o.classList.contains("cm-line"))break;r=o}let n=e.nodeType==1?e.getBoundingClientRect():en(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect();return i-n.left>5}function E0(e,t,i,n){let r=e.state.doc.lineAt(t.head),o=!n||!e.lineWrapping?null:e.coordsAtPos(t.assoc<0&&t.head>r.from?t.head-1:t.head);if(o){let h=e.dom.getBoundingClientRect(),c=e.textDirectionAt(r.from),d=e.posAtCoords({x:i==(c==Lt.LTR)?h.right-1:h.left+1,y:(o.top+o.bottom)/2});if(d!=null)return j.cursor(d,i?-1:1)}let s=ce.find(e.docView,t.head),a=s?i?s.posAtEnd:s.posAtStart:i?r.to:r.from;return j.cursor(a,i?-1:1)}function eu(e,t,i,n){let r=e.state.doc.lineAt(t.head),o=e.bidiSpans(r),s=e.textDirectionAt(r.from);for(let a=t,h=null;;){let c=d0(r,o,s,a,i),d=Yh;if(!c){if(r.number==(i?e.state.doc.lines:1))return a;d=`
`,r=e.state.doc.line(r.number+(i?1:-1)),o=e.bidiSpans(r),c=j.cursor(i?r.from:r.to)}if(h){if(!h(d))return a}else{if(!n)return c;h=n(d)}a=c}}function D0(e,t,i){let n=e.state.charCategorizer(t),r=n(i);return o=>{let s=n(o);return r==It.Space&&(r=s),r==s}}function T0(e,t,i,n){let r=t.head,o=i?1:-1;if(r==(i?e.state.doc.length:0))return j.cursor(r,t.assoc);let s=t.goalColumn,a,h=e.contentDOM.getBoundingClientRect(),c=e.coordsAtPos(r),d=e.documentTop;if(c)s==null&&(s=c.left-h.left),a=o<0?c.top:c.bottom;else{let v=e.viewState.lineBlockAt(r);s==null&&(s=Math.min(h.right-h.left,e.defaultCharacterWidth*(r-v.from))),a=(o<0?v.top:v.bottom)+d}let f=h.left+s,m=n!=null?n:e.defaultLineHeight>>1;for(let v=0;;v+=10){let S=a+(m+v)*o,g=Kh(e,{x:f,y:S},!1,o);if(S<h.top||S>h.bottom||(o<0?g<r:g>r))return j.cursor(g,t.assoc,void 0,s)}}function Io(e,t,i){let n=e.state.facet(Fh).map(r=>r(e));for(;;){let r=!1;for(let o of n)o.between(i.from-1,i.from+1,(s,a,h)=>{i.from>s&&i.from<a&&(i=t.head>i.from?j.cursor(s,1):j.cursor(a,-1),r=!0)});if(!r)return i}}class A0{constructor(t){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;for(let i in Ut){let n=Ut[i];t.contentDOM.addEventListener(i,r=>{!ru(t,r)||this.ignoreDuringComposition(r)||i=="keydown"&&this.keydown(t,r)||(this.mustFlushObserver(r)&&t.observer.forceFlush(),this.runCustomHandlers(i,t,r)?r.preventDefault():n(t,r))},Lo[i]),this.registeredEvents.push(i)}tt.chrome&&tt.chrome_version==102&&t.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?t.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,t.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=t.hasFocus,tt.safari&&t.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}ensureHandlers(t,i){var n;let r;this.customHandlers=[];for(let o of i)if(r=(n=o.update(t).spec)===null||n===void 0?void 0:n.domEventHandlers){this.customHandlers.push({plugin:o.value,handlers:r});for(let s in r)this.registeredEvents.indexOf(s)<0&&s!="scroll"&&(this.registeredEvents.push(s),t.contentDOM.addEventListener(s,a=>{!ru(t,a)||this.runCustomHandlers(s,t,a)&&a.preventDefault()}))}}runCustomHandlers(t,i,n){for(let r of this.customHandlers){let o=r.handlers[t];if(o)try{if(o.call(r.plugin,n,i)||n.defaultPrevented)return!0}catch(s){be(i.state,s)}}return!1}runScrollHandlers(t,i){this.lastScrollTop=t.scrollDOM.scrollTop,this.lastScrollLeft=t.scrollDOM.scrollLeft;for(let n of this.customHandlers){let r=n.handlers.scroll;if(r)try{r.call(n.plugin,i,t)}catch(o){be(t.state,o)}}}keydown(t,i){if(this.lastKeyCode=i.keyCode,this.lastKeyTime=Date.now(),i.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(tt.android&&tt.chrome&&!i.synthetic&&(i.keyCode==13||i.keyCode==8))return t.observer.delayAndroidKey(i.key,i.keyCode),!0;let n;return tt.ios&&!i.synthetic&&!i.altKey&&!i.metaKey&&((n=iu.find(r=>r.keyCode==i.keyCode))&&!i.ctrlKey||k0.indexOf(i.key)>-1&&i.ctrlKey&&!i.shiftKey)?(this.pendingIOSKey=n||i,setTimeout(()=>this.flushIOSKey(t),250),!0):!1}flushIOSKey(t){let i=this.pendingIOSKey;return i?(this.pendingIOSKey=void 0,Bn(t.contentDOM,i.key,i.keyCode)):!1}ignoreDuringComposition(t){return/^key/.test(t.type)?this.composing>0?!0:tt.safari&&!tt.ios&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(t){return t.type=="keydown"&&t.keyCode!=229}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.mouseSelection&&this.mouseSelection.update(t),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const iu=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],k0="dthko",nu=[16,17,18,20,91,92,224,225];class _0{constructor(t,i,n,r){this.view=t,this.style=n,this.mustSelect=r,this.lastEvent=i;let o=t.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=i.shiftKey,this.multiple=t.state.facet(vt.allowMultipleSelections)&&I0(t,i),this.dragMove=L0(t,i),this.dragging=Q0(t,i)&&Qo(i)==1?null:!1,this.dragging===!1&&(i.preventDefault(),this.select(i))}move(t){if(t.buttons==0)return this.destroy();this.dragging===!1&&this.select(this.lastEvent=t)}up(t){this.dragging==null&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(t){let i=this.style.get(t,this.extend,this.multiple);(this.mustSelect||!i.eq(this.view.state.selection)||i.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:i,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(t){t.docChanged&&this.dragging&&(this.dragging=this.dragging.map(t.changes)),this.style.update(t)&&setTimeout(()=>this.select(this.lastEvent),20)}}function I0(e,t){let i=e.state.facet(Ah);return i.length?i[0](t):tt.mac?t.metaKey:t.ctrlKey}function L0(e,t){let i=e.state.facet(kh);return i.length?i[0](t):tt.mac?!t.altKey:!t.ctrlKey}function Q0(e,t){let{main:i}=e.state.selection;if(i.empty)return!1;let n=kr(e.root);if(!n||n.rangeCount==0)return!0;let r=n.getRangeAt(0).getClientRects();for(let o=0;o<r.length;o++){let s=r[o];if(s.left<=t.clientX&&s.right>=t.clientX&&s.top<=t.clientY&&s.bottom>=t.clientY)return!0}return!1}function ru(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let i=t.target,n;i!=e.contentDOM;i=i.parentNode)if(!i||i.nodeType==11||(n=Tt.get(i))&&n.ignoreEvent(t))return!1;return!0}const Ut=Object.create(null),Lo=Object.create(null),su=tt.ie&&tt.ie_version<15||tt.ios&&tt.webkit_version<604;function X0(e){let t=e.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout(()=>{e.focus(),i.remove(),ou(e,i.value)},50)}function ou(e,t){let{state:i}=e,n,r=1,o=i.toText(t),s=o.lines==i.selection.ranges.length;if(Xo!=null&&i.selection.ranges.every(a=>a.empty)&&Xo==o.toString()){let a=-1;n=i.changeByRange(h=>{let c=i.doc.lineAt(h.from);if(c.from==a)return{range:h};a=c.from;let d=i.toText((s?o.line(r++).text:t)+i.lineBreak);return{changes:{from:c.from,insert:d},range:j.cursor(h.from+d.length)}})}else s?n=i.changeByRange(a=>{let h=o.line(r++);return{changes:{from:a.from,to:a.to,insert:h.text},range:j.cursor(a.from+h.length)}}):n=i.replaceSelection(o);e.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}Ut.keydown=(e,t)=>{e.inputState.setSelectionOrigin("select"),t.keyCode==27?e.inputState.lastEscPress=Date.now():nu.indexOf(t.keyCode)<0&&(e.inputState.lastEscPress=0)},Ut.touchstart=(e,t)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},Ut.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},Lo.touchstart=Lo.touchmove={passive:!0},Ut.mousedown=(e,t)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3&&Qo(t)==1)return;let i=null;for(let n of e.state.facet(_h))if(i=n(e,t),i)break;if(!i&&t.button==0&&(i=F0(e,t)),i){let n=e.root.activeElement!=e.contentDOM;n&&e.observer.ignore(()=>uh(e.contentDOM)),e.inputState.startMouseSelection(new _0(e,t,i,n))}};function lu(e,t,i,n){if(n==1)return j.cursor(t,i);if(n==2)return P0(e.state,t,i);{let r=ce.find(e.docView,t),o=e.state.doc.lineAt(r?r.posAtEnd:t),s=r?r.posAtStart:o.from,a=r?r.posAtEnd:o.to;return a<e.state.doc.length&&a==o.to&&a++,j.range(s,a)}}let au=(e,t)=>e>=t.top&&e<=t.bottom,hu=(e,t,i)=>au(t,i)&&e>=i.left&&e<=i.right;function $0(e,t,i,n){let r=ce.find(e.docView,t);if(!r)return 1;let o=t-r.posAtStart;if(o==0)return 1;if(o==r.length)return-1;let s=r.coordsAt(o,-1);if(s&&hu(i,n,s))return-1;let a=r.coordsAt(o,1);return a&&hu(i,n,a)?1:s&&au(n,s)?-1:1}function uu(e,t){let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:i,bias:$0(e,i,t.clientX,t.clientY)}}const N0=tt.ie&&tt.ie_version<=11;let cu=null,pu=0,du=0;function Qo(e){if(!N0)return e.detail;let t=cu,i=du;return cu=e,du=Date.now(),pu=!t||i>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(pu+1)%3:1}function F0(e,t){let i=uu(e,t),n=Qo(t),r=e.state.selection,o=i,s=t;return{update(a){a.docChanged&&(i.pos=a.changes.mapPos(i.pos),r=r.map(a.changes),s=null)},get(a,h,c){let d;s&&a.clientX==s.clientX&&a.clientY==s.clientY?d=o:(d=o=uu(e,a),s=a);let f=lu(e,d.pos,d.bias,n);if(i.pos!=d.pos&&!h){let m=lu(e,i.pos,i.bias,n),v=Math.min(m.from,f.from),S=Math.max(m.to,f.to);f=v<f.from?j.range(v,S):j.range(S,v)}return h?r.replaceRange(r.main.extend(f.from,f.to)):c&&r.ranges.length>1&&r.ranges.some(m=>m.eq(f))?M0(r,f):c?r.addRange(f):j.create([f])}}}function M0(e,t){for(let i=0;;i++)if(e.ranges[i].eq(t))return j.create(e.ranges.slice(0,i).concat(e.ranges.slice(i+1)),e.mainIndex==i?0:e.mainIndex-(e.mainIndex>i?1:0))}Ut.dragstart=(e,t)=>{let{selection:{main:i}}=e.state,{mouseSelection:n}=e.inputState;n&&(n.dragging=i),t.dataTransfer&&(t.dataTransfer.setData("Text",e.state.sliceDoc(i.from,i.to)),t.dataTransfer.effectAllowed="copyMove")};function fu(e,t,i,n){if(!i)return;let r=e.posAtCoords({x:t.clientX,y:t.clientY},!1);t.preventDefault();let{mouseSelection:o}=e.inputState,s=n&&o&&o.dragging&&o.dragMove?{from:o.dragging.from,to:o.dragging.to}:null,a={from:r,insert:i},h=e.state.changes(s?[s,a]:a);e.focus(),e.dispatch({changes:h,selection:{anchor:h.mapPos(r,-1),head:h.mapPos(r,1)},userEvent:s?"move.drop":"input.drop"})}Ut.drop=(e,t)=>{if(!t.dataTransfer)return;if(e.state.readOnly)return t.preventDefault();let i=t.dataTransfer.files;if(i&&i.length){t.preventDefault();let n=Array(i.length),r=0,o=()=>{++r==i.length&&fu(e,t,n.filter(s=>s!=null).join(e.state.lineBreak),!1)};for(let s=0;s<i.length;s++){let a=new FileReader;a.onerror=o,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(n[s]=a.result),o()},a.readAsText(i[s])}}else fu(e,t,t.dataTransfer.getData("Text"),!0)},Ut.paste=(e,t)=>{if(e.state.readOnly)return t.preventDefault();e.observer.flush();let i=su?null:t.clipboardData;i?(ou(e,i.getData("text/plain")),t.preventDefault()):X0(e)};function B0(e,t){let i=e.dom.parentNode;if(!i)return;let n=i.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=t,n.focus(),n.selectionEnd=t.length,n.selectionStart=0,setTimeout(()=>{n.remove(),e.focus()},50)}function R0(e){let t=[],i=[],n=!1;for(let r of e.selection.ranges)r.empty||(t.push(e.sliceDoc(r.from,r.to)),i.push(r));if(!t.length){let r=-1;for(let{from:o}of e.selection.ranges){let s=e.doc.lineAt(o);s.number>r&&(t.push(s.text),i.push({from:s.from,to:Math.min(e.doc.length,s.to+1)})),r=s.number}n=!0}return{text:t.join(e.lineBreak),ranges:i,linewise:n}}let Xo=null;Ut.copy=Ut.cut=(e,t)=>{let{text:i,ranges:n,linewise:r}=R0(e.state);if(!i&&!r)return;Xo=r?i:null;let o=su?null:t.clipboardData;o?(t.preventDefault(),o.clearData(),o.setData("text/plain",i)):B0(e,i),t.type=="cut"&&!e.state.readOnly&&e.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"})};function mu(e){setTimeout(()=>{e.hasFocus!=e.inputState.notifiedFocused&&e.update([])},10)}Ut.focus=e=>{e.inputState.lastFocusTime=Date.now(),!e.scrollDOM.scrollTop&&(e.inputState.lastScrollTop||e.inputState.lastScrollLeft)&&(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),mu(e)},Ut.blur=e=>{e.observer.clearSelectionRange(),mu(e)},Ut.compositionstart=Ut.compositionupdate=e=>{e.inputState.compositionFirstChange==null&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0)},Ut.compositionend=e=>{e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionFirstChange=null,tt.chrome&&tt.android&&e.observer.flushSoon(),setTimeout(()=>{e.inputState.composing<0&&e.docView.compositionDeco.size&&e.update([])},50)},Ut.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},Ut.beforeinput=(e,t)=>{var i;let n;if(tt.chrome&&tt.android&&(n=iu.find(r=>r.inputType==t.inputType))&&(e.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let r=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>r+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())},100)}};const gu=["pre-wrap","normal","pre-line","break-spaces"];class Y0{constructor(){this.doc=Ct.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(t,i){let n=this.doc.lineAt(i).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(n+=Math.ceil((i-t-n*this.lineLength*.5)/this.lineLength)),this.lineHeight*n}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return gu.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let i=!1;for(let n=0;n<t.length;n++){let r=t[n];r<0?n++:this.heightSamples[Math.floor(r*10)]||(i=!0,this.heightSamples[Math.floor(r*10)]=!0)}return i}refresh(t,i,n,r,o){let s=gu.indexOf(t)>-1,a=Math.round(i)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=i,this.charWidth=n,this.lineLength=r,a){this.heightSamples={};for(let h=0;h<o.length;h++){let c=o[h];c<0?h++:this.heightSamples[Math.floor(c*10)]=!0}}return a}}class W0{constructor(t,i){this.from=t,this.heights=i,this.index=0}get more(){return this.index<this.heights.length}}class vi{constructor(t,i,n,r,o){this.from=t,this.length=i,this.top=n,this.height=r,this.type=o}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(t){let i=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(t.type)?t.type:[t]);return new vi(this.from,this.length+t.length,this.top,this.height+t.height,i)}}var At=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(At||(At={}));const Rr=.001;class ge{constructor(t,i,n=2){this.length=t,this.height=i,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(t){this.flags=(t?2:0)|this.flags&-3}setHeight(t,i){this.height!=i&&(Math.abs(this.height-i)>Rr&&(t.heightChanged=!0),this.height=i)}replace(t,i,n){return ge.of(n)}decomposeLeft(t,i){i.push(this)}decomposeRight(t,i){i.push(this)}applyChanges(t,i,n,r){let o=this;for(let s=r.length-1;s>=0;s--){let{fromA:a,toA:h,fromB:c,toB:d}=r[s],f=o.lineAt(a,At.ByPosNoHeight,i,0,0),m=f.to>=h?f:o.lineAt(h,At.ByPosNoHeight,i,0,0);for(d+=m.to-h,h=m.to;s>0&&f.from<=r[s-1].toA;)a=r[s-1].fromA,c=r[s-1].fromB,s--,a<f.from&&(f=o.lineAt(a,At.ByPosNoHeight,i,0,0));c+=f.from-a,a=f.from;let v=$o.build(n,t,c,d);o=o.replace(a,h,v)}return o.updateHeight(n,0)}static empty(){return new Ee(0,0)}static of(t){if(t.length==1)return t[0];let i=0,n=t.length,r=0,o=0;for(;;)if(i==n)if(r>o*2){let a=t[i-1];a.break?t.splice(--i,1,a.left,null,a.right):t.splice(--i,1,a.left,a.right),n+=1+a.break,r-=a.size}else if(o>r*2){let a=t[n];a.break?t.splice(n,1,a.left,null,a.right):t.splice(n,1,a.left,a.right),n+=2+a.break,o-=a.size}else break;else if(r<o){let a=t[i++];a&&(r+=a.size)}else{let a=t[--n];a&&(o+=a.size)}let s=0;return t[i-1]==null?(s=1,i--):t[i]==null&&(s=1,n++),new j0(ge.of(t.slice(0,i)),s,ge.of(t.slice(n)))}}ge.prototype.size=1;class Ou extends ge{constructor(t,i,n){super(t,i),this.type=n}blockAt(t,i,n,r){return new vi(r,this.length,n,this.height,this.type)}lineAt(t,i,n,r,o){return this.blockAt(0,n,r,o)}forEachLine(t,i,n,r,o,s){t<=o+this.length&&i>=o&&s(this.blockAt(0,n,r,o))}updateHeight(t,i=0,n=!1,r){return r&&r.from<=i&&r.more&&this.setHeight(t,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Ee extends Ou{constructor(t,i){super(t,i,Et.Text),this.collapsed=0,this.widgetHeight=0}replace(t,i,n){let r=n[0];return n.length==1&&(r instanceof Ee||r instanceof ee&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof ee?r=new Ee(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):ge.of(n)}updateHeight(t,i=0,n=!1,r){return r&&r.from<=i&&r.more?this.setHeight(t,r.heights[r.index++]):(n||this.outdated)&&this.setHeight(t,Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class ee extends ge{constructor(t){super(t,0)}lines(t,i){let n=t.lineAt(i).number,r=t.lineAt(i+this.length).number;return{firstLine:n,lastLine:r,lineHeight:this.height/(r-n+1)}}blockAt(t,i,n,r){let{firstLine:o,lastLine:s,lineHeight:a}=this.lines(i,r),h=Math.max(0,Math.min(s-o,Math.floor((t-n)/a))),{from:c,length:d}=i.line(o+h);return new vi(c,d,n+a*h,a,Et.Text)}lineAt(t,i,n,r,o){if(i==At.ByHeight)return this.blockAt(t,n,r,o);if(i==At.ByPosNoHeight){let{from:f,to:m}=n.lineAt(t);return new vi(f,m-f,0,0,Et.Text)}let{firstLine:s,lineHeight:a}=this.lines(n,o),{from:h,length:c,number:d}=n.lineAt(t);return new vi(h,c,r+a*(d-s),a,Et.Text)}forEachLine(t,i,n,r,o,s){let{firstLine:a,lineHeight:h}=this.lines(n,o);for(let c=Math.max(t,o),d=Math.min(o+this.length,i);c<=d;){let f=n.lineAt(c);c==t&&(r+=h*(f.number-a)),s(new vi(f.from,f.length,r,h,Et.Text)),r+=h,c=f.to+1}}replace(t,i,n){let r=this.length-i;if(r>0){let o=n[n.length-1];o instanceof ee?n[n.length-1]=new ee(o.length+r):n.push(null,new ee(r-1))}if(t>0){let o=n[0];o instanceof ee?n[0]=new ee(t+o.length):n.unshift(new ee(t-1),null)}return ge.of(n)}decomposeLeft(t,i){i.push(new ee(t-1),null)}decomposeRight(t,i){i.push(null,new ee(this.length-t-1))}updateHeight(t,i=0,n=!1,r){let o=i+this.length;if(r&&r.from<=i+this.length&&r.more){let s=[],a=Math.max(i,r.from),h=-1,c=t.heightChanged;for(r.from>i&&s.push(new ee(r.from-i-1).updateHeight(t,i));a<=o&&r.more;){let f=t.doc.lineAt(a).length;s.length&&s.push(null);let m=r.heights[r.index++];h==-1?h=m:Math.abs(m-h)>=Rr&&(h=-2);let v=new Ee(f,m);v.outdated=!1,s.push(v),a+=f+1}a<=o&&s.push(null,new ee(o-a).updateHeight(t,a));let d=ge.of(s);return t.heightChanged=c||h<0||Math.abs(d.height-this.height)>=Rr||Math.abs(h-this.lines(t.doc,i).lineHeight)>=Rr,d}else(n||this.outdated)&&(this.setHeight(t,t.heightForGap(i,i+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class j0 extends ge{constructor(t,i,n){super(t.length+i+n.length,t.height+n.height,i|(t.outdated||n.outdated?2:0)),this.left=t,this.right=n,this.size=t.size+n.size}get break(){return this.flags&1}blockAt(t,i,n,r){let o=n+this.left.height;return t<o?this.left.blockAt(t,i,n,r):this.right.blockAt(t,i,o,r+this.left.length+this.break)}lineAt(t,i,n,r,o){let s=r+this.left.height,a=o+this.left.length+this.break,h=i==At.ByHeight?t<s:t<a,c=h?this.left.lineAt(t,i,n,r,o):this.right.lineAt(t,i,n,s,a);if(this.break||(h?c.to<a:c.from>a))return c;let d=i==At.ByPosNoHeight?At.ByPosNoHeight:At.ByPos;return h?c.join(this.right.lineAt(a,d,n,s,a)):this.left.lineAt(a,d,n,r,o).join(c)}forEachLine(t,i,n,r,o,s){let a=r+this.left.height,h=o+this.left.length+this.break;if(this.break)t<h&&this.left.forEachLine(t,i,n,r,o,s),i>=h&&this.right.forEachLine(t,i,n,a,h,s);else{let c=this.lineAt(h,At.ByPos,n,r,o);t<c.from&&this.left.forEachLine(t,c.from-1,n,r,o,s),c.to>=t&&c.from<=i&&s(c),i>c.to&&this.right.forEachLine(c.to+1,i,n,a,h,s)}}replace(t,i,n){let r=this.left.length+this.break;if(i<r)return this.balanced(this.left.replace(t,i,n),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-r,i-r,n));let o=[];t>0&&this.decomposeLeft(t,o);let s=o.length;for(let a of n)o.push(a);if(t>0&&yu(o,s-1),i<this.length){let a=o.length;this.decomposeRight(i,o),yu(o,a)}return ge.of(o)}decomposeLeft(t,i){let n=this.left.length;if(t<=n)return this.left.decomposeLeft(t,i);i.push(this.left),this.break&&(n++,t>=n&&i.push(null)),t>n&&this.right.decomposeLeft(t-n,i)}decomposeRight(t,i){let n=this.left.length,r=n+this.break;if(t>=r)return this.right.decomposeRight(t-r,i);t<n&&this.left.decomposeRight(t,i),this.break&&t<r&&i.push(null),i.push(this.right)}balanced(t,i){return t.size>2*i.size||i.size>2*t.size?ge.of(this.break?[t,null,i]:[t,i]):(this.left=t,this.right=i,this.height=t.height+i.height,this.outdated=t.outdated||i.outdated,this.size=t.size+i.size,this.length=t.length+this.break+i.length,this)}updateHeight(t,i=0,n=!1,r){let{left:o,right:s}=this,a=i+o.length+this.break,h=null;return r&&r.from<=i+o.length&&r.more?h=o=o.updateHeight(t,i,n,r):o.updateHeight(t,i,n),r&&r.from<=a+s.length&&r.more?h=s=s.updateHeight(t,a,n,r):s.updateHeight(t,a,n),h?this.balanced(o,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function yu(e,t){let i,n;e[t]==null&&(i=e[t-1])instanceof ee&&(n=e[t+1])instanceof ee&&e.splice(t-1,3,new ee(i.length+1+n.length))}const Z0=5;class $o{constructor(t,i){this.pos=t,this.oracle=i,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,i){if(this.lineStart>-1){let n=Math.min(i,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof Ee?r.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new Ee(n-this.pos,-1)),this.writtenTo=n,i>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=i}point(t,i,n){if(t<i||n.heightRelevant){let r=n.widget?n.widget.estimatedHeight:0;r<0&&(r=this.oracle.lineHeight);let o=i-t;n.block?this.addBlock(new Ou(o,r,n.type)):(o||r>=Z0)&&this.addLineDeco(r,o)}else i>t&&this.span(t,i);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:i}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=i,this.writtenTo<t&&((this.writtenTo<t-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new Ee(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,i){let n=new ee(i-t);return this.oracle.doc.lineAt(t).to==i&&(n.flags|=4),n}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof Ee)return t;let i=new Ee(0,-1);return this.nodes.push(i),i}addBlock(t){this.enterLine(),t.type==Et.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,t.type!=Et.WidgetBefore&&(this.covering=t)}addLineDeco(t,i){let n=this.ensureLine();n.length+=i,n.collapsed+=i,n.widgetHeight=Math.max(n.widgetHeight,t),this.writtenTo=this.pos=this.pos+i}finish(t){let i=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(i instanceof Ee)&&!this.isCovered?this.nodes.push(new Ee(0,-1)):(this.writtenTo<this.pos||i==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=t;for(let r of this.nodes)r instanceof Ee&&r.updateHeight(this.oracle,n),n+=r?r.length:1;return this.nodes}static build(t,i,n,r){let o=new $o(n,t);return wt.spans(i,n,r,o,0),o.finish(n)}}function z0(e,t,i){let n=new q0;return wt.compare(e,t,i,n,0),n.changes}class q0{constructor(){this.changes=[]}compareRange(){}comparePoint(t,i,n,r){(t<i||n&&n.heightRelevant||r&&r.heightRelevant)&&wo(t,i,this.changes,5)}}function U0(e,t){let i=e.getBoundingClientRect(),n=e.ownerDocument,r=n.defaultView,o=Math.max(0,i.left),s=Math.min(r.innerWidth,i.right),a=Math.max(0,i.top),h=Math.min(r.innerHeight,i.bottom);for(let c=e.parentNode;c&&c!=n.body;)if(c.nodeType==1){let d=c,f=window.getComputedStyle(d);if((d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth)&&f.overflow!="visible"){let m=d.getBoundingClientRect();o=Math.max(o,m.left),s=Math.min(s,m.right),a=Math.max(a,m.top),h=c==e.parentNode?m.bottom:Math.min(h,m.bottom)}c=f.position=="absolute"||f.position=="fixed"?d.offsetParent:d.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:o-i.left,right:Math.max(o,s)-i.left,top:a-(i.top+t),bottom:Math.max(a,h)-(i.top+t)}}function G0(e,t){let i=e.getBoundingClientRect();return{left:0,right:i.right-i.left,top:t,bottom:i.bottom-(i.top+t)}}class No{constructor(t,i,n){this.from=t,this.to=i,this.size=n}static same(t,i){if(t.length!=i.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],o=i[n];if(r.from!=o.from||r.to!=o.to||r.size!=o.size)return!1}return!0}draw(t){return nt.replace({widget:new V0(this.size,t)}).range(this.from,this.to)}}class V0 extends li{constructor(t,i){super(),this.size=t,this.vertical=i}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class xu{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new Y0,this.scaler=Cu,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Lt.RTL,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=t.facet(Wn).filter(i=>typeof i!="function"),this.heightMap=ge.empty().applyChanges(this.stateDeco,Ct.empty,this.heightOracle.setDoc(t.doc),[new ai(0,0,0,t.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=nt.set(this.lineGaps.map(i=>i.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:i}=this.state.selection;for(let n=0;n<=1;n++){let r=n?i.head:i.anchor;if(!t.some(({from:o,to:s})=>r>=o&&r<=s)){let{from:o,to:s}=this.lineBlockAt(r);t.push(new Yr(o,s))}}this.viewports=t.sort((n,r)=>n.from-r.from),this.scaler=this.heightMap.height<=7e6?Cu:new K0(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,t=>{this.viewportLines.push(this.scaler.scale==1?t:Zn(t,this.scaler))})}update(t,i=null){this.state=t.state;let n=this.stateDeco;this.stateDeco=this.state.facet(Wn).filter(c=>typeof c!="function");let r=t.changedRanges,o=ai.extendWithRanges(r,z0(n,this.stateDeco,t?t.changes:Wt.empty(this.state.doc.length))),s=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),o),this.heightMap.height!=s&&(t.flags|=2);let a=o.length?this.mapViewport(this.viewport,t.changes):this.viewport;(i&&(i.range.head<a.from||i.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,i));let h=!t.changes.empty||t.flags&2||a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,this.updateForViewport(),h&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(),i&&(this.scrollTarget=i),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(t){let i=t.contentDOM,n=window.getComputedStyle(i),r=this.heightOracle,o=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?Lt.RTL:Lt.LTR;let s=this.heightOracle.mustRefreshForWrapping(o),a=s||this.mustMeasureContent||this.contentDOMHeight!=i.clientHeight;this.contentDOMHeight=i.clientHeight,this.mustMeasureContent=!1;let h=0,c=0,d=parseInt(n.paddingTop)||0,f=parseInt(n.paddingBottom)||0;(this.paddingTop!=d||this.paddingBottom!=f)&&(this.paddingTop=d,this.paddingBottom=f,h|=10),this.editorWidth!=t.scrollDOM.clientWidth&&(r.lineWrapping&&(a=!0),this.editorWidth=t.scrollDOM.clientWidth,h|=8);let m=(this.printing?G0:U0)(i,this.paddingTop),v=m.top-this.pixelViewport.top,S=m.bottom-this.pixelViewport.bottom;this.pixelViewport=m;let g=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(g!=this.inView&&(this.inView=g,g&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let y=i.clientWidth;if((this.contentDOMWidth!=y||this.editorHeight!=t.scrollDOM.clientHeight)&&(this.contentDOMWidth=y,this.editorHeight=t.scrollDOM.clientHeight,h|=8),a){let w=t.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(w)&&(s=!0),s||r.lineWrapping&&Math.abs(y-this.contentDOMWidth)>r.charWidth){let{lineHeight:D,charWidth:T}=t.docView.measureTextSize();s=r.refresh(o,D,T,y/T,w),s&&(t.docView.minWidth=0,h|=8)}v>0&&S>0?c=Math.max(v,S):v<0&&S<0&&(c=Math.min(v,S)),r.heightChanged=!1;for(let D of this.viewports){let T=D.from==this.viewport.from?w:t.docView.measureVisibleLineHeights(D);this.heightMap=this.heightMap.updateHeight(r,0,s,new W0(D.from,T))}r.heightChanged&&(h|=2)}let P=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return P&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(h&2||P)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,i){let n=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),r=this.heightMap,o=this.state.doc,{visibleTop:s,visibleBottom:a}=this,h=new Yr(r.lineAt(s-n*1e3,At.ByHeight,o,0,0).from,r.lineAt(a+(1-n)*1e3,At.ByHeight,o,0,0).to);if(i){let{head:c}=i.range;if(c<h.from||c>h.to){let d=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=r.lineAt(c,At.ByPos,o,0,0),m;i.y=="center"?m=(f.top+f.bottom)/2-d/2:i.y=="start"||i.y=="nearest"&&c<h.from?m=f.top:m=f.bottom-d,h=new Yr(r.lineAt(m-1e3/2,At.ByHeight,o,0,0).from,r.lineAt(m+d+1e3/2,At.ByHeight,o,0,0).to)}}return h}mapViewport(t,i){let n=i.mapPos(t.from,-1),r=i.mapPos(t.to,1);return new Yr(this.heightMap.lineAt(n,At.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(r,At.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:t,to:i},n=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(t,At.ByPos,this.state.doc,0,0),{bottom:o}=this.heightMap.lineAt(i,At.ByPos,this.state.doc,0,0),{visibleTop:s,visibleBottom:a}=this;return(t==0||r<=s-Math.max(10,Math.min(-n,250)))&&(i==this.state.doc.length||o>=a+Math.max(10,Math.min(n,250)))&&r>s-2*1e3&&o<a+2*1e3}mapLineGaps(t,i){if(!t.length||i.empty)return t;let n=[];for(let r of t)i.touchesRange(r.from,r.to)||n.push(new No(i.mapPos(r.from),i.mapPos(r.to),r.size));return n}ensureLineGaps(t){let i=[];if(this.defaultTextDirection!=Lt.LTR)return i;for(let n of this.viewportLines){if(n.length<4e3)continue;let r=H0(n.from,n.to,this.stateDeco);if(r.total<4e3)continue;let o,s;if(this.heightOracle.lineWrapping){let c=2e3/this.heightOracle.lineLength*this.heightOracle.lineHeight;o=Wr(r,(this.visibleTop-n.top-c)/n.height),s=Wr(r,(this.visibleBottom-n.top+c)/n.height)}else{let c=r.total*this.heightOracle.charWidth,d=2e3*this.heightOracle.charWidth;o=Wr(r,(this.pixelViewport.left-d)/c),s=Wr(r,(this.pixelViewport.right+d)/c)}let a=[];o>n.from&&a.push({from:n.from,to:o}),s<n.to&&a.push({from:s,to:n.to});let h=this.state.selection.main;h.from>=n.from&&h.from<=n.to&&Pu(a,h.from-10,h.from+10),!h.empty&&h.to>=n.from&&h.to<=n.to&&Pu(a,h.to-10,h.to+10);for(let{from:c,to:d}of a)d-c>1e3&&i.push(J0(t,f=>f.from>=n.from&&f.to<=n.to&&Math.abs(f.from-c)<1e3&&Math.abs(f.to-d)<1e3)||new No(c,d,this.gapSize(n,c,d,r)))}return i}gapSize(t,i,n,r){let o=vu(r,n)-vu(r,i);return this.heightOracle.lineWrapping?t.height*o:r.total*this.heightOracle.charWidth*o}updateLineGaps(t){No.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=nt.set(t.map(i=>i.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let i=[];wt.spans(t,this.viewport.from,this.viewport.to,{span(r,o){i.push({from:r,to:o})},point(){}},20);let n=i.length!=this.visibleRanges.length||this.visibleRanges.some((r,o)=>r.from!=i[o].from||r.to!=i[o].to);return this.visibleRanges=i,n?4:0}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find(i=>i.from<=t&&i.to>=t)||Zn(this.heightMap.lineAt(t,At.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(t){return Zn(this.heightMap.lineAt(this.scaler.fromDOM(t),At.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(t){return Zn(this.heightMap.blockAt(this.scaler.fromDOM(t),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Yr{constructor(t,i){this.from=t,this.to=i}}function H0(e,t,i){let n=[],r=e,o=0;return wt.spans(i,e,t,{span(){},point(s,a){s>r&&(n.push({from:r,to:s}),o+=s-r),r=a}},20),r<t&&(n.push({from:r,to:t}),o+=t-r),{total:o,ranges:n}}function Wr({total:e,ranges:t},i){if(i<=0)return t[0].from;if(i>=1)return t[t.length-1].to;let n=Math.floor(e*i);for(let r=0;;r++){let{from:o,to:s}=t[r],a=s-o;if(n<=a)return o+n;n-=a}}function vu(e,t){let i=0;for(let{from:n,to:r}of e.ranges){if(t<=r){i+=t-n;break}i+=r-n}return i/e.total}function Pu(e,t,i){for(let n=0;n<e.length;n++){let r=e[n];if(r.from<i&&r.to>t){let o=[];r.from<t&&o.push({from:r.from,to:t}),r.to>i&&o.push({from:i,to:r.to}),e.splice(n,1,...o),n+=o.length-1}}}function J0(e,t){for(let i of e)if(t(i))return i}const Cu={toDOM(e){return e},fromDOM(e){return e},scale:1};class K0{constructor(t,i,n){let r=0,o=0,s=0;this.viewports=n.map(({from:a,to:h})=>{let c=i.lineAt(a,At.ByPos,t,0,0).top,d=i.lineAt(h,At.ByPos,t,0,0).bottom;return r+=d-c,{from:a,to:h,top:c,bottom:d,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(i.height-r);for(let a of this.viewports)a.domTop=s+(a.top-o)*this.scale,s=a.domBottom=a.domTop+(a.bottom-a.top),o=a.bottom}toDOM(t){for(let i=0,n=0,r=0;;i++){let o=i<this.viewports.length?this.viewports[i]:null;if(!o||t<o.top)return r+(t-n)*this.scale;if(t<=o.bottom)return o.domTop+(t-o.top);n=o.bottom,r=o.domBottom}}fromDOM(t){for(let i=0,n=0,r=0;;i++){let o=i<this.viewports.length?this.viewports[i]:null;if(!o||t<o.domTop)return n+(t-r)/this.scale;if(t<=o.domBottom)return o.top+(t-o.domTop);n=o.bottom,r=o.domBottom}}}function Zn(e,t){if(t.scale==1)return e;let i=t.toDOM(e.top),n=t.toDOM(e.bottom);return new vi(e.from,e.length,i,n-i,Array.isArray(e.type)?e.type.map(r=>Zn(r,t)):e.type)}const jr=K.define({combine:e=>e.join(" ")}),Fo=K.define({combine:e=>e.indexOf(!0)>-1}),Mo=mi.newName(),Su=mi.newName(),wu=mi.newName(),bu={"&light":"."+Su,"&dark":"."+wu};function Bo(e,t,i){return new mi(t,{finish(n){return/&/.test(n)?n.replace(/&\w*/,r=>{if(r=="&")return e;if(!i||!i[r])throw new RangeError(`Unsupported selector: ${r}`);return i[r]}):e+" "+n}})}const tm=Bo("."+Mo,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},bu),em={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Ro=tt.ie&&tt.ie_version<=11;class im{constructor(t,i,n){this.view=t,this.onChange=i,this.onScrollChanged=n,this.active=!1,this.selectionRange=new t0,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver(r=>{for(let o of r)this.queue.push(o);(tt.ie&&tt.ie_version<=11||tt.ios&&t.composing)&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),Ro&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resize=new ResizeObserver(()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()}),this.resize.observe(t.scrollDOM)),this.addWindowListeners(this.win=t.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(r=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),r.length>0&&r[r.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(r=>{r.length>0&&r[r.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScroll(t){this.intersecting&&this.flush(!1),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some((i,n)=>i!=t[n]))){this.gapIntersection.disconnect();for(let i of t)this.gapIntersection.observe(i);this.gaps=t}}onSelectionChange(t){let i=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,r=this.selectionRange;if(n.state.facet(Mr)?n.root.activeElement!=this.dom:!_r(n.dom,r))return;let o=r.anchorNode&&n.docView.nearest(r.anchorNode);if(o&&o.ignoreEvent(t)){i||(this.selectionChanged=!1);return}(tt.ie&&tt.ie_version<=11||tt.android&&tt.chrome)&&!n.state.selection.main.empty&&r.focusNode&&Ir(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,i=tt.safari&&t.root.nodeType==11&&Hf(this.dom.ownerDocument)==this.dom&&nm(this.view)||kr(t.root);if(!i||this.selectionRange.eq(i))return!1;let n=_r(this.dom,i);return n&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&i0(this.dom,i)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(i),n&&(this.selectionChanged=!0),!0)}setSelectionRange(t,i){this.selectionRange.set(t.node,t.offset,i.node,i.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,i=null;for(let n=this.dom;n;)if(n.nodeType==1)!i&&t<this.scrollTargets.length&&this.scrollTargets[t]==n?t++:i||(i=this.scrollTargets.slice(0,t)),i&&i.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(t<this.scrollTargets.length&&!i&&(i=this.scrollTargets.slice(0,t)),i){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=i)n.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,em),Ro&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){!this.active||(this.active=!1,this.observer.disconnect(),Ro&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,i){var n;this.delayedAndroidKey||this.view.win.requestAnimationFrame(()=>{let r=this.delayedAndroidKey;this.delayedAndroidKey=null,this.delayedFlush=-1,!this.flush()&&r.force&&Bn(this.dom,r.key,r.keyCode)}),(!this.delayedAndroidKey||t=="Enter")&&(this.delayedAndroidKey={key:t,keyCode:i,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let t=this.queue;for(let o of this.observer.takeRecords())t.push(o);t.length&&(this.queue=[]);let i=-1,n=-1,r=!1;for(let o of t){let s=this.readMutation(o);!s||(s.typeOver&&(r=!0),i==-1?{from:i,to:n}=s:(i=Math.min(s.from,i),n=Math.max(s.to,n)))}return{from:i,to:n,typeOver:r}}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let{from:i,to:n,typeOver:r}=this.processRecords(),o=this.selectionChanged&&_r(this.dom,this.selectionRange);if(i<0&&!o)return!1;i>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=this.view.state,a=this.onChange(i,n,r);return this.view.state==s&&this.view.update([]),a}readMutation(t){let i=this.view.docView.nearest(t.target);if(!i||i.ignoreMutation(t))return null;if(i.markDirty(t.type=="attributes"),t.type=="attributes"&&(i.dirty|=4),t.type=="childList"){let n=Eu(i,t.previousSibling||t.target.previousSibling,-1),r=Eu(i,t.nextSibling||t.target.nextSibling,1);return{from:n?i.posAfter(n):i.posAtStart,to:r?i.posBefore(r):i.posAtEnd,typeOver:!1}}else return t.type=="characterData"?{from:i.posAtStart,to:i.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var t,i,n;this.stop(),(t=this.intersection)===null||t===void 0||t.disconnect(),(i=this.gapIntersection)===null||i===void 0||i.disconnect(),(n=this.resize)===null||n===void 0||n.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}function Eu(e,t,i){for(;t;){let n=Tt.get(t);if(n&&n.parent==e)return n;let r=t.parentNode;t=r!=e.dom?r:i>0?t.nextSibling:t.previousSibling}return null}function nm(e){let t=null;function i(h){h.preventDefault(),h.stopImmediatePropagation(),t=h.getTargetRanges()[0]}if(e.contentDOM.addEventListener("beforeinput",i,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",i,!0),!t)return null;let n=t.startContainer,r=t.startOffset,o=t.endContainer,s=t.endOffset,a=e.docView.domAtPos(e.state.selection.main.anchor);return Ir(a.node,a.offset,o,s)&&([n,r,o,s]=[o,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:s}}function rm(e,t,i,n){let r,o,s=e.state.selection.main;if(t>-1){let a=e.docView.domBoundsAround(t,i,0);if(!a||e.state.readOnly)return!1;let{from:h,to:c}=a,d=e.docView.impreciseHead||e.docView.impreciseAnchor?[]:om(e),f=new Wh(d,e.state);f.readRange(a.startDOM,a.endDOM);let m=s.from,v=null;(e.inputState.lastKeyCode===8&&e.inputState.lastKeyTime>Date.now()-100||tt.android&&f.text.length<c-h)&&(m=s.to,v="end");let S=sm(e.state.doc.sliceString(h,c,xi),f.text,m-h,v);S&&(tt.chrome&&e.inputState.lastKeyCode==13&&S.toB==S.from+2&&f.text.slice(S.from,S.toB)==xi+xi&&S.toB--,r={from:h+S.from,to:h+S.toA,insert:Ct.of(f.text.slice(S.from,S.toB).split(xi))}),o=lm(d,h)}else if(e.hasFocus||!e.state.facet(Mr)){let a=e.observer.selectionRange,{impreciseHead:h,impreciseAnchor:c}=e.docView,d=h&&h.node==a.focusNode&&h.offset==a.focusOffset||!Ki(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),f=c&&c.node==a.anchorNode&&c.offset==a.anchorOffset||!Ki(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset);(d!=s.head||f!=s.anchor)&&(o=j.single(f,d))}if(!r&&!o)return!1;if(!r&&n&&!s.empty&&o&&o.main.empty?r={from:s.from,to:s.to,insert:e.state.doc.slice(s.from,s.to)}:r&&r.from>=s.from&&r.to<=s.to&&(r.from!=s.from||r.to!=s.to)&&s.to-s.from-(r.to-r.from)<=4?r={from:s.from,to:s.to,insert:e.state.doc.slice(s.from,r.from).append(r.insert).append(e.state.doc.slice(r.to,s.to))}:(tt.mac||tt.android)&&r&&r.from==r.to&&r.from==s.head-1&&r.insert.toString()=="."&&(r={from:s.from,to:s.to,insert:Ct.of([" "])}),r){let a=e.state;if(tt.ios&&e.inputState.flushIOSKey(e)||tt.android&&(r.from==s.from&&r.to==s.to&&r.insert.length==1&&r.insert.lines==2&&Bn(e.contentDOM,"Enter",13)||r.from==s.from-1&&r.to==s.to&&r.insert.length==0&&Bn(e.contentDOM,"Backspace",8)||r.from==s.from&&r.to==s.to+1&&r.insert.length==0&&Bn(e.contentDOM,"Delete",46)))return!0;let h=r.insert.toString();if(e.state.facet(Lh).some(f=>f(e,r.from,r.to,h)))return!0;e.inputState.composing>=0&&e.inputState.composing++;let c;if(r.from>=s.from&&r.to<=s.to&&r.to-r.from>=(s.to-s.from)/3&&(!o||o.main.empty&&o.main.from==r.from+r.insert.length)&&e.inputState.composing<0){let f=s.from<r.from?a.sliceDoc(s.from,r.from):"",m=s.to>r.to?a.sliceDoc(r.to,s.to):"";c=a.replaceSelection(e.state.toText(f+r.insert.sliceString(0,void 0,e.state.lineBreak)+m))}else{let f=a.changes(r),m=o&&!a.selection.main.eq(o.main)&&o.main.to<=f.newLength?o.main:void 0;if(a.selection.ranges.length>1&&e.inputState.composing>=0&&r.to<=s.to&&r.to>=s.to-10){let v=e.state.sliceDoc(r.from,r.to),S=Uh(e)||e.state.doc.lineAt(s.head),g=s.to-r.to,y=s.to-s.from;c=a.changeByRange(P=>{if(P.from==s.from&&P.to==s.to)return{changes:f,range:m||P.map(f)};let w=P.to-g,D=w-v.length;if(P.to-P.from!=y||e.state.sliceDoc(D,w)!=v||S&&P.to>=S.from&&P.from<=S.to)return{range:P};let T=a.changes({from:D,to:w,insert:r.insert}),_=P.to-s.to;return{changes:T,range:m?j.range(Math.max(0,m.anchor+_),Math.max(0,m.head+_)):P.map(T)}})}else c={changes:f,selection:m&&a.selection.replaceRange(m)}}let d="input.type";return e.composing&&(d+=".compose",e.inputState.compositionFirstChange&&(d+=".start",e.inputState.compositionFirstChange=!1)),e.dispatch(c,{scrollIntoView:!0,userEvent:d}),!0}else if(o&&!o.main.eq(s)){let a=!1,h="select";return e.inputState.lastSelectionTime>Date.now()-50&&(e.inputState.lastSelectionOrigin=="select"&&(a=!0),h=e.inputState.lastSelectionOrigin),e.dispatch({selection:o,scrollIntoView:a,userEvent:h}),!0}else return!1}function sm(e,t,i,n){let r=Math.min(e.length,t.length),o=0;for(;o<r&&e.charCodeAt(o)==t.charCodeAt(o);)o++;if(o==r&&e.length==t.length)return null;let s=e.length,a=t.length;for(;s>0&&a>0&&e.charCodeAt(s-1)==t.charCodeAt(a-1);)s--,a--;if(n=="end"){let h=Math.max(0,o-Math.min(s,a));i-=s+h-o}return s<o&&e.length<t.length?(o-=i<=o&&i>=s?o-i:0,a=o+(a-s),s=o):a<o&&(o-=i<=o&&i>=a?o-i:0,s=o+(s-a),a=o),{from:o,toA:s,toB:a}}function om(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:i,anchorOffset:n,focusNode:r,focusOffset:o}=e.observer.selectionRange;return i&&(t.push(new Zh(i,n)),(r!=i||o!=n)&&t.push(new Zh(r,o))),t}function lm(e,t){if(e.length==0)return null;let i=e[0].pos,n=e.length==2?e[1].pos:i;return i>-1&&n>-1?j.single(i+t,n+t):null}class it{constructor(t={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=t.dispatch||(i=>this.update([i])),this.dispatch=this.dispatch.bind(this),this._root=t.root||e0(t.parent)||document,this.viewState=new xu(t.state||vt.create(t)),this.plugins=this.state.facet(Yn).map(i=>new Do(i));for(let i of this.plugins)i.update(this);this.observer=new im(this,(i,n,r)=>rm(this,i,n,r),i=>{this.inputState.runScrollHandlers(this,i),this.observer.intersecting&&this.measure()}),this.inputState=new A0(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new zh(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),t.parent&&t.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...t){this._dispatch(t.length==1&&t[0]instanceof Zt?t[0]:this.state.update(...t))}update(t){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let i=!1,n=!1,r,o=this.state;for(let a of t){if(a.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=a.state}if(this.destroyed){this.viewState.state=o;return}if(this.observer.clear(),o.facet(vt.phrases)!=this.state.facet(vt.phrases))return this.setState(o);r=Br.create(this,o,t);let s=this.viewState.scrollTarget;try{this.updateState=2;for(let a of t){if(s&&(s=s.map(a.changes)),a.scrollIntoView){let{main:h}=a.state.selection;s=new Fr(h.empty?h:j.cursor(h.head,h.head>h.anchor?-1:1))}for(let h of a.effects)h.is(Xh)&&(s=h.value)}this.viewState.update(r,s),this.bidiCache=Zr.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),i=this.docView.update(r),this.state.facet(jn)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(i,t.some(a=>a.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(jr)!=r.state.facet(jr)&&(this.viewState.mustMeasureContent=!0),(i||n||s||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!r.empty)for(let a of this.state.facet(Eo))a(r)}setState(t){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=t;return}this.updateState=2;let i=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new xu(t),this.plugins=t.facet(Yn).map(n=>new Do(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView=new zh(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}i&&this.focus(),this.requestMeasure()}updatePlugins(t){let i=t.startState.facet(Yn),n=t.state.facet(Yn);if(i!=n){let r=[];for(let o of n){let s=i.indexOf(o);if(s<0)r.push(new Do(o));else{let a=this.plugins[s];a.mustUpdate=t,r.push(a)}}for(let o of this.plugins)o.mustUpdate!=t&&o.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let r of this.plugins)r.mustUpdate=t;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this)}measure(t=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,t&&this.observer.forceFlush();let i=null,{scrollHeight:n,scrollTop:r,clientHeight:o}=this.scrollDOM,s=r>n-o-4?n:r;try{for(let a=0;;a++){this.updateState=1;let h=this.viewport,c=this.viewState.lineBlockAtHeight(s),d=this.viewState.measure(this);if(!d&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let f=[];d&4||([this.measureRequests,f]=[f,this.measureRequests]);let m=f.map(y=>{try{return y.read(this)}catch(P){return be(this.state,P),Du}}),v=Br.create(this,this.state,[]),S=!1,g=!1;v.flags|=d,i?i.flags|=d:i=v,this.updateState=2,v.empty||(this.updatePlugins(v),this.inputState.update(v),this.updateAttrs(),S=this.docView.update(v));for(let y=0;y<f.length;y++)if(m[y]!=Du)try{let P=f[y];P.write&&P.write(m[y],this)}catch(P){be(this.state,P)}if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,g=!0;else{let y=this.viewState.lineBlockAt(c.from).top-c.top;(y>1||y<-1)&&(this.scrollDOM.scrollTop+=y,g=!0)}if(S&&this.docView.updateSelection(!0),this.viewport.from==h.from&&this.viewport.to==h.to&&!g&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(i&&!i.empty)for(let a of this.state.facet(Eo))a(i)}get themeClasses(){return Mo+" "+(this.state.facet(Fo)?wu:Su)+" "+this.state.facet(jr)}updateAttrs(){let t=Tu(this,$h,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),i={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Mr)?"true":"false",class:"cm-content",style:`${tt.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(i["aria-readonly"]="true"),Tu(this,Nh,i);let n=this.observer.ignore(()=>{let r=So(this.contentDOM,this.contentAttrs,i),o=So(this.dom,this.editorAttrs,t);return r||o});return this.editorAttrs=t,this.contentAttrs=i,n}showAnnouncements(t){let i=!0;for(let n of t)for(let r of n.effects)if(r.is(it.announce)){i&&(this.announceDOM.textContent=""),i=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(jn),mi.mount(this.root,this.styleModules.concat(tm).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),t){if(t.key!=null){for(let i=0;i<this.measureRequests.length;i++)if(this.measureRequests[i].key===t.key){this.measureRequests[i]=t;return}}this.measureRequests.push(t)}}plugin(t){let i=this.pluginMap.get(t);return(i===void 0||i&&i.spec!=t)&&this.pluginMap.set(t,i=this.plugins.find(n=>n.spec==t)||null),i&&i.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,i,n){return Io(this,t,eu(this,t,i,n))}moveByGroup(t,i){return Io(this,t,eu(this,t,i,n=>D0(this,t.head,n)))}moveToLineBoundary(t,i,n=!0){return E0(this,t,i,n)}moveVertically(t,i,n){return Io(this,t,T0(this,t,i,n))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,i=0){return this.docView.posFromDOM(t,i)}posAtCoords(t,i=!0){return this.readMeasured(),Kh(this,t,i)}coordsAtPos(t,i=1){this.readMeasured();let n=this.docView.coordsAt(t,i);if(!n||n.left==n.right)return n;let r=this.state.doc.lineAt(t),o=this.bidiSpans(r),s=o[rn.find(o,t-r.from,-1,i)];return Qr(n,s.dir==Lt.LTR==i>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(Qh)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>am)return Rh(t.length);let i=this.textDirectionAt(t.from);for(let r of this.bidiCache)if(r.from==t.from&&r.dir==i)return r.order;let n=p0(t.text,i);return this.bidiCache.push(new Zr(t.from,t.to,i,n)),n}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||tt.safari&&((t=this.inputState)===null||t===void 0?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{uh(this.contentDOM),this.docView.updateSelection()})}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((t.nodeType==9?t:t.ownerDocument).defaultView),this.mountStyles())}destroy(){for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,i={}){return Xh.of(new Fr(typeof t=="number"?j.cursor(t):t,i.y,i.x,i.yMargin,i.xMargin))}static domEventHandlers(t){return Bt.define(()=>({}),{eventHandlers:t})}static theme(t,i){let n=mi.newName(),r=[jr.of(n),jn.of(Bo(`.${n}`,t))];return i&&i.dark&&r.push(Fo.of(!0)),r}static baseTheme(t){return Qi.lowest(jn.of(Bo("."+Mo,t,bu)))}static findFromDOM(t){var i;let n=t.querySelector(".cm-content"),r=n&&Tt.get(n)||Tt.get(t);return((i=r==null?void 0:r.rootView)===null||i===void 0?void 0:i.view)||null}}it.styleModule=jn,it.inputHandler=Lh,it.perLineTextDirection=Qh,it.exceptionSink=Ih,it.updateListener=Eo,it.editable=Mr,it.mouseSelectionStyle=_h,it.dragMovesSelection=kh,it.clickAddsSelectionRange=Ah,it.decorations=Wn,it.atomicRanges=Fh,it.scrollMargins=Mh,it.darkTheme=Fo,it.contentAttributes=Nh,it.editorAttributes=$h,it.lineWrapping=it.contentAttributes.of({class:"cm-lineWrapping"}),it.announce=ht.define();const am=4096,Du={};class Zr{constructor(t,i,n,r){this.from=t,this.to=i,this.dir=n,this.order=r}static update(t,i){if(i.empty)return t;let n=[],r=t.length?t[t.length-1].dir:Lt.LTR;for(let o=Math.max(0,t.length-10);o<t.length;o++){let s=t[o];s.dir==r&&!i.touchesRange(s.from,s.to)&&n.push(new Zr(i.mapPos(s.from,1),i.mapPos(s.to,-1),s.dir,s.order))}return n}}function Tu(e,t,i){for(let n=e.state.facet(t),r=n.length-1;r>=0;r--){let o=n[r],s=typeof o=="function"?o(e):o;s&&Po(s,i)}return i}const hm=tt.mac?"mac":tt.windows?"win":tt.linux?"linux":"key";function um(e,t){const i=e.split(/-(?!$)/);let n=i[i.length-1];n=="Space"&&(n=" ");let r,o,s,a;for(let h=0;h<i.length-1;++h){const c=i[h];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))o=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))t=="mac"?a=!0:o=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),a&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function zr(e,t,i){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),i!==!1&&t.shiftKey&&(e="Shift-"+e),e}const cm=Qi.default(it.domEventHandlers({keydown(e,t){return _u(ku(t.state),e,t,"editor")}})),zn=K.define({enables:cm}),Au=new WeakMap;function ku(e){let t=e.facet(zn),i=Au.get(t);return i||Au.set(t,i=fm(t.reduce((n,r)=>n.concat(r),[]))),i}function pm(e,t,i){return _u(ku(e.state),t,e,i)}let Pi=null;const dm=4e3;function fm(e,t=hm){let i=Object.create(null),n=Object.create(null),r=(s,a)=>{let h=n[s];if(h==null)n[s]=a;else if(h!=a)throw new Error("Key binding "+s+" is used both as a regular binding and as a multi-stroke prefix")},o=(s,a,h,c)=>{let d=i[s]||(i[s]=Object.create(null)),f=a.split(/ (?!$)/).map(S=>um(S,t));for(let S=1;S<f.length;S++){let g=f.slice(0,S).join(" ");r(g,!0),d[g]||(d[g]={preventDefault:!0,commands:[y=>{let P=Pi={view:y,prefix:g,scope:s};return setTimeout(()=>{Pi==P&&(Pi=null)},dm),!0}]})}let m=f.join(" ");r(m,!1);let v=d[m]||(d[m]={preventDefault:!1,commands:[]});v.commands.push(h),c&&(v.preventDefault=!0)};for(let s of e){let a=s[t]||s.key;if(a)for(let h of s.scope?s.scope.split(" "):["editor"])o(h,a,s.run,s.preventDefault),s.shift&&o(h,"Shift-"+a,s.shift,s.preventDefault)}return i}function _u(e,t,i,n){let r=Vf(t),o=Jt(r,0),s=Se(o)==r.length&&r!=" ",a="",h=!1;Pi&&Pi.view==i&&Pi.scope==n&&(a=Pi.prefix+" ",(h=nu.indexOf(t.keyCode)<0)&&(Pi=null));let c=v=>{if(v){for(let S of v.commands)if(S(i))return!0;v.preventDefault&&(h=!0)}return!1},d=e[n],f,m;if(d){if(c(d[a+zr(r,t,!s)]))return!0;if(s&&(t.shiftKey||t.altKey||t.metaKey||o>127)&&(f=gi[t.keyCode])&&f!=r){if(c(d[a+zr(f,t,!0)])||t.shiftKey&&(m=Nn[t.keyCode])!=r&&m!=f&&c(d[a+zr(m,t,!1)]))return!0}else if(s&&t.shiftKey&&c(d[a+zr(r,t,!0)]))return!0}return h}const Iu=!tt.ios,qn=K.define({combine(e){return qe(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(t,i)=>Math.min(t,i),drawRangeCursor:(t,i)=>t||i})}});function mm(e={}){return[qn.of(e),gm,Om]}class Lu{constructor(t,i,n,r,o){this.left=t,this.top=i,this.width=n,this.height=r,this.className=o}draw(){let t=document.createElement("div");return t.className=this.className,this.adjust(t),t}adjust(t){t.style.left=this.left+"px",t.style.top=this.top+"px",this.width>=0&&(t.style.width=this.width+"px"),t.style.height=this.height+"px"}eq(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height&&this.className==t.className}}const gm=Bt.fromClass(class{constructor(e){this.view=e,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=e.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=e.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),e.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(qn).cursorBlinkRate+"ms"}update(e){let t=e.startState.facet(qn)!=e.state.facet(qn);(t||e.selectionSet||e.geometryChanged||e.viewportChanged)&&this.view.requestMeasure(this.measureReq),e.transactions.some(i=>i.scrollIntoView)&&(this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink"),t&&this.setBlinkRate()}readPos(){let{state:e}=this.view,t=e.facet(qn),i=e.selection.ranges.map(r=>r.empty?[]:ym(this.view,r)).reduce((r,o)=>r.concat(o)),n=[];for(let r of e.selection.ranges){let o=r==e.selection.main;if(r.empty?!o||Iu:t.drawRangeCursor){let s=xm(this.view,r,o);s&&n.push(s)}}return{rangePieces:i,cursors:n}}drawSel({rangePieces:e,cursors:t}){if(e.length!=this.rangePieces.length||e.some((i,n)=>!i.eq(this.rangePieces[n]))){this.selectionLayer.textContent="";for(let i of e)this.selectionLayer.appendChild(i.draw());this.rangePieces=e}if(t.length!=this.cursors.length||t.some((i,n)=>!i.eq(this.cursors[n]))){let i=this.cursorLayer.children;if(i.length!==t.length){this.cursorLayer.textContent="";for(const n of t)this.cursorLayer.appendChild(n.draw())}else t.forEach((n,r)=>n.adjust(i[r]));this.cursors=t}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),Qu={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};Iu&&(Qu[".cm-line"].caretColor="transparent !important");const Om=Qi.highest(it.theme(Qu));function Xu(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==Lt.LTR?t.left:t.right-e.scrollDOM.clientWidth)-e.scrollDOM.scrollLeft,top:t.top-e.scrollDOM.scrollTop}}function $u(e,t,i){let n=j.cursor(t);return{from:Math.max(i.from,e.moveToLineBoundary(n,!1,!0).from),to:Math.min(i.to,e.moveToLineBoundary(n,!0,!0).from),type:Et.Text}}function Nu(e,t){let i=e.lineBlockAt(t);if(Array.isArray(i.type)){for(let n of i.type)if(n.to>t||n.to==t&&(n.to==i.to||n.type==Et.Text))return n}return i}function ym(e,t){if(t.to<=e.viewport.from||t.from>=e.viewport.to)return[];let i=Math.max(t.from,e.viewport.from),n=Math.min(t.to,e.viewport.to),r=e.textDirection==Lt.LTR,o=e.contentDOM,s=o.getBoundingClientRect(),a=Xu(e),h=window.getComputedStyle(o.firstChild),c=s.left+parseInt(h.paddingLeft)+Math.min(0,parseInt(h.textIndent)),d=s.right-parseInt(h.paddingRight),f=Nu(e,i),m=Nu(e,n),v=f.type==Et.Text?f:null,S=m.type==Et.Text?m:null;if(e.lineWrapping&&(v&&(v=$u(e,i,v)),S&&(S=$u(e,n,S))),v&&S&&v.from==S.from)return y(P(t.from,t.to,v));{let D=v?P(t.from,null,v):w(f,!1),T=S?P(null,t.to,S):w(m,!0),_=[];return(v||f).to<(S||m).from-1?_.push(g(c,D.bottom,d,T.top)):D.bottom<T.top&&e.elementAtHeight((D.bottom+T.top)/2).type==Et.Text&&(D.bottom=T.top=(D.bottom+T.top)/2),y(D).concat(_).concat(y(T))}function g(D,T,_,I){return new Lu(D-a.left,T-a.top-.01,_-D,I-T+.01,"cm-selectionBackground")}function y({top:D,bottom:T,horizontal:_}){let I=[];for(let F=0;F<_.length;F+=2)I.push(g(_[F],D,_[F+1],T));return I}function P(D,T,_){let I=1e9,F=-1e9,G=[];function z(Q,W,V,et,ct){let ft=e.coordsAtPos(Q,Q==_.to?-2:2),yt=e.coordsAtPos(V,V==_.from?2:-2);I=Math.min(ft.top,yt.top,I),F=Math.max(ft.bottom,yt.bottom,F),ct==Lt.LTR?G.push(r&&W?c:ft.left,r&&et?d:yt.right):G.push(!r&&et?c:yt.left,!r&&W?d:ft.right)}let U=D!=null?D:_.from,Y=T!=null?T:_.to;for(let Q of e.visibleRanges)if(Q.to>U&&Q.from<Y)for(let W=Math.max(Q.from,U),V=Math.min(Q.to,Y);;){let et=e.state.doc.lineAt(W);for(let ct of e.bidiSpans(et)){let ft=ct.from+et.from,yt=ct.to+et.from;if(ft>=V)break;yt>W&&z(Math.max(ft,W),D==null&&ft<=U,Math.min(yt,V),T==null&&yt>=Y,ct.dir)}if(W=et.to+1,W>=V)break}return G.length==0&&z(U,D==null,Y,T==null,e.textDirection),{top:I,bottom:F,horizontal:G}}function w(D,T){let _=s.top+(T?D.top:D.bottom);return{top:_,bottom:_,horizontal:[]}}}function xm(e,t,i){let n=e.coordsAtPos(t.head,t.assoc||1);if(!n)return null;let r=Xu(e);return new Lu(n.left-r.left,n.top-r.top,-1,n.bottom-n.top,i?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}const Fu=ht.define({map(e,t){return e==null?null:t.mapPos(e)}}),Un=jt.define({create(){return null},update(e,t){return e!=null&&(e=t.changes.mapPos(e)),t.effects.reduce((i,n)=>n.is(Fu)?n.value:i,e)}}),vm=Bt.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var t;let i=e.state.field(Un);i==null?this.cursor!=null&&((t=this.cursor)===null||t===void 0||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(Un)!=i||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let e=this.view.state.field(Un),t=e!=null&&this.view.coordsAtPos(e);if(!t)return null;let i=this.view.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+this.view.scrollDOM.scrollLeft,top:t.top-i.top+this.view.scrollDOM.scrollTop,height:t.bottom-t.top}}drawCursor(e){this.cursor&&(e?(this.cursor.style.left=e.left+"px",this.cursor.style.top=e.top+"px",this.cursor.style.height=e.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(Un)!=e&&this.view.dispatch({effects:Fu.of(e)})}},{eventHandlers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){(e.target==this.view.contentDOM||!this.view.contentDOM.contains(e.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Pm(){return[Un,vm]}function Mu(e,t,i,n,r){t.lastIndex=0;for(let o=e.iterRange(i,n),s=i,a;!o.next().done;s+=o.value.length)if(!o.lineBreak)for(;a=t.exec(o.value);)r(s+a.index,a)}function Cm(e,t){let i=e.visibleRanges;if(i.length==1&&i[0].from==e.viewport.from&&i[0].to==e.viewport.to)return i;let n=[];for(let{from:r,to:o}of i)r=Math.max(e.state.doc.lineAt(r).from,r-t),o=Math.min(e.state.doc.lineAt(o).to,o+t),n.length&&n[n.length-1].to>=r?n[n.length-1].to=o:n.push({from:r,to:o});return n}class Sm{constructor(t){const{regexp:i,decoration:n,decorate:r,boundary:o,maxLength:s=1e3}=t;if(!i.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=i,r)this.addMatch=(a,h,c,d)=>r(d,c,c+a[0].length,a,h);else if(typeof n=="function")this.addMatch=(a,h,c,d)=>{let f=n(a,h,c);f&&d(c,c+a[0].length,f)};else if(n)this.addMatch=(a,h,c,d)=>d(c,c+a[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=s}createDeco(t){let i=new fi,n=i.add.bind(i);for(let{from:r,to:o}of Cm(t,this.maxLength))Mu(t.state.doc,this.regexp,r,o,(s,a)=>this.addMatch(a,t,s,n));return i.finish()}updateDeco(t,i){let n=1e9,r=-1;return t.docChanged&&t.changes.iterChanges((o,s,a,h)=>{h>t.view.viewport.from&&a<t.view.viewport.to&&(n=Math.min(a,n),r=Math.max(h,r))}),t.viewportChanged||r-n>1e3?this.createDeco(t.view):r>-1?this.updateRange(t.view,i.map(t.changes),n,r):i}updateRange(t,i,n,r){for(let o of t.visibleRanges){let s=Math.max(o.from,n),a=Math.min(o.to,r);if(a>s){let h=t.state.doc.lineAt(s),c=h.to<a?t.state.doc.lineAt(a):h,d=Math.max(o.from,h.from),f=Math.min(o.to,c.to);if(this.boundary){for(;s>h.from;s--)if(this.boundary.test(h.text[s-1-h.from])){d=s;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){f=a;break}}let m=[],v,S=(g,y,P)=>m.push(P.range(g,y));if(h==c)for(this.regexp.lastIndex=d-h.from;(v=this.regexp.exec(h.text))&&v.index<f-h.from;)this.addMatch(v,t,v.index+h.from,S);else Mu(t.state.doc,this.regexp,d,f,(g,y)=>this.addMatch(y,t,g,S));i=i.update({filterFrom:d,filterTo:f,filter:(g,y)=>g<d||y>f,add:m})}}return i}}const Yo=/x/.unicode!=null?"gu":"g",wm=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,Yo),bm={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Wo=null;function Em(){var e;if(Wo==null&&typeof document<"u"&&document.body){let t=document.body.style;Wo=((e=t.tabSize)!==null&&e!==void 0?e:t.MozTabSize)!=null}return Wo||!1}const qr=K.define({combine(e){let t=qe(e,{render:null,specialChars:wm,addSpecialChars:null});return(t.replaceTabs=!Em())&&(t.specialChars=new RegExp("	|"+t.specialChars.source,Yo)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,Yo)),t}});function Dm(e={}){return[qr.of(e),Tm()]}let Bu=null;function Tm(){return Bu||(Bu=Bt.fromClass(class{constructor(e){this.view=e,this.decorations=nt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(qr)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new Sm({regexp:e.specialChars,decoration:(t,i,n)=>{let{doc:r}=i.state,o=Jt(t[0],0);if(o==9){let s=r.lineAt(n),a=i.state.tabSize,h=$n(s.text,a,n-s.from);return nt.replace({widget:new Im((a-h%a)*this.view.defaultCharacterWidth)})}return this.decorationCache[o]||(this.decorationCache[o]=nt.replace({widget:new _m(e,o)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(qr);e.startState.facet(qr)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))}const Am="\u2022";function km(e){return e>=32?Am:e==10?"\u2424":String.fromCharCode(9216+e)}class _m extends li{constructor(t,i){super(),this.options=t,this.code=i}eq(t){return t.code==this.code}toDOM(t){let i=km(this.code),n=t.state.phrase("Control character")+" "+(bm[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,n,i);if(r)return r;let o=document.createElement("span");return o.textContent=i,o.title=n,o.setAttribute("aria-label",n),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class Im extends li{constructor(t){super(),this.width=t}eq(t){return t.width==this.width}toDOM(){let t=document.createElement("span");return t.textContent="	",t.className="cm-tab",t.style.width=this.width+"px",t}ignoreEvent(){return!1}}function Lm(){return Xm}const Qm=nt.line({class:"cm-activeLine"}),Xm=Bt.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=-1,i=[];for(let n of e.state.selection.ranges){let r=e.lineBlockAt(n.head);r.from>t&&(i.push(Qm.range(r.from)),t=r.from)}return nt.set(i)}},{decorations:e=>e.decorations}),jo=2e3;function $m(e,t,i){let n=Math.min(t.line,i.line),r=Math.max(t.line,i.line),o=[];if(t.off>jo||i.off>jo||t.col<0||i.col<0){let s=Math.min(t.off,i.off),a=Math.max(t.off,i.off);for(let h=n;h<=r;h++){let c=e.doc.line(h);c.length<=a&&o.push(j.range(c.from+s,c.to+a))}}else{let s=Math.min(t.col,i.col),a=Math.max(t.col,i.col);for(let h=n;h<=r;h++){let c=e.doc.line(h),d=ho(c.text,s,e.tabSize,!0);if(d>-1){let f=ho(c.text,a,e.tabSize);o.push(j.range(c.from+d,c.from+f))}}}return o}function Nm(e,t){let i=e.coordsAtPos(e.viewport.from);return i?Math.round(Math.abs((i.left-t)/e.defaultCharacterWidth)):-1}function Ru(e,t){let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1),n=e.state.doc.lineAt(i),r=i-n.from,o=r>jo?-1:r==n.length?Nm(e,t.clientX):$n(n.text,e.state.tabSize,i-n.from);return{line:n.number,col:o,off:r}}function Fm(e,t){let i=Ru(e,t),n=e.state.selection;return i?{update(r){if(r.docChanged){let o=r.changes.mapPos(r.startState.doc.line(i.line).from),s=r.state.doc.lineAt(o);i={line:s.number,col:i.col,off:Math.min(i.off,s.length)},n=n.map(r.changes)}},get(r,o,s){let a=Ru(e,r);if(!a)return n;let h=$m(e.state,i,a);return h.length?s?j.create(h.concat(n.ranges)):j.create(h):n}}:null}function Mm(e){let t=(e==null?void 0:e.eventFilter)||(i=>i.altKey&&i.button==0);return it.mouseSelectionStyle.of((i,n)=>t(n)?Fm(i,n):null)}const Bm={Alt:[18,e=>e.altKey],Control:[17,e=>e.ctrlKey],Shift:[16,e=>e.shiftKey],Meta:[91,e=>e.metaKey]},Rm={style:"cursor: crosshair"};function Ym(e={}){let[t,i]=Bm[e.key||"Alt"],n=Bt.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventHandlers:{keydown(r){this.set(r.keyCode==t||i(r))},keyup(r){(r.keyCode==t||!i(r))&&this.set(!1)}}});return[n,it.contentAttributes.of(r=>{var o;return!((o=r.plugin(n))===null||o===void 0)&&o.isDown?Rm:null})]}const Zo="-10000px";class Yu{constructor(t,i,n){this.facet=i,this.createTooltipView=n,this.input=t.state.facet(i),this.tooltips=this.input.filter(r=>r),this.tooltipViews=this.tooltips.map(n)}update(t){let i=t.state.facet(this.facet),n=i.filter(o=>o);if(i===this.input){for(let o of this.tooltipViews)o.update&&o.update(t);return!1}let r=[];for(let o=0;o<n.length;o++){let s=n[o],a=-1;if(s){for(let h=0;h<this.tooltips.length;h++){let c=this.tooltips[h];c&&c.create==s.create&&(a=h)}if(a<0)r[o]=this.createTooltipView(s);else{let h=r[o]=this.tooltipViews[a];h.update&&h.update(t)}}}for(let o of this.tooltipViews)r.indexOf(o)<0&&o.dom.remove();return this.input=i,this.tooltips=n,this.tooltipViews=r,!0}}function Wm(e){let{win:t}=e;return{top:0,left:0,bottom:t.innerHeight,right:t.innerWidth}}const zo=K.define({combine:e=>{var t,i,n;return{position:tt.ios?"absolute":((t=e.find(r=>r.position))===null||t===void 0?void 0:t.position)||"fixed",parent:((i=e.find(r=>r.parent))===null||i===void 0?void 0:i.parent)||null,tooltipSpace:((n=e.find(r=>r.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||Wm}}}),Wu=Bt.fromClass(class{constructor(e){this.view=e,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let t=e.state.facet(zo);this.position=t.position,this.parent=t.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new Yu(e,qo,i=>this.createTooltip(i)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(i=>{Date.now()>this.lastTransaction-50&&i.length>0&&i[i.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e);t&&this.observeIntersection();let i=t||e.geometryChanged,n=e.state.facet(zo);if(n.position!=this.position){this.position=n.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;i=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);i=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);i&&this.maybeMeasure()}createTooltip(e){let t=e.create(this.view);if(t.dom.classList.add("cm-tooltip"),e.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",t.dom.appendChild(i)}return t.dom.style.position=this.position,t.dom.style.top=Zo,this.container.appendChild(t.dom),t.mount&&t.mount(this.view),t}destroy(){var e;this.view.win.removeEventListener("resize",this.measureSoon);for(let{dom:t}of this.manager.tooltipViews)t.remove();(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=this.view.dom.getBoundingClientRect();return{editor:e,parent:this.parent?this.container.getBoundingClientRect():e,pos:this.manager.tooltips.map((t,i)=>{let n=this.manager.tooltipViews[i];return n.getCoords?n.getCoords(t.pos):this.view.coordsAtPos(t.pos)}),size:this.manager.tooltipViews.map(({dom:t})=>t.getBoundingClientRect()),space:this.view.state.facet(zo).tooltipSpace(this.view)}}writeMeasure(e){let{editor:t,space:i}=e,n=[];for(let r=0;r<this.manager.tooltips.length;r++){let o=this.manager.tooltips[r],s=this.manager.tooltipViews[r],{dom:a}=s,h=e.pos[r],c=e.size[r];if(!h||h.bottom<=Math.max(t.top,i.top)||h.top>=Math.min(t.bottom,i.bottom)||h.right<Math.max(t.left,i.left)-.1||h.left>Math.min(t.right,i.right)+.1){a.style.top=Zo;continue}let d=o.arrow?s.dom.querySelector(".cm-tooltip-arrow"):null,f=d?7:0,m=c.right-c.left,v=c.bottom-c.top,S=s.offset||Zm,g=this.view.textDirection==Lt.LTR,y=c.width>i.right-i.left?g?i.left:i.right-c.width:g?Math.min(h.left-(d?14:0)+S.x,i.right-m):Math.max(i.left,h.left-m+(d?14:0)-S.x),P=!!o.above;!o.strictSide&&(P?h.top-(c.bottom-c.top)-S.y<i.top:h.bottom+(c.bottom-c.top)+S.y>i.bottom)&&P==i.bottom-h.bottom>h.top-i.top&&(P=!P);let w=P?h.top-v-f-S.y:h.bottom+f+S.y,D=y+m;if(s.overlap!==!0)for(let T of n)T.left<D&&T.right>y&&T.top<w+v&&T.bottom>w&&(w=P?T.top-v-2-f:T.bottom+f+2);this.position=="absolute"?(a.style.top=w-e.parent.top+"px",a.style.left=y-e.parent.left+"px"):(a.style.top=w+"px",a.style.left=y+"px"),d&&(d.style.left=`${h.left+(g?S.x:-S.x)-(y+14-7)}px`),s.overlap!==!0&&n.push({left:y,top:w,right:D,bottom:w+v}),a.classList.toggle("cm-tooltip-above",P),a.classList.toggle("cm-tooltip-below",!P),s.positioned&&s.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=Zo}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),jm=it.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:`${7}px`,width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:`${7}px solid transparent`,borderRight:`${7}px solid transparent`},".cm-tooltip-above &":{bottom:`-${7}px`,"&:before":{borderTop:`${7}px solid #bbb`},"&:after":{borderTop:`${7}px solid #f5f5f5`,bottom:"1px"}},".cm-tooltip-below &":{top:`-${7}px`,"&:before":{borderBottom:`${7}px solid #bbb`},"&:after":{borderBottom:`${7}px solid #f5f5f5`,top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Zm={x:0,y:0},qo=K.define({enables:[Wu,jm]}),Ur=K.define();class Uo{constructor(t){this.view=t,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Yu(t,Ur,i=>this.createHostedView(i))}static create(t){return new Uo(t)}createHostedView(t){let i=t.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(i.dom),this.mounted&&i.mount&&i.mount(this.view),i}mount(t){for(let i of this.manager.tooltipViews)i.mount&&i.mount(t);this.mounted=!0}positioned(){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned()}update(t){this.manager.update(t)}}const zm=qo.compute([Ur],e=>{let t=e.facet(Ur).filter(i=>i);return t.length===0?null:{pos:Math.min(...t.map(i=>i.pos)),end:Math.max(...t.filter(i=>i.end!=null).map(i=>i.end)),create:Uo.create,above:t[0].above,arrow:t.some(i=>i.arrow)}});class qm{constructor(t,i,n,r,o){this.view=t,this.source=i,this.field=n,this.setHover=r,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:t.dom,time:0},this.checkHover=this.checkHover.bind(this),t.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),t.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let t=Date.now()-this.lastMove.time;t<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-t):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:t}=this,i=this.view.contentDOM.contains(t.target)?this.view.posAtCoords(t):null;if(i==null)return;let n=this.view.coordsAtPos(i);if(n==null||t.y<n.top||t.y>n.bottom||t.x<n.left-this.view.defaultCharacterWidth||t.x>n.right+this.view.defaultCharacterWidth)return;let r=this.view.bidiSpans(this.view.state.doc.lineAt(i)).find(a=>a.from<=i&&a.to>=i),o=r&&r.dir==Lt.RTL?-1:1,s=this.source(this.view,i,t.x<n.left?-o:o);if(s!=null&&s.then){let a=this.pending={pos:i};s.then(h=>{this.pending==a&&(this.pending=null,h&&this.view.dispatch({effects:this.setHover.of(h)}))},h=>be(this.view.state,h,"hover tooltip"))}else s&&this.view.dispatch({effects:this.setHover.of(s)})}mousemove(t){var i;this.lastMove={x:t.clientX,y:t.clientY,target:t.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let n=this.active;if(n&&!Um(this.lastMove.target)||this.pending){let{pos:r}=n||this.pending,o=(i=n==null?void 0:n.end)!==null&&i!==void 0?i:r;(r==o?this.view.posAtCoords(this.lastMove)!=r:!Gm(this.view,r,o,t.clientX,t.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function Um(e){for(let t=e;t;t=t.parentNode)if(t.nodeType==1&&t.classList.contains("cm-tooltip"))return!0;return!1}function Gm(e,t,i,n,r,o){let s=document.createRange(),a=e.domAtPos(t),h=e.domAtPos(i);s.setEnd(h.node,h.offset),s.setStart(a.node,a.offset);let c=s.getClientRects();s.detach();for(let d=0;d<c.length;d++){let f=c[d];if(Math.max(f.top-r,r-f.bottom,f.left-n,n-f.right)<=o)return!0}return!1}function Vm(e,t={}){let i=ht.define(),n=jt.define({create(){return null},update(r,o){if(r&&(t.hideOnChange&&(o.docChanged||o.selection)||t.hideOn&&t.hideOn(o,r)))return null;if(r&&o.docChanged){let s=o.changes.mapPos(r.pos,-1,Kt.TrackDel);if(s==null)return null;let a=Object.assign(Object.create(null),r);a.pos=s,r.end!=null&&(a.end=o.changes.mapPos(r.end)),r=a}for(let s of o.effects)s.is(i)&&(r=s.value),s.is(Jm)&&(r=null);return r},provide:r=>Ur.from(r)});return[n,Bt.define(r=>new qm(r,e,n,i,t.hoverTime||300)),zm]}function Hm(e,t){let i=e.plugin(Wu);if(!i)return null;let n=i.manager.tooltips.indexOf(t);return n<0?null:i.manager.tooltipViews[n]}const Jm=ht.define(),ju=K.define({combine(e){let t,i;for(let n of e)t=t||n.topContainer,i=i||n.bottomContainer;return{topContainer:t,bottomContainer:i}}});function Gn(e,t){let i=e.plugin(Zu),n=i?i.specs.indexOf(t):-1;return n>-1?i.panels[n]:null}const Zu=Bt.fromClass(class{constructor(e){this.input=e.state.facet(Vn),this.specs=this.input.filter(i=>i),this.panels=this.specs.map(i=>i(e));let t=e.state.facet(ju);this.top=new Gr(e,!0,t.topContainer),this.bottom=new Gr(e,!1,t.bottomContainer),this.top.sync(this.panels.filter(i=>i.top)),this.bottom.sync(this.panels.filter(i=>!i.top));for(let i of this.panels)i.dom.classList.add("cm-panel"),i.mount&&i.mount()}update(e){let t=e.state.facet(ju);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new Gr(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new Gr(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let i=e.state.facet(Vn);if(i!=this.input){let n=i.filter(h=>h),r=[],o=[],s=[],a=[];for(let h of n){let c=this.specs.indexOf(h),d;c<0?(d=h(e.view),a.push(d)):(d=this.panels[c],d.update&&d.update(e)),r.push(d),(d.top?o:s).push(d)}this.specs=n,this.panels=r,this.top.sync(o),this.bottom.sync(s);for(let h of a)h.dom.classList.add("cm-panel"),h.mount&&h.mount()}else for(let n of this.panels)n.update&&n.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>it.scrollMargins.of(t=>{let i=t.plugin(e);return i&&{top:i.top.scrollMargin(),bottom:i.bottom.scrollMargin()}})});class Gr{constructor(t,i,n){this.view=t,this.top=i,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(t){for(let i of this.panels)i.destroy&&t.indexOf(i)<0&&i.destroy();this.panels=t,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let i=this.container||this.view.dom;i.insertBefore(this.dom,this.top?i.firstChild:null)}let t=this.dom.firstChild;for(let i of this.panels)if(i.dom.parentNode==this.dom){for(;t!=i.dom;)t=zu(t);t=t.nextSibling}else this.dom.insertBefore(i.dom,t);for(;t;)t=zu(t)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let t of this.classes.split(" "))t&&this.container.classList.remove(t);for(let t of(this.classes=this.view.themeClasses).split(" "))t&&this.container.classList.add(t)}}}function zu(e){let t=e.nextSibling;return e.remove(),t}const Vn=K.define({enables:Zu});class hi extends $i{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}hi.prototype.elementClass="",hi.prototype.toDOM=void 0,hi.prototype.mapMode=Kt.TrackBefore,hi.prototype.startSide=hi.prototype.endSide=-1,hi.prototype.point=!0;const Vr=K.define(),Km={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>wt.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Hn=K.define();function tg(e){return[qu(),Hn.of(Object.assign(Object.assign({},Km),e))]}const Go=K.define({combine:e=>e.some(t=>t)});function qu(e){let t=[eg];return e&&e.fixed===!1&&t.push(Go.of(!0)),t}const eg=Bt.fromClass(class{constructor(e){this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=e.state.facet(Hn).map(t=>new Vu(e,t));for(let t of this.gutters)this.dom.appendChild(t.dom);this.fixed=!e.state.facet(Go),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}update(e){if(this.updateGutters(e)){let t=this.prevViewport,i=e.view.viewport,n=Math.min(t.to,i.to)-Math.max(t.from,i.from);this.syncGutters(n<(i.to-i.from)*.8)}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Go)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&this.dom.remove();let i=wt.iter(this.view.state.facet(Vr),this.view.viewport.from),n=[],r=this.gutters.map(o=>new ig(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks){let s;if(Array.isArray(o.type)){for(let a of o.type)if(a.type==Et.Text){s=a;break}}else s=o.type==Et.Text?o:void 0;if(s){n.length&&(n=[]),Gu(i,n,o.from);for(let a of r)a.line(this.view,s,n)}}for(let o of r)o.finish();e&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(e){let t=e.startState.facet(Hn),i=e.state.facet(Hn),n=e.docChanged||e.heightChanged||e.viewportChanged||!wt.eq(e.startState.facet(Vr),e.state.facet(Vr),e.view.viewport.from,e.view.viewport.to);if(t==i)for(let r of this.gutters)r.update(e)&&(n=!0);else{n=!0;let r=[];for(let o of i){let s=t.indexOf(o);s<0?r.push(new Vu(this.view,o)):(this.gutters[s].update(e),r.push(this.gutters[s]))}for(let o of this.gutters)o.dom.remove(),r.indexOf(o)<0&&o.destroy();for(let o of r)this.dom.appendChild(o.dom);this.gutters=r}return n}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove()}},{provide:e=>it.scrollMargins.of(t=>{let i=t.plugin(e);return!i||i.gutters.length==0||!i.fixed?null:t.textDirection==Lt.LTR?{left:i.dom.offsetWidth}:{right:i.dom.offsetWidth}})});function Uu(e){return Array.isArray(e)?e:[e]}function Gu(e,t,i){for(;e.value&&e.from<=i;)e.from==i&&t.push(e.value),e.next()}class ig{constructor(t,i,n){this.gutter=t,this.height=n,this.localMarkers=[],this.i=0,this.cursor=wt.iter(t.markers,i.from)}line(t,i,n){this.localMarkers.length&&(this.localMarkers=[]),Gu(this.cursor,this.localMarkers,i.from);let r=n.length?this.localMarkers.concat(n):this.localMarkers,o=this.gutter.config.lineMarker(t,i,r);o&&r.unshift(o);let s=this.gutter;if(r.length==0&&!s.config.renderEmptyElements)return;let a=i.top-this.height;if(this.i==s.elements.length){let h=new Hu(t,i.height,a,r);s.elements.push(h),s.dom.appendChild(h.dom)}else s.elements[this.i].update(t,i.height,a,r);this.height=i.bottom,this.i++}finish(){let t=this.gutter;for(;t.elements.length>this.i;){let i=t.elements.pop();t.dom.removeChild(i.dom),i.destroy()}}}class Vu{constructor(t,i){this.view=t,this.config=i,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in i.domEventHandlers)this.dom.addEventListener(n,r=>{let o=t.lineBlockAtHeight(r.clientY-t.documentTop);i.domEventHandlers[n](t,o,r)&&r.preventDefault()});this.markers=Uu(i.markers(t)),i.initialSpacer&&(this.spacer=new Hu(t,0,0,[i.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(t){let i=this.markers;if(this.markers=Uu(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],t);r!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[r])}let n=t.view.viewport;return!wt.eq(this.markers,i,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(t):!1)}destroy(){for(let t of this.elements)t.destroy()}}class Hu{constructor(t,i,n,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,i,n,r)}update(t,i,n,r){this.height!=i&&(this.dom.style.height=(this.height=i)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),ng(this.markers,r)||this.setMarkers(t,r)}setMarkers(t,i){let n="cm-gutterElement",r=this.dom.firstChild;for(let o=0,s=0;;){let a=s,h=o<i.length?i[o++]:null,c=!1;if(h){let d=h.elementClass;d&&(n+=" "+d);for(let f=s;f<this.markers.length;f++)if(this.markers[f].compare(h)){a=f,c=!0;break}}else a=this.markers.length;for(;s<a;){let d=this.markers[s++];if(d.toDOM){d.destroy(r);let f=r.nextSibling;r.remove(),r=f}}if(!h)break;h.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(h.toDOM(t),r)),c&&s++}this.dom.className=n,this.markers=i}destroy(){this.setMarkers(null,[])}}function ng(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(!e[i].compare(t[i]))return!1;return!0}const rg=K.define(),sn=K.define({combine(e){return qe(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(t,i){let n=Object.assign({},t);for(let r in i){let o=n[r],s=i[r];n[r]=o?(a,h,c)=>o(a,h,c)||s(a,h,c):s}return n}})}});class Vo extends hi{constructor(t){super(),this.number=t}eq(t){return this.number==t.number}toDOM(){return document.createTextNode(this.number)}}function Ho(e,t){return e.state.facet(sn).formatNumber(t,e.state)}const sg=Hn.compute([sn],e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(t){return t.state.facet(rg)},lineMarker(t,i,n){return n.some(r=>r.toDOM)?null:new Vo(Ho(t,t.state.doc.lineAt(i.from).number))},lineMarkerChange:t=>t.startState.facet(sn)!=t.state.facet(sn),initialSpacer(t){return new Vo(Ho(t,Ju(t.state.doc.lines)))},updateSpacer(t,i){let n=Ho(i.view,Ju(i.view.state.doc.lines));return n==t.number?t:new Vo(n)},domEventHandlers:e.facet(sn).domEventHandlers}));function og(e={}){return[sn.of(e),qu(),sg]}function Ju(e){let t=9;for(;t<e;)t=t*10+9;return t}const lg=new class extends hi{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},ag=Vr.compute(["selection"],e=>{let t=[],i=-1;for(let n of e.selection.ranges){let r=e.doc.lineAt(n.head).from;r>i&&(i=r,t.push(lg.range(r)))}return wt.of(t)});function hg(){return ag}const Ku=1024;let ug=0;class Jo{constructor(t,i){this.from=t,this.to=i}}class gt{constructor(t={}){this.id=ug++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof t!="function"&&(t=Oe.match(t)),i=>{let n=t(i);return n===void 0?null:[this,n]}}}gt.closedBy=new gt({deserialize:e=>e.split(" ")}),gt.openedBy=new gt({deserialize:e=>e.split(" ")}),gt.group=new gt({deserialize:e=>e.split(" ")}),gt.contextHash=new gt({perNode:!0}),gt.lookAhead=new gt({perNode:!0}),gt.mounted=new gt({perNode:!0});const cg=Object.create(null);class Oe{constructor(t,i,n,r=0){this.name=t,this.props=i,this.id=n,this.flags=r}static define(t){let i=t.props&&t.props.length?Object.create(null):cg,n=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(t.name==null?8:0),r=new Oe(t.name||"",i,t.id,n);if(t.props){for(let o of t.props)if(Array.isArray(o)||(o=o(r)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");i[o[0].id]=o[1]}}return r}prop(t){return this.props[t.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(t){if(typeof t=="string"){if(this.name==t)return!0;let i=this.prop(gt.group);return i?i.indexOf(t)>-1:!1}return this.id==t}static match(t){let i=Object.create(null);for(let n in t)for(let r of n.split(" "))i[r]=t[n];return n=>{for(let r=n.prop(gt.group),o=-1;o<(r?r.length:0);o++){let s=i[o<0?n.name:r[o]];if(s)return s}}}}Oe.none=new Oe("",Object.create(null),0,8);class Ko{constructor(t){this.types=t;for(let i=0;i<t.length;i++)if(t[i].id!=i)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let i=[];for(let n of this.types){let r=null;for(let o of t){let s=o(n);s&&(r||(r=Object.assign({},n.props)),r[s[0].id]=s[1])}i.push(r?new Oe(n.name,r,n.id,n.flags):n)}return new Ko(i)}}const Hr=new WeakMap,tc=new WeakMap;var Gt;(function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"})(Gt||(Gt={}));class Rt{constructor(t,i,n,r,o){if(this.type=t,this.children=i,this.positions=n,this.length=r,this.props=null,o&&o.length){this.props=Object.create(null);for(let[s,a]of o)this.props[typeof s=="number"?s:s.id]=a}}toString(){let t=this.prop(gt.mounted);if(t&&!t.overlay)return t.tree.toString();let i="";for(let n of this.children){let r=n.toString();r&&(i&&(i+=","),i+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(i.length?"("+i+")":""):i}cursor(t=0){return new ts(this.topNode,t)}cursorAt(t,i=0,n=0){let r=Hr.get(this)||this.topNode,o=new ts(r);return o.moveTo(t,i),Hr.set(this,o._tree),o}get topNode(){return new Be(this,0,0,null)}resolve(t,i=0){let n=on(Hr.get(this)||this.topNode,t,i,!1);return Hr.set(this,n),n}resolveInner(t,i=0){let n=on(tc.get(this)||this.topNode,t,i,!0);return tc.set(this,n),n}iterate(t){let{enter:i,leave:n,from:r=0,to:o=this.length}=t;for(let s=this.cursor((t.mode||0)|Gt.IncludeAnonymous);;){let a=!1;if(s.from<=o&&s.to>=r&&(s.type.isAnonymous||i(s)!==!1)){if(s.firstChild())continue;a=!0}for(;a&&n&&!s.type.isAnonymous&&n(s),!s.nextSibling();){if(!s.parent())return;a=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let i in this.props)t.push([+i,this.props[i]]);return t}balance(t={}){return this.children.length<=8?this:il(Oe.none,this.children,this.positions,0,this.children.length,0,this.length,(i,n,r)=>new Rt(this.type,i,n,r,this.propValues),t.makeTree||((i,n,r)=>new Rt(Oe.none,i,n,r)))}static build(t){return dg(t)}}Rt.empty=new Rt(Oe.none,[],[],0);class tl{constructor(t,i){this.buffer=t,this.index=i}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new tl(this.buffer,this.index)}}class Mi{constructor(t,i,n){this.buffer=t,this.length=i,this.set=n}get type(){return Oe.none}toString(){let t=[];for(let i=0;i<this.buffer.length;)t.push(this.childString(i)),i=this.buffer[i+3];return t.join(",")}childString(t){let i=this.buffer[t],n=this.buffer[t+3],r=this.set.types[i],o=r.name;if(/\W/.test(o)&&!r.isError&&(o=JSON.stringify(o)),t+=4,n==t)return o;let s=[];for(;t<n;)s.push(this.childString(t)),t=this.buffer[t+3];return o+"("+s.join(",")+")"}findChild(t,i,n,r,o){let{buffer:s}=this,a=-1;for(let h=t;h!=i&&!(ec(o,r,s[h+1],s[h+2])&&(a=h,n>0));h=s[h+3]);return a}slice(t,i,n,r){let o=this.buffer,s=new Uint16Array(i-t);for(let a=t,h=0;a<i;)s[h++]=o[a++],s[h++]=o[a++]-n,s[h++]=o[a++]-n,s[h++]=o[a++]-t;return new Mi(s,r-n,this.set)}}function ec(e,t,i,n){switch(e){case-2:return i<t;case-1:return n>=t&&i<t;case 0:return i<t&&n>t;case 1:return i<=t&&n>t;case 2:return n>t;case 4:return!0}}function ic(e,t){let i=e.childBefore(t);for(;i;){let n=i.lastChild;if(!n||n.to!=i.to)break;n.type.isError&&n.from==n.to?(e=i,i=n.prevSibling):i=n}return e}function on(e,t,i,n){for(var r;e.from==e.to||(i<1?e.from>=t:e.from>t)||(i>-1?e.to<=t:e.to<t);){let s=!n&&e instanceof Be&&e.index<0?null:e.parent;if(!s)return e;e=s}let o=n?0:Gt.IgnoreOverlays;if(n)for(let s=e,a=s.parent;a;s=a,a=s.parent)s instanceof Be&&s.index<0&&((r=a.enter(t,i,o))===null||r===void 0?void 0:r.from)!=s.from&&(e=a);for(;;){let s=e.enter(t,i,o);if(!s)return e;e=s}}class Be{constructor(t,i,n,r){this._tree=t,this.from=i,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,i,n,r,o=0){for(let s=this;;){for(let{children:a,positions:h}=s._tree,c=i>0?a.length:-1;t!=c;t+=i){let d=a[t],f=h[t]+s.from;if(ec(r,n,f,f+d.length)){if(d instanceof Mi){if(o&Gt.ExcludeBuffers)continue;let m=d.findChild(0,d.buffer.length,i,n-f,r);if(m>-1)return new Ve(new pg(s,d,t,f),null,m)}else if(o&Gt.IncludeAnonymous||!d.type.isAnonymous||el(d)){let m;if(!(o&Gt.IgnoreMounts)&&d.props&&(m=d.prop(gt.mounted))&&!m.overlay)return new Be(m.tree,f,t,s);let v=new Be(d,f,t,s);return o&Gt.IncludeAnonymous||!v.type.isAnonymous?v:v.nextChild(i<0?d.children.length-1:0,i,n,r)}}}if(o&Gt.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?t=s.index+i:t=i<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}enter(t,i,n=0){let r;if(!(n&Gt.IgnoreOverlays)&&(r=this._tree.prop(gt.mounted))&&r.overlay){let o=t-this.from;for(let{from:s,to:a}of r.overlay)if((i>0?s<=o:s<o)&&(i<0?a>=o:a>o))return new Be(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,i,n)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(t=0){return new ts(this,t)}get tree(){return this._tree}toTree(){return this._tree}resolve(t,i=0){return on(this,t,i,!1)}resolveInner(t,i=0){return on(this,t,i,!0)}enterUnfinishedNodesBefore(t){return ic(this,t)}getChild(t,i=null,n=null){let r=Jr(this,t,i,n);return r.length?r[0]:null}getChildren(t,i=null,n=null){return Jr(this,t,i,n)}toString(){return this._tree.toString()}get node(){return this}matchContext(t){return Kr(this,t)}}function Jr(e,t,i,n){let r=e.cursor(),o=[];if(!r.firstChild())return o;if(i!=null){for(;!r.type.is(i);)if(!r.nextSibling())return o}for(;;){if(n!=null&&r.type.is(n))return o;if(r.type.is(t)&&o.push(r.node),!r.nextSibling())return n==null?o:[]}}function Kr(e,t,i=t.length-1){for(let n=e.parent;i>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(t[i]&&t[i]!=n.name)return!1;i--}}return!0}class pg{constructor(t,i,n,r){this.parent=t,this.buffer=i,this.index=n,this.start=r}}class Ve{constructor(t,i,n){this.context=t,this._parent=i,this.index=n,this.type=t.buffer.set.types[t.buffer.buffer[n]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(t,i,n){let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],t,i-this.context.start,n);return o<0?null:new Ve(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}enter(t,i,n=0){if(n&Gt.ExcludeBuffers)return null;let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],i>0?1:-1,t-this.context.start,i);return o<0?null:new Ve(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,i=t.buffer[this.index+3];return i<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new Ve(this.context,this._parent,i):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,i=this._parent?this._parent.index+4:0;return this.index==i?this.externalSibling(-1):new Ve(this.context,this._parent,t.findChild(i,this.index,-1,0,4))}cursor(t=0){return new ts(this,t)}get tree(){return null}toTree(){let t=[],i=[],{buffer:n}=this.context,r=this.index+4,o=n.buffer[this.index+3];if(o>r){let s=n.buffer[this.index+1],a=n.buffer[this.index+2];t.push(n.slice(r,o,s,a)),i.push(0)}return new Rt(this.type,t,i,this.to-this.from)}resolve(t,i=0){return on(this,t,i,!1)}resolveInner(t,i=0){return on(this,t,i,!0)}enterUnfinishedNodesBefore(t){return ic(this,t)}toString(){return this.context.buffer.childString(this.index)}getChild(t,i=null,n=null){let r=Jr(this,t,i,n);return r.length?r[0]:null}getChildren(t,i=null,n=null){return Jr(this,t,i,n)}get node(){return this}matchContext(t){return Kr(this,t)}}class ts{constructor(t,i=0){if(this.mode=i,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof Be)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let n=t._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=t,this.yieldBuf(t.index)}}get name(){return this.type.name}yieldNode(t){return t?(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0):!1}yieldBuf(t,i){this.index=t;let{start:n,buffer:r}=this.buffer;return this.type=i||r.set.types[r.buffer[t]],this.from=n+r.buffer[t+1],this.to=n+r.buffer[t+2],!0}yield(t){return t?t instanceof Be?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,i,n){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,i,n,this.mode));let{buffer:r}=this.buffer,o=r.findChild(this.index+4,r.buffer[this.index+3],t,i-this.buffer.start,n);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,i,n=this.mode){return this.buffer?n&Gt.ExcludeBuffers?!1:this.enterChild(1,t,i):this.yield(this._tree.enter(t,i,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Gt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&Gt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode)):!1;let{buffer:i}=this.buffer,n=this.stack.length-1;if(t<0){let r=n<0?0:this.stack[n]+4;if(this.index!=r)return this.yieldBuf(i.findChild(r,this.index,-1,0,4))}else{let r=i.buffer[this.index+3];if(r<(n<0?i.buffer.length:i.buffer[this.stack[n]+3]))return this.yieldBuf(r)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let i,n,{buffer:r}=this;if(r){if(t>0){if(this.index<r.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(r.buffer.buffer[o+3]<this.index)return!1;({index:i,parent:n}=r)}else({index:i,_parent:n}=this._tree);for(;n;{index:i,_parent:n}=n)if(i>-1)for(let o=i+t,s=t<0?-1:n._tree.children.length;o!=s;o+=t){let a=n._tree.children[o];if(this.mode&Gt.IncludeAnonymous||a instanceof Mi||!a.type.isAnonymous||el(a))return!1}return!0}move(t,i){if(i&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,i=0){for(;(this.from==this.to||(i<1?this.from>=t:this.from>t)||(i>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,i););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,i=null,n=0;if(t&&t.context==this.buffer){t:for(let r=this.index,o=this.stack.length;o>=0;){for(let s=t;s;s=s._parent)if(s.index==r){if(r==this.index)return s;i=s,n=o+1;break t}r=this.stack[--o]}}for(let r=n;r<this.stack.length;r++)i=new Ve(this.buffer,i,this.stack[r]);return this.bufferNode=new Ve(this.buffer,i,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,i){for(let n=0;;){let r=!1;if(this.type.isAnonymous||t(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;r&&i&&i(this),r=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,r=!0}}}matchContext(t){if(!this.buffer)return Kr(this.node,t);let{buffer:i}=this.buffer,{types:n}=i.set;for(let r=t.length-1,o=this.stack.length-1;r>=0;o--){if(o<0)return Kr(this.node,t,r);let s=n[i.buffer[this.stack[o]]];if(!s.isAnonymous){if(t[r]&&t[r]!=s.name)return!1;r--}}return!0}}function el(e){return e.children.some(t=>t instanceof Mi||!t.type.isAnonymous||el(t))}function dg(e){var t;let{buffer:i,nodeSet:n,maxBufferLength:r=Ku,reused:o=[],minRepeatType:s=n.types.length}=e,a=Array.isArray(i)?new tl(i,i.length):i,h=n.types,c=0,d=0;function f(T,_,I,F,G){let{id:z,start:U,end:Y,size:Q}=a,W=d;for(;Q<0;)if(a.next(),Q==-1){let yt=o[z];I.push(yt),F.push(U-T);return}else if(Q==-3){c=z;return}else if(Q==-4){d=z;return}else throw new RangeError(`Unrecognized record size: ${Q}`);let V=h[z],et,ct,ft=U-T;if(Y-U<=r&&(ct=g(a.pos-_,G))){let yt=new Uint16Array(ct.size-ct.skip),Pt=a.pos-ct.size,xt=yt.length;for(;a.pos>Pt;)xt=y(ct.start,yt,xt);et=new Mi(yt,Y-ct.start,n),ft=ct.start-T}else{let yt=a.pos-Q;a.next();let Pt=[],xt=[],_t=z>=s?z:-1,kt=0,Xt=Y;for(;a.pos>yt;)_t>=0&&a.id==_t&&a.size>=0?(a.end<=Xt-r&&(v(Pt,xt,U,kt,a.end,Xt,_t,W),kt=Pt.length,Xt=a.end),a.next()):f(U,yt,Pt,xt,_t);if(_t>=0&&kt>0&&kt<Pt.length&&v(Pt,xt,U,kt,U,Xt,_t,W),Pt.reverse(),xt.reverse(),_t>-1&&kt>0){let he=m(V);et=il(V,Pt,xt,0,Pt.length,0,Y-U,he,he)}else et=S(V,Pt,xt,Y-U,W-Y)}I.push(et),F.push(ft)}function m(T){return(_,I,F)=>{let G=0,z=_.length-1,U,Y;if(z>=0&&(U=_[z])instanceof Rt){if(!z&&U.type==T&&U.length==F)return U;(Y=U.prop(gt.lookAhead))&&(G=I[z]+U.length+Y)}return S(T,_,I,F,G)}}function v(T,_,I,F,G,z,U,Y){let Q=[],W=[];for(;T.length>F;)Q.push(T.pop()),W.push(_.pop()+I-G);T.push(S(n.types[U],Q,W,z-G,Y-z)),_.push(G-I)}function S(T,_,I,F,G=0,z){if(c){let U=[gt.contextHash,c];z=z?[U].concat(z):[U]}if(G>25){let U=[gt.lookAhead,G];z=z?[U].concat(z):[U]}return new Rt(T,_,I,F,z)}function g(T,_){let I=a.fork(),F=0,G=0,z=0,U=I.end-r,Y={size:0,start:0,skip:0};t:for(let Q=I.pos-T;I.pos>Q;){let W=I.size;if(I.id==_&&W>=0){Y.size=F,Y.start=G,Y.skip=z,z+=4,F+=4,I.next();continue}let V=I.pos-W;if(W<0||V<Q||I.start<U)break;let et=I.id>=s?4:0,ct=I.start;for(I.next();I.pos>V;){if(I.size<0)if(I.size==-3)et+=4;else break t;else I.id>=s&&(et+=4);I.next()}G=ct,F+=W,z+=et}return(_<0||F==T)&&(Y.size=F,Y.start=G,Y.skip=z),Y.size>4?Y:void 0}function y(T,_,I){let{id:F,start:G,end:z,size:U}=a;if(a.next(),U>=0&&F<s){let Y=I;if(U>4){let Q=a.pos-(U-4);for(;a.pos>Q;)I=y(T,_,I)}_[--I]=Y,_[--I]=z-T,_[--I]=G-T,_[--I]=F}else U==-3?c=F:U==-4&&(d=F);return I}let P=[],w=[];for(;a.pos>0;)f(e.start||0,e.bufferStart||0,P,w,-1);let D=(t=e.length)!==null&&t!==void 0?t:P.length?w[0]+P[0].length:0;return new Rt(h[e.topID],P.reverse(),w.reverse(),D)}const nc=new WeakMap;function es(e,t){if(!e.isAnonymous||t instanceof Mi||t.type!=e)return 1;let i=nc.get(t);if(i==null){i=1;for(let n of t.children){if(n.type!=e||!(n instanceof Rt)){i=1;break}i+=es(e,n)}nc.set(t,i)}return i}function il(e,t,i,n,r,o,s,a,h){let c=0;for(let S=n;S<r;S++)c+=es(e,t[S]);let d=Math.ceil(c*1.5/8),f=[],m=[];function v(S,g,y,P,w){for(let D=y;D<P;){let T=D,_=g[D],I=es(e,S[D]);for(D++;D<P;D++){let F=es(e,S[D]);if(I+F>=d)break;I+=F}if(D==T+1){if(I>d){let F=S[T];v(F.children,F.positions,0,F.children.length,g[T]+w);continue}f.push(S[T])}else{let F=g[D-1]+S[D-1].length-_;f.push(il(e,S,g,T,D,_,F,null,h))}m.push(_+w-o)}}return v(t,i,n,r,0),(a||h)(f,m,s)}class fg{constructor(){this.map=new WeakMap}setBuffer(t,i,n){let r=this.map.get(t);r||this.map.set(t,r=new Map),r.set(i,n)}getBuffer(t,i){let n=this.map.get(t);return n&&n.get(i)}set(t,i){t instanceof Ve?this.setBuffer(t.context.buffer,t.index,i):t instanceof Be&&this.map.set(t.tree,i)}get(t){return t instanceof Ve?this.getBuffer(t.context.buffer,t.index):t instanceof Be?this.map.get(t.tree):void 0}cursorSet(t,i){t.buffer?this.setBuffer(t.buffer.buffer,t.index,i):this.map.set(t.tree,i)}cursorGet(t){return t.buffer?this.getBuffer(t.buffer.buffer,t.index):this.map.get(t.tree)}}class Bi{constructor(t,i,n,r,o=!1,s=!1){this.from=t,this.to=i,this.tree=n,this.offset=r,this.open=(o?1:0)|(s?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(t,i=[],n=!1){let r=[new Bi(0,t.length,t,0,!1,n)];for(let o of i)o.to>t.length&&r.push(o);return r}static applyChanges(t,i,n=128){if(!i.length)return t;let r=[],o=1,s=t.length?t[0]:null;for(let a=0,h=0,c=0;;a++){let d=a<i.length?i[a]:null,f=d?d.fromA:1e9;if(f-h>=n)for(;s&&s.from<f;){let m=s;if(h>=m.from||f<=m.to||c){let v=Math.max(m.from,h)-c,S=Math.min(m.to,f)-c;m=v>=S?null:new Bi(v,S,m.tree,m.offset+c,a>0,!!d)}if(m&&r.push(m),s.to>f)break;s=o<t.length?t[o++]:null}if(!d)break;h=d.toA,c=d.toA-d.toB}return r}}class rc{startParse(t,i,n){return typeof t=="string"&&(t=new mg(t)),n=n?n.length?n.map(r=>new Jo(r.from,r.to)):[new Jo(0,0)]:[new Jo(0,t.length)],this.createParse(t,i||[],n)}parse(t,i,n){let r=this.startParse(t,i,n);for(;;){let o=r.advance();if(o)return o}}}class mg{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,i){return this.string.slice(t,i)}}new gt({perNode:!0});let gg=0;class He{constructor(t,i,n){this.set=t,this.base=i,this.modified=n,this.id=gg++}static define(t){if(t!=null&&t.base)throw new Error("Can not derive from a modified tag");let i=new He([],null,[]);if(i.set.push(i),t)for(let n of t.set)i.set.push(n);return i}static defineModifier(){let t=new is;return i=>i.modified.indexOf(t)>-1?i:is.get(i.base||i,i.modified.concat(t).sort((n,r)=>n.id-r.id))}}let Og=0;class is{constructor(){this.instances=[],this.id=Og++}static get(t,i){if(!i.length)return t;let n=i[0].instances.find(a=>a.base==t&&yg(i,a.modified));if(n)return n;let r=[],o=new He(r,t,i);for(let a of i)a.instances.push(o);let s=sc(i);for(let a of t.set)for(let h of s)r.push(is.get(a,h));return o}}function yg(e,t){return e.length==t.length&&e.every((i,n)=>i==t[n])}function sc(e){let t=[e];for(let i=0;i<e.length;i++)for(let n of sc(e.slice(0,i).concat(e.slice(i+1))))t.push(n);return t}function oc(e){let t=Object.create(null);for(let i in e){let n=e[i];Array.isArray(n)||(n=[n]);for(let r of i.split(" "))if(r){let o=[],s=2,a=r;for(let f=0;;){if(a=="..."&&f>0&&f+3==r.length){s=1;break}let m=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!m)throw new RangeError("Invalid path: "+r);if(o.push(m[0]=="*"?"":m[0][0]=='"'?JSON.parse(m[0]):m[0]),f+=m[0].length,f==r.length)break;let v=r[f++];if(f==r.length&&v=="!"){s=0;break}if(v!="/")throw new RangeError("Invalid path: "+r);a=r.slice(f)}let h=o.length-1,c=o[h];if(!c)throw new RangeError("Invalid path: "+r);let d=new xg(n,s,h>0?o.slice(0,h):null);t[c]=d.sort(t[c])}}return lc.add(t)}const lc=new gt;class xg{constructor(t,i,n,r){this.tags=t,this.mode=i,this.context=n,this.next=r}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}function ac(e,t){let i=Object.create(null);for(let o of e)if(!Array.isArray(o.tag))i[o.tag.id]=o.class;else for(let s of o.tag)i[s.id]=o.class;let{scope:n,all:r=null}=t||{};return{style:o=>{let s=r;for(let a of o)for(let h of a.set){let c=i[h.id];if(c){s=s?s+" "+c:c;break}}return s},scope:n}}function vg(e,t){let i=null;for(let n of e){let r=n.style(t);r&&(i=i?i+" "+r:r)}return i}function Pg(e,t,i,n=0,r=e.length){let o=new Cg(n,Array.isArray(t)?t:[t],i);o.highlightRange(e.cursor(),n,r,"",o.highlighters),o.flush(r)}class Cg{constructor(t,i,n){this.at=t,this.highlighters=i,this.span=n,this.class=""}startSpan(t,i){i!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=i)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(t,i,n,r,o){let{type:s,from:a,to:h}=t;if(a>=n||h<=i)return;s.isTop&&(o=this.highlighters.filter(v=>!v.scope||v.scope(s)));let c=r,d=s.prop(lc),f=!1;for(;d;){if(!d.context||t.matchContext(d.context)){let v=vg(o,d.tags);v&&(c&&(c+=" "),c+=v,d.mode==1?r+=(r?" ":"")+v:d.mode==0&&(f=!0));break}d=d.next}if(this.startSpan(t.from,c),f)return;let m=t.tree&&t.tree.prop(gt.mounted);if(m&&m.overlay){let v=t.node.enter(m.overlay[0].from+a,1),S=this.highlighters.filter(y=>!y.scope||y.scope(m.tree.type)),g=t.firstChild();for(let y=0,P=a;;y++){let w=y<m.overlay.length?m.overlay[y]:null,D=w?w.from+a:h,T=Math.max(i,P),_=Math.min(n,D);if(T<_&&g)for(;t.from<_&&(this.highlightRange(t,T,_,r,o),this.startSpan(Math.min(n,t.to),c),!(t.to>=D||!t.nextSibling())););if(!w||D>n)break;P=w.to+a,P>i&&(this.highlightRange(v.cursor(),Math.max(i,w.from+a),Math.min(n,P),r,S),this.startSpan(P,c))}g&&t.parent()}else if(t.firstChild()){do if(!(t.to<=i)){if(t.from>=n)break;this.highlightRange(t,i,n,r,o),this.startSpan(Math.min(n,t.to),c)}while(t.nextSibling());t.parent()}}}const H=He.define,ns=H(),Ci=H(),hc=H(Ci),uc=H(Ci),Si=H(),rs=H(Si),nl=H(Si),Je=H(),Ri=H(Je),Ke=H(),ti=H(),rl=H(),Jn=H(rl),ss=H(),N={comment:ns,lineComment:H(ns),blockComment:H(ns),docComment:H(ns),name:Ci,variableName:H(Ci),typeName:hc,tagName:H(hc),propertyName:uc,attributeName:H(uc),className:H(Ci),labelName:H(Ci),namespace:H(Ci),macroName:H(Ci),literal:Si,string:rs,docString:H(rs),character:H(rs),attributeValue:H(rs),number:nl,integer:H(nl),float:H(nl),bool:H(Si),regexp:H(Si),escape:H(Si),color:H(Si),url:H(Si),keyword:Ke,self:H(Ke),null:H(Ke),atom:H(Ke),unit:H(Ke),modifier:H(Ke),operatorKeyword:H(Ke),controlKeyword:H(Ke),definitionKeyword:H(Ke),moduleKeyword:H(Ke),operator:ti,derefOperator:H(ti),arithmeticOperator:H(ti),logicOperator:H(ti),bitwiseOperator:H(ti),compareOperator:H(ti),updateOperator:H(ti),definitionOperator:H(ti),typeOperator:H(ti),controlOperator:H(ti),punctuation:rl,separator:H(rl),bracket:Jn,angleBracket:H(Jn),squareBracket:H(Jn),paren:H(Jn),brace:H(Jn),content:Je,heading:Ri,heading1:H(Ri),heading2:H(Ri),heading3:H(Ri),heading4:H(Ri),heading5:H(Ri),heading6:H(Ri),contentSeparator:H(Je),list:H(Je),quote:H(Je),emphasis:H(Je),strong:H(Je),link:H(Je),monospace:H(Je),strikethrough:H(Je),inserted:H(),deleted:H(),changed:H(),invalid:H(),meta:ss,documentMeta:H(ss),annotation:H(ss),processingInstruction:H(ss),definition:He.defineModifier(),constant:He.defineModifier(),function:He.defineModifier(),standard:He.defineModifier(),local:He.defineModifier(),special:He.defineModifier()};ac([{tag:N.link,class:"tok-link"},{tag:N.heading,class:"tok-heading"},{tag:N.emphasis,class:"tok-emphasis"},{tag:N.strong,class:"tok-strong"},{tag:N.keyword,class:"tok-keyword"},{tag:N.atom,class:"tok-atom"},{tag:N.bool,class:"tok-bool"},{tag:N.url,class:"tok-url"},{tag:N.labelName,class:"tok-labelName"},{tag:N.inserted,class:"tok-inserted"},{tag:N.deleted,class:"tok-deleted"},{tag:N.literal,class:"tok-literal"},{tag:N.string,class:"tok-string"},{tag:N.number,class:"tok-number"},{tag:[N.regexp,N.escape,N.special(N.string)],class:"tok-string2"},{tag:N.variableName,class:"tok-variableName"},{tag:N.local(N.variableName),class:"tok-variableName tok-local"},{tag:N.definition(N.variableName),class:"tok-variableName tok-definition"},{tag:N.special(N.variableName),class:"tok-variableName2"},{tag:N.definition(N.propertyName),class:"tok-propertyName tok-definition"},{tag:N.typeName,class:"tok-typeName"},{tag:N.namespace,class:"tok-namespace"},{tag:N.className,class:"tok-className"},{tag:N.macroName,class:"tok-macroName"},{tag:N.propertyName,class:"tok-propertyName"},{tag:N.operator,class:"tok-operator"},{tag:N.comment,class:"tok-comment"},{tag:N.meta,class:"tok-meta"},{tag:N.invalid,class:"tok-invalid"},{tag:N.punctuation,class:"tok-punctuation"}]);var sl;const Kn=new gt;function Sg(e){return K.define({combine:e?t=>t.concat(e):void 0})}class _e{constructor(t,i,n=[]){this.data=t,vt.prototype.hasOwnProperty("tree")||Object.defineProperty(vt.prototype,"tree",{get(){return Nt(this)}}),this.parser=i,this.extension=[wi.of(this),vt.languageData.of((r,o,s)=>r.facet(cc(r,o,s)))].concat(n)}isActiveAt(t,i,n=-1){return cc(t,i,n)==this.data}findRegions(t){let i=t.facet(wi);if((i==null?void 0:i.data)==this.data)return[{from:0,to:t.doc.length}];if(!i||!i.allowsNesting)return[];let n=[],r=(o,s)=>{if(o.prop(Kn)==this.data){n.push({from:s,to:s+o.length});return}let a=o.prop(gt.mounted);if(a){if(a.tree.prop(Kn)==this.data){if(a.overlay)for(let h of a.overlay)n.push({from:h.from+s,to:h.to+s});else n.push({from:s,to:s+o.length});return}else if(a.overlay){let h=n.length;if(r(a.tree,a.overlay[0].from+s),n.length>h)return}}for(let h=0;h<o.children.length;h++){let c=o.children[h];c instanceof Rt&&r(c,o.positions[h]+s)}};return r(Nt(t),0),n}get allowsNesting(){return!0}}_e.setState=ht.define();function cc(e,t,i){let n=e.facet(wi);if(!n)return null;let r=n.data;if(n.allowsNesting)for(let o=Nt(e).topNode;o;o=o.enter(t,i,Gt.ExcludeBuffers))r=o.type.prop(Kn)||r;return r}class os extends _e{constructor(t,i){super(t,i),this.parser=i}static define(t){let i=Sg(t.languageData);return new os(i,t.parser.configure({props:[Kn.add(n=>n.isTop?i:void 0)]}))}configure(t){return new os(this.data,this.parser.configure(t))}get allowsNesting(){return this.parser.hasWrappers()}}function Nt(e){let t=e.field(_e.state,!1);return t?t.tree:Rt.empty}function pc(e,t,i=50){var n;let r=(n=e.field(_e.state,!1))===null||n===void 0?void 0:n.context;return r&&(r.isDone(t)||r.work(i,t))?r.tree:null}class wg{constructor(t,i=t.length){this.doc=t,this.length=i,this.cursorPos=0,this.string="",this.cursor=t.iter()}syncTo(t){return this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length}chunk(t){return this.syncTo(t),this.string}get lineChunks(){return!0}read(t,i){let n=this.cursorPos-this.string.length;return t<n||i>=this.cursorPos?this.doc.sliceString(t,i):this.string.slice(t-n,i-n)}}let tr=null;class ls{constructor(t,i,n=[],r,o,s,a,h){this.parser=t,this.state=i,this.fragments=n,this.tree=r,this.treeLen=o,this.viewport=s,this.skipped=a,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(t,i,n){return new ls(t,i,[],Rt.empty,0,n,[],null)}startParse(){return this.parser.startParse(new wg(this.state.doc),this.fragments)}work(t,i){return i!=null&&i>=this.state.doc.length&&(i=void 0),this.tree!=Rt.empty&&this.isDone(i!=null?i:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof t=="number"){let r=Date.now()+t;t=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),i!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>i)&&i<this.state.doc.length&&this.parse.stopAt(i);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(Bi.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(i!=null?i:this.state.doc.length))this.parse=this.startParse();else return!0;if(t())return!1}})}takeTree(){let t,i;this.parse&&(t=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext(()=>{for(;!(i=this.parse.advance()););}),this.treeLen=t,this.tree=i,this.fragments=this.withoutTempSkipped(Bi.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(t){let i=tr;tr=this;try{return t()}finally{tr=i}}withoutTempSkipped(t){for(let i;i=this.tempSkipped.pop();)t=dc(t,i.from,i.to);return t}changes(t,i){let{fragments:n,tree:r,treeLen:o,viewport:s,skipped:a}=this;if(this.takeTree(),!t.empty){let h=[];if(t.iterChangedRanges((c,d,f,m)=>h.push({fromA:c,toA:d,fromB:f,toB:m})),n=Bi.applyChanges(n,h),r=Rt.empty,o=0,s={from:t.mapPos(s.from,-1),to:t.mapPos(s.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let d=t.mapPos(c.from,1),f=t.mapPos(c.to,-1);d<f&&a.push({from:d,to:f})}}}return new ls(this.parser,i,n,r,o,s,a,this.scheduleOn)}updateViewport(t){if(this.viewport.from==t.from&&this.viewport.to==t.to)return!1;this.viewport=t;let i=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:r,to:o}=this.skipped[n];r<t.to&&o>t.from&&(this.fragments=dc(this.fragments,r,o),this.skipped.splice(n--,1))}return this.skipped.length>=i?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(t,i){this.skipped.push({from:t,to:i})}static getSkippingParser(t){return new class extends rc{createParse(i,n,r){let o=r[0].from,s=r[r.length-1].to;return{parsedPos:o,advance(){let a=tr;if(a){for(let h of r)a.tempSkipped.push(h);t&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,t]):t)}return this.parsedPos=s,new Rt(Oe.none,[],[],s-o)},stoppedAt:null,stopAt(){}}}}}isDone(t){t=Math.min(t,this.state.doc.length);let i=this.fragments;return this.treeLen>=t&&i.length&&i[0].from==0&&i[0].to>=t}static get(){return tr}}function dc(e,t,i){return Bi.applyChanges(e,[{fromA:t,toA:i,fromB:t,toB:i}])}class ln{constructor(t){this.context=t,this.tree=t.tree}apply(t){if(!t.docChanged&&this.tree==this.context.tree)return this;let i=this.context.changes(t.changes,t.state),n=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),i.viewport.to);return i.work(20,n)||i.takeTree(),new ln(i)}static init(t){let i=Math.min(3e3,t.doc.length),n=ls.create(t.facet(wi).parser,t,{from:0,to:i});return n.work(20,i)||n.takeTree(),new ln(n)}}_e.state=jt.define({create:ln.init,update(e,t){for(let i of t.effects)if(i.is(_e.setState))return i.value;return t.startState.facet(wi)!=t.state.facet(wi)?ln.init(t.state):e.apply(t)}});let fc=e=>{let t=setTimeout(()=>e(),500);return()=>clearTimeout(t)};typeof requestIdleCallback<"u"&&(fc=e=>{let t=-1,i=setTimeout(()=>{t=requestIdleCallback(e,{timeout:500-100})},100);return()=>t<0?clearTimeout(i):cancelIdleCallback(t)});const ol=typeof navigator<"u"&&((sl=navigator.scheduling)===null||sl===void 0?void 0:sl.isInputPending)?()=>navigator.scheduling.isInputPending():null,bg=Bt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(_e.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(_e.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=fc(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:n}}=this.view,r=i.field(_e.state);if(r.tree==r.context.tree&&r.context.isDone(n+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!ol?Math.max(25,e.timeRemaining()-5):1e9),s=r.context.treeLen<n&&i.doc.length>n+1e3,a=r.context.work(()=>ol&&ol()||Date.now()>o,n+(s?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:_e.setState.of(new ln(r.context))})),this.chunkBudget>0&&!(a&&!s)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>be(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),wi=K.define({combine(e){return e.length?e[0]:null},enables:[_e.state,bg]});class Eg{constructor(t,i=[]){this.language=t,this.support=i,this.extension=[t,i]}}const Dg=K.define(),er=K.define({combine:e=>{if(!e.length)return"  ";if(!/^(?: +|\t+)$/.test(e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return e[0]}});function as(e){let t=e.facet(er);return t.charCodeAt(0)==9?e.tabSize*t.length:t.length}function ir(e,t){let i="",n=e.tabSize;if(e.facet(er).charCodeAt(0)==9)for(;t>=n;)i+="	",t-=n;for(let r=0;r<t;r++)i+=" ";return i}function ll(e,t){e instanceof vt&&(e=new hs(e));for(let n of e.state.facet(Dg)){let r=n(e,t);if(r!=null)return r}let i=Nt(e.state);return i?Tg(e,i,t):null}class hs{constructor(t,i={}){this.state=t,this.options=i,this.unit=as(t)}lineAt(t,i=1){let n=this.state.doc.lineAt(t),{simulateBreak:r,simulateDoubleBreak:o}=this.options;return r!=null&&r>=n.from&&r<=n.to?o&&r==t?{text:"",from:t}:(i<0?r<t:r<=t)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n}textAfterPos(t,i=1){if(this.options.simulateDoubleBreak&&t==this.options.simulateBreak)return"";let{text:n,from:r}=this.lineAt(t,i);return n.slice(t-r,Math.min(n.length,t+100-r))}column(t,i=1){let{text:n,from:r}=this.lineAt(t,i),o=this.countColumn(n,t-r),s=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return s>-1&&(o+=s-this.countColumn(n,n.search(/\S|$/))),o}countColumn(t,i=t.length){return $n(t,this.state.tabSize,i)}lineIndent(t,i=1){let{text:n,from:r}=this.lineAt(t,i),o=this.options.overrideIndentation;if(o){let s=o(r);if(s>-1)return s}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const mc=new gt;function Tg(e,t,i){return gc(t.resolveInner(i).enterUnfinishedNodesBefore(i),i,e)}function Ag(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}function kg(e){let t=e.type.prop(mc);if(t)return t;let i=e.firstChild,n;if(i&&(n=i.type.prop(gt.closedBy))){let r=e.lastChild,o=r&&n.indexOf(r.name)>-1;return s=>Oc(s,!0,1,void 0,o&&!Ag(s)?r.from:void 0)}return e.parent==null?_g:null}function gc(e,t,i){for(;e;e=e.parent){let n=kg(e);if(n)return n(al.create(i,t,e))}return null}function _g(){return 0}class al extends hs{constructor(t,i,n){super(t.state,t.options),this.base=t,this.pos=i,this.node=n}static create(t,i,n){return new al(t,i,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let t=this.state.doc.lineAt(this.node.from);for(;;){let i=this.node.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(Ig(i,this.node))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){let t=this.node.parent;return t?gc(t,this.pos,this.base):0}}function Ig(e,t){for(let i=t;i;i=i.parent)if(e==i)return!0;return!1}function Lg(e){let t=e.node,i=t.childAfter(t.from),n=t.lastChild;if(!i)return null;let r=e.options.simulateBreak,o=e.state.doc.lineAt(i.from),s=r==null||r<=o.from?o.to:Math.min(o.to,r);for(let a=i.to;;){let h=t.childAfter(a);if(!h||h==n)return null;if(!h.type.isSkipped)return h.from<s?i:null;a=h.to}}function Qg({closing:e,align:t=!0,units:i=1}){return n=>Oc(n,t,i,e)}function Oc(e,t,i,n,r){let o=e.textAfter,s=o.match(/^\s*/)[0].length,a=n&&o.slice(s,s+n.length)==n||r==e.pos+s,h=t?Lg(e):null;return h?a?e.column(h.from):e.column(h.to):e.baseIndent+(a?0:e.unit*i)}const Xg=e=>e.baseIndent;function hl({except:e,units:t=1}={}){return i=>{let n=e&&e.test(i.textAfter);return i.baseIndent+(n?0:t*i.unit)}}const $g=200;function Ng(){return vt.transactionFilter.of(e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;let i=e.newDoc,{head:n}=e.newSelection.main,r=i.lineAt(n);if(n>r.from+$g)return e;let o=i.sliceString(r.from,n);if(!t.some(c=>c.test(o)))return e;let{state:s}=e,a=-1,h=[];for(let{head:c}of s.selection.ranges){let d=s.doc.lineAt(c);if(d.from==a)continue;a=d.from;let f=ll(s,d.from);if(f==null)continue;let m=/^\s*/.exec(d.text)[0],v=ir(s,f);m!=v&&h.push({from:d.from,to:d.from+m.length,insert:v})}return h.length?[e,{changes:h,sequential:!0}]:e})}const Fg=K.define(),yc=new gt;function Mg(e){let t=e.firstChild,i=e.lastChild;return t&&t.to<i.from?{from:t.to,to:i.type.isError?e.to:i.from}:null}function Bg(e,t,i){let n=Nt(e);if(n.length<i)return null;let r=n.resolveInner(i),o=null;for(let s=r;s;s=s.parent){if(s.to<=i||s.from>i)continue;if(o&&s.from<t)break;let a=s.type.prop(yc);if(a&&(s.to<n.length-50||n.length==e.doc.length||!Rg(s))){let h=a(s,e);h&&h.from<=i&&h.from>=t&&h.to>i&&(o=h)}}return o}function Rg(e){let t=e.lastChild;return t&&t.to==e.to&&t.type.isError}function us(e,t,i){for(let n of e.facet(Fg)){let r=n(e,t,i);if(r)return r}return Bg(e,t,i)}function xc(e,t){let i=t.mapPos(e.from,1),n=t.mapPos(e.to,-1);return i>=n?void 0:{from:i,to:n}}const cs=ht.define({map:xc}),nr=ht.define({map:xc});function vc(e){let t=[];for(let{head:i}of e.state.selection.ranges)t.some(n=>n.from<=i&&n.to>=i)||t.push(e.lineBlockAt(i));return t}const Yi=jt.define({create(){return nt.none},update(e,t){e=e.map(t.changes);for(let i of t.effects)i.is(cs)&&!Yg(e,i.value.from,i.value.to)?e=e.update({add:[bc.range(i.value.from,i.value.to)]}):i.is(nr)&&(e=e.update({filter:(n,r)=>i.value.from!=n||i.value.to!=r,filterFrom:i.value.from,filterTo:i.value.to}));if(t.selection){let i=!1,{head:n}=t.selection.main;e.between(n,n,(r,o)=>{r<n&&o>n&&(i=!0)}),i&&(e=e.update({filterFrom:n,filterTo:n,filter:(r,o)=>o<=n||r>=n}))}return e},provide:e=>it.decorations.from(e),toJSON(e,t){let i=[];return e.between(0,t.doc.length,(n,r)=>{i.push(n,r)}),i},fromJSON(e){if(!Array.isArray(e)||e.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let i=0;i<e.length;){let n=e[i++],r=e[i++];if(typeof n!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");t.push(bc.range(n,r))}return nt.set(t,!0)}});function ps(e,t,i){var n;let r=null;return(n=e.field(Yi,!1))===null||n===void 0||n.between(t,i,(o,s)=>{(!r||r.from>o)&&(r={from:o,to:s})}),r}function Yg(e,t,i){let n=!1;return e.between(t,t,(r,o)=>{r==t&&o==i&&(n=!0)}),n}function Pc(e,t){return e.field(Yi,!1)?t:t.concat(ht.appendConfig.of(wc()))}const Wg=e=>{for(let t of vc(e)){let i=us(e.state,t.from,t.to);if(i)return e.dispatch({effects:Pc(e.state,[cs.of(i),Cc(e,i)])}),!0}return!1},jg=e=>{if(!e.state.field(Yi,!1))return!1;let t=[];for(let i of vc(e)){let n=ps(e.state,i.from,i.to);n&&t.push(nr.of(n),Cc(e,n,!1))}return t.length&&e.dispatch({effects:t}),t.length>0};function Cc(e,t,i=!0){let n=e.state.doc.lineAt(t.from).number,r=e.state.doc.lineAt(t.to).number;return it.announce.of(`${e.state.phrase(i?"Folded lines":"Unfolded lines")} ${n} ${e.state.phrase("to")} ${r}.`)}const Zg=e=>{let{state:t}=e,i=[];for(let n=0;n<t.doc.length;){let r=e.lineBlockAt(n),o=us(t,r.from,r.to);o&&i.push(cs.of(o)),n=(o?e.lineBlockAt(o.to):r).to+1}return i.length&&e.dispatch({effects:Pc(e.state,i)}),!!i.length},zg=e=>{let t=e.state.field(Yi,!1);if(!t||!t.size)return!1;let i=[];return t.between(0,e.state.doc.length,(n,r)=>{i.push(nr.of({from:n,to:r}))}),e.dispatch({effects:i}),!0},qg=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Wg},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:jg},{key:"Ctrl-Alt-[",run:Zg},{key:"Ctrl-Alt-]",run:zg}],Ug={placeholderDOM:null,placeholderText:"\u2026"},Sc=K.define({combine(e){return qe(e,Ug)}});function wc(e){let t=[Yi,Hg];return e&&t.push(Sc.of(e)),t}const bc=nt.replace({widget:new class extends li{toDOM(e){let{state:t}=e,i=t.facet(Sc),n=o=>{let s=e.lineBlockAt(e.posAtDOM(o.target)),a=ps(e.state,s.from,s.to);a&&e.dispatch({effects:nr.of(a)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(e,n);let r=document.createElement("span");return r.textContent=i.placeholderText,r.setAttribute("aria-label",t.phrase("folded code")),r.title=t.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=n,r}}}),Gg={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class ul extends hi{constructor(t,i){super(),this.config=t,this.open=i}eq(t){return this.config==t.config&&this.open==t.open}toDOM(t){if(this.config.markerDOM)return this.config.markerDOM(this.open);let i=document.createElement("span");return i.textContent=this.open?this.config.openText:this.config.closedText,i.title=t.state.phrase(this.open?"Fold line":"Unfold line"),i}}function Vg(e={}){let t=Object.assign(Object.assign({},Gg),e),i=new ul(t,!0),n=new ul(t,!1),r=Bt.fromClass(class{constructor(s){this.from=s.viewport.from,this.markers=this.buildMarkers(s)}update(s){(s.docChanged||s.viewportChanged||s.startState.facet(wi)!=s.state.facet(wi)||s.startState.field(Yi,!1)!=s.state.field(Yi,!1)||Nt(s.startState)!=Nt(s.state)||t.foldingChanged(s))&&(this.markers=this.buildMarkers(s.view))}buildMarkers(s){let a=new fi;for(let h of s.viewportLineBlocks){let c=ps(s.state,h.from,h.to)?n:us(s.state,h.from,h.to)?i:null;c&&a.add(h.from,h.from,c)}return a.finish()}}),{domEventHandlers:o}=t;return[r,tg({class:"cm-foldGutter",markers(s){var a;return((a=s.plugin(r))===null||a===void 0?void 0:a.markers)||wt.empty},initialSpacer(){return new ul(t,!1)},domEventHandlers:Object.assign(Object.assign({},o),{click:(s,a,h)=>{if(o.click&&o.click(s,a,h))return!0;let c=ps(s.state,a.from,a.to);if(c)return s.dispatch({effects:nr.of(c)}),!0;let d=us(s.state,a.from,a.to);return d?(s.dispatch({effects:cs.of(d)}),!0):!1}})}),wc()]}const Hg=it.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class ds{constructor(t,i){let n;function r(a){let h=mi.newName();return(n||(n=Object.create(null)))["."+h]=a,h}const o=typeof i.all=="string"?i.all:i.all?r(i.all):void 0,s=i.scope;this.scope=s instanceof _e?a=>a.prop(Kn)==s.data:s?a=>a==s:void 0,this.style=ac(t.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:o}).style,this.module=n?new mi(n):null,this.themeType=i.themeType}static define(t,i){return new ds(t,i||{})}}const cl=K.define(),Ec=K.define({combine(e){return e.length?[e[0]]:null}});function pl(e){let t=e.facet(cl);return t.length?t:e.facet(Ec)}function Jg(e,t){let i=[tO],n;return e instanceof ds&&(e.module&&i.push(it.styleModule.of(e.module)),n=e.themeType),t!=null&&t.fallback?i.push(Ec.of(e)):n?i.push(cl.computeN([it.darkTheme],r=>r.facet(it.darkTheme)==(n=="dark")?[e]:[])):i.push(cl.of(e)),i}class Kg{constructor(t){this.markCache=Object.create(null),this.tree=Nt(t.state),this.decorations=this.buildDeco(t,pl(t.state))}update(t){let i=Nt(t.state),n=pl(t.state),r=n!=pl(t.startState);i.length<t.view.viewport.to&&!r&&i.type==this.tree.type?this.decorations=this.decorations.map(t.changes):(i!=this.tree||t.viewportChanged||r)&&(this.tree=i,this.decorations=this.buildDeco(t.view,n))}buildDeco(t,i){if(!i||!this.tree.length)return nt.none;let n=new fi;for(let{from:r,to:o}of t.visibleRanges)Pg(this.tree,i,(s,a,h)=>{n.add(s,a,this.markCache[h]||(this.markCache[h]=nt.mark({class:h})))},r,o);return n.finish()}}const tO=Qi.high(Bt.fromClass(Kg,{decorations:e=>e.decorations})),eO=ds.define([{tag:N.meta,color:"#7a757a"},{tag:N.link,textDecoration:"underline"},{tag:N.heading,textDecoration:"underline",fontWeight:"bold"},{tag:N.emphasis,fontStyle:"italic"},{tag:N.strong,fontWeight:"bold"},{tag:N.strikethrough,textDecoration:"line-through"},{tag:N.keyword,color:"#708"},{tag:[N.atom,N.bool,N.url,N.contentSeparator,N.labelName],color:"#219"},{tag:[N.literal,N.inserted],color:"#164"},{tag:[N.string,N.deleted],color:"#a11"},{tag:[N.regexp,N.escape,N.special(N.string)],color:"#e40"},{tag:N.definition(N.variableName),color:"#00f"},{tag:N.local(N.variableName),color:"#30a"},{tag:[N.typeName,N.namespace],color:"#085"},{tag:N.className,color:"#167"},{tag:[N.special(N.variableName),N.macroName],color:"#256"},{tag:N.definition(N.propertyName),color:"#00c"},{tag:N.comment,color:"#940"},{tag:N.invalid,color:"#f00"}]),iO=it.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Dc=1e4,Tc="()[]{}",Ac=K.define({combine(e){return qe(e,{afterCursor:!0,brackets:Tc,maxScanDistance:Dc,renderMatch:sO})}}),nO=nt.mark({class:"cm-matchingBracket"}),rO=nt.mark({class:"cm-nonmatchingBracket"});function sO(e){let t=[],i=e.matched?nO:rO;return t.push(i.range(e.start.from,e.start.to)),e.end&&t.push(i.range(e.end.from,e.end.to)),t}const oO=jt.define({create(){return nt.none},update(e,t){if(!t.docChanged&&!t.selection)return e;let i=[],n=t.state.facet(Ac);for(let r of t.state.selection.ranges){if(!r.empty)continue;let o=ei(t.state,r.head,-1,n)||r.head>0&&ei(t.state,r.head-1,1,n)||n.afterCursor&&(ei(t.state,r.head,1,n)||r.head<t.state.doc.length&&ei(t.state,r.head+1,-1,n));o&&(i=i.concat(n.renderMatch(o,t.state)))}return nt.set(i,!0)},provide:e=>it.decorations.from(e)}),lO=[oO,iO];function aO(e={}){return[Ac.of(e),lO]}function dl(e,t,i){let n=e.prop(t<0?gt.openedBy:gt.closedBy);if(n)return n;if(e.name.length==1){let r=i.indexOf(e.name);if(r>-1&&r%2==(t<0?1:0))return[i[r+t]]}return null}function ei(e,t,i,n={}){let r=n.maxScanDistance||Dc,o=n.brackets||Tc,s=Nt(e),a=s.resolveInner(t,i);for(let h=a;h;h=h.parent){let c=dl(h.type,i,o);if(c&&h.from<h.to)return hO(e,t,i,h,c,o)}return uO(e,t,i,s,a.type,r,o)}function hO(e,t,i,n,r,o){let s=n.parent,a={from:n.from,to:n.to},h=0,c=s==null?void 0:s.cursor();if(c&&(i<0?c.childBefore(n.from):c.childAfter(n.to)))do if(i<0?c.to<=n.from:c.from>=n.to){if(h==0&&r.indexOf(c.type.name)>-1&&c.from<c.to)return{start:a,end:{from:c.from,to:c.to},matched:!0};if(dl(c.type,i,o))h++;else if(dl(c.type,-i,o)){if(h==0)return{start:a,end:c.from==c.to?void 0:{from:c.from,to:c.to},matched:!1};h--}}while(i<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function uO(e,t,i,n,r,o,s){let a=i<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),h=s.indexOf(a);if(h<0||h%2==0!=i>0)return null;let c={from:i<0?t-1:t,to:i>0?t+1:t},d=e.doc.iterRange(t,i>0?e.doc.length:0),f=0;for(let m=0;!d.next().done&&m<=o;){let v=d.value;i<0&&(m+=v.length);let S=t+m*i;for(let g=i>0?0:v.length-1,y=i>0?v.length:-1;g!=y;g+=i){let P=s.indexOf(v[g]);if(!(P<0||n.resolveInner(S+g,1).type!=r))if(P%2==0==i>0)f++;else{if(f==1)return{start:c,end:{from:S+g,to:S+g+1},matched:P>>1==h>>1};f--}}i>0&&(m+=v.length)}return d.done?{start:c,matched:!1}:null}const cO=Object.create(null),kc=[Oe.none],_c=[],pO=Object.create(null);for(let[e,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])pO[e]=dO(cO,t);function fl(e,t){_c.indexOf(e)>-1||(_c.push(e),console.warn(t))}function dO(e,t){let i=null;for(let o of t.split(".")){let s=e[o]||N[o];s?typeof s=="function"?i?i=s(i):fl(o,`Modifier ${o} used at start of tag`):i?fl(o,`Tag ${o} used as modifier`):i=s:fl(o,`Unknown highlighting tag ${o}`)}if(!i)return 0;let n=t.replace(/ /g,"_"),r=Oe.define({id:kc.length,name:n,props:[oc({[n]:i})]});return kc.push(r),r.id}const fO=e=>{let t=gl(e.state);return t.line?mO(e):t.block?OO(e):!1};function ml(e,t){return({state:i,dispatch:n})=>{if(i.readOnly)return!1;let r=e(t,i);return r?(n(i.update(r)),!0):!1}}const mO=ml(vO,0),gO=ml(Ic,0),OO=ml((e,t)=>Ic(e,t,xO(t)),0);function gl(e,t=e.selection.main.head){let i=e.languageDataAt("commentTokens",t);return i.length?i[0]:{}}const rr=50;function yO(e,{open:t,close:i},n,r){let o=e.sliceDoc(n-rr,n),s=e.sliceDoc(r,r+rr),a=/\s*$/.exec(o)[0].length,h=/^\s*/.exec(s)[0].length,c=o.length-a;if(o.slice(c-t.length,c)==t&&s.slice(h,h+i.length)==i)return{open:{pos:n-a,margin:a&&1},close:{pos:r+h,margin:h&&1}};let d,f;r-n<=2*rr?d=f=e.sliceDoc(n,r):(d=e.sliceDoc(n,n+rr),f=e.sliceDoc(r-rr,r));let m=/^\s*/.exec(d)[0].length,v=/\s*$/.exec(f)[0].length,S=f.length-v-i.length;return d.slice(m,m+t.length)==t&&f.slice(S,S+i.length)==i?{open:{pos:n+m+t.length,margin:/\s/.test(d.charAt(m+t.length))?1:0},close:{pos:r-v-i.length,margin:/\s/.test(f.charAt(S-1))?1:0}}:null}function xO(e){let t=[];for(let i of e.selection.ranges){let n=e.doc.lineAt(i.from),r=i.to<=n.to?n:e.doc.lineAt(i.to),o=t.length-1;o>=0&&t[o].to>n.from?t[o].to=r.to:t.push({from:n.from,to:r.to})}return t}function Ic(e,t,i=t.selection.ranges){let n=i.map(o=>gl(t,o.from).block);if(!n.every(o=>o))return null;let r=i.map((o,s)=>yO(t,n[s],o.from,o.to));if(e!=2&&!r.every(o=>o))return{changes:t.changes(i.map((o,s)=>r[s]?[]:[{from:o.from,insert:n[s].open+" "},{from:o.to,insert:" "+n[s].close}]))};if(e!=1&&r.some(o=>o)){let o=[];for(let s=0,a;s<r.length;s++)if(a=r[s]){let h=n[s],{open:c,close:d}=a;o.push({from:c.pos-h.open.length,to:c.pos+c.margin},{from:d.pos-d.margin,to:d.pos+h.close.length})}return{changes:o}}return null}function vO(e,t,i=t.selection.ranges){let n=[],r=-1;for(let{from:o,to:s}of i){let a=n.length,h=1e9;for(let c=o;c<=s;){let d=t.doc.lineAt(c);if(d.from>r&&(o==s||s>d.from)){r=d.from;let f=gl(t,c).line;if(!f)continue;let m=/^\s*/.exec(d.text)[0].length,v=m==d.length,S=d.text.slice(m,m+f.length)==f?m:-1;m<d.text.length&&m<h&&(h=m),n.push({line:d,comment:S,token:f,indent:m,empty:v,single:!1})}c=d.to+1}if(h<1e9)for(let c=a;c<n.length;c++)n[c].indent<n[c].line.text.length&&(n[c].indent=h);n.length==a+1&&(n[a].single=!0)}if(e!=2&&n.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:a,token:h,indent:c,empty:d,single:f}of n)(f||!d)&&o.push({from:a.from+c,insert:h+" "});let s=t.changes(o);return{changes:s,selection:t.selection.map(s,1)}}else if(e!=1&&n.some(o=>o.comment>=0)){let o=[];for(let{line:s,comment:a,token:h}of n)if(a>=0){let c=s.from+a,d=c+h.length;s.text[d-s.from]==" "&&d++,o.push({from:c,to:d})}return{changes:o}}return null}const Ol=Xi.define(),PO=Xi.define(),CO=K.define(),Lc=K.define({combine(e){return qe(e,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}});function SO(e){let t=0;return e.iterChangedRanges((i,n)=>t=n),t}const Qc=jt.define({create(){return ii.empty},update(e,t){let i=t.state.facet(Lc),n=t.annotation(Ol);if(n){let h=t.docChanged?j.single(SO(t.changes)):void 0,c=ye.fromTransaction(t,h),d=n.side,f=d==0?e.undone:e.done;return c?f=ms(f,f.length,i.minDepth,c):f=Nc(f,t.startState.selection),new ii(d==0?n.rest:f,d==0?f:n.rest)}let r=t.annotation(PO);if((r=="full"||r=="before")&&(e=e.isolate()),t.annotation(Zt.addToHistory)===!1)return t.changes.empty?e:e.addMapping(t.changes.desc);let o=ye.fromTransaction(t),s=t.annotation(Zt.time),a=t.annotation(Zt.userEvent);return o?e=e.addChanges(o,s,a,i.newGroupDelay,i.minDepth):t.selection&&(e=e.addSelection(t.startState.selection,s,a,i.newGroupDelay)),(r=="full"||r=="after")&&(e=e.isolate()),e},toJSON(e){return{done:e.done.map(t=>t.toJSON()),undone:e.undone.map(t=>t.toJSON())}},fromJSON(e){return new ii(e.done.map(ye.fromJSON),e.undone.map(ye.fromJSON))}});function wO(e={}){return[Qc,Lc.of(e),it.domEventHandlers({beforeinput(t,i){let n=t.inputType=="historyUndo"?Xc:t.inputType=="historyRedo"?yl:null;return n?(t.preventDefault(),n(i)):!1}})]}function fs(e,t){return function({state:i,dispatch:n}){if(!t&&i.readOnly)return!1;let r=i.field(Qc,!1);if(!r)return!1;let o=r.pop(e,i,t);return o?(n(o),!0):!1}}const Xc=fs(0,!1),yl=fs(1,!1),bO=fs(0,!0),EO=fs(1,!0);class ye{constructor(t,i,n,r,o){this.changes=t,this.effects=i,this.mapped=n,this.startSelection=r,this.selectionsAfter=o}setSelAfter(t){return new ye(this.changes,this.effects,this.mapped,this.startSelection,t)}toJSON(){var t,i,n;return{changes:(t=this.changes)===null||t===void 0?void 0:t.toJSON(),mapped:(i=this.mapped)===null||i===void 0?void 0:i.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(t){return new ye(t.changes&&Wt.fromJSON(t.changes),[],t.mapped&&ze.fromJSON(t.mapped),t.startSelection&&j.fromJSON(t.startSelection),t.selectionsAfter.map(j.fromJSON))}static fromTransaction(t,i){let n=Ie;for(let r of t.startState.facet(CO)){let o=r(t);o.length&&(n=n.concat(o))}return!n.length&&t.changes.empty?null:new ye(t.changes.invert(t.startState.doc),n,void 0,i||t.startState.selection,Ie)}static selection(t){return new ye(void 0,Ie,void 0,void 0,t)}}function ms(e,t,i,n){let r=t+1>i+20?t-i-1:0,o=e.slice(r,t);return o.push(n),o}function DO(e,t){let i=[],n=!1;return e.iterChangedRanges((r,o)=>i.push(r,o)),t.iterChangedRanges((r,o,s,a)=>{for(let h=0;h<i.length;){let c=i[h++],d=i[h++];a>=c&&s<=d&&(n=!0)}}),n}function TO(e,t){return e.ranges.length==t.ranges.length&&e.ranges.filter((i,n)=>i.empty!=t.ranges[n].empty).length===0}function $c(e,t){return e.length?t.length?e.concat(t):e:t}const Ie=[],AO=200;function Nc(e,t){if(e.length){let i=e[e.length-1],n=i.selectionsAfter.slice(Math.max(0,i.selectionsAfter.length-AO));return n.length&&n[n.length-1].eq(t)?e:(n.push(t),ms(e,e.length-1,1e9,i.setSelAfter(n)))}else return[ye.selection([t])]}function kO(e){let t=e[e.length-1],i=e.slice();return i[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),i}function xl(e,t){if(!e.length)return e;let i=e.length,n=Ie;for(;i;){let r=_O(e[i-1],t,n);if(r.changes&&!r.changes.empty||r.effects.length){let o=e.slice(0,i);return o[i-1]=r,o}else t=r.mapped,i--,n=r.selectionsAfter}return n.length?[ye.selection(n)]:Ie}function _O(e,t,i){let n=$c(e.selectionsAfter.length?e.selectionsAfter.map(a=>a.map(t)):Ie,i);if(!e.changes)return ye.selection(n);let r=e.changes.map(t),o=t.mapDesc(e.changes,!0),s=e.mapped?e.mapped.composeDesc(o):o;return new ye(r,ht.mapEffects(e.effects,t),s,e.startSelection.map(o),n)}const IO=/^(input\.type|delete)($|\.)/;class ii{constructor(t,i,n=0,r=void 0){this.done=t,this.undone=i,this.prevTime=n,this.prevUserEvent=r}isolate(){return this.prevTime?new ii(this.done,this.undone):this}addChanges(t,i,n,r,o){let s=this.done,a=s[s.length-1];return a&&a.changes&&!a.changes.empty&&t.changes&&(!n||IO.test(n))&&(!a.selectionsAfter.length&&i-this.prevTime<r&&DO(a.changes,t.changes)||n=="input.type.compose")?s=ms(s,s.length-1,o,new ye(t.changes.compose(a.changes),$c(t.effects,a.effects),a.mapped,a.startSelection,Ie)):s=ms(s,s.length,o,t),new ii(s,Ie,i,n)}addSelection(t,i,n,r){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:Ie;return o.length>0&&i-this.prevTime<r&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&TO(o[o.length-1],t)?this:new ii(Nc(this.done,t),this.undone,i,n)}addMapping(t){return new ii(xl(this.done,t),xl(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,i,n){let r=t==0?this.done:this.undone;if(r.length==0)return null;let o=r[r.length-1];if(n&&o.selectionsAfter.length)return i.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:Ol.of({side:t,rest:kO(r)}),userEvent:t==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let s=r.length==1?Ie:r.slice(0,r.length-1);return o.mapped&&(s=xl(s,o.mapped)),i.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:Ol.of({side:t,rest:s}),filter:!1,userEvent:t==0?"undo":"redo",scrollIntoView:!0})}else return null}}ii.empty=new ii(Ie,Ie);const LO=[{key:"Mod-z",run:Xc,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:yl,preventDefault:!0},{linux:"Ctrl-Shift-z",run:yl,preventDefault:!0},{key:"Mod-u",run:bO,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:EO,preventDefault:!0}];function an(e,t){return j.create(e.ranges.map(t),e.mainIndex)}function ni(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function Re({state:e,dispatch:t},i){let n=an(e.selection,i);return n.eq(e.selection)?!1:(t(ni(e,n)),!0)}function gs(e,t){return j.cursor(t?e.to:e.from)}function Fc(e,t){return Re(e,i=>i.empty?e.moveByChar(i,t):gs(i,t))}function le(e){return e.textDirectionAt(e.state.selection.main.head)==Lt.LTR}const Mc=e=>Fc(e,!le(e)),Bc=e=>Fc(e,le(e));function Rc(e,t){return Re(e,i=>i.empty?e.moveByGroup(i,t):gs(i,t))}const QO=e=>Rc(e,!le(e)),XO=e=>Rc(e,le(e));function $O(e,t,i){if(t.type.prop(i))return!0;let n=t.to-t.from;return n&&(n>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function Os(e,t,i){let n=Nt(e).resolveInner(t.head),r=i?gt.closedBy:gt.openedBy;for(let h=t.head;;){let c=i?n.childAfter(h):n.childBefore(h);if(!c)break;$O(e,c,r)?n=c:h=i?c.to:c.from}let o=n.type.prop(r),s,a;return o&&(s=i?ei(e,n.from,1):ei(e,n.to,-1))&&s.matched?a=i?s.end.to:s.end.from:a=i?n.to:n.from,j.cursor(a,i?-1:1)}const NO=e=>Re(e,t=>Os(e.state,t,!le(e))),FO=e=>Re(e,t=>Os(e.state,t,le(e)));function Yc(e,t){return Re(e,i=>{if(!i.empty)return gs(i,t);let n=e.moveVertically(i,t);return n.head!=i.head?n:e.moveToLineBoundary(i,t)})}const Wc=e=>Yc(e,!1),jc=e=>Yc(e,!0);function Zc(e){return Math.max(e.defaultLineHeight,Math.min(e.dom.clientHeight,innerHeight)-5)}function zc(e,t){let{state:i}=e,n=an(i.selection,a=>a.empty?e.moveVertically(a,t,Zc(e)):gs(a,t));if(n.eq(i.selection))return!1;let r=e.coordsAtPos(i.selection.main.head),o=e.scrollDOM.getBoundingClientRect(),s;return r&&r.top>o.top&&r.bottom<o.bottom&&r.top-o.top<=e.scrollDOM.scrollHeight-e.scrollDOM.scrollTop-e.scrollDOM.clientHeight&&(s=it.scrollIntoView(n.main.head,{y:"start",yMargin:r.top-o.top})),e.dispatch(ni(i,n),{effects:s}),!0}const qc=e=>zc(e,!1),vl=e=>zc(e,!0);function bi(e,t,i){let n=e.lineBlockAt(t.head),r=e.moveToLineBoundary(t,i);if(r.head==t.head&&r.head!=(i?n.to:n.from)&&(r=e.moveToLineBoundary(t,i,!1)),!i&&r.head==n.from&&n.length){let o=/^\s*/.exec(e.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;o&&t.head!=n.from+o&&(r=j.cursor(n.from+o))}return r}const MO=e=>Re(e,t=>bi(e,t,!0)),BO=e=>Re(e,t=>bi(e,t,!1)),RO=e=>Re(e,t=>bi(e,t,!le(e))),YO=e=>Re(e,t=>bi(e,t,le(e))),WO=e=>Re(e,t=>j.cursor(e.lineBlockAt(t.head).from,1)),jO=e=>Re(e,t=>j.cursor(e.lineBlockAt(t.head).to,-1));function ZO(e,t,i){let n=!1,r=an(e.selection,o=>{let s=ei(e,o.head,-1)||ei(e,o.head,1)||o.head>0&&ei(e,o.head-1,1)||o.head<e.doc.length&&ei(e,o.head+1,-1);if(!s||!s.end)return o;n=!0;let a=s.start.from==o.head?s.end.to:s.end.from;return i?j.range(o.anchor,a):j.cursor(a)});return n?(t(ni(e,r)),!0):!1}const zO=({state:e,dispatch:t})=>ZO(e,t,!1);function Le(e,t){let i=an(e.state.selection,n=>{let r=t(n);return j.range(n.anchor,r.head,r.goalColumn)});return i.eq(e.state.selection)?!1:(e.dispatch(ni(e.state,i)),!0)}function Uc(e,t){return Le(e,i=>e.moveByChar(i,t))}const Gc=e=>Uc(e,!le(e)),Vc=e=>Uc(e,le(e));function Hc(e,t){return Le(e,i=>e.moveByGroup(i,t))}const qO=e=>Hc(e,!le(e)),UO=e=>Hc(e,le(e)),GO=e=>Le(e,t=>Os(e.state,t,!le(e))),VO=e=>Le(e,t=>Os(e.state,t,le(e)));function Jc(e,t){return Le(e,i=>e.moveVertically(i,t))}const Kc=e=>Jc(e,!1),tp=e=>Jc(e,!0);function ep(e,t){return Le(e,i=>e.moveVertically(i,t,Zc(e)))}const ip=e=>ep(e,!1),np=e=>ep(e,!0),HO=e=>Le(e,t=>bi(e,t,!0)),JO=e=>Le(e,t=>bi(e,t,!1)),KO=e=>Le(e,t=>bi(e,t,!le(e))),ty=e=>Le(e,t=>bi(e,t,le(e))),ey=e=>Le(e,t=>j.cursor(e.lineBlockAt(t.head).from)),iy=e=>Le(e,t=>j.cursor(e.lineBlockAt(t.head).to)),rp=({state:e,dispatch:t})=>(t(ni(e,{anchor:0})),!0),sp=({state:e,dispatch:t})=>(t(ni(e,{anchor:e.doc.length})),!0),op=({state:e,dispatch:t})=>(t(ni(e,{anchor:e.selection.main.anchor,head:0})),!0),lp=({state:e,dispatch:t})=>(t(ni(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0),ny=({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0),ry=({state:e,dispatch:t})=>{let i=vs(e).map(({from:n,to:r})=>j.range(n,Math.min(r+1,e.doc.length)));return t(e.update({selection:j.create(i),userEvent:"select"})),!0},sy=({state:e,dispatch:t})=>{let i=an(e.selection,n=>{var r;let o=Nt(e).resolveInner(n.head,1);for(;!(o.from<n.from&&o.to>=n.to||o.to>n.to&&o.from<=n.from||!(!((r=o.parent)===null||r===void 0)&&r.parent));)o=o.parent;return j.range(o.to,o.from)});return t(ni(e,i)),!0},oy=({state:e,dispatch:t})=>{let i=e.selection,n=null;return i.ranges.length>1?n=j.create([i.main]):i.main.empty||(n=j.create([j.cursor(i.main.head)])),n?(t(ni(e,n)),!0):!1};function ys({state:e,dispatch:t},i){if(e.readOnly)return!1;let n="delete.selection",r=e.changeByRange(o=>{let{from:s,to:a}=o;if(s==a){let h=i(s);h<s?n="delete.backward":h>s&&(n="delete.forward"),s=Math.min(s,h),a=Math.max(a,h)}return s==a?{range:o}:{changes:{from:s,to:a},range:j.cursor(s)}});return r.changes.empty?!1:(t(e.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?it.announce.of(e.phrase("Selection deleted")):void 0})),!0)}function xs(e,t,i){if(e instanceof it)for(let n of e.state.facet(it.atomicRanges).map(r=>r(e)))n.between(t,t,(r,o)=>{r<t&&o>t&&(t=i?o:r)});return t}const ap=(e,t)=>ys(e,i=>{let{state:n}=e,r=n.doc.lineAt(i),o,s;if(!t&&i>r.from&&i<r.from+200&&!/[^ \t]/.test(o=r.text.slice(0,i-r.from))){if(o[o.length-1]=="	")return i-1;let a=$n(o,n.tabSize),h=a%as(n)||as(n);for(let c=0;c<h&&o[o.length-1-c]==" ";c++)i--;s=i}else s=ue(r.text,i-r.from,t,t)+r.from,s==i&&r.number!=(t?n.doc.lines:1)&&(s+=t?1:-1);return xs(e,s,t)}),Pl=e=>ap(e,!1),hp=e=>ap(e,!0),up=(e,t)=>ys(e,i=>{let n=i,{state:r}=e,o=r.doc.lineAt(n),s=r.charCategorizer(n);for(let a=null;;){if(n==(t?o.to:o.from)){n==i&&o.number!=(t?r.doc.lines:1)&&(n+=t?1:-1);break}let h=ue(o.text,n-o.from,t)+o.from,c=o.text.slice(Math.min(n,h)-o.from,Math.max(n,h)-o.from),d=s(c);if(a!=null&&d!=a)break;(c!=" "||n!=i)&&(a=d),n=h}return xs(e,n,t)}),cp=e=>up(e,!1),ly=e=>up(e,!0),pp=e=>ys(e,t=>{let i=e.lineBlockAt(t).to;return xs(e,t<i?i:Math.min(e.state.doc.length,t+1),!0)}),ay=e=>ys(e,t=>{let i=e.lineBlockAt(t).from;return xs(e,t>i?i:Math.max(0,t-1),!1)}),hy=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:Ct.of(["",""])},range:j.cursor(n.from)}));return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0},uy=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(n=>{if(!n.empty||n.from==0||n.from==e.doc.length)return{range:n};let r=n.from,o=e.doc.lineAt(r),s=r==o.from?r-1:ue(o.text,r-o.from,!1)+o.from,a=r==o.to?r+1:ue(o.text,r-o.from,!0)+o.from;return{changes:{from:s,to:a,insert:e.doc.slice(r,a).append(e.doc.slice(s,r))},range:j.cursor(a)}});return i.changes.empty?!1:(t(e.update(i,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function vs(e){let t=[],i=-1;for(let n of e.selection.ranges){let r=e.doc.lineAt(n.from),o=e.doc.lineAt(n.to);if(!n.empty&&n.to==o.from&&(o=e.doc.lineAt(n.to-1)),i>=r.number){let s=t[t.length-1];s.to=o.to,s.ranges.push(n)}else t.push({from:r.from,to:o.to,ranges:[n]});i=o.number+1}return t}function dp(e,t,i){if(e.readOnly)return!1;let n=[],r=[];for(let o of vs(e)){if(i?o.to==e.doc.length:o.from==0)continue;let s=e.doc.lineAt(i?o.to+1:o.from-1),a=s.length+1;if(i){n.push({from:o.to,to:s.to},{from:o.from,insert:s.text+e.lineBreak});for(let h of o.ranges)r.push(j.range(Math.min(e.doc.length,h.anchor+a),Math.min(e.doc.length,h.head+a)))}else{n.push({from:s.from,to:o.from},{from:o.to,insert:e.lineBreak+s.text});for(let h of o.ranges)r.push(j.range(h.anchor-a,h.head-a))}}return n.length?(t(e.update({changes:n,scrollIntoView:!0,selection:j.create(r,e.selection.mainIndex),userEvent:"move.line"})),!0):!1}const cy=({state:e,dispatch:t})=>dp(e,t,!1),py=({state:e,dispatch:t})=>dp(e,t,!0);function fp(e,t,i){if(e.readOnly)return!1;let n=[];for(let r of vs(e))i?n.push({from:r.from,insert:e.doc.slice(r.from,r.to)+e.lineBreak}):n.push({from:r.to,insert:e.lineBreak+e.doc.slice(r.from,r.to)});return t(e.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const dy=({state:e,dispatch:t})=>fp(e,t,!1),fy=({state:e,dispatch:t})=>fp(e,t,!0),my=e=>{if(e.state.readOnly)return!1;let{state:t}=e,i=t.changes(vs(t).map(({from:r,to:o})=>(r>0?r--:o<t.doc.length&&o++,{from:r,to:o}))),n=an(t.selection,r=>e.moveVertically(r,!0)).map(i);return e.dispatch({changes:i,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function gy(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let i=Nt(e).resolveInner(t),n=i.childBefore(t),r=i.childAfter(t),o;return n&&r&&n.to<=t&&r.from>=t&&(o=n.type.prop(gt.closedBy))&&o.indexOf(r.name)>-1&&e.doc.lineAt(n.to).from==e.doc.lineAt(r.from).from?{from:n.to,to:r.from}:null}const Oy=mp(!1),yy=mp(!0);function mp(e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{let{from:o,to:s}=r,a=t.doc.lineAt(o),h=!e&&o==s&&gy(t,o);e&&(o=s=(s<=a.to?a:t.doc.lineAt(s)).to);let c=new hs(t,{simulateBreak:o,simulateDoubleBreak:!!h}),d=ll(c,o);for(d==null&&(d=/^\s*/.exec(t.doc.lineAt(o).text)[0].length);s<a.to&&/\s/.test(a.text[s-a.from]);)s++;h?{from:o,to:s}=h:o>a.from&&o<a.from+100&&!/\S/.test(a.text.slice(0,o))&&(o=a.from);let f=["",ir(t,d)];return h&&f.push(ir(t,c.lineIndent(a.from,-1))),{changes:{from:o,to:s,insert:Ct.of(f)},range:j.cursor(o+1+f[1].length)}});return i(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function Cl(e,t){let i=-1;return e.changeByRange(n=>{let r=[];for(let s=n.from;s<=n.to;){let a=e.doc.lineAt(s);a.number>i&&(n.empty||n.to>a.from)&&(t(a,r,n),i=a.number),s=a.to+1}let o=e.changes(r);return{changes:r,range:j.range(o.mapPos(n.anchor,1),o.mapPos(n.head,1))}})}const xy=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=Object.create(null),n=new hs(e,{overrideIndentation:o=>{let s=i[o];return s==null?-1:s}}),r=Cl(e,(o,s,a)=>{let h=ll(n,o.from);if(h==null)return;/\S/.test(o.text)||(h=0);let c=/^\s*/.exec(o.text)[0],d=ir(e,h);(c!=d||a.from<o.from+c.length)&&(i[o.from]=h,s.push({from:o.from,to:o.from+c.length,insert:d}))});return r.changes.empty||t(e.update(r,{userEvent:"indent"})),!0},gp=({state:e,dispatch:t})=>e.readOnly?!1:(t(e.update(Cl(e,(i,n)=>{n.push({from:i.from,insert:e.facet(er)})}),{userEvent:"input.indent"})),!0),Op=({state:e,dispatch:t})=>e.readOnly?!1:(t(e.update(Cl(e,(i,n)=>{let r=/^\s*/.exec(i.text)[0];if(!r)return;let o=$n(r,e.tabSize),s=0,a=ir(e,Math.max(0,o-as(e)));for(;s<r.length&&s<a.length&&r.charCodeAt(s)==a.charCodeAt(s);)s++;n.push({from:i.from+s,to:i.from+r.length,insert:a.slice(s)})}),{userEvent:"delete.dedent"})),!0),vy=[{key:"Ctrl-b",run:Mc,shift:Gc,preventDefault:!0},{key:"Ctrl-f",run:Bc,shift:Vc},{key:"Ctrl-p",run:Wc,shift:Kc},{key:"Ctrl-n",run:jc,shift:tp},{key:"Ctrl-a",run:WO,shift:ey},{key:"Ctrl-e",run:jO,shift:iy},{key:"Ctrl-d",run:hp},{key:"Ctrl-h",run:Pl},{key:"Ctrl-k",run:pp},{key:"Ctrl-Alt-h",run:cp},{key:"Ctrl-o",run:hy},{key:"Ctrl-t",run:uy},{key:"Ctrl-v",run:vl}],Py=[{key:"ArrowLeft",run:Mc,shift:Gc,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:QO,shift:qO,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:RO,shift:KO,preventDefault:!0},{key:"ArrowRight",run:Bc,shift:Vc,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:XO,shift:UO,preventDefault:!0},{mac:"Cmd-ArrowRight",run:YO,shift:ty,preventDefault:!0},{key:"ArrowUp",run:Wc,shift:Kc,preventDefault:!0},{mac:"Cmd-ArrowUp",run:rp,shift:op},{mac:"Ctrl-ArrowUp",run:qc,shift:ip},{key:"ArrowDown",run:jc,shift:tp,preventDefault:!0},{mac:"Cmd-ArrowDown",run:sp,shift:lp},{mac:"Ctrl-ArrowDown",run:vl,shift:np},{key:"PageUp",run:qc,shift:ip},{key:"PageDown",run:vl,shift:np},{key:"Home",run:BO,shift:JO,preventDefault:!0},{key:"Mod-Home",run:rp,shift:op},{key:"End",run:MO,shift:HO,preventDefault:!0},{key:"Mod-End",run:sp,shift:lp},{key:"Enter",run:Oy},{key:"Mod-a",run:ny},{key:"Backspace",run:Pl,shift:Pl},{key:"Delete",run:hp},{key:"Mod-Backspace",mac:"Alt-Backspace",run:cp},{key:"Mod-Delete",mac:"Alt-Delete",run:ly},{mac:"Mod-Backspace",run:ay},{mac:"Mod-Delete",run:pp}].concat(vy.map(e=>({mac:e.key,run:e.run,shift:e.shift}))),Cy=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:NO,shift:GO},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:FO,shift:VO},{key:"Alt-ArrowUp",run:cy},{key:"Shift-Alt-ArrowUp",run:dy},{key:"Alt-ArrowDown",run:py},{key:"Shift-Alt-ArrowDown",run:fy},{key:"Escape",run:oy},{key:"Mod-Enter",run:yy},{key:"Alt-l",mac:"Ctrl-l",run:ry},{key:"Mod-i",run:sy,preventDefault:!0},{key:"Mod-[",run:Op},{key:"Mod-]",run:gp},{key:"Mod-Alt-\\",run:xy},{key:"Shift-Mod-k",run:my},{key:"Shift-Mod-\\",run:zO},{key:"Mod-/",run:fO},{key:"Alt-A",run:gO}].concat(Py),Sy={key:"Tab",run:gp,shift:Op};function Dt(){var e=arguments[0];typeof e=="string"&&(e=document.createElement(e));var t=1,i=arguments[1];if(i&&typeof i=="object"&&i.nodeType==null&&!Array.isArray(i)){for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)){var r=i[n];typeof r=="string"?e.setAttribute(n,r):r!=null&&(e[n]=r)}t++}for(;t<arguments.length;t++)yp(e,arguments[t]);return e}function yp(e,t){if(typeof t=="string")e.appendChild(document.createTextNode(t));else if(t!=null)if(t.nodeType!=null)e.appendChild(t);else if(Array.isArray(t))for(var i=0;i<t.length;i++)yp(e,t[i]);else throw new RangeError("Unsupported child node: "+t)}const xp=typeof String.prototype.normalize=="function"?e=>e.normalize("NFKD"):e=>e;class hn{constructor(t,i,n=0,r=t.length,o,s){this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(n,r),this.bufferStart=n,this.normalize=o?a=>o(xp(a)):xp,this.query=this.normalize(i)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Jt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let t=this.peek();if(t<0)return this.done=!0,this;let i=Gs(t),n=this.bufferStart+this.bufferPos;this.bufferPos+=Se(t);let r=this.normalize(i);for(let o=0,s=n;;o++){let a=r.charCodeAt(o),h=this.match(a,s);if(h)return this.value=h,this;if(o==r.length-1)break;s==n&&o<i.length&&i.charCodeAt(o)==a&&s++}}}match(t,i){let n=null;for(let r=0;r<this.matches.length;r+=2){let o=this.matches[r],s=!1;this.query.charCodeAt(o)==t&&(o==this.query.length-1?n={from:this.matches[r+1],to:i+1}:(this.matches[r]++,s=!0)),s||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==t&&(this.query.length==1?n={from:i,to:i+1}:this.matches.push(1,i)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferPos)&&(n=null),n}}typeof Symbol<"u"&&(hn.prototype[Symbol.iterator]=function(){return this});const vp={from:-1,to:-1,match:/.*/.exec("")},Sl="gm"+(/x/.unicode==null?"":"u");class Pp{constructor(t,i,n,r=0,o=t.length){if(this.text=t,this.to=o,this.curLine="",this.done=!1,this.value=vp,/\\[sWDnr]|\n|\r|\[\^/.test(i))return new Cp(t,i,n,r,o);this.re=new RegExp(i,Sl+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.iter=t.iter();let s=t.lineAt(r);this.curLineStart=s.from,this.matchPos=Ps(t,r),this.getLine(this.curLineStart)}getLine(t){this.iter.next(t),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let t=this.matchPos-this.curLineStart;;){this.re.lastIndex=t;let i=this.matchPos<=this.to&&this.re.exec(this.curLine);if(i){let n=this.curLineStart+i.index,r=n+i[0].length;if(this.matchPos=Ps(this.text,r+(n==r?1:0)),n==this.curLine.length&&this.nextLine(),(n<r||n>this.value.to)&&(!this.test||this.test(n,r,i)))return this.value={from:n,to:r,match:i},this;t=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),t=0;else return this.done=!0,this}}}const wl=new WeakMap;class un{constructor(t,i){this.from=t,this.text=i}get to(){return this.from+this.text.length}static get(t,i,n){let r=wl.get(t);if(!r||r.from>=n||r.to<=i){let a=new un(i,t.sliceString(i,n));return wl.set(t,a),a}if(r.from==i&&r.to==n)return r;let{text:o,from:s}=r;return s>i&&(o=t.sliceString(i,s)+o,s=i),r.to<n&&(o+=t.sliceString(r.to,n)),wl.set(t,new un(s,o)),new un(i,o.slice(i-s,n-s))}}class Cp{constructor(t,i,n,r,o){this.text=t,this.to=o,this.done=!1,this.value=vp,this.matchPos=Ps(t,r),this.re=new RegExp(i,Sl+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.flat=un.get(t,r,this.chunkEnd(r+5e3))}chunkEnd(t){return t>=this.to?this.to:this.text.lineAt(t).to}next(){for(;;){let t=this.re.lastIndex=this.matchPos-this.flat.from,i=this.re.exec(this.flat.text);if(i&&!i[0]&&i.index==t&&(this.re.lastIndex=t+1,i=this.re.exec(this.flat.text)),i){let n=this.flat.from+i.index,r=n+i[0].length;if((this.flat.to>=this.to||i.index+i[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,r,i)))return this.value={from:n,to:r,match:i},this.matchPos=Ps(this.text,r+(n==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=un.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Pp.prototype[Symbol.iterator]=Cp.prototype[Symbol.iterator]=function(){return this});function wy(e){try{return new RegExp(e,Sl),!0}catch{return!1}}function Ps(e,t){if(t>=e.length)return t;let i=e.lineAt(t),n;for(;t<i.to&&(n=i.text.charCodeAt(t-i.from))>=56320&&n<57344;)t++;return t}function bl(e){let t=Dt("input",{class:"cm-textfield",name:"line"}),i=Dt("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),e.dispatch({effects:Cs.of(!1)}),e.focus()):r.keyCode==13&&(r.preventDefault(),n())},onsubmit:r=>{r.preventDefault(),n()}},Dt("label",e.state.phrase("Go to line"),": ",t)," ",Dt("button",{class:"cm-button",type:"submit"},e.state.phrase("go")));function n(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!r)return;let{state:o}=e,s=o.doc.lineAt(o.selection.main.head),[,a,h,c,d]=r,f=c?+c.slice(1):0,m=h?+h:s.number;if(h&&d){let S=m/100;a&&(S=S*(a=="-"?-1:1)+s.number/o.doc.lines),m=Math.round(o.doc.lines*S)}else h&&a&&(m=m*(a=="-"?-1:1)+s.number);let v=o.doc.line(Math.max(1,Math.min(o.doc.lines,m)));e.dispatch({effects:Cs.of(!1),selection:j.cursor(v.from+Math.max(0,Math.min(f,v.length))),scrollIntoView:!0}),e.focus()}return{dom:i}}const Cs=ht.define(),Sp=jt.define({create(){return!0},update(e,t){for(let i of t.effects)i.is(Cs)&&(e=i.value);return e},provide:e=>Vn.from(e,t=>t?bl:null)}),by=e=>{let t=Gn(e,bl);if(!t){let i=[Cs.of(!0)];e.state.field(Sp,!1)==null&&i.push(ht.appendConfig.of([Sp,Ey])),e.dispatch({effects:i}),t=Gn(e,bl)}return t&&t.dom.querySelector("input").focus(),!0},Ey=it.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Dy={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},wp=K.define({combine(e){return qe(e,Dy,{highlightWordAroundCursor:(t,i)=>t||i,minSelectionLength:Math.min,maxMatches:Math.min})}});function Ty(e){let t=[Ly,Iy];return e&&t.push(wp.of(e)),t}const Ay=nt.mark({class:"cm-selectionMatch"}),ky=nt.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function bp(e,t,i,n){return(i==0||e(t.sliceDoc(i-1,i))!=It.Word)&&(n==t.doc.length||e(t.sliceDoc(n,n+1))!=It.Word)}function _y(e,t,i,n){return e(t.sliceDoc(i,i+1))==It.Word&&e(t.sliceDoc(n-1,n))==It.Word}const Iy=Bt.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(wp),{state:i}=e,n=i.selection;if(n.ranges.length>1)return nt.none;let r=n.main,o,s=null;if(r.empty){if(!t.highlightWordAroundCursor)return nt.none;let h=i.wordAt(r.head);if(!h)return nt.none;s=i.charCategorizer(r.head),o=i.sliceDoc(h.from,h.to)}else{let h=r.to-r.from;if(h<t.minSelectionLength||h>200)return nt.none;if(t.wholeWords){if(o=i.sliceDoc(r.from,r.to),s=i.charCategorizer(r.head),!(bp(s,i,r.from,r.to)&&_y(s,i,r.from,r.to)))return nt.none}else if(o=i.sliceDoc(r.from,r.to).trim(),!o)return nt.none}let a=[];for(let h of e.visibleRanges){let c=new hn(i.doc,o,h.from,h.to);for(;!c.next().done;){let{from:d,to:f}=c.value;if((!s||bp(s,i,d,f))&&(r.empty&&d<=r.from&&f>=r.to?a.push(ky.range(d,f)):(d>=r.to||f<=r.from)&&a.push(Ay.range(d,f)),a.length>t.maxMatches))return nt.none}}return nt.set(a)}},{decorations:e=>e.decorations}),Ly=it.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Qy=({state:e,dispatch:t})=>{let{selection:i}=e,n=j.create(i.ranges.map(r=>e.wordAt(r.head)||j.cursor(r.head)),i.mainIndex);return n.eq(i)?!1:(t(e.update({selection:n})),!0)};function Xy(e,t){let{main:i,ranges:n}=e.selection,r=e.wordAt(i.head),o=r&&r.from==i.from&&r.to==i.to;for(let s=!1,a=new hn(e.doc,t,n[n.length-1].to);;)if(a.next(),a.done){if(s)return null;a=new hn(e.doc,t,0,Math.max(0,n[n.length-1].from-1)),s=!0}else{if(s&&n.some(h=>h.from==a.value.from))continue;if(o){let h=e.wordAt(a.value.from);if(!h||h.from!=a.value.from||h.to!=a.value.to)continue}return a.value}}const $y=({state:e,dispatch:t})=>{let{ranges:i}=e.selection;if(i.some(o=>o.from===o.to))return Qy({state:e,dispatch:t});let n=e.sliceDoc(i[0].from,i[0].to);if(e.selection.ranges.some(o=>e.sliceDoc(o.from,o.to)!=n))return!1;let r=Xy(e,n);return r?(t(e.update({selection:e.selection.addRange(j.range(r.from,r.to),!1),effects:it.scrollIntoView(r.to)})),!0):!1},El=K.define({combine(e){return qe(e,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:t=>new Uy(t)})}});class Ep{constructor(t){this.search=t.search,this.caseSensitive=!!t.caseSensitive,this.literal=!!t.literal,this.regexp=!!t.regexp,this.replace=t.replace||"",this.valid=!!this.search&&(!this.regexp||wy(this.search)),this.unquoted=this.literal?this.search:this.search.replace(/\\([nrt\\])/g,(i,n)=>n=="n"?`
`:n=="r"?"\r":n=="t"?"	":"\\"),this.wholeWord=!!t.wholeWord}eq(t){return this.search==t.search&&this.replace==t.replace&&this.caseSensitive==t.caseSensitive&&this.regexp==t.regexp&&this.wholeWord==t.wholeWord}create(){return this.regexp?new By(this):new Fy(this)}getCursor(t,i=0,n){let r=t.doc?t:vt.create({doc:t});return n==null&&(n=r.doc.length),this.regexp?pn(this,r,i,n):cn(this,r,i,n)}}class Dp{constructor(t){this.spec=t}}function cn(e,t,i,n){return new hn(t.doc,e.unquoted,i,n,e.caseSensitive?void 0:r=>r.toLowerCase(),e.wholeWord?Ny(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}function Ny(e,t){return(i,n,r,o)=>((o>i||o+r.length<n)&&(o=Math.max(0,i-2),r=e.sliceString(o,Math.min(e.length,n+2))),t(ws(r,i-o))!=It.Word||t(Ss(r,n-o))!=It.Word||t(Ss(r,i-o))!=It.Word&&t(ws(r,n-o))!=It.Word)}class Fy extends Dp{constructor(t){super(t)}nextMatch(t,i,n){let r=cn(this.spec,t,n,t.doc.length).nextOverlapping();return r.done&&(r=cn(this.spec,t,0,i).nextOverlapping()),r.done?null:r.value}prevMatchInRange(t,i,n){for(let r=n;;){let o=Math.max(i,r-1e4-this.spec.unquoted.length),s=cn(this.spec,t,o,r),a=null;for(;!s.nextOverlapping().done;)a=s.value;if(a)return a;if(o==i)return null;r-=1e4}}prevMatch(t,i,n){return this.prevMatchInRange(t,0,i)||this.prevMatchInRange(t,n,t.doc.length)}getReplacement(t){return this.spec.replace}matchAll(t,i){let n=cn(this.spec,t,0,t.doc.length),r=[];for(;!n.next().done;){if(r.length>=i)return null;r.push(n.value)}return r}highlight(t,i,n,r){let o=cn(this.spec,t,Math.max(0,i-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,t.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}function pn(e,t,i,n){return new Pp(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?My(t.charCategorizer(t.selection.main.head)):void 0},i,n)}function Ss(e,t){return e.slice(ue(e,t,!1),t)}function ws(e,t){return e.slice(t,ue(e,t))}function My(e){return(t,i,n)=>!n[0].length||e(ws(n.input,n.index))!=It.Word||e(Ss(n.input,n.index+n[0].length))!=It.Word||e(Ss(n.input,n.index))!=It.Word&&e(ws(n.input,n.index+n[0].length))!=It.Word}class By extends Dp{nextMatch(t,i,n){let r=pn(this.spec,t,n,t.doc.length).next();return r.done&&(r=pn(this.spec,t,0,i).next()),r.done?null:r.value}prevMatchInRange(t,i,n){for(let r=1;;r++){let o=Math.max(i,n-r*1e4),s=pn(this.spec,t,o,n),a=null;for(;!s.next().done;)a=s.value;if(a&&(o==i||a.from>o+10))return a;if(o==i)return null}}prevMatch(t,i,n){return this.prevMatchInRange(t,0,i)||this.prevMatchInRange(t,n,t.doc.length)}getReplacement(t){return this.spec.replace.replace(/\$([$&\d+])/g,(i,n)=>n=="$"?"$":n=="&"?t.match[0]:n!="0"&&+n<t.match.length?t.match[n]:i)}matchAll(t,i){let n=pn(this.spec,t,0,t.doc.length),r=[];for(;!n.next().done;){if(r.length>=i)return null;r.push(n.value)}return r}highlight(t,i,n,r){let o=pn(this.spec,t,Math.max(0,i-250),Math.min(n+250,t.doc.length));for(;!o.next().done;)r(o.value.from,o.value.to)}}const sr=ht.define(),Dl=ht.define(),Ei=jt.define({create(e){return new Tl(kl(e).create(),null)},update(e,t){for(let i of t.effects)i.is(sr)?e=new Tl(i.value.create(),e.panel):i.is(Dl)&&(e=new Tl(e.query,i.value?Al:null));return e},provide:e=>Vn.from(e,t=>t.panel)});class Tl{constructor(t,i){this.query=t,this.panel=i}}const Ry=nt.mark({class:"cm-searchMatch"}),Yy=nt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Wy=Bt.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(Ei))}update(e){let t=e.state.field(Ei);(t!=e.startState.field(Ei)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:e,panel:t}){if(!t||!e.spec.valid)return nt.none;let{view:i}=this,n=new fi;for(let r=0,o=i.visibleRanges,s=o.length;r<s;r++){let{from:a,to:h}=o[r];for(;r<s-1&&h>o[r+1].from-2*250;)h=o[++r].to;e.highlight(i.state,a,h,(c,d)=>{let f=i.state.selection.ranges.some(m=>m.from==c&&m.to==d);n.add(c,d,f?Yy:Ry)})}return n.finish()}},{decorations:e=>e.decorations});function or(e){return t=>{let i=t.state.field(Ei,!1);return i&&i.query.spec.valid?e(t,i):Ap(t)}}const bs=or((e,{query:t})=>{let{to:i}=e.state.selection.main,n=t.nextMatch(e.state,i,i);return n?(e.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:_l(e,n),userEvent:"select.search"}),!0):!1}),Es=or((e,{query:t})=>{let{state:i}=e,{from:n}=i.selection.main,r=t.prevMatch(i,n,n);return r?(e.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:_l(e,r),userEvent:"select.search"}),!0):!1}),jy=or((e,{query:t})=>{let i=t.matchAll(e.state,1e3);return!i||!i.length?!1:(e.dispatch({selection:j.create(i.map(n=>j.range(n.from,n.to))),userEvent:"select.search.matches"}),!0)}),Zy=({state:e,dispatch:t})=>{let i=e.selection;if(i.ranges.length>1||i.main.empty)return!1;let{from:n,to:r}=i.main,o=[],s=0;for(let a=new hn(e.doc,e.sliceDoc(n,r));!a.next().done;){if(o.length>1e3)return!1;a.value.from==n&&(s=o.length),o.push(j.range(a.value.from,a.value.to))}return t(e.update({selection:j.create(o,s),userEvent:"select.search.matches"})),!0},Tp=or((e,{query:t})=>{let{state:i}=e,{from:n,to:r}=i.selection.main;if(i.readOnly)return!1;let o=t.nextMatch(i,n,n);if(!o)return!1;let s=[],a,h,c=[];if(o.from==n&&o.to==r&&(h=i.toText(t.getReplacement(o)),s.push({from:o.from,to:o.to,insert:h}),o=t.nextMatch(i,o.from,o.to),c.push(it.announce.of(i.phrase("replaced match on line $",i.doc.lineAt(n).number)+"."))),o){let d=s.length==0||s[0].from>=o.to?0:o.to-o.from-h.length;a={anchor:o.from-d,head:o.to-d},c.push(_l(e,o))}return e.dispatch({changes:s,selection:a,scrollIntoView:!!a,effects:c,userEvent:"input.replace"}),!0}),zy=or((e,{query:t})=>{if(e.state.readOnly)return!1;let i=t.matchAll(e.state,1e9).map(r=>{let{from:o,to:s}=r;return{from:o,to:s,insert:t.getReplacement(r)}});if(!i.length)return!1;let n=e.state.phrase("replaced $ matches",i.length)+".";return e.dispatch({changes:i,effects:it.announce.of(n),userEvent:"input.replace.all"}),!0});function Al(e){return e.state.facet(El).createPanel(e)}function kl(e,t){var i,n,r,o;let s=e.selection.main,a=s.empty||s.to>s.from+100?"":e.sliceDoc(s.from,s.to);if(t&&!a)return t;let h=e.facet(El);return new Ep({search:((i=t==null?void 0:t.literal)!==null&&i!==void 0?i:h.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(n=t==null?void 0:t.caseSensitive)!==null&&n!==void 0?n:h.caseSensitive,literal:(r=t==null?void 0:t.literal)!==null&&r!==void 0?r:h.literal,wholeWord:(o=t==null?void 0:t.wholeWord)!==null&&o!==void 0?o:h.wholeWord})}const Ap=e=>{let t=e.state.field(Ei,!1);if(t&&t.panel){let i=Gn(e,Al);if(!i)return!1;let n=i.dom.querySelector("[main-field]");if(n&&n!=e.root.activeElement){let r=kl(e.state,t.query.spec);r.valid&&e.dispatch({effects:sr.of(r)}),n.focus(),n.select()}}else e.dispatch({effects:[Dl.of(!0),t?sr.of(kl(e.state,t.query.spec)):ht.appendConfig.of(Vy)]});return!0},kp=e=>{let t=e.state.field(Ei,!1);if(!t||!t.panel)return!1;let i=Gn(e,Al);return i&&i.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:Dl.of(!1)}),!0},qy=[{key:"Mod-f",run:Ap,scope:"editor search-panel"},{key:"F3",run:bs,shift:Es,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:bs,shift:Es,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:kp,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Zy},{key:"Alt-g",run:by},{key:"Mod-d",run:$y,preventDefault:!0}];class Uy{constructor(t){this.view=t;let i=this.query=t.state.field(Ei).query.spec;this.commit=this.commit.bind(this),this.searchField=Dt("input",{value:i.search,placeholder:De(t,"Find"),"aria-label":De(t,"Find"),class:"cm-textfield",name:"search","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Dt("input",{value:i.replace,placeholder:De(t,"Replace"),"aria-label":De(t,"Replace"),class:"cm-textfield",name:"replace",onchange:this.commit,onkeyup:this.commit}),this.caseField=Dt("input",{type:"checkbox",name:"case",checked:i.caseSensitive,onchange:this.commit}),this.reField=Dt("input",{type:"checkbox",name:"re",checked:i.regexp,onchange:this.commit}),this.wordField=Dt("input",{type:"checkbox",name:"word",checked:i.wholeWord,onchange:this.commit});function n(r,o,s){return Dt("button",{class:"cm-button",name:r,onclick:o,type:"button"},s)}this.dom=Dt("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,n("next",()=>bs(t),[De(t,"next")]),n("prev",()=>Es(t),[De(t,"previous")]),n("select",()=>jy(t),[De(t,"all")]),Dt("label",null,[this.caseField,De(t,"match case")]),Dt("label",null,[this.reField,De(t,"regexp")]),Dt("label",null,[this.wordField,De(t,"by word")]),...t.state.readOnly?[]:[Dt("br"),this.replaceField,n("replace",()=>Tp(t),[De(t,"replace")]),n("replaceAll",()=>zy(t),[De(t,"replace all")]),Dt("button",{name:"close",onclick:()=>kp(t),"aria-label":De(t,"close"),type:"button"},["\xD7"])]])}commit(){let t=new Ep({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});t.eq(this.query)||(this.query=t,this.view.dispatch({effects:sr.of(t)}))}keydown(t){pm(this.view,t,"search-panel")?t.preventDefault():t.keyCode==13&&t.target==this.searchField?(t.preventDefault(),(t.shiftKey?Es:bs)(this.view)):t.keyCode==13&&t.target==this.replaceField&&(t.preventDefault(),Tp(this.view))}update(t){for(let i of t.transactions)for(let n of i.effects)n.is(sr)&&!n.value.eq(this.query)&&this.setQuery(n.value)}setQuery(t){this.query=t,this.searchField.value=t.search,this.replaceField.value=t.replace,this.caseField.checked=t.caseSensitive,this.reField.checked=t.regexp,this.wordField.checked=t.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(El).top}}function De(e,t){return e.state.phrase(t)}const Ds=30,Ts=/[\s\.,:;?!]/;function _l(e,{from:t,to:i}){let n=e.state.doc.lineAt(t),r=e.state.doc.lineAt(i).to,o=Math.max(n.from,t-Ds),s=Math.min(r,i+Ds),a=e.state.sliceDoc(o,s);if(o!=n.from){for(let h=0;h<Ds;h++)if(!Ts.test(a[h+1])&&Ts.test(a[h])){a=a.slice(h);break}}if(s!=r){for(let h=a.length-1;h>a.length-Ds;h--)if(!Ts.test(a[h-1])&&Ts.test(a[h])){a=a.slice(0,h);break}}return it.announce.of(`${e.state.phrase("current match")}. ${a} ${e.state.phrase("on line")} ${n.number}.`)}const Gy=it.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Vy=[Ei,Qi.lowest(Wy),Gy];class _p{constructor(t,i,n){this.state=t,this.pos=i,this.explicit=n,this.abortListeners=[]}tokenBefore(t){let i=Nt(this.state).resolveInner(this.pos,-1);for(;i&&t.indexOf(i.name)<0;)i=i.parent;return i?{from:i.from,to:this.pos,text:this.state.sliceDoc(i.from,this.pos),type:i.type}:null}matchBefore(t){let i=this.state.doc.lineAt(this.pos),n=Math.max(i.from,this.pos-250),r=i.text.slice(n-i.from,this.pos-i.from),o=r.search(Xp(t,!1));return o<0?null:{from:n+o,to:this.pos,text:r.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(t,i){t=="abort"&&this.abortListeners&&this.abortListeners.push(i)}}function Ip(e){let t=Object.keys(e).join(""),i=/\w/.test(t);return i&&(t=t.replace(/\w/g,"")),`[${i?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function Hy(e){let t=Object.create(null),i=Object.create(null);for(let{label:r}of e){t[r[0]]=!0;for(let o=1;o<r.length;o++)i[r[o]]=!0}let n=Ip(t)+Ip(i)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function Lp(e){let t=e.map(r=>typeof r=="string"?{label:r}:r),[i,n]=t.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:Hy(t);return r=>{let o=r.matchBefore(n);return o||r.explicit?{from:o?o.from:r.pos,options:t,validFor:i}:null}}function Jy(e,t){return i=>{for(let n=Nt(i.state).resolveInner(i.pos,-1);n;n=n.parent)if(e.indexOf(n.name)>-1)return null;return t(i)}}class Qp{constructor(t,i,n){this.completion=t,this.source=i,this.match=n}}function Di(e){return e.selection.main.head}function Xp(e,t){var i;let{source:n}=e,r=t&&n[0]!="^",o=n[n.length-1]!="$";return!r&&!o?e:new RegExp(`${r?"^":""}(?:${n})${o?"$":""}`,(i=e.flags)!==null&&i!==void 0?i:e.ignoreCase?"i":"")}function Ky(e,t,i,n){return Object.assign(Object.assign({},e.changeByRange(r=>{if(r==e.selection.main)return{changes:{from:i,to:n,insert:t},range:j.cursor(i+t.length)};let o=n-i;return!r.empty||o&&e.sliceDoc(r.from-o,r.from)!=e.sliceDoc(i,n)?{range:r}:{changes:{from:r.from-o,to:r.from,insert:t},range:j.cursor(r.from-o+t.length)}})),{userEvent:"input.complete"})}function $p(e,t){const i=t.completion.apply||t.completion.label;let n=t.source;typeof i=="string"?e.dispatch(Ky(e.state,i,n.from,n.to)):i(e,t.completion,n.from,n.to)}const Np=new WeakMap;function t1(e){if(!Array.isArray(e))return e;let t=Np.get(e);return t||Np.set(e,t=Lp(e)),t}class e1{constructor(t){this.pattern=t,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let i=0;i<t.length;){let n=Jt(t,i),r=Se(n);this.chars.push(n);let o=t.slice(i,i+r),s=o.toUpperCase();this.folded.push(Jt(s==o?o.toLowerCase():s,0)),i+=r}this.astral=t.length!=this.chars.length}match(t){if(this.pattern.length==0)return[0];if(t.length<this.pattern.length)return null;let{chars:i,folded:n,any:r,precise:o,byWord:s}=this;if(i.length==1){let w=Jt(t,0);return w==i[0]?[0,0,Se(w)]:w==n[0]?[-200,0,Se(w)]:null}let a=t.indexOf(this.pattern);if(a==0)return[0,0,this.pattern.length];let h=i.length,c=0;if(a<0){for(let w=0,D=Math.min(t.length,200);w<D&&c<h;){let T=Jt(t,w);(T==i[c]||T==n[c])&&(r[c++]=w),w+=Se(T)}if(c<h)return null}let d=0,f=0,m=!1,v=0,S=-1,g=-1,y=/[a-z]/.test(t),P=!0;for(let w=0,D=Math.min(t.length,200),T=0;w<D&&f<h;){let _=Jt(t,w);a<0&&(d<h&&_==i[d]&&(o[d++]=w),v<h&&(_==i[v]||_==n[v]?(v==0&&(S=w),g=w+1,v++):v=0));let I,F=_<255?_>=48&&_<=57||_>=97&&_<=122?2:_>=65&&_<=90?1:0:(I=Gs(_))!=I.toLowerCase()?1:I!=I.toUpperCase()?2:0;(!w||F==1&&y||T==0&&F!=0)&&(i[f]==_||n[f]==_&&(m=!0)?s[f++]=w:s.length&&(P=!1)),T=F,w+=Se(_)}return f==h&&s[0]==0&&P?this.result(-100+(m?-200:0),s,t):v==h&&S==0?[-200-t.length,0,g]:a>-1?[-700-t.length,a,a+this.pattern.length]:v==h?[-200+-700-t.length,S,g]:f==h?this.result(-100+(m?-200:0)+-700+(P?0:-1100),s,t):i.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,t)}result(t,i,n){let r=[t-n.length],o=1;for(let s of i){let a=s+(this.astral?Se(Jt(n,s)):1);o>1&&r[o-1]==s?r[o-1]=a:(r[o++]=s,r[o++]=a)}return r}}const Qe=K.define({combine(e){return qe(e,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(t,i)=>t.label.localeCompare(i.label),interactionDelay:75},{defaultKeymap:(t,i)=>t&&i,closeOnBlur:(t,i)=>t&&i,icons:(t,i)=>t&&i,optionClass:(t,i)=>n=>i1(t(n),i(n)),addToOptions:(t,i)=>t.concat(i)})}});function i1(e,t){return e?t?e+" "+t:e:t}function n1(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(i){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),i.type&&n.classList.add(...i.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),n.setAttribute("aria-hidden","true"),n},position:20}),t.push({render(i,n,r){let o=document.createElement("span");o.className="cm-completionLabel";let{label:s}=i,a=0;for(let h=1;h<r.length;){let c=r[h++],d=r[h++];c>a&&o.appendChild(document.createTextNode(s.slice(a,c)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(s.slice(c,d))),f.className="cm-completionMatchedText",a=d}return a<s.length&&o.appendChild(document.createTextNode(s.slice(a))),o},position:50},{render(i){if(!i.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=i.detail,n},position:80}),t.sort((i,n)=>i.position-n.position).map(i=>i.render)}function Fp(e,t,i){if(e<=i)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){let r=Math.floor(t/i);return{from:r*i,to:(r+1)*i}}let n=Math.floor((e-t)/i);return{from:e-(n+1)*i,to:e-n*i}}class r1{constructor(t,i){this.view=t,this.stateField=i,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:a=>this.positionInfo(a),key:this};let n=t.state.field(i),{options:r,selected:o}=n.open,s=t.state.facet(Qe);this.optionContent=n1(s),this.optionClass=s.optionClass,this.range=Fp(r.length,o,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",a=>{for(let h=a.target,c;h&&h!=this.dom;h=h.parentNode)if(h.nodeName=="LI"&&(c=/-(\d+)$/.exec(h.id))&&+c[1]<r.length){$p(t,r[+c[1]]),a.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(r,n.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(t){t.state.field(this.stateField)!=t.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let t=this.view.state.field(this.stateField),i=t.open;if((i.selected>-1&&i.selected<this.range.from||i.selected>=this.range.to)&&(this.range=Fp(i.options.length,i.selected,this.view.state.facet(Qe).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(i.options,t.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(i.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:n}=i.options[i.selected],{info:r}=n;if(!r)return;let o=typeof r=="string"?document.createTextNode(r):r(n);if(!o)return;"then"in o?o.then(s=>{s&&this.view.state.field(this.stateField,!1)==t&&this.addInfoPane(s)}).catch(s=>be(this.view.state,s,"completion info")):this.addInfoPane(o)}}addInfoPane(t){let i=this.info=document.createElement("div");i.className="cm-tooltip cm-completionInfo",i.appendChild(t),this.dom.appendChild(i),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(t){let i=null;for(let n=this.list.firstChild,r=this.range.from;n;n=n.nextSibling,r++)r==t?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),i=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return i&&o1(this.list,i),i}measureInfo(){let t=this.dom.querySelector("[aria-selected]");if(!t||!this.info)return null;let i=this.dom.ownerDocument.defaultView,n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),o=t.getBoundingClientRect();if(o.top>Math.min(i.innerHeight,n.bottom)-10||o.bottom<Math.max(0,n.top)+10)return null;let s=this.view.textDirection==Lt.RTL,a=s,h=!1,c,d="",f="",m=n.left,v=i.innerWidth-n.right;if(a&&m<Math.min(r.width,v)?a=!1:!a&&v<Math.min(r.width,m)&&(a=!0),r.width<=(a?m:v))d=Math.max(0,Math.min(o.top,i.innerHeight-r.height))-n.top+"px",c=Math.min(400,a?m:v)+"px";else{h=!0,c=Math.min(400,(s?n.right:i.innerWidth-n.left)-30)+"px";let S=i.innerHeight-n.bottom;S>=r.height||S>n.top?d=o.bottom-n.top+"px":f=n.bottom-o.top+"px"}return{top:d,bottom:f,maxWidth:c,class:h?s?"left-narrow":"right-narrow":a?"left":"right"}}positionInfo(t){this.info&&(t?(this.info.style.top=t.top,this.info.style.bottom=t.bottom,this.info.style.maxWidth=t.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+t.class):this.info.style.top="-1e6px")}createListBox(t,i,n){const r=document.createElement("ul");r.id=i,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let o=n.from;o<n.to;o++){let{completion:s,match:a}=t[o];const h=r.appendChild(document.createElement("li"));h.id=i+"-"+o,h.setAttribute("role","option");let c=this.optionClass(s);c&&(h.className=c);for(let d of this.optionContent){let f=d(s,this.view.state,a);f&&h.appendChild(f)}}return n.from&&r.classList.add("cm-completionListIncompleteTop"),n.to<t.length&&r.classList.add("cm-completionListIncompleteBottom"),r}}function s1(e){return t=>new r1(t,e)}function o1(e,t){let i=e.getBoundingClientRect(),n=t.getBoundingClientRect();n.top<i.top?e.scrollTop-=i.top-n.top:n.bottom>i.bottom&&(e.scrollTop+=n.bottom-i.bottom)}function Mp(e){return(e.boost||0)*100+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}function l1(e,t){let i=[],n=0;for(let a of e)if(a.hasResult())if(a.result.filter===!1){let h=a.result.getMatch;for(let c of a.result.options){let d=[1e9-n++];if(h)for(let f of h(c))d.push(f);i.push(new Qp(c,a,d))}}else{let h=new e1(t.sliceDoc(a.from,a.to)),c;for(let d of a.result.options)(c=h.match(d.label))&&(d.boost!=null&&(c[0]+=d.boost),i.push(new Qp(d,a,c)))}let r=[],o=null,s=t.facet(Qe).compareCompletions;for(let a of i.sort((h,c)=>c.match[0]-h.match[0]||s(h.completion,c.completion)))!o||o.label!=a.completion.label||o.detail!=a.completion.detail||o.type!=null&&a.completion.type!=null&&o.type!=a.completion.type||o.apply!=a.completion.apply?r.push(a):Mp(a.completion)>Mp(o)&&(r[r.length-1]=a),o=a.completion;return r}class lr{constructor(t,i,n,r,o){this.options=t,this.attrs=i,this.tooltip=n,this.timestamp=r,this.selected=o}setSelected(t,i){return t==this.selected||t>=this.options.length?this:new lr(this.options,Bp(i,t),this.tooltip,this.timestamp,t)}static build(t,i,n,r,o){let s=l1(t,i);if(!s.length)return null;let a=i.facet(Qe).selectOnOpen?0:-1;if(r&&r.selected!=a&&r.selected!=-1){let h=r.options[r.selected].completion;for(let c=0;c<s.length;c++)if(s[c].completion==h){a=c;break}}return new lr(s,Bp(n,a),{pos:t.reduce((h,c)=>c.hasResult()?Math.min(h,c.from):h,1e8),create:s1(Xe),above:o.aboveCursor},r?r.timestamp:Date.now(),a)}map(t){return new lr(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:t.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}class As{constructor(t,i,n){this.active=t,this.id=i,this.open=n}static start(){return new As(u1,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(t){let{state:i}=t,n=i.facet(Qe),r=(n.override||i.languageDataAt("autocomplete",Di(i)).map(t1)).map(s=>(this.active.find(a=>a.source==s)||new xe(s,this.active.some(a=>a.state!=0)?1:0)).update(t,n));r.length==this.active.length&&r.every((s,a)=>s==this.active[a])&&(r=this.active);let o=t.selection||r.some(s=>s.hasResult()&&t.changes.touchesRange(s.from,s.to))||!a1(r,this.active)?lr.build(r,i,this.id,this.open,n):this.open&&t.docChanged?this.open.map(t.changes):this.open;!o&&r.every(s=>s.state!=1)&&r.some(s=>s.hasResult())&&(r=r.map(s=>s.hasResult()?new xe(s.source,0):s));for(let s of t.effects)s.is(Yp)&&(o=o&&o.setSelected(s.value,this.id));return r==this.active&&o==this.open?this:new As(r,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:h1}}function a1(e,t){if(e==t)return!0;for(let i=0,n=0;;){for(;i<e.length&&!e[i].hasResult;)i++;for(;n<t.length&&!t[n].hasResult;)n++;let r=i==e.length,o=n==t.length;if(r||o)return r==o;if(e[i++].result!=t[n++].result)return!1}}const h1={"aria-autocomplete":"list"};function Bp(e,t){let i={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(i["aria-activedescendant"]=e+"-"+t),i}const u1=[];function Il(e){return e.isUserEvent("input.type")?"input":e.isUserEvent("delete.backward")?"delete":null}class xe{constructor(t,i,n=-1){this.source=t,this.state=i,this.explicitPos=n}hasResult(){return!1}update(t,i){let n=Il(t),r=this;n?r=r.handleUserEvent(t,n,i):t.docChanged?r=r.handleChange(t):t.selection&&r.state!=0&&(r=new xe(r.source,0));for(let o of t.effects)if(o.is(Ll))r=new xe(r.source,1,o.value?Di(t.state):-1);else if(o.is(ks))r=new xe(r.source,0);else if(o.is(Rp))for(let s of o.value)s.source==r.source&&(r=s);return r}handleUserEvent(t,i,n){return i=="delete"||!n.activateOnTyping?this.map(t.changes):new xe(this.source,1)}handleChange(t){return t.changes.touchesRange(Di(t.startState))?new xe(this.source,0):this.map(t.changes)}map(t){return t.empty||this.explicitPos<0?this:new xe(this.source,this.state,t.mapPos(this.explicitPos))}}class ar extends xe{constructor(t,i,n,r,o){super(t,2,i),this.result=n,this.from=r,this.to=o}hasResult(){return!0}handleUserEvent(t,i,n){var r;let o=t.changes.mapPos(this.from),s=t.changes.mapPos(this.to,1),a=Di(t.state);if((this.explicitPos<0?a<=o:a<this.from)||a>s||i=="delete"&&Di(t.startState)==this.from)return new xe(this.source,i=="input"&&n.activateOnTyping?1:0);let h=this.explicitPos<0?-1:t.changes.mapPos(this.explicitPos),c;return c1(this.result.validFor,t.state,o,s)?new ar(this.source,h,this.result,o,s):this.result.update&&(c=this.result.update(this.result,o,s,new _p(t.state,a,h>=0)))?new ar(this.source,h,c,c.from,(r=c.to)!==null&&r!==void 0?r:Di(t.state)):new xe(this.source,1,h)}handleChange(t){return t.changes.touchesRange(this.from,this.to)?new xe(this.source,0):this.map(t.changes)}map(t){return t.empty?this:new ar(this.source,this.explicitPos<0?-1:t.mapPos(this.explicitPos),this.result,t.mapPos(this.from),t.mapPos(this.to,1))}}function c1(e,t,i,n){if(!e)return!1;let r=t.sliceDoc(i,n);return typeof e=="function"?e(r,i,n,t):Xp(e,!0).test(r)}const Ll=ht.define(),ks=ht.define(),Rp=ht.define({map(e,t){return e.map(i=>i.map(t))}}),Yp=ht.define(),Xe=jt.define({create(){return As.start()},update(e,t){return e.update(t)},provide:e=>[qo.from(e,t=>t.tooltip),it.contentAttributes.from(e,t=>t.attrs)]});function _s(e,t="option"){return i=>{let n=i.state.field(Xe,!1);if(!n||!n.open||Date.now()-n.open.timestamp<i.state.facet(Qe).interactionDelay)return!1;let r=1,o;t=="page"&&(o=Hm(i,n.open.tooltip))&&(r=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:s}=n.open.options,a=n.open.selected>-1?n.open.selected+r*(e?1:-1):e?0:s-1;return a<0?a=t=="page"?0:s-1:a>=s&&(a=t=="page"?s-1:0),i.dispatch({effects:Yp.of(a)}),!0}}const p1=e=>{let t=e.state.field(Xe,!1);return e.state.readOnly||!t||!t.open||t.open.selected<0||Date.now()-t.open.timestamp<e.state.facet(Qe).interactionDelay?!1:($p(e,t.open.options[t.open.selected]),!0)},d1=e=>e.state.field(Xe,!1)?(e.dispatch({effects:Ll.of(!0)}),!0):!1,f1=e=>{let t=e.state.field(Xe,!1);return!t||!t.active.some(i=>i.state!=0)?!1:(e.dispatch({effects:ks.of(null)}),!0)};class m1{constructor(t,i){this.active=t,this.context=i,this.time=Date.now(),this.updates=[],this.done=void 0}}const Wp=50,g1=50,O1=1e3,y1=Bt.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let t of e.state.field(Xe).active)t.state==1&&this.startQuery(t)}update(e){let t=e.state.field(Xe);if(!e.selectionSet&&!e.docChanged&&e.startState.field(Xe)==t)return;let i=e.transactions.some(n=>(n.selection||n.docChanged)&&!Il(n));for(let n=0;n<this.running.length;n++){let r=this.running[n];if(i||r.updates.length+e.transactions.length>g1&&Date.now()-r.time>O1){for(let o of r.context.abortListeners)try{o()}catch(s){be(this.view.state,s)}r.context.abortListeners=null,this.running.splice(n--,1)}else r.updates.push(...e.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=t.active.some(n=>n.state==1&&!this.running.some(r=>r.active.source==n.source))?setTimeout(()=>this.startUpdate(),Wp):-1,this.composing!=0)for(let n of e.transactions)Il(n)=="input"?this.composing=2:this.composing==2&&n.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:e}=this.view,t=e.field(Xe);for(let i of t.active)i.state==1&&!this.running.some(n=>n.active.source==i.source)&&this.startQuery(i)}startQuery(e){let{state:t}=this.view,i=Di(t),n=new _p(t,i,e.explicitPos==i),r=new m1(e,n);this.running.push(r),Promise.resolve(e.source(n)).then(o=>{r.context.aborted||(r.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:ks.of(null)}),be(this.view.state,o)})}scheduleAccept(){this.running.every(e=>e.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),Wp))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],i=this.view.state.facet(Qe);for(let n=0;n<this.running.length;n++){let r=this.running[n];if(r.done===void 0)continue;if(this.running.splice(n--,1),r.done){let s=new ar(r.active.source,r.active.explicitPos,r.done,r.done.from,(e=r.done.to)!==null&&e!==void 0?e:Di(r.updates.length?r.updates[0].startState:this.view.state));for(let a of r.updates)s=s.update(a,i);if(s.hasResult()){t.push(s);continue}}let o=this.view.state.field(Xe).active.find(s=>s.source==r.active.source);if(o&&o.state==1)if(r.done==null){let s=new xe(r.active.source,0);for(let a of r.updates)s=s.update(a,i);s.state!=1&&t.push(s)}else this.startQuery(o)}t.length&&this.view.dispatch({effects:Rp.of(t)})}},{eventHandlers:{blur(){let e=this.view.state.field(Xe,!1);e&&e.tooltip&&this.view.state.facet(Qe).closeOnBlur&&this.view.dispatch({effects:ks.of(null)})},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Ll.of(!1)}),20),this.composing=0}}}),jp=it.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:`${400}px`,boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:`${30}px`},".cm-completionInfo.cm-completionInfo-right-narrow":{left:`${30}px`},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class x1{constructor(t,i,n,r){this.field=t,this.line=i,this.from=n,this.to=r}}class Ql{constructor(t,i,n){this.field=t,this.from=i,this.to=n}map(t){let i=t.mapPos(this.from,-1,Kt.TrackDel),n=t.mapPos(this.to,1,Kt.TrackDel);return i==null||n==null?null:new Ql(this.field,i,n)}}class Xl{constructor(t,i){this.lines=t,this.fieldPositions=i}instantiate(t,i){let n=[],r=[i],o=t.doc.lineAt(i),s=/^\s*/.exec(o.text)[0];for(let h of this.lines){if(n.length){let c=s,d=/^\t*/.exec(h)[0].length;for(let f=0;f<d;f++)c+=t.facet(er);r.push(i+c.length-d),h=c+h.slice(d)}n.push(h),i+=h.length+1}let a=this.fieldPositions.map(h=>new Ql(h.field,r[h.line]+h.from,r[h.line]+h.to));return{text:n,ranges:a}}static parse(t){let i=[],n=[],r=[],o;for(let s of t.split(/\r\n?|\n/)){for(;o=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(s);){let a=o[1]?+o[1]:null,h=o[2]||o[3]||"",c=-1;for(let d=0;d<i.length;d++)(a!=null?i[d].seq==a:h?i[d].name==h:!1)&&(c=d);if(c<0){let d=0;for(;d<i.length&&(a==null||i[d].seq!=null&&i[d].seq<a);)d++;i.splice(d,0,{seq:a,name:h}),c=d;for(let f of r)f.field>=c&&f.field++}r.push(new x1(c,n.length,o.index,o.index+h.length)),s=s.slice(0,o.index)+h+s.slice(o.index+o[0].length)}for(let a;a=/([$#])\\{/.exec(s);){s=s.slice(0,a.index)+a[1]+"{"+s.slice(a.index+a[0].length);for(let h of r)h.line==n.length&&h.from>a.index&&(h.from--,h.to--)}n.push(s)}return new Xl(n,r)}}let v1=nt.widget({widget:new class extends li{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),P1=nt.mark({class:"cm-snippetField"});class dn{constructor(t,i){this.ranges=t,this.active=i,this.deco=nt.set(t.map(n=>(n.from==n.to?v1:P1).range(n.from,n.to)))}map(t){let i=[];for(let n of this.ranges){let r=n.map(t);if(!r)return null;i.push(r)}return new dn(i,this.active)}selectionInsideField(t){return t.ranges.every(i=>this.ranges.some(n=>n.field==this.active&&n.from<=i.from&&n.to>=i.to))}}const hr=ht.define({map(e,t){return e&&e.map(t)}}),C1=ht.define(),ur=jt.define({create(){return null},update(e,t){for(let i of t.effects){if(i.is(hr))return i.value;if(i.is(C1)&&e)return new dn(e.ranges,i.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:e=>it.decorations.from(e,t=>t?t.deco:nt.none)});function $l(e,t){return j.create(e.filter(i=>i.field==t).map(i=>j.range(i.from,i.to)))}function S1(e){let t=Xl.parse(e);return(i,n,r,o)=>{let{text:s,ranges:a}=t.instantiate(i.state,r),h={changes:{from:r,to:o,insert:Ct.of(s)},scrollIntoView:!0};if(a.length&&(h.selection=$l(a,0)),a.length>1){let c=new dn(a,0),d=h.effects=[hr.of(c)];i.state.field(ur,!1)===void 0&&d.push(ht.appendConfig.of([ur,T1,A1,jp]))}i.dispatch(i.state.update(h))}}function Zp(e){return({state:t,dispatch:i})=>{let n=t.field(ur,!1);if(!n||e<0&&n.active==0)return!1;let r=n.active+e,o=e>0&&!n.ranges.some(s=>s.field==r+e);return i(t.update({selection:$l(n.ranges,r),effects:hr.of(o?null:new dn(n.ranges,r))})),!0}}const w1=({state:e,dispatch:t})=>e.field(ur,!1)?(t(e.update({effects:hr.of(null)})),!0):!1,b1=Zp(1),E1=Zp(-1),D1=[{key:"Tab",run:b1,shift:E1},{key:"Escape",run:w1}],zp=K.define({combine(e){return e.length?e[0]:D1}}),T1=Qi.highest(zn.compute([zp],e=>e.facet(zp)));function Ye(e,t){return Object.assign(Object.assign({},t),{apply:S1(e)})}const A1=it.domEventHandlers({mousedown(e,t){let i=t.state.field(ur,!1),n;if(!i||(n=t.posAtCoords({x:e.clientX,y:e.clientY}))==null)return!1;let r=i.ranges.find(o=>o.from<=n&&o.to>=n);return!r||r.field==i.active?!1:(t.dispatch({selection:$l(i.ranges,r.field),effects:hr.of(i.ranges.some(o=>o.field>r.field)?new dn(i.ranges,r.field):null)}),!0)}}),Is={brackets:["(","[","{","'",'"'],before:")]}:;>"},Wi=ht.define({map(e,t){let i=t.mapPos(e,-1,Kt.TrackAfter);return i==null?void 0:i}}),Nl=ht.define({map(e,t){return t.mapPos(e)}}),Fl=new class extends $i{};Fl.startSide=1,Fl.endSide=-1;const qp=jt.define({create(){return wt.empty},update(e,t){if(t.selection){let i=t.state.doc.lineAt(t.selection.main.head).from,n=t.startState.doc.lineAt(t.startState.selection.main.head).from;i!=t.changes.mapPos(n,-1)&&(e=wt.empty)}e=e.map(t.changes);for(let i of t.effects)i.is(Wi)?e=e.update({add:[Fl.range(i.value,i.value+1)]}):i.is(Nl)&&(e=e.update({filter:n=>n!=i.value}));return e}});function k1(){return[I1,qp]}const Ml="()[]{}<>";function Up(e){for(let t=0;t<Ml.length;t+=2)if(Ml.charCodeAt(t)==e)return Ml.charAt(t+1);return Gs(e<128?e:e+1)}function Gp(e,t){return e.languageDataAt("closeBrackets",t)[0]||Is}const _1=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),I1=it.inputHandler.of((e,t,i,n)=>{if((_1?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let r=e.state.selection.main;if(n.length>2||n.length==2&&Se(Jt(n,0))==1||t!=r.from||i!=r.to)return!1;let o=X1(e.state,n);return o?(e.dispatch(o),!0):!1}),L1=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=Gp(e,e.selection.main.head).brackets||Is.brackets,n=null,r=e.changeByRange(o=>{if(o.empty){let s=$1(e.doc,o.head);for(let a of i)if(a==s&&Ls(e.doc,o.head)==Up(Jt(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:j.cursor(o.head-a.length)}}return{range:n=o}});return n||t(e.update(r,{scrollIntoView:!0,userEvent:"delete.backward"})),!n},Q1=[{key:"Backspace",run:L1}];function X1(e,t){let i=Gp(e,e.selection.main.head),n=i.brackets||Is.brackets;for(let r of n){let o=Up(Jt(r,0));if(t==r)return o==r?M1(e,r,n.indexOf(r+r+r)>-1):N1(e,r,o,i.before||Is.before);if(t==o&&Vp(e,e.selection.main.from))return F1(e,r,o)}return null}function Vp(e,t){let i=!1;return e.field(qp).between(0,e.doc.length,n=>{n==t&&(i=!0)}),i}function Ls(e,t){let i=e.sliceString(t,t+2);return i.slice(0,Se(Jt(i,0)))}function $1(e,t){let i=e.sliceString(t-2,t);return Se(Jt(i,0))==i.length?i:i.slice(1)}function N1(e,t,i,n){let r=null,o=e.changeByRange(s=>{if(!s.empty)return{changes:[{insert:t,from:s.from},{insert:i,from:s.to}],effects:Wi.of(s.to+t.length),range:j.range(s.anchor+t.length,s.head+t.length)};let a=Ls(e.doc,s.head);return!a||/\s/.test(a)||n.indexOf(a)>-1?{changes:{insert:t+i,from:s.head},effects:Wi.of(s.head+t.length),range:j.cursor(s.head+t.length)}:{range:r=s}});return r?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function F1(e,t,i){let n=null,r=e.selection.ranges.map(o=>o.empty&&Ls(e.doc,o.head)==i?j.cursor(o.head+i.length):n=o);return n?null:e.update({selection:j.create(r,e.selection.mainIndex),scrollIntoView:!0,effects:e.selection.ranges.map(({from:o})=>Nl.of(o))})}function M1(e,t,i){let n=null,r=e.changeByRange(o=>{if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:t,from:o.to}],effects:Wi.of(o.to+t.length),range:j.range(o.anchor+t.length,o.head+t.length)};let s=o.head,a=Ls(e.doc,s);if(a==t){if(Hp(e,s))return{changes:{insert:t+t,from:s},effects:Wi.of(s+t.length),range:j.cursor(s+t.length)};if(Vp(e,s)){let h=i&&e.sliceDoc(s,s+t.length*3)==t+t+t;return{range:j.cursor(s+t.length*(h?3:1)),effects:Nl.of(s)}}}else{if(i&&e.sliceDoc(s-2*t.length,s)==t+t&&Hp(e,s-2*t.length))return{changes:{insert:t+t+t+t,from:s},effects:Wi.of(s+t.length),range:j.cursor(s+t.length)};if(e.charCategorizer(s)(a)!=It.Word){let h=e.sliceDoc(s-1,s);if(h!=t&&e.charCategorizer(s)(h)!=It.Word&&!B1(e,s,t))return{changes:{insert:t+t,from:s},effects:Wi.of(s+t.length),range:j.cursor(s+t.length)}}}return{range:n=o}});return n?null:e.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function Hp(e,t){let i=Nt(e).resolveInner(t+1);return i.parent&&i.from==t}function B1(e,t,i){let n=Nt(e).resolveInner(t,-1);for(let r=0;r<5;r++){if(e.sliceDoc(n.from,n.from+i.length)==i){let s=n.firstChild;for(;s&&s.from==n.from&&s.to-s.from>i.length;){if(e.sliceDoc(s.to-i.length,s.to)==i)return!1;s=s.firstChild}return!0}let o=n.to==t&&n.parent;if(!o)break;n=o}return!1}function R1(e={}){return[Xe,Qe.of(e),y1,Y1,jp]}const Jp=[{key:"Ctrl-Space",run:d1},{key:"Escape",run:f1},{key:"ArrowDown",run:_s(!0)},{key:"ArrowUp",run:_s(!1)},{key:"PageDown",run:_s(!0,"page")},{key:"PageUp",run:_s(!1,"page")},{key:"Enter",run:p1}],Y1=Qi.highest(zn.computeN([Qe],e=>e.facet(Qe).defaultKeymap?[Jp]:[]));class W1{constructor(t,i,n){this.from=t,this.to=i,this.diagnostic=n}}class ji{constructor(t,i,n){this.diagnostics=t,this.panel=i,this.selected=n}static init(t,i,n){let r=t,o=n.facet(mn).markerFilter;o&&(r=o(r));let s=nt.set(r.map(a=>a.from==a.to||a.from==a.to-1&&n.doc.lineAt(a.from).to==a.from?nt.widget({widget:new K1(a),diagnostic:a}).range(a.from):nt.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity},diagnostic:a}).range(a.from,a.to)),!0);return new ji(s,i,fn(s))}}function fn(e,t=null,i=0){let n=null;return e.between(i,1e9,(r,o,{spec:s})=>{if(!(t&&s.diagnostic!=t))return n=new W1(r,o,s.diagnostic),!1}),n}function j1(e,t){return!!(e.effects.some(i=>i.is(Bl))||e.changes.touchesRange(t.pos))}function Kp(e,t){return e.field(Te,!1)?t:t.concat(ht.appendConfig.of([Te,it.decorations.compute([Te],i=>{let{selected:n,panel:r}=i.field(Te);return!n||!r||n.from==n.to?nt.none:nt.set([z1.range(n.from,n.to)])}),Vm(q1,{hideOn:j1}),ex]))}function Z1(e,t){return{effects:Kp(e,[Bl.of(t)])}}const Bl=ht.define(),Rl=ht.define(),td=ht.define(),Te=jt.define({create(){return new ji(nt.none,null,null)},update(e,t){if(t.docChanged){let i=e.diagnostics.map(t.changes),n=null;if(e.selected){let r=t.changes.mapPos(e.selected.from,1);n=fn(i,e.selected.diagnostic,r)||fn(i,null,r)}e=new ji(i,e.panel,n)}for(let i of t.effects)i.is(Bl)?e=ji.init(i.value,e.panel,t.state):i.is(Rl)?e=new ji(e.diagnostics,i.value?Qs.open:null,e.selected):i.is(td)&&(e=new ji(e.diagnostics,e.panel,i.value));return e},provide:e=>[Vn.from(e,t=>t.panel),it.decorations.from(e,t=>t.diagnostics)]}),z1=nt.mark({class:"cm-lintRange cm-lintRange-active"});function q1(e,t,i){let{diagnostics:n}=e.state.field(Te),r=[],o=2e8,s=0;n.between(t-(i<0?1:0),t+(i>0?1:0),(h,c,{spec:d})=>{t>=h&&t<=c&&(h==c||(t>h||i>0)&&(t<c||i<0))&&(r.push(d.diagnostic),o=Math.min(h,o),s=Math.max(c,s))});let a=e.state.facet(mn).tooltipFilter;return a&&(r=a(r)),r.length?{pos:o,end:s,above:e.state.doc.lineAt(o).to<s,create(){return{dom:U1(e,r)}}}:null}function U1(e,t){return Dt("ul",{class:"cm-tooltip-lint"},t.map(i=>nd(e,i,!1)))}const G1=e=>{let t=e.state.field(Te,!1);(!t||!t.panel)&&e.dispatch({effects:Kp(e.state,[Rl.of(!0)])});let i=Gn(e,Qs.open);return i&&i.dom.querySelector(".cm-panel-lint ul").focus(),!0},ed=e=>{let t=e.state.field(Te,!1);return!t||!t.panel?!1:(e.dispatch({effects:Rl.of(!1)}),!0)},V1=e=>{let t=e.state.field(Te,!1);if(!t)return!1;let i=e.state.selection.main,n=t.diagnostics.iter(i.to+1);return!n.value&&(n=t.diagnostics.iter(0),!n.value||n.from==i.from&&n.to==i.to)?!1:(e.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),!0)},H1=[{key:"Mod-Shift-m",run:G1},{key:"F8",run:V1}],J1=Bt.fromClass(class{constructor(e){this.view=e,this.timeout=-1,this.set=!0;let{delay:t}=e.state.facet(mn);this.lintTime=Date.now()+t,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,t)}run(){let e=Date.now();if(e<this.lintTime-10)setTimeout(this.run,this.lintTime-e);else{this.set=!1;let{state:t}=this.view,{sources:i}=t.facet(mn);Promise.all(i.map(n=>Promise.resolve(n(this.view)))).then(n=>{let r=n.reduce((o,s)=>o.concat(s));this.view.state.doc==t.doc&&this.view.dispatch(Z1(this.view.state,r))},n=>{be(this.view.state,n)})}}update(e){let t=e.state.facet(mn);(e.docChanged||t!=e.startState.facet(mn))&&(this.lintTime=Date.now()+t.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,t.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),mn=K.define({combine(e){return Object.assign({sources:e.map(t=>t.source)},qe(e.map(t=>t.config),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:J1});function id(e){let t=[];if(e)t:for(let{name:i}of e){for(let n=0;n<i.length;n++){let r=i[n];if(/[a-zA-Z]/.test(r)&&!t.some(o=>o.toLowerCase()==r.toLowerCase())){t.push(r);continue t}}t.push("")}return t}function nd(e,t,i){var n;let r=i?id(t.actions):[];return Dt("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},Dt("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage():t.message),(n=t.actions)===null||n===void 0?void 0:n.map((o,s)=>{let a=f=>{f.preventDefault();let m=fn(e.state.field(Te).diagnostics,t);m&&o.apply(e,m.from,m.to)},{name:h}=o,c=r[s]?h.indexOf(r[s]):-1,d=c<0?h:[h.slice(0,c),Dt("u",h.slice(c,c+1)),h.slice(c+1)];return Dt("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${h}${c<0?"":` (access key "${r[s]})"`}.`},d)}),t.source&&Dt("div",{class:"cm-diagnosticSource"},t.source))}class K1 extends li{constructor(t){super(),this.diagnostic=t}eq(t){return t.diagnostic==this.diagnostic}toDOM(){return Dt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class rd{constructor(t,i){this.diagnostic=i,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=nd(t,i,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Qs{constructor(t){this.view=t,this.items=[];let i=r=>{if(r.keyCode==27)ed(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],s=id(o.actions);for(let a=0;a<s.length;a++)if(s[a].toUpperCase().charCodeAt(0)==r.keyCode){let h=fn(this.view.state.field(Te).diagnostics,o);h&&o.actions[a].apply(t,h.from,h.to)}}else return;r.preventDefault()},n=r=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(r.target)&&this.moveSelection(o)};this.list=Dt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:i,onclick:n}),this.dom=Dt("div",{class:"cm-panel-lint"},this.list,Dt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>ed(this.view)},"\xD7")),this.update()}get selectedIndex(){let t=this.view.state.field(Te).selected;if(!t)return-1;for(let i=0;i<this.items.length;i++)if(this.items[i].diagnostic==t.diagnostic)return i;return-1}update(){let{diagnostics:t,selected:i}=this.view.state.field(Te),n=0,r=!1,o=null;for(t.between(0,this.view.state.doc.length,(s,a,{spec:h})=>{let c=-1,d;for(let f=n;f<this.items.length;f++)if(this.items[f].diagnostic==h.diagnostic){c=f;break}c<0?(d=new rd(this.view,h.diagnostic),this.items.splice(n,0,d),r=!0):(d=this.items[c],c>n&&(this.items.splice(n,c-n),r=!0)),i&&d.diagnostic==i.diagnostic?d.dom.hasAttribute("aria-selected")||(d.dom.setAttribute("aria-selected","true"),o=d):d.dom.hasAttribute("aria-selected")&&d.dom.removeAttribute("aria-selected"),n++});n<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new rd(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:s,panel:a})=>{s.top<a.top?this.list.scrollTop-=a.top-s.top:s.bottom>a.bottom&&(this.list.scrollTop+=s.bottom-a.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let t=this.list.firstChild;function i(){let n=t;t=n.nextSibling,n.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;t!=n.dom;)i();t=n.dom.nextSibling}else this.list.insertBefore(n.dom,t);for(;t;)i()}moveSelection(t){if(this.selectedIndex<0)return;let i=this.view.state.field(Te),n=fn(i.diagnostics,this.items[t].diagnostic);!n||this.view.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:td.of(n)})}static open(t){return new Qs(t)}}function tx(e,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(e)}</svg>')`}function Yl(e){return tx(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const ex=it.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Yl("#d11")},".cm-lintRange-warning":{backgroundImage:Yl("orange")},".cm-lintRange-info":{backgroundImage:Yl("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),ix=(()=>[og(),hg(),Dm(),wO(),Vg(),mm(),Pm(),vt.allowMultipleSelections.of(!0),Ng(),Jg(eO,{fallback:!0}),aO(),k1(),R1(),Mm(),Ym(),Lm(),Ty(),zn.of([...Q1,...Cy,...qy,...LO,...qg,...Jp,...H1])])();class Xs{constructor(t,i,n,r,o,s,a,h,c,d=0,f){this.p=t,this.stack=i,this.state=n,this.reducePos=r,this.pos=o,this.score=s,this.buffer=a,this.bufferBase=h,this.curContext=c,this.lookAhead=d,this.parent=f}toString(){return`[${this.stack.filter((t,i)=>i%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(t,i,n=0){let r=t.parser.context;return new Xs(t,[],i,n,n,0,[],0,r?new sd(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(t,i){this.stack.push(this.state,i,this.bufferBase+this.buffer.length),this.state=t}reduce(t){let i=t>>19,n=t&65535,{parser:r}=this.p,o=r.dynamicPrecedence(n);if(o&&(this.score+=o),i==0){this.pushState(r.getGoto(this.state,n,!0),this.reducePos),n<r.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,4,!0),this.reduceContext(n,this.reducePos);return}let s=this.stack.length-(i-1)*3-(t&262144?6:0),a=this.stack[s-2],h=this.stack[s-1],c=this.bufferBase+this.buffer.length-h;if(n<r.minRepeatTerm||t&131072){let d=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,a,d,c+4,!0)}if(t&262144)this.state=this.stack[s];else{let d=this.stack[s-3];this.state=r.getGoto(d,n,!0)}for(;this.stack.length>s;)this.stack.pop();this.reduceContext(n,a)}storeNode(t,i,n,r=4,o=!1){if(t==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let s=this,a=this.buffer.length;if(a==0&&s.parent&&(a=s.bufferBase-s.parent.bufferBase,s=s.parent),a>0&&s.buffer[a-4]==0&&s.buffer[a-1]>-1){if(i==n)return;if(s.buffer[a-2]>=i){s.buffer[a-2]=n;return}}}if(!o||this.pos==n)this.buffer.push(t,i,n,r);else{let s=this.buffer.length;if(s>0&&this.buffer[s-4]!=0)for(;s>0&&this.buffer[s-2]>n;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,r>4&&(r-=4);this.buffer[s]=t,this.buffer[s+1]=i,this.buffer[s+2]=n,this.buffer[s+3]=r}}shift(t,i,n){let r=this.pos;if(t&131072)this.pushState(t&65535,this.pos);else if((t&262144)==0){let o=t,{parser:s}=this.p;(n>this.pos||i<=s.maxNode)&&(this.pos=n,s.stateFlag(o,1)||(this.reducePos=n)),this.pushState(o,r),this.shiftContext(i,r),i<=s.maxNode&&this.buffer.push(i,r,n,4)}else this.pos=n,this.shiftContext(i,r),i<=this.p.parser.maxNode&&this.buffer.push(i,r,n,4)}apply(t,i,n){t&65536?this.reduce(t):this.shift(t,i,n)}useNode(t,i){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=t)&&(this.p.reused.push(t),n++);let r=this.pos;this.reducePos=this.pos=r+t.length,this.pushState(i,r),this.buffer.push(n,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,t,this,this.p.stream.reset(this.pos-t.length)))}split(){let t=this,i=t.buffer.length;for(;i>0&&t.buffer[i-2]>t.reducePos;)i-=4;let n=t.buffer.slice(i),r=t.bufferBase+i;for(;t&&r==t.bufferBase;)t=t.parent;return new Xs(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,r,this.curContext,this.lookAhead,t)}recoverByDelete(t,i){let n=t<=this.p.parser.maxNode;n&&this.storeNode(t,this.pos,i,4),this.storeNode(0,this.pos,i,n?8:4),this.pos=this.reducePos=i,this.score-=190}canShift(t){for(let i=new nx(this);;){let n=this.p.parser.stateSlot(i.state,4)||this.p.parser.hasAction(i.state,t);if((n&65536)==0)return!0;if(n==0)return!1;i.reduce(n)}}recoverByInsert(t){if(this.stack.length>=300)return[];let i=this.p.parser.nextStates(this.state);if(i.length>4<<1||this.stack.length>=120){let r=[];for(let o=0,s;o<i.length;o+=2)(s=i[o+1])!=this.state&&this.p.parser.hasAction(s,t)&&r.push(i[o],s);if(this.stack.length<120)for(let o=0;r.length<4<<1&&o<i.length;o+=2){let s=i[o+1];r.some((a,h)=>h&1&&a==s)||r.push(i[o],s)}i=r}let n=[];for(let r=0;r<i.length&&n.length<4;r+=2){let o=i[r+1];if(o==this.state)continue;let s=this.split();s.pushState(o,this.pos),s.storeNode(0,s.pos,s.pos,4,!0),s.shiftContext(i[r],this.pos),s.score-=200,n.push(s)}return n}forceReduce(){let t=this.p.parser.stateSlot(this.state,5);if((t&65536)==0)return!1;let{parser:i}=this.p;if(!i.validAction(this.state,t)){let n=t>>19,r=t&65535,o=this.stack.length-n*3;if(o<0||i.getGoto(this.stack[o],r,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:t}=this.p;return t.data[t.stateSlot(this.state,1)]==65535&&!t.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(t){if(this.state!=t.state||this.stack.length!=t.stack.length)return!1;for(let i=0;i<this.stack.length;i+=3)if(this.stack[i]!=t.stack[i])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(t){return this.p.parser.dialect.flags[t]}shiftContext(t,i){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,t,this,this.p.stream.reset(i)))}reduceContext(t,i){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,t,this,this.p.stream.reset(i)))}emitContext(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(t){if(t!=this.curContext.context){let i=new sd(this.curContext.tracker,t);i.hash!=this.curContext.hash&&this.emitContext(),this.curContext=i}}setLookAhead(t){t>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=t)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class sd{constructor(t,i){this.tracker=t,this.context=i,this.hash=t.strict?t.hash(i):0}}var od;(function(e){e[e.Insert=200]="Insert",e[e.Delete=190]="Delete",e[e.Reduce=100]="Reduce",e[e.MaxNext=4]="MaxNext",e[e.MaxInsertStackDepth=300]="MaxInsertStackDepth",e[e.DampenInsertStackDepth=120]="DampenInsertStackDepth"})(od||(od={}));class nx{constructor(t){this.start=t,this.state=t.state,this.stack=t.stack,this.base=this.stack.length}reduce(t){let i=t&65535,n=t>>19;n==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(n-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],i,!0);this.state=r}}class $s{constructor(t,i,n){this.stack=t,this.pos=i,this.index=n,this.buffer=t.buffer,this.index==0&&this.maybeNext()}static create(t,i=t.bufferBase+t.buffer.length){return new $s(t,i,i-t.bufferBase)}maybeNext(){let t=this.stack.parent;t!=null&&(this.index=this.stack.bufferBase-t.bufferBase,this.stack=t,this.buffer=t.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new $s(this.stack,this.pos,this.index)}}class Ns{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const ld=new Ns;class rx{constructor(t,i){this.input=t,this.ranges=i,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=ld,this.rangeIndex=0,this.pos=this.chunkPos=i[0].from,this.range=i[0],this.end=i[i.length-1].to,this.readNext()}resolveOffset(t,i){let n=this.range,r=this.rangeIndex,o=this.pos+t;for(;o<n.from;){if(!r)return null;let s=this.ranges[--r];o-=n.from-s.to,n=s}for(;i<0?o>n.to:o>=n.to;){if(r==this.ranges.length-1)return null;let s=this.ranges[++r];o+=s.from-n.to,n=s}return o}clipPos(t){if(t>=this.range.from&&t<this.range.to)return t;for(let i of this.ranges)if(i.to>t)return Math.max(t,i.from);return this.end}peek(t){let i=this.chunkOff+t,n,r;if(i>=0&&i<this.chunk.length)n=this.pos+t,r=this.chunk.charCodeAt(i);else{let o=this.resolveOffset(t,1);if(o==null)return-1;if(n=o,n>=this.chunk2Pos&&n<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(n-this.chunk2Pos);else{let s=this.rangeIndex,a=this.range;for(;a.to<=n;)a=this.ranges[++s];this.chunk2=this.input.chunk(this.chunk2Pos=n),n+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-n)),r=this.chunk2.charCodeAt(0)}}return n>=this.token.lookAhead&&(this.token.lookAhead=n+1),r}acceptToken(t,i=0){let n=i?this.resolveOffset(i,-1):this.pos;if(n==null||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=t,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:t,chunkPos:i}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=t,this.chunk2Pos=i,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let t=this.input.chunk(this.pos),i=this.pos+t.length;this.chunk=i>this.range.to?t.slice(0,this.range.to-this.pos):t,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(t=1){for(this.chunkOff+=t;this.pos+t>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();t-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=t,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(t,i){if(i?(this.token=i,i.start=t,i.lookAhead=t+1,i.value=i.extended=-1):this.token=ld,this.pos!=t){if(this.pos=t,t==this.end)return this.setDone(),this;for(;t<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;t>=this.range.to;)this.range=this.ranges[++this.rangeIndex];t>=this.chunkPos&&t<this.chunkPos+this.chunk.length?this.chunkOff=t-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(t,i){if(t>=this.chunkPos&&i<=this.chunkPos+this.chunk.length)return this.chunk.slice(t-this.chunkPos,i-this.chunkPos);if(t>=this.chunk2Pos&&i<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(t-this.chunk2Pos,i-this.chunk2Pos);if(t>=this.range.from&&i<=this.range.to)return this.input.read(t,i);let n="";for(let r of this.ranges){if(r.from>=i)break;r.to>t&&(n+=this.input.read(Math.max(r.from,t),Math.min(r.to,i)))}return n}}class Fs{constructor(t,i){this.data=t,this.id=i}token(t,i){sx(this.data,t,i,this.id)}}Fs.prototype.contextual=Fs.prototype.fallback=Fs.prototype.extend=!1;class cr{constructor(t,i={}){this.token=t,this.contextual=!!i.contextual,this.fallback=!!i.fallback,this.extend=!!i.extend}}function sx(e,t,i,n){let r=0,o=1<<n,{parser:s}=i.p,{dialect:a}=s;t:for(;(o&e[r])!=0;){let h=e[r+1];for(let m=r+3;m<h;m+=2)if((e[m+1]&o)>0){let v=e[m];if(a.allows(v)&&(t.token.value==-1||t.token.value==v||s.overrides(v,t.token.value))){t.acceptToken(v);break}}let c=t.next,d=0,f=e[r+2];if(t.next<0&&f>d&&e[h+f*3-3]==65535){r=e[h+f*3-1];continue t}for(;d<f;){let m=d+f>>1,v=h+m+(m<<1),S=e[v],g=e[v+1];if(c<S)f=m;else if(c>=g)d=m+1;else{r=e[v+2],t.advance();continue t}}break}}function Ms(e,t=Uint16Array){if(typeof e!="string")return e;let i=null;for(let n=0,r=0;n<e.length;){let o=0;for(;;){let s=e.charCodeAt(n++),a=!1;if(s==126){o=65535;break}s>=92&&s--,s>=34&&s--;let h=s-32;if(h>=46&&(h-=46,a=!0),o+=h,a)break;o*=46}i?i[r++]=o:i=new t(o)}return i}const We=typeof process<"u"&&process.env&&/\bparse\b/.test(process.env.LOG);let Wl=null;var ad;(function(e){e[e.Margin=25]="Margin"})(ad||(ad={}));function hd(e,t,i){let n=e.cursor(Gt.IncludeAnonymous);for(n.moveTo(t);;)if(!(i<0?n.childBefore(t):n.childAfter(t)))for(;;){if((i<0?n.to<t:n.from>t)&&!n.type.isError)return i<0?Math.max(0,Math.min(n.to-1,t-25)):Math.min(e.length,Math.max(n.from+1,t+25));if(i<0?n.prevSibling():n.nextSibling())break;if(!n.parent())return i<0?0:e.length}}class ox{constructor(t,i){this.fragments=t,this.nodeSet=i,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let t=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(t){for(this.safeFrom=t.openStart?hd(t.tree,t.from+t.offset,1)-t.offset:t.from,this.safeTo=t.openEnd?hd(t.tree,t.to+t.offset,-1)-t.offset:t.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(t.tree),this.start.push(-t.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(t){if(t<this.nextStart)return null;for(;this.fragment&&this.safeTo<=t;)this.nextFragment();if(!this.fragment)return null;for(;;){let i=this.trees.length-1;if(i<0)return this.nextFragment(),null;let n=this.trees[i],r=this.index[i];if(r==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=n.children[r],s=this.start[i]+n.positions[r];if(s>t)return this.nextStart=s,null;if(o instanceof Rt){if(s==t){if(s<this.safeFrom)return null;let a=s+o.length;if(a<=this.safeTo){let h=o.prop(gt.lookAhead);if(!h||a+h<this.fragment.to)return o}}this.index[i]++,s+o.length>=Math.max(this.safeFrom,t)&&(this.trees.push(o),this.start.push(s),this.index.push(0))}else this.index[i]++,this.nextStart=s+o.length}}}class lx{constructor(t,i){this.stream=i,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=t.tokenizers.map(n=>new Ns)}getActions(t){let i=0,n=null,{parser:r}=t.p,{tokenizers:o}=r,s=r.stateSlot(t.state,3),a=t.curContext?t.curContext.hash:0,h=0;for(let c=0;c<o.length;c++){if((1<<c&s)==0)continue;let d=o[c],f=this.tokens[c];if(!(n&&!d.fallback)&&((d.contextual||f.start!=t.pos||f.mask!=s||f.context!=a)&&(this.updateCachedToken(f,d,t),f.mask=s,f.context=a),f.lookAhead>f.end+25&&(h=Math.max(f.lookAhead,h)),f.value!=0)){let m=i;if(f.extended>-1&&(i=this.addActions(t,f.extended,f.end,i)),i=this.addActions(t,f.value,f.end,i),!d.extend&&(n=f,i>m))break}}for(;this.actions.length>i;)this.actions.pop();return h&&t.setLookAhead(h),!n&&t.pos==this.stream.end&&(n=new Ns,n.value=t.p.parser.eofTerm,n.start=n.end=t.pos,i=this.addActions(t,n.value,n.end,i)),this.mainToken=n,this.actions}getMainToken(t){if(this.mainToken)return this.mainToken;let i=new Ns,{pos:n,p:r}=t;return i.start=n,i.end=Math.min(n+1,r.stream.end),i.value=n==r.stream.end?r.parser.eofTerm:0,i}updateCachedToken(t,i,n){let r=this.stream.clipPos(n.pos);if(i.token(this.stream.reset(r,t),n),t.value>-1){let{parser:o}=n.p;for(let s=0;s<o.specialized.length;s++)if(o.specialized[s]==t.value){let a=o.specializers[s](this.stream.read(t.start,t.end),n);if(a>=0&&n.p.parser.dialect.allows(a>>1)){(a&1)==0?t.value=a>>1:t.extended=a>>1;break}}}else t.value=0,t.end=this.stream.clipPos(r+1)}putAction(t,i,n,r){for(let o=0;o<r;o+=3)if(this.actions[o]==t)return r;return this.actions[r++]=t,this.actions[r++]=i,this.actions[r++]=n,r}addActions(t,i,n,r){let{state:o}=t,{parser:s}=t.p,{data:a}=s;for(let h=0;h<2;h++)for(let c=s.stateSlot(o,h?2:1);;c+=3){if(a[c]==65535)if(a[c+1]==1)c=ui(a,c+2);else{r==0&&a[c+1]==2&&(r=this.putAction(ui(a,c+2),i,n,r));break}a[c]==i&&(r=this.putAction(ui(a,c+1),i,n,r))}return r}}var ud;(function(e){e[e.Distance=5]="Distance",e[e.MaxRemainingPerStep=3]="MaxRemainingPerStep",e[e.MinBufferLengthPrune=500]="MinBufferLengthPrune",e[e.ForceReduceLimit=10]="ForceReduceLimit",e[e.CutDepth=15e3]="CutDepth",e[e.CutTo=9e3]="CutTo"})(ud||(ud={}));class ax{constructor(t,i,n,r){this.parser=t,this.input=i,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new rx(i,r),this.tokens=new lx(t,this.stream),this.topTerm=t.top[1];let{from:o}=r[0];this.stacks=[Xs.start(this,t.top[0],o)],this.fragments=n.length&&this.stream.end-o>t.bufferLength*4?new ox(n,t.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let t=this.stacks,i=this.minStackPos,n=this.stacks=[],r,o;for(let s=0;s<t.length;s++){let a=t[s];for(;;){if(this.tokens.mainToken=null,a.pos>i)n.push(a);else{if(this.advanceStack(a,n,t))continue;{r||(r=[],o=[]),r.push(a);let h=this.tokens.getMainToken(a);o.push(h.value,h.end)}}break}}if(!n.length){let s=r&&cx(r);if(s)return this.stackToTree(s);if(this.parser.strict)throw We&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+i);this.recovering||(this.recovering=5)}if(this.recovering&&r){let s=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,o,n);if(s)return this.stackToTree(s.forceAll())}if(this.recovering){let s=this.recovering==1?1:this.recovering*3;if(n.length>s)for(n.sort((a,h)=>h.score-a.score);n.length>s;)n.pop();n.some(a=>a.reducePos>i)&&this.recovering--}else if(n.length>1){t:for(let s=0;s<n.length-1;s++){let a=n[s];for(let h=s+1;h<n.length;h++){let c=n[h];if(a.sameState(c)||a.buffer.length>500&&c.buffer.length>500)if((a.score-c.score||a.buffer.length-c.buffer.length)>0)n.splice(h--,1);else{n.splice(s--,1);continue t}}}}this.minStackPos=n[0].pos;for(let s=1;s<n.length;s++)n[s].pos<this.minStackPos&&(this.minStackPos=n[s].pos);return null}stopAt(t){if(this.stoppedAt!=null&&this.stoppedAt<t)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=t}advanceStack(t,i,n){let r=t.pos,{parser:o}=this,s=We?this.stackID(t)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return t.forceReduce()?t:null;if(this.fragments){let c=t.curContext&&t.curContext.tracker.strict,d=c?t.curContext.hash:0;for(let f=this.fragments.nodeAt(r);f;){let m=this.parser.nodeSet.types[f.type.id]==f.type?o.getGoto(t.state,f.type.id):-1;if(m>-1&&f.length&&(!c||(f.prop(gt.contextHash)||0)==d))return t.useNode(f,m),We&&console.log(s+this.stackID(t)+` (via reuse of ${o.getName(f.type.id)})`),!0;if(!(f instanceof Rt)||f.children.length==0||f.positions[0]>0)break;let v=f.children[0];if(v instanceof Rt&&f.positions[0]==0)f=v;else break}}let a=o.stateSlot(t.state,4);if(a>0)return t.reduce(a),We&&console.log(s+this.stackID(t)+` (via always-reduce ${o.getName(a&65535)})`),!0;if(t.stack.length>=15e3)for(;t.stack.length>9e3&&t.forceReduce(););let h=this.tokens.getActions(t);for(let c=0;c<h.length;){let d=h[c++],f=h[c++],m=h[c++],v=c==h.length||!n,S=v?t:t.split();if(S.apply(d,f,m),We&&console.log(s+this.stackID(S)+` (via ${(d&65536)==0?"shift":`reduce of ${o.getName(d&65535)}`} for ${o.getName(f)} @ ${r}${S==t?"":", split"})`),v)return!0;S.pos>r?i.push(S):n.push(S)}return!1}advanceFully(t,i){let n=t.pos;for(;;){if(!this.advanceStack(t,null,null))return!1;if(t.pos>n)return cd(t,i),!0}}runRecovery(t,i,n){let r=null,o=!1;for(let s=0;s<t.length;s++){let a=t[s],h=i[s<<1],c=i[(s<<1)+1],d=We?this.stackID(a)+" -> ":"";if(a.deadEnd&&(o||(o=!0,a.restart(),We&&console.log(d+this.stackID(a)+" (restarted)"),this.advanceFully(a,n))))continue;let f=a.split(),m=d;for(let v=0;f.forceReduce()&&v<10&&(We&&console.log(m+this.stackID(f)+" (via force-reduce)"),!this.advanceFully(f,n));v++)We&&(m=this.stackID(f)+" -> ");for(let v of a.recoverByInsert(h))We&&console.log(d+this.stackID(v)+" (via recover-insert)"),this.advanceFully(v,n);this.stream.end>a.pos?(c==a.pos&&(c++,h=0),a.recoverByDelete(h,c),We&&console.log(d+this.stackID(a)+` (via recover-delete ${this.parser.getName(h)})`),cd(a,n)):(!r||r.score<a.score)&&(r=a)}return r}stackToTree(t){return t.close(),Rt.build({buffer:$s.create(t),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:t.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(t){let i=(Wl||(Wl=new WeakMap)).get(t);return i||Wl.set(t,i=String.fromCodePoint(this.nextStackID++)),i+t}}function cd(e,t){for(let i=0;i<t.length;i++){let n=t[i];if(n.pos==e.pos&&n.sameState(e)){t[i].score<e.score&&(t[i]=e);return}}t.push(e)}class hx{constructor(t,i,n){this.source=t,this.flags=i,this.disabled=n}allows(t){return!this.disabled||this.disabled[t]==0}}const jl=e=>e;class ux{constructor(t){this.start=t.start,this.shift=t.shift||jl,this.reduce=t.reduce||jl,this.reuse=t.reuse||jl,this.hash=t.hash||(()=>0),this.strict=t.strict!==!1}}class Bs extends rc{constructor(t){if(super(),this.wrappers=[],t.version!=14)throw new RangeError(`Parser version (${t.version}) doesn't match runtime version (${14})`);let i=t.nodeNames.split(" ");this.minRepeatTerm=i.length;for(let a=0;a<t.repeatNodeCount;a++)i.push("");let n=Object.keys(t.topRules).map(a=>t.topRules[a][1]),r=[];for(let a=0;a<i.length;a++)r.push([]);function o(a,h,c){r[a].push([h,h.deserialize(String(c))])}if(t.nodeProps)for(let a of t.nodeProps){let h=a[0];typeof h=="string"&&(h=gt[h]);for(let c=1;c<a.length;){let d=a[c++];if(d>=0)o(d,h,a[c++]);else{let f=a[c+-d];for(let m=-d;m>0;m--)o(a[c++],h,f);c++}}}this.nodeSet=new Ko(i.map((a,h)=>Oe.define({name:h>=this.minRepeatTerm?void 0:a,id:h,props:r[h],top:n.indexOf(h)>-1,error:h==0,skipped:t.skippedNodes&&t.skippedNodes.indexOf(h)>-1}))),t.propSources&&(this.nodeSet=this.nodeSet.extend(...t.propSources)),this.strict=!1,this.bufferLength=Ku;let s=Ms(t.tokenData);this.context=t.context,this.specializerSpecs=t.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(dd),this.states=Ms(t.states,Uint32Array),this.data=Ms(t.stateData),this.goto=Ms(t.goto),this.maxTerm=t.maxTerm,this.tokenizers=t.tokenizers.map(a=>typeof a=="number"?new Fs(s,a):a),this.topRules=t.topRules,this.dialects=t.dialects||{},this.dynamicPrecedences=t.dynamicPrecedences||null,this.tokenPrecTable=t.tokenPrec,this.termNames=t.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(t,i,n){let r=new ax(this,t,i,n);for(let o of this.wrappers)r=o(r,t,i,n);return r}getGoto(t,i,n=!1){let r=this.goto;if(i>=r[0])return-1;for(let o=r[i+1];;){let s=r[o++],a=s&1,h=r[o++];if(a&&n)return h;for(let c=o+(s>>1);o<c;o++)if(r[o]==t)return h;if(a)return-1}}hasAction(t,i){let n=this.data;for(let r=0;r<2;r++)for(let o=this.stateSlot(t,r?2:1),s;;o+=3){if((s=n[o])==65535)if(n[o+1]==1)s=n[o=ui(n,o+2)];else{if(n[o+1]==2)return ui(n,o+2);break}if(s==i||s==0)return ui(n,o+1)}return 0}stateSlot(t,i){return this.states[t*6+i]}stateFlag(t,i){return(this.stateSlot(t,0)&i)>0}validAction(t,i){if(i==this.stateSlot(t,4))return!0;for(let n=this.stateSlot(t,1);;n+=3){if(this.data[n]==65535)if(this.data[n+1]==1)n=ui(this.data,n+2);else return!1;if(i==ui(this.data,n+1))return!0}}nextStates(t){let i=[];for(let n=this.stateSlot(t,1);;n+=3){if(this.data[n]==65535)if(this.data[n+1]==1)n=ui(this.data,n+2);else break;if((this.data[n+2]&1)==0){let r=this.data[n+1];i.some((o,s)=>s&1&&o==r)||i.push(this.data[n],r)}}return i}overrides(t,i){let n=pd(this.data,this.tokenPrecTable,i);return n<0||pd(this.data,this.tokenPrecTable,t)<n}configure(t){let i=Object.assign(Object.create(Bs.prototype),this);if(t.props&&(i.nodeSet=this.nodeSet.extend(...t.props)),t.top){let n=this.topRules[t.top];if(!n)throw new RangeError(`Invalid top rule name ${t.top}`);i.top=n}return t.tokenizers&&(i.tokenizers=this.tokenizers.map(n=>{let r=t.tokenizers.find(o=>o.from==n);return r?r.to:n})),t.specializers&&(i.specializers=this.specializers.slice(),i.specializerSpecs=this.specializerSpecs.map((n,r)=>{let o=t.specializers.find(a=>a.from==n.external);if(!o)return n;let s=Object.assign(Object.assign({},n),{external:o.to});return i.specializers[r]=dd(s),s})),t.contextTracker&&(i.context=t.contextTracker),t.dialect&&(i.dialect=this.parseDialect(t.dialect)),t.strict!=null&&(i.strict=t.strict),t.wrap&&(i.wrappers=i.wrappers.concat(t.wrap)),t.bufferLength!=null&&(i.bufferLength=t.bufferLength),i}hasWrappers(){return this.wrappers.length>0}getName(t){return this.termNames?this.termNames[t]:String(t<=this.maxNode&&this.nodeSet.types[t].name||t)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(t){let i=this.dynamicPrecedences;return i==null?0:i[t]||0}parseDialect(t){let i=Object.keys(this.dialects),n=i.map(()=>!1);if(t)for(let o of t.split(" ")){let s=i.indexOf(o);s>=0&&(n[s]=!0)}let r=null;for(let o=0;o<i.length;o++)if(!n[o])for(let s=this.dialects[i[o]],a;(a=this.data[s++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[a]=1;return new hx(t,n,r)}static deserialize(t){return new Bs(t)}}function ui(e,t){return e[t]|e[t+1]<<16}function pd(e,t,i){for(let n=t,r;(r=e[n])!=65535;n++)if(r==i)return n-t;return-1}function cx(e){let t=null;for(let i of e){let n=i.p.stoppedAt;(i.pos==i.p.stream.end||n!=null&&i.pos>n)&&i.p.parser.stateFlag(i.state,2)&&(!t||t.score<i.score)&&(t=i)}return t}function dd(e){if(e.external){let t=e.extend?1:0;return(i,n)=>e.external(i,n)<<1|t}return e.get}const px=1,fd=281,md=2,dx=3,Rs=282,fx=4,mx=283,gd=284,gx=286,Ox=287,yx=5,xx=6,vx=1,Px=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],Od=125,Cx=123,Sx=59,yd=47,wx=42,bx=43,Ex=45,Dx=36,Tx=96,Ax=92,kx=new ux({start:!1,shift(e,t){return t==yx||t==xx||t==gx?e:t==Ox},strict:!1}),_x=new cr((e,t)=>{let{next:i}=e;(i==Od||i==-1||t.context)&&t.canShift(gd)&&e.acceptToken(gd)},{contextual:!0,fallback:!0}),Ix=new cr((e,t)=>{let{next:i}=e,n;Px.indexOf(i)>-1||i==yd&&((n=e.peek(1))==yd||n==wx)||i!=Od&&i!=Sx&&i!=-1&&!t.context&&t.canShift(fd)&&e.acceptToken(fd)},{contextual:!0}),Lx=new cr((e,t)=>{let{next:i}=e;if((i==bx||i==Ex)&&(e.advance(),i==e.next)){e.advance();let n=!t.context&&t.canShift(md);e.acceptToken(n?md:dx)}},{contextual:!0}),Qx=new cr(e=>{for(let t=!1,i=0;;i++){let{next:n}=e;if(n<0){i&&e.acceptToken(Rs);break}else if(n==Tx){i?e.acceptToken(Rs):e.acceptToken(mx,1);break}else if(n==Cx&&t){i==1?e.acceptToken(fx,1):e.acceptToken(Rs,-1);break}else if(n==10&&i){e.advance(),e.acceptToken(Rs);break}else n==Ax&&e.advance();t=n==Dx,e.advance()}}),Xx=new cr((e,t)=>{if(!(e.next!=101||!t.dialectEnabled(vx))){e.advance();for(let i=0;i<6;i++){if(e.next!="xtends".charCodeAt(i))return;e.advance()}e.next>=57&&e.next<=65||e.next>=48&&e.next<=90||e.next==95||e.next>=97&&e.next<=122||e.next>160||e.acceptToken(px)}}),$x=oc({"get set async static":N.modifier,"for while do if else switch try catch finally return throw break continue default case":N.controlKeyword,"in of await yield void typeof delete instanceof":N.operatorKeyword,"let var const function class extends":N.definitionKeyword,"import export from":N.moduleKeyword,"with debugger as new":N.keyword,TemplateString:N.special(N.string),super:N.atom,BooleanLiteral:N.bool,this:N.self,null:N.null,Star:N.modifier,VariableName:N.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":N.function(N.variableName),VariableDefinition:N.definition(N.variableName),Label:N.labelName,PropertyName:N.propertyName,PrivatePropertyName:N.special(N.propertyName),"CallExpression/MemberExpression/PropertyName":N.function(N.propertyName),"FunctionDeclaration/VariableDefinition":N.function(N.definition(N.variableName)),"ClassDeclaration/VariableDefinition":N.definition(N.className),PropertyDefinition:N.definition(N.propertyName),PrivatePropertyDefinition:N.definition(N.special(N.propertyName)),UpdateOp:N.updateOperator,LineComment:N.lineComment,BlockComment:N.blockComment,Number:N.number,String:N.string,ArithOp:N.arithmeticOperator,LogicOp:N.logicOperator,BitOp:N.bitwiseOperator,CompareOp:N.compareOperator,RegExp:N.regexp,Equals:N.definitionOperator,Arrow:N.function(N.punctuation),": Spread":N.punctuation,"( )":N.paren,"[ ]":N.squareBracket,"{ }":N.brace,"InterpolationStart InterpolationEnd":N.special(N.brace),".":N.derefOperator,", ;":N.separator,TypeName:N.typeName,TypeDefinition:N.definition(N.typeName),"type enum interface implements namespace module declare":N.definitionKeyword,"abstract global Privacy readonly override":N.modifier,"is keyof unique infer":N.operatorKeyword,JSXAttributeValue:N.attributeValue,JSXText:N.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":N.angleBracket,"JSXIdentifier JSXNameSpacedName":N.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":N.attributeName}),Nx={__proto__:null,export:18,as:23,from:29,default:32,async:37,function:38,this:48,true:56,false:56,void:66,typeof:70,null:86,super:88,new:122,await:139,yield:141,delete:142,class:152,extends:154,public:197,private:197,protected:197,readonly:199,instanceof:220,in:222,const:224,import:256,keyof:307,unique:311,infer:317,is:351,abstract:371,implements:373,type:375,let:378,var:380,interface:387,enum:391,namespace:397,module:399,declare:403,global:407,for:428,of:437,while:440,with:444,do:448,if:452,else:454,switch:458,case:464,try:470,catch:474,finally:478,return:482,throw:486,break:490,continue:494,debugger:498},Fx={__proto__:null,async:109,get:111,set:113,public:161,private:161,protected:161,static:163,abstract:165,override:167,readonly:173,new:355},Mx={__proto__:null,"<":129},Bx=Bs.deserialize({version:14,states:"$8SO`QdOOO'QQ(C|O'#ChO'XOWO'#DVO)dQdO'#D]O)tQdO'#DhO){QdO'#DrO-xQdO'#DxOOQO'#E]'#E]O.]Q`O'#E[O.bQ`O'#E[OOQ(C['#Ef'#EfO0aQ(C|O'#ItO2wQ(C|O'#IuO3eQ`O'#EzO3jQ!bO'#FaOOQ(C['#FS'#FSO3rO#tO'#FSO4QQ&jO'#FhO5bQ`O'#FgOOQ(C['#Iu'#IuOOQ(CW'#It'#ItOOQS'#J^'#J^O5gQ`O'#HpO5lQ(ChO'#HqOOQS'#Ih'#IhOOQS'#Hr'#HrQ`QdOOO){QdO'#DjO5tQ`O'#G[O5yQ&jO'#CmO6XQ`O'#EZO6dQ`O'#EgO6iQ,UO'#FRO7TQ`O'#G[O7YQ`O'#G`O7eQ`O'#G`O7sQ`O'#GcO7sQ`O'#GdO7sQ`O'#GfO5tQ`O'#GiO8dQ`O'#GlO9rQ`O'#CdO:SQ`O'#GyO:[Q`O'#HPO:[Q`O'#HRO`QdO'#HTO:[Q`O'#HVO:[Q`O'#HYO:aQ`O'#H`O:fQ(CjO'#HfO){QdO'#HhO:qQ(CjO'#HjO:|Q(CjO'#HlO5lQ(ChO'#HnO){QdO'#DWOOOW'#Ht'#HtO;XOWO,59qOOQ(C[,59q,59qO=jQtO'#ChO=tQdO'#HuO>XQ`O'#IvO@WQtO'#IvO'dQdO'#IvO@_Q`O,59wO@uQ7[O'#DbOAnQ`O'#E]OA{Q`O'#JROBWQ`O'#JQOBWQ`O'#JQOB`Q`O,5:yOBeQ`O'#JPOBlQaO'#DyO5yQ&jO'#EZOBzQ`O'#EZOCVQpO'#FROOQ(C[,5:S,5:SOC_QdO,5:SOE]Q(C|O,5:^OEyQ`O,5:dOFdQ(ChO'#JOO7YQ`O'#I}OFkQ`O'#I}OFsQ`O,5:xOFxQ`O'#I}OGWQdO,5:vOIWQ&jO'#EWOJeQ`O,5:vOKwQ&jO'#DlOLOQdO'#DqOLYQ7[O,5;PO){QdO,5;POOQS'#Er'#ErOOQS'#Et'#EtO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;RO){QdO,5;ROOQS'#Ex'#ExOLbQdO,5;cOOQ(C[,5;h,5;hOOQ(C[,5;i,5;iONbQ`O,5;iOOQ(C[,5;j,5;jO){QdO'#IPONgQ(ChO,5<TO! RQ&jO,5;RO){QdO,5;fO! kQ!bO'#JVO! YQ!bO'#JVO! rQ!bO'#JVO!!TQ!bO,5;qOOOO,5;{,5;{O!!cQdO'#FcOOOO'#IO'#IOO3rO#tO,5;nO!!jQ!bO'#FeOOQ(C[,5;n,5;nO!#WQ,VO'#CrOOQ(C]'#Cu'#CuO!#kQ`O'#CuO!#pOWO'#CyO!$^Q,VO,5<QO!$eQ`O,5<SO!%tQ&jO'#FrO!&RQ`O'#FsO!&WQ`O'#FsO!&]Q&jO'#FwO!'[Q7[O'#F{O!'}Q,VO'#IqOOQ(C]'#Iq'#IqO!(XQaO'#IpO!(gQ`O'#IoO!(oQ`O'#CqOOQ(C]'#Cs'#CsOOQ(C]'#C|'#C|O!(wQ`O'#DOOJjQ&jO'#FjOJjQ&jO'#FlO!(|Q`O'#FnO!)RQ`O'#FoO!&WQ`O'#FuOJjQ&jO'#FzO!)WQ`O'#E^O!)oQ`O,5<RO`QdO,5>[OOQS'#Ik'#IkOOQS,5>],5>]OOQS-E;p-E;pO!+kQ(C|O,5:UOOQ(CX'#Cp'#CpO!,[Q&kO,5<vOOQO'#Cf'#CfO!,mQ(ChO'#IlO5bQ`O'#IlO:aQ`O,59XO!-OQ!bO,59XO!-WQ&jO,59XO5yQ&jO,59XO!-cQ`O,5:vO!-kQ`O'#GxO!-yQ`O'#JbO){QdO,5;kO!.RQ7[O,5;mO!.WQ`O,5=cO!.]Q`O,5=cO!.bQ`O,5=cO5lQ(ChO,5=cO5tQ`O,5<vO!.pQ`O'#E_O!/UQ7[O'#E`OOQ(CW'#JP'#JPO!/gQ(ChO'#J_O5lQ(ChO,5<zO7sQ`O,5=QOOQP'#Cr'#CrO!/rQ!bO,5<}O!/zQ!cO,5=OO!0VQ`O,5=QO!0[QpO,5=TO:aQ`O'#GnO5tQ`O'#GpO!0dQ`O'#GpO5yQ&jO'#GsO!0iQ`O'#GsOOQS,5=W,5=WO!0nQ`O'#GtO!0vQ`O'#CmO!0{Q`O,59OO!1VQ`O,59OO!3XQdO,59OOOQS,59O,59OO!3fQ(ChO,59OO){QdO,59OO!3qQdO'#G{OOQS'#G|'#G|OOQS'#G}'#G}O`QdO,5=eO!4RQ`O,5=eO){QdO'#DxO`QdO,5=kO`QdO,5=mO!4WQ`O,5=oO`QdO,5=qO!4]Q`O,5=tO!4bQdO,5=zOOQS,5>Q,5>QO){QdO,5>QO5lQ(ChO,5>SOOQS,5>U,5>UO!8cQ`O,5>UOOQS,5>W,5>WO!8cQ`O,5>WOOQS,5>Y,5>YO!8hQpO,59rOOOW-E;r-E;rOOQ(C[1G/]1G/]O!8mQtO,5>aO'dQdO,5>aOOQO,5>f,5>fO!8wQdO'#HuOOQO-E;s-E;sO!9UQ`O,5?bO!9^QtO,5?bO!9eQ`O,5?lOOQ(C[1G/c1G/cO!9mQ!bO'#DTOOQO'#Ix'#IxO){QdO'#IxO!:[Q!bO'#IxO!:yQ!bO'#DcO!;[Q7[O'#DcO!=gQdO'#DcO!=nQ`O'#IwO!=vQ`O,59|O!={Q`O'#EaO!>ZQ`O'#JSO!>cQ`O,5:zO!>yQ7[O'#DcO){QdO,5?mO!?TQ`O'#HzOOQO-E;x-E;xO!9eQ`O,5?lOOQ(CW1G0e1G0eO!@aQ7[O'#D|OOQ(C[,5:e,5:eO){QdO,5:eOIWQ&jO,5:eO!@hQaO,5:eO:aQ`O,5:uO!-OQ!bO,5:uO!-WQ&jO,5:uO5yQ&jO,5:uOOQ(C[1G/n1G/nOOQ(C[1G0O1G0OOOQ(CW'#EV'#EVO){QdO,5?jO!@sQ(ChO,5?jO!AUQ(ChO,5?jO!A]Q`O,5?iO!AeQ`O'#H|O!A]Q`O,5?iOOQ(CW1G0d1G0dO7YQ`O,5?iOOQ(C[1G0b1G0bO!BPQ(C|O1G0bO!CRQ(CyO,5:rOOQ(C]'#Fq'#FqO!CoQ(C}O'#IqOGWQdO1G0bO!EqQ,VO'#IyO!E{Q`O,5:WO!FQQtO'#IzO){QdO'#IzO!F[Q`O,5:]OOQ(C]'#DT'#DTOOQ(C[1G0k1G0kO!FaQ`O1G0kO!HrQ(C|O1G0mO!HyQ(C|O1G0mO!K^Q(C|O1G0mO!KeQ(C|O1G0mO!MlQ(C|O1G0mO!NPQ(C|O1G0mO#!pQ(C|O1G0mO#!wQ(C|O1G0mO#%[Q(C|O1G0mO#%cQ(C|O1G0mO#'WQ(C|O1G0mO#*QQMlO'#ChO#+{QMlO1G0}O#-vQMlO'#IuOOQ(C[1G1T1G1TO#.ZQ(C|O,5>kOOQ(CW-E;}-E;}O#.zQ(C}O1G0mOOQ(C[1G0m1G0mO#1PQ(C|O1G1QO#1pQ!bO,5;sO#1uQ!bO,5;tO#1zQ!bO'#F[O#2`Q`O'#FZOOQO'#JW'#JWOOQO'#H}'#H}O#2eQ!bO1G1]OOQ(C[1G1]1G1]OOOO1G1f1G1fO#2sQMlO'#ItO#2}Q`O,5;}OLbQdO,5;}OOOO-E;|-E;|OOQ(C[1G1Y1G1YOOQ(C[,5<P,5<PO#3SQ!bO,5<POOQ(C],59a,59aOIWQ&jO'#C{OOOW'#Hs'#HsO#3XOWO,59eOOQ(C],59e,59eO){QdO1G1lO!)RQ`O'#IRO#3dQ`O,5<eOOQ(C],5<b,5<bOOQO'#GV'#GVOJjQ&jO,5<pOOQO'#GX'#GXOJjQ&jO,5<rOIWQ&jO,5<tOOQO1G1n1G1nO#3oQqO'#CpO#4SQqO,5<^O#4ZQ`O'#JZO5tQ`O'#JZO#4iQ`O,5<`OJjQ&jO,5<_O#4nQ`O'#FtO#4yQ`O,5<_O#5OQqO'#FqO#5]QqO'#J[O#5gQ`O'#J[OIWQ&jO'#J[O#5lQ`O,5<cOOQ(CW'#Dg'#DgO#5qQ!bO'#F|O!'VQ7[O'#F|O!'VQ7[O'#GOO#6SQ`O'#GPO!&WQ`O'#GSO#6XQ(ChO'#ITO#6dQ7[O,5<gOOQ(C],5<g,5<gO#6kQ7[O'#F|O#6yQ7[O'#F}O#7RQ7[O'#F}OOQ(C],5<u,5<uOJjQ&jO,5?[OJjQ&jO,5?[O#7WQ`O'#IUO#7cQ`O,5?ZO#7kQ`O,59]OOQ(C]'#Ch'#ChO#8[Q,VO,59jOOQ(C],59j,59jO#8}Q,VO,5<UO#9pQ,VO,5<WO#9zQ`O,5<YOOQ(C],5<Z,5<ZO#:PQ`O,5<aO#:UQ,VO,5<fOGWQdO1G1mO#:fQ`O1G1mOOQS1G3v1G3vOOQ(C[1G/p1G/pONbQ`O1G/pOOQS1G2b1G2bOIWQ&jO1G2bO){QdO1G2bOIWQ&jO1G2bO#:kQaO1G2bO#<QQ&jO'#EWOOQ(CW,5?W,5?WO#<[Q(ChO,5?WOOQS1G.s1G.sO:aQ`O1G.sO!-OQ!bO1G.sO!-WQ&jO1G.sO#<mQ`O1G0bO#<rQ`O'#ChO#<}Q`O'#JcO#=VQ`O,5=dO#=[Q`O'#JcO#=aQ`O'#JcO#=iQ`O'#I^O#=wQ`O,5?|O#>PQtO1G1VOOQ(C[1G1X1G1XO5tQ`O1G2}O#>WQ`O1G2}O#>]Q`O1G2}O#>bQ`O1G2}OOQS1G2}1G2}O#>gQ&kO1G2bO7YQ`O'#JQO7YQ`O'#EaO7YQ`O'#IWO#>xQ(ChO,5?yOOQS1G2f1G2fO!0VQ`O1G2lOIWQ&jO1G2iO#?TQ`O1G2iOOQS1G2j1G2jOIWQ&jO1G2jO#?YQaO1G2jO#?bQ7[O'#GhOOQS1G2l1G2lO!'VQ7[O'#IYO!0[QpO1G2oOOQS1G2o1G2oOOQS,5=Y,5=YO#?jQ&kO,5=[O5tQ`O,5=[O#6SQ`O,5=_O5bQ`O,5=_O!-OQ!bO,5=_O!-WQ&jO,5=_O5yQ&jO,5=_O#?{Q`O'#JaO#@WQ`O,5=`OOQS1G.j1G.jO#@]Q(ChO1G.jO#@hQ`O1G.jO#@mQ`O1G.jO5lQ(ChO1G.jO#@uQtO,5@OO#APQ`O,5@OO#A[QdO,5=gO#AcQ`O,5=gO7YQ`O,5@OOOQS1G3P1G3PO`QdO1G3POOQS1G3V1G3VOOQS1G3X1G3XO:[Q`O1G3ZO#AhQdO1G3]O#EcQdO'#H[OOQS1G3`1G3`O#EpQ`O'#HbO:aQ`O'#HdOOQS1G3f1G3fO#ExQdO1G3fO5lQ(ChO1G3lOOQS1G3n1G3nOOQ(CW'#Fx'#FxO5lQ(ChO1G3pO5lQ(ChO1G3rOOOW1G/^1G/^O#IvQpO,5<TO#JOQtO1G3{OOQO1G4Q1G4QO){QdO,5>aO#JYQ`O1G4|O#JbQ`O1G5WO#JjQ`O,5?dOLbQdO,5:{O7YQ`O,5:{O:aQ`O,59}OLbQdO,59}O!-OQ!bO,59}O#JoQMlO,59}OOQO,5:{,5:{O#JyQ7[O'#HvO#KaQ`O,5?cOOQ(C[1G/h1G/hO#KiQ7[O'#H{O#K}Q`O,5?nOOQ(CW1G0f1G0fO!;[Q7[O,59}O#LVQtO1G5XO7YQ`O,5>fOOQ(CW'#ES'#ESO#LaQ(DjO'#ETO!@XQ7[O'#D}OOQO'#Hy'#HyO#L{Q7[O,5:hOOQ(C[,5:h,5:hO#MSQ7[O'#D}O#MeQ7[O'#D}O#MlQ7[O'#EYO#MoQ7[O'#ETO#M|Q7[O'#ETO!@XQ7[O'#ETO#NaQ`O1G0PO#NfQqO1G0POOQ(C[1G0P1G0PO){QdO1G0POIWQ&jO1G0POOQ(C[1G0a1G0aO:aQ`O1G0aO!-OQ!bO1G0aO!-WQ&jO1G0aO#NmQ(C|O1G5UO){QdO1G5UO#N}Q(ChO1G5UO$ `Q`O1G5TO7YQ`O,5>hOOQO,5>h,5>hO$ hQ`O,5>hOOQO-E;z-E;zO$ `Q`O1G5TO$ vQ(C}O,59jO$#xQ(C}O,5<UO$%}Q(C}O,5<WO$(SQ(C}O,5<fOOQ(C[7+%|7+%|O$*_Q(C|O7+%|O$+OQ&jO'#HwO$+YQ`O,5?eOOQ(C]1G/r1G/rO$+bQdO'#HxO$+oQ`O,5?fO$+wQtO,5?fOOQ(C[1G/w1G/wOOQ(C[7+&V7+&VO$,RQMlO,5:^O){QdO7+&iO$,]QMlO,5:UOOQO1G1_1G1_OOQO1G1`1G1`O$,jQ!LQO,5;vOLbQdO,5;uOOQO-E;{-E;{OOQ(C[7+&w7+&wOOOO7+'Q7+'QOOOO1G1i1G1iO$,uQ`O1G1iOOQ(C[1G1k1G1kO$,zQqO,59gOOOW-E;q-E;qOOQ(C]1G/P1G/PO$-RQ(C|O7+'WOOQ(C],5>m,5>mO$-rQ`O,5>mOOQ(C]1G2P1G2PP$-wQ`O'#IRPOQ(C]-E<P-E<PO$.hQ,VO1G2[O$/ZQ,VO1G2^O$/eQqO1G2`OOQ(C]1G1x1G1xO$/lQ`O'#IQO$/zQ`O,5?uO$/zQ`O,5?uO$0SQ`O,5?uO$0_Q`O,5?uOOQO1G1z1G1zO$0mQ,VO1G1yOJjQ&jO1G1yO$0}Q&jO'#ISO$1_Q`O,5?vOIWQ&jO,5?vO$1gQqO,5?vOOQ(C]1G1}1G1}OOQ(CW,5<h,5<hOOQ(CW,5<i,5<iO$1qQ`O,5<iO#5}Q`O,5<iO!-OQ!bO,5<hO$1vQ`O,5<jOOQ(CW,5<k,5<kO$1qQ`O,5<nOOQO,5>o,5>oOOQO-E<R-E<ROOQ(C]1G2R1G2RO!'VQ7[O,5<hO$2OQ`O,5<iO!'VQ7[O,5<jO!'VQ7[O,5<iO$2ZQ,VO1G4vO$2eQ,VO1G4vOOQO,5>p,5>pOOQO-E<S-E<SOOQP1G.w1G.wO!.RQ7[O,59lO){QdO,59lO$2rQ`O1G1tOJjQ&jO1G1{O$2wQ(C|O7+'XOOQ(C[7+'X7+'XOGWQdO7+'XOOQ(C[7+%[7+%[O$3hQqO'#J]O#NaQ`O7+'|O$3rQ`O7+'|O$3zQqO7+'|OOQS7+'|7+'|OIWQ&jO7+'|O){QdO7+'|OIWQ&jO7+'|O$4UQ(CyO'#ChO$4iQ(CyO,5<lO$5ZQ`O,5<lOOQ(CW1G4r1G4rOOQS7+$_7+$_O:aQ`O7+$_O!-OQ!bO7+$_OGWQdO7+%|O$5`Q`O'#I]O$5qQ`O,5?}OOQO1G3O1G3OO5tQ`O,5?}O$5qQ`O,5?}O$5yQ`O,5?}OOQO,5>x,5>xOOQO-E<[-E<[OOQ(C[7+&q7+&qO$6OQ`O7+(iO5lQ(ChO7+(iO5tQ`O7+(iO$6TQ`O7+(iO$6YQaO7+'|OOQ(CW,5>r,5>rOOQ(CW-E<U-E<UOOQS7+(W7+(WO$6hQ(CyO7+(TOIWQ&jO7+(TO$6rQqO7+(UOOQS7+(U7+(UOIWQ&jO7+(UO$6yQ`O'#J`O$7UQ`O,5=SOOQO,5>t,5>tOOQO-E<W-E<WOOQS7+(Z7+(ZO$8OQ7[O'#GqOOQS1G2v1G2vOIWQ&jO1G2vO){QdO1G2vOIWQ&jO1G2vO$8VQaO1G2vO$8eQ&kO1G2vO5lQ(ChO1G2yO#6SQ`O1G2yO5bQ`O1G2yO!-OQ!bO1G2yO!-WQ&jO1G2yO$8vQ`O'#I[O$9RQ`O,5?{O$9ZQ7[O,5?{OOQ(CW1G2z1G2zOOQS7+$U7+$UO$9cQ`O7+$UO5lQ(ChO7+$UO$9hQ`O7+$UO){QdO1G5jO){QdO1G5kO$9mQdO1G3RO$9tQ`O1G3RO$9yQdO1G3RO$:QQ(ChO1G5jOOQS7+(k7+(kO5lQ(ChO7+(uO`QdO7+(wOOQS'#Jf'#JfOOQS'#I_'#I_O$:[QdO,5=vOOQS,5=v,5=vO){QdO'#H]O$:iQ`O'#H_OOQS,5=|,5=|O7YQ`O,5=|OOQS,5>O,5>OOOQS7+)Q7+)QOOQS7+)W7+)WOOQS7+)[7+)[OOQS7+)^7+)^OOQO1G5O1G5OO$:nQMlO1G0gO$:xQ`O1G0gOOQO1G/i1G/iO$;TQMlO1G/iO:aQ`O1G/iOLbQdO'#DcOOQO,5>b,5>bOOQO-E;t-E;tOOQO,5>g,5>gOOQO-E;y-E;yO!-OQ!bO1G/iO:aQ`O,5:iOOQO,5:o,5:oO){QdO,5:oO$;_Q(ChO,5:oO$;jQ(ChO,5:oO!-OQ!bO,5:iOOQO-E;w-E;wOOQ(C[1G0S1G0SO!@XQ7[O,5:iO$;xQ7[O,5:iO$<ZQ(DjO,5:oO$<uQ7[O,5:iO!@XQ7[O,5:oOOQO,5:t,5:tO$<|Q7[O,5:oO$=ZQ(ChO,5:oOOQ(C[7+%k7+%kO#NaQ`O7+%kO#NfQqO7+%kOOQ(C[7+%{7+%{O:aQ`O7+%{O!-OQ!bO7+%{O$=oQ(C|O7+*pO){QdO7+*pOOQO1G4S1G4SO7YQ`O1G4SO$>PQ`O7+*oO$>XQ(C}O1G2[O$@^Q(C}O1G2^O$BcQ(C}O1G1yO$DnQ,VO,5>cOOQO-E;u-E;uO$DxQtO,5>dO){QdO,5>dOOQO-E;v-E;vO$ESQ`O1G5QO$E[QMlO1G0bO$GcQMlO1G0mO$GjQMlO1G0mO$IkQMlO1G0mO$IrQMlO1G0mO$KgQMlO1G0mO$KzQMlO1G0mO$NXQMlO1G0mO$N`QMlO1G0mO%!aQMlO1G0mO%!hQMlO1G0mO%$]QMlO1G0mO%$pQ(C|O<<JTO%%rQMmO1G0mO%'|QMmO'#IqO%)iQMlO1G1QOLbQdO'#F^OOQO'#JX'#JXOOQO1G1b1G1bO%)vQ`O1G1aO%){QMlO,5>kOOOO7+'T7+'TOOOW1G/R1G/ROOQ(C]1G4X1G4XOJjQ&jO7+'zO%*VQ`O,5>lO5tQ`O,5>lOOQO-E<O-E<OO%*eQ`O1G5aO%*eQ`O1G5aO%*mQ`O1G5aO%*xQ,VO7+'eO%+YQqO,5>nO%+dQ`O,5>nOIWQ&jO,5>nOOQO-E<Q-E<QO%+iQqO1G5bO%+sQ`O1G5bOOQ(CW1G2T1G2TO$1qQ`O1G2TOOQ(CW1G2S1G2SO%+{Q`O1G2UOIWQ&jO1G2UOOQ(CW1G2Y1G2YO!-OQ!bO1G2SO#5}Q`O1G2TO%,QQ`O1G2UO%,YQ`O1G2TOJjQ&jO7+*bOOQ(C]1G/W1G/WO%,eQ`O1G/WOOQ(C]7+'`7+'`O%,jQ,VO7+'gO%,zQ(C|O<<JsOOQ(C[<<Js<<JsOIWQ&jO'#IVO%-kQ`O,5?wOOQS<<Kh<<KhOIWQ&jO<<KhO#NaQ`O<<KhO%-sQ`O<<KhO%-{QqO<<KhOIWQ&jO1G2WOOQS<<Gy<<GyO:aQ`O<<GyO%.VQ(C|O<<IhOOQ(C[<<Ih<<IhOOQO,5>w,5>wO%.vQ`O,5>wO%.{Q`O,5>wOOQO-E<Z-E<ZO%/TQ`O1G5iO%/TQ`O1G5iO5tQ`O1G5iO%/]Q`O<<LTOOQS<<LT<<LTO%/bQ`O<<LTO5lQ(ChO<<LTO){QdO<<KhOIWQ&jO<<KhOOQS<<Ko<<KoO$6hQ(CyO<<KoOOQS<<Kp<<KpO$6rQqO<<KpO%/gQ7[O'#IXO%/rQ`O,5?zOLbQdO,5?zOOQS1G2n1G2nO#LaQ(DjO'#ETO!@XQ7[O'#GrOOQO'#IZ'#IZO%/zQ7[O,5=]OOQS,5=],5=]O%0RQ7[O'#ETO%0^Q7[O'#ETO%0uQ7[O'#ETO%1PQ7[O'#GrO%1bQ`O7+(bO%1gQ`O7+(bO%1oQqO7+(bOOQS7+(b7+(bOIWQ&jO7+(bO){QdO7+(bOIWQ&jO7+(bO%1yQaO7+(bOOQS7+(e7+(eO5lQ(ChO7+(eO#6SQ`O7+(eO5bQ`O7+(eO!-OQ!bO7+(eO%2XQ`O,5>vOOQO-E<Y-E<YOOQO'#Gu'#GuO%2dQ`O1G5gO5lQ(ChO<<GpOOQS<<Gp<<GpO%2lQ`O<<GpO%2qQ`O7++UO%2vQ`O7++VOOQS7+(m7+(mO%2{Q`O7+(mO%3QQdO7+(mO%3XQ`O7+(mO){QdO7++UO){QdO7++VOOQS<<La<<LaOOQS<<Lc<<LcOOQS-E<]-E<]OOQS1G3b1G3bO%3^Q`O,5=wOOQS,5=y,5=yO%3cQ`O1G3hOLbQdO7+&ROOQO7+%T7+%TO%3hQMlO1G5XO:aQ`O7+%TOOQO1G0T1G0TO%3rQ(C|O1G0ZOOQO1G0Z1G0ZO){QdO1G0ZO%3|Q(ChO1G0ZO:aQ`O1G0TO!-OQ!bO1G0TO!@XQ7[O1G0TO%4XQ(ChO1G0ZO%4gQ7[O1G0TO%4xQ(ChO1G0ZO%5^Q(DjO1G0ZO%5hQ7[O1G0TO!@XQ7[O1G0ZOOQ(C[<<IV<<IVOOQ(C[<<Ig<<IgO:aQ`O<<IgO%5oQ(C|O<<N[OOQO7+)n7+)nO%6PQ(C}O7+'eO%8[Q(C}O7+'gO%:gQtO1G4OO%:qQMlO7+%|O%;gQMmO,59jO%=hQMmO,5<UO%?lQMmO,5<WO%A[QMmO,5<fO%B}QMlO7+'WO%C[QMlO7+'XO%CiQ`O,5;xOOQO7+&{7+&{O%CnQ,VO<<KfOOQO1G4W1G4WO%CuQ`O1G4WO%DQQ`O1G4WO%D`Q`O7+*{O%D`Q`O7+*{OIWQ&jO1G4YO%DhQqO1G4YO%DrQ`O7+*|OOQ(CW7+'o7+'oO$1qQ`O7+'pO%DzQqO7+'pOOQ(CW7+'n7+'nO$1qQ`O7+'oO%ERQ`O7+'pOIWQ&jO7+'pO#5}Q`O7+'oO%EWQ,VO<<M|OOQ(C]7+$r7+$rO%EbQqO,5>qOOQO-E<T-E<TO#NaQ`OANASOOQSANASANASOIWQ&jOANASO%ElQ(CyO7+'rOOQSAN=eAN=eO5tQ`O1G4cOOQO1G4c1G4cO%E|Q`O1G4cO%FRQ`O7++TO%FRQ`O7++TO5lQ(ChOANAoO%FZQ`OANAoOOQSANAoANAoO%F`Q`OANASO%FhQqOANASOOQSANAZANAZOOQSANA[ANA[O%FrQ`O,5>sOOQO-E<V-E<VO%F}QMlO1G5fO#6SQ`O,5=^O5bQ`O,5=^O!-OQ!bO,5=^OOQO-E<X-E<XOOQS1G2w1G2wO$<ZQ(DjO,5:oO!@XQ7[O,5=^O%GXQ7[O,5=^O%GjQ7[O,5:oOOQS<<K|<<K|OIWQ&jO<<K|O%1bQ`O<<K|O%GtQ`O<<K|O%G|QqO<<K|O){QdO<<K|OIWQ&jO<<K|OOQS<<LP<<LPO5lQ(ChO<<LPO#6SQ`O<<LPO5bQ`O<<LPO%HWQ7[O1G4bO%H`Q`O7++ROOQSAN=[AN=[O5lQ(ChOAN=[OOQS<<Np<<NpOOQS<<Nq<<NqOOQS<<LX<<LXO%HhQ`O<<LXO%HmQdO<<LXO%HtQ`O<<NpO%HyQ`O<<NqOOQS1G3c1G3cO:aQ`O7+)SO%IOQMlO<<ImOOQO<<Ho<<HoOOQO7+%u7+%uO%3rQ(C|O7+%uO){QdO7+%uOOQO7+%o7+%oO:aQ`O7+%oO!-OQ!bO7+%oO%IYQ(ChO7+%uO!@XQ7[O7+%oO%IeQ(ChO7+%uO%IsQ7[O7+%oO%JUQ(ChO7+%uOOQ(C[AN?RAN?RO%JjQMlO<<JTO%JwQMmO1G1yO%MOQMmO1G2[O& SQMmO1G2^O&!rQMlO<<JsO&#PQMlO<<IhOOQO1G1d1G1dOJjQ&jOANAQOOQO7+)r7+)rO&#^Q`O7+)rO&#iQ`O<<NgO&#qQqO7+)tOOQ(CW<<K[<<K[O$1qQ`O<<K[OOQ(CW<<KZ<<KZO&#{QqO<<K[O$1qQ`O<<KZOOQSG26nG26nO#NaQ`OG26nOOQO7+)}7+)}O5tQ`O7+)}O&$SQ`O<<NoOOQSG27ZG27ZO5lQ(ChOG27ZOIWQ&jOG26nOLbQdO1G4_O&$[Q`O7++QO5lQ(ChO1G2xO#6SQ`O1G2xO5bQ`O1G2xO!-OQ!bO1G2xO!@XQ7[O1G2xO%5^Q(DjO1G0ZO&$dQ7[O1G2xO%1bQ`OANAhOOQSANAhANAhOIWQ&jOANAhO&$uQ`OANAhO&$}QqOANAhOOQSANAkANAkO5lQ(ChOANAkO#6SQ`OANAkOOQO'#Gv'#GvOOQO7+)|7+)|OOQSG22vG22vOOQSANAsANAsO&%XQ`OANAsOOQSAND[AND[OOQSAND]AND]OOQS<<Ln<<LnOOQO<<Ia<<IaO%3rQ(C|O<<IaOOQO<<IZ<<IZO:aQ`O<<IZO){QdO<<IaO!-OQ!bO<<IZO&%^Q(ChO<<IaO!@XQ7[O<<IZO&%iQ(ChO<<IaO&%wQMmO7+'eO&'jQMmO7+'gO&)]Q,VOG26lOOQO<<M^<<M^OOQ(CWAN@vAN@vO$1qQ`OAN@vOOQ(CWAN@uAN@uOOQSLD,YLD,YOOQO<<Mi<<MiOOQSLD,uLD,uO#NaQ`OLD,YO&)mQMlO7+)yOOQO7+(d7+(dO5lQ(ChO7+(dO#6SQ`O7+(dO5bQ`O7+(dO!-OQ!bO7+(dO!@XQ7[O7+(dOOQSG27SG27SO%1bQ`OG27SOIWQ&jOG27SOOQSG27VG27VO5lQ(ChOG27VOOQSG27_G27_OOQOAN>{AN>{OOQOAN>uAN>uO%3rQ(C|OAN>{O:aQ`OAN>uO){QdOAN>{O!-OQ!bOAN>uO&)wQ(ChOAN>{O&*SQ(C}OG26lOOQ(CWG26bG26bOOQS!$( t!$( tOOQO<<LO<<LOO5lQ(ChO<<LOO#6SQ`O<<LOO5bQ`O<<LOO!-OQ!bO<<LOOOQSLD,nLD,nO%1bQ`OLD,nOOQSLD,qLD,qOOQOG24gG24gOOQOG24aG24aO%3rQ(C|OG24gO:aQ`OG24aO){QdOG24gO&,pQ!LRO,5:rO&-gQ$ITO'#IqOOQOANAjANAjO5lQ(ChOANAjO#6SQ`OANAjO5bQ`OANAjOOQS!$(!Y!$(!YOOQOLD*RLD*ROOQOLD){LD){O%3rQ(C|OLD*RO&.ZQMmOG26lO&/|Q!LRO,59jO&0pQ!LRO,5<UO&1dQ!LRO,5<WO&2WQ!LRO,5<fOOQOG27UG27UO5lQ(ChOG27UO#6SQ`OG27UOOQO!$'Mm!$'MmO&2}Q!LRO1G2[O&3qQ!LRO1G2^O&4eQ!LRO1G1yOOQOLD,pLD,pO5lQ(ChOLD,pO&5[Q!LRO7+'eO&6RQ!LRO7+'gOOQO!$(![!$(![O&6xQ!LROG26lOLbQdO'#DrO&7oQtO'#ItOLbQdO'#DjO&7vQ(C|O'#ChO&8aQtO'#ChO&8qQdO,5:vO&:qQ&jO'#EWOLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO,5;ROLbQdO'#IPO&<OQ`O,5<TO&=eQ&jO,5;ROLbQdO,5;fO!(wQ`O'#DOO!(wQ`O'#DOO!(wQ`O'#DOOIWQ&jO'#FjO&:qQ&jO'#FjO&<WQ&jO'#FjOIWQ&jO'#FlO&:qQ&jO'#FlO&<WQ&jO'#FlOIWQ&jO'#FzO&:qQ&jO'#FzO&<WQ&jO'#FzOLbQdO,5?mO&8qQdO1G0bO&=lQMlO'#ChOLbQdO1G1lOIWQ&jO,5<pO&:qQ&jO,5<pO&<WQ&jO,5<pOIWQ&jO,5<rO&:qQ&jO,5<rO&<WQ&jO,5<rOIWQ&jO,5<_O&:qQ&jO,5<_O&<WQ&jO,5<_O&8qQdO1G1mOLbQdO7+&iOIWQ&jO1G1yO&:qQ&jO1G1yO&<WQ&jO1G1yOIWQ&jO1G1{O&:qQ&jO1G1{O&<WQ&jO1G1{O&8qQdO7+'XO&8qQdO7+%|O&=vQ`O7+'pOIWQ&jOANAQO&:qQ&jOANAQO&<WQ&jOANAQO&=vQ`O<<K[O&=vQ`OAN@vO&={Q`O'#E[O&>QQ`O'#E[O&>YQ`O'#EzO&>_Q`O'#EgO&>dQ`O'#JRO&>oQ`O'#JPO&>zQ`O,5:vO&?PQ,VO,5<QO&?WQ`O'#FsO&?]Q`O'#FsO&?bQ`O'#FsO&?gQ`O,5<RO&?oQ`O,5:vO&?wQMlO1G0}O&@OQ`O,5<_O&@TQ`O,5<_O&@YQ`O,5<_O&@_Q`O,5<aO&@dQ`O,5<aO&@iQ`O,5<aO&@nQ`O1G1mO&@sQ`O1G0bO&@xQ`O1G2UO&@}Q,VO<<KfO&AUQ,VO<<KfO&A]Q,VO<<KfO&AdQqO7+'pO&AkQ`O7+'pO&ApQqO<<K[O4QQ&jO'#FhO5bQ`O'#FgOBzQ`O'#EZOLbQdO,5;cO!&WQ`O'#FsO!&WQ`O'#FsO!&WQ`O'#FsO!&WQ`O'#FuO!&WQ`O'#FuO!&WQ`O'#FuO&AwQ`O,5<jOJjQ&jO7+'zOJjQ&jO7+'zOJjQ&jO7+'zOIWQ&jO1G2UO&BPQ`O1G2UOIWQ&jO7+'pO!'VQ7[O'#GOO$/eQqO1G2`O$/eQqO1G2`O$/eQqO1G2`O!'VQ7[O,5<jOIWQ&jO,5<tOIWQ&jO,5<tOIWQ&jO,5<t",stateData:"&B}~O'YOS'ZOSTOSUOS~OQTORTOXyO]cO_hObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#dsO#tpO#x^O%PqO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO%axO%nzO%t{O%v|O%x}O%z!OO%}!PO&T!QO&Z!RO&]!SO&_!TO&a!UO&c!VO']PO'fQO'oYO'|aO~OQ[XZ[X_[Xj[Xu[Xv[Xx[X!R[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'W[X'f[X'p[X'w[X'x[X~O!]$lX~P$zOS!WO'U!XO'V!ZO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']![O'fQO'oYO'|aO~O!Q!`O!R!]O!O'jP!O'tP~P'dO!S!mO~P`OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9aO'fQO'oYO'|aO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O'fQO'oYO'|aO~O!Q!rO#U!uO#V!rO']9bO!c'qP~P+{O#W!vO~O!]!wO#W!vO~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!R#bO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_'hX'W'hX!c'hX!O'hX!T'hX%Q'hX!]'hX~P.jO!{#eO#o#eOQ'iXZ'iX_'iXj'iXu'iXv'iXx'iX!R'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX~O#c'iX'W'iX!O'iX!c'iXn'iX!T'iX%Q'iX!]'iX~P0zO!{#eO~O#z#fO$R#jO~O!T#kO#x^O$U#lO$W#nO~O]#qOh$QOj#rOk#qOl#qOq$ROs$SOx#yO!T#zO!_$XO!d#vO#V$YO#t$VO$_$TO$a$UO$d$WO']#pO'b$PO'f#sO'a'cP~O!d$ZO~O!]$]O~O_$^O'W$^O~O']$bO~O!d$ZO']$bO'^$dO'b$PO~Oc$jO!d$ZO']$bO~O#c#TO~O]$sOu$oO!T$lO!d$nO%R$rO']$bO'^$dO^(UP~O!n$tO~Ox$uO!T$vO']$bO~Ox$uO!T$vO%Z$zO']$bO~O']${O~O#dsO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO~Ob%UOc%TO!n%RO%P%SO%c%QO~P7xOb%XOcmO!T%WO!nlO#dsO%PqO%TrO%UrO%XuO%ZvO%^wO%_wO%axO~O`%[O!{%_O%R%YO'^$dO~P8wO!d%`O!g%dO~O!d%eO~O!TSO~O_$^O'T%mO'W$^O~O_$^O'T%pO'W$^O~O_$^O'T%rO'W$^O~OS!WO'U!XO'V%vO~OQ[XZ[Xj[Xu[Xv[Xx[X!R[X!RdX!a[X!b[X!d[X!j[X!{[X!{dX#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X~O!O[X!OdX~P;dO!Q%xO!O&iX!O&nX!R&iX!R&nX~P'dO!R%zO!O'jX~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!R%zO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O!O'jX~P>aO!O&PO~Ox&SO!W&^O!X&VO!Y&VO'^$dO~O]&TOk&TO!Q&WO'g&QO!S'kP!S'vP~P@dO!O'sX!R'sX!]'sX!c'sX'p'sX~O!{'sX#W#PX!S'sX~PA]O!{&_O!O'uX!R'uX~O!R&`O!O'tX~O!O&cO~O!{#eO~PA]OP&gO!T&dO!o&fO']$bO~Oc&lO!d$ZO']$bO~Ou$oO!d$nO~O!S&mO~P`Ou!{Ov!{Ox!|O!b!yO!d!zO'fQOQ!faZ!faj!fa!R!fa!a!fa!j!fa#[!fa#]!fa#^!fa#_!fa#`!fa#a!fa#b!fa#c!fa#e!fa#g!fa#i!fa#j!fa'p!fa'w!fa'x!fa~O_!fa'W!fa!O!fa!c!fan!fa!T!fa%Q!fa!]!fa~PCfO!c&nO~O!]!wO!{&pO'p&oO!R'rX_'rX'W'rX~O!c'rX~PFOO!R&tO!c'qX~O!c&vO~Ox$uO!T$vO#V&wO']$bO~OQTORTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9aO'fQO'oYO'|aO~O]#qOh$QOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO']&{O'b$PO'f#sO~O#W&}O~O]#qOh$QOj#rOk#qOl#qOq$ROs$SOx#yO!T#zO!_$XO!d#vO#V$YO#t$VO$_$TO$a$UO$d$WO']&{O'b$PO'f#sO~O'a'mP~PJjO!Q'RO!c'nP~P){O'g'TO'oYO~OQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!T!bO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O']'cO'fQO'oYO'|;^O~O!d!zO~O!R#bO_$]a'W$]a!c$]a!O$]a!T$]a%Q$]a!]$]a~O#d'jO~PIWO!]'lO!T'yX#w'yX#z'yX$R'yX~Ou'mO~P! YOu'mO!T'yX#w'yX#z'yX$R'yX~O!T'oO#w'sO#z'nO$R'tO~O!Q'wO~PLbO#z#fO$R'zO~OP$eXu$eXx$eX!b$eX'w$eX'x$eX~OPfX!RfX!{fX'afX'a$eX~P!!rOk'|O~OS'}O'U(OO'V(QO~OP(ZOu(SOx(TO'w(VO'x(XO~O'a(RO~P!#{O'a([O~O]#qOh$QOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO'b$PO'f#sO~O!Q(`O'](]O!c'}P~P!$jO#W(bO~O!d(cO~O!Q(hO'](eO!O(OP~P!$jOj(uOx(mO!W(sO!X(lO!Y(lO!d(cO!x(tO$w(oO'^$dO'g(jO~O!S(rO~P!&jO!b!yOP'eXu'eXx'eX'w'eX'x'eX!R'eX!{'eX~O'a'eX#m'eX~P!'cOP(xO!{(wO!R'dX'a'dX~O!R(yO'a'cX~O']${O'a'cP~O'](|O~O!d)RO~O']&{O~Ox$uO!Q!rO!T$vO#U!uO#V!rO']$bO!c'qP~O!]!wO#W)VO~OQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_!^a!R!^a'W!^a!O!^a!c!^an!^a!T!^a%Q!^a!]!^a~P!)wOP)_O!T&dO!o)^O%Q)]O'b$PO~O!])aO!T'`X_'`X!R'`X'W'`X~O!d$ZO'b$PO~O!d$ZO']$bO'b$PO~O!]!wO#W&}O~O])lO%R)mO'])iO!S(VP~O!R)nO^(UX~O'g'TO~OZ)rO~O^)sO~O!T$lO']$bO'^$dO^(UP~Ox$uO!Q)xO!R&`O!T$vO']$bO!O'tP~O]&ZOk&ZO!Q)yO'g'TO!S'vP~O!R)zO_(RX'W(RX~O!{*OO'b$PO~OP*RO!T#zO'b$PO~O!T*TO~Ou*VO!TSO~O!n*[O~Oc*aO~O'](|O!S(TP~Oc$jO~O%RtO']${O~P8wOZ*gO^*fO~OQTORTO]cObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#x^O%PqO'fQO'oYO'|aO~O!T!bO#t!lO']9aO~P!1_O^*fO_$^O'W$^O~O_*kO#d*mO%T*mO%U*mO~P){O!d%`O~O%t*rO~O!T*tO~O&V*vO&X*wOQ&SaR&SaX&Sa]&Sa_&Sab&Sac&Sah&Saj&Sak&Sal&Saq&Sas&Sax&Sa{&Sa|&Sa}&Sa!T&Sa!_&Sa!d&Sa!g&Sa!h&Sa!i&Sa!j&Sa!k&Sa!n&Sa#d&Sa#t&Sa#x&Sa%P&Sa%R&Sa%T&Sa%U&Sa%X&Sa%Z&Sa%^&Sa%_&Sa%a&Sa%n&Sa%t&Sa%v&Sa%x&Sa%z&Sa%}&Sa&T&Sa&Z&Sa&]&Sa&_&Sa&a&Sa&c&Sa'S&Sa']&Sa'f&Sa'o&Sa'|&Sa!S&Sa%{&Sa`&Sa&Q&Sa~O']*|O~On+PO~O!O&ia!R&ia~P!)wO!Q+TO!O&iX!R&iX~P){O!R%zO!O'ja~O!O'ja~P>aO!R&`O!O'ta~O!RwX!R!ZX!SwX!S!ZX!]wX!]!ZX!d!ZX!{wX'b!ZX~O!]+YO!{+XO!R#TX!R'lX!S#TX!S'lX!]'lX!d'lX'b'lX~O!]+[O!d$ZO'b$PO!R!VX!S!VX~O]&ROk&ROx&SO'g(jO~OQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!T!bO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O'fQO'oYO'|;^O~O']:SO~P!;jO!R+`O!S'kX~O!S+bO~O!]+YO!{+XO!R#TX!S#TX~O!R+cO!S'vX~O!S+eO~O]&ROk&ROx&SO'^$dO'g(jO~O!X+fO!Y+fO~P!>hOx$uO!Q+hO!T$vO']$bO!O&nX!R&nX~O_+lO!W+oO!X+kO!Y+kO!r+sO!s+qO!t+rO!u+pO!x+tO'^$dO'g(jO'o+iO~O!S+nO~P!?iOP+yO!T&dO!o+xO~O!{,PO!R'ra!c'ra_'ra'W'ra~O!]!wO~P!@sO!R&tO!c'qa~Ox$uO!Q,SO!T$vO#U,UO#V,SO']$bO!R&pX!c&pX~O_#Oi!R#Oi'W#Oi!O#Oi!c#Oin#Oi!T#Oi%Q#Oi!]#Oi~P!)wOP;tOu(SOx(TO'w(VO'x(XO~O#W!za!R!za!c!za!{!za!T!za_!za'W!za!O!za~P!BpO#W'eXQ'eXZ'eX_'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX'W'eX'f'eX'p'eX!c'eX!O'eX!T'eXn'eX%Q'eX!]'eX~P!'cO!R,_O'a'mX~P!#{O'a,aO~O!R,bO!c'nX~P!)wO!c,eO~O!O,fO~OQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zi_#Zij#Zi!R#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O#[#Zi~P!FfO#[#PO~P!FfOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO'fQOZ#Zi_#Zi!R#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~Oj#Zi~P!IQOj#RO~P!IQOQ#^Oj#ROu!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO'fQO_#Zi!R#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P!KlOZ#dO!a#TO#a#TO#b#TO#c#TO~P!KlOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO'fQO_#Zi!R#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'w#Zi~P!NdO'w!}O~P!NdOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO'fQO'w!}O_#Zi!R#Zi#i#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'x#Zi~P##OO'x#OO~P##OOQ#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO'fQO'w!}O'x#OO~O_#Zi!R#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P#%jOQ[XZ[Xj[Xu[Xv[Xx[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X!R[X!S[X~O#m[X~P#'}OQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO#i9nO#j9oO'fQO'p#[O'w!}O'x#OO~O#m,hO~P#*XOQ'iXZ'iXj'iXu'iXv'iXx'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX!R'iX~O!{9sO#o9sO#c'iX#m'iX!S'iX~P#,SO_&sa!R&sa'W&sa!c&san&sa!O&sa!T&sa%Q&sa!]&sa~P!)wOQ#ZiZ#Zi_#Zij#Ziv#Zi!R#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'f#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P!BpO_#ni!R#ni'W#ni!O#ni!c#nin#ni!T#ni%Q#ni!]#ni~P!)wO#z,jO~O#z,kO~O!]'lO!{,lO!T$OX#w$OX#z$OX$R$OX~O!Q,mO~O!T'oO#w,oO#z'nO$R,pO~O!R9pO!S'hX~P#*XO!S,qO~O$R,sO~OS'}O'U(OO'V,vO~O],yOk,yO!O,zO~O!RdX!]dX!cdX!c$eX'pdX~P!!rO!c-QO~P!BpO!R-RO!]!wO'p&oO!c'}X~O!c-WO~O!Q(`O']$bO!c'}P~O#W-YO~O!O$eX!R$eX!]$lX~P!!rO!R-ZO!O(OX~P!BpO!]-]O~O!O-_O~Oj-cO!]!wO!d$ZO'b$PO'p&oO~O!])aO~O_$^O!R-hO'W$^O~O!S-jO~P!&jO!X-kO!Y-kO'^$dO'g(jO~Ox-mO'g(jO~O!x-nO~O']${O!R&xX'a&xX~O!R(yO'a'ca~O'a-sO~Ou-tOv-tOx-uOPra'wra'xra!Rra!{ra~O'ara#mra~P#7pOu(SOx(TOP$^a'w$^a'x$^a!R$^a!{$^a~O'a$^a#m$^a~P#8fOu(SOx(TOP$`a'w$`a'x$`a!R$`a!{$`a~O'a$`a#m$`a~P#9XO]-vO~O#W-wO~O'a$na!R$na!{$na#m$na~P!#{O#W-zO~OP.TO!T&dO!o.SO%Q.RO~O]#qOj#rOk#qOl#qOq$ROs9tOx#yO!T#zO!_;eO!d#vO#V9}O#t$VO$_9wO$a9zO$d$WO'b$PO'f#sO~Oh.VO'].UO~P#:yO!])aO!T'`a_'`a!R'`a'W'`a~O#W.]O~OZ[X!RdX!SdX~O!R.^O!S(VX~O!S.`O~OZ.aO~O].cO'])iO~O!T$lO']$bO^'QX!R'QX~O!R)nO^(Ua~O!c.fO~P!)wO].hO~OZ.iO~O^.jO~OP.TO!T&dO!o.SO%Q.RO'b$PO~O!R)zO_(Ra'W(Ra~O!{.pO~OP.sO!T#zO~O'g'TO!S(SP~OP.}O!T.yO!o.|O%Q.{O'b$PO~OZ/XO!R/VO!S(TX~O!S/YO~O^/[O_$^O'W$^O~O]/]O~O]/^O'](|O~O#c/_O%r/`O~P0zO!{#eO#c/_O%r/`O~O_/aO~P){O_/cO~O%{/gOQ%yiR%yiX%yi]%yi_%yib%yic%yih%yij%yik%yil%yiq%yis%yix%yi{%yi|%yi}%yi!T%yi!_%yi!d%yi!g%yi!h%yi!i%yi!j%yi!k%yi!n%yi#d%yi#t%yi#x%yi%P%yi%R%yi%T%yi%U%yi%X%yi%Z%yi%^%yi%_%yi%a%yi%n%yi%t%yi%v%yi%x%yi%z%yi%}%yi&T%yi&Z%yi&]%yi&_%yi&a%yi&c%yi'S%yi']%yi'f%yi'o%yi'|%yi!S%yi`%yi&Q%yi~O`/mO!S/kO&Q/lO~P`O!TSO!d/oO~O&X*wOQ&SiR&SiX&Si]&Si_&Sib&Sic&Sih&Sij&Sik&Sil&Siq&Sis&Six&Si{&Si|&Si}&Si!T&Si!_&Si!d&Si!g&Si!h&Si!i&Si!j&Si!k&Si!n&Si#d&Si#t&Si#x&Si%P&Si%R&Si%T&Si%U&Si%X&Si%Z&Si%^&Si%_&Si%a&Si%n&Si%t&Si%v&Si%x&Si%z&Si%}&Si&T&Si&Z&Si&]&Si&_&Si&a&Si&c&Si'S&Si']&Si'f&Si'o&Si'|&Si!S&Si%{&Si`&Si&Q&Si~O!R#bOn$]a~O!O&ii!R&ii~P!)wO!R%zO!O'ji~O!R&`O!O'ti~O!O/uO~O!R!Va!S!Va~P#*XO]&ROk&RO!Q/{O'g(jO!R&jX!S&jX~P@dO!R+`O!S'ka~O]&ZOk&ZO!Q)yO'g'TO!R&oX!S&oX~O!R+cO!S'va~O!O'ui!R'ui~P!)wO_$^O!]!wO!d$ZO!j0VO!{0TO'W$^O'b$PO'p&oO~O!S0YO~P!?iO!X0ZO!Y0ZO'^$dO'g(jO'o+iO~O!W0[O~P#MSO!TSO!W0[O!u0^O!x0_O~P#MSO!W0[O!s0aO!t0aO!u0^O!x0_O~P#MSO!T&dO~O!T&dO~P!BpO!R'ri!c'ri_'ri'W'ri~P!)wO!{0jO!R'ri!c'ri_'ri'W'ri~O!R&tO!c'qi~Ox$uO!T$vO#V0lO']$bO~O#WraQraZra_rajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra'Wra'fra'pra!cra!Ora!Tranra%Qra!]ra~P#7pO#W$^aQ$^aZ$^a_$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a'W$^a'f$^a'p$^a!c$^a!O$^a!T$^an$^a%Q$^a!]$^a~P#8fO#W$`aQ$`aZ$`a_$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a'W$`a'f$`a'p$`a!c$`a!O$`a!T$`an$`a%Q$`a!]$`a~P#9XO#W$naQ$naZ$na_$naj$nav$na!R$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na'W$na'f$na'p$na!c$na!O$na!T$na!{$nan$na%Q$na!]$na~P!BpO_#Oq!R#Oq'W#Oq!O#Oq!c#Oqn#Oq!T#Oq%Q#Oq!]#Oq~P!)wO!R&kX'a&kX~PJjO!R,_O'a'ma~O!Q0tO!R&lX!c&lX~P){O!R,bO!c'na~O!R,bO!c'na~P!)wO#m!fa!S!fa~PCfO#m!^a!R!^a!S!^a~P#*XO!T1XO#x^O$P1YO~O!S1^O~On1_O~P!BpO_$Yq!R$Yq'W$Yq!O$Yq!c$Yqn$Yq!T$Yq%Q$Yq!]$Yq~P!)wO!O1`O~O],yOk,yO~Ou(SOx(TO'x(XOP$xi'w$xi!R$xi!{$xi~O'a$xi#m$xi~P$.POu(SOx(TOP$zi'w$zi'x$zi!R$zi!{$zi~O'a$zi#m$zi~P$.rO'p#[O~P!BpO!Q1cO']$bO!R&tX!c&tX~O!R-RO!c'}a~O!R-RO!]!wO!c'}a~O!R-RO!]!wO'p&oO!c'}a~O'a$gi!R$gi!{$gi#m$gi~P!#{O!Q1kO'](eO!O&vX!R&vX~P!$jO!R-ZO!O(Oa~O!R-ZO!O(Oa~P!BpO!]!wO~O!]!wO#c1sO~Oj1vO!]!wO'p&oO~O!R'di'a'di~P!#{O!{1yO!R'di'a'di~P!#{O!c1|O~O_$Zq!R$Zq'W$Zq!O$Zq!c$Zqn$Zq!T$Zq%Q$Zq!]$Zq~P!)wO!R2QO!T(PX~P!BpO!T&dO%Q2TO~O!T&dO%Q2TO~P!BpO!T$eX$u[X_$eX!R$eX'W$eX~P!!rO$u2XOPgXugXxgX!TgX'wgX'xgX_gX!RgX'WgX~O$u2XO~O]2_O%R2`O'])iO!R'PX!S'PX~O!R.^O!S(Va~OZ2dO~O^2eO~O]2hO~OP2jO!T&dO!o2iO%Q2TO~O_$^O'W$^O~P!BpO!T#zO~P!BpO!R2oO!{2qO!S(SX~O!S2rO~Ox;oO!W2{O!X2tO!Y2tO!r2zO!s2yO!t2yO!x2xO'^$dO'g(jO'o+iO~O!S2wO~P$7ZOP3SO!T.yO!o3RO%Q3QO~OP3SO!T.yO!o3RO%Q3QO'b$PO~O'](|O!R'OX!S'OX~O!R/VO!S(Ta~O]3^O'g3]O~O]3_O~O^3aO~O!c3dO~P){O_3fO~O_3fO~P){O#c3hO%r3iO~PFOO`/mO!S3mO&Q/lO~P`O!]3oO~O!R#Ti!S#Ti~P#*XO!{3qO!R#Ti!S#Ti~O!R!Vi!S!Vi~P#*XO_$^O!{3xO'W$^O~O_$^O!]!wO!{3xO'W$^O~O!X3|O!Y3|O'^$dO'g(jO'o+iO~O_$^O!]!wO!d$ZO!j3}O!{3xO'W$^O'b$PO'p&oO~O!W4OO~P$;xO!W4OO!u4RO!x4SO~P$;xO_$^O!]!wO!j3}O!{3xO'W$^O'p&oO~O!R'rq!c'rq_'rq'W'rq~P!)wO!R&tO!c'qq~O#W$xiQ$xiZ$xi_$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi'W$xi'f$xi'p$xi!c$xi!O$xi!T$xin$xi%Q$xi!]$xi~P$.PO#W$ziQ$ziZ$zi_$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi'W$zi'f$zi'p$zi!c$zi!O$zi!T$zin$zi%Q$zi!]$zi~P$.rO#W$giQ$giZ$gi_$gij$giv$gi!R$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi'W$gi'f$gi'p$gi!c$gi!O$gi!T$gi!{$gin$gi%Q$gi!]$gi~P!BpO!R&ka'a&ka~P!#{O!R&la!c&la~P!)wO!R,bO!c'ni~O#m#Oi!R#Oi!S#Oi~P#*XOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zij#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~O#[#Zi~P$EiO#[9eO~P$EiOQ#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO'fQOZ#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~Oj#Zi~P$GqOj9gO~P$GqOQ#^Oj9gOu!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO'fQO#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P$IyOZ9rO!a9iO#a9iO#b9iO#c9iO~P$IyOQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO'fQO#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'x#Zi!R#Zi!S#Zi~O'w#Zi~P$L_O'w!}O~P$L_OQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO'fQO'w!}O#i#Zi#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~O'x#Zi~P$NgO'x#OO~P$NgOQ#^OZ9rOj9gOu!{Ov!{Ox!|O!a9iO!b!yO!d!zO!j#^O#[9eO#]9fO#^9fO#_9fO#`9hO#a9iO#b9iO#c9iO#e9jO#g9lO#i9nO'fQO'w!}O'x#OO~O#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~P%!oO_#ky!R#ky'W#ky!O#ky!c#kyn#ky!T#ky%Q#ky!]#ky~P!)wOP;vOu(SOx(TO'w(VO'x(XO~OQ#ZiZ#Zij#Ziv#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'f#Zi'p#Zi!R#Zi!S#Zi~P%%aO!b!yOP'eXu'eXx'eX'w'eX'x'eX!S'eX~OQ'eXZ'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX#m'eX'f'eX'p'eX!R'eX~P%'eO#m#ni!R#ni!S#ni~P#*XO!S4eO~O!R&sa!S&sa~P#*XO!]!wO'p&oO!R&ta!c&ta~O!R-RO!c'}i~O!R-RO!]!wO!c'}i~O'a$gq!R$gq!{$gq#m$gq~P!#{O!O&va!R&va~P!BpO!]4lO~O!R-ZO!O(Oi~P!BpO!R-ZO!O(Oi~O!O4pO~O!]!wO#c4uO~Oj4vO!]!wO'p&oO~O!O4xO~O'a$iq!R$iq!{$iq#m$iq~P!#{O_$Zy!R$Zy'W$Zy!O$Zy!c$Zyn$Zy!T$Zy%Q$Zy!]$Zy~P!)wO!R2QO!T(Pa~O!T&dO%Q4}O~O!T&dO%Q4}O~P!BpO_#Oy!R#Oy'W#Oy!O#Oy!c#Oyn#Oy!T#Oy%Q#Oy!]#Oy~P!)wOZ5QO~O]5SO'])iO~O!R.^O!S(Vi~O]5VO~O^5WO~O'g'TO!R&{X!S&{X~O!R2oO!S(Sa~O!S5eO~P$7ZOx;sO'g(jO'o+iO~O!W5hO!X5gO!Y5gO!x0_O'^$dO'g(jO'o+iO~O!s5iO!t5iO~P%0^O!X5gO!Y5gO'^$dO'g(jO'o+iO~O!T.yO~O!T.yO%Q5kO~O!T.yO%Q5kO~P!BpOP5pO!T.yO!o5oO%Q5kO~OZ5uO!R'Oa!S'Oa~O!R/VO!S(Ti~O]5xO~O!c5yO~O!c5zO~O!c5{O~O!c5{O~P){O_5}O~O!]6QO~O!c6RO~O!R'ui!S'ui~P#*XO_$^O'W$^O~P!)wO_$^O!{6WO'W$^O~O_$^O!]!wO!{6WO'W$^O~O!X6]O!Y6]O'^$dO'g(jO'o+iO~O_$^O!]!wO!j6^O!{6WO'W$^O'p&oO~O!d$ZO'b$PO~P%4xO!W6_O~P%4gO!R'ry!c'ry_'ry'W'ry~P!)wO#W$gqQ$gqZ$gq_$gqj$gqv$gq!R$gq!a$gq!b$gq!d$gq!j$gq#[$gq#]$gq#^$gq#_$gq#`$gq#a$gq#b$gq#c$gq#e$gq#g$gq#i$gq#j$gq'W$gq'f$gq'p$gq!c$gq!O$gq!T$gq!{$gqn$gq%Q$gq!]$gq~P!BpO#W$iqQ$iqZ$iq_$iqj$iqv$iq!R$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq'W$iq'f$iq'p$iq!c$iq!O$iq!T$iq!{$iqn$iq%Q$iq!]$iq~P!BpO!R&li!c&li~P!)wO#m#Oq!R#Oq!S#Oq~P#*XOu-tOv-tOx-uOPra'wra'xra!Sra~OQraZrajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra#mra'fra'pra!Rra~P%;OOu(SOx(TOP$^a'w$^a'x$^a!S$^a~OQ$^aZ$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a#m$^a'f$^a'p$^a!R$^a~P%=SOu(SOx(TOP$`a'w$`a'x$`a!S$`a~OQ$`aZ$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a#m$`a'f$`a'p$`a!R$`a~P%?WOQ$naZ$naj$nav$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na#m$na'f$na'p$na!R$na!S$na~P%%aO#m$Yq!R$Yq!S$Yq~P#*XO#m$Zq!R$Zq!S$Zq~P#*XO!S6hO~O#m6iO~P!#{O!]!wO!R&ti!c&ti~O!]!wO'p&oO!R&ti!c&ti~O!R-RO!c'}q~O!O&vi!R&vi~P!BpO!R-ZO!O(Oq~O!O6oO~P!BpO!O6oO~O!R'dy'a'dy~P!#{O!R&ya!T&ya~P!BpO!T$tq_$tq!R$tq'W$tq~P!BpOZ6vO~O!R.^O!S(Vq~O]6yO~O!T&dO%Q6zO~O!T&dO%Q6zO~P!BpO!{6{O!R&{a!S&{a~O!R2oO!S(Si~P#*XO!X7RO!Y7RO'^$dO'g(jO'o+iO~O!W7TO!x4SO~P%GXO!T.yO%Q7WO~O!T.yO%Q7WO~P!BpO]7_O'g7^O~O!R/VO!S(Tq~O!c7aO~O!c7aO~P){O!c7cO~O!c7dO~O!R#Ty!S#Ty~P#*XO_$^O!{7jO'W$^O~O_$^O!]!wO!{7jO'W$^O~O!X7mO!Y7mO'^$dO'g(jO'o+iO~O_$^O!]!wO!j7nO!{7jO'W$^O'p&oO~O#m#ky!R#ky!S#ky~P#*XOQ$giZ$gij$giv$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi#m$gi'f$gi'p$gi!R$gi!S$gi~P%%aOu(SOx(TO'x(XOP$xi'w$xi!S$xi~OQ$xiZ$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi#m$xi'f$xi'p$xi!R$xi~P%LjOu(SOx(TOP$zi'w$zi'x$zi!S$zi~OQ$ziZ$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi#m$zi'f$zi'p$zi!R$zi~P%NnO#m$Zy!R$Zy!S$Zy~P#*XO#m#Oy!R#Oy!S#Oy~P#*XO!]!wO!R&tq!c&tq~O!R-RO!c'}y~O!O&vq!R&vq~P!BpO!O7tO~P!BpO!R.^O!S(Vy~O!R2oO!S(Sq~O!X8QO!Y8QO'^$dO'g(jO'o+iO~O!T.yO%Q8TO~O!T.yO%Q8TO~P!BpO!c8WO~O_$^O!{8]O'W$^O~O_$^O!]!wO!{8]O'W$^O~OQ$gqZ$gqj$gqv$gq!a$gq!b$gq!d$gq!j$gq#[$gq#]$gq#^$gq#_$gq#`$gq#a$gq#b$gq#c$gq#e$gq#g$gq#i$gq#j$gq#m$gq'f$gq'p$gq!R$gq!S$gq~P%%aOQ$iqZ$iqj$iqv$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq#m$iq'f$iq'p$iq!R$iq!S$iq~P%%aO'a$|!Z!R$|!Z!{$|!Z#m$|!Z~P!#{O!R&{q!S&{q~P#*XO_$^O!{8oO'W$^O~O#W$|!ZQ$|!ZZ$|!Z_$|!Zj$|!Zv$|!Z!R$|!Z!a$|!Z!b$|!Z!d$|!Z!j$|!Z#[$|!Z#]$|!Z#^$|!Z#_$|!Z#`$|!Z#a$|!Z#b$|!Z#c$|!Z#e$|!Z#g$|!Z#i$|!Z#j$|!Z'W$|!Z'f$|!Z'p$|!Z!c$|!Z!O$|!Z!T$|!Z!{$|!Zn$|!Z%Q$|!Z!]$|!Z~P!BpOP;uOu(SOx(TO'w(VO'x(XO~O!S!za!W!za!X!za!Y!za!r!za!s!za!t!za!x!za'^!za'g!za'o!za~P&,_O!W'eX!X'eX!Y'eX!r'eX!s'eX!t'eX!x'eX'^'eX'g'eX'o'eX~P%'eOQ$|!ZZ$|!Zj$|!Zv$|!Z!a$|!Z!b$|!Z!d$|!Z!j$|!Z#[$|!Z#]$|!Z#^$|!Z#_$|!Z#`$|!Z#a$|!Z#b$|!Z#c$|!Z#e$|!Z#g$|!Z#i$|!Z#j$|!Z#m$|!Z'f$|!Z'p$|!Z!R$|!Z!S$|!Z~P%%aO!Wra!Xra!Yra!rra!sra!tra!xra'^ra'gra'ora~P%;OO!W$^a!X$^a!Y$^a!r$^a!s$^a!t$^a!x$^a'^$^a'g$^a'o$^a~P%=SO!W$`a!X$`a!Y$`a!r$`a!s$`a!t$`a!x$`a'^$`a'g$`a'o$`a~P%?WO!S$na!W$na!X$na!Y$na!r$na!s$na!t$na!x$na'^$na'g$na'o$na~P&,_O!W$xi!X$xi!Y$xi!r$xi!s$xi!t$xi!x$xi'^$xi'g$xi'o$xi~P%LjO!W$zi!X$zi!Y$zi!r$zi!s$zi!t$zi!x$zi'^$zi'g$zi'o$zi~P%NnO!S$gi!W$gi!X$gi!Y$gi!r$gi!s$gi!t$gi!x$gi'^$gi'g$gi'o$gi~P&,_O!S$gq!W$gq!X$gq!Y$gq!r$gq!s$gq!t$gq!x$gq'^$gq'g$gq'o$gq~P&,_O!S$iq!W$iq!X$iq!Y$iq!r$iq!s$iq!t$iq!x$iq'^$iq'g$iq'o$iq~P&,_O!S$|!Z!W$|!Z!X$|!Z!Y$|!Z!r$|!Z!s$|!Z!t$|!Z!x$|!Z'^$|!Z'g$|!Z'o$|!Z~P&,_On'hX~P.jOn[X!O[X!c[X%r[X!T[X%Q[X!][X~P$zO!]dX!c[X!cdX'pdX~P;dOQ9^OR9^O]cOb;`Oc!jOhcOj9^OkcOlcOq9^Os9^OxRO{cO|cO}cO!TSO!_9`O!dUO!g9^O!h9^O!i9^O!j9^O!k9^O!n!iO#t!lO#x^O']'cO'fQO'oYO'|;^O~O]#qOh$QOj#rOk#qOl#qOq$ROs9uOx#yO!T#zO!_;fO!d#vO#V:OO#t$VO$_9xO$a9{O$d$WO']&{O'b$PO'f#sO~O!R9pO!S$]a~O]#qOh$QOj#rOk#qOl#qOq$ROs9vOx#yO!T#zO!_;gO!d#vO#V:PO#t$VO$_9yO$a9|O$d$WO']&{O'b$PO'f#sO~O#d'jO~P&<WO!S[X!SdX~P;dO!]9dO~O#W9cO~O!]!wO#W9cO~O!{9sO~O#c9iO~O!{:QO!R'uX!S'uX~O!{9sO!R'sX!S'sX~O#W:RO~O'a:TO~P!#{O#W:[O~O#W:]O~O#W:^O~O!]!wO#W:_O~O!]!wO#W:RO~O#m:`O~P#*XO#W:aO~O#W:bO~O#W:cO~O#W:dO~O#W:eO~O#W:fO~O#W:gO~O#W:hO~O!O:iO~O#m:jO~P!#{O#m:kO~P!#{O#m:lO~P!#{O!O:mO~P!BpO!O:mO~O!O:nO~P!BpO!]!wO#c;lO~O!]!wO#c;nO~O#x~!b!r!t!u#U#V'|$_$a$d$u%P%Q%R%X%Z%^%_%a%c~UT#x'|#]}'Y'Z#z'Y']'g~",goto:"#Kk(ZPPPPPPPP([P(lP*`PPPP-zPP.a3s7o8SP8SPPP8SP:U8SP8SP:YPP:`P:t?VPPPP?ZPPPP?ZA{PPPBRDdP?ZPFwPPPPHp?ZPPPPPJi?ZPPMjNgPPPPNk!!TP!!]!#^PNg?Z?Z!&n!)i!.[!.[!1kPPP!1r!4h?ZPPPPPPPPPP!7_P!8pPP?Z!9}P?ZP?Z?Z?Z?ZP?Z!;dPP!>]P!AQ!AY!A^!A^P!>YP!Ab!AbP!DVP!DZ?Z?Z!Da!GT8SP8SP8S8SP!HW8S8S!Jf8S!M_8S# g8S8S#!T#$c#$c#$g#$c#$oP#$cP8S#%k8S#'X8S8S-zPPP#(yPP#)c#)cP#)cP#)x#)cPP#*OP#)uP#)u#*b!!X#)u#+P#+V#+Y([#+]([P#+d#+d#+dP([P([P([P([PP([P#+j#+mP#+m([P#+qP#+tP([P([P([P([P([P([([#+z#,U#,[#,b#,p#,v#,|#-W#-^#-m#-s#.R#.X#._#.m#/S#0z#1Y#1`#1f#1l#1r#1|#2S#2Y#2d#2v#2|PPPPPPPP#3SPP#3v#7OPP#8f#8m#8uPP#>a#@t#Fp#Fs#Fv#GR#GUPP#GX#G]#Gz#Hq#Hu#IZPP#I_#Ie#IiP#Il#Ip#Is#Jc#Jy#KO#KR#KU#K[#K_#Kc#KgmhOSj}!n$]%c%f%g%i*o*t/g/jQ$imQ$ppQ%ZyS&V!b+`Q&k!jS(l#z(qQ)g$jQ)t$rQ*`%TQ+f&^S+k&d+mQ+}&lQ-k(sQ/U*aY0Z+o+p+q+r+sS2t.y2vU3|0[0^0aU5g2y2z2{S6]4O4RS7R5h5iQ7m6_R8Q7T$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!j'e#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ(}$SQ)l$lQ*b%WQ*i%`Q,X9tQ.W)aQ.c)mQ/^*gQ2_.^Q3Z/VQ4^9vQ5S2`R8{9upeOSjy}!n$]%Y%c%f%g%i*o*t/g/jR*d%[&WVOSTjkn}!S!W!k!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%z&S&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;`;a[!cRU!]!`%x&WQ$clQ$hmS$mp$rv$wrs!r!u$Z$u&`&t&w)x)y)z*m+Y+h,S,U/o0lQ%PwQ&h!iQ&j!jS(_#v(cS)f$i$jQ)j$lQ)w$tQ*Z%RQ*_%TS+|&k&lQ-V(`Q.[)gQ.b)mQ.d)nQ.g)rQ/P*[S/T*`*aQ0h+}Q1b-RQ2^.^Q2b.aQ2g.iQ3Y/UQ4i1cQ5R2`Q5U2dQ6u5QR7w6vx#xa!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k!Y$fm!j$h$i$j&U&j&k&l(k)f)g+]+j+|+}-d.[0Q0W0]0h1u3{4Q6Z7k8^Q)`$cQ*P$|Q*S$}Q*^%TQ.k)wQ/O*ZU/S*_*`*aQ3T/PS3X/T/UQ5b2sQ5t3YS7P5c5fS8O7Q7SQ8f8PQ8u8g#[;b!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd;c9d9x9{:O:V:Y:]:b:e:ke;d9r9y9|:P:W:Z:^:c:f:lW#}a$P(y;^S$|t%YQ$}uQ%OvR)}$z%P#|a!w!y#d#v#y$T$U$Y&g'}(W(Y(Z(b(h(w(x)])_)a*O*R+y,_-Y-Z-]-w.R.T.p.s.{.}1a1k1s1y2Q2T2X2j3Q3S4l4u4}5k5p6i6z7W8T9d9r9w9x9y9z9{9|9}:O:P:U:V:W:X:Y:Z:[:]:^:a:b:c:d:e:f:j:k:l;^;i;j;k;l;n;t;u;vT(O#s(PX)O$S9t9u9vU&Z!b$v+cQ'U!{Q)q$oQ.t*TQ1z-tR5^2o&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a$]#aZ!_!o$a%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,i,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|T!XQ!Y&_cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ&X!bR/|+`Y&R!b&V&^+`+fS(k#z(qS+j&d+mS-d(l(sQ-e(mQ-l(tQ.v*VU0W+k+o+pU0]+q+r+sS0b+t2xQ1u-kQ1w-mQ1x-nS2s.y2vU3{0Z0[0^Q4P0_Q4Q0aS5c2t2{S5f2y2zU6Z3|4O4RQ6`4SS7Q5g5hQ7S5iS7k6]6_S8P7R7TQ8^7mQ8g8QQ;h;oR;m;slhOSj}!n$]%c%f%g%i*o*t/g/jQ%k!QS&x!v9cQ)d$gQ*X%PQ*Y%QQ+z&iS,]&}:RS-y)V:_Q.Y)eQ.x*WQ/n*vQ/p*wQ/x+ZQ0`+qQ0f+{S2P-z:gQ2Y.ZS2].]:hQ3r/zQ3u0RQ4U0gQ5P2ZQ6T3tQ6X3zQ6a4VQ7e6RQ7h6YQ8Y7iQ8l8[R8x8n$W#`Z!_!o%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|W(v#{&|1V8qT)Z$a,i$W#_Z!_!o%w%}&y'Q'W'X'Y'Z'[']'^'_'`'a'b'd'g'k'u)p+R+^+g,O,^,d,g,w-x/v/y0i0s0w0x0y0z0{0|0}1O1P1Q1R1S1T1W1]2O2[3s3v4W4[4]4b4c5`6S6V6b6f6g7g7z8Z8m8y9_:|Q'f#`S)Y$a,iR-{)Z&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ%f{Q%g|Q%i!OQ%j!PR/f*rQ&e!iQ)[$cQ+w&hS.Q)`)wS0c+u+vW2S-}.O.P.kS4T0d0eU4|2U2V2WU6s4{5Y5ZQ7v6tR8b7yT+l&d+mS+j&d+mU0W+k+o+pU0]+q+r+sS0b+t2xS2s.y2vU3{0Z0[0^Q4P0_Q4Q0aS5c2t2{S5f2y2zU6Z3|4O4RQ6`4SS7Q5g5hQ7S5iS7k6]6_S8P7R7TQ8^7mR8g8QS+l&d+mT2u.y2vS&r!q/dQ-U(_Q-b(kS0V+j2sQ1g-VS1p-c-lU3}0]0b5fQ4h1bS4s1v1xU6^4P4Q7SQ6k4iQ6r4vR7n6`Q!xXS&q!q/dQ)W$[Q)b$eQ)h$kQ,Q&rQ-T(_Q-a(kQ-f(nQ.X)cQ/Q*]S0U+j2sS1f-U-VS1o-b-lQ1r-eQ1t-gQ3V/RW3y0V0]0b5fQ4g1bQ4k1gS4o1p1xQ4t1wQ5r3WW6[3}4P4Q7SS6j4h4iS6n4p:iQ6p4sQ6}5aQ7[5sS7l6^6`Q7r6kS7s6o:mQ7u6rQ7|7OQ8V7]Q8_7nS8a7t:nQ8d7}Q8s8eQ9Q8tQ9X9RQ:u:pQ;T:zQ;U:{Q;V;hR;[;m$rWORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oS!xn!k!j:o#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR:u;`$rXORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oQ$[b!Y$em!j$h$i$j&U&j&k&l(k)f)g+]+j+|+}-d.[0Q0W0]0h1u3{4Q6Z7k8^S$kn!kQ)c$fQ*]%TW/R*^*_*`*aU3W/S/T/UQ5a2sS5s3X3YU7O5b5c5fQ7]5tU7}7P7Q7SS8e8O8PS8t8f8gQ9R8u!j:p#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aQ:z;_R:{;`$f]OSTjk}!S!W!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oY!hRU!]!`%xv$wrs!r!u$Z$u&`&t&w)x)y)z*m+Y+h,S,U/o0lQ*j%`!h:q#]#k'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR:t&WS&[!b$vR0O+c$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!j'e#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aR*i%`$roORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8oQ'U!{!k:r#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a!h#VZ!_$a%w%}&y'Q'_'`'a'b'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_!R9k'd'u+^,i/v/y0w1P1Q1R1S1W1]3s4]4b4c5`6S6b6f6g7z:|!d#XZ!_$a%w%}&y'Q'a'b'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_}9m'd'u+^,i/v/y0w1R1S1W1]3s4]4b4c5`6S6b6f6g7z:|!`#]Z!_$a%w%}&y'Q'g'k)p+R+g,O,^,d,w-x0i0s1T2O2[3v4W4[6V7g8Z8m8y9_Q1a-Px;a'd'u+^,i/v/y0w1W1]3s4]4b4c5`6S6b6f6g7z:|Q;i;pQ;j;qR;k;r&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aS#l`#mR1Y,l&e_ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,l,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aS#g^#nT'n#i'rT#h^#nT'p#i'r&e`ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$]$n%[%_%`%c%e%f%g%i%m%x%z&S&W&_&f&p&}'R'w(R)V)^*k*o*t+T+X+[+x,P,b,h,l,m-u-z.S.].|/_/`/a/c/g/j/l/{0T0j0t1X2i2q3R3f3h3i3q3x5o5}6W6{7j8]8o9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;aT#l`#mQ#o`R'y#m$rbORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$]$n%[%_%`%c%e%f%g%i%m%x%z&S&_&f&p&}'R(R)V)^*k*o*t+T+x,P,b,h-u-z.S.].|/_/`/a/c/g/j/l0T0j0t2i3R3f3h3i3x5o5}6W7j8]8o!k;_#]#k&W'w+X+[,m/{1X2q3q6{9^9`9c9e9f9g9h9i9j9k9l9m9n9o9p9s:Q:R:T:_:`:g:h;a#RdOSUj}!S!W!n!|#k$]%[%_%`%c%e%f%g%i%m&S&f'w)^*k*o*t+x,m-u.S.|/_/`/a/c/g/j/l1X2i3R3f3h3i5o5}x#{a!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k#[&|!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vQ)S$WQ,x(Sd1V9r9y9|:P:W:Z:^:c:f:le8q9d9x9{:O:V:Y:]:b:e:kx#wa!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;kQ(d#xS(n#z(qQ)T$XQ-g(o#[:w!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd:x9d9x9{:O:V:Y:]:b:e:kd:y9r9y9|:P:W:Z:^:c:f:lQ:};bQ;O;cQ;P;dQ;Q;eQ;R;fR;S;gx#{a!y$T$U$Y(W(Y(b(w(x,_-Y-w1a1y6i;^;i;j;k#[&|!w#d#v#y&g'}(Z(h)])_)a*O*R+y-Z-].R.T.p.s.{.}1k1s2Q2T2X2j3Q3S4l4u4}5k5p6z7W8T9w9z9}:U:X:[:a:d:j;l;n;t;u;vd1V9r9y9|:P:W:Z:^:c:f:le8q9d9x9{:O:V:Y:]:b:e:klfOSj}!n$]%c%f%g%i*o*t/g/jQ(g#yQ*}%pQ+O%rR1j-Z%O#|a!w!y#d#v#y$T$U$Y&g'}(W(Y(Z(b(h(w(x)])_)a*O*R+y,_-Y-Z-]-w.R.T.p.s.{.}1a1k1s1y2Q2T2X2j3Q3S4l4u4}5k5p6i6z7W8T9d9r9w9x9y9z9{9|9}:O:P:U:V:W:X:Y:Z:[:]:^:a:b:c:d:e:f:j:k:l;^;i;j;k;l;n;t;u;vQ*Q$}Q.r*SQ2m.qR5]2nT(p#z(qS(p#z(qT2u.y2vQ)b$eQ-f(nQ.X)cQ/Q*]Q3V/RQ5r3WQ6}5aQ7[5sQ7|7OQ8V7]Q8d7}Q8s8eQ9Q8tR9X9Rp(W#t'O)U-X-o-p0q1h1}4f4w7q:v;W;X;Y!n:U&z'i(^(f+v,[,t-P-^-|.P.o.q0e0p1i1m2W2l2n3O4Y4Z4m4q4y5O5Z5n6m6q7Y8`;Z;];p;q;r[:V8p9O9V9Y9Z9]]:W1U4a6c7o7p8zr(Y#t'O)U,}-X-o-p0q1h1}4f4w7q:v;W;X;Y!p:X&z'i(^(f+v,[,t-P-^-|.P.o.q0e0n0p1i1m2W2l2n3O4Y4Z4m4q4y5O5Z5n6m6q7Y8`;Z;];p;q;r^:Y8p9O9T9V9Y9Z9]_:Z1U4a6c6d7o7p8zpeOSjy}!n$]%Y%c%f%g%i*o*t/g/jQ%VxR*k%`peOSjy}!n$]%Y%c%f%g%i*o*t/g/jR%VxQ*U%OR.n)}qeOSjy}!n$]%Y%c%f%g%i*o*t/g/jQ.z*ZS3P/O/PW5j2|2}3O3TU7V5l5m5nU8R7U7X7YQ8h8SR8v8iQ%^yR*e%YR3^/XR7_5uS$mp$rR.d)nQ%czR*o%dR*u%jT/h*t/jR*y%kQ*x%kR/q*yQjOQ!nST$`j!nQ(P#sR,u(PQ!YQR%u!YQ!^RU%{!^%|+UQ%|!_R+U%}Q+a&XR/}+aQ,`'OR0r,`Q,c'QS0u,c0vR0v,dQ+m&dR0X+mS!eR$uU&a!e&b+VQ&b!fR+V&OQ+d&[R0P+dQ&u!sQ,R&sU,V&u,R0mR0m,WQ'r#iR,n'rQ#m`R'x#mQ#cZU'h#c+Q9qQ+Q9_R9q'uQ-S(_W1d-S1e4j6lU1e-T-U-VS4j1f1gR6l4k$k(U#t&z'O'i(^(f)P)Q)U+v,Y,Z,[,t,}-O-P-X-^-o-p-|.P.o.q0e0n0o0p0q1U1h1i1m1}2W2l2n3O4Y4Z4_4`4a4f4m4q4w4y5O5Z5n6c6d6e6m6q7Y7o7p7q8`8p8z8|8}9O9T9U9V9Y9Z9]:v;W;X;Y;Z;];p;q;rQ-[(fU1l-[1n4nQ1n-^R4n1mQ(q#zR-i(qQ(z$OR-r(zQ2R-|R4z2RQ){$xR.m){Q2p.tS5_2p6|R6|5`Q*W%PR.w*WQ2v.yR5d2vQ/W*bS3[/W5vR5v3^Q._)jW2a._2c5T6wQ2c.bQ5T2bR6w5UQ)o$mR.e)oQ/j*tR3l/jWiOSj!nQ%h}Q)X$]Q*n%cQ*p%fQ*q%gQ*s%iQ/e*oS/h*t/jR3k/gQ$_gQ%l!RQ%o!TQ%q!UQ%s!VQ)v$sQ)|$yQ*d%^Q*{%nQ-h(pS/Z*e*hQ/r*zQ/s*}Q/t+OS0S+j2sQ2f.hQ2k.oQ3U/QQ3`/]Q3j/fY3w0U0V0]0b5fQ5X2hQ5[2lQ5q3VQ5w3_[6U3v3y3}4P4Q7SQ6x5VQ7Z5rQ7`5xW7f6V6[6^6`Q7x6yQ7{6}Q8U7[U8X7g7l7nQ8c7|Q8j8VS8k8Z8_Q8r8dQ8w8mQ9P8sQ9S8yQ9W9QR9[9XQ$gmQ&i!jU)e$h$i$jQ+Z&UU+{&j&k&lQ-`(kS.Z)f)gQ/z+]Q0R+jS0g+|+}Q1q-dQ2Z.[Q3t0QS3z0W0]Q4V0hQ4r1uS6Y3{4QQ7i6ZQ8[7kR8n8^S#ua;^R({$PU$Oa$P;^R-q(yQ#taS&z!w)aQ'O!yQ'i#dQ(^#vQ(f#yQ)P$TQ)Q$UQ)U$YQ+v&gQ,Y9wQ,Z9zQ,[9}Q,t'}Q,}(WQ-O(YQ-P(ZQ-X(bQ-^(hQ-o(wQ-p(xd-|)].R.{2T3Q4}5k6z7W8TQ.P)_Q.o*OQ.q*RQ0e+yQ0n:UQ0o:XQ0p:[Q0q,_Q1U9rQ1h-YQ1i-ZQ1m-]Q1}-wQ2W.TQ2l.pQ2n.sQ3O.}Q4Y:aQ4Z:dQ4_9yQ4`9|Q4a:PQ4f1aQ4m1kQ4q1sQ4w1yQ4y2QQ5O2XQ5Z2jQ5n3SQ6c:^Q6d:WQ6e:ZQ6m4lQ6q4uQ7Y5pQ7o:cQ7p:fQ7q6iQ8`:jQ8p9dQ8z:lQ8|9xQ8}9{Q9O:OQ9T:VQ9U:YQ9V:]Q9Y:bQ9Z:eQ9]:kQ:v;^Q;W;iQ;X;jQ;Y;kQ;Z;lQ;];nQ;p;tQ;q;uR;r;vlgOSj}!n$]%c%f%g%i*o*t/g/jS!pU%eQ%n!SQ%t!WQ'V!|Q'v#kS*h%[%_Q*l%`Q*z%mQ+W&SQ+u&fQ,r'wQ.O)^Q/b*kQ0d+xQ1[,mQ1{-uQ2V.SQ2}.|Q3b/_Q3c/`Q3e/aQ3g/cQ3n/lQ4d1XQ5Y2iQ5m3RQ5|3fQ6O3hQ6P3iQ7X5oR7b5}!vZOSUj}!S!n!|$]%[%_%`%c%e%f%g%i%m&S&f)^*k*o*t+x-u.S.|/_/`/a/c/g/j/l2i3R3f3h3i5o5}Q!_RQ!oTQ$akS%w!]%zQ%}!`Q&y!vQ'Q!zQ'W#PQ'X#QQ'Y#RQ'Z#SQ'[#TQ']#UQ'^#VQ'_#WQ'`#XQ'a#YQ'b#ZQ'd#]Q'g#bQ'k#eW'u#k'w,m1XQ)p$nS+R%x+TS+^&W/{Q+g&_Q,O&pQ,^&}Q,d'RQ,g9^Q,i9`Q,w(RQ-x)VQ/v+XQ/y+[Q0i,PQ0s,bQ0w9cQ0x9eQ0y9fQ0z9gQ0{9hQ0|9iQ0}9jQ1O9kQ1P9lQ1Q9mQ1R9nQ1S9oQ1T,hQ1W9sQ1]9pQ2O-zQ2[.]Q3s:QQ3v0TQ4W0jQ4[0tQ4]:RQ4b:TQ4c:_Q5`2qQ6S3qQ6V3xQ6b:`Q6f:gQ6g:hQ7g6WQ7z6{Q8Z7jQ8m8]Q8y8oQ9_!WR:|;aR!aRR&Y!bS&U!b+`S+]&V&^R0Q+fR'P!yR'S!zT!tU$ZS!sU$ZU$xrs*mS&s!r!uQ,T&tQ,W&wQ.l)zS0k,S,UR4X0l`!dR!]!`$u%x&`)x+hh!qUrs!r!u$Z&t&w)z,S,U0lQ/d*mQ/w+YQ3p/oT:s&W)yT!gR$uS!fR$uS%y!]&`S&O!`)xS+S%x+hT+_&W)yT&]!b$vQ#i^R'{#nT'q#i'rR1Z,lT(a#v(cR(i#yQ-})]Q2U.RQ2|.{Q4{2TQ5l3QQ6t4}Q7U5kQ7y6zQ8S7WR8i8TlhOSj}!n$]%c%f%g%i*o*t/g/jQ%]yR*d%YV$yrs*mR.u*TR*c%WQ$qpR)u$rR)k$lT%az%dT%bz%dT/i*t/j",nodeNames:"\u26A0 extends ArithOp ArithOp InterpolationStart LineComment BlockComment Script ExportDeclaration export Star as VariableName String from ; default FunctionDeclaration async function VariableDefinition TypeParamList TypeDefinition ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Interpolation null super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression await yield delete LogicOp BitOp ParenthesizedExpression ClassExpression class extends ClassBody MethodDeclaration Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression PrivatePropertyName BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement",maxTerm:332,context:kx,nodeProps:[["closedBy",4,"InterpolationEnd",40,"]",51,"}",66,")",132,"JSXSelfCloseEndTag JSXEndTag",146,"JSXEndTag"],["group",-26,8,15,17,58,184,188,191,192,194,197,200,211,213,219,221,223,225,228,234,240,242,244,246,248,250,251,"Statement",-30,12,13,24,27,28,41,43,44,45,47,52,60,68,74,75,91,92,101,103,119,122,124,125,126,127,129,130,148,149,151,"Expression",-22,23,25,29,32,34,152,154,156,157,159,160,161,163,164,165,167,168,169,178,180,182,183,"Type",-3,79,85,90,"ClassItem"],["openedBy",30,"InterpolationStart",46,"[",50,"{",65,"(",131,"JSXStartTag",141,"JSXStartTag JSXStartCloseTag"]],propSources:[$x],skippedNodes:[0,5,6],repeatNodeCount:28,tokenData:"!C}~R!`OX%TXY%cYZ'RZ[%c[]%T]^'R^p%Tpq%cqr'crs(kst0htu2`uv4pvw5ewx6cxy<yyz=Zz{=k{|>k|}?O}!O>k!O!P?`!P!QCl!Q!R!0[!R![!1q![!]!7s!]!^!8V!^!_!8g!_!`!9d!`!a!:[!a!b!<R!b!c%T!c!}2`!}#O!=d#O#P%T#P#Q!=t#Q#R!>U#R#S2`#S#T!>i#T#o2`#o#p!>y#p#q!?O#q#r!?f#r#s!?x#s$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$I|2`$I|$I}!Bq$I}$JO!Bq$JO$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`W%YR$UWO!^%T!_#o%T#p~%T7Z%jg$UW'Y7ROX%TXY%cYZ%TZ[%c[p%Tpq%cq!^%T!_#o%T#p$f%T$f$g%c$g#BY%T#BY#BZ%c#BZ$IS%T$IS$I_%c$I_$JT%T$JT$JU%c$JU$KV%T$KV$KW%c$KW&FU%T&FU&FV%c&FV?HT%T?HT?HU%c?HU~%T7Z'YR$UW'Z7RO!^%T!_#o%T#p~%T$T'jS$UW!j#{O!^%T!_!`'v!`#o%T#p~%T$O'}S#e#v$UWO!^%T!_!`(Z!`#o%T#p~%T$O(bR#e#v$UWO!^%T!_#o%T#p~%T)X(rZ$UW]#eOY(kYZ)eZr(krs*rs!^(k!^!_+U!_#O(k#O#P-b#P#o(k#o#p+U#p~(k&r)jV$UWOr)ers*Ps!^)e!^!_*a!_#o)e#o#p*a#p~)e&r*WR$P&j$UWO!^%T!_#o%T#p~%T&j*dROr*ars*ms~*a&j*rO$P&j)X*{R$P&j$UW]#eO!^%T!_#o%T#p~%T)P+ZV]#eOY+UYZ*aZr+Urs+ps#O+U#O#P+w#P~+U)P+wO$P&j]#e)P+zROr+Urs,Ts~+U)P,[U$P&j]#eOY,nZr,nrs-Vs#O,n#O#P-[#P~,n#e,sU]#eOY,nZr,nrs-Vs#O,n#O#P-[#P~,n#e-[O]#e#e-_PO~,n)X-gV$UWOr(krs-|s!^(k!^!_+U!_#o(k#o#p+U#p~(k)X.VZ$P&j$UW]#eOY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x#m/PZ$UW]#eOY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x#m/yR$UW]#eO!^%T!_#o%T#p~%T#m0XT$UWO!^.x!^!_,n!_#o.x#o#p,n#p~.x3]0mZ$UWOt%Ttu1`u!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`3]1g]$UW'o3TOt%Ttu1`u!Q%T!Q![1`![!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`7Z2k_$UW#zS']$y'g3SOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`[3q_$UW#zSOt%Ttu3ju}%T}!O3j!O!Q%T!Q![3j![!^%T!_!c%T!c!}3j!}#R%T#R#S3j#S#T%T#T#o3j#p$g%T$g~3j$O4wS#^#v$UWO!^%T!_!`5T!`#o%T#p~%T$O5[R$UW#o#vO!^%T!_#o%T#p~%T5b5lU'x5Y$UWOv%Tvw6Ow!^%T!_!`5T!`#o%T#p~%T$O6VS$UW#i#vO!^%T!_!`5T!`#o%T#p~%T)X6jZ$UW]#eOY6cYZ7]Zw6cwx*rx!^6c!^!_8T!_#O6c#O#P:T#P#o6c#o#p8T#p~6c&r7bV$UWOw7]wx*Px!^7]!^!_7w!_#o7]#o#p7w#p~7]&j7zROw7wwx*mx~7w)P8YV]#eOY8TYZ7wZw8Twx+px#O8T#O#P8o#P~8T)P8rROw8Twx8{x~8T)P9SU$P&j]#eOY9fZw9fwx-Vx#O9f#O#P9}#P~9f#e9kU]#eOY9fZw9fwx-Vx#O9f#O#P9}#P~9f#e:QPO~9f)X:YV$UWOw6cwx:ox!^6c!^!_8T!_#o6c#o#p8T#p~6c)X:xZ$P&j$UW]#eOY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k#m;rZ$UW]#eOY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k#m<jT$UWO!^;k!^!_9f!_#o;k#o#p9f#p~;k&i=QR!d&a$UWO!^%T!_#o%T#p~%Tk=bR!cc$UWO!^%T!_#o%T#p~%T7V=tU'^4V#_#v$UWOz%Tz{>W{!^%T!_!`5T!`#o%T#p~%T$O>_S#[#v$UWO!^%T!_!`5T!`#o%T#p~%T%w>rSj%o$UWO!^%T!_!`5T!`#o%T#p~%T&i?VR!R&a$UWO!^%T!_#o%T#p~%T7Z?gVu5^$UWO!O%T!O!P?|!P!Q%T!Q![@r![!^%T!_#o%T#p~%T!{@RT$UWO!O%T!O!P@b!P!^%T!_#o%T#p~%T!{@iR!Q!s$UWO!^%T!_#o%T#p~%T!{@yZ$UWk!sO!Q%T!Q![@r![!^%T!_!g%T!g!hAl!h#R%T#R#S@r#S#X%T#X#YAl#Y#o%T#p~%T!{AqZ$UWO{%T{|Bd|}%T}!OBd!O!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T!{BiV$UWO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T!{CVV$UWk!sO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T7ZCs`$UW#]#vOYDuYZ%TZzDuz{Jl{!PDu!P!Q!-e!Q!^Du!^!_Fx!_!`!.^!`!a!/]!a!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXD|[$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXEy_$UW}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%TPF}V}POYFxZ!PFx!P!QGd!Q!}Fx!}#OG{#O#PHh#P~FxPGiU}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGdPHOTOYG{Z#OG{#O#PH_#P#QFx#Q~G{PHbQOYG{Z~G{PHkQOYFxZ~FxXHvY$UWOYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~HqXIkV$UWOYHqYZ%TZ!^Hq!^!_G{!_#oHq#o#pG{#p~HqXJVV$UWOYDuYZ%TZ!^Du!^!_Fx!_#oDu#o#pFx#p~Du7ZJs^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q!,R!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7ZKtV$UWOzKoz{LZ{!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZL`X$UWOzKoz{LZ{!PKo!P!QL{!Q!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZMSR$UWU7RO!^%T!_#o%T#p~%T7RM`ROzM]z{Mi{~M]7RMlTOzM]z{Mi{!PM]!P!QM{!Q~M]7RNQOU7R7ZNX^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q! T!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7Z! ^_$UWU7R}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%T7R!!bY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!&x!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#VY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!#u!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#|UU7R}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGd7R!$cWOY!$`YZM]Zz!$`z{!${{#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%OYOY!$`YZM]Zz!$`z{!${{!P!$`!P!Q!%n!Q#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%sTU7ROYG{Z#OG{#O#PH_#P#QFx#Q~G{7R!&VTOY!$`YZM]Zz!$`z{!${{~!$`7R!&iTOY!!]YZM]Zz!!]z{!#Q{~!!]7R!&}_}POzM]z{Mi{#ZM]#Z#[!&x#[#]M]#]#^!&x#^#aM]#a#b!&x#b#gM]#g#h!&x#h#iM]#i#j!&x#j#mM]#m#n!&x#n~M]7Z!(R[$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!(|^$UWOY!'|YZKoZz!'|z{!(w{!P!'|!P!Q!)x!Q!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!*PY$UWU7ROYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~Hq7Z!*tX$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#o!'|#o#p!$`#p~!'|7Z!+fX$UWOYJlYZKoZzJlz{NQ{!^Jl!^!_!!]!_#oJl#o#p!!]#p~Jl7Z!,Yc$UW}POzKoz{LZ{!^Ko!^!_M]!_#ZKo#Z#[!,R#[#]Ko#]#^!,R#^#aKo#a#b!,R#b#gKo#g#h!,R#h#iKo#i#j!,R#j#mKo#m#n!,R#n#oKo#o#pM]#p~Ko7Z!-lV$UWT7ROY!-eYZ%TZ!^!-e!^!_!.R!_#o!-e#o#p!.R#p~!-e7R!.WQT7ROY!.RZ~!.R$P!.g[$UW#o#v}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Du]!/f[#wS$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Du!{!0cd$UWk!sO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#U%T#U#V!3X#V#X%T#X#YAl#Y#b%T#b#c!2w#c#d!4m#d#l%T#l#m!5{#m#o%T#p~%T!{!1x_$UWk!sO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#X%T#X#YAl#Y#b%T#b#c!2w#c#o%T#p~%T!{!3OR$UWk!sO!^%T!_#o%T#p~%T!{!3^W$UWO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#o%T#p~%T!{!3}Y$UWk!sO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#b%T#b#c!2w#c#o%T#p~%T!{!4rV$UWO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#o%T#p~%T!{!5`X$UWk!sO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#b%T#b#c!2w#c#o%T#p~%T!{!6QZ$UWO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#o%T#p~%T!{!6z]$UWk!sO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#b%T#b#c!2w#c#o%T#p~%T$u!7|R!]V$UW#m$fO!^%T!_#o%T#p~%T!q!8^R_!i$UWO!^%T!_#o%T#p~%T5w!8rR'bd!a/n#x&s'|P!P!Q!8{!^!_!9Q!_!`!9_W!9QO$WW#v!9VP#`#v!_!`!9Y#v!9_O#o#v#v!9dO#a#v$u!9kT!{$m$UWO!^%T!_!`'v!`!a!9z!a#o%T#p~%T$P!:RR#W#w$UWO!^%T!_#o%T#p~%T%V!:gT'a!R#a#v$RS$UWO!^%T!_!`!:v!`!a!;W!a#o%T#p~%T$O!:}R#a#v$UWO!^%T!_#o%T#p~%T$O!;_T#`#v$UWO!^%T!_!`5T!`!a!;n!a#o%T#p~%T$O!;uS#`#v$UWO!^%T!_!`5T!`#o%T#p~%T*a!<YV'p#{$UWO!O%T!O!P!<o!P!^%T!_!a%T!a!b!=P!b#o%T#p~%T*[!<vRv*S$UWO!^%T!_#o%T#p~%T$O!=WS$UW#j#vO!^%T!_!`5T!`#o%T#p~%T7V!=kRx6}$UWO!^%T!_#o%T#p~%Tk!={R!Oc$UWO!^%T!_#o%T#p~%T$O!>]S#g#v$UWO!^%T!_!`5T!`#o%T#p~%T$a!>pR$UW'f$XO!^%T!_#o%T#p~%T~!?OO!T~5b!?VT'w5Y$UWO!^%T!_!`5T!`#o%T#p#q!=P#q~%T6X!?oR!S5}nQ$UWO!^%T!_#o%T#p~%TX!@PR!kP$UWO!^%T!_#o%T#p~%T7Z!@gr$UW'Y7R#zS']$y'g3SOX%TXY%cYZ%TZ[%c[p%Tpq%cqt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`7Z!CO_$UW'Z7R#zS']$y'g3SOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`",tokenizers:[Xx,Ix,Lx,Qx,0,1,2,3,4,5,6,7,8,9,_x],topRules:{Script:[0,7]},dialects:{jsx:12107,ts:12109},dynamicPrecedences:{149:1,176:1},specialized:[{term:289,get:e=>Nx[e]||-1},{term:299,get:e=>Fx[e]||-1},{term:63,get:e=>Mx[e]||-1}],tokenPrec:12130}),Rx=[Ye("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),Ye("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),Ye("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),Ye("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),Ye("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),Ye(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),Ye("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),Ye(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),Ye(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),Ye('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),Ye('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],xd=new fg,vd=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function pr(e){return(t,i)=>{let n=t.node.getChild("VariableDefinition");return n&&i(n,e),!0}}const Yx=["FunctionDeclaration"],Wx={FunctionDeclaration:pr("function"),ClassDeclaration:pr("class"),ClassExpression:()=>!0,EnumDeclaration:pr("constant"),TypeAliasDeclaration:pr("type"),NamespaceDeclaration:pr("namespace"),VariableDefinition(e,t){e.matchContext(Yx)||t(e,"variable")},TypeDefinition(e,t){t(e,"type")},__proto__:null};function Pd(e,t){let i=xd.get(t);if(i)return i;let n=[],r=!0;function o(s,a){let h=e.sliceString(s.from,s.to);n.push({label:h,type:a})}return t.cursor(Gt.IncludeAnonymous).iterate(s=>{if(r)r=!1;else if(s.name){let a=Wx[s.name];if(a&&a(s,o)||vd.has(s.name))return!1}else if(s.to-s.from>8192){for(let a of Pd(e,s.node))n.push(a);return!1}}),xd.set(t,n),n}const Cd=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,Sd=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName"];function jx(e){let t=Nt(e.state).resolveInner(e.pos,-1);if(Sd.indexOf(t.name)>-1)return null;let i=t.to-t.from<20&&Cd.test(e.state.sliceDoc(t.from,t.to));if(!i&&!e.explicit)return null;let n=[];for(let r=t;r;r=r.parent)vd.has(r.name)&&(n=n.concat(Pd(e.state.doc,r)));return{options:n,from:i?t.from:e.pos,validFor:Cd}}const Zi=os.define({parser:Bx.configure({props:[mc.add({IfStatement:hl({except:/^\s*({|else\b)/}),TryStatement:hl({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:Xg,SwitchBody:e=>{let t=e.textAfter,i=/^\s*\}/.test(t),n=/^\s*(case|default)\b/.test(t);return e.baseIndent+(i?0:n?1:2)*e.unit},Block:Qg({closing:"}"}),ArrowFunction:e=>e.baseIndent+e.unit,"TemplateString BlockComment":()=>null,"Statement Property":hl({except:/^{/}),JSXElement(e){let t=/^\s*<\//.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},JSXEscape(e){let t=/\s*\}/.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},"JSXOpenTag JSXSelfClosingTag"(e){return e.column(e.node.from)+e.unit}}),yc.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression":Mg,BlockComment(e){return{from:e.from+2,to:e.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),Zx=Zi.configure({dialect:"ts"}),zx=Zi.configure({dialect:"jsx"}),qx=Zi.configure({dialect:"jsx ts"}),Ux="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(e=>({label:e,type:"keyword"}));function Gx(e={}){let t=e.jsx?e.typescript?qx:zx:e.typescript?Zx:Zi;return new Eg(t,[Zi.data.of({autocomplete:Jy(Sd,Lp(Rx.concat(Ux)))}),Zi.data.of({autocomplete:jx}),e.jsx?Hx:[]])}function wd(e,t,i=e.length){if(!t)return"";let n=t.getChild("JSXIdentifier");return n?e.sliceString(n.from,Math.min(n.to,i)):""}const Vx=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Hx=it.inputHandler.of((e,t,i,n)=>{if((Vx?e.composing:e.compositionStarted)||e.state.readOnly||t!=i||n!=">"&&n!="/"||!Zi.isActiveAt(e.state,t,-1))return!1;let{state:r}=e,o=r.changeByRange(s=>{var a,h,c;let{head:d}=s,f=Nt(r).resolveInner(d,-1),m;if(f.name=="JSXStartTag"&&(f=f.parent),n==">"&&f.name=="JSXFragmentTag")return{range:j.cursor(d+1),changes:{from:d,insert:"><>"}};if(n==">"&&f.name=="JSXIdentifier"){if(((h=(a=f.parent)===null||a===void 0?void 0:a.lastChild)===null||h===void 0?void 0:h.name)!="JSXEndTag"&&(m=wd(r.doc,f.parent,d)))return{range:j.cursor(d+1),changes:{from:d,insert:`></${m}>`}}}else if(n=="/"&&f.name=="JSXFragmentTag"){let v=f.parent,S=v==null?void 0:v.parent;if(v.from==d-1&&((c=S.lastChild)===null||c===void 0?void 0:c.name)!="JSXEndTag"&&(m=wd(r.doc,S==null?void 0:S.firstChild,d))){let g=`/${m}>`;return{range:j.cursor(d+g.length),changes:{from:d,insert:g}}}}return{range:s}});return o.changes.empty?!1:(e.dispatch(o,{userEvent:"input.type",scrollIntoView:!0}),!0)});jt.define({create(e){return 0},update(e,t){if(t.docChanged){const{state:i}=t;return Nt(i),e+1}else return e},provide(e){return[]}});class Jx extends HTMLElement{constructor(){super(),this.view=void 0,this.state=void 0}foldRange(){}connectedCallback(){const t=[ix,Gx(),zn.of([Sy]),er.of("  ")],i=vt.create({extensions:t});this.view=new it({state:i,parent:this})}}window.customElements.define("codemirror-2",Jx);const Kx=["./library/connectors/ESP8266_12E.json","./library/connectors/header_FTDI.json","./library/connectors/power_65mm.json","./library/connectors/ESP32_CAM.json","./library/connectors/USB_A_plug.json","./library/connectors/header_i0.json","./library/connectors/header_serial_reverse.json","./library/connectors/header_4.json","./library/connectors/header_signal.json","./library/connectors/MTA_i0.json","./library/connectors/HM11.json","./library/connectors/header_MFRC522.json","./library/connectors/header_serial_reverse_5V.json","./library/connectors/USB_mini_B.json","./library/connectors/ESC.json","./library/connectors/MTA_PS2.json","./library/connectors/header_APA.json","./library/connectors/MTA_ICP.json","./library/connectors/stereo_2_5mm.json","./library/connectors/header_VL53L1X_3415.json","./library/connectors/Molex_serial.json","./library/connectors/header_SWD_4_1.json","./library/connectors/ESP_01.json","./library/connectors/HCSR04.json","./library/connectors/header_SWD_4_05.json","./library/connectors/ESP32_WROOM.json","./library/connectors/header_serial.json","./library/connectors/header_PDI.json","./library/connectors/I2C4x1v.json","./library/connectors/header_power.json","./library/connectors/MTA_serial.json","./library/connectors/header_LSM6DS33_2736.json","./library/connectors/MTA_2.json","./library/connectors/MTA_3.json","./library/connectors/header_LCD.json","./library/connectors/screw_terminal_2.json","./library/connectors/HCSR501.json","./library/connectors/screw_terminal_i0.json","./library/connectors/header_unipolar_stepper.json","./library/connectors/screw_terminal_power.json","./library/connectors/header_nRF24L01.json","./library/connectors/header_serial_reverse_3V3.json","./library/connectors/MTA_power.json","./library/connectors/MTA_4.json","./library/connectors/RCWL0516.json","./library/connectors/ESP_WROOM_02D.json","./library/connectors/RN4871.json","./library/connectors/header_I2C.json","./library/connectors/header_SWD.json","./library/connectors/header_servo.json","./library/connectors/microSD.json","./library/connectors/header_4H.json","./library/connectors/header_UPDI.json","./library/connectors/I2C4x1i.json","./library/connectors/I2C4x1h.json","./library/connectors/header_ISP.json","./library/connectors/header_NEO_6M.json","./library/connectors/MTA_5.json","./library/connectors/header_6.json","./library/connectors/header_UPDI_reverse.json","./library/connectors/header_bus.json","./library/connectors/TFT8x1v.json","./library/connectors/header_2H.json","./library/connectors/header_ATP.json","./library/switches/button_6mm.json","./library/switches/slide_switch.json","./library/diodes_transistors_regulators_sensors/D_1206.json","./library/diodes_transistors_regulators_sensors/mic_SPM1437.json","./library/diodes_transistors_regulators_sensors/LED_1206.json","./library/diodes_transistors_regulators_sensors/NMOSFET_TO252AA.json","./library/diodes_transistors_regulators_sensors/regulator_SOT223.json","./library/diodes_transistors_regulators_sensors/regulator_SOT23.json","./library/diodes_transistors_regulators_sensors/VL53L1X.json","./library/diodes_transistors_regulators_sensors/H_bridge_SM8.json","./library/diodes_transistors_regulators_sensors/SPG08P4HM4H.json","./library/diodes_transistors_regulators_sensors/Hall_SOT23.json","./library/diodes_transistors_regulators_sensors/VEML6040.json","./library/diodes_transistors_regulators_sensors/phototransistor_1206.json","./library/diodes_transistors_regulators_sensors/LED_RGB.json","./library/diodes_transistors_regulators_sensors/accel_MXD6235M.json","./library/diodes_transistors_regulators_sensors/ADXL343.json","./library/diodes_transistors_regulators_sensors/mic_SPU0414HR5H.json","./library/diodes_transistors_regulators_sensors/D_SOD_123.json","./library/diodes_transistors_regulators_sensors/LED_3014_1100.json","./library/diodes_transistors_regulators_sensors/A4953_SOICN.json","./library/diodes_transistors_regulators_sensors/NMOSFET_SOT23.json","./library/diodes_transistors_regulators_sensors/phototransistor_PLCC2.json","./library/diodes_transistors_regulators_sensors/PMOSFET_SOT23.json","./library/diodes_transistors_regulators_sensors/DRV8428_HTSSOP.json","./library/diodes_transistors_regulators_sensors/CMM4030D261I2STR.json","./library/crystals_and_resonators/XTAL_CSM_7.json","./library/crystals_and_resonators/XTAL_NX5032GA.json","./library/crystals_and_resonators/XTAL_EFOBM.json","./library/discretes/R_0402.json","./library/discretes/ST4EB.json","./library/discretes/C_1206.json","./library/discretes/R_1206.json","./library/discretes/choke.json","./library/discretes/L_1210.json","./library/discretes/C_FND.json","./library/ICs/CBA.json","./library/ICs/SAMD21E.json","./library/ICs/AVRDB28.json","./library/ICs/FT230XS.json","./library/ICs/ATtiny1614.json","./library/ICs/fab.json","./library/ICs/ATtiny44_SOICN.json","./library/ICs/ATxmegaE5_TQFP.json","./library/ICs/op_amp_SOICN.json","./library/ICs/ATtiny45_SOIC.json","./library/ICs/ATmega88_TQFP.json","./library/ICs/SAMD11D.json","./library/ICs/TRC102.json","./library/ICs/ATtiny412.json","./library/ICs/ATmega644_TQFP.json","./library/ICs/op_amp_SOT23_5.json","./library/ICs/SAMD11C.json","./library/ICs/ATtiny3216.json"];function tv(e){const t=bd(e),i=document.createElement("a");i.href=t,i.download=`${e.name===""?"anon":e.name}.svg`,document.body.appendChild(i),i.click(),document.body.removeChild(i)}function bd(e){const t=new XMLSerializer,i=document.querySelector("svg").cloneNode(!0),n=i.querySelectorAll(".no-download");for(const h of n)h.remove();const r=i.querySelector(".transform-group");r.style.transformOrigin="",r.style.transform="";const o=e.limits.x[1]-e.limits.x[0],s=e.limits.y[1]-e.limits.y[0];r.setAttribute("transform",`scale(1, -1) translate(0, ${-(e.limits.y[0]+e.limits.y[1])})`),i.setAttribute("style",""),i.setAttribute("width",`${o*e.mm_per_unit}mm`),i.setAttribute("height",`${s*e.mm_per_unit}mm`),i.setAttribute("viewBox",`${e.limits.x[0]} ${e.limits.y[0]} ${o} ${s}`),i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");const a=t.serializeToString(i);return"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(a)}function ev(e,t){const i=new Blob([t],{type:"text/plain"});var n=document.createElement("a");n.href=URL.createObjectURL(i),n.download=`${e}`,n.click(),URL.revokeObjectURL(n)}function iv(e,t=1e3){const i=bd(e);var n=25.4;const r=(e.limits.x[1]-e.limits.x[0])*e.mm_per_unit,o=(e.limits.y[1]-e.limits.y[0])*e.mm_per_unit;var s=t*r/n,a=t*o/n,h=new Image;h.width=s,h.height=a,h.setAttribute("src",i),h.onload=function(){const c=document.createElement("canvas");(s/t).toFixed(3)+""+(a/t).toFixed(3),(25.4*s/t).toFixed(3)+""+(25.4*a/t).toFixed(3),c.width=s,c.height=a;var d=c.getContext("2d");d.clearRect(0,0,s,a),d.drawImage(h,0,0,s,a),d.getImageData(0,0,s,a),nv(c,`${e.name===""?"anon":e.name}`)}}function nv(e,t){var i=e.toDataURL(),n=document.createElement("a");n.download=`${t}.png`,n.href=i,n.click()}const rv=e=>e.map(t=>t.slice(10)).map(t=>_i`
  <div class="menu-item" @mousedown=${async i=>{const n=await(await fetch(`components/${t}`)).text();Ot("ADD_IMPORT",{text:n,name:i.target.innerText.split("/")[1].split(".")[0]})}}>${t}</div>
`);var x={};x.version="6.4.2.2",x.use_lines=!0,x.use_xyz=!1;var Ed=!1;if(typeof at<"u"&&at.exports?(at.exports=x,Ed=!0):typeof document<"u"?window.ClipperLib=x:self.ClipperLib=x,Ed)var ie="chrome";else var ie=navigator.userAgent.toString().toLowerCase();ie.indexOf("chrome")!=-1&&ie.indexOf("chromium")==-1,ie.indexOf("chromium")!=-1,ie.indexOf("safari")!=-1&&ie.indexOf("chrome")==-1&&ie.indexOf("chromium")==-1,ie.indexOf("firefox")!=-1,ie.indexOf("firefox/17")!=-1,ie.indexOf("firefox/15")!=-1,ie.indexOf("firefox/3")!=-1,ie.indexOf("opera")!=-1,ie.indexOf("msie 10")!=-1,ie.indexOf("msie 9")!=-1,ie.indexOf("msie 8")!=-1,ie.indexOf("msie 7")!=-1,ie.indexOf("msie ")!=-1;var Dd=function(e,t){var i;if(typeof Object.getOwnPropertyNames>"u"){for(i in t.prototype)(typeof e.prototype[i]>"u"||e.prototype[i]===Object.prototype[i])&&(e.prototype[i]=t.prototype[i]);for(i in t)typeof e[i]>"u"&&(e[i]=t[i]);e.$baseCtor=t}else{for(var n=Object.getOwnPropertyNames(t.prototype),r=0;r<n.length;r++)typeof Object.getOwnPropertyDescriptor(e.prototype,n[r])>"u"&&Object.defineProperty(e.prototype,n[r],Object.getOwnPropertyDescriptor(t.prototype,n[r]));for(i in t)typeof e[i]>"u"&&(e[i]=t[i]);e.$baseCtor=t}};x.Path=function(){return[]},x.Path.prototype.push=Array.prototype.push,x.Paths=function(){return[]},x.Paths.prototype.push=Array.prototype.push,x.PolyNode=function(){this.m_Parent=null,this.m_polygon=new x.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},x.PolyNode.prototype.IsHoleNode=function(){for(var e=!0,t=this.m_Parent;t!==null;)e=!e,t=t.m_Parent;return e},x.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},x.PolyNode.prototype.Contour=function(){return this.m_polygon},x.PolyNode.prototype.AddChild=function(e){var t=this.m_Childs.length;this.m_Childs.push(e),e.m_Parent=this,e.m_Index=t},x.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},x.PolyNode.prototype.GetNextSiblingUp=function(){return this.m_Parent===null?null:this.m_Index===this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},x.PolyNode.prototype.Childs=function(){return this.m_Childs},x.PolyNode.prototype.Parent=function(){return this.m_Parent},x.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},x.PolyTree=function(){this.m_AllPolys=[],x.PolyNode.call(this)},x.PolyTree.prototype.Clear=function(){for(var e=0,t=this.m_AllPolys.length;e<t;e++)this.m_AllPolys[e]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},x.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},x.PolyTree.prototype.Total=function(){var e=this.m_AllPolys.length;return e>0&&this.m_Childs[0]!==this.m_AllPolys[0]&&e--,e},Dd(x.PolyTree,x.PolyNode),x.Clear=function(e){e.length=0},x.PI=3.141592653589793,x.PI2=2*3.141592653589793,x.FPoint=function(){var e=arguments,t=e.length;if(this.X=0,this.Y=0,x.use_xyz)if(this.Z=0,t===3)this.X=e[0],this.Y=e[1],this.Z=e[2];else if(t===2)this.X=e[0],this.Y=e[1],this.Z=0;else if(t===1)if(e[0]instanceof x.FPoint){var i=e[0];this.X=i.X,this.Y=i.Y,this.Z=0}else{var n=e[0];typeof n.Z>"u"&&(n.Z=0),this.X=n.X,this.Y=n.Y,this.Z=n.Z}else this.X=0,this.Y=0,this.Z=0;else if(t===2)this.X=e[0],this.Y=e[1];else if(t===1)if(e[0]instanceof x.FPoint){var i=e[0];this.X=i.X,this.Y=i.Y}else{var n=e[0];this.X=n.X,this.Y=n.Y}else this.X=0,this.Y=0},x.FPoint.op_Equality=function(e,t){return e.X===t.X&&e.Y===t.Y},x.FPoint.op_Inequality=function(e,t){return e.X!==t.X||e.Y!==t.Y},x.FPoint0=function(){this.X=0,this.Y=0,x.use_xyz&&(this.Z=0)},x.FPoint0.prototype=x.FPoint.prototype,x.FPoint1=function(e){this.X=e.X,this.Y=e.Y,x.use_xyz&&(typeof e.Z>"u"?this.Z=0:this.Z=e.Z)},x.FPoint1.prototype=x.FPoint.prototype,x.FPoint1dp=function(e){this.X=e.X,this.Y=e.Y,x.use_xyz&&(this.Z=0)},x.FPoint1dp.prototype=x.FPoint.prototype,x.FPoint2=function(e,t,i){this.X=e,this.Y=t,x.use_xyz&&(typeof i>"u"?this.Z=0:this.Z=i)},x.FPoint2.prototype=x.FPoint.prototype,x.FRect=function(){var e=arguments,t=e.length;if(t===4)this.left=e[0],this.top=e[1],this.right=e[2],this.bottom=e[3];else if(t===1){var i=e[0];this.left=i.left,this.top=i.top,this.right=i.right,this.bottom=i.bottom}else this.left=0,this.top=0,this.right=0,this.bottom=0},x.FRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},x.FRect0.prototype=x.FRect.prototype,x.FRect1=function(e){this.left=e.left,this.top=e.top,this.right=e.right,this.bottom=e.bottom},x.FRect1.prototype=x.FRect.prototype,x.FRect4=function(e,t,i,n){this.left=e,this.top=t,this.right=i,this.bottom=n},x.FRect4.prototype=x.FRect.prototype,x.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},x.PolyType={ptSubject:0,ptClip:1},x.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},x.JoinType={jtSquare:0,jtRound:1,jtMiter:2},x.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},x.EdgeSide={esLeft:0,esRight:1},x.Direction={dRightToLeft:0,dLeftToRight:1},x.TEdge=function(){this.Bot=new x.FPoint0,this.Curr=new x.FPoint0,this.Top=new x.FPoint0,this.Delta=new x.FPoint0,this.Dx=0,this.PolyTyp=x.PolyType.ptSubject,this.Side=x.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},x.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new x.FPoint0},x.MyIntersectNodeSort=function(){},x.MyIntersectNodeSort.Compare=function(e,t){var i=t.Pt.Y-e.Pt.Y;return i>0?1:i<0?-1:0},x.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},x.Scanbeam=function(){this.Y=0,this.Next=null},x.Maxima=function(){this.X=0,this.Next=null,this.Prev=null},x.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},x.OutPt=function(){this.Idx=0,this.Pt=new x.FPoint0,this.Next=null,this.Prev=null},x.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new x.FPoint0},x.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_Scanbeam=null,this.m_PolyOuts=null,this.m_ActiveEdges=null},x.ClipperBase.horizontal=-34e37,x.ClipperBase.Skip=-2,x.ClipperBase.Unassigned=-1,x.ClipperBase.tolerance=1e-20,x.ClipperBase.maxValue=Math.sqrt(Number.MAX_VALUE),x.ClipperBase.minValue=Math.sqrt(Number.MIN_VALUE),x.ClipperBase.near_zero=function(e){return e>-x.ClipperBase.tolerance&&e<x.ClipperBase.tolerance},x.ClipperBase.IsHorizontal=function(e){return e.Delta.Y===0},x.ClipperBase.prototype.PointIsVertex=function(e,t){var i=t;do{if(x.FPoint.op_Equality(i.Pt,e))return!0;i=i.Next}while(i!==t);return!1},x.ClipperBase.prototype.PointOnLineSegment=function(e,t,i){return e.X===t.X&&e.Y===t.Y||e.X===i.X&&e.Y===i.Y||e.X>t.X==e.X<i.X&&e.Y>t.Y==e.Y<i.Y&&(e.X-t.X)*(i.Y-t.Y)===(i.X-t.X)*(e.Y-t.Y)},x.ClipperBase.prototype.PointOnPolygon=function(e,t){for(var i=t;;){if(this.PointOnLineSegment(e,i.Pt,i.Next.Pt))return!0;if(i=i.Next,i===t)break}return!1},x.ClipperBase.prototype.SlopesEqual=x.ClipperBase.SlopesEqual=function(){var e=arguments,t=e.length,i,n,r,o,s,a;return t===2?(i=e[0],n=e[1],i.Delta.Y*n.Delta.X===i.Delta.X*n.Delta.Y):t===3?(r=e[0],o=e[1],s=e[2],(r.Y-o.Y)*(o.X-s.X)-(r.X-o.X)*(o.Y-s.Y)===0):(r=e[0],o=e[1],s=e[2],a=e[3],(r.Y-o.Y)*(s.X-a.X)-(r.X-o.X)*(s.Y-a.Y)===0)},x.ClipperBase.SlopesEqual3=function(e,t){return e.Delta.Y*t.Delta.X===e.Delta.X*t.Delta.Y},x.ClipperBase.SlopesEqual4=function(e,t,i){return(e.Y-t.Y)*(t.X-i.X)-(e.X-t.X)*(t.Y-i.Y)===0},x.ClipperBase.SlopesEqual5=function(e,t,i,n){return(e.Y-t.Y)*(i.X-n.X)-(e.X-t.X)*(i.Y-n.Y)===0},x.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var e=0,t=this.m_edges.length;e<t;++e){for(var i=0,n=this.m_edges[e].length;i<n;++i)this.m_edges[e][i]=null;x.Clear(this.m_edges[e])}x.Clear(this.m_edges),this.m_HasOpenPaths=!1},x.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;this.m_MinimaList!==null;){var e=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=e}this.m_CurrentLM=null},x.ClipperBase.prototype.RangeTest=function(e){(e.X>x.ClipperBase.maxValue||e.X<-x.ClipperBase.maxValue||e.Y>x.ClipperBase.maxValue||e.Y<-x.ClipperBase.maxValue||e.X>0&&e.X<x.ClipperBase.minValue||e.Y>0&&e.Y<x.ClipperBase.minValue||e.X<0&&e.X>-x.ClipperBase.minValue||e.Y<0&&e.Y>-x.ClipperBase.minValue)&&x.Error("Coordinate outside allowed range in RangeTest().")},x.ClipperBase.prototype.InitEdge=function(e,t,i,n){e.Next=t,e.Prev=i,e.Curr.X=n.X,e.Curr.Y=n.Y,x.use_xyz&&(e.Curr.Z=n.Z),e.OutIdx=-1},x.ClipperBase.prototype.InitEdge2=function(e,t){e.Curr.Y>=e.Next.Curr.Y?(e.Bot.X=e.Curr.X,e.Bot.Y=e.Curr.Y,x.use_xyz&&(e.Bot.Z=e.Curr.Z),e.Top.X=e.Next.Curr.X,e.Top.Y=e.Next.Curr.Y,x.use_xyz&&(e.Top.Z=e.Next.Curr.Z)):(e.Top.X=e.Curr.X,e.Top.Y=e.Curr.Y,x.use_xyz&&(e.Top.Z=e.Curr.Z),e.Bot.X=e.Next.Curr.X,e.Bot.Y=e.Next.Curr.Y,x.use_xyz&&(e.Bot.Z=e.Next.Curr.Z)),this.SetDx(e),e.PolyTyp=t},x.ClipperBase.prototype.FindNextLocMin=function(e){for(var t;;){for(;x.FPoint.op_Inequality(e.Bot,e.Prev.Bot)||x.FPoint.op_Equality(e.Curr,e.Top);)e=e.Next;if(e.Dx!==x.ClipperBase.horizontal&&e.Prev.Dx!==x.ClipperBase.horizontal)break;for(;e.Prev.Dx===x.ClipperBase.horizontal;)e=e.Prev;for(t=e;e.Dx===x.ClipperBase.horizontal;)e=e.Next;if(e.Top.Y!==e.Prev.Bot.Y){t.Prev.Bot.X<e.Bot.X&&(e=t);break}}return e},x.ClipperBase.prototype.ProcessBound=function(e,t){var i,n=e,r;if(n.OutIdx===x.ClipperBase.Skip){if(e=n,t){for(;e.Top.Y===e.Next.Bot.Y;)e=e.Next;for(;e!==n&&e.Dx===x.ClipperBase.horizontal;)e=e.Prev}else{for(;e.Top.Y===e.Prev.Bot.Y;)e=e.Prev;for(;e!==n&&e.Dx===x.ClipperBase.horizontal;)e=e.Next}if(e===n)t?n=e.Next:n=e.Prev;else{t?e=n.Next:e=n.Prev;var o=new x.LocalMinima;o.Next=null,o.Y=e.Bot.Y,o.LeftBound=null,o.RightBound=e,e.WindDelta=0,n=this.ProcessBound(e,t),this.InsertLocalMinima(o)}return n}if(e.Dx===x.ClipperBase.horizontal&&(t?i=e.Prev:i=e.Next,i.Dx===x.ClipperBase.horizontal?i.Bot.X!==e.Bot.X&&i.Top.X!==e.Bot.X&&this.ReverseHorizontal(e):i.Bot.X!==e.Bot.X&&this.ReverseHorizontal(e)),i=e,t){for(;n.Top.Y===n.Next.Bot.Y&&n.Next.OutIdx!==x.ClipperBase.Skip;)n=n.Next;if(n.Dx===x.ClipperBase.horizontal&&n.Next.OutIdx!==x.ClipperBase.Skip){for(r=n;r.Prev.Dx===x.ClipperBase.horizontal;)r=r.Prev;r.Prev.Top.X>n.Next.Top.X&&(n=r.Prev)}for(;e!==n;)e.NextInLML=e.Next,e.Dx===x.ClipperBase.horizontal&&e!==i&&e.Bot.X!==e.Prev.Top.X&&this.ReverseHorizontal(e),e=e.Next;e.Dx===x.ClipperBase.horizontal&&e!==i&&e.Bot.X!==e.Prev.Top.X&&this.ReverseHorizontal(e),n=n.Next}else{for(;n.Top.Y===n.Prev.Bot.Y&&n.Prev.OutIdx!==x.ClipperBase.Skip;)n=n.Prev;if(n.Dx===x.ClipperBase.horizontal&&n.Prev.OutIdx!==x.ClipperBase.Skip){for(r=n;r.Next.Dx===x.ClipperBase.horizontal;)r=r.Next;(r.Next.Top.X===n.Prev.Top.X||r.Next.Top.X>n.Prev.Top.X)&&(n=r.Next)}for(;e!==n;)e.NextInLML=e.Prev,e.Dx===x.ClipperBase.horizontal&&e!==i&&e.Bot.X!==e.Next.Top.X&&this.ReverseHorizontal(e),e=e.Prev;e.Dx===x.ClipperBase.horizontal&&e!==i&&e.Bot.X!==e.Next.Top.X&&this.ReverseHorizontal(e),n=n.Prev}return n},x.ClipperBase.prototype.AddPath=function(e,t,i){x.use_lines?!i&&t===x.PolyType.ptClip&&x.Error("AddPath: Open paths must be subject."):i||x.Error("AddPath: Open paths have been disabled.");var n=e.length-1;if(i)for(;n>0&&x.FPoint.op_Equality(e[n],e[0]);)--n;for(;n>0&&x.FPoint.op_Equality(e[n],e[n-1]);)--n;if(i&&n<2||!i&&n<1)return!1;for(var r=new Array,o=0;o<=n;o++)r.push(new x.TEdge);var s=!0;r[1].Curr.X=e[1].X,r[1].Curr.Y=e[1].Y,x.use_xyz&&(r[1].Curr.Z=e[1].Z),this.RangeTest(e[0]),this.RangeTest(e[n]),this.InitEdge(r[0],r[1],r[n],e[0]),this.InitEdge(r[n],r[0],r[n-1],e[n]);for(var o=n-1;o>=1;--o)this.RangeTest(e[o]),this.InitEdge(r[o],r[o+1],r[o-1],e[o]);for(var a=r[0],h=a,c=a;;){if(h.Curr===h.Next.Curr&&(i||h.Next!==a)){if(h===h.Next)break;h===a&&(a=h.Next),h=this.RemoveEdge(h),c=h;continue}if(h.Prev===h.Next)break;if(i&&x.ClipperBase.SlopesEqual4(h.Prev.Curr,h.Curr,h.Next.Curr)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(h.Prev.Curr,h.Curr,h.Next.Curr))){h===a&&(a=h.Next),h=this.RemoveEdge(h),h=h.Prev,c=h;continue}if(h=h.Next,h===c||!i&&h.Next===a)break}if(!i&&h===h.Next||i&&h.Prev===h.Next)return!1;i||(this.m_HasOpenPaths=!0,a.Prev.OutIdx=x.ClipperBase.Skip),h=a;do this.InitEdge2(h,t),h=h.Next,s&&h.Curr.Y!==a.Curr.Y&&(s=!1);while(h!==a);if(s){if(i)return!1;h.Prev.OutIdx=x.ClipperBase.Skip;var d=new x.LocalMinima;for(d.Next=null,d.Y=h.Bot.Y,d.LeftBound=null,d.RightBound=h,d.RightBound.Side=x.EdgeSide.esRight,d.RightBound.WindDelta=0;h.Bot.X!==h.Prev.Top.X&&this.ReverseHorizontal(h),h.Next.OutIdx!==x.ClipperBase.Skip;)h.NextInLML=h.Next,h=h.Next;return this.InsertLocalMinima(d),this.m_edges.push(r),!0}this.m_edges.push(r);var f,m=null;for(x.FPoint.op_Equality(h.Prev.Bot,h.Prev.Top)&&(h=h.Next);h=this.FindNextLocMin(h),h!==m;){m===null&&(m=h);var d=new x.LocalMinima;d.Next=null,d.Y=h.Bot.Y,h.Dx<h.Prev.Dx?(d.LeftBound=h.Prev,d.RightBound=h,f=!1):(d.LeftBound=h,d.RightBound=h.Prev,f=!0),d.LeftBound.Side=x.EdgeSide.esLeft,d.RightBound.Side=x.EdgeSide.esRight,i?d.LeftBound.Next===d.RightBound?d.LeftBound.WindDelta=-1:d.LeftBound.WindDelta=1:d.LeftBound.WindDelta=0,d.RightBound.WindDelta=-d.LeftBound.WindDelta,h=this.ProcessBound(d.LeftBound,f),h.OutIdx===x.ClipperBase.Skip&&(h=this.ProcessBound(h,f));var v=this.ProcessBound(d.RightBound,!f);v.OutIdx===x.ClipperBase.Skip&&(v=this.ProcessBound(v,!f)),d.LeftBound.OutIdx===x.ClipperBase.Skip?d.LeftBound=null:d.RightBound.OutIdx===x.ClipperBase.Skip&&(d.RightBound=null),this.InsertLocalMinima(d),f||(h=v)}return!0},x.ClipperBase.prototype.AddPaths=function(e,t,i){for(var n=!1,r=0,o=e.length;r<o;++r)this.AddPath(e[r],t,i)&&(n=!0);return n},x.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(e,t,i){return x.FPoint.op_Equality(e,i)||x.FPoint.op_Equality(e,t)||x.FPoint.op_Equality(i,t)?!1:e.X!==i.X?t.X>e.X==t.X<i.X:t.Y>e.Y==t.Y<i.Y},x.ClipperBase.prototype.RemoveEdge=function(e){e.Prev.Next=e.Next,e.Next.Prev=e.Prev;var t=e.Next;return e.Prev=null,t},x.ClipperBase.prototype.SetDx=function(e){e.Delta.X=e.Top.X-e.Bot.X,e.Delta.Y=e.Top.Y-e.Bot.Y,e.Delta.Y===0?e.Dx=x.ClipperBase.horizontal:e.Dx=e.Delta.X/e.Delta.Y},x.ClipperBase.prototype.InsertLocalMinima=function(e){if(this.m_MinimaList===null)this.m_MinimaList=e;else if(e.Y>=this.m_MinimaList.Y)e.Next=this.m_MinimaList,this.m_MinimaList=e;else{for(var t=this.m_MinimaList;t.Next!==null&&e.Y<t.Next.Y;)t=t.Next;e.Next=t.Next,t.Next=e}},x.ClipperBase.prototype.PopLocalMinima=function(e,t){return t.v=this.m_CurrentLM,this.m_CurrentLM!==null&&this.m_CurrentLM.Y===e?(this.m_CurrentLM=this.m_CurrentLM.Next,!0):!1},x.ClipperBase.prototype.ReverseHorizontal=function(e){var t=e.Top.X;e.Top.X=e.Bot.X,e.Bot.X=t,x.use_xyz&&(t=e.Top.Z,e.Top.Z=e.Bot.Z,e.Bot.Z=t)},x.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,this.m_CurrentLM!==null){this.m_Scanbeam=null;for(var e=this.m_MinimaList;e!==null;){this.InsertScanbeam(e.Y);var t=e.LeftBound;t!==null&&(t.Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,x.use_xyz&&(t.Curr.Z=t.Bot.Z),t.OutIdx=x.ClipperBase.Unassigned),t=e.RightBound,t!==null&&(t.Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,x.use_xyz&&(t.Curr.Z=t.Bot.Z),t.OutIdx=x.ClipperBase.Unassigned),e=e.Next}this.m_ActiveEdges=null}},x.ClipperBase.prototype.InsertScanbeam=function(e){if(this.m_Scanbeam===null)this.m_Scanbeam=new x.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=e;else if(e>this.m_Scanbeam.Y){var t=new x.Scanbeam;t.Y=e,t.Next=this.m_Scanbeam,this.m_Scanbeam=t}else{for(var i=this.m_Scanbeam;i.Next!==null&&e<=i.Next.Y;)i=i.Next;if(e===i.Y)return;var n=new x.Scanbeam;n.Y=e,n.Next=i.Next,i.Next=n}},x.ClipperBase.prototype.PopScanbeam=function(e){return this.m_Scanbeam===null?(e.v=0,!1):(e.v=this.m_Scanbeam.Y,this.m_Scanbeam=this.m_Scanbeam.Next,!0)},x.ClipperBase.prototype.LocalMinimaPending=function(){return this.m_CurrentLM!==null},x.ClipperBase.prototype.CreateOutRec=function(){var e=new x.OutRec;return e.Idx=x.ClipperBase.Unassigned,e.IsHole=!1,e.IsOpen=!1,e.FirstLeft=null,e.Pts=null,e.BottomPt=null,e.PolyNode=null,this.m_PolyOuts.push(e),e.Idx=this.m_PolyOuts.length-1,e},x.ClipperBase.prototype.DisposeOutRec=function(e){var t=this.m_PolyOuts[e];t.Pts=null,t=null,this.m_PolyOuts[e]=null},x.ClipperBase.prototype.UpdateEdgeIntoAEL=function(e){e.NextInLML===null&&x.Error("UpdateEdgeIntoAEL: invalid call");var t=e.PrevInAEL,i=e.NextInAEL;return e.NextInLML.OutIdx=e.OutIdx,t!==null?t.NextInAEL=e.NextInLML:this.m_ActiveEdges=e.NextInLML,i!==null&&(i.PrevInAEL=e.NextInLML),e.NextInLML.Side=e.Side,e.NextInLML.WindDelta=e.WindDelta,e.NextInLML.WindCnt=e.WindCnt,e.NextInLML.WindCnt2=e.WindCnt2,e=e.NextInLML,e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,e.PrevInAEL=t,e.NextInAEL=i,x.ClipperBase.IsHorizontal(e)||this.InsertScanbeam(e.Top.Y),e},x.ClipperBase.prototype.SwapPositionsInAEL=function(e,t){if(!(e.NextInAEL===e.PrevInAEL||t.NextInAEL===t.PrevInAEL)){if(e.NextInAEL===t){var i=t.NextInAEL;i!==null&&(i.PrevInAEL=e);var n=e.PrevInAEL;n!==null&&(n.NextInAEL=t),t.PrevInAEL=n,t.NextInAEL=e,e.PrevInAEL=t,e.NextInAEL=i}else if(t.NextInAEL===e){var r=e.NextInAEL;r!==null&&(r.PrevInAEL=t);var o=t.PrevInAEL;o!==null&&(o.NextInAEL=e),e.PrevInAEL=o,e.NextInAEL=t,t.PrevInAEL=e,t.NextInAEL=r}else{var s=e.NextInAEL,a=e.PrevInAEL;e.NextInAEL=t.NextInAEL,e.NextInAEL!==null&&(e.NextInAEL.PrevInAEL=e),e.PrevInAEL=t.PrevInAEL,e.PrevInAEL!==null&&(e.PrevInAEL.NextInAEL=e),t.NextInAEL=s,t.NextInAEL!==null&&(t.NextInAEL.PrevInAEL=t),t.PrevInAEL=a,t.PrevInAEL!==null&&(t.PrevInAEL.NextInAEL=t)}e.PrevInAEL===null?this.m_ActiveEdges=e:t.PrevInAEL===null&&(this.m_ActiveEdges=t)}},x.ClipperBase.prototype.DeleteFromAEL=function(e){var t=e.PrevInAEL,i=e.NextInAEL;t===null&&i===null&&e!==this.m_ActiveEdges||(t!==null?t.NextInAEL=i:this.m_ActiveEdges=i,i!==null&&(i.PrevInAEL=t),e.NextInAEL=null,e.PrevInAEL=null)},x.Clipper=function(e){typeof e>"u"&&(e=0),this.m_PolyOuts=null,this.m_ClipType=x.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=x.PolyFillType.pftEvenOdd,this.m_SubjFillType=x.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,x.ClipperBase.call(this),this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=x.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=(1&e)!==0,this.StrictlySimple=(2&e)!==0,this.PreserveCollinear=(4&e)!==0,x.use_xyz&&(this.ZFillFunction=null)},x.Clipper.ioReverseSolution=1,x.Clipper.ioStrictlySimple=2,x.Clipper.ioPreserveCollinear=4,x.Clipper.prototype.Clear=function(){this.m_edges.length!==0&&(this.DisposeAllPolyPts(),x.ClipperBase.prototype.Clear.call(this))},x.Clipper.prototype.InsertMaxima=function(e){var t=new x.Maxima;if(t.X=e,this.m_Maxima===null)this.m_Maxima=t,this.m_Maxima.Next=null,this.m_Maxima.Prev=null;else if(e<this.m_Maxima.X)t.Next=this.m_Maxima,t.Prev=null,this.m_Maxima=t;else{for(var i=this.m_Maxima;i.Next!==null&&e>=i.Next.X;)i=i.Next;if(e===i.X)return;t.Next=i.Next,t.Prev=i,i.Next!==null&&(i.Next.Prev=t),i.Next=t}},x.Clipper.prototype.Execute=function(){var e=arguments,t=e.length,i=e[1]instanceof x.PolyTree;if(t===4&&!i){var n=e[0],r=e[1],o=e[2],s=e[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&x.Error("Error: PolyTree struct is needed for open path clipping."),this.m_ExecuteLocked=!0,x.Clear(r),this.m_SubjFillType=o,this.m_ClipFillType=s,this.m_ClipType=n,this.m_UsingPolyTree=!1;try{var a=this.ExecuteInternal();a&&this.BuildResult(r)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return a}else if(t===4&&i){var n=e[0],h=e[1],o=e[2],s=e[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=o,this.m_ClipFillType=s,this.m_ClipType=n,this.m_UsingPolyTree=!0;try{var a=this.ExecuteInternal();a&&this.BuildResult2(h)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return a}else if(t===2&&!i){var n=e[0],r=e[1];return this.Execute(n,r,x.PolyFillType.pftEvenOdd,x.PolyFillType.pftEvenOdd)}else if(t===2&&i){var n=e[0],h=e[1];return this.Execute(n,h,x.PolyFillType.pftEvenOdd,x.PolyFillType.pftEvenOdd)}},x.Clipper.prototype.FixHoleLinkage=function(e){if(!(e.FirstLeft===null||e.IsHole!==e.FirstLeft.IsHole&&e.FirstLeft.Pts!==null)){for(var t=e.FirstLeft;t!==null&&(t.IsHole===e.IsHole||t.Pts===null);)t=t.FirstLeft;e.FirstLeft=t}},x.Clipper.prototype.ExecuteInternal=function(){try{this.Reset(),this.m_SortedEdges=null,this.m_Maxima=null;var e={},t={};if(!this.PopScanbeam(e))return!1;for(this.InsertLocalMinimaIntoAEL(e.v);this.PopScanbeam(t)||this.LocalMinimaPending();){if(this.ProcessHorizontals(),this.m_GhostJoins.length=0,!this.ProcessIntersections(t.v))return!1;this.ProcessEdgesAtTopOfScanbeam(t.v),e.v=t.v,this.InsertLocalMinimaIntoAEL(e.v)}var i,n,r;for(n=0,r=this.m_PolyOuts.length;n<r;n++)i=this.m_PolyOuts[n],!(i.Pts===null||i.IsOpen)&&(i.IsHole^this.ReverseSolution)==this.Area$1(i)>0&&this.ReversePolyPtLinks(i.Pts);for(this.JoinCommonEdges(),n=0,r=this.m_PolyOuts.length;n<r;n++)i=this.m_PolyOuts[n],i.Pts!==null&&(i.IsOpen?this.FixupOutPolyline(i):this.FixupOutPolygon(i));return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{this.m_Joins.length=0,this.m_GhostJoins.length=0}},x.Clipper.prototype.DisposeAllPolyPts=function(){for(var e=0,t=this.m_PolyOuts.length;e<t;++e)this.DisposeOutRec(e);x.Clear(this.m_PolyOuts)},x.Clipper.prototype.AddJoin=function(e,t,i){var n=new x.Join;n.OutPt1=e,n.OutPt2=t,n.OffPt.X=i.X,n.OffPt.Y=i.Y,x.use_xyz&&(n.OffPt.Z=i.Z),this.m_Joins.push(n)},x.Clipper.prototype.AddGhostJoin=function(e,t){var i=new x.Join;i.OutPt1=e,i.OffPt.X=t.X,i.OffPt.Y=t.Y,x.use_xyz&&(i.OffPt.Z=t.Z),this.m_GhostJoins.push(i)},x.Clipper.prototype.SetZ=function(e,t,i){if(this.ZFillFunction!==null){if(e.Z!==0||this.ZFillFunction===null)return;x.FPoint.op_Equality(e,t.Bot)?e.Z=t.Bot.Z:x.FPoint.op_Equality(e,t.Top)?e.Z=t.Top.Z:x.FPoint.op_Equality(e,i.Bot)?e.Z=i.Bot.Z:x.FPoint.op_Equality(e,i.Top)?e.Z=i.Top.Z:this.ZFillFunction(t.Bot,t.Top,i.Bot,i.Top,e)}},x.Clipper.prototype.InsertLocalMinimaIntoAEL=function(e){for(var t={},i,n;this.PopLocalMinima(e,t);){i=t.v.LeftBound,n=t.v.RightBound;var r=null;if(i===null?(this.InsertEdgeIntoAEL(n,null),this.SetWindingCount(n),this.IsContributing(n)&&(r=this.AddOutPt(n,n.Bot))):n===null?(this.InsertEdgeIntoAEL(i,null),this.SetWindingCount(i),this.IsContributing(i)&&(r=this.AddOutPt(i,i.Bot)),this.InsertScanbeam(i.Top.Y)):(this.InsertEdgeIntoAEL(i,null),this.InsertEdgeIntoAEL(n,i),this.SetWindingCount(i),n.WindCnt=i.WindCnt,n.WindCnt2=i.WindCnt2,this.IsContributing(i)&&(r=this.AddLocalMinPoly(i,n,i.Bot)),this.InsertScanbeam(i.Top.Y)),n!==null&&(x.ClipperBase.IsHorizontal(n)?(n.NextInLML!==null&&this.InsertScanbeam(n.NextInLML.Top.Y),this.AddEdgeToSEL(n)):this.InsertScanbeam(n.Top.Y)),!(i===null||n===null)){if(r!==null&&x.ClipperBase.IsHorizontal(n)&&this.m_GhostJoins.length>0&&n.WindDelta!==0)for(var o=0,s=this.m_GhostJoins.length;o<s;o++){var a=this.m_GhostJoins[o];this.HorzSegmentsOverlap(a.OutPt1.Pt.X,a.OffPt.X,n.Bot.X,n.Top.X)&&this.AddJoin(a.OutPt1,r,a.OffPt)}if(i.OutIdx>=0&&i.PrevInAEL!==null&&i.PrevInAEL.Curr.X===i.Bot.X&&i.PrevInAEL.OutIdx>=0&&x.ClipperBase.SlopesEqual5(i.PrevInAEL.Curr,i.PrevInAEL.Top,i.Curr,i.Top)&&i.WindDelta!==0&&i.PrevInAEL.WindDelta!==0){var h=this.AddOutPt(i.PrevInAEL,i.Bot);this.AddJoin(r,h,i.Top)}if(i.NextInAEL!==n){if(n.OutIdx>=0&&n.PrevInAEL.OutIdx>=0&&x.ClipperBase.SlopesEqual5(n.PrevInAEL.Curr,n.PrevInAEL.Top,n.Curr,n.Top)&&n.WindDelta!==0&&n.PrevInAEL.WindDelta!==0){var h=this.AddOutPt(n.PrevInAEL,n.Bot);this.AddJoin(r,h,n.Top)}var c=i.NextInAEL;if(c!==null)for(;c!==n;)this.IntersectEdges(n,c,i.Curr),c=c.NextInAEL}}}},x.Clipper.prototype.InsertEdgeIntoAEL=function(e,t){if(this.m_ActiveEdges===null)e.PrevInAEL=null,e.NextInAEL=null,this.m_ActiveEdges=e;else if(t===null&&this.E2InsertsBeforeE1(this.m_ActiveEdges,e))e.PrevInAEL=null,e.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=e,this.m_ActiveEdges=e;else{for(t===null&&(t=this.m_ActiveEdges);t.NextInAEL!==null&&!this.E2InsertsBeforeE1(t.NextInAEL,e);)t=t.NextInAEL;e.NextInAEL=t.NextInAEL,t.NextInAEL!==null&&(t.NextInAEL.PrevInAEL=e),e.PrevInAEL=t,t.NextInAEL=e}},x.Clipper.prototype.E2InsertsBeforeE1=function(e,t){return t.Curr.X===e.Curr.X?t.Top.Y>e.Top.Y?t.Top.X<x.Clipper.TopX(e,t.Top.Y):e.Top.X>x.Clipper.TopX(t,e.Top.Y):t.Curr.X<e.Curr.X},x.Clipper.prototype.IsEvenOddFillType=function(e){return e.PolyTyp===x.PolyType.ptSubject?this.m_SubjFillType===x.PolyFillType.pftEvenOdd:this.m_ClipFillType===x.PolyFillType.pftEvenOdd},x.Clipper.prototype.IsEvenOddAltFillType=function(e){return e.PolyTyp===x.PolyType.ptSubject?this.m_ClipFillType===x.PolyFillType.pftEvenOdd:this.m_SubjFillType===x.PolyFillType.pftEvenOdd},x.Clipper.prototype.IsContributing=function(e){var t,i;switch(e.PolyTyp===x.PolyType.ptSubject?(t=this.m_SubjFillType,i=this.m_ClipFillType):(t=this.m_ClipFillType,i=this.m_SubjFillType),t){case x.PolyFillType.pftEvenOdd:if(e.WindDelta===0&&e.WindCnt!==1)return!1;break;case x.PolyFillType.pftNonZero:if(Math.abs(e.WindCnt)!==1)return!1;break;case x.PolyFillType.pftPositive:if(e.WindCnt!==1)return!1;break;default:if(e.WindCnt!==-1)return!1;break}switch(this.m_ClipType){case x.ClipType.ctIntersection:switch(i){case x.PolyFillType.pftEvenOdd:case x.PolyFillType.pftNonZero:return e.WindCnt2!==0;case x.PolyFillType.pftPositive:return e.WindCnt2>0;default:return e.WindCnt2<0}case x.ClipType.ctUnion:switch(i){case x.PolyFillType.pftEvenOdd:case x.PolyFillType.pftNonZero:return e.WindCnt2===0;case x.PolyFillType.pftPositive:return e.WindCnt2<=0;default:return e.WindCnt2>=0}case x.ClipType.ctDifference:if(e.PolyTyp===x.PolyType.ptSubject)switch(i){case x.PolyFillType.pftEvenOdd:case x.PolyFillType.pftNonZero:return e.WindCnt2===0;case x.PolyFillType.pftPositive:return e.WindCnt2<=0;default:return e.WindCnt2>=0}else switch(i){case x.PolyFillType.pftEvenOdd:case x.PolyFillType.pftNonZero:return e.WindCnt2!==0;case x.PolyFillType.pftPositive:return e.WindCnt2>0;default:return e.WindCnt2<0}case x.ClipType.ctXor:if(e.WindDelta===0)switch(i){case x.PolyFillType.pftEvenOdd:case x.PolyFillType.pftNonZero:return e.WindCnt2===0;case x.PolyFillType.pftPositive:return e.WindCnt2<=0;default:return e.WindCnt2>=0}else return!0}return!0},x.Clipper.prototype.SetWindingCount=function(e){for(var t=e.PrevInAEL;t!==null&&(t.PolyTyp!==e.PolyTyp||t.WindDelta===0);)t=t.PrevInAEL;if(t===null){var i=e.PolyTyp===x.PolyType.ptSubject?this.m_SubjFillType:this.m_ClipFillType;e.WindDelta===0?e.WindCnt=i===x.PolyFillType.pftNegative?-1:1:e.WindCnt=e.WindDelta,e.WindCnt2=0,t=this.m_ActiveEdges}else if(e.WindDelta===0&&this.m_ClipType!==x.ClipType.ctUnion)e.WindCnt=1,e.WindCnt2=t.WindCnt2,t=t.NextInAEL;else if(this.IsEvenOddFillType(e)){if(e.WindDelta===0){for(var n=!0,r=t.PrevInAEL;r!==null;)r.PolyTyp===t.PolyTyp&&r.WindDelta!==0&&(n=!n),r=r.PrevInAEL;e.WindCnt=n?0:1}else e.WindCnt=e.WindDelta;e.WindCnt2=t.WindCnt2,t=t.NextInAEL}else t.WindCnt*t.WindDelta<0?Math.abs(t.WindCnt)>1?t.WindDelta*e.WindDelta<0?e.WindCnt=t.WindCnt:e.WindCnt=t.WindCnt+e.WindDelta:e.WindCnt=e.WindDelta===0?1:e.WindDelta:e.WindDelta===0?e.WindCnt=t.WindCnt<0?t.WindCnt-1:t.WindCnt+1:t.WindDelta*e.WindDelta<0?e.WindCnt=t.WindCnt:e.WindCnt=t.WindCnt+e.WindDelta,e.WindCnt2=t.WindCnt2,t=t.NextInAEL;if(this.IsEvenOddAltFillType(e))for(;t!==e;)t.WindDelta!==0&&(e.WindCnt2=e.WindCnt2===0?1:0),t=t.NextInAEL;else for(;t!==e;)e.WindCnt2+=t.WindDelta,t=t.NextInAEL},x.Clipper.prototype.AddEdgeToSEL=function(e){this.m_SortedEdges===null?(this.m_SortedEdges=e,e.PrevInSEL=null,e.NextInSEL=null):(e.NextInSEL=this.m_SortedEdges,e.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=e,this.m_SortedEdges=e)},x.Clipper.prototype.PopEdgeFromSEL=function(e){if(e.v=this.m_SortedEdges,e.v===null)return!1;var t=e.v;return this.m_SortedEdges=e.v.NextInSEL,this.m_SortedEdges!==null&&(this.m_SortedEdges.PrevInSEL=null),t.NextInSEL=null,t.PrevInSEL=null,!0},x.Clipper.prototype.CopyAELToSEL=function(){var e=this.m_ActiveEdges;for(this.m_SortedEdges=e;e!==null;)e.PrevInSEL=e.PrevInAEL,e.NextInSEL=e.NextInAEL,e=e.NextInAEL},x.Clipper.prototype.SwapPositionsInSEL=function(e,t){if(!(e.NextInSEL===null&&e.PrevInSEL===null)&&!(t.NextInSEL===null&&t.PrevInSEL===null)){if(e.NextInSEL===t){var i=t.NextInSEL;i!==null&&(i.PrevInSEL=e);var n=e.PrevInSEL;n!==null&&(n.NextInSEL=t),t.PrevInSEL=n,t.NextInSEL=e,e.PrevInSEL=t,e.NextInSEL=i}else if(t.NextInSEL===e){var i=e.NextInSEL;i!==null&&(i.PrevInSEL=t);var n=t.PrevInSEL;n!==null&&(n.NextInSEL=e),e.PrevInSEL=n,e.NextInSEL=t,t.PrevInSEL=e,t.NextInSEL=i}else{var i=e.NextInSEL,n=e.PrevInSEL;e.NextInSEL=t.NextInSEL,e.NextInSEL!==null&&(e.NextInSEL.PrevInSEL=e),e.PrevInSEL=t.PrevInSEL,e.PrevInSEL!==null&&(e.PrevInSEL.NextInSEL=e),t.NextInSEL=i,t.NextInSEL!==null&&(t.NextInSEL.PrevInSEL=t),t.PrevInSEL=n,t.PrevInSEL!==null&&(t.PrevInSEL.NextInSEL=t)}e.PrevInSEL===null?this.m_SortedEdges=e:t.PrevInSEL===null&&(this.m_SortedEdges=t)}},x.Clipper.prototype.AddLocalMaxPoly=function(e,t,i){this.AddOutPt(e,i),t.WindDelta===0&&this.AddOutPt(t,i),e.OutIdx===t.OutIdx?(e.OutIdx=-1,t.OutIdx=-1):e.OutIdx<t.OutIdx?this.AppendPolygon(e,t):this.AppendPolygon(t,e)},x.Clipper.prototype.AddLocalMinPoly=function(e,t,i){var n,r,o;if(x.ClipperBase.IsHorizontal(t)||e.Dx>t.Dx?(n=this.AddOutPt(e,i),t.OutIdx=e.OutIdx,e.Side=x.EdgeSide.esLeft,t.Side=x.EdgeSide.esRight,r=e,r.PrevInAEL===t?o=t.PrevInAEL:o=r.PrevInAEL):(n=this.AddOutPt(t,i),e.OutIdx=t.OutIdx,e.Side=x.EdgeSide.esRight,t.Side=x.EdgeSide.esLeft,r=t,r.PrevInAEL===e?o=e.PrevInAEL:o=r.PrevInAEL),o!==null&&o.OutIdx>=0&&o.Top.Y<i.Y&&r.Top.Y<i.Y){var s=x.Clipper.TopX(o,i.Y),a=x.Clipper.TopX(r,i.Y);if(s===a&&r.WindDelta!==0&&o.WindDelta!==0&&x.ClipperBase.SlopesEqual5(new x.FPoint2(s,i.Y),o.Top,new x.FPoint2(a,i.Y),r.Top)){var h=this.AddOutPt(o,i);this.AddJoin(n,h,r.Top)}}return n},x.Clipper.prototype.AddOutPt=function(e,t){if(e.OutIdx<0){var i=this.CreateOutRec();i.IsOpen=e.WindDelta===0;var n=new x.OutPt;return i.Pts=n,n.Idx=i.Idx,n.Pt.X=t.X,n.Pt.Y=t.Y,x.use_xyz&&(n.Pt.Z=t.Z),n.Next=n,n.Prev=n,i.IsOpen||this.SetHoleState(e,i),e.OutIdx=i.Idx,n}else{var i=this.m_PolyOuts[e.OutIdx],r=i.Pts,o=e.Side===x.EdgeSide.esLeft;if(o&&x.FPoint.op_Equality(t,r.Pt))return r;if(!o&&x.FPoint.op_Equality(t,r.Prev.Pt))return r.Prev;var n=new x.OutPt;return n.Idx=i.Idx,n.Pt.X=t.X,n.Pt.Y=t.Y,x.use_xyz&&(n.Pt.Z=t.Z),n.Next=r,n.Prev=r.Prev,n.Prev.Next=n,r.Prev=n,o&&(i.Pts=n),n}},x.Clipper.prototype.GetLastOutPt=function(e){var t=this.m_PolyOuts[e.OutIdx];return e.Side===x.EdgeSide.esLeft?t.Pts:t.Pts.Prev},x.Clipper.prototype.SwapPoints=function(e,t){var i=new x.FPoint1(e.Value);e.Value.X=t.Value.X,e.Value.Y=t.Value.Y,x.use_xyz&&(e.Value.Z=t.Value.Z),t.Value.X=i.X,t.Value.Y=i.Y,x.use_xyz&&(t.Value.Z=i.Z)},x.Clipper.prototype.HorzSegmentsOverlap=function(e,t,i,n){var r;return e>t&&(r=e,e=t,t=r),i>n&&(r=i,i=n,n=r),e<n&&i<t},x.Clipper.prototype.SetHoleState=function(e,t){for(var i=e.PrevInAEL,n=null;i!==null;)i.OutIdx>=0&&i.WindDelta!==0&&(n===null?n=i:n.OutIdx===i.OutIdx&&(n=null)),i=i.PrevInAEL;n===null?(t.FirstLeft=null,t.IsHole=!1):(t.FirstLeft=this.m_PolyOuts[n.OutIdx],t.IsHole=!t.FirstLeft.IsHole)},x.Clipper.prototype.GetDx=function(e,t){return e.Y===t.Y?x.ClipperBase.horizontal:(t.X-e.X)/(t.Y-e.Y)},x.Clipper.prototype.FirstIsBottomPt=function(e,t){for(var i=e.Prev;x.FPoint.op_Equality(i.Pt,e.Pt)&&i!==e;)i=i.Prev;var n=Math.abs(this.GetDx(e.Pt,i.Pt));for(i=e.Next;x.FPoint.op_Equality(i.Pt,e.Pt)&&i!==e;)i=i.Next;var r=Math.abs(this.GetDx(e.Pt,i.Pt));for(i=t.Prev;x.FPoint.op_Equality(i.Pt,t.Pt)&&i!==t;)i=i.Prev;var o=Math.abs(this.GetDx(t.Pt,i.Pt));for(i=t.Next;x.FPoint.op_Equality(i.Pt,t.Pt)&&i!==t;)i=i.Next;var s=Math.abs(this.GetDx(t.Pt,i.Pt));return Math.max(n,r)===Math.max(o,s)&&Math.min(n,r)===Math.min(o,s)?this.Area(e)>0:n>=o&&n>=s||r>=o&&r>=s},x.Clipper.prototype.GetBottomPt=function(e){for(var t=null,i=e.Next;i!==e;)i.Pt.Y>e.Pt.Y?(e=i,t=null):i.Pt.Y===e.Pt.Y&&i.Pt.X<=e.Pt.X&&(i.Pt.X<e.Pt.X?(t=null,e=i):i.Next!==e&&i.Prev!==e&&(t=i)),i=i.Next;if(t!==null)for(;t!==i;)for(this.FirstIsBottomPt(i,t)||(e=t),t=t.Next;x.FPoint.op_Inequality(t.Pt,e.Pt);)t=t.Next;return e},x.Clipper.prototype.GetLowermostRec=function(e,t){e.BottomPt===null&&(e.BottomPt=this.GetBottomPt(e.Pts)),t.BottomPt===null&&(t.BottomPt=this.GetBottomPt(t.Pts));var i=e.BottomPt,n=t.BottomPt;return i.Pt.Y>n.Pt.Y?e:i.Pt.Y<n.Pt.Y?t:i.Pt.X<n.Pt.X?e:i.Pt.X>n.Pt.X||i.Next===i?t:n.Next===n||this.FirstIsBottomPt(i,n)?e:t},x.Clipper.prototype.OutRec1RightOfOutRec2=function(e,t){do if(e=e.FirstLeft,e===t)return!0;while(e!==null);return!1},x.Clipper.prototype.GetOutRec=function(e){for(var t=this.m_PolyOuts[e];t!==this.m_PolyOuts[t.Idx];)t=this.m_PolyOuts[t.Idx];return t},x.Clipper.prototype.AppendPolygon=function(e,t){var i=this.m_PolyOuts[e.OutIdx],n=this.m_PolyOuts[t.OutIdx],r;this.OutRec1RightOfOutRec2(i,n)?r=n:this.OutRec1RightOfOutRec2(n,i)?r=i:r=this.GetLowermostRec(i,n);var o=i.Pts,s=o.Prev,a=n.Pts,h=a.Prev;e.Side===x.EdgeSide.esLeft?t.Side===x.EdgeSide.esLeft?(this.ReversePolyPtLinks(a),a.Next=o,o.Prev=a,s.Next=h,h.Prev=s,i.Pts=h):(h.Next=o,o.Prev=h,a.Prev=s,s.Next=a,i.Pts=a):t.Side===x.EdgeSide.esRight?(this.ReversePolyPtLinks(a),s.Next=h,h.Prev=s,a.Next=o,o.Prev=a):(s.Next=a,a.Prev=s,o.Prev=h,h.Next=o),i.BottomPt=null,r===n&&(n.FirstLeft!==i&&(i.FirstLeft=n.FirstLeft),i.IsHole=n.IsHole),n.Pts=null,n.BottomPt=null,n.FirstLeft=i;var c=e.OutIdx,d=t.OutIdx;e.OutIdx=-1,t.OutIdx=-1;for(var f=this.m_ActiveEdges;f!==null;){if(f.OutIdx===d){f.OutIdx=c,f.Side=e.Side;break}f=f.NextInAEL}n.Idx=i.Idx},x.Clipper.prototype.ReversePolyPtLinks=function(e){if(e!==null){var t,i;t=e;do i=t.Next,t.Next=t.Prev,t.Prev=i,t=i;while(t!==e)}},x.Clipper.SwapSides=function(e,t){var i=e.Side;e.Side=t.Side,t.Side=i},x.Clipper.SwapPolyIndexes=function(e,t){var i=e.OutIdx;e.OutIdx=t.OutIdx,t.OutIdx=i},x.Clipper.prototype.IntersectEdges=function(e,t,i){var n=e.OutIdx>=0,r=t.OutIdx>=0;if(x.use_xyz&&this.SetZ(i,e,t),x.use_lines&&(e.WindDelta===0||t.WindDelta===0)){if(e.WindDelta===0&&t.WindDelta===0)return;e.PolyTyp===t.PolyTyp&&e.WindDelta!==t.WindDelta&&this.m_ClipType===x.ClipType.ctUnion?e.WindDelta===0?r&&(this.AddOutPt(e,i),n&&(e.OutIdx=-1)):n&&(this.AddOutPt(t,i),r&&(t.OutIdx=-1)):e.PolyTyp!==t.PolyTyp&&(e.WindDelta===0&&Math.abs(t.WindCnt)===1&&(this.m_ClipType!==x.ClipType.ctUnion||t.WindCnt2===0)?(this.AddOutPt(e,i),n&&(e.OutIdx=-1)):t.WindDelta===0&&Math.abs(e.WindCnt)===1&&(this.m_ClipType!==x.ClipType.ctUnion||e.WindCnt2===0)&&(this.AddOutPt(t,i),r&&(t.OutIdx=-1)));return}if(e.PolyTyp===t.PolyTyp)if(this.IsEvenOddFillType(e)){var o=e.WindCnt;e.WindCnt=t.WindCnt,t.WindCnt=o}else e.WindCnt+t.WindDelta===0?e.WindCnt=-e.WindCnt:e.WindCnt+=t.WindDelta,t.WindCnt-e.WindDelta===0?t.WindCnt=-t.WindCnt:t.WindCnt-=e.WindDelta;else this.IsEvenOddFillType(t)?e.WindCnt2=e.WindCnt2===0?1:0:e.WindCnt2+=t.WindDelta,this.IsEvenOddFillType(e)?t.WindCnt2=t.WindCnt2===0?1:0:t.WindCnt2-=e.WindDelta;var s,a,h,c;e.PolyTyp===x.PolyType.ptSubject?(s=this.m_SubjFillType,h=this.m_ClipFillType):(s=this.m_ClipFillType,h=this.m_SubjFillType),t.PolyTyp===x.PolyType.ptSubject?(a=this.m_SubjFillType,c=this.m_ClipFillType):(a=this.m_ClipFillType,c=this.m_SubjFillType);var d,f;switch(s){case x.PolyFillType.pftPositive:d=e.WindCnt;break;case x.PolyFillType.pftNegative:d=-e.WindCnt;break;default:d=Math.abs(e.WindCnt);break}switch(a){case x.PolyFillType.pftPositive:f=t.WindCnt;break;case x.PolyFillType.pftNegative:f=-t.WindCnt;break;default:f=Math.abs(t.WindCnt);break}if(n&&r)d!==0&&d!==1||f!==0&&f!==1||e.PolyTyp!==t.PolyTyp&&this.m_ClipType!==x.ClipType.ctXor?this.AddLocalMaxPoly(e,t,i):(this.AddOutPt(e,i),this.AddOutPt(t,i),x.Clipper.SwapSides(e,t),x.Clipper.SwapPolyIndexes(e,t));else if(n)(f===0||f===1)&&(this.AddOutPt(e,i),x.Clipper.SwapSides(e,t),x.Clipper.SwapPolyIndexes(e,t));else if(r)(d===0||d===1)&&(this.AddOutPt(t,i),x.Clipper.SwapSides(e,t),x.Clipper.SwapPolyIndexes(e,t));else if((d===0||d===1)&&(f===0||f===1)){var m,v;switch(h){case x.PolyFillType.pftPositive:m=e.WindCnt2;break;case x.PolyFillType.pftNegative:m=-e.WindCnt2;break;default:m=Math.abs(e.WindCnt2);break}switch(c){case x.PolyFillType.pftPositive:v=t.WindCnt2;break;case x.PolyFillType.pftNegative:v=-t.WindCnt2;break;default:v=Math.abs(t.WindCnt2);break}if(e.PolyTyp!==t.PolyTyp)this.AddLocalMinPoly(e,t,i);else if(d===1&&f===1)switch(this.m_ClipType){case x.ClipType.ctIntersection:m>0&&v>0&&this.AddLocalMinPoly(e,t,i);break;case x.ClipType.ctUnion:m<=0&&v<=0&&this.AddLocalMinPoly(e,t,i);break;case x.ClipType.ctDifference:(e.PolyTyp===x.PolyType.ptClip&&m>0&&v>0||e.PolyTyp===x.PolyType.ptSubject&&m<=0&&v<=0)&&this.AddLocalMinPoly(e,t,i);break;case x.ClipType.ctXor:this.AddLocalMinPoly(e,t,i);break}else x.Clipper.SwapSides(e,t)}},x.Clipper.prototype.DeleteFromSEL=function(e){var t=e.PrevInSEL,i=e.NextInSEL;t===null&&i===null&&e!==this.m_SortedEdges||(t!==null?t.NextInSEL=i:this.m_SortedEdges=i,i!==null&&(i.PrevInSEL=t),e.NextInSEL=null,e.PrevInSEL=null)},x.Clipper.prototype.ProcessHorizontals=function(){for(var e={};this.PopEdgeFromSEL(e);)this.ProcessHorizontal(e.v)},x.Clipper.prototype.GetHorzDirection=function(e,t){e.Bot.X<e.Top.X?(t.Left=e.Bot.X,t.Right=e.Top.X,t.Dir=x.Direction.dLeftToRight):(t.Left=e.Top.X,t.Right=e.Bot.X,t.Dir=x.Direction.dRightToLeft)},x.Clipper.prototype.ProcessHorizontal=function(e){var t={Dir:null,Left:null,Right:null};this.GetHorzDirection(e,t);for(var i=t.Dir,n=t.Left,r=t.Right,o=e.WindDelta===0,s=e,a=null;s.NextInLML!==null&&x.ClipperBase.IsHorizontal(s.NextInLML);)s=s.NextInLML;s.NextInLML===null&&(a=this.GetMaximaPair(s));var h=this.m_Maxima;if(h!==null)if(i===x.Direction.dLeftToRight){for(;h!==null&&h.X<=e.Bot.X;)h=h.Next;h!==null&&h.X>=s.Top.X&&(h=null)}else{for(;h.Next!==null&&h.Next.X<e.Bot.X;)h=h.Next;h.X<=s.Top.X&&(h=null)}for(var c=null;;){for(var d=e===s,f=this.GetNextInAEL(e,i);f!==null;){if(h!==null)if(i===x.Direction.dLeftToRight)for(;h!==null&&h.X<f.Curr.X;)e.OutIdx>=0&&!o&&this.AddOutPt(e,new x.FPoint2(h.X,e.Bot.Y)),h=h.Next;else for(;h!==null&&h.X>f.Curr.X;)e.OutIdx>=0&&!o&&this.AddOutPt(e,new x.FPoint2(h.X,e.Bot.Y)),h=h.Prev;if(i===x.Direction.dLeftToRight&&f.Curr.X>r||i===x.Direction.dRightToLeft&&f.Curr.X<n||f.Curr.X===e.Top.X&&e.NextInLML!==null&&f.Dx<e.NextInLML.Dx)break;if(e.OutIdx>=0&&!o){x.use_xyz&&(i===x.Direction.dLeftToRight?this.SetZ(f.Curr,e,f):this.SetZ(f.Curr,f,e)),c=this.AddOutPt(e,f.Curr);for(var m=this.m_SortedEdges;m!==null;){if(m.OutIdx>=0&&this.HorzSegmentsOverlap(e.Bot.X,e.Top.X,m.Bot.X,m.Top.X)){var v=this.GetLastOutPt(m);this.AddJoin(v,c,m.Top)}m=m.NextInSEL}this.AddGhostJoin(c,e.Bot)}if(f===a&&d){e.OutIdx>=0&&this.AddLocalMaxPoly(e,a,e.Top),this.DeleteFromAEL(e),this.DeleteFromAEL(a);return}if(i===x.Direction.dLeftToRight){var S=new x.FPoint2(f.Curr.X,e.Curr.Y);this.IntersectEdges(e,f,S)}else{var S=new x.FPoint2(f.Curr.X,e.Curr.Y);this.IntersectEdges(f,e,S)}var g=this.GetNextInAEL(f,i);this.SwapPositionsInAEL(e,f),f=g}if(e.NextInLML===null||!x.ClipperBase.IsHorizontal(e.NextInLML))break;e=this.UpdateEdgeIntoAEL(e),e.OutIdx>=0&&this.AddOutPt(e,e.Bot),t={Dir:i,Left:n,Right:r},this.GetHorzDirection(e,t),i=t.Dir,n=t.Left,r=t.Right}if(e.OutIdx>=0&&c===null){c=this.GetLastOutPt(e);for(var m=this.m_SortedEdges;m!==null;){if(m.OutIdx>=0&&this.HorzSegmentsOverlap(e.Bot.X,e.Top.X,m.Bot.X,m.Top.X)){var v=this.GetLastOutPt(m);this.AddJoin(v,c,m.Top)}m=m.NextInSEL}this.AddGhostJoin(c,e.Top)}if(e.NextInLML!==null)if(e.OutIdx>=0){if(c=this.AddOutPt(e,e.Top),e=this.UpdateEdgeIntoAEL(e),e.WindDelta===0)return;var y=e.PrevInAEL,g=e.NextInAEL;if(y!==null&&y.Curr.X===e.Bot.X&&y.Curr.Y===e.Bot.Y&&y.WindDelta===0&&y.OutIdx>=0&&y.Curr.Y>y.Top.Y&&x.ClipperBase.SlopesEqual3(e,y)){var v=this.AddOutPt(y,e.Bot);this.AddJoin(c,v,e.Top)}else if(g!==null&&g.Curr.X===e.Bot.X&&g.Curr.Y===e.Bot.Y&&g.WindDelta!==0&&g.OutIdx>=0&&g.Curr.Y>g.Top.Y&&x.ClipperBase.SlopesEqual3(e,g)){var v=this.AddOutPt(g,e.Bot);this.AddJoin(c,v,e.Top)}}else e=this.UpdateEdgeIntoAEL(e);else e.OutIdx>=0&&this.AddOutPt(e,e.Top),this.DeleteFromAEL(e)},x.Clipper.prototype.GetNextInAEL=function(e,t){return t===x.Direction.dLeftToRight?e.NextInAEL:e.PrevInAEL},x.Clipper.prototype.IsMinima=function(e){return e!==null&&e.Prev.NextInLML!==e&&e.Next.NextInLML!==e},x.Clipper.prototype.IsMaxima=function(e,t){return e!==null&&e.Top.Y===t&&e.NextInLML===null},x.Clipper.prototype.IsIntermediate=function(e,t){return e.Top.Y===t&&e.NextInLML!==null},x.Clipper.prototype.GetMaximaPair=function(e){return x.FPoint.op_Equality(e.Next.Top,e.Top)&&e.Next.NextInLML===null?e.Next:x.FPoint.op_Equality(e.Prev.Top,e.Top)&&e.Prev.NextInLML===null?e.Prev:null},x.Clipper.prototype.GetMaximaPairEx=function(e){var t=this.GetMaximaPair(e);return t===null||t.OutIdx===x.ClipperBase.Skip||t.NextInAEL===t.PrevInAEL&&!x.ClipperBase.IsHorizontal(t)?null:t},x.Clipper.prototype.ProcessIntersections=function(e){if(this.m_ActiveEdges===null)return!0;try{if(this.BuildIntersectList(e),this.m_IntersectList.length===0)return!0;if(this.m_IntersectList.length===1||this.FixupIntersectionOrder())this.ProcessIntersectList();else return!1}catch{this.m_SortedEdges=null,this.m_IntersectList.length=0,x.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},x.Clipper.prototype.BuildIntersectList=function(e){if(this.m_ActiveEdges!==null){var t=this.m_ActiveEdges;for(this.m_SortedEdges=t;t!==null;)t.PrevInSEL=t.PrevInAEL,t.NextInSEL=t.NextInAEL,t.Curr.X=x.Clipper.TopX(t,e),t=t.NextInAEL;for(var i=!0;i&&this.m_SortedEdges!==null;){for(i=!1,t=this.m_SortedEdges;t.NextInSEL!==null;){var n=t.NextInSEL,r=new x.FPoint0;if(t.Curr.X>n.Curr.X){this.IntersectPoint(t,n,r),r.Y<e&&(r=new x.FPoint2(x.Clipper.TopX(t,e),e));var o=new x.IntersectNode;o.Edge1=t,o.Edge2=n,o.Pt.X=r.X,o.Pt.Y=r.Y,x.use_xyz&&(o.Pt.Z=r.Z),this.m_IntersectList.push(o),this.SwapPositionsInSEL(t,n),i=!0}else t=n}if(t.PrevInSEL!==null)t.PrevInSEL.NextInSEL=null;else break}this.m_SortedEdges=null}},x.Clipper.prototype.EdgesAdjacent=function(e){return e.Edge1.NextInSEL===e.Edge2||e.Edge1.PrevInSEL===e.Edge2},x.Clipper.IntersectNodeSort=function(e,t){return t.Pt.Y-e.Pt.Y},x.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var e=this.m_IntersectList.length,t=0;t<e;t++){if(!this.EdgesAdjacent(this.m_IntersectList[t])){for(var i=t+1;i<e&&!this.EdgesAdjacent(this.m_IntersectList[i]);)i++;if(i===e)return!1;var n=this.m_IntersectList[t];this.m_IntersectList[t]=this.m_IntersectList[i],this.m_IntersectList[i]=n}this.SwapPositionsInSEL(this.m_IntersectList[t].Edge1,this.m_IntersectList[t].Edge2)}return!0},x.Clipper.prototype.ProcessIntersectList=function(){for(var e=0,t=this.m_IntersectList.length;e<t;e++){var i=this.m_IntersectList[e];this.IntersectEdges(i.Edge1,i.Edge2,i.Pt),this.SwapPositionsInAEL(i.Edge1,i.Edge2)}this.m_IntersectList.length=0},x.Clipper.TopX=function(e,t){return t===e.Top.Y?e.Top.X:e.Bot.X+e.Dx*(t-e.Bot.Y)},x.Clipper.prototype.IntersectPoint=function(e,t,i){i.X=0,i.Y=0;var n,r;if(e.Dx===t.Dx){i.Y=e.Curr.Y,i.X=x.Clipper.TopX(e,i.Y);return}if(e.Delta.X===0)i.X=e.Bot.X,x.ClipperBase.IsHorizontal(t)?i.Y=t.Bot.Y:(r=t.Bot.Y-t.Bot.X/t.Dx,i.Y=i.X/t.Dx+r);else if(t.Delta.X===0)i.X=t.Bot.X,x.ClipperBase.IsHorizontal(e)?i.Y=e.Bot.Y:(n=e.Bot.Y-e.Bot.X/e.Dx,i.Y=i.X/e.Dx+n);else{n=e.Bot.X-e.Bot.Y*e.Dx,r=t.Bot.X-t.Bot.Y*t.Dx;var o=(r-n)/(e.Dx-t.Dx);i.Y=o,Math.abs(e.Dx)<Math.abs(t.Dx)?i.X=e.Dx*o+n:i.X=t.Dx*o+r}if(i.Y<e.Top.Y||i.Y<t.Top.Y){if(e.Top.Y>t.Top.Y)return i.Y=e.Top.Y,i.X=x.Clipper.TopX(t,e.Top.Y),i.X<e.Top.X;i.Y=t.Top.Y,Math.abs(e.Dx)<Math.abs(t.Dx)?i.X=x.Clipper.TopX(e,i.Y):i.X=x.Clipper.TopX(t,i.Y)}i.Y>e.Curr.Y&&(i.Y=e.Curr.Y,Math.abs(e.Dx)>Math.abs(t.Dx)?i.X=x.Clipper.TopX(t,i.Y):i.X=x.Clipper.TopX(e,i.Y))},x.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(e){for(var t=this.m_ActiveEdges;t!==null;){var i=this.IsMaxima(t,e);if(i){var n=this.GetMaximaPairEx(t);i=n===null||!x.ClipperBase.IsHorizontal(n)}if(i){this.StrictlySimple&&this.InsertMaxima(t.Top.X);var r=t.PrevInAEL;this.DoMaxima(t),r===null?t=this.m_ActiveEdges:t=r.NextInAEL}else{if(this.IsIntermediate(t,e)&&x.ClipperBase.IsHorizontal(t.NextInLML)?(t=this.UpdateEdgeIntoAEL(t),t.OutIdx>=0&&this.AddOutPt(t,t.Bot),this.AddEdgeToSEL(t)):(t.Curr.X=x.Clipper.TopX(t,e),t.Curr.Y=e),x.use_xyz&&(t.Top.Y===e?t.Curr.Z=t.Top.Z:t.Bot.Y===e?t.Curr.Z=t.Bot.Z:t.Curr.Z=0),this.StrictlySimple){var r=t.PrevInAEL;if(t.OutIdx>=0&&t.WindDelta!==0&&r!==null&&r.OutIdx>=0&&r.Curr.X===t.Curr.X&&r.WindDelta!==0){var o=new x.FPoint1(t.Curr);x.use_xyz&&this.SetZ(o,r,t);var s=this.AddOutPt(r,o),a=this.AddOutPt(t,o);this.AddJoin(s,a,o)}}t=t.NextInAEL}}for(this.ProcessHorizontals(),this.m_Maxima=null,t=this.m_ActiveEdges;t!==null;){if(this.IsIntermediate(t,e)){var s=null;t.OutIdx>=0&&(s=this.AddOutPt(t,t.Top)),t=this.UpdateEdgeIntoAEL(t);var r=t.PrevInAEL,h=t.NextInAEL;if(r!==null&&r.Curr.X===t.Bot.X&&r.Curr.Y===t.Bot.Y&&s!==null&&r.OutIdx>=0&&r.Curr.Y===r.Top.Y&&x.ClipperBase.SlopesEqual5(t.Curr,t.Top,r.Curr,r.Top)&&t.WindDelta!==0&&r.WindDelta!==0){var a=this.AddOutPt(ePrev2,t.Bot);this.AddJoin(s,a,t.Top)}else if(h!==null&&h.Curr.X===t.Bot.X&&h.Curr.Y===t.Bot.Y&&s!==null&&h.OutIdx>=0&&h.Curr.Y===h.Top.Y&&x.ClipperBase.SlopesEqual5(t.Curr,t.Top,h.Curr,h.Top)&&t.WindDelta!==0&&h.WindDelta!==0){var a=this.AddOutPt(h,t.Bot);this.AddJoin(s,a,t.Top)}}t=t.NextInAEL}},x.Clipper.prototype.DoMaxima=function(e){var t=this.GetMaximaPairEx(e);if(t===null){e.OutIdx>=0&&this.AddOutPt(e,e.Top),this.DeleteFromAEL(e);return}for(var i=e.NextInAEL;i!==null&&i!==t;)this.IntersectEdges(e,i,e.Top),this.SwapPositionsInAEL(e,i),i=e.NextInAEL;e.OutIdx===-1&&t.OutIdx===-1?(this.DeleteFromAEL(e),this.DeleteFromAEL(t)):e.OutIdx>=0&&t.OutIdx>=0?(e.OutIdx>=0&&this.AddLocalMaxPoly(e,t,e.Top),this.DeleteFromAEL(e),this.DeleteFromAEL(t)):x.use_lines&&e.WindDelta===0?(e.OutIdx>=0&&(this.AddOutPt(e,e.Top),e.OutIdx=x.ClipperBase.Unassigned),this.DeleteFromAEL(e),t.OutIdx>=0&&(this.AddOutPt(t,e.Top),t.OutIdx=x.ClipperBase.Unassigned),this.DeleteFromAEL(t)):x.Error("DoMaxima error")},x.Clipper.ReversePaths=function(e){for(var t=0,i=e.length;t<i;t++)e[t].reverse()},x.Clipper.Orientation=function(e){return x.Clipper.Area(e)>=0},x.Clipper.prototype.PointCount=function(e){if(e===null)return 0;var t=0,i=e;do t++,i=i.Next;while(i!==e);return t},x.Clipper.prototype.BuildResult=function(e){x.Clear(e);for(var t=0,i=this.m_PolyOuts.length;t<i;t++){var n=this.m_PolyOuts[t];if(n.Pts!==null){var r=n.Pts.Prev,o=this.PointCount(r);if(!(o<2)){for(var s=new Array(o),a=0;a<o;a++)s[a]=r.Pt,r=r.Prev;e.push(s)}}}},x.Clipper.prototype.BuildResult2=function(e){e.Clear();for(var t=0,i=this.m_PolyOuts.length;t<i;t++){var n=this.m_PolyOuts[t],r=this.PointCount(n.Pts);if(!(n.IsOpen&&r<2||!n.IsOpen&&r<3)){this.FixHoleLinkage(n);var o=new x.PolyNode;e.m_AllPolys.push(o),n.PolyNode=o,o.m_polygon.length=r;for(var s=n.Pts.Prev,a=0;a<r;a++)o.m_polygon[a]=s.Pt,s=s.Prev}}for(var t=0,i=this.m_PolyOuts.length;t<i;t++){var n=this.m_PolyOuts[t];n.PolyNode!==null&&(n.IsOpen?(n.PolyNode.IsOpen=!0,e.AddChild(n.PolyNode)):n.FirstLeft!==null&&n.FirstLeft.PolyNode!==null?n.FirstLeft.PolyNode.AddChild(n.PolyNode):e.AddChild(n.PolyNode))}},x.Clipper.prototype.FixupOutPolyline=function(e){for(var t=e.Pts,i=t.Prev;t!==i;)if(t=t.Next,x.FPoint.op_Equality(t.Pt,t.Prev.Pt)){t===i&&(i=t.Prev);var n=t.Prev;n.Next=t.Next,t.Next.Prev=n,t=n}t===t.Prev&&(e.Pts=null)},x.Clipper.prototype.FixupOutPolygon=function(e){var t=null;e.BottomPt=null;for(var i=e.Pts,n=this.PreserveCollinear||this.StrictlySimple;;){if(i.Prev===i||i.Prev===i.Next){e.Pts=null;return}if(x.FPoint.op_Equality(i.Pt,i.Next.Pt)||x.FPoint.op_Equality(i.Pt,i.Prev.Pt)||x.ClipperBase.SlopesEqual4(i.Prev.Pt,i.Pt,i.Next.Pt)&&(!n||!this.Pt2IsBetweenPt1AndPt3(i.Prev.Pt,i.Pt,i.Next.Pt)))t=null,i.Prev.Next=i.Next,i.Next.Prev=i.Prev,i=i.Prev;else{if(i===t)break;t===null&&(t=i),i=i.Next}}e.Pts=i},x.Clipper.prototype.DupOutPt=function(e,t){var i=new x.OutPt;return i.Pt.X=e.Pt.X,i.Pt.Y=e.Pt.Y,x.use_xyz&&(i.Pt.Z=e.Pt.Z),i.Idx=e.Idx,t?(i.Next=e.Next,i.Prev=e,e.Next.Prev=i,e.Next=i):(i.Prev=e.Prev,i.Next=e,e.Prev.Next=i,e.Prev=i),i},x.Clipper.prototype.GetOverlap=function(e,t,i,n,r){return e<t?i<n?(r.Left=Math.max(e,i),r.Right=Math.min(t,n)):(r.Left=Math.max(e,n),r.Right=Math.min(t,i)):i<n?(r.Left=Math.max(t,i),r.Right=Math.min(e,n)):(r.Left=Math.max(t,n),r.Right=Math.min(e,i)),r.Left<r.Right},x.Clipper.prototype.JoinHorz=function(e,t,i,n,r,o){var s=e.Pt.X>t.Pt.X?x.Direction.dRightToLeft:x.Direction.dLeftToRight,a=i.Pt.X>n.Pt.X?x.Direction.dRightToLeft:x.Direction.dLeftToRight;if(s===a)return!1;if(s===x.Direction.dLeftToRight){for(;e.Next.Pt.X<=r.X&&e.Next.Pt.X>=e.Pt.X&&e.Next.Pt.Y===r.Y;)e=e.Next;o&&e.Pt.X!==r.X&&(e=e.Next),t=this.DupOutPt(e,!o),x.FPoint.op_Inequality(t.Pt,r)&&(e=t,e.Pt.X=r.X,e.Pt.Y=r.Y,x.use_xyz&&(e.Pt.Z=r.Z),t=this.DupOutPt(e,!o))}else{for(;e.Next.Pt.X>=r.X&&e.Next.Pt.X<=e.Pt.X&&e.Next.Pt.Y===r.Y;)e=e.Next;!o&&e.Pt.X!==r.X&&(e=e.Next),t=this.DupOutPt(e,o),x.FPoint.op_Inequality(t.Pt,r)&&(e=t,e.Pt.X=r.X,e.Pt.Y=r.Y,x.use_xyz&&(e.Pt.Z=r.Z),t=this.DupOutPt(e,o))}if(a===x.Direction.dLeftToRight){for(;i.Next.Pt.X<=r.X&&i.Next.Pt.X>=i.Pt.X&&i.Next.Pt.Y===r.Y;)i=i.Next;o&&i.Pt.X!==r.X&&(i=i.Next),n=this.DupOutPt(i,!o),x.FPoint.op_Inequality(n.Pt,r)&&(i=n,i.Pt.X=r.X,i.Pt.Y=r.Y,x.use_xyz&&(i.Pt.Z=r.Z),n=this.DupOutPt(i,!o))}else{for(;i.Next.Pt.X>=r.X&&i.Next.Pt.X<=i.Pt.X&&i.Next.Pt.Y===r.Y;)i=i.Next;!o&&i.Pt.X!==r.X&&(i=i.Next),n=this.DupOutPt(i,o),x.FPoint.op_Inequality(n.Pt,r)&&(i=n,i.Pt.X=r.X,i.Pt.Y=r.Y,x.use_xyz&&(i.Pt.Z=r.Z),n=this.DupOutPt(i,o))}return s===x.Direction.dLeftToRight===o?(e.Prev=i,i.Next=e,t.Next=n,n.Prev=t):(e.Next=i,i.Prev=e,t.Prev=n,n.Next=t),!0},x.Clipper.prototype.JoinPoints=function(e,t,i){var n=e.OutPt1,r=new x.OutPt,o=e.OutPt2,s=new x.OutPt,a=e.OutPt1.Pt.Y===e.OffPt.Y;if(a&&x.FPoint.op_Equality(e.OffPt,e.OutPt1.Pt)&&x.FPoint.op_Equality(e.OffPt,e.OutPt2.Pt)){if(t!==i)return!1;for(r=e.OutPt1.Next;r!==n&&x.FPoint.op_Equality(r.Pt,e.OffPt);)r=r.Next;var h=r.Pt.Y>e.OffPt.Y;for(s=e.OutPt2.Next;s!==o&&x.FPoint.op_Equality(s.Pt,e.OffPt);)s=s.Next;var c=s.Pt.Y>e.OffPt.Y;return h===c?!1:h?(r=this.DupOutPt(n,!1),s=this.DupOutPt(o,!0),n.Prev=o,o.Next=n,r.Next=s,s.Prev=r,e.OutPt1=n,e.OutPt2=r,!0):(r=this.DupOutPt(n,!0),s=this.DupOutPt(o,!1),n.Next=o,o.Prev=n,r.Prev=s,s.Next=r,e.OutPt1=n,e.OutPt2=r,!0)}else if(a){for(r=n;n.Prev.Pt.Y===n.Pt.Y&&n.Prev!==r&&n.Prev!==o;)n=n.Prev;for(;r.Next.Pt.Y===r.Pt.Y&&r.Next!==n&&r.Next!==o;)r=r.Next;if(r.Next===n||r.Next===o)return!1;for(s=o;o.Prev.Pt.Y===o.Pt.Y&&o.Prev!==s&&o.Prev!==r;)o=o.Prev;for(;s.Next.Pt.Y===s.Pt.Y&&s.Next!==o&&s.Next!==n;)s=s.Next;if(s.Next===o||s.Next===n)return!1;var d={Left:null,Right:null};if(!this.GetOverlap(n.Pt.X,r.Pt.X,o.Pt.X,s.Pt.X,d))return!1;var f=d.Left,m=d.Right,v=new x.FPoint0,S;return n.Pt.X>=f&&n.Pt.X<=m?(v.X=n.Pt.X,v.Y=n.Pt.Y,x.use_xyz&&(v.Z=n.Pt.Z),S=n.Pt.X>r.Pt.X):o.Pt.X>=f&&o.Pt.X<=m?(v.X=o.Pt.X,v.Y=o.Pt.Y,x.use_xyz&&(v.Z=o.Pt.Z),S=o.Pt.X>s.Pt.X):r.Pt.X>=f&&r.Pt.X<=m?(v.X=r.Pt.X,v.Y=r.Pt.Y,x.use_xyz&&(v.Z=r.Pt.Z),S=r.Pt.X>n.Pt.X):(v.X=s.Pt.X,v.Y=s.Pt.Y,x.use_xyz&&(v.Z=s.Pt.Z),S=s.Pt.X>o.Pt.X),e.OutPt1=n,e.OutPt2=o,this.JoinHorz(n,r,o,s,v,S)}else{for(r=n.Next;x.FPoint.op_Equality(r.Pt,n.Pt)&&r!==n;)r=r.Next;var g=r.Pt.Y>n.Pt.Y||!x.ClipperBase.SlopesEqual4(n.Pt,r.Pt,e.OffPt);if(g){for(r=n.Prev;x.FPoint.op_Equality(r.Pt,n.Pt)&&r!==n;)r=r.Prev;if(r.Pt.Y>n.Pt.Y||!x.ClipperBase.SlopesEqual4(n.Pt,r.Pt,e.OffPt))return!1}for(s=o.Next;x.FPoint.op_Equality(s.Pt,o.Pt)&&s!==o;)s=s.Next;var y=s.Pt.Y>o.Pt.Y||!x.ClipperBase.SlopesEqual4(o.Pt,s.Pt,e.OffPt);if(y){for(s=o.Prev;x.FPoint.op_Equality(s.Pt,o.Pt)&&s!==o;)s=s.Prev;if(s.Pt.Y>o.Pt.Y||!x.ClipperBase.SlopesEqual4(o.Pt,s.Pt,e.OffPt))return!1}return r===n||s===o||r===s||t===i&&g===y?!1:g?(r=this.DupOutPt(n,!1),s=this.DupOutPt(o,!0),n.Prev=o,o.Next=n,r.Next=s,s.Prev=r,e.OutPt1=n,e.OutPt2=r,!0):(r=this.DupOutPt(n,!0),s=this.DupOutPt(o,!1),n.Next=o,o.Prev=n,r.Prev=s,s.Next=r,e.OutPt1=n,e.OutPt2=r,!0)}},x.Clipper.GetBounds=function(e){for(var t=0,i=e.length;t<i&&e[t].length===0;)t++;if(t===i)return new x.FRect(0,0,0,0);var n=new x.FRect;for(n.left=e[t][0].X,n.right=n.left,n.top=e[t][0].Y,n.bottom=n.top;t<i;t++)for(var r=0,o=e[t].length;r<o;r++)e[t][r].X<n.left?n.left=e[t][r].X:e[t][r].X>n.right&&(n.right=e[t][r].X),e[t][r].Y<n.top?n.top=e[t][r].Y:e[t][r].Y>n.bottom&&(n.bottom=e[t][r].Y);return n},x.Clipper.prototype.GetBounds2=function(e){var t=e,i=new x.FRect;for(i.left=e.Pt.X,i.right=e.Pt.X,i.top=e.Pt.Y,i.bottom=e.Pt.Y,e=e.Next;e!==t;)e.Pt.X<i.left&&(i.left=e.Pt.X),e.Pt.X>i.right&&(i.right=e.Pt.X),e.Pt.Y<i.top&&(i.top=e.Pt.Y),e.Pt.Y>i.bottom&&(i.bottom=e.Pt.Y),e=e.Next;return i},x.Clipper.PointInPolygon=function(e,t){var i=0,n=t.length;if(n<3)return 0;for(var r=t[0],o=1;o<=n;++o){var s=o===n?t[0]:t[o];if(s.Y===e.Y&&(s.X===e.X||r.Y===e.Y&&s.X>e.X==r.X<e.X))return-1;if(r.Y<e.Y!=s.Y<e.Y){if(r.X>=e.X)if(s.X>e.X)i=1-i;else{var a=(r.X-e.X)*(s.Y-e.Y)-(s.X-e.X)*(r.Y-e.Y);if(a===0)return-1;a>0==s.Y>r.Y&&(i=1-i)}else if(s.X>e.X){var a=(r.X-e.X)*(s.Y-e.Y)-(s.X-e.X)*(r.Y-e.Y);if(a===0)return-1;a>0==s.Y>r.Y&&(i=1-i)}}r=s}return i},x.Clipper.prototype.PointInPolygon=function(e,t){var i=0,n=t,r=e.X,o=e.Y,s=t.Pt.X,a=t.Pt.Y;do{t=t.Next;var h=t.Pt.X,c=t.Pt.Y;if(c===o&&(h===r||a===o&&h>r==s<r))return-1;if(a<o!=c<o){if(s>=r)if(h>r)i=1-i;else{var d=(s-r)*(c-o)-(h-r)*(a-o);if(d===0)return-1;d>0==c>a&&(i=1-i)}else if(h>r){var d=(s-r)*(c-o)-(h-r)*(a-o);if(d===0)return-1;d>0==c>a&&(i=1-i)}}s=h,a=c}while(n!==t);return i},x.Clipper.prototype.Poly2ContainsPoly1=function(e,t){var i=e;do{var n=this.PointInPolygon(i.Pt,t);if(n>=0)return n>0;i=i.Next}while(i!==e);return!0},x.Clipper.prototype.FixupFirstLefts1=function(e,t){for(var i,n,r=0,o=this.m_PolyOuts.length;r<o;r++)i=this.m_PolyOuts[r],n=x.Clipper.ParseFirstLeft(i.FirstLeft),i.Pts!==null&&n===e&&this.Poly2ContainsPoly1(i.Pts,t.Pts)&&(i.FirstLeft=t)},x.Clipper.prototype.FixupFirstLefts2=function(e,t){for(var i=t.FirstLeft,n,r,o=0,s=this.m_PolyOuts.length;o<s;o++)n=this.m_PolyOuts[o],!(n.Pts===null||n===t||n===e)&&(r=x.Clipper.ParseFirstLeft(n.FirstLeft),!(r!==i&&r!==e&&r!==t)&&(this.Poly2ContainsPoly1(n.Pts,e.Pts)?n.FirstLeft=e:this.Poly2ContainsPoly1(n.Pts,t.Pts)?n.FirstLeft=t:(n.FirstLeft===e||n.FirstLeft===t)&&(n.FirstLeft=i)))},x.Clipper.prototype.FixupFirstLefts3=function(e,t){for(var i,n,r=0,o=this.m_PolyOuts.length;r<o;r++)i=this.m_PolyOuts[r],n=x.Clipper.ParseFirstLeft(i.FirstLeft),i.Pts!==null&&n===e&&(i.FirstLeft=t)},x.Clipper.ParseFirstLeft=function(e){for(;e!==null&&e.Pts===null;)e=e.FirstLeft;return e},x.Clipper.prototype.JoinCommonEdges=function(){for(var e=0,t=this.m_Joins.length;e<t;e++){var i=this.m_Joins[e],n=this.GetOutRec(i.OutPt1.Idx),r=this.GetOutRec(i.OutPt2.Idx);if(!(n.Pts===null||r.Pts===null)&&!(n.IsOpen||r.IsOpen)){var o;n===r?o=n:this.OutRec1RightOfOutRec2(n,r)?o=r:this.OutRec1RightOfOutRec2(r,n)?o=n:o=this.GetLowermostRec(n,r),this.JoinPoints(i,n,r)&&(n===r?(n.Pts=i.OutPt1,n.BottomPt=null,r=this.CreateOutRec(),r.Pts=i.OutPt2,this.UpdateOutPtIdxs(r),this.Poly2ContainsPoly1(r.Pts,n.Pts)?(r.IsHole=!n.IsHole,r.FirstLeft=n,this.m_UsingPolyTree&&this.FixupFirstLefts2(r,n),(r.IsHole^this.ReverseSolution)==this.Area$1(r)>0&&this.ReversePolyPtLinks(r.Pts)):this.Poly2ContainsPoly1(n.Pts,r.Pts)?(r.IsHole=n.IsHole,n.IsHole=!r.IsHole,r.FirstLeft=n.FirstLeft,n.FirstLeft=r,this.m_UsingPolyTree&&this.FixupFirstLefts2(n,r),(n.IsHole^this.ReverseSolution)==this.Area$1(n)>0&&this.ReversePolyPtLinks(n.Pts)):(r.IsHole=n.IsHole,r.FirstLeft=n.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(n,r))):(r.Pts=null,r.BottomPt=null,r.Idx=n.Idx,n.IsHole=o.IsHole,o===r&&(n.FirstLeft=r.FirstLeft),r.FirstLeft=n,this.m_UsingPolyTree&&this.FixupFirstLefts3(r,n)))}}},x.Clipper.prototype.UpdateOutPtIdxs=function(e){var t=e.Pts;do t.Idx=e.Idx,t=t.Prev;while(t!==e.Pts)},x.Clipper.prototype.DoSimplePolygons=function(){for(var e=0;e<this.m_PolyOuts.length;){var t=this.m_PolyOuts[e++],i=t.Pts;if(!(i===null||t.IsOpen))do{for(var n=i.Next;n!==t.Pts;){if(x.FPoint.op_Equality(i.Pt,n.Pt)&&n.Next!==i&&n.Prev!==i){var r=i.Prev,o=n.Prev;i.Prev=o,o.Next=i,n.Prev=r,r.Next=n,t.Pts=i;var s=this.CreateOutRec();s.Pts=n,this.UpdateOutPtIdxs(s),this.Poly2ContainsPoly1(s.Pts,t.Pts)?(s.IsHole=!t.IsHole,s.FirstLeft=t,this.m_UsingPolyTree&&this.FixupFirstLefts2(s,t)):this.Poly2ContainsPoly1(t.Pts,s.Pts)?(s.IsHole=t.IsHole,t.IsHole=!s.IsHole,s.FirstLeft=t.FirstLeft,t.FirstLeft=s,this.m_UsingPolyTree&&this.FixupFirstLefts2(t,s)):(s.IsHole=t.IsHole,s.FirstLeft=t.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(t,s)),n=i}n=n.Next}i=i.Next}while(i!==t.Pts)}},x.Clipper.Area=function(e){if(!Array.isArray(e))return 0;var t=e.length;if(t<3)return 0;for(var i=0,n=0,r=t-1;n<t;++n)i+=(e[r].X+e[n].X)*(e[r].Y-e[n].Y),r=n;return-i*.5},x.Clipper.prototype.Area=function(e){var t=e;if(e===null)return 0;var i=0;do i=i+(e.Prev.Pt.X+e.Pt.X)*(e.Prev.Pt.Y-e.Pt.Y),e=e.Next;while(e!==t);return i*.5},x.Clipper.prototype.Area$1=function(e){return this.Area(e.Pts)},x.Clipper.SimplifyPolygon=function(e,t){var i=new Array,n=new x.Clipper(0);return n.StrictlySimple=!0,n.AddPath(e,x.PolyType.ptSubject,!0),n.Execute(x.ClipType.ctUnion,i,t,t),i},x.Clipper.SimplifyPolygons=function(e,t){typeof t>"u"&&(t=x.PolyFillType.pftEvenOdd);var i=new Array,n=new x.Clipper(0);return n.StrictlySimple=!0,n.AddPaths(e,x.PolyType.ptSubject,!0),n.Execute(x.ClipType.ctUnion,i,t,t),i},x.Clipper.DistanceSqrd=function(e,t){var i=e.X-t.X,n=e.Y-t.Y;return i*i+n*n},x.Clipper.DistanceFromLineSqrd=function(e,t,i){var n=t.Y-i.Y,r=i.X-t.X,o=n*t.X+r*t.Y;return o=n*e.X+r*e.Y-o,o*o/(n*n+r*r)},x.Clipper.SlopesNearCollinear=function(e,t,i,n){return Math.abs(e.X-t.X)>Math.abs(e.Y-t.Y)?e.X>t.X==e.X<i.X?x.Clipper.DistanceFromLineSqrd(e,t,i)<n:t.X>e.X==t.X<i.X?x.Clipper.DistanceFromLineSqrd(t,e,i)<n:x.Clipper.DistanceFromLineSqrd(i,e,t)<n:e.Y>t.Y==e.Y<i.Y?x.Clipper.DistanceFromLineSqrd(e,t,i)<n:t.Y>e.Y==t.Y<i.Y?x.Clipper.DistanceFromLineSqrd(t,e,i)<n:x.Clipper.DistanceFromLineSqrd(i,e,t)<n},x.Clipper.PointsAreClose=function(e,t,i){var n=e.X-t.X,r=e.Y-t.Y;return n*n+r*r<=i},x.Clipper.ExcludeOp=function(e){var t=e.Prev;return t.Next=e.Next,e.Next.Prev=t,t.Idx=0,t},x.Clipper.CleanPolygon=function(e,t){typeof t>"u"&&(t=1.415);var i=e.length;if(i===0)return new Array;for(var n=new Array(i),r=0;r<i;++r)n[r]=new x.OutPt;for(var r=0;r<i;++r)n[r].Pt=e[r],n[r].Next=n[(r+1)%i],n[r].Next.Prev=n[r],n[r].Idx=0;for(var o=t*t,s=n[0];s.Idx===0&&s.Next!==s.Prev;)x.Clipper.PointsAreClose(s.Pt,s.Prev.Pt,o)?(s=x.Clipper.ExcludeOp(s),i--):x.Clipper.PointsAreClose(s.Prev.Pt,s.Next.Pt,o)?(x.Clipper.ExcludeOp(s.Next),s=x.Clipper.ExcludeOp(s),i-=2):x.Clipper.SlopesNearCollinear(s.Prev.Pt,s.Pt,s.Next.Pt,o)?(s=x.Clipper.ExcludeOp(s),i--):(s.Idx=1,s=s.Next);i<3&&(i=0);for(var a=new Array(i),r=0;r<i;++r)a[r]=new x.FPoint1(s.Pt),s=s.Next;return n=null,a},x.Clipper.CleanPolygons=function(e,t){for(var i=new Array(e.length),n=0,r=e.length;n<r;n++)i[n]=x.Clipper.CleanPolygon(e[n],t);return i},x.Clipper.Minkowski=function(e,t,i,n){var r=n?1:0,o=e.length,s=t.length,a=new Array;if(i)for(var h=0;h<s;h++){for(var c=new Array(o),d=0,f=e.length,m=e[d];d<f;d++,m=e[d])c[d]=new x.FPoint2(t[h].X+m.X,t[h].Y+m.Y);a.push(c)}else for(var h=0;h<s;h++){for(var c=new Array(o),d=0,f=e.length,m=e[d];d<f;d++,m=e[d])c[d]=new x.FPoint2(t[h].X-m.X,t[h].Y-m.Y);a.push(c)}for(var v=new Array,h=0;h<s-1+r;h++)for(var d=0;d<o;d++){var S=new Array;S.push(a[h%s][d%o]),S.push(a[(h+1)%s][d%o]),S.push(a[(h+1)%s][(d+1)%o]),S.push(a[h%s][(d+1)%o]),x.Clipper.Orientation(S)||S.reverse(),v.push(S)}return v},x.Clipper.MinkowskiSum=function(e,t,i){if(t[0]instanceof Array){for(var n=t,r=new x.Paths,o=new x.Clipper,s=0;s<n.length;++s){var a=x.Clipper.Minkowski(e,n[s],!0,i);if(o.AddPaths(a,x.PolyType.ptSubject,!0),i){var h=x.Clipper.TranslatePath(n[s],e[0]);o.AddPath(h,x.PolyType.ptClip,!0)}}return o.Execute(x.ClipType.ctUnion,r,x.PolyFillType.pftNonZero,x.PolyFillType.pftNonZero),r}else{var h=t,n=x.Clipper.Minkowski(e,h,!0,i),o=new x.Clipper;return o.AddPaths(n,x.PolyType.ptSubject,!0),o.Execute(x.ClipType.ctUnion,n,x.PolyFillType.pftNonZero,x.PolyFillType.pftNonZero),n}},x.Clipper.TranslatePath=function(e,t){for(var i=new x.Path,n=0;n<e.length;n++)i.push(new x.FPoint2(e[n].X+t.X,e[n].Y+t.Y));return i},x.Clipper.MinkowskiDiff=function(e,t){var i=x.Clipper.Minkowski(e,t,!1,!0),n=new x.Clipper;return n.AddPaths(i,x.PolyType.ptSubject,!0),n.Execute(x.ClipType.ctUnion,i,x.PolyFillType.pftNonZero,x.PolyFillType.pftNonZero),i},x.Clipper.PolyTreeToPaths=function(e){var t=new Array;return x.Clipper.AddPolyNodeToPaths(e,x.Clipper.NodeType.ntAny,t),t},x.Clipper.AddPolyNodeToPaths=function(e,t,i){var n=!0;switch(t){case x.Clipper.NodeType.ntOpen:return;case x.Clipper.NodeType.ntClosed:n=!e.IsOpen;break}e.m_polygon.length>0&&n&&i.push(e.m_polygon);for(var r=0,o=e.Childs(),s=o.length,a=o[r];r<s;r++,a=o[r])x.Clipper.AddPolyNodeToPaths(a,t,i)},x.Clipper.OpenPathsFromPolyTree=function(e){for(var t=new x.Paths,i=0,n=e.ChildCount();i<n;i++)e.Childs()[i].IsOpen&&t.push(e.Childs()[i].m_polygon);return t},x.Clipper.ClosedPathsFromPolyTree=function(e){var t=new x.Paths;return x.Clipper.AddPolyNodeToPaths(e,x.Clipper.NodeType.ntClosed,t),t},Dd(x.Clipper,x.ClipperBase),x.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},x.ClipperOffset=function(e,t){typeof e>"u"&&(e=2),typeof t>"u"&&(t=x.ClipperOffset.def_arc_tolerance),this.m_destPolys=new x.Paths,this.m_srcPoly=new x.Path,this.m_destPoly=new x.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new x.FPoint0,this.m_polyNodes=new x.PolyNode,this.MiterLimit=e,this.ArcTolerance=t,this.m_lowest.X=-1},x.ClipperOffset.two_pi=6.28318530717959,x.ClipperOffset.def_arc_tolerance=.25,x.ClipperOffset.prototype.Clear=function(){x.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},x.ClipperOffset.prototype.AddPath=function(e,t,i){var n=e.length-1;if(!(n<0)){var r=new x.PolyNode;if(r.m_jointype=t,r.m_endtype=i,i===x.EndType.etClosedLine||i===x.EndType.etClosedPolygon)for(;n>0&&x.FPoint.op_Equality(e[0],e[n]);)n--;r.m_polygon.push(e[0]);for(var o=0,s=0,a=1;a<=n;a++)x.FPoint.op_Inequality(r.m_polygon[o],e[a])&&(o++,r.m_polygon.push(e[a]),(e[a].Y>r.m_polygon[s].Y||e[a].Y===r.m_polygon[s].Y&&e[a].X<r.m_polygon[s].X)&&(s=o));if(!(i===x.EndType.etClosedPolygon&&o<2)&&(this.m_polyNodes.AddChild(r),i===x.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new x.FPoint2(this.m_polyNodes.ChildCount()-1,s);else{var h=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(r.m_polygon[s].Y>h.Y||r.m_polygon[s].Y===h.Y&&r.m_polygon[s].X<h.X)&&(this.m_lowest=new x.FPoint2(this.m_polyNodes.ChildCount()-1,s))}}},x.ClipperOffset.prototype.AddPaths=function(e,t,i){for(var n=0,r=e.length;n<r;n++)this.AddPath(e[n],t,i)},x.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!x.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var e=0;e<this.m_polyNodes.ChildCount();e++){var t=this.m_polyNodes.Childs()[e];(t.m_endtype===x.EndType.etClosedPolygon||t.m_endtype===x.EndType.etClosedLine&&x.Clipper.Orientation(t.m_polygon))&&t.m_polygon.reverse()}else for(var e=0;e<this.m_polyNodes.ChildCount();e++){var t=this.m_polyNodes.Childs()[e];t.m_endtype===x.EndType.etClosedLine&&!x.Clipper.Orientation(t.m_polygon)&&t.m_polygon.reverse()}},x.ClipperOffset.GetUnitNormal=function(e,t){var i=t.X-e.X,n=t.Y-e.Y;if(i===0&&n===0)return new x.FPoint2(0,0);var r=1/Math.sqrt(i*i+n*n);return i*=r,n*=r,new x.FPoint2(n,-i)},x.ClipperOffset.prototype.DoOffset=function(e){if(this.m_destPolys=new Array,this.m_delta=e,x.ClipperBase.near_zero(e)){for(var t=0;t<this.m_polyNodes.ChildCount();t++){var i=this.m_polyNodes.Childs()[t];i.m_endtype===x.EndType.etClosedPolygon&&this.m_destPolys.push(i.m_polygon)}return}this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5;var n;this.ArcTolerance<=0?n=x.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(e)*x.ClipperOffset.def_arc_tolerance?n=Math.abs(e)*x.ClipperOffset.def_arc_tolerance:n=this.ArcTolerance;var r=3.14159265358979/Math.acos(1-n/Math.abs(e));this.m_sin=Math.sin(x.ClipperOffset.two_pi/r),this.m_cos=Math.cos(x.ClipperOffset.two_pi/r),this.m_StepsPerRad=r/x.ClipperOffset.two_pi,e<0&&(this.m_sin=-this.m_sin);for(var t=0;t<this.m_polyNodes.ChildCount();t++){var i=this.m_polyNodes.Childs()[t];this.m_srcPoly=i.m_polygon;var o=this.m_srcPoly.length;if(!(o===0||e<=0&&(o<3||i.m_endtype!==x.EndType.etClosedPolygon))){if(this.m_destPoly=new Array,o===1){if(i.m_jointype===x.JoinType.jtRound)for(var s=1,a=0,h=1;h<=r;h++){this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[0].X+s*e,this.m_srcPoly[0].Y+a*e));var c=s;s=s*this.m_cos-this.m_sin*a,a=c*this.m_sin+a*this.m_cos}else for(var s=-1,a=-1,h=0;h<4;++h)this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[0].X+s*e,this.m_srcPoly[0].Y+a*e)),s<0?s=1:a<0?a=1:s=-1;this.m_destPolys.push(this.m_destPoly);continue}this.m_normals.length=0;for(var h=0;h<o-1;h++)this.m_normals.push(x.ClipperOffset.GetUnitNormal(this.m_srcPoly[h],this.m_srcPoly[h+1]));if(i.m_endtype===x.EndType.etClosedLine||i.m_endtype===x.EndType.etClosedPolygon?this.m_normals.push(x.ClipperOffset.GetUnitNormal(this.m_srcPoly[o-1],this.m_srcPoly[0])):this.m_normals.push(new x.FPoint1(this.m_normals[o-2])),i.m_endtype===x.EndType.etClosedPolygon){for(var d=o-1,h=0;h<o;h++)d=this.OffsetPoint(h,d,i.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(i.m_endtype===x.EndType.etClosedLine){for(var d=o-1,h=0;h<o;h++)d=this.OffsetPoint(h,d,i.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;for(var f=this.m_normals[o-1],h=o-1;h>0;h--)this.m_normals[h]=new x.FPoint2(-this.m_normals[h-1].X,-this.m_normals[h-1].Y);this.m_normals[0]=new x.FPoint2(-f.X,-f.Y),d=0;for(var h=o-1;h>=0;h--)d=this.OffsetPoint(h,d,i.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{for(var d=0,h=1;h<o-1;++h)d=this.OffsetPoint(h,d,i.m_jointype);var m;if(i.m_endtype===x.EndType.etOpenButt){var h=o-1;m=new x.FPoint2(this.m_srcPoly[h].X+this.m_normals[h].X*e,this.m_srcPoly[h].Y+this.m_normals[h].Y*e),this.m_destPoly.push(m),m=new x.FPoint2(this.m_srcPoly[h].X-this.m_normals[h].X*e,this.m_srcPoly[h].Y-this.m_normals[h].Y*e),this.m_destPoly.push(m)}else{var h=o-1;d=o-2,this.m_sinA=0,this.m_normals[h]=new x.FPoint2(-this.m_normals[h].X,-this.m_normals[h].Y),i.m_endtype===x.EndType.etOpenSquare?this.DoSquare(h,d):this.DoRound(h,d)}for(var h=o-1;h>0;h--)this.m_normals[h]=new x.FPoint2(-this.m_normals[h-1].X,-this.m_normals[h-1].Y);this.m_normals[0]=new x.FPoint2(-this.m_normals[1].X,-this.m_normals[1].Y),d=o-1;for(var h=d-1;h>0;--h)d=this.OffsetPoint(h,d,i.m_jointype);i.m_endtype===x.EndType.etOpenButt?(m=new x.FPoint2(this.m_srcPoly[0].X-this.m_normals[0].X*e,this.m_srcPoly[0].Y-this.m_normals[0].Y*e),this.m_destPoly.push(m),m=new x.FPoint2(this.m_srcPoly[0].X+this.m_normals[0].X*e,this.m_srcPoly[0].Y+this.m_normals[0].Y*e),this.m_destPoly.push(m)):(d=1,this.m_sinA=0,i.m_endtype===x.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}}},x.ClipperOffset.prototype.Execute=function(){var e=arguments,t=e[0]instanceof x.PolyTree;if(t){var i=e[0],n=e[1];i.Clear(),this.FixOrientations(),this.DoOffset(n);var r=new x.Clipper(0);if(r.AddPaths(this.m_destPolys,x.PolyType.ptSubject,!0),n>0)r.Execute(x.ClipType.ctUnion,i,x.PolyFillType.pftPositive,x.PolyFillType.pftPositive);else{var o=x.Clipper.GetBounds(this.m_destPolys),s=new x.Path;if(s.push(new x.FPoint2(o.left-10,o.bottom+10)),s.push(new x.FPoint2(o.right+10,o.bottom+10)),s.push(new x.FPoint2(o.right+10,o.top-10)),s.push(new x.FPoint2(o.left-10,o.top-10)),r.AddPath(s,x.PolyType.ptSubject,!0),r.ReverseSolution=!0,r.Execute(x.ClipType.ctUnion,i,x.PolyFillType.pftNegative,x.PolyFillType.pftNegative),i.ChildCount()===1&&i.Childs()[0].ChildCount()>0){var a=i.Childs()[0];i.Childs()[0]=a.Childs()[0],i.Childs()[0].m_Parent=i;for(var h=1;h<a.ChildCount();h++)i.AddChild(a.Childs()[h])}else i.Clear()}}else{var i=e[0],n=e[1];x.Clear(i),this.FixOrientations(),this.DoOffset(n);var r=new x.Clipper(0);if(r.AddPaths(this.m_destPolys,x.PolyType.ptSubject,!0),n>0)r.Execute(x.ClipType.ctUnion,i,x.PolyFillType.pftPositive,x.PolyFillType.pftPositive);else{var o=x.Clipper.GetBounds(this.m_destPolys),s=new x.Path;s.push(new x.FPoint2(o.left-10,o.bottom+10)),s.push(new x.FPoint2(o.right+10,o.bottom+10)),s.push(new x.FPoint2(o.right+10,o.top-10)),s.push(new x.FPoint2(o.left-10,o.top-10)),r.AddPath(s,x.PolyType.ptSubject,!0),r.ReverseSolution=!0,r.Execute(x.ClipType.ctUnion,i,x.PolyFillType.pftNegative,x.PolyFillType.pftNegative),i.length>0&&i.splice(0,1)}}},x.ClipperOffset.prototype.OffsetPoint=function(e,t,i){if(this.m_sinA=this.m_normals[t].X*this.m_normals[e].Y-this.m_normals[e].X*this.m_normals[t].Y,this.m_sinA===0)return t;if(this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1),this.m_sinA*this.m_delta<0)this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[e].X+this.m_normals[t].X*this.m_delta,this.m_srcPoly[e].Y+this.m_normals[t].Y*this.m_delta)),this.m_destPoly.push(new x.FPoint1(this.m_srcPoly[e])),this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[e].X+this.m_normals[e].X*this.m_delta,this.m_srcPoly[e].Y+this.m_normals[e].Y*this.m_delta));else switch(i){case x.JoinType.jtMiter:{var n=1+(this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y);n>=this.m_miterLim?this.DoMiter(e,t,n):this.DoSquare(e,t);break}case x.JoinType.jtSquare:this.DoSquare(e,t);break;case x.JoinType.jtRound:this.DoRound(e,t);break}return t=e,t},x.ClipperOffset.prototype.DoSquare=function(e,t){var i=Math.tan(Math.atan2(this.m_sinA,this.m_normals[t].X*this.m_normals[e].X+this.m_normals[t].Y*this.m_normals[e].Y)/4);this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[e].X+this.m_delta*(this.m_normals[t].X-this.m_normals[t].Y*i),this.m_srcPoly[e].Y+this.m_delta*(this.m_normals[t].Y+this.m_normals[t].X*i))),this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[e].X+this.m_delta*(this.m_normals[e].X+this.m_normals[e].Y*i),this.m_srcPoly[e].Y+this.m_delta*(this.m_normals[e].Y-this.m_normals[e].X*i)))},x.ClipperOffset.prototype.DoMiter=function(e,t,i){var n=this.m_delta/i;this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[e].X+(this.m_normals[t].X+this.m_normals[e].X)*n,this.m_srcPoly[e].Y+(this.m_normals[t].Y+this.m_normals[e].Y)*n))},x.ClipperOffset.prototype.DoRound=function(e,t){for(var i=Math.atan2(this.m_sinA,this.m_normals[t].X*this.m_normals[e].X+this.m_normals[t].Y*this.m_normals[e].Y),n=Math.max(Math.round(this.m_StepsPerRad*Math.abs(i)),1),r=this.m_normals[t].X,o=this.m_normals[t].Y,s,a=0;a<n;++a)this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[e].X+r*this.m_delta,this.m_srcPoly[e].Y+o*this.m_delta)),s=r,r=r*this.m_cos-this.m_sin*o,o=s*this.m_sin+o*this.m_cos;this.m_destPoly.push(new x.FPoint2(this.m_srcPoly[e].X+this.m_normals[e].X*this.m_delta,this.m_srcPoly[e].Y+this.m_normals[e].Y*this.m_delta))},x.Error=function(e){try{throw new Error(e)}catch(t){alert(t.message)}},x.JS={},x.JS.AreaOfPolygon=function(e){return x.Clipper.Area(e)},x.JS.AreaOfPolygons=function(e){for(var t=0,i=0;i<e.length;i++)t+=x.Clipper.Area(e[i]);return t},x.JS.BoundsOfPath=function(e){return x.JS.BoundsOfPaths([e])},x.JS.BoundsOfPaths=function(e){var t=x.Clipper.GetBounds(e);return t},x.JS.Clean=function(n,t){if(!(n instanceof Array))return[];var i=n[0]instanceof Array,n=x.JS.Clone(n);if(typeof t!="number"||t===null)return x.Error("Delta is not a number in Clean()."),n;if(n.length===0||n.length===1&&n[0].length===0||t<0)return n;i||(n=[n]);for(var r=n.length,o,s,a,h,c,d,f,m=[],v=0;v<r;v++)if(s=n[v],o=s.length,o!==0){if(o<3){a=s,m.push(a);continue}for(a=s,h=t*t,c=s[0],d=1,f=1;f<o;f++)(s[f].X-c.X)*(s[f].X-c.X)+(s[f].Y-c.Y)*(s[f].Y-c.Y)<=h||(a[d]=s[f],c=s[f],d++);c=s[d-1],(s[0].X-c.X)*(s[0].X-c.X)+(s[0].Y-c.Y)*(s[0].Y-c.Y)<=h&&d--,d<o&&a.splice(d,o-d),a.length&&m.push(a)}return!i&&m.length?m=m[0]:!i&&m.length===0?m=[]:i&&m.length===0&&(m=[[]]),m},x.JS.Clone=function(e){if(!(e instanceof Array))return[];if(e.length===0)return[];if(e.length===1&&e[0].length===0)return[[]];var t=e[0]instanceof Array;t||(e=[e]);var i=e.length,n,r,o,s,a=new Array(i);for(r=0;r<i;r++){for(n=e[r].length,s=new Array(n),o=0;o<n;o++)s[o]={X:e[r][o].X,Y:e[r][o].Y};a[r]=s}return t||(a=a[0]),a},x.JS.Lighten=function(e,t){if(!(e instanceof Array))return[];if(typeof t!="number"||t===null)return x.Error("Tolerance is not a number in Lighten()."),x.JS.Clone(e);if(e.length===0||e.length===1&&e[0].length===0||t<0)return x.JS.Clone(e);var i=e[0]instanceof Array;i||(e=[e]);var n,r,o,s,a,h,c,d,f,m,v,S,g,y,P,w,D,T=e.length,_=t*t,I=[];for(n=0;n<T;n++)if(o=e[n],h=o.length,h!==0){for(s=0;s<1e6;s++){for(a=[],h=o.length,o[h-1].X!==o[0].X||o[h-1].Y!==o[0].Y?(S=1,o.push({X:o[0].X,Y:o[0].Y}),h=o.length):S=0,v=[],r=0;r<h-2;r++)c=o[r],f=o[r+1],d=o[r+2],w=c.X,D=c.Y,g=d.X-w,y=d.Y-D,(g!==0||y!==0)&&(P=((f.X-w)*g+(f.Y-D)*y)/(g*g+y*y),P>1?(w=d.X,D=d.Y):P>0&&(w+=g*P,D+=y*P)),g=f.X-w,y=f.Y-D,m=g*g+y*y,m<=_&&(v[r+1]=1,r++);for(a.push({X:o[0].X,Y:o[0].Y}),r=1;r<h-1;r++)v[r]||a.push({X:o[r].X,Y:o[r].Y});if(a.push({X:o[h-1].X,Y:o[h-1].Y}),S&&o.pop(),v.length)o=a;else break}h=a.length,a[h-1].X===a[0].X&&a[h-1].Y===a[0].Y&&a.pop(),a.length>2&&I.push(a)}return i||(I=I[0]),typeof I>"u"&&(I=[]),I},x.JS.PerimeterOfPath=function(e,t){if(typeof e>"u")return 0;var i=Math.sqrt,n=0,r,o,s=0,a=0,h=0,c=0,d=e.length;if(d<2)return 0;for(t&&(e[d]=e[0],d++);--d;)r=e[d],s=r.X,a=r.Y,o=e[d-1],h=o.X,c=o.Y,n+=i((s-h)*(s-h)+(a-c)*(a-c));return t&&e.pop(),n},x.JS.PerimeterOfPaths=function(e,t){for(var i=0,n=0;n<e.length;n++)i+=x.JS.PerimeterOfPath(e[n],t);return i},x.ExPolygons=function(){return[]},x.ExPolygon=function(){this.outer=null,this.holes=null},x.JS.AddOuterPolyNodeToExPolygons=function(e,t){var i=new x.ExPolygon;i.outer=e.Contour();var n=e.Childs(),r=n.length;i.holes=new Array(r);var o,s,a,h,c,d;for(a=0;a<r;a++)for(o=n[a],i.holes[a]=o.Contour(),h=0,c=o.Childs(),d=c.length;h<d;h++)s=c[h],x.JS.AddOuterPolyNodeToExPolygons(s,t);t.push(i)},x.JS.ExPolygonsToPaths=function(e){var t,i,n,r,o=new x.Paths;for(t=0,n=e.length;t<n;t++)for(o.push(e[t].outer),i=0,r=e[t].holes.length;i<r;i++)o.push(e[t].holes[i]);return o},x.JS.PolyTreeToExPolygons=function(e){var t=new x.ExPolygons,i,n,r,o;for(n=0,r=e.Childs(),o=r.length;n<o;n++)i=r[n],x.JS.AddOuterPolyNodeToExPolygons(i,t);return t};const sv=(e,t)=>1e-8>Math.abs(e.x-t.x)+Math.abs(e.y-t.y),ov=e=>{if(e.length===0)return!0;const t=e[0][0],i=e.at(-1).at(-1);return sv(t,i)};function Ys(e,t,i={}){const n={openSquare:0,openRound:1,openButt:2,closedLine:3,closedPolygon:4},r={square:0,round:1,miter:2};let o=i.endType;o in n||(o="closedPolygon");let s=i.joinType;s in r||(s="round");const a=i.miterLimit||2,h=i.arcTolerance||.1,c=n[o],d=r[s],f=P=>P.map(({x:w,y:D})=>({X:w,Y:D})),m=P=>P.map(({X:w,Y:D})=>({x:w,y:D}));ov(e);const v=e.map(f),S=new x.ClipperOffset(a,h);S.AddPaths(v,d,c);const g=new x.Paths;S.Execute(g,t);const y=g.map(m);for(;e.length>y.length;)e.pop();return y.forEach((P,w)=>{e[w]=P,e[w].push({x:P[0].x,y:P[0].y})}),e}const lv="modulepreload",av=function(e){return"/"+e},Td={},hv=function(e,t,i){return!t||t.length===0?e():Promise.all(t.map(n=>{if(n=av(n),n in Td)return;Td[n]=!0;const r=n.endsWith(".css"),o=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${o}`))return;const s=document.createElement("link");if(s.rel=r?"stylesheet":lv,r||(s.as="script",s.crossOrigin=""),s.href=n,document.head.appendChild(s),r)return new Promise((a,h)=>{s.addEventListener("load",a),s.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>e())};let dr,Zl;(()=>{const e=new Map;dr={register(a,h,c){e.set(a,{d:h,f:c,exp:{}})}};async function t(a,h){let c=a.replace(/\.\w+$/i,"");if(c.includes("./")){const[d,...f]=c.split("/").reverse(),[,...m]=h.split("/").reverse(),v=[d];let S=0,g;for(;g=f.shift();)if(g==="..")S++;else{if(g===".")break;v.push(g)}S<m.length&&v.push(...m.slice(S)),c=v.reverse().join("/")}return e.has(c)?o(c):hv(()=>AS(()=>ES(()=>SS(()=>vS(()=>OS(()=>fS(()=>import(a),[]),[]),[]),[]),[]),[]),[])}function i(a,h){return{id:a,import:c=>t(c,a),meta:{url:a,main:h}}}function n(a){return(h,c)=>{c=typeof h=="string"?{[h]:c}:h;for(const[d,f]of Object.entries(c))Object.defineProperty(a,d,{value:f,writable:!0,enumerable:!0})}}function r(a){for(const[h,c]of e.entries()){const{f:d,exp:f}=c,{execute:m,setters:v}=d(n(f),i(h,h===a));delete c.f,c.e=m,c.s=v}}async function o(a){if(!e.has(a))return;const h=e.get(a);if(h.s){const{d:c,e:d,s:f}=h;delete h.s,delete h.e;for(let v=0;v<f.length;v++)f[v](await o(c[v]));const m=d();m&&await m}return h.exp}function s(a){if(!e.has(a))return;const h=e.get(a);if(h.s){const{d:c,e:d,s:f}=h;delete h.s,delete h.e;for(let m=0;m<f.length;m++)f[m](s(c[m]));d()}return h.exp}Zl=a=>(dr=Zl=void 0,r(a),s(a))})(),dr.register("-/clipper-lib@v6.4.2-JisZmmhC7gDAFmHQLYDu/dist=es2020/clipper-lib",[],function(e,t){var i;t&&t.id;function n(o,s,a){return a={path:s,exports:{},require:function(h,c){return r(h,c==null?a.path:c)}},o(a,a.exports),a.exports}function r(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}return{setters:[],execute:function(){i=n(function(o){(function(){var s={};s.version="6.4.2.2",s.use_lines=!0,s.use_xyz=!1;var a=!1;o.exports?(o.exports=s,a=!0):typeof document<"u"?window.ClipperLib=s:self.ClipperLib=s;var h;if(a){var c="chrome";h="Netscape"}else{var c=navigator.userAgent.toString().toLowerCase();h=navigator.appName}var d={};c.indexOf("chrome")!=-1&&c.indexOf("chromium")==-1?d.chrome=1:d.chrome=0,c.indexOf("chromium")!=-1?d.chromium=1:d.chromium=0,c.indexOf("safari")!=-1&&c.indexOf("chrome")==-1&&c.indexOf("chromium")==-1?d.safari=1:d.safari=0,c.indexOf("firefox")!=-1?d.firefox=1:d.firefox=0,c.indexOf("firefox/17")!=-1?d.firefox17=1:d.firefox17=0,c.indexOf("firefox/15")!=-1?d.firefox15=1:d.firefox15=0,c.indexOf("firefox/3")!=-1?d.firefox3=1:d.firefox3=0,c.indexOf("opera")!=-1?d.opera=1:d.opera=0,c.indexOf("msie 10")!=-1?d.msie10=1:d.msie10=0,c.indexOf("msie 9")!=-1?d.msie9=1:d.msie9=0,c.indexOf("msie 8")!=-1?d.msie8=1:d.msie8=0,c.indexOf("msie 7")!=-1?d.msie7=1:d.msie7=0,c.indexOf("msie ")!=-1?d.msie=1:d.msie=0,s.biginteger_used=null;var f;function m(l,u,p){s.biginteger_used=1,l!=null&&(typeof l=="number"&&typeof u>"u"?this.fromInt(l):typeof l=="number"?this.fromNumber(l,u,p):u==null&&typeof l!="string"?this.fromString(l,256):this.fromString(l,u))}function v(){return new m(null,void 0,void 0)}function S(l,u,p,O,C,b){for(;--b>=0;){var E=u*this[l++]+p[O]+C;C=Math.floor(E/67108864),p[O++]=E&67108863}return C}function g(l,u,p,O,C,b){for(var E=u&32767,A=u>>15;--b>=0;){var k=this[l]&32767,L=this[l++]>>15,Z=A*k+L*E;k=E*k+((Z&32767)<<15)+p[O]+(C&1073741823),C=(k>>>30)+(Z>>>15)+A*L+(C>>>30),p[O++]=k&1073741823}return C}function y(l,u,p,O,C,b){for(var E=u&16383,A=u>>14;--b>=0;){var k=this[l]&16383,L=this[l++]>>14,Z=A*k+L*E;k=E*k+((Z&16383)<<14)+p[O]+C,C=(k>>28)+(Z>>14)+A*L,p[O++]=k&268435455}return C}h=="Microsoft Internet Explorer"?(m.prototype.am=g,f=30):h!="Netscape"?(m.prototype.am=S,f=26):(m.prototype.am=y,f=28),m.prototype.DB=f,m.prototype.DM=(1<<f)-1,m.prototype.DV=1<<f;var P=52;m.prototype.FV=Math.pow(2,P),m.prototype.F1=P-f,m.prototype.F2=2*f-P;var w="0123456789abcdefghijklmnopqrstuvwxyz",D=new Array,T,_;for(T="0".charCodeAt(0),_=0;_<=9;++_)D[T++]=_;for(T="a".charCodeAt(0),_=10;_<36;++_)D[T++]=_;for(T="A".charCodeAt(0),_=10;_<36;++_)D[T++]=_;function I(l){return w.charAt(l)}function F(l,u){var p=D[l.charCodeAt(u)];return p==null?-1:p}function G(l){for(var u=this.t-1;u>=0;--u)l[u]=this[u];l.t=this.t,l.s=this.s}function z(l){this.t=1,this.s=l<0?-1:0,l>0?this[0]=l:l<-1?this[0]=l+this.DV:this.t=0}function U(l){var u=v();return u.fromInt(l),u}function Y(l,u){var p;if(u==16)p=4;else if(u==8)p=3;else if(u==256)p=8;else if(u==2)p=1;else if(u==32)p=5;else if(u==4)p=2;else{this.fromRadix(l,u);return}this.t=0,this.s=0;for(var O=l.length,C=!1,b=0;--O>=0;){var E=p==8?l[O]&255:F(l,O);if(E<0){l.charAt(O)=="-"&&(C=!0);continue}C=!1,b==0?this[this.t++]=E:b+p>this.DB?(this[this.t-1]|=(E&(1<<this.DB-b)-1)<<b,this[this.t++]=E>>this.DB-b):this[this.t-1]|=E<<b,b+=p,b>=this.DB&&(b-=this.DB)}p==8&&(l[0]&128)!=0&&(this.s=-1,b>0&&(this[this.t-1]|=(1<<this.DB-b)-1<<b)),this.clamp(),C&&m.ZERO.subTo(this,this)}function Q(){for(var l=this.s&this.DM;this.t>0&&this[this.t-1]==l;)--this.t}function W(l){if(this.s<0)return"-"+this.negate().toString(l);var u;if(l==16)u=4;else if(l==8)u=3;else if(l==2)u=1;else if(l==32)u=5;else if(l==4)u=2;else return this.toRadix(l);var p=(1<<u)-1,O,C=!1,b="",E=this.t,A=this.DB-E*this.DB%u;if(E-- >0)for(A<this.DB&&(O=this[E]>>A)>0&&(C=!0,b=I(O));E>=0;)A<u?(O=(this[E]&(1<<A)-1)<<u-A,O|=this[--E]>>(A+=this.DB-u)):(O=this[E]>>(A-=u)&p,A<=0&&(A+=this.DB,--E)),O>0&&(C=!0),C&&(b+=I(O));return C?b:"0"}function V(){var l=v();return m.ZERO.subTo(this,l),l}function et(){return this.s<0?this.negate():this}function ct(l){var u=this.s-l.s;if(u!=0)return u;var p=this.t;if(u=p-l.t,u!=0)return this.s<0?-u:u;for(;--p>=0;)if((u=this[p]-l[p])!=0)return u;return 0}function ft(l){var u=1,p;return(p=l>>>16)!=0&&(l=p,u+=16),(p=l>>8)!=0&&(l=p,u+=8),(p=l>>4)!=0&&(l=p,u+=4),(p=l>>2)!=0&&(l=p,u+=2),(p=l>>1)!=0&&(l=p,u+=1),u}function yt(){return this.t<=0?0:this.DB*(this.t-1)+ft(this[this.t-1]^this.s&this.DM)}function Pt(l,u){var p;for(p=this.t-1;p>=0;--p)u[p+l]=this[p];for(p=l-1;p>=0;--p)u[p]=0;u.t=this.t+l,u.s=this.s}function xt(l,u){for(var p=l;p<this.t;++p)u[p-l]=this[p];u.t=Math.max(this.t-l,0),u.s=this.s}function _t(l,u){var p=l%this.DB,O=this.DB-p,C=(1<<O)-1,b=Math.floor(l/this.DB),E=this.s<<p&this.DM,A;for(A=this.t-1;A>=0;--A)u[A+b+1]=this[A]>>O|E,E=(this[A]&C)<<p;for(A=b-1;A>=0;--A)u[A]=0;u[b]=E,u.t=this.t+b+1,u.s=this.s,u.clamp()}function kt(l,u){u.s=this.s;var p=Math.floor(l/this.DB);if(p>=this.t){u.t=0;return}var O=l%this.DB,C=this.DB-O,b=(1<<O)-1;u[0]=this[p]>>O;for(var E=p+1;E<this.t;++E)u[E-p-1]|=(this[E]&b)<<C,u[E-p]=this[E]>>O;O>0&&(u[this.t-p-1]|=(this.s&b)<<C),u.t=this.t-p,u.clamp()}function Xt(l,u){for(var p=0,O=0,C=Math.min(l.t,this.t);p<C;)O+=this[p]-l[p],u[p++]=O&this.DM,O>>=this.DB;if(l.t<this.t){for(O-=l.s;p<this.t;)O+=this[p],u[p++]=O&this.DM,O>>=this.DB;O+=this.s}else{for(O+=this.s;p<l.t;)O-=l[p],u[p++]=O&this.DM,O>>=this.DB;O-=l.s}u.s=O<0?-1:0,O<-1?u[p++]=this.DV+O:O>0&&(u[p++]=O),u.t=p,u.clamp()}function he(l,u){var p=this.abs(),O=l.abs(),C=p.t;for(u.t=C+O.t;--C>=0;)u[C]=0;for(C=0;C<O.t;++C)u[C+p.t]=p.am(0,O[C],u,C,0,p.t);u.s=0,u.clamp(),this.s!=l.s&&m.ZERO.subTo(u,u)}function Vt(l){for(var u=this.abs(),p=l.t=2*u.t;--p>=0;)l[p]=0;for(p=0;p<u.t-1;++p){var O=u.am(p,u[p],l,2*p,0,1);(l[p+u.t]+=u.am(p+1,2*u[p],l,2*p+1,O,u.t-p-1))>=u.DV&&(l[p+u.t]-=u.DV,l[p+u.t+1]=1)}l.t>0&&(l[l.t-1]+=u.am(p,u[p],l,2*p,0,1)),l.s=0,l.clamp()}function ve(l,u,p){var O=l.abs();if(!(O.t<=0)){var C=this.abs();if(C.t<O.t){u!=null&&u.fromInt(0),p!=null&&this.copyTo(p);return}p==null&&(p=v());var b=v(),E=this.s,A=l.s,k=this.DB-ft(O[O.t-1]);k>0?(O.lShiftTo(k,b),C.lShiftTo(k,p)):(O.copyTo(b),C.copyTo(p));var L=b.t,Z=b[L-1];if(Z!=0){var B=Z*(1<<this.F1)+(L>1?b[L-2]>>this.F2:0),J=this.FV/B,ot=(1<<this.F1)/B,dt=1<<this.F2,mt=p.t,bt=mt-L,Pe=u==null?v():u;for(b.dlShiftTo(bt,Pe),p.compareTo(Pe)>=0&&(p[p.t++]=1,p.subTo(Pe,p)),m.ONE.dlShiftTo(L,Pe),Pe.subTo(b,b);b.t<L;)b[b.t++]=0;for(;--bt>=0;){var oi=p[--mt]==Z?this.DM:Math.floor(p[mt]*J+(p[mt-1]+dt)*ot);if((p[mt]+=b.am(0,oi,p,bt,0,L))<oi)for(b.dlShiftTo(bt,Pe),p.subTo(Pe,p);p[mt]<--oi;)p.subTo(Pe,p)}u!=null&&(p.drShiftTo(L,u),E!=A&&m.ZERO.subTo(u,u)),p.t=L,p.clamp(),k>0&&p.rShiftTo(k,p),E<0&&m.ZERO.subTo(p,p)}}}function $e(l){var u=v();return this.abs().divRemTo(l,null,u),this.s<0&&u.compareTo(m.ZERO)>0&&l.subTo(u,u),u}function ne(l){this.m=l}function Ht(l){return l.s<0||l.compareTo(this.m)>=0?l.mod(this.m):l}function Ne(l){return l}function re(l){l.divRemTo(this.m,null,l)}function Fe(l,u,p){l.multiplyTo(u,p),this.reduce(p)}function Ae(l,u){l.squareTo(u),this.reduce(u)}ne.prototype.convert=Ht,ne.prototype.revert=Ne,ne.prototype.reduce=re,ne.prototype.mulTo=Fe,ne.prototype.sqrTo=Ae;function ri(){if(this.t<1)return 0;var l=this[0];if((l&1)==0)return 0;var u=l&3;return u=u*(2-(l&15)*u)&15,u=u*(2-(l&255)*u)&255,u=u*(2-((l&65535)*u&65535))&65535,u=u*(2-l*u%this.DV)%this.DV,u>0?this.DV-u:-u}function Ft(l){this.m=l,this.mp=l.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<l.DB-15)-1,this.mt2=2*l.t}function de(l){var u=v();return l.abs().dlShiftTo(this.m.t,u),u.divRemTo(this.m,null,u),l.s<0&&u.compareTo(m.ZERO)>0&&this.m.subTo(u,u),u}function Me(l){var u=v();return l.copyTo(u),this.reduce(u),u}function si(l){for(;l.t<=this.mt2;)l[l.t++]=0;for(var u=0;u<this.m.t;++u){var p=l[u]&32767,O=p*this.mpl+((p*this.mph+(l[u]>>15)*this.mpl&this.um)<<15)&l.DM;for(p=u+this.m.t,l[p]+=this.m.am(0,O,l,u,0,this.m.t);l[p]>=l.DV;)l[p]-=l.DV,l[++p]++}l.clamp(),l.drShiftTo(this.m.t,l),l.compareTo(this.m)>=0&&l.subTo(this.m,l)}function gr(l,u){l.squareTo(u),this.reduce(u)}function Ui(l,u,p){l.multiplyTo(u,p),this.reduce(p)}Ft.prototype.convert=de,Ft.prototype.revert=Me,Ft.prototype.reduce=si,Ft.prototype.mulTo=Ui,Ft.prototype.sqrTo=gr;function Or(){return(this.t>0?this[0]&1:this.s)==0}function ra(l,u){if(l>4294967295||l<1)return m.ONE;var p=v(),O=v(),C=u.convert(this),b=ft(l)-1;for(C.copyTo(p);--b>=0;)if(u.sqrTo(p,O),(l&1<<b)>0)u.mulTo(O,C,p);else{var E=p;p=O,O=E}return u.revert(p)}function sa(l,u){var p;return l<256||u.isEven()?p=new ne(u):p=new Ft(u),this.exp(l,p)}m.prototype.copyTo=G,m.prototype.fromInt=z,m.prototype.fromString=Y,m.prototype.clamp=Q,m.prototype.dlShiftTo=Pt,m.prototype.drShiftTo=xt,m.prototype.lShiftTo=_t,m.prototype.rShiftTo=kt,m.prototype.subTo=Xt,m.prototype.multiplyTo=he,m.prototype.squareTo=Vt,m.prototype.divRemTo=ve,m.prototype.invDigit=ri,m.prototype.isEven=Or,m.prototype.exp=ra,m.prototype.toString=W,m.prototype.negate=V,m.prototype.abs=et,m.prototype.compareTo=ct,m.prototype.bitLength=yt,m.prototype.mod=$e,m.prototype.modPowInt=sa,m.ZERO=U(0),m.ONE=U(1);function oa(){var l=v();return this.copyTo(l),l}function la(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function aa(){return this.t==0?this.s:this[0]<<24>>24}function ha(){return this.t==0?this.s:this[0]<<16>>16}function ua(l){return Math.floor(Math.LN2*this.DB/Math.log(l))}function ca(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function pa(l){if(l==null&&(l=10),this.signum()==0||l<2||l>36)return"0";var u=this.chunkSize(l),p=Math.pow(l,u),O=U(p),C=v(),b=v(),E="";for(this.divRemTo(O,C,b);C.signum()>0;)E=(p+b.intValue()).toString(l).substr(1)+E,C.divRemTo(O,C,b);return b.intValue().toString(l)+E}function da(l,u){this.fromInt(0),u==null&&(u=10);for(var p=this.chunkSize(u),O=Math.pow(u,p),C=!1,b=0,E=0,A=0;A<l.length;++A){var k=F(l,A);if(k<0){l.charAt(A)=="-"&&this.signum()==0&&(C=!0);continue}E=u*E+k,++b>=p&&(this.dMultiply(O),this.dAddOffset(E,0),b=0,E=0)}b>0&&(this.dMultiply(Math.pow(u,b)),this.dAddOffset(E,0)),C&&m.ZERO.subTo(this,this)}function fa(l,u,p){if(typeof u=="number")if(l<2)this.fromInt(1);else for(this.fromNumber(l,p),this.testBit(l-1)||this.bitwiseTo(m.ONE.shiftLeft(l-1),yr,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(u);)this.dAddOffset(2,0),this.bitLength()>l&&this.subTo(m.ONE.shiftLeft(l-1),this);else{var O=new Array,C=l&7;O.length=(l>>3)+1,u.nextBytes(O),C>0?O[0]&=(1<<C)-1:O[0]=0,this.fromString(O,256)}}function ma(){var l=this.t,u=new Array;u[0]=this.s;var p=this.DB-l*this.DB%8,O,C=0;if(l-- >0)for(p<this.DB&&(O=this[l]>>p)!=(this.s&this.DM)>>p&&(u[C++]=O|this.s<<this.DB-p);l>=0;)p<8?(O=(this[l]&(1<<p)-1)<<8-p,O|=this[--l]>>(p+=this.DB-8)):(O=this[l]>>(p-=8)&255,p<=0&&(p+=this.DB,--l)),(O&128)!=0&&(O|=-256),C==0&&(this.s&128)!=(O&128)&&++C,(C>0||O!=this.s)&&(u[C++]=O);return u}function ga(l){return this.compareTo(l)==0}function Oa(l){return this.compareTo(l)<0?this:l}function ya(l){return this.compareTo(l)>0?this:l}function xa(l,u,p){var O,C,b=Math.min(l.t,this.t);for(O=0;O<b;++O)p[O]=u(this[O],l[O]);if(l.t<this.t){for(C=l.s&this.DM,O=b;O<this.t;++O)p[O]=u(this[O],C);p.t=this.t}else{for(C=this.s&this.DM,O=b;O<l.t;++O)p[O]=u(C,l[O]);p.t=l.t}p.s=u(this.s,l.s),p.clamp()}function va(l,u){return l&u}function Pa(l){var u=v();return this.bitwiseTo(l,va,u),u}function yr(l,u){return l|u}function Ca(l){var u=v();return this.bitwiseTo(l,yr,u),u}function X(l,u){return l^u}function $(l){var u=v();return this.bitwiseTo(l,X,u),u}function q(l,u){return l&~u}function ut(l){var u=v();return this.bitwiseTo(l,q,u),u}function fe(){for(var l=v(),u=0;u<this.t;++u)l[u]=this.DM&~this[u];return l.t=this.t,l.s=~this.s,l}function xr(l){var u=v();return l<0?this.rShiftTo(-l,u):this.lShiftTo(l,u),u}function Sa(l){var u=v();return l<0?this.lShiftTo(-l,u):this.rShiftTo(l,u),u}function wC(l){if(l==0)return-1;var u=0;return(l&65535)==0&&(l>>=16,u+=16),(l&255)==0&&(l>>=8,u+=8),(l&15)==0&&(l>>=4,u+=4),(l&3)==0&&(l>>=2,u+=2),(l&1)==0&&++u,u}function bC(){for(var l=0;l<this.t;++l)if(this[l]!=0)return l*this.DB+wC(this[l]);return this.s<0?this.t*this.DB:-1}function EC(l){for(var u=0;l!=0;)l&=l-1,++u;return u}function DC(){for(var l=0,u=this.s&this.DM,p=0;p<this.t;++p)l+=EC(this[p]^u);return l}function TC(l){var u=Math.floor(l/this.DB);return u>=this.t?this.s!=0:(this[u]&1<<l%this.DB)!=0}function AC(l,u){var p=m.ONE.shiftLeft(l);return this.bitwiseTo(p,u,p),p}function kC(l){return this.changeBit(l,yr)}function _C(l){return this.changeBit(l,q)}function IC(l){return this.changeBit(l,X)}function LC(l,u){for(var p=0,O=0,C=Math.min(l.t,this.t);p<C;)O+=this[p]+l[p],u[p++]=O&this.DM,O>>=this.DB;if(l.t<this.t){for(O+=l.s;p<this.t;)O+=this[p],u[p++]=O&this.DM,O>>=this.DB;O+=this.s}else{for(O+=this.s;p<l.t;)O+=l[p],u[p++]=O&this.DM,O>>=this.DB;O+=l.s}u.s=O<0?-1:0,O>0?u[p++]=O:O<-1&&(u[p++]=this.DV+O),u.t=p,u.clamp()}function QC(l){var u=v();return this.addTo(l,u),u}function XC(l){var u=v();return this.subTo(l,u),u}function $C(l){var u=v();return this.multiplyTo(l,u),u}function NC(){var l=v();return this.squareTo(l),l}function FC(l){var u=v();return this.divRemTo(l,u,null),u}function MC(l){var u=v();return this.divRemTo(l,null,u),u}function BC(l){var u=v(),p=v();return this.divRemTo(l,u,p),new Array(u,p)}function RC(l){this[this.t]=this.am(0,l-1,this,0,0,this.t),++this.t,this.clamp()}function YC(l,u){if(l!=0){for(;this.t<=u;)this[this.t++]=0;for(this[u]+=l;this[u]>=this.DV;)this[u]-=this.DV,++u>=this.t&&(this[this.t++]=0),++this[u]}}function vr(){}function df(l){return l}function WC(l,u,p){l.multiplyTo(u,p)}function jC(l,u){l.squareTo(u)}vr.prototype.convert=df,vr.prototype.revert=df,vr.prototype.mulTo=WC,vr.prototype.sqrTo=jC;function ZC(l){return this.exp(l,new vr)}function zC(l,u,p){var O=Math.min(this.t+l.t,u);for(p.s=0,p.t=O;O>0;)p[--O]=0;var C;for(C=p.t-this.t;O<C;++O)p[O+this.t]=this.am(0,l[O],p,O,0,this.t);for(C=Math.min(l.t,u);O<C;++O)this.am(0,l[O],p,O,0,u-O);p.clamp()}function qC(l,u,p){--u;var O=p.t=this.t+l.t-u;for(p.s=0;--O>=0;)p[O]=0;for(O=Math.max(u-this.t,0);O<l.t;++O)p[this.t+O-u]=this.am(u-O,l[O],p,0,0,this.t+O-u);p.clamp(),p.drShiftTo(1,p)}function vn(l){this.r2=v(),this.q3=v(),m.ONE.dlShiftTo(2*l.t,this.r2),this.mu=this.r2.divide(l),this.m=l}function UC(l){if(l.s<0||l.t>2*this.m.t)return l.mod(this.m);if(l.compareTo(this.m)<0)return l;var u=v();return l.copyTo(u),this.reduce(u),u}function GC(l){return l}function VC(l){for(l.drShiftTo(this.m.t-1,this.r2),l.t>this.m.t+1&&(l.t=this.m.t+1,l.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);l.compareTo(this.r2)<0;)l.dAddOffset(1,this.m.t+1);for(l.subTo(this.r2,l);l.compareTo(this.m)>=0;)l.subTo(this.m,l)}function HC(l,u){l.squareTo(u),this.reduce(u)}function JC(l,u,p){l.multiplyTo(u,p),this.reduce(p)}vn.prototype.convert=UC,vn.prototype.revert=GC,vn.prototype.reduce=VC,vn.prototype.mulTo=JC,vn.prototype.sqrTo=HC;function KC(l,u){var p=l.bitLength(),O,C=U(1),b;if(p<=0)return C;p<18?O=1:p<48?O=3:p<144?O=4:p<768?O=5:O=6,p<8?b=new ne(u):u.isEven()?b=new vn(u):b=new Ft(u);var E=new Array,A=3,k=O-1,L=(1<<O)-1;if(E[1]=b.convert(this),O>1){var Z=v();for(b.sqrTo(E[1],Z);A<=L;)E[A]=v(),b.mulTo(Z,E[A-2],E[A]),A+=2}var B=l.t-1,J,ot=!0,dt=v(),mt;for(p=ft(l[B])-1;B>=0;){for(p>=k?J=l[B]>>p-k&L:(J=(l[B]&(1<<p+1)-1)<<k-p,B>0&&(J|=l[B-1]>>this.DB+p-k)),A=O;(J&1)==0;)J>>=1,--A;if((p-=A)<0&&(p+=this.DB,--B),ot)E[J].copyTo(C),ot=!1;else{for(;A>1;)b.sqrTo(C,dt),b.sqrTo(dt,C),A-=2;A>0?b.sqrTo(C,dt):(mt=C,C=dt,dt=mt),b.mulTo(dt,E[J],C)}for(;B>=0&&(l[B]&1<<p)==0;)b.sqrTo(C,dt),mt=C,C=dt,dt=mt,--p<0&&(p=this.DB-1,--B)}return b.revert(C)}function tS(l){var u=this.s<0?this.negate():this.clone(),p=l.s<0?l.negate():l.clone();if(u.compareTo(p)<0){var O=u;u=p,p=O}var C=u.getLowestSetBit(),b=p.getLowestSetBit();if(b<0)return u;for(C<b&&(b=C),b>0&&(u.rShiftTo(b,u),p.rShiftTo(b,p));u.signum()>0;)(C=u.getLowestSetBit())>0&&u.rShiftTo(C,u),(C=p.getLowestSetBit())>0&&p.rShiftTo(C,p),u.compareTo(p)>=0?(u.subTo(p,u),u.rShiftTo(1,u)):(p.subTo(u,p),p.rShiftTo(1,p));return b>0&&p.lShiftTo(b,p),p}function eS(l){if(l<=0)return 0;var u=this.DV%l,p=this.s<0?l-1:0;if(this.t>0)if(u==0)p=this[0]%l;else for(var O=this.t-1;O>=0;--O)p=(u*p+this[O])%l;return p}function iS(l){var u=l.isEven();if(this.isEven()&&u||l.signum()==0)return m.ZERO;for(var p=l.clone(),O=this.clone(),C=U(1),b=U(0),E=U(0),A=U(1);p.signum()!=0;){for(;p.isEven();)p.rShiftTo(1,p),u?((!C.isEven()||!b.isEven())&&(C.addTo(this,C),b.subTo(l,b)),C.rShiftTo(1,C)):b.isEven()||b.subTo(l,b),b.rShiftTo(1,b);for(;O.isEven();)O.rShiftTo(1,O),u?((!E.isEven()||!A.isEven())&&(E.addTo(this,E),A.subTo(l,A)),E.rShiftTo(1,E)):A.isEven()||A.subTo(l,A),A.rShiftTo(1,A);p.compareTo(O)>=0?(p.subTo(O,p),u&&C.subTo(E,C),b.subTo(A,b)):(O.subTo(p,O),u&&E.subTo(C,E),A.subTo(b,A))}if(O.compareTo(m.ONE)!=0)return m.ZERO;if(A.compareTo(l)>=0)return A.subtract(l);if(A.signum()<0)A.addTo(l,A);else return A;return A.signum()<0?A.add(l):A}var me=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],nS=(1<<26)/me[me.length-1];function rS(l){var u,p=this.abs();if(p.t==1&&p[0]<=me[me.length-1]){for(u=0;u<me.length;++u)if(p[0]==me[u])return!0;return!1}if(p.isEven())return!1;for(u=1;u<me.length;){for(var O=me[u],C=u+1;C<me.length&&O<nS;)O*=me[C++];for(O=p.modInt(O);u<C;)if(O%me[u++]==0)return!1}return p.millerRabin(l)}function sS(l){var u=this.subtract(m.ONE),p=u.getLowestSetBit();if(p<=0)return!1;var O=u.shiftRight(p);l=l+1>>1,l>me.length&&(l=me.length);for(var C=v(),b=0;b<l;++b){C.fromInt(me[Math.floor(Math.random()*me.length)]);var E=C.modPow(O,this);if(E.compareTo(m.ONE)!=0&&E.compareTo(u)!=0){for(var A=1;A++<p&&E.compareTo(u)!=0;)if(E=E.modPowInt(2,this),E.compareTo(m.ONE)==0)return!1;if(E.compareTo(u)!=0)return!1}}return!0}m.prototype.chunkSize=ua,m.prototype.toRadix=pa,m.prototype.fromRadix=da,m.prototype.fromNumber=fa,m.prototype.bitwiseTo=xa,m.prototype.changeBit=AC,m.prototype.addTo=LC,m.prototype.dMultiply=RC,m.prototype.dAddOffset=YC,m.prototype.multiplyLowerTo=zC,m.prototype.multiplyUpperTo=qC,m.prototype.modInt=eS,m.prototype.millerRabin=sS,m.prototype.clone=oa,m.prototype.intValue=la,m.prototype.byteValue=aa,m.prototype.shortValue=ha,m.prototype.signum=ca,m.prototype.toByteArray=ma,m.prototype.equals=ga,m.prototype.min=Oa,m.prototype.max=ya,m.prototype.and=Pa,m.prototype.or=Ca,m.prototype.xor=$,m.prototype.andNot=ut,m.prototype.not=fe,m.prototype.shiftLeft=xr,m.prototype.shiftRight=Sa,m.prototype.getLowestSetBit=bC,m.prototype.bitCount=DC,m.prototype.testBit=TC,m.prototype.setBit=kC,m.prototype.clearBit=_C,m.prototype.flipBit=IC,m.prototype.add=QC,m.prototype.subtract=XC,m.prototype.multiply=$C,m.prototype.divide=FC,m.prototype.remainder=MC,m.prototype.divideAndRemainder=BC,m.prototype.modPow=KC,m.prototype.modInverse=iS,m.prototype.pow=ZC,m.prototype.gcd=tS,m.prototype.isProbablePrime=rS,m.prototype.square=NC;var pt=m;pt.prototype.IsNegative=function(){return this.compareTo(pt.ZERO)==-1},pt.op_Equality=function(l,u){return l.compareTo(u)==0},pt.op_Inequality=function(l,u){return l.compareTo(u)!=0},pt.op_GreaterThan=function(l,u){return l.compareTo(u)>0},pt.op_LessThan=function(l,u){return l.compareTo(u)<0},pt.op_Addition=function(l,u){return new pt(l,void 0,void 0).add(new pt(u,void 0,void 0))},pt.op_Subtraction=function(l,u){return new pt(l,void 0,void 0).subtract(new pt(u,void 0,void 0))},pt.Int128Mul=function(l,u){return new pt(l,void 0,void 0).multiply(new pt(u,void 0,void 0))},pt.op_Division=function(l,u){return l.divide(u)},pt.prototype.ToDouble=function(){return parseFloat(this.toString())};var ff=function(l,u){var p;if(typeof Object.getOwnPropertyNames>"u"){for(p in u.prototype)(typeof l.prototype[p]>"u"||l.prototype[p]===Object.prototype[p])&&(l.prototype[p]=u.prototype[p]);for(p in u)typeof l[p]>"u"&&(l[p]=u[p]);l.$baseCtor=u}else{for(var O=Object.getOwnPropertyNames(u.prototype),C=0;C<O.length;C++)typeof Object.getOwnPropertyDescriptor(l.prototype,O[C])>"u"&&Object.defineProperty(l.prototype,O[C],Object.getOwnPropertyDescriptor(u.prototype,O[C]));for(p in u)typeof l[p]>"u"&&(l[p]=u[p]);l.$baseCtor=u}};s.Path=function(){return[]},s.Path.prototype.push=Array.prototype.push,s.Paths=function(){return[]},s.Paths.prototype.push=Array.prototype.push,s.DoublePoint=function(){var l=arguments;this.X=0,this.Y=0,l.length===1?(this.X=l[0].X,this.Y=l[0].Y):l.length===2&&(this.X=l[0],this.Y=l[1])},s.DoublePoint0=function(){this.X=0,this.Y=0},s.DoublePoint0.prototype=s.DoublePoint.prototype,s.DoublePoint1=function(l){this.X=l.X,this.Y=l.Y},s.DoublePoint1.prototype=s.DoublePoint.prototype,s.DoublePoint2=function(l,u){this.X=l,this.Y=u},s.DoublePoint2.prototype=s.DoublePoint.prototype,s.PolyNode=function(){this.m_Parent=null,this.m_polygon=new s.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},s.PolyNode.prototype.IsHoleNode=function(){for(var l=!0,u=this.m_Parent;u!==null;)l=!l,u=u.m_Parent;return l},s.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},s.PolyNode.prototype.Contour=function(){return this.m_polygon},s.PolyNode.prototype.AddChild=function(l){var u=this.m_Childs.length;this.m_Childs.push(l),l.m_Parent=this,l.m_Index=u},s.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},s.PolyNode.prototype.GetNextSiblingUp=function(){return this.m_Parent===null?null:this.m_Index===this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},s.PolyNode.prototype.Childs=function(){return this.m_Childs},s.PolyNode.prototype.Parent=function(){return this.m_Parent},s.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},s.PolyTree=function(){this.m_AllPolys=[],s.PolyNode.call(this)},s.PolyTree.prototype.Clear=function(){for(var l=0,u=this.m_AllPolys.length;l<u;l++)this.m_AllPolys[l]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},s.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},s.PolyTree.prototype.Total=function(){var l=this.m_AllPolys.length;return l>0&&this.m_Childs[0]!==this.m_AllPolys[0]&&l--,l},ff(s.PolyTree,s.PolyNode),s.Math_Abs_Int64=s.Math_Abs_Int32=s.Math_Abs_Double=function(l){return Math.abs(l)},s.Math_Max_Int32_Int32=function(l,u){return Math.max(l,u)},d.msie||d.opera||d.safari?s.Cast_Int32=function(l){return l|0}:s.Cast_Int32=function(l){return~~l},typeof Number.toInteger>"u"&&(Number.toInteger=null),d.chrome?s.Cast_Int64=function(l){return l<-2147483648||l>2147483647?l<0?Math.ceil(l):Math.floor(l):~~l}:d.firefox&&typeof Number.toInteger=="function"?s.Cast_Int64=function(l){return Number.toInteger(l)}:d.msie7||d.msie8?s.Cast_Int64=function(l){return parseInt(l,10)}:d.msie?s.Cast_Int64=function(l){return l<-2147483648||l>2147483647?l<0?Math.ceil(l):Math.floor(l):l|0}:s.Cast_Int64=function(l){return l<0?Math.ceil(l):Math.floor(l)},s.Clear=function(l){l.length=0},s.PI=3.141592653589793,s.PI2=2*3.141592653589793,s.IntPoint=function(){var l=arguments,u=l.length;if(this.X=0,this.Y=0,s.use_xyz)if(this.Z=0,u===3)this.X=l[0],this.Y=l[1],this.Z=l[2];else if(u===2)this.X=l[0],this.Y=l[1],this.Z=0;else if(u===1)if(l[0]instanceof s.DoublePoint){var p=l[0];this.X=s.Clipper.Round(p.X),this.Y=s.Clipper.Round(p.Y),this.Z=0}else{var O=l[0];typeof O.Z>"u"&&(O.Z=0),this.X=O.X,this.Y=O.Y,this.Z=O.Z}else this.X=0,this.Y=0,this.Z=0;else if(u===2)this.X=l[0],this.Y=l[1];else if(u===1)if(l[0]instanceof s.DoublePoint){var p=l[0];this.X=s.Clipper.Round(p.X),this.Y=s.Clipper.Round(p.Y)}else{var O=l[0];this.X=O.X,this.Y=O.Y}else this.X=0,this.Y=0},s.IntPoint.op_Equality=function(l,u){return l.X===u.X&&l.Y===u.Y},s.IntPoint.op_Inequality=function(l,u){return l.X!==u.X||l.Y!==u.Y},s.IntPoint0=function(){this.X=0,this.Y=0,s.use_xyz&&(this.Z=0)},s.IntPoint0.prototype=s.IntPoint.prototype,s.IntPoint1=function(l){this.X=l.X,this.Y=l.Y,s.use_xyz&&(typeof l.Z>"u"?this.Z=0:this.Z=l.Z)},s.IntPoint1.prototype=s.IntPoint.prototype,s.IntPoint1dp=function(l){this.X=s.Clipper.Round(l.X),this.Y=s.Clipper.Round(l.Y),s.use_xyz&&(this.Z=0)},s.IntPoint1dp.prototype=s.IntPoint.prototype,s.IntPoint2=function(l,u,p){this.X=l,this.Y=u,s.use_xyz&&(typeof p>"u"?this.Z=0:this.Z=p)},s.IntPoint2.prototype=s.IntPoint.prototype,s.IntRect=function(){var l=arguments,u=l.length;if(u===4)this.left=l[0],this.top=l[1],this.right=l[2],this.bottom=l[3];else if(u===1){var p=l[0];this.left=p.left,this.top=p.top,this.right=p.right,this.bottom=p.bottom}else this.left=0,this.top=0,this.right=0,this.bottom=0},s.IntRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},s.IntRect0.prototype=s.IntRect.prototype,s.IntRect1=function(l){this.left=l.left,this.top=l.top,this.right=l.right,this.bottom=l.bottom},s.IntRect1.prototype=s.IntRect.prototype,s.IntRect4=function(l,u,p,O){this.left=l,this.top=u,this.right=p,this.bottom=O},s.IntRect4.prototype=s.IntRect.prototype,s.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},s.PolyType={ptSubject:0,ptClip:1},s.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},s.JoinType={jtSquare:0,jtRound:1,jtMiter:2},s.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},s.EdgeSide={esLeft:0,esRight:1},s.Direction={dRightToLeft:0,dLeftToRight:1},s.TEdge=function(){this.Bot=new s.IntPoint0,this.Curr=new s.IntPoint0,this.Top=new s.IntPoint0,this.Delta=new s.IntPoint0,this.Dx=0,this.PolyTyp=s.PolyType.ptSubject,this.Side=s.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},s.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new s.IntPoint0},s.MyIntersectNodeSort=function(){},s.MyIntersectNodeSort.Compare=function(l,u){var p=u.Pt.Y-l.Pt.Y;return p>0?1:p<0?-1:0},s.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},s.Scanbeam=function(){this.Y=0,this.Next=null},s.Maxima=function(){this.X=0,this.Next=null,this.Prev=null},s.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},s.OutPt=function(){this.Idx=0,this.Pt=new s.IntPoint0,this.Next=null,this.Prev=null},s.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new s.IntPoint0},s.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_Scanbeam=null,this.m_PolyOuts=null,this.m_ActiveEdges=null},s.ClipperBase.horizontal=-9007199254740992,s.ClipperBase.Skip=-2,s.ClipperBase.Unassigned=-1,s.ClipperBase.tolerance=1e-20,s.ClipperBase.loRange=47453132,s.ClipperBase.hiRange=0xfffffffffffff,s.ClipperBase.near_zero=function(l){return l>-s.ClipperBase.tolerance&&l<s.ClipperBase.tolerance},s.ClipperBase.IsHorizontal=function(l){return l.Delta.Y===0},s.ClipperBase.prototype.PointIsVertex=function(l,u){var p=u;do{if(s.IntPoint.op_Equality(p.Pt,l))return!0;p=p.Next}while(p!==u);return!1},s.ClipperBase.prototype.PointOnLineSegment=function(l,u,p,O){return O?l.X===u.X&&l.Y===u.Y||l.X===p.X&&l.Y===p.Y||l.X>u.X==l.X<p.X&&l.Y>u.Y==l.Y<p.Y&&pt.op_Equality(pt.Int128Mul(l.X-u.X,p.Y-u.Y),pt.Int128Mul(p.X-u.X,l.Y-u.Y)):l.X===u.X&&l.Y===u.Y||l.X===p.X&&l.Y===p.Y||l.X>u.X==l.X<p.X&&l.Y>u.Y==l.Y<p.Y&&(l.X-u.X)*(p.Y-u.Y)===(p.X-u.X)*(l.Y-u.Y)},s.ClipperBase.prototype.PointOnPolygon=function(l,u,p){for(var O=u;;){if(this.PointOnLineSegment(l,O.Pt,O.Next.Pt,p))return!0;if(O=O.Next,O===u)break}return!1},s.ClipperBase.prototype.SlopesEqual=s.ClipperBase.SlopesEqual=function(){var l=arguments,u=l.length,p,O,C,b,E,A,k;return u===3?(p=l[0],O=l[1],k=l[2],k?pt.op_Equality(pt.Int128Mul(p.Delta.Y,O.Delta.X),pt.Int128Mul(p.Delta.X,O.Delta.Y)):s.Cast_Int64(p.Delta.Y*O.Delta.X)===s.Cast_Int64(p.Delta.X*O.Delta.Y)):u===4?(C=l[0],b=l[1],E=l[2],k=l[3],k?pt.op_Equality(pt.Int128Mul(C.Y-b.Y,b.X-E.X),pt.Int128Mul(C.X-b.X,b.Y-E.Y)):s.Cast_Int64((C.Y-b.Y)*(b.X-E.X))-s.Cast_Int64((C.X-b.X)*(b.Y-E.Y))===0):(C=l[0],b=l[1],E=l[2],A=l[3],k=l[4],k?pt.op_Equality(pt.Int128Mul(C.Y-b.Y,E.X-A.X),pt.Int128Mul(C.X-b.X,E.Y-A.Y)):s.Cast_Int64((C.Y-b.Y)*(E.X-A.X))-s.Cast_Int64((C.X-b.X)*(E.Y-A.Y))===0)},s.ClipperBase.SlopesEqual3=function(l,u,p){return p?pt.op_Equality(pt.Int128Mul(l.Delta.Y,u.Delta.X),pt.Int128Mul(l.Delta.X,u.Delta.Y)):s.Cast_Int64(l.Delta.Y*u.Delta.X)===s.Cast_Int64(l.Delta.X*u.Delta.Y)},s.ClipperBase.SlopesEqual4=function(l,u,p,O){return O?pt.op_Equality(pt.Int128Mul(l.Y-u.Y,u.X-p.X),pt.Int128Mul(l.X-u.X,u.Y-p.Y)):s.Cast_Int64((l.Y-u.Y)*(u.X-p.X))-s.Cast_Int64((l.X-u.X)*(u.Y-p.Y))===0},s.ClipperBase.SlopesEqual5=function(l,u,p,O,C){return C?pt.op_Equality(pt.Int128Mul(l.Y-u.Y,p.X-O.X),pt.Int128Mul(l.X-u.X,p.Y-O.Y)):s.Cast_Int64((l.Y-u.Y)*(p.X-O.X))-s.Cast_Int64((l.X-u.X)*(p.Y-O.Y))===0},s.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var l=0,u=this.m_edges.length;l<u;++l){for(var p=0,O=this.m_edges[l].length;p<O;++p)this.m_edges[l][p]=null;s.Clear(this.m_edges[l])}s.Clear(this.m_edges),this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},s.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;this.m_MinimaList!==null;){var l=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=l}this.m_CurrentLM=null},s.ClipperBase.prototype.RangeTest=function(l,u){u.Value?(l.X>s.ClipperBase.hiRange||l.Y>s.ClipperBase.hiRange||-l.X>s.ClipperBase.hiRange||-l.Y>s.ClipperBase.hiRange)&&s.Error("Coordinate outside allowed range in RangeTest()."):(l.X>s.ClipperBase.loRange||l.Y>s.ClipperBase.loRange||-l.X>s.ClipperBase.loRange||-l.Y>s.ClipperBase.loRange)&&(u.Value=!0,this.RangeTest(l,u))},s.ClipperBase.prototype.InitEdge=function(l,u,p,O){l.Next=u,l.Prev=p,l.Curr.X=O.X,l.Curr.Y=O.Y,s.use_xyz&&(l.Curr.Z=O.Z),l.OutIdx=-1},s.ClipperBase.prototype.InitEdge2=function(l,u){l.Curr.Y>=l.Next.Curr.Y?(l.Bot.X=l.Curr.X,l.Bot.Y=l.Curr.Y,s.use_xyz&&(l.Bot.Z=l.Curr.Z),l.Top.X=l.Next.Curr.X,l.Top.Y=l.Next.Curr.Y,s.use_xyz&&(l.Top.Z=l.Next.Curr.Z)):(l.Top.X=l.Curr.X,l.Top.Y=l.Curr.Y,s.use_xyz&&(l.Top.Z=l.Curr.Z),l.Bot.X=l.Next.Curr.X,l.Bot.Y=l.Next.Curr.Y,s.use_xyz&&(l.Bot.Z=l.Next.Curr.Z)),this.SetDx(l),l.PolyTyp=u},s.ClipperBase.prototype.FindNextLocMin=function(l){for(var u;;){for(;s.IntPoint.op_Inequality(l.Bot,l.Prev.Bot)||s.IntPoint.op_Equality(l.Curr,l.Top);)l=l.Next;if(l.Dx!==s.ClipperBase.horizontal&&l.Prev.Dx!==s.ClipperBase.horizontal)break;for(;l.Prev.Dx===s.ClipperBase.horizontal;)l=l.Prev;for(u=l;l.Dx===s.ClipperBase.horizontal;)l=l.Next;if(l.Top.Y!==l.Prev.Bot.Y){u.Prev.Bot.X<l.Bot.X&&(l=u);break}}return l},s.ClipperBase.prototype.ProcessBound=function(l,u){var p,O=l,C;if(O.OutIdx===s.ClipperBase.Skip){if(l=O,u){for(;l.Top.Y===l.Next.Bot.Y;)l=l.Next;for(;l!==O&&l.Dx===s.ClipperBase.horizontal;)l=l.Prev}else{for(;l.Top.Y===l.Prev.Bot.Y;)l=l.Prev;for(;l!==O&&l.Dx===s.ClipperBase.horizontal;)l=l.Next}if(l===O)u?O=l.Next:O=l.Prev;else{u?l=O.Next:l=O.Prev;var b=new s.LocalMinima;b.Next=null,b.Y=l.Bot.Y,b.LeftBound=null,b.RightBound=l,l.WindDelta=0,O=this.ProcessBound(l,u),this.InsertLocalMinima(b)}return O}if(l.Dx===s.ClipperBase.horizontal&&(u?p=l.Prev:p=l.Next,p.Dx===s.ClipperBase.horizontal?p.Bot.X!==l.Bot.X&&p.Top.X!==l.Bot.X&&this.ReverseHorizontal(l):p.Bot.X!==l.Bot.X&&this.ReverseHorizontal(l)),p=l,u){for(;O.Top.Y===O.Next.Bot.Y&&O.Next.OutIdx!==s.ClipperBase.Skip;)O=O.Next;if(O.Dx===s.ClipperBase.horizontal&&O.Next.OutIdx!==s.ClipperBase.Skip){for(C=O;C.Prev.Dx===s.ClipperBase.horizontal;)C=C.Prev;C.Prev.Top.X>O.Next.Top.X&&(O=C.Prev)}for(;l!==O;)l.NextInLML=l.Next,l.Dx===s.ClipperBase.horizontal&&l!==p&&l.Bot.X!==l.Prev.Top.X&&this.ReverseHorizontal(l),l=l.Next;l.Dx===s.ClipperBase.horizontal&&l!==p&&l.Bot.X!==l.Prev.Top.X&&this.ReverseHorizontal(l),O=O.Next}else{for(;O.Top.Y===O.Prev.Bot.Y&&O.Prev.OutIdx!==s.ClipperBase.Skip;)O=O.Prev;if(O.Dx===s.ClipperBase.horizontal&&O.Prev.OutIdx!==s.ClipperBase.Skip){for(C=O;C.Next.Dx===s.ClipperBase.horizontal;)C=C.Next;(C.Next.Top.X===O.Prev.Top.X||C.Next.Top.X>O.Prev.Top.X)&&(O=C.Next)}for(;l!==O;)l.NextInLML=l.Prev,l.Dx===s.ClipperBase.horizontal&&l!==p&&l.Bot.X!==l.Next.Top.X&&this.ReverseHorizontal(l),l=l.Prev;l.Dx===s.ClipperBase.horizontal&&l!==p&&l.Bot.X!==l.Next.Top.X&&this.ReverseHorizontal(l),O=O.Prev}return O},s.ClipperBase.prototype.AddPath=function(l,u,p){s.use_lines?!p&&u===s.PolyType.ptClip&&s.Error("AddPath: Open paths must be subject."):p||s.Error("AddPath: Open paths have been disabled.");var O=l.length-1;if(p)for(;O>0&&s.IntPoint.op_Equality(l[O],l[0]);)--O;for(;O>0&&s.IntPoint.op_Equality(l[O],l[O-1]);)--O;if(p&&O<2||!p&&O<1)return!1;for(var C=new Array,b=0;b<=O;b++)C.push(new s.TEdge);var E=!0;C[1].Curr.X=l[1].X,C[1].Curr.Y=l[1].Y,s.use_xyz&&(C[1].Curr.Z=l[1].Z);var A={Value:this.m_UseFullRange};this.RangeTest(l[0],A),this.m_UseFullRange=A.Value,A.Value=this.m_UseFullRange,this.RangeTest(l[O],A),this.m_UseFullRange=A.Value,this.InitEdge(C[0],C[1],C[O],l[0]),this.InitEdge(C[O],C[0],C[O-1],l[O]);for(var b=O-1;b>=1;--b)A.Value=this.m_UseFullRange,this.RangeTest(l[b],A),this.m_UseFullRange=A.Value,this.InitEdge(C[b],C[b+1],C[b-1],l[b]);for(var k=C[0],L=k,Z=k;;){if(L.Curr===L.Next.Curr&&(p||L.Next!==k)){if(L===L.Next)break;L===k&&(k=L.Next),L=this.RemoveEdge(L),Z=L;continue}if(L.Prev===L.Next)break;if(p&&s.ClipperBase.SlopesEqual4(L.Prev.Curr,L.Curr,L.Next.Curr,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(L.Prev.Curr,L.Curr,L.Next.Curr))){L===k&&(k=L.Next),L=this.RemoveEdge(L),L=L.Prev,Z=L;continue}if(L=L.Next,L===Z||!p&&L.Next===k)break}if(!p&&L===L.Next||p&&L.Prev===L.Next)return!1;p||(this.m_HasOpenPaths=!0,k.Prev.OutIdx=s.ClipperBase.Skip),L=k;do this.InitEdge2(L,u),L=L.Next,E&&L.Curr.Y!==k.Curr.Y&&(E=!1);while(L!==k);if(E){if(p)return!1;L.Prev.OutIdx=s.ClipperBase.Skip;var B=new s.LocalMinima;for(B.Next=null,B.Y=L.Bot.Y,B.LeftBound=null,B.RightBound=L,B.RightBound.Side=s.EdgeSide.esRight,B.RightBound.WindDelta=0;L.Bot.X!==L.Prev.Top.X&&this.ReverseHorizontal(L),L.Next.OutIdx!==s.ClipperBase.Skip;)L.NextInLML=L.Next,L=L.Next;return this.InsertLocalMinima(B),this.m_edges.push(C),!0}this.m_edges.push(C);var J,ot=null;for(s.IntPoint.op_Equality(L.Prev.Bot,L.Prev.Top)&&(L=L.Next);L=this.FindNextLocMin(L),L!==ot;){ot===null&&(ot=L);var B=new s.LocalMinima;B.Next=null,B.Y=L.Bot.Y,L.Dx<L.Prev.Dx?(B.LeftBound=L.Prev,B.RightBound=L,J=!1):(B.LeftBound=L,B.RightBound=L.Prev,J=!0),B.LeftBound.Side=s.EdgeSide.esLeft,B.RightBound.Side=s.EdgeSide.esRight,p?B.LeftBound.Next===B.RightBound?B.LeftBound.WindDelta=-1:B.LeftBound.WindDelta=1:B.LeftBound.WindDelta=0,B.RightBound.WindDelta=-B.LeftBound.WindDelta,L=this.ProcessBound(B.LeftBound,J),L.OutIdx===s.ClipperBase.Skip&&(L=this.ProcessBound(L,J));var dt=this.ProcessBound(B.RightBound,!J);dt.OutIdx===s.ClipperBase.Skip&&(dt=this.ProcessBound(dt,!J)),B.LeftBound.OutIdx===s.ClipperBase.Skip?B.LeftBound=null:B.RightBound.OutIdx===s.ClipperBase.Skip&&(B.RightBound=null),this.InsertLocalMinima(B),J||(L=dt)}return!0},s.ClipperBase.prototype.AddPaths=function(l,u,p){for(var O=!1,C=0,b=l.length;C<b;++C)this.AddPath(l[C],u,p)&&(O=!0);return O},s.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(l,u,p){return s.IntPoint.op_Equality(l,p)||s.IntPoint.op_Equality(l,u)||s.IntPoint.op_Equality(p,u)?!1:l.X!==p.X?u.X>l.X==u.X<p.X:u.Y>l.Y==u.Y<p.Y},s.ClipperBase.prototype.RemoveEdge=function(l){l.Prev.Next=l.Next,l.Next.Prev=l.Prev;var u=l.Next;return l.Prev=null,u},s.ClipperBase.prototype.SetDx=function(l){l.Delta.X=l.Top.X-l.Bot.X,l.Delta.Y=l.Top.Y-l.Bot.Y,l.Delta.Y===0?l.Dx=s.ClipperBase.horizontal:l.Dx=l.Delta.X/l.Delta.Y},s.ClipperBase.prototype.InsertLocalMinima=function(l){if(this.m_MinimaList===null)this.m_MinimaList=l;else if(l.Y>=this.m_MinimaList.Y)l.Next=this.m_MinimaList,this.m_MinimaList=l;else{for(var u=this.m_MinimaList;u.Next!==null&&l.Y<u.Next.Y;)u=u.Next;l.Next=u.Next,u.Next=l}},s.ClipperBase.prototype.PopLocalMinima=function(l,u){return u.v=this.m_CurrentLM,this.m_CurrentLM!==null&&this.m_CurrentLM.Y===l?(this.m_CurrentLM=this.m_CurrentLM.Next,!0):!1},s.ClipperBase.prototype.ReverseHorizontal=function(l){var u=l.Top.X;l.Top.X=l.Bot.X,l.Bot.X=u,s.use_xyz&&(u=l.Top.Z,l.Top.Z=l.Bot.Z,l.Bot.Z=u)},s.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,this.m_CurrentLM!==null){this.m_Scanbeam=null;for(var l=this.m_MinimaList;l!==null;){this.InsertScanbeam(l.Y);var u=l.LeftBound;u!==null&&(u.Curr.X=u.Bot.X,u.Curr.Y=u.Bot.Y,s.use_xyz&&(u.Curr.Z=u.Bot.Z),u.OutIdx=s.ClipperBase.Unassigned),u=l.RightBound,u!==null&&(u.Curr.X=u.Bot.X,u.Curr.Y=u.Bot.Y,s.use_xyz&&(u.Curr.Z=u.Bot.Z),u.OutIdx=s.ClipperBase.Unassigned),l=l.Next}this.m_ActiveEdges=null}},s.ClipperBase.prototype.InsertScanbeam=function(l){if(this.m_Scanbeam===null)this.m_Scanbeam=new s.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=l;else if(l>this.m_Scanbeam.Y){var u=new s.Scanbeam;u.Y=l,u.Next=this.m_Scanbeam,this.m_Scanbeam=u}else{for(var p=this.m_Scanbeam;p.Next!==null&&l<=p.Next.Y;)p=p.Next;if(l===p.Y)return;var O=new s.Scanbeam;O.Y=l,O.Next=p.Next,p.Next=O}},s.ClipperBase.prototype.PopScanbeam=function(l){return this.m_Scanbeam===null?(l.v=0,!1):(l.v=this.m_Scanbeam.Y,this.m_Scanbeam=this.m_Scanbeam.Next,!0)},s.ClipperBase.prototype.LocalMinimaPending=function(){return this.m_CurrentLM!==null},s.ClipperBase.prototype.CreateOutRec=function(){var l=new s.OutRec;return l.Idx=s.ClipperBase.Unassigned,l.IsHole=!1,l.IsOpen=!1,l.FirstLeft=null,l.Pts=null,l.BottomPt=null,l.PolyNode=null,this.m_PolyOuts.push(l),l.Idx=this.m_PolyOuts.length-1,l},s.ClipperBase.prototype.DisposeOutRec=function(l){var u=this.m_PolyOuts[l];u.Pts=null,u=null,this.m_PolyOuts[l]=null},s.ClipperBase.prototype.UpdateEdgeIntoAEL=function(l){l.NextInLML===null&&s.Error("UpdateEdgeIntoAEL: invalid call");var u=l.PrevInAEL,p=l.NextInAEL;return l.NextInLML.OutIdx=l.OutIdx,u!==null?u.NextInAEL=l.NextInLML:this.m_ActiveEdges=l.NextInLML,p!==null&&(p.PrevInAEL=l.NextInLML),l.NextInLML.Side=l.Side,l.NextInLML.WindDelta=l.WindDelta,l.NextInLML.WindCnt=l.WindCnt,l.NextInLML.WindCnt2=l.WindCnt2,l=l.NextInLML,l.Curr.X=l.Bot.X,l.Curr.Y=l.Bot.Y,l.PrevInAEL=u,l.NextInAEL=p,s.ClipperBase.IsHorizontal(l)||this.InsertScanbeam(l.Top.Y),l},s.ClipperBase.prototype.SwapPositionsInAEL=function(l,u){if(!(l.NextInAEL===l.PrevInAEL||u.NextInAEL===u.PrevInAEL)){if(l.NextInAEL===u){var p=u.NextInAEL;p!==null&&(p.PrevInAEL=l);var O=l.PrevInAEL;O!==null&&(O.NextInAEL=u),u.PrevInAEL=O,u.NextInAEL=l,l.PrevInAEL=u,l.NextInAEL=p}else if(u.NextInAEL===l){var C=l.NextInAEL;C!==null&&(C.PrevInAEL=u);var b=u.PrevInAEL;b!==null&&(b.NextInAEL=l),l.PrevInAEL=b,l.NextInAEL=u,u.PrevInAEL=l,u.NextInAEL=C}else{var E=l.NextInAEL,A=l.PrevInAEL;l.NextInAEL=u.NextInAEL,l.NextInAEL!==null&&(l.NextInAEL.PrevInAEL=l),l.PrevInAEL=u.PrevInAEL,l.PrevInAEL!==null&&(l.PrevInAEL.NextInAEL=l),u.NextInAEL=E,u.NextInAEL!==null&&(u.NextInAEL.PrevInAEL=u),u.PrevInAEL=A,u.PrevInAEL!==null&&(u.PrevInAEL.NextInAEL=u)}l.PrevInAEL===null?this.m_ActiveEdges=l:u.PrevInAEL===null&&(this.m_ActiveEdges=u)}},s.ClipperBase.prototype.DeleteFromAEL=function(l){var u=l.PrevInAEL,p=l.NextInAEL;u===null&&p===null&&l!==this.m_ActiveEdges||(u!==null?u.NextInAEL=p:this.m_ActiveEdges=p,p!==null&&(p.PrevInAEL=u),l.NextInAEL=null,l.PrevInAEL=null)},s.Clipper=function(l){typeof l>"u"&&(l=0),this.m_PolyOuts=null,this.m_ClipType=s.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=s.PolyFillType.pftEvenOdd,this.m_SubjFillType=s.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,s.ClipperBase.call(this),this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=s.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=(1&l)!==0,this.StrictlySimple=(2&l)!==0,this.PreserveCollinear=(4&l)!==0,s.use_xyz&&(this.ZFillFunction=null)},s.Clipper.ioReverseSolution=1,s.Clipper.ioStrictlySimple=2,s.Clipper.ioPreserveCollinear=4,s.Clipper.prototype.Clear=function(){this.m_edges.length!==0&&(this.DisposeAllPolyPts(),s.ClipperBase.prototype.Clear.call(this))},s.Clipper.prototype.InsertMaxima=function(l){var u=new s.Maxima;if(u.X=l,this.m_Maxima===null)this.m_Maxima=u,this.m_Maxima.Next=null,this.m_Maxima.Prev=null;else if(l<this.m_Maxima.X)u.Next=this.m_Maxima,u.Prev=null,this.m_Maxima=u;else{for(var p=this.m_Maxima;p.Next!==null&&l>=p.Next.X;)p=p.Next;if(l===p.X)return;u.Next=p.Next,u.Prev=p,p.Next!==null&&(p.Next.Prev=u),p.Next=u}},s.Clipper.prototype.Execute=function(){var l=arguments,u=l.length,p=l[1]instanceof s.PolyTree;if(u===4&&!p){var O=l[0],C=l[1],b=l[2],E=l[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&s.Error("Error: PolyTree struct is needed for open path clipping."),this.m_ExecuteLocked=!0,s.Clear(C),this.m_SubjFillType=b,this.m_ClipFillType=E,this.m_ClipType=O,this.m_UsingPolyTree=!1;try{var A=this.ExecuteInternal();A&&this.BuildResult(C)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return A}else if(u===4&&p){var O=l[0],k=l[1],b=l[2],E=l[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=b,this.m_ClipFillType=E,this.m_ClipType=O,this.m_UsingPolyTree=!0;try{var A=this.ExecuteInternal();A&&this.BuildResult2(k)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return A}else if(u===2&&!p){var O=l[0],C=l[1];return this.Execute(O,C,s.PolyFillType.pftEvenOdd,s.PolyFillType.pftEvenOdd)}else if(u===2&&p){var O=l[0],k=l[1];return this.Execute(O,k,s.PolyFillType.pftEvenOdd,s.PolyFillType.pftEvenOdd)}},s.Clipper.prototype.FixHoleLinkage=function(l){if(!(l.FirstLeft===null||l.IsHole!==l.FirstLeft.IsHole&&l.FirstLeft.Pts!==null)){for(var u=l.FirstLeft;u!==null&&(u.IsHole===l.IsHole||u.Pts===null);)u=u.FirstLeft;l.FirstLeft=u}},s.Clipper.prototype.ExecuteInternal=function(){try{this.Reset(),this.m_SortedEdges=null,this.m_Maxima=null;var l={},u={};if(!this.PopScanbeam(l))return!1;for(this.InsertLocalMinimaIntoAEL(l.v);this.PopScanbeam(u)||this.LocalMinimaPending();){if(this.ProcessHorizontals(),this.m_GhostJoins.length=0,!this.ProcessIntersections(u.v))return!1;this.ProcessEdgesAtTopOfScanbeam(u.v),l.v=u.v,this.InsertLocalMinimaIntoAEL(l.v)}var p,O,C;for(O=0,C=this.m_PolyOuts.length;O<C;O++)p=this.m_PolyOuts[O],!(p.Pts===null||p.IsOpen)&&(p.IsHole^this.ReverseSolution)==this.Area$1(p)>0&&this.ReversePolyPtLinks(p.Pts);for(this.JoinCommonEdges(),O=0,C=this.m_PolyOuts.length;O<C;O++)p=this.m_PolyOuts[O],p.Pts!==null&&(p.IsOpen?this.FixupOutPolyline(p):this.FixupOutPolygon(p));return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{this.m_Joins.length=0,this.m_GhostJoins.length=0}},s.Clipper.prototype.DisposeAllPolyPts=function(){for(var l=0,u=this.m_PolyOuts.length;l<u;++l)this.DisposeOutRec(l);s.Clear(this.m_PolyOuts)},s.Clipper.prototype.AddJoin=function(l,u,p){var O=new s.Join;O.OutPt1=l,O.OutPt2=u,O.OffPt.X=p.X,O.OffPt.Y=p.Y,s.use_xyz&&(O.OffPt.Z=p.Z),this.m_Joins.push(O)},s.Clipper.prototype.AddGhostJoin=function(l,u){var p=new s.Join;p.OutPt1=l,p.OffPt.X=u.X,p.OffPt.Y=u.Y,s.use_xyz&&(p.OffPt.Z=u.Z),this.m_GhostJoins.push(p)},s.Clipper.prototype.SetZ=function(l,u,p){if(this.ZFillFunction!==null){if(l.Z!==0||this.ZFillFunction===null)return;s.IntPoint.op_Equality(l,u.Bot)?l.Z=u.Bot.Z:s.IntPoint.op_Equality(l,u.Top)?l.Z=u.Top.Z:s.IntPoint.op_Equality(l,p.Bot)?l.Z=p.Bot.Z:s.IntPoint.op_Equality(l,p.Top)?l.Z=p.Top.Z:this.ZFillFunction(u.Bot,u.Top,p.Bot,p.Top,l)}},s.Clipper.prototype.InsertLocalMinimaIntoAEL=function(l){for(var u={},p,O;this.PopLocalMinima(l,u);){p=u.v.LeftBound,O=u.v.RightBound;var C=null;if(p===null?(this.InsertEdgeIntoAEL(O,null),this.SetWindingCount(O),this.IsContributing(O)&&(C=this.AddOutPt(O,O.Bot))):O===null?(this.InsertEdgeIntoAEL(p,null),this.SetWindingCount(p),this.IsContributing(p)&&(C=this.AddOutPt(p,p.Bot)),this.InsertScanbeam(p.Top.Y)):(this.InsertEdgeIntoAEL(p,null),this.InsertEdgeIntoAEL(O,p),this.SetWindingCount(p),O.WindCnt=p.WindCnt,O.WindCnt2=p.WindCnt2,this.IsContributing(p)&&(C=this.AddLocalMinPoly(p,O,p.Bot)),this.InsertScanbeam(p.Top.Y)),O!==null&&(s.ClipperBase.IsHorizontal(O)?(O.NextInLML!==null&&this.InsertScanbeam(O.NextInLML.Top.Y),this.AddEdgeToSEL(O)):this.InsertScanbeam(O.Top.Y)),!(p===null||O===null)){if(C!==null&&s.ClipperBase.IsHorizontal(O)&&this.m_GhostJoins.length>0&&O.WindDelta!==0)for(var b=0,E=this.m_GhostJoins.length;b<E;b++){var A=this.m_GhostJoins[b];this.HorzSegmentsOverlap(A.OutPt1.Pt.X,A.OffPt.X,O.Bot.X,O.Top.X)&&this.AddJoin(A.OutPt1,C,A.OffPt)}if(p.OutIdx>=0&&p.PrevInAEL!==null&&p.PrevInAEL.Curr.X===p.Bot.X&&p.PrevInAEL.OutIdx>=0&&s.ClipperBase.SlopesEqual5(p.PrevInAEL.Curr,p.PrevInAEL.Top,p.Curr,p.Top,this.m_UseFullRange)&&p.WindDelta!==0&&p.PrevInAEL.WindDelta!==0){var k=this.AddOutPt(p.PrevInAEL,p.Bot);this.AddJoin(C,k,p.Top)}if(p.NextInAEL!==O){if(O.OutIdx>=0&&O.PrevInAEL.OutIdx>=0&&s.ClipperBase.SlopesEqual5(O.PrevInAEL.Curr,O.PrevInAEL.Top,O.Curr,O.Top,this.m_UseFullRange)&&O.WindDelta!==0&&O.PrevInAEL.WindDelta!==0){var k=this.AddOutPt(O.PrevInAEL,O.Bot);this.AddJoin(C,k,O.Top)}var L=p.NextInAEL;if(L!==null)for(;L!==O;)this.IntersectEdges(O,L,p.Curr),L=L.NextInAEL}}}},s.Clipper.prototype.InsertEdgeIntoAEL=function(l,u){if(this.m_ActiveEdges===null)l.PrevInAEL=null,l.NextInAEL=null,this.m_ActiveEdges=l;else if(u===null&&this.E2InsertsBeforeE1(this.m_ActiveEdges,l))l.PrevInAEL=null,l.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=l,this.m_ActiveEdges=l;else{for(u===null&&(u=this.m_ActiveEdges);u.NextInAEL!==null&&!this.E2InsertsBeforeE1(u.NextInAEL,l);)u=u.NextInAEL;l.NextInAEL=u.NextInAEL,u.NextInAEL!==null&&(u.NextInAEL.PrevInAEL=l),l.PrevInAEL=u,u.NextInAEL=l}},s.Clipper.prototype.E2InsertsBeforeE1=function(l,u){return u.Curr.X===l.Curr.X?u.Top.Y>l.Top.Y?u.Top.X<s.Clipper.TopX(l,u.Top.Y):l.Top.X>s.Clipper.TopX(u,l.Top.Y):u.Curr.X<l.Curr.X},s.Clipper.prototype.IsEvenOddFillType=function(l){return l.PolyTyp===s.PolyType.ptSubject?this.m_SubjFillType===s.PolyFillType.pftEvenOdd:this.m_ClipFillType===s.PolyFillType.pftEvenOdd},s.Clipper.prototype.IsEvenOddAltFillType=function(l){return l.PolyTyp===s.PolyType.ptSubject?this.m_ClipFillType===s.PolyFillType.pftEvenOdd:this.m_SubjFillType===s.PolyFillType.pftEvenOdd},s.Clipper.prototype.IsContributing=function(l){var u,p;switch(l.PolyTyp===s.PolyType.ptSubject?(u=this.m_SubjFillType,p=this.m_ClipFillType):(u=this.m_ClipFillType,p=this.m_SubjFillType),u){case s.PolyFillType.pftEvenOdd:if(l.WindDelta===0&&l.WindCnt!==1)return!1;break;case s.PolyFillType.pftNonZero:if(Math.abs(l.WindCnt)!==1)return!1;break;case s.PolyFillType.pftPositive:if(l.WindCnt!==1)return!1;break;default:if(l.WindCnt!==-1)return!1;break}switch(this.m_ClipType){case s.ClipType.ctIntersection:switch(p){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return l.WindCnt2!==0;case s.PolyFillType.pftPositive:return l.WindCnt2>0;default:return l.WindCnt2<0}case s.ClipType.ctUnion:switch(p){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return l.WindCnt2===0;case s.PolyFillType.pftPositive:return l.WindCnt2<=0;default:return l.WindCnt2>=0}case s.ClipType.ctDifference:if(l.PolyTyp===s.PolyType.ptSubject)switch(p){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return l.WindCnt2===0;case s.PolyFillType.pftPositive:return l.WindCnt2<=0;default:return l.WindCnt2>=0}else switch(p){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return l.WindCnt2!==0;case s.PolyFillType.pftPositive:return l.WindCnt2>0;default:return l.WindCnt2<0}case s.ClipType.ctXor:if(l.WindDelta===0)switch(p){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return l.WindCnt2===0;case s.PolyFillType.pftPositive:return l.WindCnt2<=0;default:return l.WindCnt2>=0}else return!0}return!0},s.Clipper.prototype.SetWindingCount=function(l){for(var u=l.PrevInAEL;u!==null&&(u.PolyTyp!==l.PolyTyp||u.WindDelta===0);)u=u.PrevInAEL;if(u===null){var p=l.PolyTyp===s.PolyType.ptSubject?this.m_SubjFillType:this.m_ClipFillType;l.WindDelta===0?l.WindCnt=p===s.PolyFillType.pftNegative?-1:1:l.WindCnt=l.WindDelta,l.WindCnt2=0,u=this.m_ActiveEdges}else if(l.WindDelta===0&&this.m_ClipType!==s.ClipType.ctUnion)l.WindCnt=1,l.WindCnt2=u.WindCnt2,u=u.NextInAEL;else if(this.IsEvenOddFillType(l)){if(l.WindDelta===0){for(var O=!0,C=u.PrevInAEL;C!==null;)C.PolyTyp===u.PolyTyp&&C.WindDelta!==0&&(O=!O),C=C.PrevInAEL;l.WindCnt=O?0:1}else l.WindCnt=l.WindDelta;l.WindCnt2=u.WindCnt2,u=u.NextInAEL}else u.WindCnt*u.WindDelta<0?Math.abs(u.WindCnt)>1?u.WindDelta*l.WindDelta<0?l.WindCnt=u.WindCnt:l.WindCnt=u.WindCnt+l.WindDelta:l.WindCnt=l.WindDelta===0?1:l.WindDelta:l.WindDelta===0?l.WindCnt=u.WindCnt<0?u.WindCnt-1:u.WindCnt+1:u.WindDelta*l.WindDelta<0?l.WindCnt=u.WindCnt:l.WindCnt=u.WindCnt+l.WindDelta,l.WindCnt2=u.WindCnt2,u=u.NextInAEL;if(this.IsEvenOddAltFillType(l))for(;u!==l;)u.WindDelta!==0&&(l.WindCnt2=l.WindCnt2===0?1:0),u=u.NextInAEL;else for(;u!==l;)l.WindCnt2+=u.WindDelta,u=u.NextInAEL},s.Clipper.prototype.AddEdgeToSEL=function(l){this.m_SortedEdges===null?(this.m_SortedEdges=l,l.PrevInSEL=null,l.NextInSEL=null):(l.NextInSEL=this.m_SortedEdges,l.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=l,this.m_SortedEdges=l)},s.Clipper.prototype.PopEdgeFromSEL=function(l){if(l.v=this.m_SortedEdges,l.v===null)return!1;var u=l.v;return this.m_SortedEdges=l.v.NextInSEL,this.m_SortedEdges!==null&&(this.m_SortedEdges.PrevInSEL=null),u.NextInSEL=null,u.PrevInSEL=null,!0},s.Clipper.prototype.CopyAELToSEL=function(){var l=this.m_ActiveEdges;for(this.m_SortedEdges=l;l!==null;)l.PrevInSEL=l.PrevInAEL,l.NextInSEL=l.NextInAEL,l=l.NextInAEL},s.Clipper.prototype.SwapPositionsInSEL=function(l,u){if(!(l.NextInSEL===null&&l.PrevInSEL===null)&&!(u.NextInSEL===null&&u.PrevInSEL===null)){if(l.NextInSEL===u){var p=u.NextInSEL;p!==null&&(p.PrevInSEL=l);var O=l.PrevInSEL;O!==null&&(O.NextInSEL=u),u.PrevInSEL=O,u.NextInSEL=l,l.PrevInSEL=u,l.NextInSEL=p}else if(u.NextInSEL===l){var p=l.NextInSEL;p!==null&&(p.PrevInSEL=u);var O=u.PrevInSEL;O!==null&&(O.NextInSEL=l),l.PrevInSEL=O,l.NextInSEL=u,u.PrevInSEL=l,u.NextInSEL=p}else{var p=l.NextInSEL,O=l.PrevInSEL;l.NextInSEL=u.NextInSEL,l.NextInSEL!==null&&(l.NextInSEL.PrevInSEL=l),l.PrevInSEL=u.PrevInSEL,l.PrevInSEL!==null&&(l.PrevInSEL.NextInSEL=l),u.NextInSEL=p,u.NextInSEL!==null&&(u.NextInSEL.PrevInSEL=u),u.PrevInSEL=O,u.PrevInSEL!==null&&(u.PrevInSEL.NextInSEL=u)}l.PrevInSEL===null?this.m_SortedEdges=l:u.PrevInSEL===null&&(this.m_SortedEdges=u)}},s.Clipper.prototype.AddLocalMaxPoly=function(l,u,p){this.AddOutPt(l,p),u.WindDelta===0&&this.AddOutPt(u,p),l.OutIdx===u.OutIdx?(l.OutIdx=-1,u.OutIdx=-1):l.OutIdx<u.OutIdx?this.AppendPolygon(l,u):this.AppendPolygon(u,l)},s.Clipper.prototype.AddLocalMinPoly=function(l,u,p){var O,C,b;if(s.ClipperBase.IsHorizontal(u)||l.Dx>u.Dx?(O=this.AddOutPt(l,p),u.OutIdx=l.OutIdx,l.Side=s.EdgeSide.esLeft,u.Side=s.EdgeSide.esRight,C=l,C.PrevInAEL===u?b=u.PrevInAEL:b=C.PrevInAEL):(O=this.AddOutPt(u,p),l.OutIdx=u.OutIdx,l.Side=s.EdgeSide.esRight,u.Side=s.EdgeSide.esLeft,C=u,C.PrevInAEL===l?b=l.PrevInAEL:b=C.PrevInAEL),b!==null&&b.OutIdx>=0&&b.Top.Y<p.Y&&C.Top.Y<p.Y){var E=s.Clipper.TopX(b,p.Y),A=s.Clipper.TopX(C,p.Y);if(E===A&&C.WindDelta!==0&&b.WindDelta!==0&&s.ClipperBase.SlopesEqual5(new s.IntPoint2(E,p.Y),b.Top,new s.IntPoint2(A,p.Y),C.Top,this.m_UseFullRange)){var k=this.AddOutPt(b,p);this.AddJoin(O,k,C.Top)}}return O},s.Clipper.prototype.AddOutPt=function(l,u){if(l.OutIdx<0){var p=this.CreateOutRec();p.IsOpen=l.WindDelta===0;var O=new s.OutPt;return p.Pts=O,O.Idx=p.Idx,O.Pt.X=u.X,O.Pt.Y=u.Y,s.use_xyz&&(O.Pt.Z=u.Z),O.Next=O,O.Prev=O,p.IsOpen||this.SetHoleState(l,p),l.OutIdx=p.Idx,O}else{var p=this.m_PolyOuts[l.OutIdx],C=p.Pts,b=l.Side===s.EdgeSide.esLeft;if(b&&s.IntPoint.op_Equality(u,C.Pt))return C;if(!b&&s.IntPoint.op_Equality(u,C.Prev.Pt))return C.Prev;var O=new s.OutPt;return O.Idx=p.Idx,O.Pt.X=u.X,O.Pt.Y=u.Y,s.use_xyz&&(O.Pt.Z=u.Z),O.Next=C,O.Prev=C.Prev,O.Prev.Next=O,C.Prev=O,b&&(p.Pts=O),O}},s.Clipper.prototype.GetLastOutPt=function(l){var u=this.m_PolyOuts[l.OutIdx];return l.Side===s.EdgeSide.esLeft?u.Pts:u.Pts.Prev},s.Clipper.prototype.SwapPoints=function(l,u){var p=new s.IntPoint1(l.Value);l.Value.X=u.Value.X,l.Value.Y=u.Value.Y,s.use_xyz&&(l.Value.Z=u.Value.Z),u.Value.X=p.X,u.Value.Y=p.Y,s.use_xyz&&(u.Value.Z=p.Z)},s.Clipper.prototype.HorzSegmentsOverlap=function(l,u,p,O){var C;return l>u&&(C=l,l=u,u=C),p>O&&(C=p,p=O,O=C),l<O&&p<u},s.Clipper.prototype.SetHoleState=function(l,u){for(var p=l.PrevInAEL,O=null;p!==null;)p.OutIdx>=0&&p.WindDelta!==0&&(O===null?O=p:O.OutIdx===p.OutIdx&&(O=null)),p=p.PrevInAEL;O===null?(u.FirstLeft=null,u.IsHole=!1):(u.FirstLeft=this.m_PolyOuts[O.OutIdx],u.IsHole=!u.FirstLeft.IsHole)},s.Clipper.prototype.GetDx=function(l,u){return l.Y===u.Y?s.ClipperBase.horizontal:(u.X-l.X)/(u.Y-l.Y)},s.Clipper.prototype.FirstIsBottomPt=function(l,u){for(var p=l.Prev;s.IntPoint.op_Equality(p.Pt,l.Pt)&&p!==l;)p=p.Prev;var O=Math.abs(this.GetDx(l.Pt,p.Pt));for(p=l.Next;s.IntPoint.op_Equality(p.Pt,l.Pt)&&p!==l;)p=p.Next;var C=Math.abs(this.GetDx(l.Pt,p.Pt));for(p=u.Prev;s.IntPoint.op_Equality(p.Pt,u.Pt)&&p!==u;)p=p.Prev;var b=Math.abs(this.GetDx(u.Pt,p.Pt));for(p=u.Next;s.IntPoint.op_Equality(p.Pt,u.Pt)&&p!==u;)p=p.Next;var E=Math.abs(this.GetDx(u.Pt,p.Pt));return Math.max(O,C)===Math.max(b,E)&&Math.min(O,C)===Math.min(b,E)?this.Area(l)>0:O>=b&&O>=E||C>=b&&C>=E},s.Clipper.prototype.GetBottomPt=function(l){for(var u=null,p=l.Next;p!==l;)p.Pt.Y>l.Pt.Y?(l=p,u=null):p.Pt.Y===l.Pt.Y&&p.Pt.X<=l.Pt.X&&(p.Pt.X<l.Pt.X?(u=null,l=p):p.Next!==l&&p.Prev!==l&&(u=p)),p=p.Next;if(u!==null)for(;u!==p;)for(this.FirstIsBottomPt(p,u)||(l=u),u=u.Next;s.IntPoint.op_Inequality(u.Pt,l.Pt);)u=u.Next;return l},s.Clipper.prototype.GetLowermostRec=function(l,u){l.BottomPt===null&&(l.BottomPt=this.GetBottomPt(l.Pts)),u.BottomPt===null&&(u.BottomPt=this.GetBottomPt(u.Pts));var p=l.BottomPt,O=u.BottomPt;return p.Pt.Y>O.Pt.Y?l:p.Pt.Y<O.Pt.Y?u:p.Pt.X<O.Pt.X?l:p.Pt.X>O.Pt.X||p.Next===p?u:O.Next===O||this.FirstIsBottomPt(p,O)?l:u},s.Clipper.prototype.OutRec1RightOfOutRec2=function(l,u){do if(l=l.FirstLeft,l===u)return!0;while(l!==null);return!1},s.Clipper.prototype.GetOutRec=function(l){for(var u=this.m_PolyOuts[l];u!==this.m_PolyOuts[u.Idx];)u=this.m_PolyOuts[u.Idx];return u},s.Clipper.prototype.AppendPolygon=function(l,u){var p=this.m_PolyOuts[l.OutIdx],O=this.m_PolyOuts[u.OutIdx],C;this.OutRec1RightOfOutRec2(p,O)?C=O:this.OutRec1RightOfOutRec2(O,p)?C=p:C=this.GetLowermostRec(p,O);var b=p.Pts,E=b.Prev,A=O.Pts,k=A.Prev;l.Side===s.EdgeSide.esLeft?u.Side===s.EdgeSide.esLeft?(this.ReversePolyPtLinks(A),A.Next=b,b.Prev=A,E.Next=k,k.Prev=E,p.Pts=k):(k.Next=b,b.Prev=k,A.Prev=E,E.Next=A,p.Pts=A):u.Side===s.EdgeSide.esRight?(this.ReversePolyPtLinks(A),E.Next=k,k.Prev=E,A.Next=b,b.Prev=A):(E.Next=A,A.Prev=E,b.Prev=k,k.Next=b),p.BottomPt=null,C===O&&(O.FirstLeft!==p&&(p.FirstLeft=O.FirstLeft),p.IsHole=O.IsHole),O.Pts=null,O.BottomPt=null,O.FirstLeft=p;var L=l.OutIdx,Z=u.OutIdx;l.OutIdx=-1,u.OutIdx=-1;for(var B=this.m_ActiveEdges;B!==null;){if(B.OutIdx===Z){B.OutIdx=L,B.Side=l.Side;break}B=B.NextInAEL}O.Idx=p.Idx},s.Clipper.prototype.ReversePolyPtLinks=function(l){if(l!==null){var u,p;u=l;do p=u.Next,u.Next=u.Prev,u.Prev=p,u=p;while(u!==l)}},s.Clipper.SwapSides=function(l,u){var p=l.Side;l.Side=u.Side,u.Side=p},s.Clipper.SwapPolyIndexes=function(l,u){var p=l.OutIdx;l.OutIdx=u.OutIdx,u.OutIdx=p},s.Clipper.prototype.IntersectEdges=function(l,u,p){var O=l.OutIdx>=0,C=u.OutIdx>=0;if(s.use_xyz&&this.SetZ(p,l,u),s.use_lines&&(l.WindDelta===0||u.WindDelta===0)){if(l.WindDelta===0&&u.WindDelta===0)return;l.PolyTyp===u.PolyTyp&&l.WindDelta!==u.WindDelta&&this.m_ClipType===s.ClipType.ctUnion?l.WindDelta===0?C&&(this.AddOutPt(l,p),O&&(l.OutIdx=-1)):O&&(this.AddOutPt(u,p),C&&(u.OutIdx=-1)):l.PolyTyp!==u.PolyTyp&&(l.WindDelta===0&&Math.abs(u.WindCnt)===1&&(this.m_ClipType!==s.ClipType.ctUnion||u.WindCnt2===0)?(this.AddOutPt(l,p),O&&(l.OutIdx=-1)):u.WindDelta===0&&Math.abs(l.WindCnt)===1&&(this.m_ClipType!==s.ClipType.ctUnion||l.WindCnt2===0)&&(this.AddOutPt(u,p),C&&(u.OutIdx=-1)));return}if(l.PolyTyp===u.PolyTyp)if(this.IsEvenOddFillType(l)){var b=l.WindCnt;l.WindCnt=u.WindCnt,u.WindCnt=b}else l.WindCnt+u.WindDelta===0?l.WindCnt=-l.WindCnt:l.WindCnt+=u.WindDelta,u.WindCnt-l.WindDelta===0?u.WindCnt=-u.WindCnt:u.WindCnt-=l.WindDelta;else this.IsEvenOddFillType(u)?l.WindCnt2=l.WindCnt2===0?1:0:l.WindCnt2+=u.WindDelta,this.IsEvenOddFillType(l)?u.WindCnt2=u.WindCnt2===0?1:0:u.WindCnt2-=l.WindDelta;var E,A,k,L;l.PolyTyp===s.PolyType.ptSubject?(E=this.m_SubjFillType,k=this.m_ClipFillType):(E=this.m_ClipFillType,k=this.m_SubjFillType),u.PolyTyp===s.PolyType.ptSubject?(A=this.m_SubjFillType,L=this.m_ClipFillType):(A=this.m_ClipFillType,L=this.m_SubjFillType);var Z,B;switch(E){case s.PolyFillType.pftPositive:Z=l.WindCnt;break;case s.PolyFillType.pftNegative:Z=-l.WindCnt;break;default:Z=Math.abs(l.WindCnt);break}switch(A){case s.PolyFillType.pftPositive:B=u.WindCnt;break;case s.PolyFillType.pftNegative:B=-u.WindCnt;break;default:B=Math.abs(u.WindCnt);break}if(O&&C)Z!==0&&Z!==1||B!==0&&B!==1||l.PolyTyp!==u.PolyTyp&&this.m_ClipType!==s.ClipType.ctXor?this.AddLocalMaxPoly(l,u,p):(this.AddOutPt(l,p),this.AddOutPt(u,p),s.Clipper.SwapSides(l,u),s.Clipper.SwapPolyIndexes(l,u));else if(O)(B===0||B===1)&&(this.AddOutPt(l,p),s.Clipper.SwapSides(l,u),s.Clipper.SwapPolyIndexes(l,u));else if(C)(Z===0||Z===1)&&(this.AddOutPt(u,p),s.Clipper.SwapSides(l,u),s.Clipper.SwapPolyIndexes(l,u));else if((Z===0||Z===1)&&(B===0||B===1)){var J,ot;switch(k){case s.PolyFillType.pftPositive:J=l.WindCnt2;break;case s.PolyFillType.pftNegative:J=-l.WindCnt2;break;default:J=Math.abs(l.WindCnt2);break}switch(L){case s.PolyFillType.pftPositive:ot=u.WindCnt2;break;case s.PolyFillType.pftNegative:ot=-u.WindCnt2;break;default:ot=Math.abs(u.WindCnt2);break}if(l.PolyTyp!==u.PolyTyp)this.AddLocalMinPoly(l,u,p);else if(Z===1&&B===1)switch(this.m_ClipType){case s.ClipType.ctIntersection:J>0&&ot>0&&this.AddLocalMinPoly(l,u,p);break;case s.ClipType.ctUnion:J<=0&&ot<=0&&this.AddLocalMinPoly(l,u,p);break;case s.ClipType.ctDifference:(l.PolyTyp===s.PolyType.ptClip&&J>0&&ot>0||l.PolyTyp===s.PolyType.ptSubject&&J<=0&&ot<=0)&&this.AddLocalMinPoly(l,u,p);break;case s.ClipType.ctXor:this.AddLocalMinPoly(l,u,p);break}else s.Clipper.SwapSides(l,u)}},s.Clipper.prototype.DeleteFromSEL=function(l){var u=l.PrevInSEL,p=l.NextInSEL;u===null&&p===null&&l!==this.m_SortedEdges||(u!==null?u.NextInSEL=p:this.m_SortedEdges=p,p!==null&&(p.PrevInSEL=u),l.NextInSEL=null,l.PrevInSEL=null)},s.Clipper.prototype.ProcessHorizontals=function(){for(var l={};this.PopEdgeFromSEL(l);)this.ProcessHorizontal(l.v)},s.Clipper.prototype.GetHorzDirection=function(l,u){l.Bot.X<l.Top.X?(u.Left=l.Bot.X,u.Right=l.Top.X,u.Dir=s.Direction.dLeftToRight):(u.Left=l.Top.X,u.Right=l.Bot.X,u.Dir=s.Direction.dRightToLeft)},s.Clipper.prototype.ProcessHorizontal=function(l){var u={Dir:null,Left:null,Right:null};this.GetHorzDirection(l,u);for(var p=u.Dir,O=u.Left,C=u.Right,b=l.WindDelta===0,E=l,A=null;E.NextInLML!==null&&s.ClipperBase.IsHorizontal(E.NextInLML);)E=E.NextInLML;E.NextInLML===null&&(A=this.GetMaximaPair(E));var k=this.m_Maxima;if(k!==null)if(p===s.Direction.dLeftToRight){for(;k!==null&&k.X<=l.Bot.X;)k=k.Next;k!==null&&k.X>=E.Top.X&&(k=null)}else{for(;k.Next!==null&&k.Next.X<l.Bot.X;)k=k.Next;k.X<=E.Top.X&&(k=null)}for(var L=null;;){for(var Z=l===E,B=this.GetNextInAEL(l,p);B!==null;){if(k!==null)if(p===s.Direction.dLeftToRight)for(;k!==null&&k.X<B.Curr.X;)l.OutIdx>=0&&!b&&this.AddOutPt(l,new s.IntPoint2(k.X,l.Bot.Y)),k=k.Next;else for(;k!==null&&k.X>B.Curr.X;)l.OutIdx>=0&&!b&&this.AddOutPt(l,new s.IntPoint2(k.X,l.Bot.Y)),k=k.Prev;if(p===s.Direction.dLeftToRight&&B.Curr.X>C||p===s.Direction.dRightToLeft&&B.Curr.X<O||B.Curr.X===l.Top.X&&l.NextInLML!==null&&B.Dx<l.NextInLML.Dx)break;if(l.OutIdx>=0&&!b){s.use_xyz&&(p===s.Direction.dLeftToRight?this.SetZ(B.Curr,l,B):this.SetZ(B.Curr,B,l)),L=this.AddOutPt(l,B.Curr);for(var J=this.m_SortedEdges;J!==null;){if(J.OutIdx>=0&&this.HorzSegmentsOverlap(l.Bot.X,l.Top.X,J.Bot.X,J.Top.X)){var ot=this.GetLastOutPt(J);this.AddJoin(ot,L,J.Top)}J=J.NextInSEL}this.AddGhostJoin(L,l.Bot)}if(B===A&&Z){l.OutIdx>=0&&this.AddLocalMaxPoly(l,A,l.Top),this.DeleteFromAEL(l),this.DeleteFromAEL(A);return}if(p===s.Direction.dLeftToRight){var dt=new s.IntPoint2(B.Curr.X,l.Curr.Y);this.IntersectEdges(l,B,dt)}else{var dt=new s.IntPoint2(B.Curr.X,l.Curr.Y);this.IntersectEdges(B,l,dt)}var mt=this.GetNextInAEL(B,p);this.SwapPositionsInAEL(l,B),B=mt}if(l.NextInLML===null||!s.ClipperBase.IsHorizontal(l.NextInLML))break;l=this.UpdateEdgeIntoAEL(l),l.OutIdx>=0&&this.AddOutPt(l,l.Bot),u={Dir:p,Left:O,Right:C},this.GetHorzDirection(l,u),p=u.Dir,O=u.Left,C=u.Right}if(l.OutIdx>=0&&L===null){L=this.GetLastOutPt(l);for(var J=this.m_SortedEdges;J!==null;){if(J.OutIdx>=0&&this.HorzSegmentsOverlap(l.Bot.X,l.Top.X,J.Bot.X,J.Top.X)){var ot=this.GetLastOutPt(J);this.AddJoin(ot,L,J.Top)}J=J.NextInSEL}this.AddGhostJoin(L,l.Top)}if(l.NextInLML!==null)if(l.OutIdx>=0){if(L=this.AddOutPt(l,l.Top),l=this.UpdateEdgeIntoAEL(l),l.WindDelta===0)return;var bt=l.PrevInAEL,mt=l.NextInAEL;if(bt!==null&&bt.Curr.X===l.Bot.X&&bt.Curr.Y===l.Bot.Y&&bt.WindDelta===0&&bt.OutIdx>=0&&bt.Curr.Y>bt.Top.Y&&s.ClipperBase.SlopesEqual3(l,bt,this.m_UseFullRange)){var ot=this.AddOutPt(bt,l.Bot);this.AddJoin(L,ot,l.Top)}else if(mt!==null&&mt.Curr.X===l.Bot.X&&mt.Curr.Y===l.Bot.Y&&mt.WindDelta!==0&&mt.OutIdx>=0&&mt.Curr.Y>mt.Top.Y&&s.ClipperBase.SlopesEqual3(l,mt,this.m_UseFullRange)){var ot=this.AddOutPt(mt,l.Bot);this.AddJoin(L,ot,l.Top)}}else l=this.UpdateEdgeIntoAEL(l);else l.OutIdx>=0&&this.AddOutPt(l,l.Top),this.DeleteFromAEL(l)},s.Clipper.prototype.GetNextInAEL=function(l,u){return u===s.Direction.dLeftToRight?l.NextInAEL:l.PrevInAEL},s.Clipper.prototype.IsMinima=function(l){return l!==null&&l.Prev.NextInLML!==l&&l.Next.NextInLML!==l},s.Clipper.prototype.IsMaxima=function(l,u){return l!==null&&l.Top.Y===u&&l.NextInLML===null},s.Clipper.prototype.IsIntermediate=function(l,u){return l.Top.Y===u&&l.NextInLML!==null},s.Clipper.prototype.GetMaximaPair=function(l){return s.IntPoint.op_Equality(l.Next.Top,l.Top)&&l.Next.NextInLML===null?l.Next:s.IntPoint.op_Equality(l.Prev.Top,l.Top)&&l.Prev.NextInLML===null?l.Prev:null},s.Clipper.prototype.GetMaximaPairEx=function(l){var u=this.GetMaximaPair(l);return u===null||u.OutIdx===s.ClipperBase.Skip||u.NextInAEL===u.PrevInAEL&&!s.ClipperBase.IsHorizontal(u)?null:u},s.Clipper.prototype.ProcessIntersections=function(l){if(this.m_ActiveEdges===null)return!0;try{if(this.BuildIntersectList(l),this.m_IntersectList.length===0)return!0;if(this.m_IntersectList.length===1||this.FixupIntersectionOrder())this.ProcessIntersectList();else return!1}catch{this.m_SortedEdges=null,this.m_IntersectList.length=0,s.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},s.Clipper.prototype.BuildIntersectList=function(l){if(this.m_ActiveEdges!==null){var u=this.m_ActiveEdges;for(this.m_SortedEdges=u;u!==null;)u.PrevInSEL=u.PrevInAEL,u.NextInSEL=u.NextInAEL,u.Curr.X=s.Clipper.TopX(u,l),u=u.NextInAEL;for(var p=!0;p&&this.m_SortedEdges!==null;){for(p=!1,u=this.m_SortedEdges;u.NextInSEL!==null;){var O=u.NextInSEL,C=new s.IntPoint0;if(u.Curr.X>O.Curr.X){this.IntersectPoint(u,O,C),C.Y<l&&(C=new s.IntPoint2(s.Clipper.TopX(u,l),l));var b=new s.IntersectNode;b.Edge1=u,b.Edge2=O,b.Pt.X=C.X,b.Pt.Y=C.Y,s.use_xyz&&(b.Pt.Z=C.Z),this.m_IntersectList.push(b),this.SwapPositionsInSEL(u,O),p=!0}else u=O}if(u.PrevInSEL!==null)u.PrevInSEL.NextInSEL=null;else break}this.m_SortedEdges=null}},s.Clipper.prototype.EdgesAdjacent=function(l){return l.Edge1.NextInSEL===l.Edge2||l.Edge1.PrevInSEL===l.Edge2},s.Clipper.IntersectNodeSort=function(l,u){return u.Pt.Y-l.Pt.Y},s.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var l=this.m_IntersectList.length,u=0;u<l;u++){if(!this.EdgesAdjacent(this.m_IntersectList[u])){for(var p=u+1;p<l&&!this.EdgesAdjacent(this.m_IntersectList[p]);)p++;if(p===l)return!1;var O=this.m_IntersectList[u];this.m_IntersectList[u]=this.m_IntersectList[p],this.m_IntersectList[p]=O}this.SwapPositionsInSEL(this.m_IntersectList[u].Edge1,this.m_IntersectList[u].Edge2)}return!0},s.Clipper.prototype.ProcessIntersectList=function(){for(var l=0,u=this.m_IntersectList.length;l<u;l++){var p=this.m_IntersectList[l];this.IntersectEdges(p.Edge1,p.Edge2,p.Pt),this.SwapPositionsInAEL(p.Edge1,p.Edge2)}this.m_IntersectList.length=0};var oS=function(l){return l<0?Math.ceil(l-.5):Math.round(l)},lS=function(l){return l<0?Math.ceil(l-.5):Math.floor(l+.5)},aS=function(l){return l<0?-Math.round(Math.abs(l)):Math.round(l)},hS=function(l){return l<0?(l-=.5,l<-2147483648?Math.ceil(l):l|0):(l+=.5,l>2147483647?Math.floor(l):l|0)};d.msie?s.Clipper.Round=oS:d.chromium?s.Clipper.Round=aS:d.safari?s.Clipper.Round=hS:s.Clipper.Round=lS,s.Clipper.TopX=function(l,u){return u===l.Top.Y?l.Top.X:l.Bot.X+s.Clipper.Round(l.Dx*(u-l.Bot.Y))},s.Clipper.prototype.IntersectPoint=function(l,u,p){p.X=0,p.Y=0;var O,C;if(l.Dx===u.Dx){p.Y=l.Curr.Y,p.X=s.Clipper.TopX(l,p.Y);return}if(l.Delta.X===0)p.X=l.Bot.X,s.ClipperBase.IsHorizontal(u)?p.Y=u.Bot.Y:(C=u.Bot.Y-u.Bot.X/u.Dx,p.Y=s.Clipper.Round(p.X/u.Dx+C));else if(u.Delta.X===0)p.X=u.Bot.X,s.ClipperBase.IsHorizontal(l)?p.Y=l.Bot.Y:(O=l.Bot.Y-l.Bot.X/l.Dx,p.Y=s.Clipper.Round(p.X/l.Dx+O));else{O=l.Bot.X-l.Bot.Y*l.Dx,C=u.Bot.X-u.Bot.Y*u.Dx;var b=(C-O)/(l.Dx-u.Dx);p.Y=s.Clipper.Round(b),Math.abs(l.Dx)<Math.abs(u.Dx)?p.X=s.Clipper.Round(l.Dx*b+O):p.X=s.Clipper.Round(u.Dx*b+C)}if(p.Y<l.Top.Y||p.Y<u.Top.Y){if(l.Top.Y>u.Top.Y)return p.Y=l.Top.Y,p.X=s.Clipper.TopX(u,l.Top.Y),p.X<l.Top.X;p.Y=u.Top.Y,Math.abs(l.Dx)<Math.abs(u.Dx)?p.X=s.Clipper.TopX(l,p.Y):p.X=s.Clipper.TopX(u,p.Y)}p.Y>l.Curr.Y&&(p.Y=l.Curr.Y,Math.abs(l.Dx)>Math.abs(u.Dx)?p.X=s.Clipper.TopX(u,p.Y):p.X=s.Clipper.TopX(l,p.Y))},s.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(l){for(var u=this.m_ActiveEdges;u!==null;){var p=this.IsMaxima(u,l);if(p){var O=this.GetMaximaPairEx(u);p=O===null||!s.ClipperBase.IsHorizontal(O)}if(p){this.StrictlySimple&&this.InsertMaxima(u.Top.X);var C=u.PrevInAEL;this.DoMaxima(u),C===null?u=this.m_ActiveEdges:u=C.NextInAEL}else{if(this.IsIntermediate(u,l)&&s.ClipperBase.IsHorizontal(u.NextInLML)?(u=this.UpdateEdgeIntoAEL(u),u.OutIdx>=0&&this.AddOutPt(u,u.Bot),this.AddEdgeToSEL(u)):(u.Curr.X=s.Clipper.TopX(u,l),u.Curr.Y=l),s.use_xyz&&(u.Top.Y===l?u.Curr.Z=u.Top.Z:u.Bot.Y===l?u.Curr.Z=u.Bot.Z:u.Curr.Z=0),this.StrictlySimple){var C=u.PrevInAEL;if(u.OutIdx>=0&&u.WindDelta!==0&&C!==null&&C.OutIdx>=0&&C.Curr.X===u.Curr.X&&C.WindDelta!==0){var b=new s.IntPoint1(u.Curr);s.use_xyz&&this.SetZ(b,C,u);var E=this.AddOutPt(C,b),A=this.AddOutPt(u,b);this.AddJoin(E,A,b)}}u=u.NextInAEL}}for(this.ProcessHorizontals(),this.m_Maxima=null,u=this.m_ActiveEdges;u!==null;){if(this.IsIntermediate(u,l)){var E=null;u.OutIdx>=0&&(E=this.AddOutPt(u,u.Top)),u=this.UpdateEdgeIntoAEL(u);var C=u.PrevInAEL,k=u.NextInAEL;if(C!==null&&C.Curr.X===u.Bot.X&&C.Curr.Y===u.Bot.Y&&E!==null&&C.OutIdx>=0&&C.Curr.Y===C.Top.Y&&s.ClipperBase.SlopesEqual5(u.Curr,u.Top,C.Curr,C.Top,this.m_UseFullRange)&&u.WindDelta!==0&&C.WindDelta!==0){var A=this.AddOutPt(ePrev2,u.Bot);this.AddJoin(E,A,u.Top)}else if(k!==null&&k.Curr.X===u.Bot.X&&k.Curr.Y===u.Bot.Y&&E!==null&&k.OutIdx>=0&&k.Curr.Y===k.Top.Y&&s.ClipperBase.SlopesEqual5(u.Curr,u.Top,k.Curr,k.Top,this.m_UseFullRange)&&u.WindDelta!==0&&k.WindDelta!==0){var A=this.AddOutPt(k,u.Bot);this.AddJoin(E,A,u.Top)}}u=u.NextInAEL}},s.Clipper.prototype.DoMaxima=function(l){var u=this.GetMaximaPairEx(l);if(u===null){l.OutIdx>=0&&this.AddOutPt(l,l.Top),this.DeleteFromAEL(l);return}for(var p=l.NextInAEL;p!==null&&p!==u;)this.IntersectEdges(l,p,l.Top),this.SwapPositionsInAEL(l,p),p=l.NextInAEL;l.OutIdx===-1&&u.OutIdx===-1?(this.DeleteFromAEL(l),this.DeleteFromAEL(u)):l.OutIdx>=0&&u.OutIdx>=0?(l.OutIdx>=0&&this.AddLocalMaxPoly(l,u,l.Top),this.DeleteFromAEL(l),this.DeleteFromAEL(u)):s.use_lines&&l.WindDelta===0?(l.OutIdx>=0&&(this.AddOutPt(l,l.Top),l.OutIdx=s.ClipperBase.Unassigned),this.DeleteFromAEL(l),u.OutIdx>=0&&(this.AddOutPt(u,l.Top),u.OutIdx=s.ClipperBase.Unassigned),this.DeleteFromAEL(u)):s.Error("DoMaxima error")},s.Clipper.ReversePaths=function(l){for(var u=0,p=l.length;u<p;u++)l[u].reverse()},s.Clipper.Orientation=function(l){return s.Clipper.Area(l)>=0},s.Clipper.prototype.PointCount=function(l){if(l===null)return 0;var u=0,p=l;do u++,p=p.Next;while(p!==l);return u},s.Clipper.prototype.BuildResult=function(l){s.Clear(l);for(var u=0,p=this.m_PolyOuts.length;u<p;u++){var O=this.m_PolyOuts[u];if(O.Pts!==null){var C=O.Pts.Prev,b=this.PointCount(C);if(!(b<2)){for(var E=new Array(b),A=0;A<b;A++)E[A]=C.Pt,C=C.Prev;l.push(E)}}}},s.Clipper.prototype.BuildResult2=function(l){l.Clear();for(var u=0,p=this.m_PolyOuts.length;u<p;u++){var O=this.m_PolyOuts[u],C=this.PointCount(O.Pts);if(!(O.IsOpen&&C<2||!O.IsOpen&&C<3)){this.FixHoleLinkage(O);var b=new s.PolyNode;l.m_AllPolys.push(b),O.PolyNode=b,b.m_polygon.length=C;for(var E=O.Pts.Prev,A=0;A<C;A++)b.m_polygon[A]=E.Pt,E=E.Prev}}for(var u=0,p=this.m_PolyOuts.length;u<p;u++){var O=this.m_PolyOuts[u];O.PolyNode!==null&&(O.IsOpen?(O.PolyNode.IsOpen=!0,l.AddChild(O.PolyNode)):O.FirstLeft!==null&&O.FirstLeft.PolyNode!==null?O.FirstLeft.PolyNode.AddChild(O.PolyNode):l.AddChild(O.PolyNode))}},s.Clipper.prototype.FixupOutPolyline=function(l){for(var u=l.Pts,p=u.Prev;u!==p;)if(u=u.Next,s.IntPoint.op_Equality(u.Pt,u.Prev.Pt)){u===p&&(p=u.Prev);var O=u.Prev;O.Next=u.Next,u.Next.Prev=O,u=O}u===u.Prev&&(l.Pts=null)},s.Clipper.prototype.FixupOutPolygon=function(l){var u=null;l.BottomPt=null;for(var p=l.Pts,O=this.PreserveCollinear||this.StrictlySimple;;){if(p.Prev===p||p.Prev===p.Next){l.Pts=null;return}if(s.IntPoint.op_Equality(p.Pt,p.Next.Pt)||s.IntPoint.op_Equality(p.Pt,p.Prev.Pt)||s.ClipperBase.SlopesEqual4(p.Prev.Pt,p.Pt,p.Next.Pt,this.m_UseFullRange)&&(!O||!this.Pt2IsBetweenPt1AndPt3(p.Prev.Pt,p.Pt,p.Next.Pt)))u=null,p.Prev.Next=p.Next,p.Next.Prev=p.Prev,p=p.Prev;else{if(p===u)break;u===null&&(u=p),p=p.Next}}l.Pts=p},s.Clipper.prototype.DupOutPt=function(l,u){var p=new s.OutPt;return p.Pt.X=l.Pt.X,p.Pt.Y=l.Pt.Y,s.use_xyz&&(p.Pt.Z=l.Pt.Z),p.Idx=l.Idx,u?(p.Next=l.Next,p.Prev=l,l.Next.Prev=p,l.Next=p):(p.Prev=l.Prev,p.Next=l,l.Prev.Next=p,l.Prev=p),p},s.Clipper.prototype.GetOverlap=function(l,u,p,O,C){return l<u?p<O?(C.Left=Math.max(l,p),C.Right=Math.min(u,O)):(C.Left=Math.max(l,O),C.Right=Math.min(u,p)):p<O?(C.Left=Math.max(u,p),C.Right=Math.min(l,O)):(C.Left=Math.max(u,O),C.Right=Math.min(l,p)),C.Left<C.Right},s.Clipper.prototype.JoinHorz=function(l,u,p,O,C,b){var E=l.Pt.X>u.Pt.X?s.Direction.dRightToLeft:s.Direction.dLeftToRight,A=p.Pt.X>O.Pt.X?s.Direction.dRightToLeft:s.Direction.dLeftToRight;if(E===A)return!1;if(E===s.Direction.dLeftToRight){for(;l.Next.Pt.X<=C.X&&l.Next.Pt.X>=l.Pt.X&&l.Next.Pt.Y===C.Y;)l=l.Next;b&&l.Pt.X!==C.X&&(l=l.Next),u=this.DupOutPt(l,!b),s.IntPoint.op_Inequality(u.Pt,C)&&(l=u,l.Pt.X=C.X,l.Pt.Y=C.Y,s.use_xyz&&(l.Pt.Z=C.Z),u=this.DupOutPt(l,!b))}else{for(;l.Next.Pt.X>=C.X&&l.Next.Pt.X<=l.Pt.X&&l.Next.Pt.Y===C.Y;)l=l.Next;!b&&l.Pt.X!==C.X&&(l=l.Next),u=this.DupOutPt(l,b),s.IntPoint.op_Inequality(u.Pt,C)&&(l=u,l.Pt.X=C.X,l.Pt.Y=C.Y,s.use_xyz&&(l.Pt.Z=C.Z),u=this.DupOutPt(l,b))}if(A===s.Direction.dLeftToRight){for(;p.Next.Pt.X<=C.X&&p.Next.Pt.X>=p.Pt.X&&p.Next.Pt.Y===C.Y;)p=p.Next;b&&p.Pt.X!==C.X&&(p=p.Next),O=this.DupOutPt(p,!b),s.IntPoint.op_Inequality(O.Pt,C)&&(p=O,p.Pt.X=C.X,p.Pt.Y=C.Y,s.use_xyz&&(p.Pt.Z=C.Z),O=this.DupOutPt(p,!b))}else{for(;p.Next.Pt.X>=C.X&&p.Next.Pt.X<=p.Pt.X&&p.Next.Pt.Y===C.Y;)p=p.Next;!b&&p.Pt.X!==C.X&&(p=p.Next),O=this.DupOutPt(p,b),s.IntPoint.op_Inequality(O.Pt,C)&&(p=O,p.Pt.X=C.X,p.Pt.Y=C.Y,s.use_xyz&&(p.Pt.Z=C.Z),O=this.DupOutPt(p,b))}return E===s.Direction.dLeftToRight===b?(l.Prev=p,p.Next=l,u.Next=O,O.Prev=u):(l.Next=p,p.Prev=l,u.Prev=O,O.Next=u),!0},s.Clipper.prototype.JoinPoints=function(l,u,p){var O=l.OutPt1,C=new s.OutPt,b=l.OutPt2,E=new s.OutPt,A=l.OutPt1.Pt.Y===l.OffPt.Y;if(A&&s.IntPoint.op_Equality(l.OffPt,l.OutPt1.Pt)&&s.IntPoint.op_Equality(l.OffPt,l.OutPt2.Pt)){if(u!==p)return!1;for(C=l.OutPt1.Next;C!==O&&s.IntPoint.op_Equality(C.Pt,l.OffPt);)C=C.Next;var k=C.Pt.Y>l.OffPt.Y;for(E=l.OutPt2.Next;E!==b&&s.IntPoint.op_Equality(E.Pt,l.OffPt);)E=E.Next;var L=E.Pt.Y>l.OffPt.Y;return k===L?!1:k?(C=this.DupOutPt(O,!1),E=this.DupOutPt(b,!0),O.Prev=b,b.Next=O,C.Next=E,E.Prev=C,l.OutPt1=O,l.OutPt2=C,!0):(C=this.DupOutPt(O,!0),E=this.DupOutPt(b,!1),O.Next=b,b.Prev=O,C.Prev=E,E.Next=C,l.OutPt1=O,l.OutPt2=C,!0)}else if(A){for(C=O;O.Prev.Pt.Y===O.Pt.Y&&O.Prev!==C&&O.Prev!==b;)O=O.Prev;for(;C.Next.Pt.Y===C.Pt.Y&&C.Next!==O&&C.Next!==b;)C=C.Next;if(C.Next===O||C.Next===b)return!1;for(E=b;b.Prev.Pt.Y===b.Pt.Y&&b.Prev!==E&&b.Prev!==C;)b=b.Prev;for(;E.Next.Pt.Y===E.Pt.Y&&E.Next!==b&&E.Next!==O;)E=E.Next;if(E.Next===b||E.Next===O)return!1;var Z={Left:null,Right:null};if(!this.GetOverlap(O.Pt.X,C.Pt.X,b.Pt.X,E.Pt.X,Z))return!1;var B=Z.Left,J=Z.Right,ot=new s.IntPoint0,dt;return O.Pt.X>=B&&O.Pt.X<=J?(ot.X=O.Pt.X,ot.Y=O.Pt.Y,s.use_xyz&&(ot.Z=O.Pt.Z),dt=O.Pt.X>C.Pt.X):b.Pt.X>=B&&b.Pt.X<=J?(ot.X=b.Pt.X,ot.Y=b.Pt.Y,s.use_xyz&&(ot.Z=b.Pt.Z),dt=b.Pt.X>E.Pt.X):C.Pt.X>=B&&C.Pt.X<=J?(ot.X=C.Pt.X,ot.Y=C.Pt.Y,s.use_xyz&&(ot.Z=C.Pt.Z),dt=C.Pt.X>O.Pt.X):(ot.X=E.Pt.X,ot.Y=E.Pt.Y,s.use_xyz&&(ot.Z=E.Pt.Z),dt=E.Pt.X>b.Pt.X),l.OutPt1=O,l.OutPt2=b,this.JoinHorz(O,C,b,E,ot,dt)}else{for(C=O.Next;s.IntPoint.op_Equality(C.Pt,O.Pt)&&C!==O;)C=C.Next;var mt=C.Pt.Y>O.Pt.Y||!s.ClipperBase.SlopesEqual4(O.Pt,C.Pt,l.OffPt,this.m_UseFullRange);if(mt){for(C=O.Prev;s.IntPoint.op_Equality(C.Pt,O.Pt)&&C!==O;)C=C.Prev;if(C.Pt.Y>O.Pt.Y||!s.ClipperBase.SlopesEqual4(O.Pt,C.Pt,l.OffPt,this.m_UseFullRange))return!1}for(E=b.Next;s.IntPoint.op_Equality(E.Pt,b.Pt)&&E!==b;)E=E.Next;var bt=E.Pt.Y>b.Pt.Y||!s.ClipperBase.SlopesEqual4(b.Pt,E.Pt,l.OffPt,this.m_UseFullRange);if(bt){for(E=b.Prev;s.IntPoint.op_Equality(E.Pt,b.Pt)&&E!==b;)E=E.Prev;if(E.Pt.Y>b.Pt.Y||!s.ClipperBase.SlopesEqual4(b.Pt,E.Pt,l.OffPt,this.m_UseFullRange))return!1}return C===O||E===b||C===E||u===p&&mt===bt?!1:mt?(C=this.DupOutPt(O,!1),E=this.DupOutPt(b,!0),O.Prev=b,b.Next=O,C.Next=E,E.Prev=C,l.OutPt1=O,l.OutPt2=C,!0):(C=this.DupOutPt(O,!0),E=this.DupOutPt(b,!1),O.Next=b,b.Prev=O,C.Prev=E,E.Next=C,l.OutPt1=O,l.OutPt2=C,!0)}},s.Clipper.GetBounds=function(l){for(var u=0,p=l.length;u<p&&l[u].length===0;)u++;if(u===p)return new s.IntRect(0,0,0,0);var O=new s.IntRect;for(O.left=l[u][0].X,O.right=O.left,O.top=l[u][0].Y,O.bottom=O.top;u<p;u++)for(var C=0,b=l[u].length;C<b;C++)l[u][C].X<O.left?O.left=l[u][C].X:l[u][C].X>O.right&&(O.right=l[u][C].X),l[u][C].Y<O.top?O.top=l[u][C].Y:l[u][C].Y>O.bottom&&(O.bottom=l[u][C].Y);return O},s.Clipper.prototype.GetBounds2=function(l){var u=l,p=new s.IntRect;for(p.left=l.Pt.X,p.right=l.Pt.X,p.top=l.Pt.Y,p.bottom=l.Pt.Y,l=l.Next;l!==u;)l.Pt.X<p.left&&(p.left=l.Pt.X),l.Pt.X>p.right&&(p.right=l.Pt.X),l.Pt.Y<p.top&&(p.top=l.Pt.Y),l.Pt.Y>p.bottom&&(p.bottom=l.Pt.Y),l=l.Next;return p},s.Clipper.PointInPolygon=function(l,u){var p=0,O=u.length;if(O<3)return 0;for(var C=u[0],b=1;b<=O;++b){var E=b===O?u[0]:u[b];if(E.Y===l.Y&&(E.X===l.X||C.Y===l.Y&&E.X>l.X==C.X<l.X))return-1;if(C.Y<l.Y!=E.Y<l.Y){if(C.X>=l.X)if(E.X>l.X)p=1-p;else{var A=(C.X-l.X)*(E.Y-l.Y)-(E.X-l.X)*(C.Y-l.Y);if(A===0)return-1;A>0==E.Y>C.Y&&(p=1-p)}else if(E.X>l.X){var A=(C.X-l.X)*(E.Y-l.Y)-(E.X-l.X)*(C.Y-l.Y);if(A===0)return-1;A>0==E.Y>C.Y&&(p=1-p)}}C=E}return p},s.Clipper.prototype.PointInPolygon=function(l,u){var p=0,O=u,C=l.X,b=l.Y,E=u.Pt.X,A=u.Pt.Y;do{u=u.Next;var k=u.Pt.X,L=u.Pt.Y;if(L===b&&(k===C||A===b&&k>C==E<C))return-1;if(A<b!=L<b){if(E>=C)if(k>C)p=1-p;else{var Z=(E-C)*(L-b)-(k-C)*(A-b);if(Z===0)return-1;Z>0==L>A&&(p=1-p)}else if(k>C){var Z=(E-C)*(L-b)-(k-C)*(A-b);if(Z===0)return-1;Z>0==L>A&&(p=1-p)}}E=k,A=L}while(O!==u);return p},s.Clipper.prototype.Poly2ContainsPoly1=function(l,u){var p=l;do{var O=this.PointInPolygon(p.Pt,u);if(O>=0)return O>0;p=p.Next}while(p!==l);return!0},s.Clipper.prototype.FixupFirstLefts1=function(l,u){for(var p,O,C=0,b=this.m_PolyOuts.length;C<b;C++)p=this.m_PolyOuts[C],O=s.Clipper.ParseFirstLeft(p.FirstLeft),p.Pts!==null&&O===l&&this.Poly2ContainsPoly1(p.Pts,u.Pts)&&(p.FirstLeft=u)},s.Clipper.prototype.FixupFirstLefts2=function(l,u){for(var p=u.FirstLeft,O,C,b=0,E=this.m_PolyOuts.length;b<E;b++)O=this.m_PolyOuts[b],!(O.Pts===null||O===u||O===l)&&(C=s.Clipper.ParseFirstLeft(O.FirstLeft),!(C!==p&&C!==l&&C!==u)&&(this.Poly2ContainsPoly1(O.Pts,l.Pts)?O.FirstLeft=l:this.Poly2ContainsPoly1(O.Pts,u.Pts)?O.FirstLeft=u:(O.FirstLeft===l||O.FirstLeft===u)&&(O.FirstLeft=p)))},s.Clipper.prototype.FixupFirstLefts3=function(l,u){for(var p,O,C=0,b=this.m_PolyOuts.length;C<b;C++)p=this.m_PolyOuts[C],O=s.Clipper.ParseFirstLeft(p.FirstLeft),p.Pts!==null&&O===l&&(p.FirstLeft=u)},s.Clipper.ParseFirstLeft=function(l){for(;l!==null&&l.Pts===null;)l=l.FirstLeft;return l},s.Clipper.prototype.JoinCommonEdges=function(){for(var l=0,u=this.m_Joins.length;l<u;l++){var p=this.m_Joins[l],O=this.GetOutRec(p.OutPt1.Idx),C=this.GetOutRec(p.OutPt2.Idx);if(!(O.Pts===null||C.Pts===null)&&!(O.IsOpen||C.IsOpen)){var b;O===C?b=O:this.OutRec1RightOfOutRec2(O,C)?b=C:this.OutRec1RightOfOutRec2(C,O)?b=O:b=this.GetLowermostRec(O,C),this.JoinPoints(p,O,C)&&(O===C?(O.Pts=p.OutPt1,O.BottomPt=null,C=this.CreateOutRec(),C.Pts=p.OutPt2,this.UpdateOutPtIdxs(C),this.Poly2ContainsPoly1(C.Pts,O.Pts)?(C.IsHole=!O.IsHole,C.FirstLeft=O,this.m_UsingPolyTree&&this.FixupFirstLefts2(C,O),(C.IsHole^this.ReverseSolution)==this.Area$1(C)>0&&this.ReversePolyPtLinks(C.Pts)):this.Poly2ContainsPoly1(O.Pts,C.Pts)?(C.IsHole=O.IsHole,O.IsHole=!C.IsHole,C.FirstLeft=O.FirstLeft,O.FirstLeft=C,this.m_UsingPolyTree&&this.FixupFirstLefts2(O,C),(O.IsHole^this.ReverseSolution)==this.Area$1(O)>0&&this.ReversePolyPtLinks(O.Pts)):(C.IsHole=O.IsHole,C.FirstLeft=O.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(O,C))):(C.Pts=null,C.BottomPt=null,C.Idx=O.Idx,O.IsHole=b.IsHole,b===C&&(O.FirstLeft=C.FirstLeft),C.FirstLeft=O,this.m_UsingPolyTree&&this.FixupFirstLefts3(C,O)))}}},s.Clipper.prototype.UpdateOutPtIdxs=function(l){var u=l.Pts;do u.Idx=l.Idx,u=u.Prev;while(u!==l.Pts)},s.Clipper.prototype.DoSimplePolygons=function(){for(var l=0;l<this.m_PolyOuts.length;){var u=this.m_PolyOuts[l++],p=u.Pts;if(!(p===null||u.IsOpen))do{for(var O=p.Next;O!==u.Pts;){if(s.IntPoint.op_Equality(p.Pt,O.Pt)&&O.Next!==p&&O.Prev!==p){var C=p.Prev,b=O.Prev;p.Prev=b,b.Next=p,O.Prev=C,C.Next=O,u.Pts=p;var E=this.CreateOutRec();E.Pts=O,this.UpdateOutPtIdxs(E),this.Poly2ContainsPoly1(E.Pts,u.Pts)?(E.IsHole=!u.IsHole,E.FirstLeft=u,this.m_UsingPolyTree&&this.FixupFirstLefts2(E,u)):this.Poly2ContainsPoly1(u.Pts,E.Pts)?(E.IsHole=u.IsHole,u.IsHole=!E.IsHole,E.FirstLeft=u.FirstLeft,u.FirstLeft=E,this.m_UsingPolyTree&&this.FixupFirstLefts2(u,E)):(E.IsHole=u.IsHole,E.FirstLeft=u.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(u,E)),O=p}O=O.Next}p=p.Next}while(p!==u.Pts)}},s.Clipper.Area=function(l){if(!Array.isArray(l))return 0;var u=l.length;if(u<3)return 0;for(var p=0,O=0,C=u-1;O<u;++O)p+=(l[C].X+l[O].X)*(l[C].Y-l[O].Y),C=O;return-p*.5},s.Clipper.prototype.Area=function(l){var u=l;if(l===null)return 0;var p=0;do p=p+(l.Prev.Pt.X+l.Pt.X)*(l.Prev.Pt.Y-l.Pt.Y),l=l.Next;while(l!==u);return p*.5},s.Clipper.prototype.Area$1=function(l){return this.Area(l.Pts)},s.Clipper.SimplifyPolygon=function(l,u){var p=new Array,O=new s.Clipper(0);return O.StrictlySimple=!0,O.AddPath(l,s.PolyType.ptSubject,!0),O.Execute(s.ClipType.ctUnion,p,u,u),p},s.Clipper.SimplifyPolygons=function(l,u){typeof u>"u"&&(u=s.PolyFillType.pftEvenOdd);var p=new Array,O=new s.Clipper(0);return O.StrictlySimple=!0,O.AddPaths(l,s.PolyType.ptSubject,!0),O.Execute(s.ClipType.ctUnion,p,u,u),p},s.Clipper.DistanceSqrd=function(l,u){var p=l.X-u.X,O=l.Y-u.Y;return p*p+O*O},s.Clipper.DistanceFromLineSqrd=function(l,u,p){var O=u.Y-p.Y,C=p.X-u.X,b=O*u.X+C*u.Y;return b=O*l.X+C*l.Y-b,b*b/(O*O+C*C)},s.Clipper.SlopesNearCollinear=function(l,u,p,O){return Math.abs(l.X-u.X)>Math.abs(l.Y-u.Y)?l.X>u.X==l.X<p.X?s.Clipper.DistanceFromLineSqrd(l,u,p)<O:u.X>l.X==u.X<p.X?s.Clipper.DistanceFromLineSqrd(u,l,p)<O:s.Clipper.DistanceFromLineSqrd(p,l,u)<O:l.Y>u.Y==l.Y<p.Y?s.Clipper.DistanceFromLineSqrd(l,u,p)<O:u.Y>l.Y==u.Y<p.Y?s.Clipper.DistanceFromLineSqrd(u,l,p)<O:s.Clipper.DistanceFromLineSqrd(p,l,u)<O},s.Clipper.PointsAreClose=function(l,u,p){var O=l.X-u.X,C=l.Y-u.Y;return O*O+C*C<=p},s.Clipper.ExcludeOp=function(l){var u=l.Prev;return u.Next=l.Next,l.Next.Prev=u,u.Idx=0,u},s.Clipper.CleanPolygon=function(l,u){typeof u>"u"&&(u=1.415);var p=l.length;if(p===0)return new Array;for(var O=new Array(p),C=0;C<p;++C)O[C]=new s.OutPt;for(var C=0;C<p;++C)O[C].Pt=l[C],O[C].Next=O[(C+1)%p],O[C].Next.Prev=O[C],O[C].Idx=0;for(var b=u*u,E=O[0];E.Idx===0&&E.Next!==E.Prev;)s.Clipper.PointsAreClose(E.Pt,E.Prev.Pt,b)?(E=s.Clipper.ExcludeOp(E),p--):s.Clipper.PointsAreClose(E.Prev.Pt,E.Next.Pt,b)?(s.Clipper.ExcludeOp(E.Next),E=s.Clipper.ExcludeOp(E),p-=2):s.Clipper.SlopesNearCollinear(E.Prev.Pt,E.Pt,E.Next.Pt,b)?(E=s.Clipper.ExcludeOp(E),p--):(E.Idx=1,E=E.Next);p<3&&(p=0);for(var A=new Array(p),C=0;C<p;++C)A[C]=new s.IntPoint1(E.Pt),E=E.Next;return O=null,A},s.Clipper.CleanPolygons=function(l,u){for(var p=new Array(l.length),O=0,C=l.length;O<C;O++)p[O]=s.Clipper.CleanPolygon(l[O],u);return p},s.Clipper.Minkowski=function(l,u,p,O){var C=O?1:0,b=l.length,E=u.length,A=new Array;if(p)for(var k=0;k<E;k++){for(var L=new Array(b),Z=0,B=l.length,J=l[Z];Z<B;Z++,J=l[Z])L[Z]=new s.IntPoint2(u[k].X+J.X,u[k].Y+J.Y);A.push(L)}else for(var k=0;k<E;k++){for(var L=new Array(b),Z=0,B=l.length,J=l[Z];Z<B;Z++,J=l[Z])L[Z]=new s.IntPoint2(u[k].X-J.X,u[k].Y-J.Y);A.push(L)}for(var ot=new Array,k=0;k<E-1+C;k++)for(var Z=0;Z<b;Z++){var dt=new Array;dt.push(A[k%E][Z%b]),dt.push(A[(k+1)%E][Z%b]),dt.push(A[(k+1)%E][(Z+1)%b]),dt.push(A[k%E][(Z+1)%b]),s.Clipper.Orientation(dt)||dt.reverse(),ot.push(dt)}return ot},s.Clipper.MinkowskiSum=function(l,u,p){if(u[0]instanceof Array){for(var O=u,C=new s.Paths,b=new s.Clipper,E=0;E<O.length;++E){var A=s.Clipper.Minkowski(l,O[E],!0,p);if(b.AddPaths(A,s.PolyType.ptSubject,!0),p){var k=s.Clipper.TranslatePath(O[E],l[0]);b.AddPath(k,s.PolyType.ptClip,!0)}}return b.Execute(s.ClipType.ctUnion,C,s.PolyFillType.pftNonZero,s.PolyFillType.pftNonZero),C}else{var k=u,O=s.Clipper.Minkowski(l,k,!0,p),b=new s.Clipper;return b.AddPaths(O,s.PolyType.ptSubject,!0),b.Execute(s.ClipType.ctUnion,O,s.PolyFillType.pftNonZero,s.PolyFillType.pftNonZero),O}},s.Clipper.TranslatePath=function(l,u){for(var p=new s.Path,O=0;O<l.length;O++)p.push(new s.IntPoint2(l[O].X+u.X,l[O].Y+u.Y));return p},s.Clipper.MinkowskiDiff=function(l,u){var p=s.Clipper.Minkowski(l,u,!1,!0),O=new s.Clipper;return O.AddPaths(p,s.PolyType.ptSubject,!0),O.Execute(s.ClipType.ctUnion,p,s.PolyFillType.pftNonZero,s.PolyFillType.pftNonZero),p},s.Clipper.PolyTreeToPaths=function(l){var u=new Array;return s.Clipper.AddPolyNodeToPaths(l,s.Clipper.NodeType.ntAny,u),u},s.Clipper.AddPolyNodeToPaths=function(l,u,p){var O=!0;switch(u){case s.Clipper.NodeType.ntOpen:return;case s.Clipper.NodeType.ntClosed:O=!l.IsOpen;break}l.m_polygon.length>0&&O&&p.push(l.m_polygon);for(var C=0,b=l.Childs(),E=b.length,A=b[C];C<E;C++,A=b[C])s.Clipper.AddPolyNodeToPaths(A,u,p)},s.Clipper.OpenPathsFromPolyTree=function(l){for(var u=new s.Paths,p=0,O=l.ChildCount();p<O;p++)l.Childs()[p].IsOpen&&u.push(l.Childs()[p].m_polygon);return u},s.Clipper.ClosedPathsFromPolyTree=function(l){var u=new s.Paths;return s.Clipper.AddPolyNodeToPaths(l,s.Clipper.NodeType.ntClosed,u),u},ff(s.Clipper,s.ClipperBase),s.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},s.ClipperOffset=function(l,u){typeof l>"u"&&(l=2),typeof u>"u"&&(u=s.ClipperOffset.def_arc_tolerance),this.m_destPolys=new s.Paths,this.m_srcPoly=new s.Path,this.m_destPoly=new s.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new s.IntPoint0,this.m_polyNodes=new s.PolyNode,this.MiterLimit=l,this.ArcTolerance=u,this.m_lowest.X=-1},s.ClipperOffset.two_pi=6.28318530717959,s.ClipperOffset.def_arc_tolerance=.25,s.ClipperOffset.prototype.Clear=function(){s.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},s.ClipperOffset.Round=s.Clipper.Round,s.ClipperOffset.prototype.AddPath=function(l,u,p){var O=l.length-1;if(!(O<0)){var C=new s.PolyNode;if(C.m_jointype=u,C.m_endtype=p,p===s.EndType.etClosedLine||p===s.EndType.etClosedPolygon)for(;O>0&&s.IntPoint.op_Equality(l[0],l[O]);)O--;C.m_polygon.push(l[0]);for(var b=0,E=0,A=1;A<=O;A++)s.IntPoint.op_Inequality(C.m_polygon[b],l[A])&&(b++,C.m_polygon.push(l[A]),(l[A].Y>C.m_polygon[E].Y||l[A].Y===C.m_polygon[E].Y&&l[A].X<C.m_polygon[E].X)&&(E=b));if(!(p===s.EndType.etClosedPolygon&&b<2)&&(this.m_polyNodes.AddChild(C),p===s.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new s.IntPoint2(this.m_polyNodes.ChildCount()-1,E);else{var k=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(C.m_polygon[E].Y>k.Y||C.m_polygon[E].Y===k.Y&&C.m_polygon[E].X<k.X)&&(this.m_lowest=new s.IntPoint2(this.m_polyNodes.ChildCount()-1,E))}}},s.ClipperOffset.prototype.AddPaths=function(l,u,p){for(var O=0,C=l.length;O<C;O++)this.AddPath(l[O],u,p)},s.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!s.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var l=0;l<this.m_polyNodes.ChildCount();l++){var u=this.m_polyNodes.Childs()[l];(u.m_endtype===s.EndType.etClosedPolygon||u.m_endtype===s.EndType.etClosedLine&&s.Clipper.Orientation(u.m_polygon))&&u.m_polygon.reverse()}else for(var l=0;l<this.m_polyNodes.ChildCount();l++){var u=this.m_polyNodes.Childs()[l];u.m_endtype===s.EndType.etClosedLine&&!s.Clipper.Orientation(u.m_polygon)&&u.m_polygon.reverse()}},s.ClipperOffset.GetUnitNormal=function(l,u){var p=u.X-l.X,O=u.Y-l.Y;if(p===0&&O===0)return new s.DoublePoint2(0,0);var C=1/Math.sqrt(p*p+O*O);return p*=C,O*=C,new s.DoublePoint2(O,-p)},s.ClipperOffset.prototype.DoOffset=function(l){if(this.m_destPolys=new Array,this.m_delta=l,s.ClipperBase.near_zero(l)){for(var u=0;u<this.m_polyNodes.ChildCount();u++){var p=this.m_polyNodes.Childs()[u];p.m_endtype===s.EndType.etClosedPolygon&&this.m_destPolys.push(p.m_polygon)}return}this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5;var O;this.ArcTolerance<=0?O=s.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(l)*s.ClipperOffset.def_arc_tolerance?O=Math.abs(l)*s.ClipperOffset.def_arc_tolerance:O=this.ArcTolerance;var C=3.14159265358979/Math.acos(1-O/Math.abs(l));this.m_sin=Math.sin(s.ClipperOffset.two_pi/C),this.m_cos=Math.cos(s.ClipperOffset.two_pi/C),this.m_StepsPerRad=C/s.ClipperOffset.two_pi,l<0&&(this.m_sin=-this.m_sin);for(var u=0;u<this.m_polyNodes.ChildCount();u++){var p=this.m_polyNodes.Childs()[u];this.m_srcPoly=p.m_polygon;var b=this.m_srcPoly.length;if(!(b===0||l<=0&&(b<3||p.m_endtype!==s.EndType.etClosedPolygon))){if(this.m_destPoly=new Array,b===1){if(p.m_jointype===s.JoinType.jtRound)for(var E=1,A=0,k=1;k<=C;k++){this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[0].X+E*l),s.ClipperOffset.Round(this.m_srcPoly[0].Y+A*l)));var L=E;E=E*this.m_cos-this.m_sin*A,A=L*this.m_sin+A*this.m_cos}else for(var E=-1,A=-1,k=0;k<4;++k)this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[0].X+E*l),s.ClipperOffset.Round(this.m_srcPoly[0].Y+A*l))),E<0?E=1:A<0?A=1:E=-1;this.m_destPolys.push(this.m_destPoly);continue}this.m_normals.length=0;for(var k=0;k<b-1;k++)this.m_normals.push(s.ClipperOffset.GetUnitNormal(this.m_srcPoly[k],this.m_srcPoly[k+1]));if(p.m_endtype===s.EndType.etClosedLine||p.m_endtype===s.EndType.etClosedPolygon?this.m_normals.push(s.ClipperOffset.GetUnitNormal(this.m_srcPoly[b-1],this.m_srcPoly[0])):this.m_normals.push(new s.DoublePoint1(this.m_normals[b-2])),p.m_endtype===s.EndType.etClosedPolygon){for(var Z=b-1,k=0;k<b;k++)Z=this.OffsetPoint(k,Z,p.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(p.m_endtype===s.EndType.etClosedLine){for(var Z=b-1,k=0;k<b;k++)Z=this.OffsetPoint(k,Z,p.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;for(var B=this.m_normals[b-1],k=b-1;k>0;k--)this.m_normals[k]=new s.DoublePoint2(-this.m_normals[k-1].X,-this.m_normals[k-1].Y);this.m_normals[0]=new s.DoublePoint2(-B.X,-B.Y),Z=0;for(var k=b-1;k>=0;k--)Z=this.OffsetPoint(k,Z,p.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{for(var Z=0,k=1;k<b-1;++k)Z=this.OffsetPoint(k,Z,p.m_jointype);var J;if(p.m_endtype===s.EndType.etOpenButt){var k=b-1;J=new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[k].X+this.m_normals[k].X*l),s.ClipperOffset.Round(this.m_srcPoly[k].Y+this.m_normals[k].Y*l)),this.m_destPoly.push(J),J=new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[k].X-this.m_normals[k].X*l),s.ClipperOffset.Round(this.m_srcPoly[k].Y-this.m_normals[k].Y*l)),this.m_destPoly.push(J)}else{var k=b-1;Z=b-2,this.m_sinA=0,this.m_normals[k]=new s.DoublePoint2(-this.m_normals[k].X,-this.m_normals[k].Y),p.m_endtype===s.EndType.etOpenSquare?this.DoSquare(k,Z):this.DoRound(k,Z)}for(var k=b-1;k>0;k--)this.m_normals[k]=new s.DoublePoint2(-this.m_normals[k-1].X,-this.m_normals[k-1].Y);this.m_normals[0]=new s.DoublePoint2(-this.m_normals[1].X,-this.m_normals[1].Y),Z=b-1;for(var k=Z-1;k>0;--k)Z=this.OffsetPoint(k,Z,p.m_jointype);p.m_endtype===s.EndType.etOpenButt?(J=new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*l),s.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*l)),this.m_destPoly.push(J),J=new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*l),s.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*l)),this.m_destPoly.push(J)):(Z=1,this.m_sinA=0,p.m_endtype===s.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}}},s.ClipperOffset.prototype.Execute=function(){var l=arguments,u=l[0]instanceof s.PolyTree;if(u){var p=l[0],O=l[1];p.Clear(),this.FixOrientations(),this.DoOffset(O);var C=new s.Clipper(0);if(C.AddPaths(this.m_destPolys,s.PolyType.ptSubject,!0),O>0)C.Execute(s.ClipType.ctUnion,p,s.PolyFillType.pftPositive,s.PolyFillType.pftPositive);else{var b=s.Clipper.GetBounds(this.m_destPolys),E=new s.Path;if(E.push(new s.IntPoint2(b.left-10,b.bottom+10)),E.push(new s.IntPoint2(b.right+10,b.bottom+10)),E.push(new s.IntPoint2(b.right+10,b.top-10)),E.push(new s.IntPoint2(b.left-10,b.top-10)),C.AddPath(E,s.PolyType.ptSubject,!0),C.ReverseSolution=!0,C.Execute(s.ClipType.ctUnion,p,s.PolyFillType.pftNegative,s.PolyFillType.pftNegative),p.ChildCount()===1&&p.Childs()[0].ChildCount()>0){var A=p.Childs()[0];p.Childs()[0]=A.Childs()[0],p.Childs()[0].m_Parent=p;for(var k=1;k<A.ChildCount();k++)p.AddChild(A.Childs()[k])}else p.Clear()}}else{var p=l[0],O=l[1];s.Clear(p),this.FixOrientations(),this.DoOffset(O);var C=new s.Clipper(0);if(C.AddPaths(this.m_destPolys,s.PolyType.ptSubject,!0),O>0)C.Execute(s.ClipType.ctUnion,p,s.PolyFillType.pftPositive,s.PolyFillType.pftPositive);else{var b=s.Clipper.GetBounds(this.m_destPolys),E=new s.Path;E.push(new s.IntPoint2(b.left-10,b.bottom+10)),E.push(new s.IntPoint2(b.right+10,b.bottom+10)),E.push(new s.IntPoint2(b.right+10,b.top-10)),E.push(new s.IntPoint2(b.left-10,b.top-10)),C.AddPath(E,s.PolyType.ptSubject,!0),C.ReverseSolution=!0,C.Execute(s.ClipType.ctUnion,p,s.PolyFillType.pftNegative,s.PolyFillType.pftNegative),p.length>0&&p.splice(0,1)}}},s.ClipperOffset.prototype.OffsetPoint=function(l,u,p){if(this.m_sinA=this.m_normals[u].X*this.m_normals[l].Y-this.m_normals[l].X*this.m_normals[u].Y,Math.abs(this.m_sinA*this.m_delta)<1){var O=this.m_normals[u].X*this.m_normals[l].X+this.m_normals[l].Y*this.m_normals[u].Y;if(O>0)return this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[l].X+this.m_normals[u].X*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[l].Y+this.m_normals[u].Y*this.m_delta))),u}else this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1);if(this.m_sinA*this.m_delta<0)this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[l].X+this.m_normals[u].X*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[l].Y+this.m_normals[u].Y*this.m_delta))),this.m_destPoly.push(new s.IntPoint1(this.m_srcPoly[l])),this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[l].X+this.m_normals[l].X*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[l].Y+this.m_normals[l].Y*this.m_delta)));else switch(p){case s.JoinType.jtMiter:{var C=1+(this.m_normals[l].X*this.m_normals[u].X+this.m_normals[l].Y*this.m_normals[u].Y);C>=this.m_miterLim?this.DoMiter(l,u,C):this.DoSquare(l,u);break}case s.JoinType.jtSquare:this.DoSquare(l,u);break;case s.JoinType.jtRound:this.DoRound(l,u);break}return u=l,u},s.ClipperOffset.prototype.DoSquare=function(l,u){var p=Math.tan(Math.atan2(this.m_sinA,this.m_normals[u].X*this.m_normals[l].X+this.m_normals[u].Y*this.m_normals[l].Y)/4);this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[l].X+this.m_delta*(this.m_normals[u].X-this.m_normals[u].Y*p)),s.ClipperOffset.Round(this.m_srcPoly[l].Y+this.m_delta*(this.m_normals[u].Y+this.m_normals[u].X*p)))),this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[l].X+this.m_delta*(this.m_normals[l].X+this.m_normals[l].Y*p)),s.ClipperOffset.Round(this.m_srcPoly[l].Y+this.m_delta*(this.m_normals[l].Y-this.m_normals[l].X*p))))},s.ClipperOffset.prototype.DoMiter=function(l,u,p){var O=this.m_delta/p;this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[l].X+(this.m_normals[u].X+this.m_normals[l].X)*O),s.ClipperOffset.Round(this.m_srcPoly[l].Y+(this.m_normals[u].Y+this.m_normals[l].Y)*O)))},s.ClipperOffset.prototype.DoRound=function(l,u){for(var p=Math.atan2(this.m_sinA,this.m_normals[u].X*this.m_normals[l].X+this.m_normals[u].Y*this.m_normals[l].Y),O=Math.max(s.Cast_Int32(s.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(p))),1),C=this.m_normals[u].X,b=this.m_normals[u].Y,E,A=0;A<O;++A)this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[l].X+C*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[l].Y+b*this.m_delta))),E=C,C=C*this.m_cos-this.m_sin*b,b=E*this.m_sin+b*this.m_cos;this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[l].X+this.m_normals[l].X*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[l].Y+this.m_normals[l].Y*this.m_delta)))},s.Error=function(l){try{throw new Error(l)}catch(u){alert(u.message)}},s.JS={},s.JS.AreaOfPolygon=function(l,u){return u||(u=1),s.Clipper.Area(l)/(u*u)},s.JS.AreaOfPolygons=function(l,u){u||(u=1);for(var p=0,O=0;O<l.length;O++)p+=s.Clipper.Area(l[O]);return p/(u*u)},s.JS.BoundsOfPath=function(l,u){return s.JS.BoundsOfPaths([l],u)},s.JS.BoundsOfPaths=function(l,u){u||(u=1);var p=s.Clipper.GetBounds(l);return p.left/=u,p.bottom/=u,p.right/=u,p.top/=u,p},s.JS.Clean=function(O,u){if(!(O instanceof Array))return[];var p=O[0]instanceof Array,O=s.JS.Clone(O);if(typeof u!="number"||u===null)return s.Error("Delta is not a number in Clean()."),O;if(O.length===0||O.length===1&&O[0].length===0||u<0)return O;p||(O=[O]);for(var C=O.length,b,E,A,k,L,Z,B,J=[],ot=0;ot<C;ot++)if(E=O[ot],b=E.length,b!==0){if(b<3){A=E,J.push(A);continue}for(A=E,k=u*u,L=E[0],Z=1,B=1;B<b;B++)(E[B].X-L.X)*(E[B].X-L.X)+(E[B].Y-L.Y)*(E[B].Y-L.Y)<=k||(A[Z]=E[B],L=E[B],Z++);L=E[Z-1],(E[0].X-L.X)*(E[0].X-L.X)+(E[0].Y-L.Y)*(E[0].Y-L.Y)<=k&&Z--,Z<b&&A.splice(Z,b-Z),A.length&&J.push(A)}return!p&&J.length?J=J[0]:!p&&J.length===0?J=[]:p&&J.length===0&&(J=[[]]),J},s.JS.Clone=function(l){if(!(l instanceof Array))return[];if(l.length===0)return[];if(l.length===1&&l[0].length===0)return[[]];var u=l[0]instanceof Array;u||(l=[l]);var p=l.length,O,C,b,E,A=new Array(p);for(C=0;C<p;C++){for(O=l[C].length,E=new Array(O),b=0;b<O;b++)E[b]={X:l[C][b].X,Y:l[C][b].Y};A[C]=E}return u||(A=A[0]),A},s.JS.Lighten=function(l,u){if(!(l instanceof Array))return[];if(typeof u!="number"||u===null)return s.Error("Tolerance is not a number in Lighten()."),s.JS.Clone(l);if(l.length===0||l.length===1&&l[0].length===0||u<0)return s.JS.Clone(l);var p=l[0]instanceof Array;p||(l=[l]);var O,C,b,E,A,k,L,Z,B,J,ot,dt,mt,bt,Pe,oi,Pn,uS=l.length,cS=u*u,Cn=[];for(O=0;O<uS;O++)if(b=l[O],k=b.length,k!==0){for(E=0;E<1e6;E++){for(A=[],k=b.length,b[k-1].X!==b[0].X||b[k-1].Y!==b[0].Y?(dt=1,b.push({X:b[0].X,Y:b[0].Y}),k=b.length):dt=0,ot=[],C=0;C<k-2;C++)L=b[C],B=b[C+1],Z=b[C+2],oi=L.X,Pn=L.Y,mt=Z.X-oi,bt=Z.Y-Pn,(mt!==0||bt!==0)&&(Pe=((B.X-oi)*mt+(B.Y-Pn)*bt)/(mt*mt+bt*bt),Pe>1?(oi=Z.X,Pn=Z.Y):Pe>0&&(oi+=mt*Pe,Pn+=bt*Pe)),mt=B.X-oi,bt=B.Y-Pn,J=mt*mt+bt*bt,J<=cS&&(ot[C+1]=1,C++);for(A.push({X:b[0].X,Y:b[0].Y}),C=1;C<k-1;C++)ot[C]||A.push({X:b[C].X,Y:b[C].Y});if(A.push({X:b[k-1].X,Y:b[k-1].Y}),dt&&b.pop(),ot.length)b=A;else break}k=A.length,A[k-1].X===A[0].X&&A[k-1].Y===A[0].Y&&A.pop(),A.length>2&&Cn.push(A)}return p||(Cn=Cn[0]),typeof Cn>"u"&&(Cn=[]),Cn},s.JS.PerimeterOfPath=function(l,u,p){if(typeof l>"u")return 0;var O=Math.sqrt,C=0,b,E,A=0,k=0,L=0,Z=0,B=l.length;if(B<2)return 0;for(u&&(l[B]=l[0],B++);--B;)b=l[B],A=b.X,k=b.Y,E=l[B-1],L=E.X,Z=E.Y,C+=O((A-L)*(A-L)+(k-Z)*(k-Z));return u&&l.pop(),C/p},s.JS.PerimeterOfPaths=function(l,u,p){p||(p=1);for(var O=0,C=0;C<l.length;C++)O+=s.JS.PerimeterOfPath(l[C],u,p);return O},s.JS.ScaleDownPath=function(l,u){var p,O;for(u||(u=1),p=l.length;p--;)O=l[p],O.X=O.X/u,O.Y=O.Y/u},s.JS.ScaleDownPaths=function(l,u){var p,O,C;for(u||(u=1),p=l.length;p--;)for(O=l[p].length;O--;)C=l[p][O],C.X=C.X/u,C.Y=C.Y/u},s.JS.ScaleUpPath=function(l,u){var p,O,C=Math.round;for(u||(u=1),p=l.length;p--;)O=l[p],O.X=C(O.X*u),O.Y=C(O.Y*u)},s.JS.ScaleUpPaths=function(l,u){var p,O,C,b=Math.round;for(u||(u=1),p=l.length;p--;)for(O=l[p].length;O--;)C=l[p][O],C.X=b(C.X*u),C.Y=b(C.Y*u)},s.ExPolygons=function(){return[]},s.ExPolygon=function(){this.outer=null,this.holes=null},s.JS.AddOuterPolyNodeToExPolygons=function(l,u){var p=new s.ExPolygon;p.outer=l.Contour();var O=l.Childs(),C=O.length;p.holes=new Array(C);var b,E,A,k,L,Z;for(A=0;A<C;A++)for(b=O[A],p.holes[A]=b.Contour(),k=0,L=b.Childs(),Z=L.length;k<Z;k++)E=L[k],s.JS.AddOuterPolyNodeToExPolygons(E,u);u.push(p)},s.JS.ExPolygonsToPaths=function(l){var u,p,O,C,b=new s.Paths;for(u=0,O=l.length;u<O;u++)for(b.push(l[u].outer),p=0,C=l[u].holes.length;p<C;p++)b.push(l[u].holes[p]);return b},s.JS.PolyTreeToExPolygons=function(l){var u=new s.ExPolygons,p,O,C,b;for(O=0,C=l.Childs(),b=C.length;O<b;O++)p=C[O],s.JS.AddOuterPolyNodeToExPolygons(p,u);return u}})()}),e("default",i),e("__esModule",!0)}}}),dr.register("-/clipper-js@v1.0.2-Mou0diNPTgyilhisGDlW/dist=es2020/clipper-js",["-/clipper-lib@v6.4.2-JisZmmhC7gDAFmHQLYDu/dist=es2020/clipper-lib"],function(e,t){var i,n,r;t&&t.id;function o(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}function s(h,c,d){return d={path:c,exports:{},require:function(f,m){return a(f,m==null?d.path:m)}},h(d,d.exports),d.exports}function a(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}return{setters:[function(h){i=h}],execute:function(){n=s(function(h,c){Object.defineProperty(c,"__esModule",{value:!0}),c.setErrorCallback=void 0;var d=function(){function Y(Q,W){for(var V=0;V<W.length;V++){var et=W[V];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(Q,et.key,et)}}return function(Q,W,V){return W&&Y(Q.prototype,W),V&&Y(Q,V),Q}}(),f=m(i.default);function m(Y){return Y&&Y.__esModule?Y:{default:Y}}function v(Y){if(Array.isArray(Y)){for(var Q=0,W=Array(Y.length);Q<Y.length;Q++)W[Q]=Y[Q];return W}else return Array.from(Y)}function S(Y,Q){if(!(Y instanceof Q))throw new TypeError("Cannot call a class as a function")}var g=void 0;c.setErrorCallback=function(Y){g=Y},f.default.Error=function(Y){g&&g(Y)};var y=new f.default.Clipper,P=new f.default.ClipperOffset,w=function(){function Y(){var Q=arguments.length<=0||arguments[0]===void 0?[]:arguments[0],W=arguments.length<=1||arguments[1]===void 0?!0:arguments[1],V=arguments.length<=2||arguments[2]===void 0?!1:arguments[2],et=arguments.length<=3||arguments[3]===void 0?!1:arguments[3],ct=arguments.length<=4||arguments[4]===void 0?!1:arguments[4];S(this,Y),this.paths=Q,V&&(this.paths=this.paths.map(_)),et&&(this.paths=this.paths.map(F)),ct&&(this.paths=this.paths.map(z)),this.closed=W}return d(Y,[{key:"_clip",value:function(Q,W){var V=new f.default.PolyTree;y.Clear(),y.AddPaths(this.paths,f.default.PolyType.ptSubject,this.closed),y.AddPaths(Q.paths,f.default.PolyType.ptClip,Q.closed),y.Execute(W,V);var et=f.default.Clipper.PolyTreeToPaths(V);return new Y(et,this.closed)}},{key:"union",value:function(Q){return this._clip(Q,f.default.ClipType.ctUnion)}},{key:"difference",value:function(Q){return this._clip(Q,f.default.ClipType.ctDifference)}},{key:"intersect",value:function(Q){return this._clip(Q,f.default.ClipType.ctIntersection)}},{key:"xor",value:function(Q){return this._clip(Q,f.default.ClipType.ctXor)}},{key:"offset",value:function(Q){var W=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],V=W.jointType,et=V===void 0?"jtSquare":V,ct=W.endType,ft=ct===void 0?"etClosedPolygon":ct,yt=W.miterLimit,Pt=yt===void 0?2:yt,xt=W.roundPrecision,_t=xt===void 0?.25:xt;P.Clear(),P.ArcTolerance=_t,P.MiterLimit=Pt;var kt=new f.default.Paths;return P.AddPaths(this.paths,f.default.JoinType[et],f.default.EndType[ft]),P.Execute(kt,Q),new Y(kt,!0)}},{key:"scaleUp",value:function(Q){return f.default.JS.ScaleUpPaths(this.paths,Q),this}},{key:"scaleDown",value:function(Q){return f.default.JS.ScaleDownPaths(this.paths,Q),this}},{key:"firstPoint",value:function(){var Q=arguments.length<=0||arguments[0]===void 0?!1:arguments[0];if(this.paths.length!==0){var W=this.paths[0],V=W[0];return Q?T(V):V}}},{key:"lastPoint",value:function(){var Q=arguments.length<=0||arguments[0]===void 0?!1:arguments[0];if(this.paths.length!==0){var W=this.paths[this.paths.length-1],V=this.closed?W[0]:W[W.length-1];return Q?T(V):V}}},{key:"areas",value:function(){var Q=this,W=this.paths.map(function(V,et){return Q.area(et)});return W}},{key:"area",value:function(Q){var W=this.paths[Q],V=f.default.Clipper.Area(W);return V}},{key:"totalArea",value:function(){return this.areas().reduce(function(Q,W){return Q+W},0)}},{key:"perimeter",value:function(Q){var W=this.paths[Q],V=f.default.JS.PerimeterOfPath(W,this.closed,1);return V}},{key:"perimeters",value:function(){var Q=this;return this.paths.map(function(W){return f.default.JS.PerimeterOfPath(W,Q.closed,1)})}},{key:"totalPerimeter",value:function(){var Q=f.default.JS.PerimeterOfPaths(this.paths,this.closed);return Q}},{key:"reverse",value:function(){return f.default.Clipper.ReversePaths(this.paths),this}},{key:"thresholdArea",value:function(Q){for(var W=[].concat(v(this.paths)),V=0;V<W.length;V++){var et=W[V],ct=Math.abs(f.default.Clipper.Area(shape));if(ct<Q){var ft=this.paths.indexOf(et);this.splice(ft,1)}}}},{key:"join",value:function(Q){var W;return(W=this.paths).splice.apply(W,[this.paths.length,0].concat(v(Q.paths))),this}},{key:"clone",value:function(){return new Y(f.default.JS.Clone(this.paths),this.closed)}},{key:"shapeBounds",value:function(){var Q=f.default.JS.BoundsOfPaths(this.paths);return Q.width=Q.right-Q.left,Q.height=Q.bottom-Q.top,Q.size=Q.width*Q.height,Q}},{key:"pathBounds",value:function(Q){var W=this.paths[Q],V=f.default.JS.BoundsOfPath(W);return V.width=V.right-V.left,V.height=V.bottom-V.top,V.size=V.width*V.height,V}},{key:"clean",value:function(Q){return new Y(f.default.Clipper.CleanPolygons(this.paths,Q),this.closed)}},{key:"orientation",value:function(Q){var W=this.paths[Q];return f.default.Clipper.Orientation(W)}},{key:"pointInShape",value:function(Q){var W=arguments.length<=1||arguments[1]===void 0?!1:arguments[1],V=arguments.length<=2||arguments[2]===void 0?!1:arguments[2];W&&(Q=I(Q)),V&&(Q=G(Q));for(var et=0;et<this.paths.length;et++){var ct=this.pointInPath(et,Q),ft=this.orientation(et);if(!ct&&ft||ct&&!ft)return!1}return!0}},{key:"pointInPath",value:function(Q,W){var V=arguments.length<=2||arguments[2]===void 0?!1:arguments[2],et=arguments.length<=3||arguments[3]===void 0?!1:arguments[3];V&&(W=I(W)),et&&(W=G(W));var ct=this.paths[Q],ft={X:Math.round(W.X),Y:Math.round(W.Y)};return f.default.Clipper.PointInPolygon(ft,ct)>0}},{key:"fixOrientation",value:function(){return this.closed?(this.totalArea()<0&&this.reverse(),this):this}},{key:"removeOverlap",value:function(){console.warn("Shape.removeOverlap is being depricated, use Shape.simplify('pftNonZero') instead"),this.simplify("pftNonZero")}},{key:"simplify",value:function(Q){if(this.closed){var W=f.default.Clipper.SimplifyPolygons(this.paths,f.default.PolyFillType[Q]);return new Y(W,!0)}else return this}},{key:"seperateShapes",value:function(){var Q=this,W=[];if(this.closed)(function(){for(var xt=new WeakMap,_t=[],kt=[],Xt=0;Xt<Q.paths.length;Xt++){var he=Q.paths[Xt],Vt=Q.orientation(Xt);if(Vt){var ve=Q.area(Xt);xt.set(he,ve),_t.push(he)}else kt.push(he)}_t.sort(function(Ui,Or){return xt.get(Ui)-xt.get(Or)});var $e=!0,ne=!1,Ht=void 0;try{for(var Ne=_t[Symbol.iterator](),re;!($e=(re=Ne.next()).done);$e=!0){for(var Fe=re.value,Ae=[Fe],ri=Q.paths.indexOf(Fe),Ft=[].concat(kt),de=0;de<Ft.length;de++){var Me=Ft[de],si=Q.pointInPath(ri,Me[0]);if(si){Ae.push(Me);var gr=kt.indexOf(Me);kt.splice(gr,1)}}W.push(new Y(Ae,!0))}}catch(Ui){ne=!0,Ht=Ui}finally{try{!$e&&Ne.return&&Ne.return()}finally{if(ne)throw Ht}}})();else{var V=!0,et=!1,ct=void 0;try{for(var ft=this.paths[Symbol.iterator](),yt;!(V=(yt=ft.next()).done);V=!0){var Pt=yt.value;W.push(new Y([Pt],!1))}}catch(xt){et=!0,ct=xt}finally{try{!V&&ft.return&&ft.return()}finally{if(et)throw ct}}}return W}},{key:"round",value:function(){return new Y(this.paths.map(F),this.closed)}},{key:"removeDuplicates",value:function(){return new Y(this.paths.map(z),this.closed)}},{key:"mapToLower",value:function(){return this.paths.map(D)}}]),Y}();c.default=w;function D(Y){return Y.map(T)}function T(Y){var Q=Y.X,W=Y.Y;return{x:Q,y:W}}function _(Y){return Y.map(I)}function I(Y){var Q=Y.x,W=Y.y;return{X:Q,Y:W}}function F(Y){return Y.map(G)}function G(Y){var Q=Y.X,W=Y.Y;return{X:Math.round(Q),Y:Math.round(W)}}function z(Y){return Y.filter(U)}function U(Y,Q,W){if(Q===0)return!0;var V=W[Q-1];return!(Y.X===V.X&&Y.Y===V.Y)}}),r=o(n),e("default",r),e("__esModule",!0)}}}),dr.register("clipper-js",["-/clipper-js@v1.0.2-Mou0diNPTgyilhisGDlW/dist=es2020/clipper-js"],function(e,t){t&&t.id;var i={default:!0};function n(r){var o={};for(var s in r)s!=="default"&&!i.hasOwnProperty(s)&&(o[s]=r[s]);e(o)}return{setters:[function(r){n(r),e({default:r.default})}],execute:function(){}}});const Ad=Zl("clipper-js"),uv=Ad.default;Ad.__esModule;const cv=(e,t)=>1e-8>Math.abs(e.x-t.x)+Math.abs(e.y-t.y);function kd(e,t,i={}){let{endType:n,jointType:r="jtRound",miterLimit:o=2,roundPrecision:s=.25}=i;if(!n){const f=e[0][0],m=e.at(-1).at(-1);n=cv(f,m)?"etClosedRound":"etOpenRound"}const{data:a,scale:h}=fv(e,t),c=new uv(a,!0).offset(t*h,{jointType:r,endType:n,miterLimit:o,roundPrecision:s}),d=mv(c,h);for(;e.length>d.length;)e.pop();return d.forEach((f,m)=>{e[m]=f}),e}const pv=(e,t)=>{const i={};return i.X=Math.round(e.x*t),i.Y=Math.round(e.y*t),i},dv=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2);function fv(e,t){const i=[],n=e.flat();for(let o=0;o<n.length-2;o+=1){const s=n[o],a=n[o+1],h=dv(s,a);Math.abs(h)!==0&&i.push(h)}const r=t!==0?(1/Math.min(...i,t)+1)*10:(1/Math.min(...i)+1)*10;return{data:e.map((o,s)=>o.map(a=>pv(a,r))),scale:r}}function mv(e,t){return Object.values(e.paths).map(i=>(i=i.map(({X:n,Y:r})=>({x:n/t,y:r/t})),[...i,i[0]],[...i,i[0]]))}function fr(e,t,i){const n=d=>d.map(({x:f,y:m})=>({X:f,Y:m})),r=d=>d.map(({X:f,Y:m})=>({x:f,y:m})),o=e.map(n);t=t.map(n);const s=new x.Paths,a=new x.Clipper;a.AddPaths(o,x.PolyType.ptSubject,!0),a.AddPaths(t,x.PolyType.ptClip,!0);const h={intersection:x.ClipType.ctIntersection,union:x.ClipType.ctUnion,difference:x.ClipType.ctDifference,xor:x.ClipType.ctXor};a.Execute(h[i],s);const c=s.map(r);for(;e.length>c.length;)e.pop();return c.forEach((d,f)=>{e[f]=d,e[f].push({x:d[0].x,y:d[0].y})}),e}// @license
const Ws={Z:"Z",M:"M",L:"L",C:"C",Q:"Q",A:"A",H:"H",V:"V",S:"S",T:"T",z:"Z",m:"m",l:"l",c:"c",q:"q",a:"a",h:"h",v:"v",s:"s",t:"t"},_d=function(e){this._string=e,this._currentIndex=0,this._endIndex=this._string.length,this._prevCommand=null,this._skipOptionalSpaces()};_d.prototype={parseSegment:function(){var e=this._string[this._currentIndex],t=Ws[e]?Ws[e]:null;if(t===null){if(this._prevCommand===null||((e==="+"||e==="-"||e==="."||e>="0"&&e<="9")&&this._prevCommand!=="Z"?this._prevCommand==="M"?t="L":this._prevCommand==="m"?t="l":t=this._prevCommand:t=null,t===null))return null}else this._currentIndex+=1;this._prevCommand=t;var i=null,n=t.toUpperCase();return n==="H"||n==="V"?i=[this._parseNumber()]:n==="M"||n==="L"||n==="T"?i=[this._parseNumber(),this._parseNumber()]:n==="S"||n==="Q"?i=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:n==="C"?i=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:n==="A"?i=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseArcFlag(),this._parseArcFlag(),this._parseNumber(),this._parseNumber()]:n==="Z"&&(this._skipOptionalSpaces(),i=[]),i===null||i.indexOf(null)>=0?null:{type:t,values:i}},hasMoreData:function(){return this._currentIndex<this._endIndex},peekSegmentType:function(){var e=this._string[this._currentIndex];return Ws[e]?Ws[e]:null},initialCommandIsMoveTo:function(){if(!this.hasMoreData())return!0;var e=this.peekSegmentType();return e==="M"||e==="m"},_isCurrentSpace:function(){var e=this._string[this._currentIndex];return e<=" "&&(e===" "||e===`
`||e==="	"||e==="\r"||e==="\f")},_skipOptionalSpaces:function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex+=1;return this._currentIndex<this._endIndex},_skipOptionalSpacesOrDelimiter:function(){return this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&this._string[this._currentIndex]!==","?!1:(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&this._string[this._currentIndex]===","&&(this._currentIndex+=1,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},_parseNumber:function(){var e=0,t=0,i=1,n=0,r=1,o=1,s=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="+"?this._currentIndex+=1:this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="-"&&(this._currentIndex+=1,r=-1),this._currentIndex===this._endIndex||(this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")&&this._string[this._currentIndex]!==".")return null;for(var a=this._currentIndex;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)this._currentIndex+=1;if(this._currentIndex!==a)for(var h=this._currentIndex-1,c=1;h>=a;)t+=c*(this._string[h]-"0"),h-=1,c*=10;if(this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="."){if(this._currentIndex+=1,this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")return null;for(;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)i*=10,n+=(this._string.charAt(this._currentIndex)-"0")/i,this._currentIndex+=1}if(this._currentIndex!==s&&this._currentIndex+1<this._endIndex&&(this._string[this._currentIndex]==="e"||this._string[this._currentIndex]==="E")&&this._string[this._currentIndex+1]!=="x"&&this._string[this._currentIndex+1]!=="m"){if(this._currentIndex+=1,this._string[this._currentIndex]==="+"?this._currentIndex+=1:this._string[this._currentIndex]==="-"&&(this._currentIndex+=1,o=-1),this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")return null;for(;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)e*=10,e+=this._string[this._currentIndex]-"0",this._currentIndex+=1}var d=t+n;return d*=r,e&&(d*=Math.pow(10,o*e)),s===this._currentIndex?null:(this._skipOptionalSpacesOrDelimiter(),d)},_parseArcFlag:function(){if(this._currentIndex>=this._endIndex)return null;var e=null,t=this._string[this._currentIndex];if(this._currentIndex+=1,t==="0")e=0;else if(t==="1")e=1;else return null;return this._skipOptionalSpacesOrDelimiter(),e}};const Id=function(e){if(!e||e.length===0)return[];var t=new _d(e),i=[];if(t.initialCommandIsMoveTo())for(;t.hasMoreData();){var n=t.parseSegment();if(n===null)break;i.push(n)}return i},gn=typeof Symbol<"u"?Symbol():"__cachedPathData",zl=typeof Symbol<"u"?Symbol():"__cachedNormalizedPathData";var Ld=function(e,t,i,n,r,o,s,a,h,c){var d=function(re){return Math.PI*re/180},f=function(re,Fe,Ae){var ri=re*Math.cos(Ae)-Fe*Math.sin(Ae),Ft=re*Math.sin(Ae)+Fe*Math.cos(Ae);return{x:ri,y:Ft}},m=d(s),v=[],S,g,y,P;if(c)S=c[0],g=c[1],y=c[2],P=c[3];else{var w=f(e,t,-m);e=w.x,t=w.y;var D=f(i,n,-m);i=D.x,n=D.y;var T=(e-i)/2,_=(t-n)/2,I=T*T/(r*r)+_*_/(o*o);I>1&&(I=Math.sqrt(I),r=I*r,o=I*o);var F;a===h?F=-1:F=1;var G=r*r,z=o*o,U=G*z-G*_*_-z*T*T,Y=G*_*_+z*T*T,Q=F*Math.sqrt(Math.abs(U/Y));y=Q*r*_/o+(e+i)/2,P=Q*-o*T/r+(t+n)/2,S=Math.asin(parseFloat(((t-P)/o).toFixed(9))),g=Math.asin(parseFloat(((n-P)/o).toFixed(9))),e<y&&(S=Math.PI-S),i<y&&(g=Math.PI-g),S<0&&(S=Math.PI*2+S),g<0&&(g=Math.PI*2+g),h&&S>g&&(S=S-Math.PI*2),!h&&g>S&&(g=g-Math.PI*2)}var W=g-S;if(Math.abs(W)>Math.PI*120/180){var V=g,et=i,ct=n;h&&g>S?g=S+Math.PI*120/180*1:g=S+Math.PI*120/180*-1,i=y+r*Math.cos(g),n=P+o*Math.sin(g),v=Ld(i,n,et,ct,r,o,s,0,h,[g,V,y,P])}W=g-S;var ft=Math.cos(S),yt=Math.sin(S),Pt=Math.cos(g),xt=Math.sin(g),_t=Math.tan(W/4),kt=4/3*r*_t,Xt=4/3*o*_t,he=[e,t],Vt=[e+kt*yt,t-Xt*ft],ve=[i+kt*xt,n-Xt*Pt],$e=[i,n];if(Vt[0]=2*he[0]-Vt[0],Vt[1]=2*he[1]-Vt[1],c)return[Vt,ve,$e].concat(v);v=[Vt,ve,$e].concat(v);for(var ne=[],Ht=0;Ht<v.length;Ht+=3){var r=f(v[Ht][0],v[Ht][1],m),o=f(v[Ht+1][0],v[Ht+1][1],m),Ne=f(v[Ht+2][0],v[Ht+2][1],m);ne.push([r.x,r.y,o.x,o.y,Ne.x,Ne.y])}return ne},On=function(e){return e.map(function(t){return{type:t.type,values:Array.prototype.slice.call(t.values)}})},gv=function(e){var t=[],i=null,n=null,r=null,o=null;return e.forEach(function(s){var a=s.type;if(a==="M"){var h=s.values[0],c=s.values[1];t.push({type:"M",values:[h,c]}),r=h,o=c,i=h,n=c}else if(a==="m"){var h=i+s.values[0],c=n+s.values[1];t.push({type:"M",values:[h,c]}),r=h,o=c,i=h,n=c}else if(a==="L"){var h=s.values[0],c=s.values[1];t.push({type:"L",values:[h,c]}),i=h,n=c}else if(a==="l"){var h=i+s.values[0],c=n+s.values[1];t.push({type:"L",values:[h,c]}),i=h,n=c}else if(a==="C"){var d=s.values[0],f=s.values[1],m=s.values[2],v=s.values[3],h=s.values[4],c=s.values[5];t.push({type:"C",values:[d,f,m,v,h,c]}),i=h,n=c}else if(a==="c"){var d=i+s.values[0],f=n+s.values[1],m=i+s.values[2],v=n+s.values[3],h=i+s.values[4],c=n+s.values[5];t.push({type:"C",values:[d,f,m,v,h,c]}),i=h,n=c}else if(a==="Q"){var d=s.values[0],f=s.values[1],h=s.values[2],c=s.values[3];t.push({type:"Q",values:[d,f,h,c]}),i=h,n=c}else if(a==="q"){var d=i+s.values[0],f=n+s.values[1],h=i+s.values[2],c=n+s.values[3];t.push({type:"Q",values:[d,f,h,c]}),i=h,n=c}else if(a==="A"){var h=s.values[5],c=s.values[6];t.push({type:"A",values:[s.values[0],s.values[1],s.values[2],s.values[3],s.values[4],h,c]}),i=h,n=c}else if(a==="a"){var h=i+s.values[5],c=n+s.values[6];t.push({type:"A",values:[s.values[0],s.values[1],s.values[2],s.values[3],s.values[4],h,c]}),i=h,n=c}else if(a==="H"){var h=s.values[0];t.push({type:"H",values:[h]}),i=h}else if(a==="h"){var h=i+s.values[0];t.push({type:"H",values:[h]}),i=h}else if(a==="V"){var c=s.values[0];t.push({type:"V",values:[c]}),n=c}else if(a==="v"){var c=n+s.values[0];t.push({type:"V",values:[c]}),n=c}else if(a==="S"){var m=s.values[0],v=s.values[1],h=s.values[2],c=s.values[3];t.push({type:"S",values:[m,v,h,c]}),i=h,n=c}else if(a==="s"){var m=i+s.values[0],v=n+s.values[1],h=i+s.values[2],c=n+s.values[3];t.push({type:"S",values:[m,v,h,c]}),i=h,n=c}else if(a==="T"){var h=s.values[0],c=s.values[1];t.push({type:"T",values:[h,c]}),i=h,n=c}else if(a==="t"){var h=i+s.values[0],c=n+s.values[1];t.push({type:"T",values:[h,c]}),i=h,n=c}else(a==="Z"||a==="z")&&(t.push({type:"Z",values:[]}),i=r,n=o)}),t},js=function(e){var t=[],i=null,n=null,r=null,o=null,s=null,a=null,h=null;return e.forEach(function(c){if(c.type==="M"){var d=c.values[0],f=c.values[1];t.push({type:"M",values:[d,f]}),a=d,h=f,o=d,s=f}else if(c.type==="C"){var m=c.values[0],v=c.values[1],S=c.values[2],g=c.values[3],d=c.values[4],f=c.values[5];t.push({type:"C",values:[m,v,S,g,d,f]}),n=S,r=g,o=d,s=f}else if(c.type==="L"){var d=c.values[0],f=c.values[1];t.push({type:"L",values:[d,f]}),o=d,s=f}else if(c.type==="H"){var d=c.values[0];t.push({type:"L",values:[d,s]}),o=d}else if(c.type==="V"){var f=c.values[0];t.push({type:"L",values:[o,f]}),s=f}else if(c.type==="S"){var S=c.values[0],g=c.values[1],d=c.values[2],f=c.values[3],y,P;i==="C"||i==="S"?(y=o+(o-n),P=s+(s-r)):(y=o,P=s),t.push({type:"C",values:[y,P,S,g,d,f]}),n=S,r=g,o=d,s=f}else if(c.type==="T"){var d=c.values[0],f=c.values[1],m,v;i==="Q"||i==="T"?(m=o+(o-n),v=s+(s-r)):(m=o,v=s);var y=o+2*(m-o)/3,P=s+2*(v-s)/3,w=d+2*(m-d)/3,D=f+2*(v-f)/3;t.push({type:"C",values:[y,P,w,D,d,f]}),n=m,r=v,o=d,s=f}else if(c.type==="Q"){var m=c.values[0],v=c.values[1],d=c.values[2],f=c.values[3],y=o+2*(m-o)/3,P=s+2*(v-s)/3,w=d+2*(m-d)/3,D=f+2*(v-f)/3;t.push({type:"C",values:[y,P,w,D,d,f]}),n=m,r=v,o=d,s=f}else if(c.type==="A"){var T=Math.abs(c.values[0]),_=Math.abs(c.values[1]),I=c.values[2],F=c.values[3],G=c.values[4],d=c.values[5],f=c.values[6];if(T===0||_===0)t.push({type:"C",values:[o,s,d,f,d,f]}),o=d,s=f;else if(o!==d||s!==f){var z=Ld(o,s,d,f,T,_,I,F,G);z.forEach(function(Q){t.push({type:"C",values:Q})}),o=d,s=f}}else c.type==="Z"&&(t.push(c),o=a,s=h);i=c.type}),t};const zt=(e,t)=>t in e&&"baseVal"in e[t]?e[t].baseVal.value:+e.getAttribute(t),Ov=function(e){if(e&&e.normalize){if(this[zl])return On(this[zl]);var t;this[gn]?t=On(this[gn]):(t=Id(this.getAttribute("d")||""),this[gn]=On(t));var i=js(gv(t));return this[zl]=On(i),i}else{if(this[gn])return On(this[gn]);var t=Id(this.getAttribute("d")||"");return this[gn]=On(t),t}},yv=function(e){var t=zt(this,"x"),i=zt(this,"y"),n=zt(this,"width"),r=zt(this,"height"),o=this.hasAttribute("rx")?zt(this,"rx"):zt(this,"ry"),s=this.hasAttribute("ry")?zt(this,"ry"):zt(this,"rx");o>n/2&&(o=n/2),s>r/2&&(s=r/2);var a=[{type:"M",values:[t+o,i]},{type:"H",values:[t+n-o]},{type:"A",values:[o,s,0,0,1,t+n,i+s]},{type:"V",values:[i+r-s]},{type:"A",values:[o,s,0,0,1,t+n-o,i+r]},{type:"H",values:[t+o]},{type:"A",values:[o,s,0,0,1,t,i+r-s]},{type:"V",values:[i+s]},{type:"A",values:[o,s,0,0,1,t+o,i]},{type:"Z",values:[]}];return a=a.filter(function(h){return!(h.type==="A"&&(h.values[0]===0||h.values[1]===0))}),e&&e.normalize===!0&&(a=js(a)),a},xv=function(e){var t=zt(this,"cx"),i=zt(this,"cy"),n=zt(this,"r"),r=[{type:"M",values:[t+n,i]},{type:"A",values:[n,n,0,0,1,t,i+n]},{type:"A",values:[n,n,0,0,1,t-n,i]},{type:"A",values:[n,n,0,0,1,t,i-n]},{type:"A",values:[n,n,0,0,1,t+n,i]},{type:"Z",values:[]}];return e&&e.normalize===!0&&(r=js(r)),r},vv=function(e){var t=zt(this,"cx"),i=zt(this,"cy"),n=zt(this,"rx"),r=zt(this,"ry"),o=[{type:"M",values:[t+n,i]},{type:"A",values:[n,r,0,0,1,t,i+r]},{type:"A",values:[n,r,0,0,1,t-n,i]},{type:"A",values:[n,r,0,0,1,t,i-r]},{type:"A",values:[n,r,0,0,1,t+n,i]},{type:"Z",values:[]}];return e&&e.normalize===!0&&(o=js(o)),o},Pv=function(){const e=zt(this,"x1"),t=zt(this,"x2"),i=zt(this,"y1"),n=zt(this,"y2");return[{type:"M",values:[e,i]},{type:"L",values:[t,n]}]},Cv=function(){for(var e=[],t=0;t<this.points.numberOfItems;t+=1){var i=this.points.getItem(t);e.push({type:t===0?"M":"L",values:[i.x,i.y]})}return e},Sv=function(){for(var e=[],t=0;t<this.points.numberOfItems;t+=1){var i=this.points.getItem(t);e.push({type:t===0?"M":"L",values:[i.x,i.y]})}return e.push({type:"Z",values:[]}),e},Qd={circle:xv,ellipse:vv,path:Ov,polygon:Sv,polyline:Cv,line:Pv,rect:yv};function wv(e,t){const i=e.nodeName.toLowerCase();if(i in Qd)return Qd[i].call(e,t);throw new Error(`Unsupported SVG element type: '${i}'`)}function bv([e,t,i,n,r,o,s,a],h){const c=3*i-2*e-s,d=3*n-2*t-a,f=3*r-2*s-e,m=3*o-2*a-t;return Math.max(c*c,f*f)+Math.max(d*d,m*m)<=16*h*h}function Ev([e,t,i,n,r,o,s,a],h){h===void 0&&(h=.5);let c=1-h,d=c*e+h*i,f=c*t+h*n,m=c*i+h*r,v=c*n+h*o,S=c*r+h*s,g=c*o+h*a,y=c*d+h*m,P=c*f+h*v,w=c*m+h*S,D=c*v+h*g,T=c*y+h*w,_=c*P+h*D;return[[e,t,d,f,y,P,T,_],[T,_,w,D,S,g,s,a]]}function Dv(e,t,i=32){const n=1/i,r=[];function o(s,a,h){if(h-a>n&&!bv(s,t)){const c=Ev(s,.5),d=(a+h)/2;o(c[0],a,d),o(c[1],d,h)}else{const c=s[6]-s[0],d=s[7]-s[1];Math.sqrt(c*c+d*d)>0&&r.push(s)}}return o(e,0,1),r}function Tv(e,t={}){const i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttribute("d",e);const{maxError:n=.1}=t,r=[],o=([c,d])=>[c,d],s=wv(i,{normalize:!0});let a=null,h=null;for(const c of s)if(c.type==="M")a=o(c.values),h=a,r.push({points:[a]});else if(c.type==="L")a=o(c.values),r[r.length-1].points.push(a);else if(c.type==="C"){const[d,f,m,v,S,g]=c.values,[y,P]=a,[w,D]=o([d,f]),[T,_]=o([m,v]),[I,F]=o([S,g]),G=Dv([y,P,w,D,T,_,I,F],n);for(const z of G)r[r.length-1].points.push([z[6],z[7]]);a=[I,F]}else if(c.type==="A"){const[d,f,m,v,S,g,y]=c.values,P=m,w=S,D=v,{cos:T,sin:_,atan2:I,sqrt:F,sign:G,acos:z,abs:U,ceil:Y}=Math,Q=(a[0]-g)/2,W=(a[1]-y)/2,V=T(P)*Q+_(P)*W,et=-_(P)*Q+T(P)*W,ct=V*V,ft=et*et,yt=ct/(d*d)+ft/(f*f),Pt=yt<=1?F(yt)*d:d,xt=yt<=1?F(yt)*f:f,_t=Pt*Pt,kt=xt*xt;let Xt=(_t*kt-_t*ft-kt*ct)/(_t*ft+kt*ct);if(U(Xt)<1e-4&&(Xt=0),Xt<0)throw new Error(`bad arc args ${Xt}`);const he=(D===w?-1:1)*F(Xt),Vt=he*Pt*et/xt,ve=he*-xt*V/Pt,$e=T(P)*Vt-_(P)*ve+(a[0]+g)/2,ne=_(P)*Vt+T(P)*ve+(a[1]+y)/2,Ht=(Ft,de,Me,si)=>I(Ft*si-de*Me,Ft*Me+de*si),Ne=Ht(1,0,(V-Vt)/Pt,(et-ve)/xt),re=Ht((V-Vt)/Pt,(et-ve)/xt,(-V-Vt)/Pt,(-et-ve)/xt)%(Math.PI*2),Fe=w===0&&re>0?re-Math.PI*2:w===1&&re<0?re+Math.PI*2:re,Ae=n,ri=Y(U(Fe)/z(1-Ae/Pt));for(let Ft=1;Ft<=ri;Ft++){const de=Ne+Fe*Ft/ri,Me=T(P)*Pt*T(de)-_(P)*xt*_(de)+$e,si=_(P)*Pt*T(de)+T(P)*xt*_(de)+ne;r[r.length-1].points.push([Me,si])}a=[g,y]}else if(c.type==="Z")h&&(a[0]!==h[0]||a[1]!==h[1])&&r[r.length-1].points.push(h);else throw Error(`Unexpected path command: "${c}"`);return r}const Xd=(e,t,i)=>({x:(1-e)*t.x+e*i.x,y:(1-e)*t.y+e*i.y}),$d=(e,t,i,...n)=>n.length>0?[Xd(e,t,i),...$d(e,i,...n)]:[Xd(e,t,i)],Nd=(e,t)=>t.length>1?Nd(e,$d(e,...t)):t[0],Av=e=>Array.isArray(e)?{x:e[0],y:e[1]}:e;function kv(e,...t){t=t.map(Av),e.length<0&&(e=[[{x:0,y:0}]]),t=[e.at(-1).at(-1),...t];const i=[];for(let n=0;n<=1;n+=1/32){const r=Nd(n,t);i.push(r)}return i.forEach(n=>e.at(-1).push(n)),e}const zi=(e,t,i={x:0,y:0})=>{t=Fd(t),i=Fd(i);const{x:n,y:r}=i,{x:o,y:s}=t,a=o-n,h=s-r;return _v(e,c=>({x:c.x+a,y:c.y+h}))},_v=(e,t)=>(e.forEach((i,n)=>{e[n]=i.map(t)}),e),Fd=e=>Array.isArray(e)?{x:e[0],y:e[1]}:e,Zs=e=>{let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.flat().forEach(o=>{t>o.x&&(t=o.x),i<o.x&&(i=o.x),n>o.y&&(n=o.y),r<o.y&&(r=o.y)}),{xMin:t,xMax:i,yMin:n,yMax:r}},qi=(e,t)=>{if(e.length===0&&e.push([{x:0,y:0}]),t==="start")return e[0][0];if(t==="end")return e.at(-1).at(-1);let{xMax:i,xMin:n,yMax:r,yMin:o}=Zs(e),s=(i+n)/2,a=(r+o)/2;if(t==="cc")return{x:s,y:a};if(t==="lb")return{x:n,y:o};if(t==="rt")return{x:i,y:r};if(t==="lc")return{x:n,y:a};if(t==="lt")return{x:n,y:r};if(t==="cb")return{x:s,y:o};if(t==="ct")return{x:s,y:r};if(t==="rb")return{x:i,y:o};if(t==="rc")return{x:i,y:a};throw'"'+t+'" is not an origin point. "right" or "left" come first then "bottom" or "top"'},ql=(e,t,i)=>(i||(i=qi(e,"cc")),i=Iv(i),Lv(e,n=>{let r=t/180*Math.PI,o=n.x-i.x,s=n.y-i.y;return{x:o*Math.cos(r)-s*Math.sin(r)+i.x,y:s*Math.cos(r)+o*Math.sin(r)+i.y}})),Iv=e=>Array.isArray(e)?{x:e[0],y:e[1]}:e,Lv=(e,t)=>(e.forEach((i,n)=>{e[n]=i.map(t)}),e),Md=(e,t,i)=>{if(e.length===0&&e.push([{x:0,y:0}]),i===0)return e;const n=e.at(-1).at(-1),r=Qv(e)+t,o=Math.cos(Bd(r)),s=Math.sin(Bd(r)),a=n.x+i*o,h=n.y+i*s;return e.at(-1).push({x:a,y:h}),e};function Qv(e){const t=e.at(-1);if(t.length<2)return 0;const i=t.at(-1),n=t.at(-2),r=i.x-n.x,o=i.y-n.y;return Math.atan2(o,r)*180/Math.PI}const Bd=e=>e/180*Math.PI;function Rd(e){const t=e.at(-1);if(t.length<2)return 0;const i=t.at(-1),n=t.at(-2),r=i.x-n.x,o=i.y-n.y;return Math.atan2(o,r)*180/Math.PI}const Xv=(e,t,i)=>{if(t===0||i===0)return e;e.length===0&&e.push([{x:0,y:0}]);const n=32,r=[[]],o=t/180*Math.PI,s=e.at(-1).at(-1),a=Rd(e),h=(f,m)=>m*Math.cos(f),c=(f,m)=>m*Math.sin(f);for(let f=0;f<=n;f++){const m=o/n*f,v=h(m,i),S=c(m,i);r[0].push({x:v,y:S})}zi(r,s,r[0][0]),ql(r,a+(t<0?90:-90),r[0][0]),r[0].slice(1).forEach(f=>e.at(-1).push(f));const d=Rd(e);return Md(e,t+a-d,i/1e12),console.log("arc pts",r),e},Yd=(e,t,i)=>{i||(i=qi(e,"cc"));const{x:n,y:r}=Nv(i);typeof t=="number"&&(t=[t,t]);const[o,s]=t;return $v(e,a=>({x:(a.x-n)*o+n,y:(a.y-r)*s+r}))},$v=(e,t)=>(e.forEach((i,n)=>{e[n]=i.map(t)}),e),Nv=e=>Array.isArray(e)?{x:e[0],y:e[1]}:e,mr=(e,t)=>Ul(e,t)<1e-6,Ul=([e,t],[i,n])=>Math.sqrt((i-e)**2+(n-t)**2),Fv=(e,t)=>Math.sqrt((t[0]-e[0])**2+(t[1]-e[1])**2),zs=(e,t)=>{const i=Fv(e,t);return[(t[0]-e[0])/i,(t[1]-e[1])/i]},Mv=e=>{const t=Math.sqrt(e[0]**2+e[1]**2);return[e[0]/t,e[1]/t]},Bv=(e,t,i,n)=>{const r=Math.sin(n*(1-e))/Math.sin(n),o=Math.sin(n*e)/Math.sin(n);return[t[0]*r+i[0]*o,t[1]*r+i[1]*o]};function Wd(e){if(typeof e[0]!="string")return e;if(e[0]==="chamfer"){const[t,i,n]=e;return n}else if(e[0]==="fillet"){const[t,i,n]=e;return n}else{if(e[0]==="bezier")throw"Can't begin wire with bezier.";return null}}function Rv(e){const t=[];let i=!1;return e.forEach(n=>{n[0]==="bezier"&&i===!0?t.at(-1).push(...n.slice(1)):(t.push(n),i=!1),n[0]==="bezier"&&(i=!0)}),t}function Gl(e){if(e.length===0)return[];e=Rv(e);let t=Wd(e[0]);const i=[t];for(let n=1;n<e.length;n++){const r=e[n];let o=null,s=n+1,a=e[s];for(;a&&a[0]!=="bezier"&&(o=Wd(a),o===null);)s++,a=e[s];if(typeof r[0]!="string"){if(mr(r,t))continue;i.push(r),t=r}else if(r[0]==="chamfer"){const[h,c,d]=r;if(t&&o){if(mr(d,t)||mr(d,o))continue;const[f,m]=Array.isArray(c)?c:[c,c],v=zs(d,t),S=[d[0]+v[0]*f,d[1]+v[1]*f],g=zs(d,o),y=[d[0]+g[0]*m,d[1]+g[1]*m];i.push(S),i.push(y)}else throw"Chamfering requires previous and next points.";t=i.at(-1)}else if(r[0]==="fillet"){let[h,c,d]=r;if(c<0&&(c=1e-8),t&&o){if(mr(d,t)||mr(d,o))continue;const f=zs(d,t),m=zs(d,o),v=Math.acos(f[0]*m[0]+f[1]*m[1]);let S=c/Math.tan(v/2);const g=Ul(t,d),y=Ul(o,d);S=Math.min(g,y,S),c=Math.min(S*Math.tan(v/2),c);const P=[d[0]+f[0]*S,d[1]+f[1]*S],w=[d[0]+m[0]*S,d[1]+m[1]*S],D=[],T=Mv([f[0]+m[0],f[1]+m[1]]),_=Math.sqrt(S**2+c**2),I=[d[0]+T[0]*_,d[1]+T[1]*_],F=Math.PI-v,G=[P[0]-I[0],P[1]-I[1]],z=[w[0]-I[0],w[1]-I[1]];for(let U=1/20;U<1;U+=1/20){const[Y,Q]=Bv(U,G,z,F);let W=[I[0]+Y,I[1]+Q];D.push(W)}i.push(...D)}else throw"Filleting requires previous and next points.";t=i.at(-1)}else if(r[0]==="bezier"){const[h,...c]=r;if(t&&o){let d=Yv([t,...c,o]);d=d.slice(1,-1),d.length>0&&i.push(...d)}else throw"Beziers requires previous and next points.";t=i.at(-1)}}return[i.map(([n,r])=>({x:n,y:r}))]}const jd=(e,t,i)=>[(1-e)*t[0]+e*i[0],(1-e)*t[1]+e*i[1]],Zd=(e,t,i,...n)=>n.length>0?[jd(e,t,i),...Zd(e,i,...n)]:[jd(e,t,i)],zd=(e,t)=>t.length>1?zd(e,Zd(e,...t)):t[0];function Yv(e){const t=[];for(let i=0;i<=1;i+=1/64){const n=zd(i,e);t.push(n)}return t}function qd(){const[e,...t]=arguments;return t.reduce((i,n)=>fr(i,n,"union"),e)}function Wv(){const[e,...t]=arguments;return t.reduce((i,n)=>fr(i,n,"intersect"),e)}function jv(){const[e,...t]=arguments;return t.reduce((i,n)=>fr(i,n,"difference"),e)}function Zv(){const[e,...t]=arguments;return t.reduce((i,n)=>fr(i,n,"xor"),e)}function zv(e){if(e.length===0)throw new Error("Shape must have at least one pt.");const t=e.at(-1);if(t.length<2)return 0;const i=t.at(-1),n=t.at(-2),r=i.x-n.x,o=i.y-n.y;return Math.atan2(o,r)*180/Math.PI}const qv=(e,[t,i])=>{e.length===0&&e.push([{x:0,y:0}]);const{x:n,y:r}=e.at(-1).at(-1);return e.at(-1).push({x:n+t,y:r+i}),e},Uv=e=>{if(e.length===0)throw new Error("Shape must have at least one pt.");const{x:t,y:i}=e[0][0];return e.at(-1).push({x:t,y:i}),e},Gv=e=>{const t=e.flat();if(t.length===1)return t[0];if(t.length===2)return{x:(t[0].x+t[1].x)/2,y:(t[0].y+t[1].y)/2};var i=t[0],n=t[t.length-1];(i.x!=n.x||i.y!=n.y)&&t.push(i);for(var r=0,o=0,s=0,a=t.length,h,c,d,f=0,m=a-1;f<a;m=f++)h=t[f],c=t[m],d=h.x*c.y-c.x*h.y,r+=d,o+=(h.x+c.x)*d,s+=(h.y+c.y)*d;return d=r*3,{x:o/d,y:s/d}},Vv=e=>JSON.parse(JSON.stringify(e)),Ud=e=>{const{xMin:t,xMax:i}=Zs(e);return i-t},Gd=e=>{const{yMin:t,yMax:i}=Zs(e);return i-t},Hv=e=>{const t=qi(e,"cc");return zi([0,0],t)},Jv=(e,t)=>(e.at(-1).push(t),e),Kv=e=>e.map(t=>t.reverse()).reverse(),tP=e=>Ys(e,0,{endType:"etClosedPolygon"}),eP=(e,t)=>Ys(e,t,{endType:"etClosedPolygon"}),iP=(e,t)=>{const i=(s,a)=>1e-8>Math.abs(s.x-a.x)+Math.abs(s.y-a.y),n=e[0][0],r=e.at(-1).at(-1),o=i(n,r)?"etClosedLine":"etOpenButt";return Ys(e,t/2,{endType:o,jointType:"jtMiter"})},nP=(e,t,i)=>{const n=Vv(e);for(let r=0;r<t;r++)e.push(...i(n));return e},ci=e=>{let t="";return e.forEach(i=>{const{x:n,y:r}=i[0];t+=`M ${n},${r}`,i.slice(1).forEach(o=>{const{x:s,y:a}=o;t+=`L ${s},${a}`})}),t};function Vl(e,t){return Tv(t,{maxError:.001}).map(i=>i.points).forEach(i=>{e.push(i.map((n,r)=>({x:n[0],y:n[1]})))}),e}const Hl=(e,t)=>{const i={x:-e/2,y:t/2},n={x:e/2,y:t/2},r={x:e/2,y:-t/2},o={x:-e/2,y:-t/2};return[[i,n,r,o,i]]},yn=e=>{const t=[],i=(s,a)=>a*Math.cos(s),n=(s,a)=>a*Math.sin(s);for(let s=0;s<180;s++){const a=Math.PI*2/180*s,h=i(a,e),c=n(a,e);t.push({x:h,y:c})}const{x:r,y:o}=t[0];return t.push({x:r,y:o}),[t]},rP=Object.freeze(Object.defineProperty({__proto__:null,turnForward:Md,vec:qv,close:Uv,translate:zi,rotate:ql,scale:Yd,originate:Hv,goTo:Jv,reverse:Kv,thicken:iP,copyPaste:nP,offset:Ys,offset2:kd,outline:tP,expand:eP,intersect:Wv,difference:jv,union:qd,xor:Zv,getAngle:zv,extrema:Zs,getPoint:qi,centroid:Gv,width:Ud,height:Gd,getPathData:ci,pathD:Vl,arc:Xv,rectangle:Hl,circle:yn,bezier:kv,path:Gl,boolean:fr},Symbol.toStringTag,{value:"Module"})),sP=([e,t,i],n)=>{const r=a=>ke`
    <path
      class="path-footprint"
      d="${ci([a])}"
      fill-rule="nonzero"
      />
  `,[o,s]=n;return _i`
    <style>
      .path-footprint-dragged {
        fill: black;
      }
    </style>

    <svg 
      style="position: absolute; left: ${o}; top: ${s}; transform: translate(-50%, -50%) scale(1, -1);"
      width="50px"
      height="50px">
      ${i.map(r)}
    </svg>

  `},oP=e=>e.reduce((t,i,n)=>`${t} ${n===0?"M":"L"} ${i.join(",")}`,""),lP=(e,t)=>{e.lt.x,(e.lt.y+e.lb.y)/2,e.rt.x,(e.rt.y+e.rb.y)/2,(e.lt.x+e.rt.x)/2,e.lt.y,(e.lb.x+e.rb.x)/2,e.lb.y;const i=[[e.lt.x,0],[e.rt.x,0]],n=[[0,e.lt.y],[0,e.lb.y]],r=[e.lt.x,e.rt.x];Math.abs(r[1]-r[0]);const o=[e.lb.y,e.lt.y];Math.abs(o[1]-o[0]);const s=t,a=(v,S)=>{let g=[],y=S*Math.ceil(v[0]/S)-S;for(;y<v[1]+S;)y=y+S,g.push(y);return g},h=v=>[[e.lt.x,v],[e.rt.x,v]],c=v=>[[v,e.lt.y],[v,e.lb.y]],d=v=>S=>ke`<path stroke="black" vector-effect="non-scaling-stroke" stroke-width="${v}" d="${oP(S)}"/>`,f=a(o,s).map(h).map(d(.2)),m=a(r,s).map(c).map(d(.2));return ke`
        <g class="grid no-download">
            ${d(.6)(i)}
            ${d(.6)(n)}
            ${f}
            ${m}
        </g>
    `},aP=({data:e,color:t,groupId:i=""})=>{const n=parseInt(t.slice(-2),16)/255,r=h=>ke`
    <path
        d="${h}"
        fill-rule="nonzero"
        fill="${t.slice(0,-2)}"
        fill-opacity=${n}/>
  `,o=h=>ke`
    <text 
      text-anchor="middle" 
      x=${h.translate[0]} 
      y=${-h.translate[1]+h.size*.352778}
      transform=${"scale(1 -1)"}
      style=${`font: ${h.size}pt sans-serif;`}
      fill=${t.slice(0,-2)}
      opacity=${n}
      >
      ${h.value}
    </text>
  `,s=({data:h,thickness:c})=>ke`
    <path
      d=${h}
      stroke-linecap="round"
      stroke-linejoin="round"
      stroke-width=${c}
      fill-rule="nonzero"
      stroke="${t.slice(0,-2)}"
      fill="none"
      stroke-opacity=${n}/>
  `,a=[];return e.forEach(h=>{typeof h=="string"?h.split(/(?=M)/g).forEach(c=>{a.push(r(c))}):h.type==="text"?a.push(o(h)):h.type==="wire"&&a.push(s(h))}),ke`
    <g id=${i}>
      ${a}
    </g>
  `},hP=({pt:e,start:t,end:i,text:n},r)=>ke`
  <circle
    class="draggable-pt"
    cx=${e[0]}
    cy=${e[1]}
    r="0.015"
    data-index=${r}
    data-start=${t}
    data-end=${i}
    data-text=${n}></circle>
`,uP=({d:e,stroke:t,strokeWidth:i,fill:n})=>ke`
  <path d=${e} stroke=${t} stroke-width=${i} fill=${n}></path>
`,cP=e=>{var t;const i=e.shapes.map(aP),n=e.paths.map(uP),r=e.pts.map(hP);return(t=e.panZoomParams)==null||t.corners(),ke`
    <svg id="viewer" style="width: 100%; height: 100%; transform: scale(1, -1);">
      <g class="transform-group">
            ${e.selectBox.start&&e.selectBox.end?ke`
              <path
                class="selectBox"
                d="
                  M ${e.selectBox.start.x} ${e.selectBox.start.y}
                  L ${e.selectBox.end.x} ${e.selectBox.start.y}
                  L ${e.selectBox.end.x} ${e.selectBox.end.y}
                  L ${e.selectBox.start.x} ${e.selectBox.end.y}
                "
              />`:""}

          <g class="shapes">${i}</g>
          <g class="paths">${n}</g>


        ${e.panZoomParams&&e.gridSize>0&&e.grid?lP(e.panZoomParams.corners(),e.gridSize):""}

        <rect
          class="limits no-download"
          width="${e.limits.x[1]-e.limits.x[0]}"
          height="${e.limits.y[1]-e.limits.y[0]}"
          stroke="black" fill="transparent" stroke-width="1"
          vector-effect="non-scaling-stroke"
          transform="translate(${e.limits.x[0]}, ${e.limits.y[0]})"/>
        <g class="pts no-download">${e.viewHandles?r:""}</g>
      </g>

    </svg>
  `},pP=([e,t,i],n)=>{const r=o=>ke`
    <path
      class="path-footprint"
      data-index=${n}
      d="${ci([o])}"
      fill-rule="nonzero"
      />
  `;return _i`
    <style>
      .path-footprint {
        fill: black;
      }

      .footprint-svg:hover .path-footprint {
        fill: orange;
      }
    </style>
    <div class="footprint-item">
      <svg
        data-index=${n}
        class="footprint-svg footprint-${n}"
        width="50px"
        height="50px"
        transform="scale(1, -1)">
        ${i.map(r)}
      </svg>
      <span style="padding-left: 5px;">${e}</span>
    </div>
  `},Yt={codemirror:void 0,storedPCB:void 0,transforming:!1,transformUpdate:()=>{},selectBox:{},footprints:[],wires:[],shapes:[],limits:{x:[0,1],y:[0,1]},mm_per_unit:25.4,grid:!0,gridSize:.05,viewHandles:!0,selectedPath:null,panZoomParams:void 0,previewFootprint:null,paths:[],pts:[],name:"",error:""};window.getState=()=>Yt;function dP(){Yt.selectedPath=null,Yt.codemirror.view.state.selection.ranges,Yt.codemirror.view.dispatch({selection:{anchor:0}}),Ot("RENDER")}function fP(e){return _i`
		${mP(e)}

		<div class="content">
			<div class="left-side">
				<codemirror-2 class="code-editor"></codemirror-2>
				${e.error!==""?_i`<div class="error-log">${e.error}</div>`:""}
			</div>
			<div class="right-side">
				${cP(e)}
				${e.selectedPath!==null?_i`<div class="path-selected" @click=${dP}>Clear Selected Path</div>`:""}
				<div class="footprint-toolbox">${e.footprints.map(pP)}</div>
				${e.previewFootprint?sP(...e.previewFootprint):""}
			</div>
			<div id="vertical-bar"></div>
		</div>
	`}const mP=e=>_i`
	<div class="top-menu">
		<img src="logo.svg" class="logo" alt="fab-circuit-logo" />
		<div class="left">
			<div
				class="menu-item"
				@click=${()=>Ot("RUN")}>
				run (shift + enter)
			</div>
			<div class="menu-item" @click=${()=>Ot("NEW_FILE")}>new</div>
			<div class="menu-item dropdown-container">
			 	import
			 	<div class="dropdown-content">
			 		${rv(Kx)}
			 	</div>
			 </div>
			 <div class="menu-item dropdown-container">
				download
				<div class="dropdown-content">
					<div class="menu-item"
						@click=${()=>{Ot("RUN",{flatten:!0}),tv(e)}}>
						svg
					</div class="menu-item">
					<div class="menu-item"
						@click=${()=>{Ot("RUN",{flatten:!0}),iv(e)}}>
						png
					</div class="menu-item">
					<div class="menu-item"
						@click=${()=>ev(`${e.name===""?"anon":e.name}.js`,e.codemirror.view.state.doc.toString())}>
						js
					</div class="menu-item">
					<input 
						.value=${e.name} 
						placeholder="name-here"
						@input=${t=>{e.name=t.target.value}}/>
				</div>
			</div>
			<div class="menu-item dropdown-container">
				drawing
				<div class="dropdown-content">
					<button
						class="center-button"
						@click=${()=>{e.panZoomParams.setScaleXY(e.limits)}}>
						center
					</button>
					<div>
						<span>handles</span>
						<input
							type="checkbox"
							checked=${e.viewHandles}
							@change=${t=>{e.viewHandles=t.target.checked,Ot("RENDER")}}
							class="handles-checkbox">
						</input>
					</div>
					<div>
						<span>grid</span>
						<input
							type="checkbox"
							.checked=${e.grid}
							@change=${t=>{e.grid=t.target.checked,Ot("RENDER")}}
							>
						</input>
					</div>
					<div>
						<span>grid size:</span>
						<input
							type="number"
							step="0.005"
							min="0"
							value=${e.gridSize}
							@change=${t=>{e.gridSize=Number(t.target.value),Ot("RENDER")}}>
						</input>
					</div>
				</div>
			</div>
		</div>
	</div>
`;var gP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ti={exports:{}};(function(e,t){(function(i,n){e.exports=n()})(gP,function(){return function(i){var n={};function r(o){if(n[o])return n[o].exports;var s=n[o]={exports:{},id:o,loaded:!1};return i[o].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}return r.m=i,r.c=n,r.p="",r(0)}([function(i,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(1),s=r(3),a=r(8),h=r(15);function c(S,g,y){var P=null,w=function(U,Y){y&&y(U,Y),P&&P.visit(U,Y)},D=typeof y=="function"?w:null,T=!1;if(g){T=typeof g.comment=="boolean"&&g.comment;var _=typeof g.attachComment=="boolean"&&g.attachComment;(T||_)&&(P=new o.CommentHandler,P.attach=_,g.comment=!0,D=w)}var I=!1;g&&typeof g.sourceType=="string"&&(I=g.sourceType==="module");var F;g&&typeof g.jsx=="boolean"&&g.jsx?F=new s.JSXParser(S,g,D):F=new a.Parser(S,g,D);var G=I?F.parseModule():F.parseScript(),z=G;return T&&P&&(z.comments=P.comments),F.config.tokens&&(z.tokens=F.tokens),F.config.tolerant&&(z.errors=F.errorHandler.errors),z}n.parse=c;function d(S,g,y){var P=g||{};return P.sourceType="module",c(S,P,y)}n.parseModule=d;function f(S,g,y){var P=g||{};return P.sourceType="script",c(S,P,y)}n.parseScript=f;function m(S,g,y){var P=new h.Tokenizer(S,g),w;w=[];try{for(;;){var D=P.getNextToken();if(!D)break;y&&(D=y(D)),w.push(D)}}catch(T){P.errorHandler.tolerate(T)}return P.errorHandler.tolerant&&(w.errors=P.errors()),w}n.tokenize=m;var v=r(2);n.Syntax=v.Syntax,n.version="4.0.1"},function(i,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(2),s=function(){function a(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}return a.prototype.insertInnerComments=function(h,c){if(h.type===o.Syntax.BlockStatement&&h.body.length===0){for(var d=[],f=this.leading.length-1;f>=0;--f){var m=this.leading[f];c.end.offset>=m.start&&(d.unshift(m.comment),this.leading.splice(f,1),this.trailing.splice(f,1))}d.length&&(h.innerComments=d)}},a.prototype.findTrailingComments=function(h){var c=[];if(this.trailing.length>0){for(var d=this.trailing.length-1;d>=0;--d){var f=this.trailing[d];f.start>=h.end.offset&&c.unshift(f.comment)}return this.trailing.length=0,c}var m=this.stack[this.stack.length-1];if(m&&m.node.trailingComments){var v=m.node.trailingComments[0];v&&v.range[0]>=h.end.offset&&(c=m.node.trailingComments,delete m.node.trailingComments)}return c},a.prototype.findLeadingComments=function(h){for(var c=[],d;this.stack.length>0;){var f=this.stack[this.stack.length-1];if(f&&f.start>=h.start.offset)d=f.node,this.stack.pop();else break}if(d){for(var m=d.leadingComments?d.leadingComments.length:0,v=m-1;v>=0;--v){var S=d.leadingComments[v];S.range[1]<=h.start.offset&&(c.unshift(S),d.leadingComments.splice(v,1))}return d.leadingComments&&d.leadingComments.length===0&&delete d.leadingComments,c}for(var v=this.leading.length-1;v>=0;--v){var f=this.leading[v];f.start<=h.start.offset&&(c.unshift(f.comment),this.leading.splice(v,1))}return c},a.prototype.visitNode=function(h,c){if(!(h.type===o.Syntax.Program&&h.body.length>0)){this.insertInnerComments(h,c);var d=this.findTrailingComments(c),f=this.findLeadingComments(c);f.length>0&&(h.leadingComments=f),d.length>0&&(h.trailingComments=d),this.stack.push({node:h,start:c.start.offset})}},a.prototype.visitComment=function(h,c){var d=h.type[0]==="L"?"Line":"Block",f={type:d,value:h.value};if(h.range&&(f.range=h.range),h.loc&&(f.loc=h.loc),this.comments.push(f),this.attach){var m={comment:{type:d,value:h.value,range:[c.start.offset,c.end.offset]},start:c.start.offset};h.loc&&(m.comment.loc=h.loc),h.type=d,this.leading.push(m),this.trailing.push(m)}},a.prototype.visit=function(h,c){h.type==="LineComment"?this.visitComment(h,c):h.type==="BlockComment"?this.visitComment(h,c):this.attach&&this.visitNode(h,c)},a}();n.CommentHandler=s},function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(i,n,r){var o=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,P){y.__proto__=P}||function(y,P){for(var w in P)P.hasOwnProperty(w)&&(y[w]=P[w])};return function(y,P){g(y,P);function w(){this.constructor=y}y.prototype=P===null?Object.create(P):(w.prototype=P.prototype,new w)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=r(4),a=r(5),h=r(6),c=r(7),d=r(8),f=r(13),m=r(14);f.TokenName[100]="JSXIdentifier",f.TokenName[101]="JSXText";function v(g){var y;switch(g.type){case h.JSXSyntax.JSXIdentifier:var P=g;y=P.name;break;case h.JSXSyntax.JSXNamespacedName:var w=g;y=v(w.namespace)+":"+v(w.name);break;case h.JSXSyntax.JSXMemberExpression:var D=g;y=v(D.object)+"."+v(D.property);break}return y}var S=function(g){o(y,g);function y(P,w,D){return g.call(this,P,w,D)||this}return y.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():g.prototype.parsePrimaryExpression.call(this)},y.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.line,this.scanner.lineStart=this.startMarker.index-this.startMarker.column},y.prototype.finishJSX=function(){this.nextToken()},y.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},y.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},y.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},y.prototype.scanXHTMLEntity=function(P){for(var w="&",D=!0,T=!1,_=!1,I=!1;!this.scanner.eof()&&D&&!T;){var F=this.scanner.source[this.scanner.index];if(F===P)break;if(T=F===";",w+=F,++this.scanner.index,!T)switch(w.length){case 2:_=F==="#";break;case 3:_&&(I=F==="x",D=I||s.Character.isDecimalDigit(F.charCodeAt(0)),_=_&&!I);break;default:D=D&&!(_&&!s.Character.isDecimalDigit(F.charCodeAt(0))),D=D&&!(I&&!s.Character.isHexDigit(F.charCodeAt(0)));break}}if(D&&T&&w.length>2){var G=w.substr(1,w.length-2);_&&G.length>1?w=String.fromCharCode(parseInt(G.substr(1),10)):I&&G.length>2?w=String.fromCharCode(parseInt("0"+G.substr(1),16)):!_&&!I&&m.XHTMLEntities[G]&&(w=m.XHTMLEntities[G])}return w},y.prototype.lexJSX=function(){var P=this.scanner.source.charCodeAt(this.scanner.index);if(P===60||P===62||P===47||P===58||P===61||P===123||P===125){var w=this.scanner.source[this.scanner.index++];return{type:7,value:w,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index}}if(P===34||P===39){for(var D=this.scanner.index,T=this.scanner.source[this.scanner.index++],_="";!this.scanner.eof();){var I=this.scanner.source[this.scanner.index++];if(I===T)break;I==="&"?_+=this.scanXHTMLEntity(T):_+=I}return{type:8,value:_,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:D,end:this.scanner.index}}if(P===46){var F=this.scanner.source.charCodeAt(this.scanner.index+1),G=this.scanner.source.charCodeAt(this.scanner.index+2),w=F===46&&G===46?"...":".",D=this.scanner.index;return this.scanner.index+=w.length,{type:7,value:w,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:D,end:this.scanner.index}}if(P===96)return{type:10,value:"",lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(s.Character.isIdentifierStart(P)&&P!==92){var D=this.scanner.index;for(++this.scanner.index;!this.scanner.eof();){var I=this.scanner.source.charCodeAt(this.scanner.index);if(s.Character.isIdentifierPart(I)&&I!==92)++this.scanner.index;else if(I===45)++this.scanner.index;else break}var z=this.scanner.source.slice(D,this.scanner.index);return{type:100,value:z,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:D,end:this.scanner.index}}return this.scanner.lex()},y.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var P=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(P)),P},y.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;for(var P=this.scanner.index,w="";!this.scanner.eof();){var D=this.scanner.source[this.scanner.index];if(D==="{"||D==="<")break;++this.scanner.index,w+=D,s.Character.isLineTerminator(D.charCodeAt(0))&&(++this.scanner.lineNumber,D==="\r"&&this.scanner.source[this.scanner.index]===`
`&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart;var T={type:101,value:w,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:P,end:this.scanner.index};return w.length>0&&this.config.tokens&&this.tokens.push(this.convertToken(T)),T},y.prototype.peekJSXToken=function(){var P=this.scanner.saveState();this.scanner.scanComments();var w=this.lexJSX();return this.scanner.restoreState(P),w},y.prototype.expectJSX=function(P){var w=this.nextJSXToken();(w.type!==7||w.value!==P)&&this.throwUnexpectedToken(w)},y.prototype.matchJSX=function(P){var w=this.peekJSXToken();return w.type===7&&w.value===P},y.prototype.parseJSXIdentifier=function(){var P=this.createJSXNode(),w=this.nextJSXToken();return w.type!==100&&this.throwUnexpectedToken(w),this.finalize(P,new a.JSXIdentifier(w.value))},y.prototype.parseJSXElementName=function(){var P=this.createJSXNode(),w=this.parseJSXIdentifier();if(this.matchJSX(":")){var D=w;this.expectJSX(":");var T=this.parseJSXIdentifier();w=this.finalize(P,new a.JSXNamespacedName(D,T))}else if(this.matchJSX("."))for(;this.matchJSX(".");){var _=w;this.expectJSX(".");var I=this.parseJSXIdentifier();w=this.finalize(P,new a.JSXMemberExpression(_,I))}return w},y.prototype.parseJSXAttributeName=function(){var P=this.createJSXNode(),w,D=this.parseJSXIdentifier();if(this.matchJSX(":")){var T=D;this.expectJSX(":");var _=this.parseJSXIdentifier();w=this.finalize(P,new a.JSXNamespacedName(T,_))}else w=D;return w},y.prototype.parseJSXStringLiteralAttribute=function(){var P=this.createJSXNode(),w=this.nextJSXToken();w.type!==8&&this.throwUnexpectedToken(w);var D=this.getTokenRaw(w);return this.finalize(P,new c.Literal(w.value,D))},y.prototype.parseJSXExpressionAttribute=function(){var P=this.createJSXNode();this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression");var w=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(P,new a.JSXExpressionContainer(w))},y.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},y.prototype.parseJSXNameValueAttribute=function(){var P=this.createJSXNode(),w=this.parseJSXAttributeName(),D=null;return this.matchJSX("=")&&(this.expectJSX("="),D=this.parseJSXAttributeValue()),this.finalize(P,new a.JSXAttribute(w,D))},y.prototype.parseJSXSpreadAttribute=function(){var P=this.createJSXNode();this.expectJSX("{"),this.expectJSX("..."),this.finishJSX();var w=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(P,new a.JSXSpreadAttribute(w))},y.prototype.parseJSXAttributes=function(){for(var P=[];!this.matchJSX("/")&&!this.matchJSX(">");){var w=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();P.push(w)}return P},y.prototype.parseJSXOpeningElement=function(){var P=this.createJSXNode();this.expectJSX("<");var w=this.parseJSXElementName(),D=this.parseJSXAttributes(),T=this.matchJSX("/");return T&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(P,new a.JSXOpeningElement(w,T,D))},y.prototype.parseJSXBoundaryElement=function(){var P=this.createJSXNode();if(this.expectJSX("<"),this.matchJSX("/")){this.expectJSX("/");var w=this.parseJSXElementName();return this.expectJSX(">"),this.finalize(P,new a.JSXClosingElement(w))}var D=this.parseJSXElementName(),T=this.parseJSXAttributes(),_=this.matchJSX("/");return _&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(P,new a.JSXOpeningElement(D,_,T))},y.prototype.parseJSXEmptyExpression=function(){var P=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.finalize(P,new a.JSXEmptyExpression)},y.prototype.parseJSXExpressionContainer=function(){var P=this.createJSXNode();this.expectJSX("{");var w;return this.matchJSX("}")?(w=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),w=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(P,new a.JSXExpressionContainer(w))},y.prototype.parseJSXChildren=function(){for(var P=[];!this.scanner.eof();){var w=this.createJSXChildNode(),D=this.nextJSXText();if(D.start<D.end){var T=this.getTokenRaw(D),_=this.finalize(w,new a.JSXText(D.value,T));P.push(_)}if(this.scanner.source[this.scanner.index]==="{"){var I=this.parseJSXExpressionContainer();P.push(I)}else break}return P},y.prototype.parseComplexJSXElement=function(P){for(var w=[];!this.scanner.eof();){P.children=P.children.concat(this.parseJSXChildren());var D=this.createJSXChildNode(),T=this.parseJSXBoundaryElement();if(T.type===h.JSXSyntax.JSXOpeningElement){var _=T;if(_.selfClosing){var I=this.finalize(D,new a.JSXElement(_,[],null));P.children.push(I)}else w.push(P),P={node:D,opening:_,closing:null,children:[]}}if(T.type===h.JSXSyntax.JSXClosingElement){P.closing=T;var F=v(P.opening.name),G=v(P.closing.name);if(F!==G&&this.tolerateError("Expected corresponding JSX closing tag for %0",F),w.length>0){var I=this.finalize(P.node,new a.JSXElement(P.opening,P.children,P.closing));P=w[w.length-1],P.children.push(I),w.pop()}else break}}return P},y.prototype.parseJSXElement=function(){var P=this.createJSXNode(),w=this.parseJSXOpeningElement(),D=[],T=null;if(!w.selfClosing){var _=this.parseComplexJSXElement({node:P,opening:w,closing:T,children:D});D=_.children,T=_.closing}return this.finalize(P,new a.JSXElement(w,D,T))},y.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var P=this.parseJSXElement();return this.finishJSX(),P},y.prototype.isStartOfExpression=function(){return g.prototype.isStartOfExpression.call(this)||this.match("<")},y}(d.Parser);n.JSXParser=S},function(i,n){Object.defineProperty(n,"__esModule",{value:!0});var r={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};n.Character={fromCodePoint:function(o){return o<65536?String.fromCharCode(o):String.fromCharCode(55296+(o-65536>>10))+String.fromCharCode(56320+(o-65536&1023))},isWhiteSpace:function(o){return o===32||o===9||o===11||o===12||o===160||o>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(o)>=0},isLineTerminator:function(o){return o===10||o===13||o===8232||o===8233},isIdentifierStart:function(o){return o===36||o===95||o>=65&&o<=90||o>=97&&o<=122||o===92||o>=128&&r.NonAsciiIdentifierStart.test(n.Character.fromCodePoint(o))},isIdentifierPart:function(o){return o===36||o===95||o>=65&&o<=90||o>=97&&o<=122||o>=48&&o<=57||o===92||o>=128&&r.NonAsciiIdentifierPart.test(n.Character.fromCodePoint(o))},isDecimalDigit:function(o){return o>=48&&o<=57},isHexDigit:function(o){return o>=48&&o<=57||o>=65&&o<=70||o>=97&&o<=102},isOctalDigit:function(o){return o>=48&&o<=55}}},function(i,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(6),s=function(){function P(w){this.type=o.JSXSyntax.JSXClosingElement,this.name=w}return P}();n.JSXClosingElement=s;var a=function(){function P(w,D,T){this.type=o.JSXSyntax.JSXElement,this.openingElement=w,this.children=D,this.closingElement=T}return P}();n.JSXElement=a;var h=function(){function P(){this.type=o.JSXSyntax.JSXEmptyExpression}return P}();n.JSXEmptyExpression=h;var c=function(){function P(w){this.type=o.JSXSyntax.JSXExpressionContainer,this.expression=w}return P}();n.JSXExpressionContainer=c;var d=function(){function P(w){this.type=o.JSXSyntax.JSXIdentifier,this.name=w}return P}();n.JSXIdentifier=d;var f=function(){function P(w,D){this.type=o.JSXSyntax.JSXMemberExpression,this.object=w,this.property=D}return P}();n.JSXMemberExpression=f;var m=function(){function P(w,D){this.type=o.JSXSyntax.JSXAttribute,this.name=w,this.value=D}return P}();n.JSXAttribute=m;var v=function(){function P(w,D){this.type=o.JSXSyntax.JSXNamespacedName,this.namespace=w,this.name=D}return P}();n.JSXNamespacedName=v;var S=function(){function P(w,D,T){this.type=o.JSXSyntax.JSXOpeningElement,this.name=w,this.selfClosing=D,this.attributes=T}return P}();n.JSXOpeningElement=S;var g=function(){function P(w){this.type=o.JSXSyntax.JSXSpreadAttribute,this.argument=w}return P}();n.JSXSpreadAttribute=g;var y=function(){function P(w,D){this.type=o.JSXSyntax.JSXText,this.value=w,this.raw=D}return P}();n.JSXText=y},function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(i,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(2),s=function(){function X($){this.type=o.Syntax.ArrayExpression,this.elements=$}return X}();n.ArrayExpression=s;var a=function(){function X($){this.type=o.Syntax.ArrayPattern,this.elements=$}return X}();n.ArrayPattern=a;var h=function(){function X($,q,ut){this.type=o.Syntax.ArrowFunctionExpression,this.id=null,this.params=$,this.body=q,this.generator=!1,this.expression=ut,this.async=!1}return X}();n.ArrowFunctionExpression=h;var c=function(){function X($,q,ut){this.type=o.Syntax.AssignmentExpression,this.operator=$,this.left=q,this.right=ut}return X}();n.AssignmentExpression=c;var d=function(){function X($,q){this.type=o.Syntax.AssignmentPattern,this.left=$,this.right=q}return X}();n.AssignmentPattern=d;var f=function(){function X($,q,ut){this.type=o.Syntax.ArrowFunctionExpression,this.id=null,this.params=$,this.body=q,this.generator=!1,this.expression=ut,this.async=!0}return X}();n.AsyncArrowFunctionExpression=f;var m=function(){function X($,q,ut){this.type=o.Syntax.FunctionDeclaration,this.id=$,this.params=q,this.body=ut,this.generator=!1,this.expression=!1,this.async=!0}return X}();n.AsyncFunctionDeclaration=m;var v=function(){function X($,q,ut){this.type=o.Syntax.FunctionExpression,this.id=$,this.params=q,this.body=ut,this.generator=!1,this.expression=!1,this.async=!0}return X}();n.AsyncFunctionExpression=v;var S=function(){function X($){this.type=o.Syntax.AwaitExpression,this.argument=$}return X}();n.AwaitExpression=S;var g=function(){function X($,q,ut){var fe=$==="||"||$==="&&";this.type=fe?o.Syntax.LogicalExpression:o.Syntax.BinaryExpression,this.operator=$,this.left=q,this.right=ut}return X}();n.BinaryExpression=g;var y=function(){function X($){this.type=o.Syntax.BlockStatement,this.body=$}return X}();n.BlockStatement=y;var P=function(){function X($){this.type=o.Syntax.BreakStatement,this.label=$}return X}();n.BreakStatement=P;var w=function(){function X($,q){this.type=o.Syntax.CallExpression,this.callee=$,this.arguments=q}return X}();n.CallExpression=w;var D=function(){function X($,q){this.type=o.Syntax.CatchClause,this.param=$,this.body=q}return X}();n.CatchClause=D;var T=function(){function X($){this.type=o.Syntax.ClassBody,this.body=$}return X}();n.ClassBody=T;var _=function(){function X($,q,ut){this.type=o.Syntax.ClassDeclaration,this.id=$,this.superClass=q,this.body=ut}return X}();n.ClassDeclaration=_;var I=function(){function X($,q,ut){this.type=o.Syntax.ClassExpression,this.id=$,this.superClass=q,this.body=ut}return X}();n.ClassExpression=I;var F=function(){function X($,q){this.type=o.Syntax.MemberExpression,this.computed=!0,this.object=$,this.property=q}return X}();n.ComputedMemberExpression=F;var G=function(){function X($,q,ut){this.type=o.Syntax.ConditionalExpression,this.test=$,this.consequent=q,this.alternate=ut}return X}();n.ConditionalExpression=G;var z=function(){function X($){this.type=o.Syntax.ContinueStatement,this.label=$}return X}();n.ContinueStatement=z;var U=function(){function X(){this.type=o.Syntax.DebuggerStatement}return X}();n.DebuggerStatement=U;var Y=function(){function X($,q){this.type=o.Syntax.ExpressionStatement,this.expression=$,this.directive=q}return X}();n.Directive=Y;var Q=function(){function X($,q){this.type=o.Syntax.DoWhileStatement,this.body=$,this.test=q}return X}();n.DoWhileStatement=Q;var W=function(){function X(){this.type=o.Syntax.EmptyStatement}return X}();n.EmptyStatement=W;var V=function(){function X($){this.type=o.Syntax.ExportAllDeclaration,this.source=$}return X}();n.ExportAllDeclaration=V;var et=function(){function X($){this.type=o.Syntax.ExportDefaultDeclaration,this.declaration=$}return X}();n.ExportDefaultDeclaration=et;var ct=function(){function X($,q,ut){this.type=o.Syntax.ExportNamedDeclaration,this.declaration=$,this.specifiers=q,this.source=ut}return X}();n.ExportNamedDeclaration=ct;var ft=function(){function X($,q){this.type=o.Syntax.ExportSpecifier,this.exported=q,this.local=$}return X}();n.ExportSpecifier=ft;var yt=function(){function X($){this.type=o.Syntax.ExpressionStatement,this.expression=$}return X}();n.ExpressionStatement=yt;var Pt=function(){function X($,q,ut){this.type=o.Syntax.ForInStatement,this.left=$,this.right=q,this.body=ut,this.each=!1}return X}();n.ForInStatement=Pt;var xt=function(){function X($,q,ut){this.type=o.Syntax.ForOfStatement,this.left=$,this.right=q,this.body=ut}return X}();n.ForOfStatement=xt;var _t=function(){function X($,q,ut,fe){this.type=o.Syntax.ForStatement,this.init=$,this.test=q,this.update=ut,this.body=fe}return X}();n.ForStatement=_t;var kt=function(){function X($,q,ut,fe){this.type=o.Syntax.FunctionDeclaration,this.id=$,this.params=q,this.body=ut,this.generator=fe,this.expression=!1,this.async=!1}return X}();n.FunctionDeclaration=kt;var Xt=function(){function X($,q,ut,fe){this.type=o.Syntax.FunctionExpression,this.id=$,this.params=q,this.body=ut,this.generator=fe,this.expression=!1,this.async=!1}return X}();n.FunctionExpression=Xt;var he=function(){function X($){this.type=o.Syntax.Identifier,this.name=$}return X}();n.Identifier=he;var Vt=function(){function X($,q,ut){this.type=o.Syntax.IfStatement,this.test=$,this.consequent=q,this.alternate=ut}return X}();n.IfStatement=Vt;var ve=function(){function X($,q){this.type=o.Syntax.ImportDeclaration,this.specifiers=$,this.source=q}return X}();n.ImportDeclaration=ve;var $e=function(){function X($){this.type=o.Syntax.ImportDefaultSpecifier,this.local=$}return X}();n.ImportDefaultSpecifier=$e;var ne=function(){function X($){this.type=o.Syntax.ImportNamespaceSpecifier,this.local=$}return X}();n.ImportNamespaceSpecifier=ne;var Ht=function(){function X($,q){this.type=o.Syntax.ImportSpecifier,this.local=$,this.imported=q}return X}();n.ImportSpecifier=Ht;var Ne=function(){function X($,q){this.type=o.Syntax.LabeledStatement,this.label=$,this.body=q}return X}();n.LabeledStatement=Ne;var re=function(){function X($,q){this.type=o.Syntax.Literal,this.value=$,this.raw=q}return X}();n.Literal=re;var Fe=function(){function X($,q){this.type=o.Syntax.MetaProperty,this.meta=$,this.property=q}return X}();n.MetaProperty=Fe;var Ae=function(){function X($,q,ut,fe,xr){this.type=o.Syntax.MethodDefinition,this.key=$,this.computed=q,this.value=ut,this.kind=fe,this.static=xr}return X}();n.MethodDefinition=Ae;var ri=function(){function X($){this.type=o.Syntax.Program,this.body=$,this.sourceType="module"}return X}();n.Module=ri;var Ft=function(){function X($,q){this.type=o.Syntax.NewExpression,this.callee=$,this.arguments=q}return X}();n.NewExpression=Ft;var de=function(){function X($){this.type=o.Syntax.ObjectExpression,this.properties=$}return X}();n.ObjectExpression=de;var Me=function(){function X($){this.type=o.Syntax.ObjectPattern,this.properties=$}return X}();n.ObjectPattern=Me;var si=function(){function X($,q,ut,fe,xr,Sa){this.type=o.Syntax.Property,this.key=q,this.computed=ut,this.value=fe,this.kind=$,this.method=xr,this.shorthand=Sa}return X}();n.Property=si;var gr=function(){function X($,q,ut,fe){this.type=o.Syntax.Literal,this.value=$,this.raw=q,this.regex={pattern:ut,flags:fe}}return X}();n.RegexLiteral=gr;var Ui=function(){function X($){this.type=o.Syntax.RestElement,this.argument=$}return X}();n.RestElement=Ui;var Or=function(){function X($){this.type=o.Syntax.ReturnStatement,this.argument=$}return X}();n.ReturnStatement=Or;var ra=function(){function X($){this.type=o.Syntax.Program,this.body=$,this.sourceType="script"}return X}();n.Script=ra;var sa=function(){function X($){this.type=o.Syntax.SequenceExpression,this.expressions=$}return X}();n.SequenceExpression=sa;var oa=function(){function X($){this.type=o.Syntax.SpreadElement,this.argument=$}return X}();n.SpreadElement=oa;var la=function(){function X($,q){this.type=o.Syntax.MemberExpression,this.computed=!1,this.object=$,this.property=q}return X}();n.StaticMemberExpression=la;var aa=function(){function X(){this.type=o.Syntax.Super}return X}();n.Super=aa;var ha=function(){function X($,q){this.type=o.Syntax.SwitchCase,this.test=$,this.consequent=q}return X}();n.SwitchCase=ha;var ua=function(){function X($,q){this.type=o.Syntax.SwitchStatement,this.discriminant=$,this.cases=q}return X}();n.SwitchStatement=ua;var ca=function(){function X($,q){this.type=o.Syntax.TaggedTemplateExpression,this.tag=$,this.quasi=q}return X}();n.TaggedTemplateExpression=ca;var pa=function(){function X($,q){this.type=o.Syntax.TemplateElement,this.value=$,this.tail=q}return X}();n.TemplateElement=pa;var da=function(){function X($,q){this.type=o.Syntax.TemplateLiteral,this.quasis=$,this.expressions=q}return X}();n.TemplateLiteral=da;var fa=function(){function X(){this.type=o.Syntax.ThisExpression}return X}();n.ThisExpression=fa;var ma=function(){function X($){this.type=o.Syntax.ThrowStatement,this.argument=$}return X}();n.ThrowStatement=ma;var ga=function(){function X($,q,ut){this.type=o.Syntax.TryStatement,this.block=$,this.handler=q,this.finalizer=ut}return X}();n.TryStatement=ga;var Oa=function(){function X($,q){this.type=o.Syntax.UnaryExpression,this.operator=$,this.argument=q,this.prefix=!0}return X}();n.UnaryExpression=Oa;var ya=function(){function X($,q,ut){this.type=o.Syntax.UpdateExpression,this.operator=$,this.argument=q,this.prefix=ut}return X}();n.UpdateExpression=ya;var xa=function(){function X($,q){this.type=o.Syntax.VariableDeclaration,this.declarations=$,this.kind=q}return X}();n.VariableDeclaration=xa;var va=function(){function X($,q){this.type=o.Syntax.VariableDeclarator,this.id=$,this.init=q}return X}();n.VariableDeclarator=va;var Pa=function(){function X($,q){this.type=o.Syntax.WhileStatement,this.test=$,this.body=q}return X}();n.WhileStatement=Pa;var yr=function(){function X($,q){this.type=o.Syntax.WithStatement,this.object=$,this.body=q}return X}();n.WithStatement=yr;var Ca=function(){function X($,q){this.type=o.Syntax.YieldExpression,this.argument=$,this.delegate=q}return X}();n.YieldExpression=Ca},function(i,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(9),s=r(10),a=r(11),h=r(7),c=r(12),d=r(2),f=r(13),m="ArrowParameterPlaceHolder",v=function(){function S(g,y,P){y===void 0&&(y={}),this.config={range:typeof y.range=="boolean"&&y.range,loc:typeof y.loc=="boolean"&&y.loc,source:null,tokens:typeof y.tokens=="boolean"&&y.tokens,comment:typeof y.comment=="boolean"&&y.comment,tolerant:typeof y.tolerant=="boolean"&&y.tolerant},this.config.loc&&y.source&&y.source!==null&&(this.config.source=String(y.source)),this.delegate=P,this.errorHandler=new s.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new c.Scanner(g,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={isModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}return S.prototype.throwError=function(g){var y=Array.prototype.slice.call(arguments,1),P=g.replace(/%(\d)/g,function(_,I){return o.assert(I<y.length,"Message reference must be in range"),y[I]}),w=this.lastMarker.index,D=this.lastMarker.line,T=this.lastMarker.column+1;throw this.errorHandler.createError(w,D,T,P)},S.prototype.tolerateError=function(g){var y=Array.prototype.slice.call(arguments,1),P=g.replace(/%(\d)/g,function(_,I){return o.assert(I<y.length,"Message reference must be in range"),y[I]}),w=this.lastMarker.index,D=this.scanner.lineNumber,T=this.lastMarker.column+1;this.errorHandler.tolerateError(w,D,T,P)},S.prototype.unexpectedTokenError=function(g,y){var P=y||a.Messages.UnexpectedToken,w;if(g?(y||(P=g.type===2?a.Messages.UnexpectedEOS:g.type===3?a.Messages.UnexpectedIdentifier:g.type===6?a.Messages.UnexpectedNumber:g.type===8?a.Messages.UnexpectedString:g.type===10?a.Messages.UnexpectedTemplate:a.Messages.UnexpectedToken,g.type===4&&(this.scanner.isFutureReservedWord(g.value)?P=a.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(g.value)&&(P=a.Messages.StrictReservedWord))),w=g.value):w="ILLEGAL",P=P.replace("%0",w),g&&typeof g.lineNumber=="number"){var D=g.start,T=g.lineNumber,_=this.lastMarker.index-this.lastMarker.column,I=g.start-_+1;return this.errorHandler.createError(D,T,I,P)}else{var D=this.lastMarker.index,T=this.lastMarker.line,I=this.lastMarker.column+1;return this.errorHandler.createError(D,T,I,P)}},S.prototype.throwUnexpectedToken=function(g,y){throw this.unexpectedTokenError(g,y)},S.prototype.tolerateUnexpectedToken=function(g,y){this.errorHandler.tolerate(this.unexpectedTokenError(g,y))},S.prototype.collectComments=function(){if(!this.config.comment)this.scanner.scanComments();else{var g=this.scanner.scanComments();if(g.length>0&&this.delegate)for(var y=0;y<g.length;++y){var P=g[y],w=void 0;w={type:P.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(P.slice[0],P.slice[1])},this.config.range&&(w.range=P.range),this.config.loc&&(w.loc=P.loc);var D={start:{line:P.loc.start.line,column:P.loc.start.column,offset:P.range[0]},end:{line:P.loc.end.line,column:P.loc.end.column,offset:P.range[1]}};this.delegate(w,D)}}},S.prototype.getTokenRaw=function(g){return this.scanner.source.slice(g.start,g.end)},S.prototype.convertToken=function(g){var y={type:f.TokenName[g.type],value:this.getTokenRaw(g)};if(this.config.range&&(y.range=[g.start,g.end]),this.config.loc&&(y.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),g.type===9){var P=g.pattern,w=g.flags;y.regex={pattern:P,flags:w}}return y},S.prototype.nextToken=function(){var g=this.lookahead;this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var y=this.scanner.lex();return this.hasLineTerminator=g.lineNumber!==y.lineNumber,y&&this.context.strict&&y.type===3&&this.scanner.isStrictModeReservedWord(y.value)&&(y.type=4),this.lookahead=y,this.config.tokens&&y.type!==2&&this.tokens.push(this.convertToken(y)),g},S.prototype.nextRegexToken=function(){this.collectComments();var g=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(g))),this.lookahead=g,this.nextToken(),g},S.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}},S.prototype.startNode=function(g,y){y===void 0&&(y=0);var P=g.start-g.lineStart,w=g.lineNumber;return P<0&&(P+=y,w--),{index:g.start,line:w,column:P}},S.prototype.finalize=function(g,y){if(this.config.range&&(y.range=[g.index,this.lastMarker.index]),this.config.loc&&(y.loc={start:{line:g.line,column:g.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(y.loc.source=this.config.source)),this.delegate){var P={start:{line:g.line,column:g.column,offset:g.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}};this.delegate(y,P)}return y},S.prototype.expect=function(g){var y=this.nextToken();(y.type!==7||y.value!==g)&&this.throwUnexpectedToken(y)},S.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var g=this.lookahead;g.type===7&&g.value===","?this.nextToken():g.type===7&&g.value===";"?(this.nextToken(),this.tolerateUnexpectedToken(g)):this.tolerateUnexpectedToken(g,a.Messages.UnexpectedToken)}else this.expect(",")},S.prototype.expectKeyword=function(g){var y=this.nextToken();(y.type!==4||y.value!==g)&&this.throwUnexpectedToken(y)},S.prototype.match=function(g){return this.lookahead.type===7&&this.lookahead.value===g},S.prototype.matchKeyword=function(g){return this.lookahead.type===4&&this.lookahead.value===g},S.prototype.matchContextualKeyword=function(g){return this.lookahead.type===3&&this.lookahead.value===g},S.prototype.matchAssign=function(){if(this.lookahead.type!==7)return!1;var g=this.lookahead.value;return g==="="||g==="*="||g==="**="||g==="/="||g==="%="||g==="+="||g==="-="||g==="<<="||g===">>="||g===">>>="||g==="&="||g==="^="||g==="|="},S.prototype.isolateCoverGrammar=function(g){var y=this.context.isBindingElement,P=this.context.isAssignmentTarget,w=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var D=g.call(this);return this.context.firstCoverInitializedNameError!==null&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=y,this.context.isAssignmentTarget=P,this.context.firstCoverInitializedNameError=w,D},S.prototype.inheritCoverGrammar=function(g){var y=this.context.isBindingElement,P=this.context.isAssignmentTarget,w=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var D=g.call(this);return this.context.isBindingElement=this.context.isBindingElement&&y,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&P,this.context.firstCoverInitializedNameError=w||this.context.firstCoverInitializedNameError,D},S.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(this.lookahead.type!==2&&!this.match("}")&&this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)},S.prototype.parsePrimaryExpression=function(){var g=this.createNode(),y,P,w;switch(this.lookahead.type){case 3:(this.context.isModule||this.context.await)&&this.lookahead.value==="await"&&this.tolerateUnexpectedToken(this.lookahead),y=this.matchAsyncFunction()?this.parseFunctionExpression():this.finalize(g,new h.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,a.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,P=this.nextToken(),w=this.getTokenRaw(P),y=this.finalize(g,new h.Literal(P.value,w));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,P=this.nextToken(),w=this.getTokenRaw(P),y=this.finalize(g,new h.Literal(P.value==="true",w));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,P=this.nextToken(),w=this.getTokenRaw(P),y=this.finalize(g,new h.Literal(null,w));break;case 10:y=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,y=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":y=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":y=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,P=this.nextRegexToken(),w=this.getTokenRaw(P),y=this.finalize(g,new h.RegexLiteral(P.regex,w,P.pattern,P.flags));break;default:y=this.throwUnexpectedToken(this.nextToken())}break;case 4:!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?y=this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?y=this.finalize(g,new h.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?y=this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),y=this.finalize(g,new h.ThisExpression)):this.matchKeyword("class")?y=this.parseClassExpression():y=this.throwUnexpectedToken(this.nextToken()));break;default:y=this.throwUnexpectedToken(this.nextToken())}return y},S.prototype.parseSpreadElement=function(){var g=this.createNode();this.expect("...");var y=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(g,new h.SpreadElement(y))},S.prototype.parseArrayInitializer=function(){var g=this.createNode(),y=[];for(this.expect("[");!this.match("]");)if(this.match(","))this.nextToken(),y.push(null);else if(this.match("...")){var P=this.parseSpreadElement();this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),y.push(P)}else y.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(",");return this.expect("]"),this.finalize(g,new h.ArrayExpression(y))},S.prototype.parsePropertyMethod=function(g){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var y=this.context.strict,P=this.context.allowStrictDirective;this.context.allowStrictDirective=g.simple;var w=this.isolateCoverGrammar(this.parseFunctionSourceElements);return this.context.strict&&g.firstRestricted&&this.tolerateUnexpectedToken(g.firstRestricted,g.message),this.context.strict&&g.stricted&&this.tolerateUnexpectedToken(g.stricted,g.message),this.context.strict=y,this.context.allowStrictDirective=P,w},S.prototype.parsePropertyMethodFunction=function(){var g=!1,y=this.createNode(),P=this.context.allowYield;this.context.allowYield=!0;var w=this.parseFormalParameters(),D=this.parsePropertyMethod(w);return this.context.allowYield=P,this.finalize(y,new h.FunctionExpression(null,w.params,D,g))},S.prototype.parsePropertyMethodAsyncFunction=function(){var g=this.createNode(),y=this.context.allowYield,P=this.context.await;this.context.allowYield=!1,this.context.await=!0;var w=this.parseFormalParameters(),D=this.parsePropertyMethod(w);return this.context.allowYield=y,this.context.await=P,this.finalize(g,new h.AsyncFunctionExpression(null,w.params,D))},S.prototype.parseObjectPropertyKey=function(){var g=this.createNode(),y=this.nextToken(),P;switch(y.type){case 8:case 6:this.context.strict&&y.octal&&this.tolerateUnexpectedToken(y,a.Messages.StrictOctalLiteral);var w=this.getTokenRaw(y);P=this.finalize(g,new h.Literal(y.value,w));break;case 3:case 1:case 5:case 4:P=this.finalize(g,new h.Identifier(y.value));break;case 7:y.value==="["?(P=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):P=this.throwUnexpectedToken(y);break;default:P=this.throwUnexpectedToken(y)}return P},S.prototype.isPropertyKey=function(g,y){return g.type===d.Syntax.Identifier&&g.name===y||g.type===d.Syntax.Literal&&g.value===y},S.prototype.parseObjectProperty=function(g){var y=this.createNode(),P=this.lookahead,w,D=null,T=null,_=!1,I=!1,F=!1,G=!1;if(P.type===3){var z=P.value;this.nextToken(),_=this.match("["),G=!this.hasLineTerminator&&z==="async"&&!this.match(":")&&!this.match("(")&&!this.match("*")&&!this.match(","),D=G?this.parseObjectPropertyKey():this.finalize(y,new h.Identifier(z))}else this.match("*")?this.nextToken():(_=this.match("["),D=this.parseObjectPropertyKey());var U=this.qualifiedPropertyName(this.lookahead);if(P.type===3&&!G&&P.value==="get"&&U)w="get",_=this.match("["),D=this.parseObjectPropertyKey(),this.context.allowYield=!1,T=this.parseGetterMethod();else if(P.type===3&&!G&&P.value==="set"&&U)w="set",_=this.match("["),D=this.parseObjectPropertyKey(),T=this.parseSetterMethod();else if(P.type===7&&P.value==="*"&&U)w="init",_=this.match("["),D=this.parseObjectPropertyKey(),T=this.parseGeneratorMethod(),I=!0;else if(D||this.throwUnexpectedToken(this.lookahead),w="init",this.match(":")&&!G)!_&&this.isPropertyKey(D,"__proto__")&&(g.value&&this.tolerateError(a.Messages.DuplicateProtoProperty),g.value=!0),this.nextToken(),T=this.inheritCoverGrammar(this.parseAssignmentExpression);else if(this.match("("))T=G?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),I=!0;else if(P.type===3){var z=this.finalize(y,new h.Identifier(P.value));if(this.match("=")){this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),F=!0;var Y=this.isolateCoverGrammar(this.parseAssignmentExpression);T=this.finalize(y,new h.AssignmentPattern(z,Y))}else F=!0,T=z}else this.throwUnexpectedToken(this.nextToken());return this.finalize(y,new h.Property(w,D,_,T,I,F))},S.prototype.parseObjectInitializer=function(){var g=this.createNode();this.expect("{");for(var y=[],P={value:!1};!this.match("}");)y.push(this.parseObjectProperty(P)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(g,new h.ObjectExpression(y))},S.prototype.parseTemplateHead=function(){o.assert(this.lookahead.head,"Template literal must start with a template head");var g=this.createNode(),y=this.nextToken(),P=y.value,w=y.cooked;return this.finalize(g,new h.TemplateElement({raw:P,cooked:w},y.tail))},S.prototype.parseTemplateElement=function(){this.lookahead.type!==10&&this.throwUnexpectedToken();var g=this.createNode(),y=this.nextToken(),P=y.value,w=y.cooked;return this.finalize(g,new h.TemplateElement({raw:P,cooked:w},y.tail))},S.prototype.parseTemplateLiteral=function(){var g=this.createNode(),y=[],P=[],w=this.parseTemplateHead();for(P.push(w);!w.tail;)y.push(this.parseExpression()),w=this.parseTemplateElement(),P.push(w);return this.finalize(g,new h.TemplateLiteral(P,y))},S.prototype.reinterpretExpressionAsPattern=function(g){switch(g.type){case d.Syntax.Identifier:case d.Syntax.MemberExpression:case d.Syntax.RestElement:case d.Syntax.AssignmentPattern:break;case d.Syntax.SpreadElement:g.type=d.Syntax.RestElement,this.reinterpretExpressionAsPattern(g.argument);break;case d.Syntax.ArrayExpression:g.type=d.Syntax.ArrayPattern;for(var y=0;y<g.elements.length;y++)g.elements[y]!==null&&this.reinterpretExpressionAsPattern(g.elements[y]);break;case d.Syntax.ObjectExpression:g.type=d.Syntax.ObjectPattern;for(var y=0;y<g.properties.length;y++)this.reinterpretExpressionAsPattern(g.properties[y].value);break;case d.Syntax.AssignmentExpression:g.type=d.Syntax.AssignmentPattern,delete g.operator,this.reinterpretExpressionAsPattern(g.left);break}},S.prototype.parseGroupExpression=function(){var g;if(this.expect("("),this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),g={type:m,params:[],async:!1};else{var y=this.lookahead,P=[];if(this.match("..."))g=this.parseRestElement(P),this.expect(")"),this.match("=>")||this.expect("=>"),g={type:m,params:[g],async:!1};else{var w=!1;if(this.context.isBindingElement=!0,g=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(",")){var D=[];for(this.context.isAssignmentTarget=!1,D.push(g);this.lookahead.type!==2&&this.match(",");){if(this.nextToken(),this.match(")")){this.nextToken();for(var T=0;T<D.length;T++)this.reinterpretExpressionAsPattern(D[T]);w=!0,g={type:m,params:D,async:!1}}else if(this.match("...")){this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),D.push(this.parseRestElement(P)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1;for(var T=0;T<D.length;T++)this.reinterpretExpressionAsPattern(D[T]);w=!0,g={type:m,params:D,async:!1}}else D.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(w)break}w||(g=this.finalize(this.startNode(y),new h.SequenceExpression(D)))}if(!w){if(this.expect(")"),this.match("=>")&&(g.type===d.Syntax.Identifier&&g.name==="yield"&&(w=!0,g={type:m,params:[g],async:!1}),!w)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),g.type===d.Syntax.SequenceExpression)for(var T=0;T<g.expressions.length;T++)this.reinterpretExpressionAsPattern(g.expressions[T]);else this.reinterpretExpressionAsPattern(g);var _=g.type===d.Syntax.SequenceExpression?g.expressions:[g];g={type:m,params:_,async:!1}}this.context.isBindingElement=!1}}}return g},S.prototype.parseArguments=function(){this.expect("(");var g=[];if(!this.match(")"))for(;;){var y=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(g.push(y),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),g},S.prototype.isIdentifierName=function(g){return g.type===3||g.type===4||g.type===1||g.type===5},S.prototype.parseIdentifierName=function(){var g=this.createNode(),y=this.nextToken();return this.isIdentifierName(y)||this.throwUnexpectedToken(y),this.finalize(g,new h.Identifier(y.value))},S.prototype.parseNewExpression=function(){var g=this.createNode(),y=this.parseIdentifierName();o.assert(y.name==="new","New expression must start with `new`");var P;if(this.match("."))if(this.nextToken(),this.lookahead.type===3&&this.context.inFunctionBody&&this.lookahead.value==="target"){var w=this.parseIdentifierName();P=new h.MetaProperty(y,w)}else this.throwUnexpectedToken(this.lookahead);else{var D=this.isolateCoverGrammar(this.parseLeftHandSideExpression),T=this.match("(")?this.parseArguments():[];P=new h.NewExpression(D,T),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return this.finalize(g,P)},S.prototype.parseAsyncArgument=function(){var g=this.parseAssignmentExpression();return this.context.firstCoverInitializedNameError=null,g},S.prototype.parseAsyncArguments=function(){this.expect("(");var g=[];if(!this.match(")"))for(;;){var y=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAsyncArgument);if(g.push(y),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),g},S.prototype.parseLeftHandSideExpressionAllowCall=function(){var g=this.lookahead,y=this.matchContextualKeyword("async"),P=this.context.allowIn;this.context.allowIn=!0;var w;for(this.matchKeyword("super")&&this.context.inFunctionBody?(w=this.createNode(),this.nextToken(),w=this.finalize(w,new h.Super),!this.match("(")&&!this.match(".")&&!this.match("[")&&this.throwUnexpectedToken(this.lookahead)):w=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var D=this.parseIdentifierName();w=this.finalize(this.startNode(g),new h.StaticMemberExpression(w,D))}else if(this.match("(")){var T=y&&g.lineNumber===this.lookahead.lineNumber;this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;var _=T?this.parseAsyncArguments():this.parseArguments();if(w=this.finalize(this.startNode(g),new h.CallExpression(w,_)),T&&this.match("=>")){for(var I=0;I<_.length;++I)this.reinterpretExpressionAsPattern(_[I]);w={type:m,params:_,async:!0}}}else if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var D=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),w=this.finalize(this.startNode(g),new h.ComputedMemberExpression(w,D))}else if(this.lookahead.type===10&&this.lookahead.head){var F=this.parseTemplateLiteral();w=this.finalize(this.startNode(g),new h.TaggedTemplateExpression(w,F))}else break;return this.context.allowIn=P,w},S.prototype.parseSuper=function(){var g=this.createNode();return this.expectKeyword("super"),!this.match("[")&&!this.match(".")&&this.throwUnexpectedToken(this.lookahead),this.finalize(g,new h.Super)},S.prototype.parseLeftHandSideExpression=function(){o.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var g=this.startNode(this.lookahead),y=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var P=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),y=this.finalize(g,new h.ComputedMemberExpression(y,P))}else if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var P=this.parseIdentifierName();y=this.finalize(g,new h.StaticMemberExpression(y,P))}else if(this.lookahead.type===10&&this.lookahead.head){var w=this.parseTemplateLiteral();y=this.finalize(g,new h.TaggedTemplateExpression(y,w))}else break;return y},S.prototype.parseUpdateExpression=function(){var g,y=this.lookahead;if(this.match("++")||this.match("--")){var P=this.startNode(y),w=this.nextToken();g=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&g.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(g.name)&&this.tolerateError(a.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(a.Messages.InvalidLHSInAssignment);var D=!0;g=this.finalize(P,new h.UpdateExpression(w.value,g,D)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(g=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&this.lookahead.type===7&&(this.match("++")||this.match("--"))){this.context.strict&&g.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(g.name)&&this.tolerateError(a.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(a.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var T=this.nextToken().value,D=!1;g=this.finalize(this.startNode(y),new h.UpdateExpression(T,g,D))}return g},S.prototype.parseAwaitExpression=function(){var g=this.createNode();this.nextToken();var y=this.parseUnaryExpression();return this.finalize(g,new h.AwaitExpression(y))},S.prototype.parseUnaryExpression=function(){var g;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var y=this.startNode(this.lookahead),P=this.nextToken();g=this.inheritCoverGrammar(this.parseUnaryExpression),g=this.finalize(y,new h.UnaryExpression(P.value,g)),this.context.strict&&g.operator==="delete"&&g.argument.type===d.Syntax.Identifier&&this.tolerateError(a.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else this.context.await&&this.matchContextualKeyword("await")?g=this.parseAwaitExpression():g=this.parseUpdateExpression();return g},S.prototype.parseExponentiationExpression=function(){var g=this.lookahead,y=this.inheritCoverGrammar(this.parseUnaryExpression);if(y.type!==d.Syntax.UnaryExpression&&this.match("**")){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var P=y,w=this.isolateCoverGrammar(this.parseExponentiationExpression);y=this.finalize(this.startNode(g),new h.BinaryExpression("**",P,w))}return y},S.prototype.binaryPrecedence=function(g){var y=g.value,P;return g.type===7?P=this.operatorPrecedence[y]||0:g.type===4?P=y==="instanceof"||this.context.allowIn&&y==="in"?7:0:P=0,P},S.prototype.parseBinaryExpression=function(){var g=this.lookahead,y=this.inheritCoverGrammar(this.parseExponentiationExpression),P=this.lookahead,w=this.binaryPrecedence(P);if(w>0){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var D=[g,this.lookahead],T=y,_=this.isolateCoverGrammar(this.parseExponentiationExpression),I=[T,P.value,_],F=[w];w=this.binaryPrecedence(this.lookahead),!(w<=0);){for(;I.length>2&&w<=F[F.length-1];){_=I.pop();var G=I.pop();F.pop(),T=I.pop(),D.pop();var z=this.startNode(D[D.length-1]);I.push(this.finalize(z,new h.BinaryExpression(G,T,_)))}I.push(this.nextToken().value),F.push(w),D.push(this.lookahead),I.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var U=I.length-1;y=I[U];for(var Y=D.pop();U>1;){var Q=D.pop(),W=Y&&Y.lineStart,z=this.startNode(Q,W),G=I[U-1];y=this.finalize(z,new h.BinaryExpression(G,I[U-2],y)),U-=2,Y=Q}}return y},S.prototype.parseConditionalExpression=function(){var g=this.lookahead,y=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var P=this.context.allowIn;this.context.allowIn=!0;var w=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=P,this.expect(":");var D=this.isolateCoverGrammar(this.parseAssignmentExpression);y=this.finalize(this.startNode(g),new h.ConditionalExpression(y,w,D)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return y},S.prototype.checkPatternParam=function(g,y){switch(y.type){case d.Syntax.Identifier:this.validateParam(g,y,y.name);break;case d.Syntax.RestElement:this.checkPatternParam(g,y.argument);break;case d.Syntax.AssignmentPattern:this.checkPatternParam(g,y.left);break;case d.Syntax.ArrayPattern:for(var P=0;P<y.elements.length;P++)y.elements[P]!==null&&this.checkPatternParam(g,y.elements[P]);break;case d.Syntax.ObjectPattern:for(var P=0;P<y.properties.length;P++)this.checkPatternParam(g,y.properties[P].value);break}g.simple=g.simple&&y instanceof h.Identifier},S.prototype.reinterpretAsCoverFormalsList=function(g){var y=[g],P,w=!1;switch(g.type){case d.Syntax.Identifier:break;case m:y=g.params,w=g.async;break;default:return null}P={simple:!0,paramSet:{}};for(var D=0;D<y.length;++D){var T=y[D];T.type===d.Syntax.AssignmentPattern?T.right.type===d.Syntax.YieldExpression&&(T.right.argument&&this.throwUnexpectedToken(this.lookahead),T.right.type=d.Syntax.Identifier,T.right.name="yield",delete T.right.argument,delete T.right.delegate):w&&T.type===d.Syntax.Identifier&&T.name==="await"&&this.throwUnexpectedToken(this.lookahead),this.checkPatternParam(P,T),y[D]=T}if(this.context.strict||!this.context.allowYield)for(var D=0;D<y.length;++D){var T=y[D];T.type===d.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead)}if(P.message===a.Messages.StrictParamDupe){var _=this.context.strict?P.stricted:P.firstRestricted;this.throwUnexpectedToken(_,P.message)}return{simple:P.simple,params:y,stricted:P.stricted,firstRestricted:P.firstRestricted,message:P.message}},S.prototype.parseAssignmentExpression=function(){var g;if(!this.context.allowYield&&this.matchKeyword("yield"))g=this.parseYieldExpression();else{var y=this.lookahead,P=y;if(g=this.parseConditionalExpression(),P.type===3&&P.lineNumber===this.lookahead.lineNumber&&P.value==="async"&&(this.lookahead.type===3||this.matchKeyword("yield"))){var w=this.parsePrimaryExpression();this.reinterpretExpressionAsPattern(w),g={type:m,params:[w],async:!0}}if(g.type===m||this.match("=>")){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var D=g.async,T=this.reinterpretAsCoverFormalsList(g);if(T){this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null;var _=this.context.strict,I=this.context.allowStrictDirective;this.context.allowStrictDirective=T.simple;var F=this.context.allowYield,G=this.context.await;this.context.allowYield=!0,this.context.await=D;var z=this.startNode(y);this.expect("=>");var U=void 0;if(this.match("{")){var Y=this.context.allowIn;this.context.allowIn=!0,U=this.parseFunctionSourceElements(),this.context.allowIn=Y}else U=this.isolateCoverGrammar(this.parseAssignmentExpression);var Q=U.type!==d.Syntax.BlockStatement;this.context.strict&&T.firstRestricted&&this.throwUnexpectedToken(T.firstRestricted,T.message),this.context.strict&&T.stricted&&this.tolerateUnexpectedToken(T.stricted,T.message),g=D?this.finalize(z,new h.AsyncArrowFunctionExpression(T.params,U,Q)):this.finalize(z,new h.ArrowFunctionExpression(T.params,U,Q)),this.context.strict=_,this.context.allowStrictDirective=I,this.context.allowYield=F,this.context.await=G}}else if(this.matchAssign()){if(this.context.isAssignmentTarget||this.tolerateError(a.Messages.InvalidLHSInAssignment),this.context.strict&&g.type===d.Syntax.Identifier){var W=g;this.scanner.isRestrictedWord(W.name)&&this.tolerateUnexpectedToken(P,a.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(W.name)&&this.tolerateUnexpectedToken(P,a.Messages.StrictReservedWord)}this.match("=")?this.reinterpretExpressionAsPattern(g):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1),P=this.nextToken();var V=P.value,et=this.isolateCoverGrammar(this.parseAssignmentExpression);g=this.finalize(this.startNode(y),new h.AssignmentExpression(V,g,et)),this.context.firstCoverInitializedNameError=null}}return g},S.prototype.parseExpression=function(){var g=this.lookahead,y=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var P=[];for(P.push(y);this.lookahead.type!==2&&this.match(",");)this.nextToken(),P.push(this.isolateCoverGrammar(this.parseAssignmentExpression));y=this.finalize(this.startNode(g),new h.SequenceExpression(P))}return y},S.prototype.parseStatementListItem=function(){var g;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,this.lookahead.type===4)switch(this.lookahead.value){case"export":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,a.Messages.IllegalExportDeclaration),g=this.parseExportDeclaration();break;case"import":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,a.Messages.IllegalImportDeclaration),g=this.parseImportDeclaration();break;case"const":g=this.parseLexicalDeclaration({inFor:!1});break;case"function":g=this.parseFunctionDeclaration();break;case"class":g=this.parseClassDeclaration();break;case"let":g=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:g=this.parseStatement();break}else g=this.parseStatement();return g},S.prototype.parseBlock=function(){var g=this.createNode();this.expect("{");for(var y=[];!this.match("}");)y.push(this.parseStatementListItem());return this.expect("}"),this.finalize(g,new h.BlockStatement(y))},S.prototype.parseLexicalBinding=function(g,y){var P=this.createNode(),w=[],D=this.parsePattern(w,g);this.context.strict&&D.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(D.name)&&this.tolerateError(a.Messages.StrictVarName);var T=null;return g==="const"?!this.matchKeyword("in")&&!this.matchContextualKeyword("of")&&(this.match("=")?(this.nextToken(),T=this.isolateCoverGrammar(this.parseAssignmentExpression)):this.throwError(a.Messages.DeclarationMissingInitializer,"const")):(!y.inFor&&D.type!==d.Syntax.Identifier||this.match("="))&&(this.expect("="),T=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(P,new h.VariableDeclarator(D,T))},S.prototype.parseBindingList=function(g,y){for(var P=[this.parseLexicalBinding(g,y)];this.match(",");)this.nextToken(),P.push(this.parseLexicalBinding(g,y));return P},S.prototype.isLexicalDeclaration=function(){var g=this.scanner.saveState();this.scanner.scanComments();var y=this.scanner.lex();return this.scanner.restoreState(g),y.type===3||y.type===7&&y.value==="["||y.type===7&&y.value==="{"||y.type===4&&y.value==="let"||y.type===4&&y.value==="yield"},S.prototype.parseLexicalDeclaration=function(g){var y=this.createNode(),P=this.nextToken().value;o.assert(P==="let"||P==="const","Lexical declaration must be either let or const");var w=this.parseBindingList(P,g);return this.consumeSemicolon(),this.finalize(y,new h.VariableDeclaration(w,P))},S.prototype.parseBindingRestElement=function(g,y){var P=this.createNode();this.expect("...");var w=this.parsePattern(g,y);return this.finalize(P,new h.RestElement(w))},S.prototype.parseArrayPattern=function(g,y){var P=this.createNode();this.expect("[");for(var w=[];!this.match("]");)if(this.match(","))this.nextToken(),w.push(null);else{if(this.match("...")){w.push(this.parseBindingRestElement(g,y));break}else w.push(this.parsePatternWithDefault(g,y));this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(P,new h.ArrayPattern(w))},S.prototype.parsePropertyPattern=function(g,y){var P=this.createNode(),w=!1,D=!1,T=!1,_,I;if(this.lookahead.type===3){var F=this.lookahead;_=this.parseVariableIdentifier();var G=this.finalize(P,new h.Identifier(F.value));if(this.match("=")){g.push(F),D=!0,this.nextToken();var z=this.parseAssignmentExpression();I=this.finalize(this.startNode(F),new h.AssignmentPattern(G,z))}else this.match(":")?(this.expect(":"),I=this.parsePatternWithDefault(g,y)):(g.push(F),D=!0,I=G)}else w=this.match("["),_=this.parseObjectPropertyKey(),this.expect(":"),I=this.parsePatternWithDefault(g,y);return this.finalize(P,new h.Property("init",_,w,I,T,D))},S.prototype.parseObjectPattern=function(g,y){var P=this.createNode(),w=[];for(this.expect("{");!this.match("}");)w.push(this.parsePropertyPattern(g,y)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(P,new h.ObjectPattern(w))},S.prototype.parsePattern=function(g,y){var P;return this.match("[")?P=this.parseArrayPattern(g,y):this.match("{")?P=this.parseObjectPattern(g,y):(this.matchKeyword("let")&&(y==="const"||y==="let")&&this.tolerateUnexpectedToken(this.lookahead,a.Messages.LetInLexicalBinding),g.push(this.lookahead),P=this.parseVariableIdentifier(y)),P},S.prototype.parsePatternWithDefault=function(g,y){var P=this.lookahead,w=this.parsePattern(g,y);if(this.match("=")){this.nextToken();var D=this.context.allowYield;this.context.allowYield=!0;var T=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=D,w=this.finalize(this.startNode(P),new h.AssignmentPattern(w,T))}return w},S.prototype.parseVariableIdentifier=function(g){var y=this.createNode(),P=this.nextToken();return P.type===4&&P.value==="yield"?this.context.strict?this.tolerateUnexpectedToken(P,a.Messages.StrictReservedWord):this.context.allowYield||this.throwUnexpectedToken(P):P.type!==3?this.context.strict&&P.type===4&&this.scanner.isStrictModeReservedWord(P.value)?this.tolerateUnexpectedToken(P,a.Messages.StrictReservedWord):(this.context.strict||P.value!=="let"||g!=="var")&&this.throwUnexpectedToken(P):(this.context.isModule||this.context.await)&&P.type===3&&P.value==="await"&&this.tolerateUnexpectedToken(P),this.finalize(y,new h.Identifier(P.value))},S.prototype.parseVariableDeclaration=function(g){var y=this.createNode(),P=[],w=this.parsePattern(P,"var");this.context.strict&&w.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(w.name)&&this.tolerateError(a.Messages.StrictVarName);var D=null;return this.match("=")?(this.nextToken(),D=this.isolateCoverGrammar(this.parseAssignmentExpression)):w.type!==d.Syntax.Identifier&&!g.inFor&&this.expect("="),this.finalize(y,new h.VariableDeclarator(w,D))},S.prototype.parseVariableDeclarationList=function(g){var y={inFor:g.inFor},P=[];for(P.push(this.parseVariableDeclaration(y));this.match(",");)this.nextToken(),P.push(this.parseVariableDeclaration(y));return P},S.prototype.parseVariableStatement=function(){var g=this.createNode();this.expectKeyword("var");var y=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(g,new h.VariableDeclaration(y,"var"))},S.prototype.parseEmptyStatement=function(){var g=this.createNode();return this.expect(";"),this.finalize(g,new h.EmptyStatement)},S.prototype.parseExpressionStatement=function(){var g=this.createNode(),y=this.parseExpression();return this.consumeSemicolon(),this.finalize(g,new h.ExpressionStatement(y))},S.prototype.parseIfClause=function(){return this.context.strict&&this.matchKeyword("function")&&this.tolerateError(a.Messages.StrictFunction),this.parseStatement()},S.prototype.parseIfStatement=function(){var g=this.createNode(),y,P=null;this.expectKeyword("if"),this.expect("(");var w=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),y=this.finalize(this.createNode(),new h.EmptyStatement)):(this.expect(")"),y=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),P=this.parseIfClause())),this.finalize(g,new h.IfStatement(w,y,P))},S.prototype.parseDoWhileStatement=function(){var g=this.createNode();this.expectKeyword("do");var y=this.context.inIteration;this.context.inIteration=!0;var P=this.parseStatement();this.context.inIteration=y,this.expectKeyword("while"),this.expect("(");var w=this.parseExpression();return!this.match(")")&&this.config.tolerant?this.tolerateUnexpectedToken(this.nextToken()):(this.expect(")"),this.match(";")&&this.nextToken()),this.finalize(g,new h.DoWhileStatement(P,w))},S.prototype.parseWhileStatement=function(){var g=this.createNode(),y;this.expectKeyword("while"),this.expect("(");var P=this.parseExpression();if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),y=this.finalize(this.createNode(),new h.EmptyStatement);else{this.expect(")");var w=this.context.inIteration;this.context.inIteration=!0,y=this.parseStatement(),this.context.inIteration=w}return this.finalize(g,new h.WhileStatement(P,y))},S.prototype.parseForStatement=function(){var g=null,y=null,P=null,w=!0,D,T,_=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){g=this.createNode(),this.nextToken();var I=this.context.allowIn;this.context.allowIn=!1;var F=this.parseVariableDeclarationList({inFor:!0});if(this.context.allowIn=I,F.length===1&&this.matchKeyword("in")){var G=F[0];G.init&&(G.id.type===d.Syntax.ArrayPattern||G.id.type===d.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(a.Messages.ForInOfLoopInitializer,"for-in"),g=this.finalize(g,new h.VariableDeclaration(F,"var")),this.nextToken(),D=g,T=this.parseExpression(),g=null}else F.length===1&&F[0].init===null&&this.matchContextualKeyword("of")?(g=this.finalize(g,new h.VariableDeclaration(F,"var")),this.nextToken(),D=g,T=this.parseAssignmentExpression(),g=null,w=!1):(g=this.finalize(g,new h.VariableDeclaration(F,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){g=this.createNode();var z=this.nextToken().value;if(!this.context.strict&&this.lookahead.value==="in")g=this.finalize(g,new h.Identifier(z)),this.nextToken(),D=g,T=this.parseExpression(),g=null;else{var I=this.context.allowIn;this.context.allowIn=!1;var F=this.parseBindingList(z,{inFor:!0});this.context.allowIn=I,F.length===1&&F[0].init===null&&this.matchKeyword("in")?(g=this.finalize(g,new h.VariableDeclaration(F,z)),this.nextToken(),D=g,T=this.parseExpression(),g=null):F.length===1&&F[0].init===null&&this.matchContextualKeyword("of")?(g=this.finalize(g,new h.VariableDeclaration(F,z)),this.nextToken(),D=g,T=this.parseAssignmentExpression(),g=null,w=!1):(this.consumeSemicolon(),g=this.finalize(g,new h.VariableDeclaration(F,z)))}}else{var U=this.lookahead,I=this.context.allowIn;if(this.context.allowIn=!1,g=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=I,this.matchKeyword("in"))(!this.context.isAssignmentTarget||g.type===d.Syntax.AssignmentExpression)&&this.tolerateError(a.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(g),D=g,T=this.parseExpression(),g=null;else if(this.matchContextualKeyword("of"))(!this.context.isAssignmentTarget||g.type===d.Syntax.AssignmentExpression)&&this.tolerateError(a.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(g),D=g,T=this.parseAssignmentExpression(),g=null,w=!1;else{if(this.match(",")){for(var Y=[g];this.match(",");)this.nextToken(),Y.push(this.isolateCoverGrammar(this.parseAssignmentExpression));g=this.finalize(this.startNode(U),new h.SequenceExpression(Y))}this.expect(";")}}typeof D>"u"&&(this.match(";")||(y=this.parseExpression()),this.expect(";"),this.match(")")||(P=this.parseExpression()));var Q;if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),Q=this.finalize(this.createNode(),new h.EmptyStatement);else{this.expect(")");var W=this.context.inIteration;this.context.inIteration=!0,Q=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=W}return typeof D>"u"?this.finalize(_,new h.ForStatement(g,y,P,Q)):w?this.finalize(_,new h.ForInStatement(D,T,Q)):this.finalize(_,new h.ForOfStatement(D,T,Q))},S.prototype.parseContinueStatement=function(){var g=this.createNode();this.expectKeyword("continue");var y=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var P=this.parseVariableIdentifier();y=P;var w="$"+P.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,w)||this.throwError(a.Messages.UnknownLabel,P.name)}return this.consumeSemicolon(),y===null&&!this.context.inIteration&&this.throwError(a.Messages.IllegalContinue),this.finalize(g,new h.ContinueStatement(y))},S.prototype.parseBreakStatement=function(){var g=this.createNode();this.expectKeyword("break");var y=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var P=this.parseVariableIdentifier(),w="$"+P.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,w)||this.throwError(a.Messages.UnknownLabel,P.name),y=P}return this.consumeSemicolon(),y===null&&!this.context.inIteration&&!this.context.inSwitch&&this.throwError(a.Messages.IllegalBreak),this.finalize(g,new h.BreakStatement(y))},S.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(a.Messages.IllegalReturn);var g=this.createNode();this.expectKeyword("return");var y=!this.match(";")&&!this.match("}")&&!this.hasLineTerminator&&this.lookahead.type!==2||this.lookahead.type===8||this.lookahead.type===10,P=y?this.parseExpression():null;return this.consumeSemicolon(),this.finalize(g,new h.ReturnStatement(P))},S.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(a.Messages.StrictModeWith);var g=this.createNode(),y;this.expectKeyword("with"),this.expect("(");var P=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),y=this.finalize(this.createNode(),new h.EmptyStatement)):(this.expect(")"),y=this.parseStatement()),this.finalize(g,new h.WithStatement(P,y))},S.prototype.parseSwitchCase=function(){var g=this.createNode(),y;this.matchKeyword("default")?(this.nextToken(),y=null):(this.expectKeyword("case"),y=this.parseExpression()),this.expect(":");for(var P=[];!(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"));)P.push(this.parseStatementListItem());return this.finalize(g,new h.SwitchCase(y,P))},S.prototype.parseSwitchStatement=function(){var g=this.createNode();this.expectKeyword("switch"),this.expect("(");var y=this.parseExpression();this.expect(")");var P=this.context.inSwitch;this.context.inSwitch=!0;var w=[],D=!1;for(this.expect("{");!this.match("}");){var T=this.parseSwitchCase();T.test===null&&(D&&this.throwError(a.Messages.MultipleDefaultsInSwitch),D=!0),w.push(T)}return this.expect("}"),this.context.inSwitch=P,this.finalize(g,new h.SwitchStatement(y,w))},S.prototype.parseLabelledStatement=function(){var g=this.createNode(),y=this.parseExpression(),P;if(y.type===d.Syntax.Identifier&&this.match(":")){this.nextToken();var w=y,D="$"+w.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,D)&&this.throwError(a.Messages.Redeclaration,"Label",w.name),this.context.labelSet[D]=!0;var T=void 0;if(this.matchKeyword("class"))this.tolerateUnexpectedToken(this.lookahead),T=this.parseClassDeclaration();else if(this.matchKeyword("function")){var _=this.lookahead,I=this.parseFunctionDeclaration();this.context.strict?this.tolerateUnexpectedToken(_,a.Messages.StrictFunction):I.generator&&this.tolerateUnexpectedToken(_,a.Messages.GeneratorInLegacyContext),T=I}else T=this.parseStatement();delete this.context.labelSet[D],P=new h.LabeledStatement(w,T)}else this.consumeSemicolon(),P=new h.ExpressionStatement(y);return this.finalize(g,P)},S.prototype.parseThrowStatement=function(){var g=this.createNode();this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(a.Messages.NewlineAfterThrow);var y=this.parseExpression();return this.consumeSemicolon(),this.finalize(g,new h.ThrowStatement(y))},S.prototype.parseCatchClause=function(){var g=this.createNode();this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead);for(var y=[],P=this.parsePattern(y),w={},D=0;D<y.length;D++){var T="$"+y[D].value;Object.prototype.hasOwnProperty.call(w,T)&&this.tolerateError(a.Messages.DuplicateBinding,y[D].value),w[T]=!0}this.context.strict&&P.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(P.name)&&this.tolerateError(a.Messages.StrictCatchVariable),this.expect(")");var _=this.parseBlock();return this.finalize(g,new h.CatchClause(P,_))},S.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},S.prototype.parseTryStatement=function(){var g=this.createNode();this.expectKeyword("try");var y=this.parseBlock(),P=this.matchKeyword("catch")?this.parseCatchClause():null,w=this.matchKeyword("finally")?this.parseFinallyClause():null;return!P&&!w&&this.throwError(a.Messages.NoCatchOrFinally),this.finalize(g,new h.TryStatement(y,P,w))},S.prototype.parseDebuggerStatement=function(){var g=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(g,new h.DebuggerStatement)},S.prototype.parseStatement=function(){var g;switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:g=this.parseExpressionStatement();break;case 7:var y=this.lookahead.value;y==="{"?g=this.parseBlock():y==="("?g=this.parseExpressionStatement():y===";"?g=this.parseEmptyStatement():g=this.parseExpressionStatement();break;case 3:g=this.matchAsyncFunction()?this.parseFunctionDeclaration():this.parseLabelledStatement();break;case 4:switch(this.lookahead.value){case"break":g=this.parseBreakStatement();break;case"continue":g=this.parseContinueStatement();break;case"debugger":g=this.parseDebuggerStatement();break;case"do":g=this.parseDoWhileStatement();break;case"for":g=this.parseForStatement();break;case"function":g=this.parseFunctionDeclaration();break;case"if":g=this.parseIfStatement();break;case"return":g=this.parseReturnStatement();break;case"switch":g=this.parseSwitchStatement();break;case"throw":g=this.parseThrowStatement();break;case"try":g=this.parseTryStatement();break;case"var":g=this.parseVariableStatement();break;case"while":g=this.parseWhileStatement();break;case"with":g=this.parseWithStatement();break;default:g=this.parseExpressionStatement();break}break;default:g=this.throwUnexpectedToken(this.lookahead)}return g},S.prototype.parseFunctionSourceElements=function(){var g=this.createNode();this.expect("{");var y=this.parseDirectivePrologues(),P=this.context.labelSet,w=this.context.inIteration,D=this.context.inSwitch,T=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;this.lookahead.type!==2&&!this.match("}");)y.push(this.parseStatementListItem());return this.expect("}"),this.context.labelSet=P,this.context.inIteration=w,this.context.inSwitch=D,this.context.inFunctionBody=T,this.finalize(g,new h.BlockStatement(y))},S.prototype.validateParam=function(g,y,P){var w="$"+P;this.context.strict?(this.scanner.isRestrictedWord(P)&&(g.stricted=y,g.message=a.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(g.paramSet,w)&&(g.stricted=y,g.message=a.Messages.StrictParamDupe)):g.firstRestricted||(this.scanner.isRestrictedWord(P)?(g.firstRestricted=y,g.message=a.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(P)?(g.firstRestricted=y,g.message=a.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(g.paramSet,w)&&(g.stricted=y,g.message=a.Messages.StrictParamDupe)),typeof Object.defineProperty=="function"?Object.defineProperty(g.paramSet,w,{value:!0,enumerable:!0,writable:!0,configurable:!0}):g.paramSet[w]=!0},S.prototype.parseRestElement=function(g){var y=this.createNode();this.expect("...");var P=this.parsePattern(g);return this.match("=")&&this.throwError(a.Messages.DefaultRestParameter),this.match(")")||this.throwError(a.Messages.ParameterAfterRestParameter),this.finalize(y,new h.RestElement(P))},S.prototype.parseFormalParameter=function(g){for(var y=[],P=this.match("...")?this.parseRestElement(y):this.parsePatternWithDefault(y),w=0;w<y.length;w++)this.validateParam(g,y[w],y[w].value);g.simple=g.simple&&P instanceof h.Identifier,g.params.push(P)},S.prototype.parseFormalParameters=function(g){var y;if(y={simple:!0,params:[],firstRestricted:g},this.expect("("),!this.match(")"))for(y.paramSet={};this.lookahead.type!==2&&(this.parseFormalParameter(y),!(this.match(")")||(this.expect(","),this.match(")")))););return this.expect(")"),{simple:y.simple,params:y.params,stricted:y.stricted,firstRestricted:y.firstRestricted,message:y.message}},S.prototype.matchAsyncFunction=function(){var g=this.matchContextualKeyword("async");if(g){var y=this.scanner.saveState();this.scanner.scanComments();var P=this.scanner.lex();this.scanner.restoreState(y),g=y.lineNumber===P.lineNumber&&P.type===4&&P.value==="function"}return g},S.prototype.parseFunctionDeclaration=function(g){var y=this.createNode(),P=this.matchContextualKeyword("async");P&&this.nextToken(),this.expectKeyword("function");var w=P?!1:this.match("*");w&&this.nextToken();var D,T=null,_=null;if(!g||!this.match("(")){var I=this.lookahead;T=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(I.value)&&this.tolerateUnexpectedToken(I,a.Messages.StrictFunctionName):this.scanner.isRestrictedWord(I.value)?(_=I,D=a.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(I.value)&&(_=I,D=a.Messages.StrictReservedWord)}var F=this.context.await,G=this.context.allowYield;this.context.await=P,this.context.allowYield=!w;var z=this.parseFormalParameters(_),U=z.params,Y=z.stricted;_=z.firstRestricted,z.message&&(D=z.message);var Q=this.context.strict,W=this.context.allowStrictDirective;this.context.allowStrictDirective=z.simple;var V=this.parseFunctionSourceElements();return this.context.strict&&_&&this.throwUnexpectedToken(_,D),this.context.strict&&Y&&this.tolerateUnexpectedToken(Y,D),this.context.strict=Q,this.context.allowStrictDirective=W,this.context.await=F,this.context.allowYield=G,P?this.finalize(y,new h.AsyncFunctionDeclaration(T,U,V)):this.finalize(y,new h.FunctionDeclaration(T,U,V,w))},S.prototype.parseFunctionExpression=function(){var g=this.createNode(),y=this.matchContextualKeyword("async");y&&this.nextToken(),this.expectKeyword("function");var P=y?!1:this.match("*");P&&this.nextToken();var w,D=null,T,_=this.context.await,I=this.context.allowYield;if(this.context.await=y,this.context.allowYield=!P,!this.match("(")){var F=this.lookahead;D=!this.context.strict&&!P&&this.matchKeyword("yield")?this.parseIdentifierName():this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(F.value)&&this.tolerateUnexpectedToken(F,a.Messages.StrictFunctionName):this.scanner.isRestrictedWord(F.value)?(T=F,w=a.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(F.value)&&(T=F,w=a.Messages.StrictReservedWord)}var G=this.parseFormalParameters(T),z=G.params,U=G.stricted;T=G.firstRestricted,G.message&&(w=G.message);var Y=this.context.strict,Q=this.context.allowStrictDirective;this.context.allowStrictDirective=G.simple;var W=this.parseFunctionSourceElements();return this.context.strict&&T&&this.throwUnexpectedToken(T,w),this.context.strict&&U&&this.tolerateUnexpectedToken(U,w),this.context.strict=Y,this.context.allowStrictDirective=Q,this.context.await=_,this.context.allowYield=I,y?this.finalize(g,new h.AsyncFunctionExpression(D,z,W)):this.finalize(g,new h.FunctionExpression(D,z,W,P))},S.prototype.parseDirective=function(){var g=this.lookahead,y=this.createNode(),P=this.parseExpression(),w=P.type===d.Syntax.Literal?this.getTokenRaw(g).slice(1,-1):null;return this.consumeSemicolon(),this.finalize(y,w?new h.Directive(P,w):new h.ExpressionStatement(P))},S.prototype.parseDirectivePrologues=function(){for(var g=null,y=[];;){var P=this.lookahead;if(P.type!==8)break;var w=this.parseDirective();y.push(w);var D=w.directive;if(typeof D!="string")break;D==="use strict"?(this.context.strict=!0,g&&this.tolerateUnexpectedToken(g,a.Messages.StrictOctalLiteral),this.context.allowStrictDirective||this.tolerateUnexpectedToken(P,a.Messages.IllegalLanguageModeDirective)):!g&&P.octal&&(g=P)}return y},S.prototype.qualifiedPropertyName=function(g){switch(g.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return g.value==="["}return!1},S.prototype.parseGetterMethod=function(){var g=this.createNode(),y=!1,P=this.context.allowYield;this.context.allowYield=!y;var w=this.parseFormalParameters();w.params.length>0&&this.tolerateError(a.Messages.BadGetterArity);var D=this.parsePropertyMethod(w);return this.context.allowYield=P,this.finalize(g,new h.FunctionExpression(null,w.params,D,y))},S.prototype.parseSetterMethod=function(){var g=this.createNode(),y=!1,P=this.context.allowYield;this.context.allowYield=!y;var w=this.parseFormalParameters();w.params.length!==1?this.tolerateError(a.Messages.BadSetterArity):w.params[0]instanceof h.RestElement&&this.tolerateError(a.Messages.BadSetterRestParameter);var D=this.parsePropertyMethod(w);return this.context.allowYield=P,this.finalize(g,new h.FunctionExpression(null,w.params,D,y))},S.prototype.parseGeneratorMethod=function(){var g=this.createNode(),y=!0,P=this.context.allowYield;this.context.allowYield=!0;var w=this.parseFormalParameters();this.context.allowYield=!1;var D=this.parsePropertyMethod(w);return this.context.allowYield=P,this.finalize(g,new h.FunctionExpression(null,w.params,D,y))},S.prototype.isStartOfExpression=function(){var g=!0,y=this.lookahead.value;switch(this.lookahead.type){case 7:g=y==="["||y==="("||y==="{"||y==="+"||y==="-"||y==="!"||y==="~"||y==="++"||y==="--"||y==="/"||y==="/=";break;case 4:g=y==="class"||y==="delete"||y==="function"||y==="let"||y==="new"||y==="super"||y==="this"||y==="typeof"||y==="void"||y==="yield";break}return g},S.prototype.parseYieldExpression=function(){var g=this.createNode();this.expectKeyword("yield");var y=null,P=!1;if(!this.hasLineTerminator){var w=this.context.allowYield;this.context.allowYield=!1,P=this.match("*"),P?(this.nextToken(),y=this.parseAssignmentExpression()):this.isStartOfExpression()&&(y=this.parseAssignmentExpression()),this.context.allowYield=w}return this.finalize(g,new h.YieldExpression(y,P))},S.prototype.parseClassElement=function(g){var y=this.lookahead,P=this.createNode(),w="",D=null,T=null,_=!1,I=!1,F=!1,G=!1;if(this.match("*"))this.nextToken();else{_=this.match("["),D=this.parseObjectPropertyKey();var z=D;if(z.name==="static"&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(y=this.lookahead,F=!0,_=this.match("["),this.match("*")?this.nextToken():D=this.parseObjectPropertyKey()),y.type===3&&!this.hasLineTerminator&&y.value==="async"){var U=this.lookahead.value;U!==":"&&U!=="("&&U!=="*"&&(G=!0,y=this.lookahead,D=this.parseObjectPropertyKey(),y.type===3&&y.value==="constructor"&&this.tolerateUnexpectedToken(y,a.Messages.ConstructorIsAsync))}}var Y=this.qualifiedPropertyName(this.lookahead);return y.type===3?y.value==="get"&&Y?(w="get",_=this.match("["),D=this.parseObjectPropertyKey(),this.context.allowYield=!1,T=this.parseGetterMethod()):y.value==="set"&&Y&&(w="set",_=this.match("["),D=this.parseObjectPropertyKey(),T=this.parseSetterMethod()):y.type===7&&y.value==="*"&&Y&&(w="init",_=this.match("["),D=this.parseObjectPropertyKey(),T=this.parseGeneratorMethod(),I=!0),!w&&D&&this.match("(")&&(w="init",T=G?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),I=!0),w||this.throwUnexpectedToken(this.lookahead),w==="init"&&(w="method"),_||(F&&this.isPropertyKey(D,"prototype")&&this.throwUnexpectedToken(y,a.Messages.StaticPrototype),!F&&this.isPropertyKey(D,"constructor")&&((w!=="method"||!I||T&&T.generator)&&this.throwUnexpectedToken(y,a.Messages.ConstructorSpecialMethod),g.value?this.throwUnexpectedToken(y,a.Messages.DuplicateConstructor):g.value=!0,w="constructor")),this.finalize(P,new h.MethodDefinition(D,_,T,w,F))},S.prototype.parseClassElementList=function(){var g=[],y={value:!1};for(this.expect("{");!this.match("}");)this.match(";")?this.nextToken():g.push(this.parseClassElement(y));return this.expect("}"),g},S.prototype.parseClassBody=function(){var g=this.createNode(),y=this.parseClassElementList();return this.finalize(g,new h.ClassBody(y))},S.prototype.parseClassDeclaration=function(g){var y=this.createNode(),P=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var w=g&&this.lookahead.type!==3?null:this.parseVariableIdentifier(),D=null;this.matchKeyword("extends")&&(this.nextToken(),D=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var T=this.parseClassBody();return this.context.strict=P,this.finalize(y,new h.ClassDeclaration(w,D,T))},S.prototype.parseClassExpression=function(){var g=this.createNode(),y=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var P=this.lookahead.type===3?this.parseVariableIdentifier():null,w=null;this.matchKeyword("extends")&&(this.nextToken(),w=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var D=this.parseClassBody();return this.context.strict=y,this.finalize(g,new h.ClassExpression(P,w,D))},S.prototype.parseModule=function(){this.context.strict=!0,this.context.isModule=!0,this.scanner.isModule=!0;for(var g=this.createNode(),y=this.parseDirectivePrologues();this.lookahead.type!==2;)y.push(this.parseStatementListItem());return this.finalize(g,new h.Module(y))},S.prototype.parseScript=function(){for(var g=this.createNode(),y=this.parseDirectivePrologues();this.lookahead.type!==2;)y.push(this.parseStatementListItem());return this.finalize(g,new h.Script(y))},S.prototype.parseModuleSpecifier=function(){var g=this.createNode();this.lookahead.type!==8&&this.throwError(a.Messages.InvalidModuleSpecifier);var y=this.nextToken(),P=this.getTokenRaw(y);return this.finalize(g,new h.Literal(y.value,P))},S.prototype.parseImportSpecifier=function(){var g=this.createNode(),y,P;return this.lookahead.type===3?(y=this.parseVariableIdentifier(),P=y,this.matchContextualKeyword("as")&&(this.nextToken(),P=this.parseVariableIdentifier())):(y=this.parseIdentifierName(),P=y,this.matchContextualKeyword("as")?(this.nextToken(),P=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(g,new h.ImportSpecifier(P,y))},S.prototype.parseNamedImports=function(){this.expect("{");for(var g=[];!this.match("}");)g.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),g},S.prototype.parseImportDefaultSpecifier=function(){var g=this.createNode(),y=this.parseIdentifierName();return this.finalize(g,new h.ImportDefaultSpecifier(y))},S.prototype.parseImportNamespaceSpecifier=function(){var g=this.createNode();this.expect("*"),this.matchContextualKeyword("as")||this.throwError(a.Messages.NoAsAfterImportNamespace),this.nextToken();var y=this.parseIdentifierName();return this.finalize(g,new h.ImportNamespaceSpecifier(y))},S.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(a.Messages.IllegalImportDeclaration);var g=this.createNode();this.expectKeyword("import");var y,P=[];if(this.lookahead.type===8)y=this.parseModuleSpecifier();else{if(this.match("{")?P=P.concat(this.parseNamedImports()):this.match("*")?P.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(P.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?P.push(this.parseImportNamespaceSpecifier()):this.match("{")?P=P.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),!this.matchContextualKeyword("from")){var w=this.lookahead.value?a.Messages.UnexpectedToken:a.Messages.MissingFromClause;this.throwError(w,this.lookahead.value)}this.nextToken(),y=this.parseModuleSpecifier()}return this.consumeSemicolon(),this.finalize(g,new h.ImportDeclaration(P,y))},S.prototype.parseExportSpecifier=function(){var g=this.createNode(),y=this.parseIdentifierName(),P=y;return this.matchContextualKeyword("as")&&(this.nextToken(),P=this.parseIdentifierName()),this.finalize(g,new h.ExportSpecifier(y,P))},S.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(a.Messages.IllegalExportDeclaration);var g=this.createNode();this.expectKeyword("export");var y;if(this.matchKeyword("default"))if(this.nextToken(),this.matchKeyword("function")){var P=this.parseFunctionDeclaration(!0);y=this.finalize(g,new h.ExportDefaultDeclaration(P))}else if(this.matchKeyword("class")){var P=this.parseClassDeclaration(!0);y=this.finalize(g,new h.ExportDefaultDeclaration(P))}else if(this.matchContextualKeyword("async")){var P=this.matchAsyncFunction()?this.parseFunctionDeclaration(!0):this.parseAssignmentExpression();y=this.finalize(g,new h.ExportDefaultDeclaration(P))}else{this.matchContextualKeyword("from")&&this.throwError(a.Messages.UnexpectedToken,this.lookahead.value);var P=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression();this.consumeSemicolon(),y=this.finalize(g,new h.ExportDefaultDeclaration(P))}else if(this.match("*")){if(this.nextToken(),!this.matchContextualKeyword("from")){var w=this.lookahead.value?a.Messages.UnexpectedToken:a.Messages.MissingFromClause;this.throwError(w,this.lookahead.value)}this.nextToken();var D=this.parseModuleSpecifier();this.consumeSemicolon(),y=this.finalize(g,new h.ExportAllDeclaration(D))}else if(this.lookahead.type===4){var P=void 0;switch(this.lookahead.value){case"let":case"const":P=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":P=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}y=this.finalize(g,new h.ExportNamedDeclaration(P,[],null))}else if(this.matchAsyncFunction()){var P=this.parseFunctionDeclaration();y=this.finalize(g,new h.ExportNamedDeclaration(P,[],null))}else{var T=[],_=null,I=!1;for(this.expect("{");!this.match("}");)I=I||this.matchKeyword("default"),T.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");if(this.expect("}"),this.matchContextualKeyword("from"))this.nextToken(),_=this.parseModuleSpecifier(),this.consumeSemicolon();else if(I){var w=this.lookahead.value?a.Messages.UnexpectedToken:a.Messages.MissingFromClause;this.throwError(w,this.lookahead.value)}else this.consumeSemicolon();y=this.finalize(g,new h.ExportNamedDeclaration(null,T,_))}return y},S}();n.Parser=v},function(i,n){Object.defineProperty(n,"__esModule",{value:!0});function r(o,s){if(!o)throw new Error("ASSERT: "+s)}n.assert=r},function(i,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function o(){this.errors=[],this.tolerant=!1}return o.prototype.recordError=function(s){this.errors.push(s)},o.prototype.tolerate=function(s){if(this.tolerant)this.recordError(s);else throw s},o.prototype.constructError=function(s,a){var h=new Error(s);try{throw h}catch(c){Object.create&&Object.defineProperty&&(h=Object.create(c),Object.defineProperty(h,"column",{value:a}))}return h},o.prototype.createError=function(s,a,h,c){var d="Line "+a+": "+c,f=this.constructError(d,h);return f.index=s,f.lineNumber=a,f.description=c,f},o.prototype.throwError=function(s,a,h,c){throw this.createError(s,a,h,c)},o.prototype.tolerateError=function(s,a,h,c){var d=this.createError(s,a,h,c);if(this.tolerant)this.recordError(d);else throw d},o}();n.ErrorHandler=r},function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Messages={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}},function(i,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(9),s=r(4),a=r(11);function h(f){return"0123456789abcdef".indexOf(f.toLowerCase())}function c(f){return"01234567".indexOf(f)}var d=function(){function f(m,v){this.source=m,this.errorHandler=v,this.trackComment=!1,this.isModule=!1,this.length=m.length,this.index=0,this.lineNumber=m.length>0?1:0,this.lineStart=0,this.curlyStack=[]}return f.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart}},f.prototype.restoreState=function(m){this.index=m.index,this.lineNumber=m.lineNumber,this.lineStart=m.lineStart},f.prototype.eof=function(){return this.index>=this.length},f.prototype.throwUnexpectedToken=function(m){return m===void 0&&(m=a.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,m)},f.prototype.tolerateUnexpectedToken=function(m){m===void 0&&(m=a.Messages.UnexpectedTokenIllegal),this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,m)},f.prototype.skipSingleLineComment=function(m){var v=[],S,g;for(this.trackComment&&(v=[],S=this.index-m,g={start:{line:this.lineNumber,column:this.index-this.lineStart-m},end:{}});!this.eof();){var y=this.source.charCodeAt(this.index);if(++this.index,s.Character.isLineTerminator(y)){if(this.trackComment){g.end={line:this.lineNumber,column:this.index-this.lineStart-1};var P={multiLine:!1,slice:[S+m,this.index-1],range:[S,this.index-1],loc:g};v.push(P)}return y===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,v}}if(this.trackComment){g.end={line:this.lineNumber,column:this.index-this.lineStart};var P={multiLine:!1,slice:[S+m,this.index],range:[S,this.index],loc:g};v.push(P)}return v},f.prototype.skipMultiLineComment=function(){var m=[],v,S;for(this.trackComment&&(m=[],v=this.index-2,S={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var g=this.source.charCodeAt(this.index);if(s.Character.isLineTerminator(g))g===13&&this.source.charCodeAt(this.index+1)===10&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(g===42){if(this.source.charCodeAt(this.index+1)===47){if(this.index+=2,this.trackComment){S.end={line:this.lineNumber,column:this.index-this.lineStart};var y={multiLine:!0,slice:[v+2,this.index-2],range:[v,this.index],loc:S};m.push(y)}return m}++this.index}else++this.index}if(this.trackComment){S.end={line:this.lineNumber,column:this.index-this.lineStart};var y={multiLine:!0,slice:[v+2,this.index],range:[v,this.index],loc:S};m.push(y)}return this.tolerateUnexpectedToken(),m},f.prototype.scanComments=function(){var m;this.trackComment&&(m=[]);for(var v=this.index===0;!this.eof();){var S=this.source.charCodeAt(this.index);if(s.Character.isWhiteSpace(S))++this.index;else if(s.Character.isLineTerminator(S))++this.index,S===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,v=!0;else if(S===47)if(S=this.source.charCodeAt(this.index+1),S===47){this.index+=2;var g=this.skipSingleLineComment(2);this.trackComment&&(m=m.concat(g)),v=!0}else if(S===42){this.index+=2;var g=this.skipMultiLineComment();this.trackComment&&(m=m.concat(g))}else break;else if(v&&S===45)if(this.source.charCodeAt(this.index+1)===45&&this.source.charCodeAt(this.index+2)===62){this.index+=3;var g=this.skipSingleLineComment(3);this.trackComment&&(m=m.concat(g))}else break;else if(S===60&&!this.isModule)if(this.source.slice(this.index+1,this.index+4)==="!--"){this.index+=4;var g=this.skipSingleLineComment(4);this.trackComment&&(m=m.concat(g))}else break;else break}return m},f.prototype.isFutureReservedWord=function(m){switch(m){case"enum":case"export":case"import":case"super":return!0;default:return!1}},f.prototype.isStrictModeReservedWord=function(m){switch(m){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},f.prototype.isRestrictedWord=function(m){return m==="eval"||m==="arguments"},f.prototype.isKeyword=function(m){switch(m.length){case 2:return m==="if"||m==="in"||m==="do";case 3:return m==="var"||m==="for"||m==="new"||m==="try"||m==="let";case 4:return m==="this"||m==="else"||m==="case"||m==="void"||m==="with"||m==="enum";case 5:return m==="while"||m==="break"||m==="catch"||m==="throw"||m==="const"||m==="yield"||m==="class"||m==="super";case 6:return m==="return"||m==="typeof"||m==="delete"||m==="switch"||m==="export"||m==="import";case 7:return m==="default"||m==="finally"||m==="extends";case 8:return m==="function"||m==="continue"||m==="debugger";case 10:return m==="instanceof";default:return!1}},f.prototype.codePointAt=function(m){var v=this.source.charCodeAt(m);if(v>=55296&&v<=56319){var S=this.source.charCodeAt(m+1);if(S>=56320&&S<=57343){var g=v;v=(g-55296)*1024+S-56320+65536}}return v},f.prototype.scanHexEscape=function(m){for(var v=m==="u"?4:2,S=0,g=0;g<v;++g)if(!this.eof()&&s.Character.isHexDigit(this.source.charCodeAt(this.index)))S=S*16+h(this.source[this.index++]);else return null;return String.fromCharCode(S)},f.prototype.scanUnicodeCodePointEscape=function(){var m=this.source[this.index],v=0;for(m==="}"&&this.throwUnexpectedToken();!this.eof()&&(m=this.source[this.index++],!!s.Character.isHexDigit(m.charCodeAt(0)));)v=v*16+h(m);return(v>1114111||m!=="}")&&this.throwUnexpectedToken(),s.Character.fromCodePoint(v)},f.prototype.getIdentifier=function(){for(var m=this.index++;!this.eof();){var v=this.source.charCodeAt(this.index);if(v===92)return this.index=m,this.getComplexIdentifier();if(v>=55296&&v<57343)return this.index=m,this.getComplexIdentifier();if(s.Character.isIdentifierPart(v))++this.index;else break}return this.source.slice(m,this.index)},f.prototype.getComplexIdentifier=function(){var m=this.codePointAt(this.index),v=s.Character.fromCodePoint(m);this.index+=v.length;var S;for(m===92&&(this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,S=this.scanUnicodeCodePointEscape()):(S=this.scanHexEscape("u"),(S===null||S==="\\"||!s.Character.isIdentifierStart(S.charCodeAt(0)))&&this.throwUnexpectedToken()),v=S);!this.eof()&&(m=this.codePointAt(this.index),!!s.Character.isIdentifierPart(m));)S=s.Character.fromCodePoint(m),v+=S,this.index+=S.length,m===92&&(v=v.substr(0,v.length-1),this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,S=this.scanUnicodeCodePointEscape()):(S=this.scanHexEscape("u"),(S===null||S==="\\"||!s.Character.isIdentifierPart(S.charCodeAt(0)))&&this.throwUnexpectedToken()),v+=S);return v},f.prototype.octalToDecimal=function(m){var v=m!=="0",S=c(m);return!this.eof()&&s.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(v=!0,S=S*8+c(this.source[this.index++]),"0123".indexOf(m)>=0&&!this.eof()&&s.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(S=S*8+c(this.source[this.index++]))),{code:S,octal:v}},f.prototype.scanIdentifier=function(){var m,v=this.index,S=this.source.charCodeAt(v)===92?this.getComplexIdentifier():this.getIdentifier();if(S.length===1?m=3:this.isKeyword(S)?m=4:S==="null"?m=5:S==="true"||S==="false"?m=1:m=3,m!==3&&v+S.length!==this.index){var g=this.index;this.index=v,this.tolerateUnexpectedToken(a.Messages.InvalidEscapedReservedWord),this.index=g}return{type:m,value:S,lineNumber:this.lineNumber,lineStart:this.lineStart,start:v,end:this.index}},f.prototype.scanPunctuator=function(){var m=this.index,v=this.source[this.index];switch(v){case"(":case"{":v==="{"&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,this.source[this.index]==="."&&this.source[this.index+1]==="."&&(this.index+=2,v="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:v=this.source.substr(this.index,4),v===">>>="?this.index+=4:(v=v.substr(0,3),v==="==="||v==="!=="||v===">>>"||v==="<<="||v===">>="||v==="**="?this.index+=3:(v=v.substr(0,2),v==="&&"||v==="||"||v==="=="||v==="!="||v==="+="||v==="-="||v==="*="||v==="/="||v==="++"||v==="--"||v==="<<"||v===">>"||v==="&="||v==="|="||v==="^="||v==="%="||v==="<="||v===">="||v==="=>"||v==="**"?this.index+=2:(v=this.source[this.index],"<>=!+-*%&|^/".indexOf(v)>=0&&++this.index)))}return this.index===m&&this.throwUnexpectedToken(),{type:7,value:v,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},f.prototype.scanHexLiteral=function(m){for(var v="";!this.eof()&&s.Character.isHexDigit(this.source.charCodeAt(this.index));)v+=this.source[this.index++];return v.length===0&&this.throwUnexpectedToken(),s.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt("0x"+v,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},f.prototype.scanBinaryLiteral=function(m){for(var v="",S;!this.eof()&&(S=this.source[this.index],!(S!=="0"&&S!=="1"));)v+=this.source[this.index++];return v.length===0&&this.throwUnexpectedToken(),this.eof()||(S=this.source.charCodeAt(this.index),(s.Character.isIdentifierStart(S)||s.Character.isDecimalDigit(S))&&this.throwUnexpectedToken()),{type:6,value:parseInt(v,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},f.prototype.scanOctalLiteral=function(m,v){var S="",g=!1;for(s.Character.isOctalDigit(m.charCodeAt(0))?(g=!0,S="0"+this.source[this.index++]):++this.index;!this.eof()&&s.Character.isOctalDigit(this.source.charCodeAt(this.index));)S+=this.source[this.index++];return!g&&S.length===0&&this.throwUnexpectedToken(),(s.Character.isIdentifierStart(this.source.charCodeAt(this.index))||s.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(S,8),octal:g,lineNumber:this.lineNumber,lineStart:this.lineStart,start:v,end:this.index}},f.prototype.isImplicitOctalLiteral=function(){for(var m=this.index+1;m<this.length;++m){var v=this.source[m];if(v==="8"||v==="9")return!1;if(!s.Character.isOctalDigit(v.charCodeAt(0)))return!0}return!0},f.prototype.scanNumericLiteral=function(){var m=this.index,v=this.source[m];o.assert(s.Character.isDecimalDigit(v.charCodeAt(0))||v===".","Numeric literal must start with a decimal digit or a decimal point");var S="";if(v!=="."){if(S=this.source[this.index++],v=this.source[this.index],S==="0"){if(v==="x"||v==="X")return++this.index,this.scanHexLiteral(m);if(v==="b"||v==="B")return++this.index,this.scanBinaryLiteral(m);if(v==="o"||v==="O")return this.scanOctalLiteral(v,m);if(v&&s.Character.isOctalDigit(v.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(v,m)}for(;s.Character.isDecimalDigit(this.source.charCodeAt(this.index));)S+=this.source[this.index++];v=this.source[this.index]}if(v==="."){for(S+=this.source[this.index++];s.Character.isDecimalDigit(this.source.charCodeAt(this.index));)S+=this.source[this.index++];v=this.source[this.index]}if(v==="e"||v==="E")if(S+=this.source[this.index++],v=this.source[this.index],(v==="+"||v==="-")&&(S+=this.source[this.index++]),s.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;s.Character.isDecimalDigit(this.source.charCodeAt(this.index));)S+=this.source[this.index++];else this.throwUnexpectedToken();return s.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(S),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},f.prototype.scanStringLiteral=function(){var m=this.index,v=this.source[m];o.assert(v==="'"||v==='"',"String literal must starts with a quote"),++this.index;for(var S=!1,g="";!this.eof();){var y=this.source[this.index++];if(y===v){v="";break}else if(y==="\\")if(y=this.source[this.index++],!y||!s.Character.isLineTerminator(y.charCodeAt(0)))switch(y){case"u":if(this.source[this.index]==="{")++this.index,g+=this.scanUnicodeCodePointEscape();else{var P=this.scanHexEscape(y);P===null&&this.throwUnexpectedToken(),g+=P}break;case"x":var w=this.scanHexEscape(y);w===null&&this.throwUnexpectedToken(a.Messages.InvalidHexEscapeSequence),g+=w;break;case"n":g+=`
`;break;case"r":g+="\r";break;case"t":g+="	";break;case"b":g+="\b";break;case"f":g+="\f";break;case"v":g+="\v";break;case"8":case"9":g+=y,this.tolerateUnexpectedToken();break;default:if(y&&s.Character.isOctalDigit(y.charCodeAt(0))){var D=this.octalToDecimal(y);S=D.octal||S,g+=String.fromCharCode(D.code)}else g+=y;break}else++this.lineNumber,y==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else{if(s.Character.isLineTerminator(y.charCodeAt(0)))break;g+=y}}return v!==""&&(this.index=m,this.throwUnexpectedToken()),{type:8,value:g,octal:S,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},f.prototype.scanTemplate=function(){var m="",v=!1,S=this.index,g=this.source[S]==="`",y=!1,P=2;for(++this.index;!this.eof();){var w=this.source[this.index++];if(w==="`"){P=1,y=!0,v=!0;break}else if(w==="$"){if(this.source[this.index]==="{"){this.curlyStack.push("${"),++this.index,v=!0;break}m+=w}else if(w==="\\")if(w=this.source[this.index++],s.Character.isLineTerminator(w.charCodeAt(0)))++this.lineNumber,w==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else switch(w){case"n":m+=`
`;break;case"r":m+="\r";break;case"t":m+="	";break;case"u":if(this.source[this.index]==="{")++this.index,m+=this.scanUnicodeCodePointEscape();else{var D=this.index,T=this.scanHexEscape(w);T!==null?m+=T:(this.index=D,m+=w)}break;case"x":var _=this.scanHexEscape(w);_===null&&this.throwUnexpectedToken(a.Messages.InvalidHexEscapeSequence),m+=_;break;case"b":m+="\b";break;case"f":m+="\f";break;case"v":m+="\v";break;default:w==="0"?(s.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(a.Messages.TemplateOctalLiteral),m+="\0"):s.Character.isOctalDigit(w.charCodeAt(0))?this.throwUnexpectedToken(a.Messages.TemplateOctalLiteral):m+=w;break}else s.Character.isLineTerminator(w.charCodeAt(0))?(++this.lineNumber,w==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index,m+=`
`):m+=w}return v||this.throwUnexpectedToken(),g||this.curlyStack.pop(),{type:10,value:this.source.slice(S+1,this.index-P),cooked:m,head:g,tail:y,lineNumber:this.lineNumber,lineStart:this.lineStart,start:S,end:this.index}},f.prototype.testRegExp=function(m,v){var S="\uFFFF",g=m,y=this;v.indexOf("u")>=0&&(g=g.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(P,w,D){var T=parseInt(w||D,16);return T>1114111&&y.throwUnexpectedToken(a.Messages.InvalidRegExp),T<=65535?String.fromCharCode(T):S}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,S));try{RegExp(g)}catch{this.throwUnexpectedToken(a.Messages.InvalidRegExp)}try{return new RegExp(m,v)}catch{return null}},f.prototype.scanRegExpBody=function(){var m=this.source[this.index];o.assert(m==="/","Regular expression literal must start with a slash");for(var v=this.source[this.index++],S=!1,g=!1;!this.eof();)if(m=this.source[this.index++],v+=m,m==="\\")m=this.source[this.index++],s.Character.isLineTerminator(m.charCodeAt(0))&&this.throwUnexpectedToken(a.Messages.UnterminatedRegExp),v+=m;else if(s.Character.isLineTerminator(m.charCodeAt(0)))this.throwUnexpectedToken(a.Messages.UnterminatedRegExp);else if(S)m==="]"&&(S=!1);else if(m==="/"){g=!0;break}else m==="["&&(S=!0);return g||this.throwUnexpectedToken(a.Messages.UnterminatedRegExp),v.substr(1,v.length-2)},f.prototype.scanRegExpFlags=function(){for(var m="",v="";!this.eof();){var S=this.source[this.index];if(!s.Character.isIdentifierPart(S.charCodeAt(0)))break;if(++this.index,S==="\\"&&!this.eof())if(S=this.source[this.index],S==="u"){++this.index;var g=this.index,y=this.scanHexEscape("u");if(y!==null)for(v+=y,m+="\\u";g<this.index;++g)m+=this.source[g];else this.index=g,v+="u",m+="\\u";this.tolerateUnexpectedToken()}else m+="\\",this.tolerateUnexpectedToken();else v+=S,m+=S}return v},f.prototype.scanRegExp=function(){var m=this.index,v=this.scanRegExpBody(),S=this.scanRegExpFlags(),g=this.testRegExp(v,S);return{type:9,value:"",pattern:v,flags:S,regex:g,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},f.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var m=this.source.charCodeAt(this.index);return s.Character.isIdentifierStart(m)?this.scanIdentifier():m===40||m===41||m===59?this.scanPunctuator():m===39||m===34?this.scanStringLiteral():m===46?s.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():s.Character.isDecimalDigit(m)?this.scanNumericLiteral():m===96||m===125&&this.curlyStack[this.curlyStack.length-1]==="${"?this.scanTemplate():m>=55296&&m<57343&&s.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()},f}();n.Scanner=d},function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TokenName={},n.TokenName[1]="Boolean",n.TokenName[2]="<end>",n.TokenName[3]="Identifier",n.TokenName[4]="Keyword",n.TokenName[5]="Null",n.TokenName[6]="Numeric",n.TokenName[7]="Punctuator",n.TokenName[8]="String",n.TokenName[9]="RegularExpression",n.TokenName[10]="Template"},function(i,n){Object.defineProperty(n,"__esModule",{value:!0}),n.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",times:"\xD7",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",divide:"\xF7",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",frasl:"\u2044",euro:"\u20AC",image:"\u2111",weierp:"\u2118",real:"\u211C",trade:"\u2122",alefsym:"\u2135",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lArr:"\u21D0",uArr:"\u21D1",rArr:"\u21D2",dArr:"\u21D3",hArr:"\u21D4",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666",lang:"\u27E8",rang:"\u27E9"}},function(i,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(10),s=r(12),a=r(13),h=function(){function d(){this.values=[],this.curly=this.paren=-1}return d.prototype.beforeFunctionExpression=function(f){return["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(f)>=0},d.prototype.isRegexStart=function(){var f=this.values[this.values.length-1],m=f!==null;switch(f){case"this":case"]":m=!1;break;case")":var v=this.values[this.paren-1];m=v==="if"||v==="while"||v==="for"||v==="with";break;case"}":if(m=!1,this.values[this.curly-3]==="function"){var S=this.values[this.curly-4];m=S?!this.beforeFunctionExpression(S):!1}else if(this.values[this.curly-4]==="function"){var S=this.values[this.curly-5];m=S?!this.beforeFunctionExpression(S):!0}break}return m},d.prototype.push=function(f){f.type===7||f.type===4?(f.value==="{"?this.curly=this.values.length:f.value==="("&&(this.paren=this.values.length),this.values.push(f.value)):this.values.push(null)},d}(),c=function(){function d(f,m){this.errorHandler=new o.ErrorHandler,this.errorHandler.tolerant=m?typeof m.tolerant=="boolean"&&m.tolerant:!1,this.scanner=new s.Scanner(f,this.errorHandler),this.scanner.trackComment=m?typeof m.comment=="boolean"&&m.comment:!1,this.trackRange=m?typeof m.range=="boolean"&&m.range:!1,this.trackLoc=m?typeof m.loc=="boolean"&&m.loc:!1,this.buffer=[],this.reader=new h}return d.prototype.errors=function(){return this.errorHandler.errors},d.prototype.getNextToken=function(){if(this.buffer.length===0){var f=this.scanner.scanComments();if(this.scanner.trackComment)for(var m=0;m<f.length;++m){var v=f[m],S=this.scanner.source.slice(v.slice[0],v.slice[1]),g={type:v.multiLine?"BlockComment":"LineComment",value:S};this.trackRange&&(g.range=v.range),this.trackLoc&&(g.loc=v.loc),this.buffer.push(g)}if(!this.scanner.eof()){var y=void 0;this.trackLoc&&(y={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});var P=this.scanner.source[this.scanner.index]==="/"&&this.reader.isRegexStart(),w=P?this.scanner.scanRegExp():this.scanner.lex();this.reader.push(w);var D={type:a.TokenName[w.type],value:this.scanner.source.slice(w.start,w.end)};if(this.trackRange&&(D.range=[w.start,w.end]),this.trackLoc&&(y.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},D.loc=y),w.type===9){var T=w.pattern,_=w.flags;D.regex={pattern:T,flags:_}}this.buffer.push(D)}}return this.buffer.shift()},d}();n.Tokenizer=c}])})})(Ti);function Ai(e,t){var i=[e],n,r,o,s,a,h,c;for(n=0;n<i.length;n+=1)if(a=i[n],typeof a!="number"){t(a);for(o in a)if(o!=="parent")if(h=a[o],h instanceof Array)for(r=0,s=h.length;r<s;r+=1)c=h[r],c instanceof Object&&(c.parent=a),i.push(c);else h!=null&&typeof h.type=="string"&&(h.parent=a,i.push(h))}}function OP(e,t){const i=document.querySelector("svg");let n=!1,r,o,s;t("mousedown",".translate-handle-trigger",a=>{const h=i.panZoomParams.svgPoint;h({x:a.offsetX,y:a.offsetY}),n=!0,e.transforming=!0,r=Number(a.target.dataset.index),o=e.storedPCB.components[r].pos,s=[],Hd(e).forEach((c,d)=>{if(d!==r)return;const{start:f,ast:m}=c,[v,S]=m.body[0].expression.elements,g=Vd(s);Ai(v,P=>g(P));const y=Vd(s);Ai(S,P=>y(P))}),e.transformUpdate=(c,d)=>{const f=[],m=xP(f);Hd(e).forEach((v,S)=>{if(S!==r)return;const{start:g,ast:y}=v,[P,w]=y.body[0].expression.elements,D=m(g);Ai(P,_=>D(_,c));const T=m(g);Ai(w,_=>T(_,d))}),e.codemirror.view.dispatch({changes:f})}}),t("mousemove","",a=>{if(!n)return;const h=g=>e.gridSize===0||!e.grid?g:Jl(yP(g,e.gridSize),8),c=i.panZoomParams.svgPoint,d=c({x:a.offsetX,y:a.offsetY}),f=o[0]-s[0],m=o[1]-s[1],v=Jl(h(d.x)-f,8),S=Jl(h(d.y)-m,8);Ot("TRANSLATE",{x:v,y:S,index:r})}),t("mouseup","",a=>{n=!1,e.transforming=!1}),t("mouseleave","",a=>{n=!1,e.transforming=!1})}const yP=(e,t)=>Math.round(e/t)*t,Jl=(e,t)=>Math.round(e*10**t)/10**t,xP=(e,t)=>i=>{let n=!1,r=!1;return(o,s)=>{if(!r&&o.type==="Literal"&&typeof o.value=="number"){let a=o.range[0];if(o.parent&&o.parent.operator==="/")return;o.parent&&o.parent.operator,o.parent&&o.parent.type==="BinaryExpression"&&(o.parent.operator==="+"||o.parent.operator==="-")&&o.parent.right==o&&(n=!0,a=o.parent.left.range[1]),o.parent&&o.parent.type==="UnaryExpression"&&o.parent.operator==="-"&&(a=o.parent.range[0]);let h=s,c=h<0,d;c?d=`-${Math.abs(h)}`:n?d=`+${h}`:d=`${h}`,e.push({from:a+i,to:o.range[1]+i,insert:d}),r=!0}}},Vd=e=>{let t=!1;return i=>{let n=0;if(i.type==="Literal"&&typeof i.value=="number"){if(i.range[0],i.parent&&i.parent.operator==="/")return;i.parent&&i.parent.operator==="-"&&(t=!0),i.parent&&i.parent.type==="BinaryExpression"&&(i.parent.operator==="+"||i.parent.operator==="-")&&i.parent.right==i&&i.parent.left.range[1],i.parent&&i.parent.type==="UnaryExpression"&&i.parent.operator==="-"&&i.parent.range[0];let r;t?r=-i.value:r=i.value,n=r,n<0?n=-Math.abs(n):n=n,e.push(n)}return n}};function Hd(e){const t=e.codemirror.view.state.doc.toString(),i=Nt(e.codemirror.view.state);let n=[];const r=i.cursor();do{const o=t.slice(r.from,r.to);if(r.name!=="PropertyDefinition"||o!=="translate")continue;r.next(),r.next();const s=t.slice(r.from,r.to);n.push({text:s,start:r.from})}while(r.next());return n.map(o=>({...o,ast:Ti.exports.parseScript(o.text,{range:!0,comment:!0})}))}function vP(e,t){const i=document.querySelector("svg");let n=!1,r,o,s,a;t("mousedown",".draggable-pt",h=>{const c=i.panZoomParams.svgPoint;c({x:h.offsetX,y:h.offsetY}),n=!0,e.transforming=!0,r=Number(h.target.dataset.index),o=[Number(h.target.getAttribute("cx")),Number(h.target.getAttribute("cy"))];const[d,f]=h.target.dataset.text.split(",");s=[...o];const m=Ti.exports.parse(d,{range:!0,comment:!0}).body[0],v=Ti.exports.parse(f,{range:!0,comment:!0}).body[0],S=Jd(s,0);Ai(m,y=>S(y));const g=Jd(s,1);Ai(v,y=>g(y)),a=(y,P,w)=>{const D=e.pts[w],[T,_]=D.text.split(","),I=Ti.exports.parse(T,{range:!0,comment:!0}).body[0],F=Ti.exports.parse(_,{range:!0,comment:!0}).body[0],G=D.start,z=G+T.length+1,U=[],Y=CP(U),Q=Y(G);Ai(I,V=>Q(V,y));const W=Y(z);Ai(F,V=>W(V,P)),e.codemirror.view.dispatch({changes:U}),Ot("RUN",{dragging:!0})}}),t("mousemove","",h=>{if(!n)return;const c=y=>e.gridSize===0||!e.grid?y:Kl(PP(y,e.gridSize),8),d=i.panZoomParams.svgPoint,f=d({x:h.offsetX,y:h.offsetY}),m=o[0]-s[0],v=o[1]-s[1],S=Kl(c(f.x)-m,8),g=Kl(c(f.y)-v,8);a(S,g,r)}),t("mouseup","",h=>{n=!1,e.transforming=!1}),t("mouseleave","",h=>{n=!1,e.transforming=!1})}const PP=(e,t)=>Math.round(e/t)*t,Kl=(e,t)=>Math.round(e*10**t)/10**t,CP=(e,t)=>i=>{let n=!1,r=!1;return(o,s)=>{if(!r&&o.type==="Literal"&&typeof o.value=="number"){let a=o.range[0];if(o.parent&&o.parent.operator==="/")return;o.parent&&o.parent.operator,o.parent&&o.parent.type==="BinaryExpression"&&(o.parent.operator==="+"||o.parent.operator==="-")&&o.parent.right==o&&(n=!0,a=o.parent.left.range[1]),o.parent&&o.parent.type==="UnaryExpression"&&o.parent.operator==="-"&&(a=o.parent.range[0]);let h=s,c=h<0,d;c?d=`-${Math.abs(h)}`:n?d=`+${h}`:d=`${h}`,e.push({from:a+i,to:o.range[1]+i,insert:d}),r=!0}}},Jd=(e,t)=>{let i=!1;return n=>{let r=0;if(n.type==="Literal"&&typeof n.value=="number"){if(n.range[0],n.parent&&n.parent.operator==="/")return;n.parent&&n.parent.operator==="-"&&(i=!0),n.parent&&n.parent.type==="BinaryExpression"&&(n.parent.operator==="+"||n.parent.operator==="-")&&n.parent.right==n&&n.parent.left.range[1],n.parent&&n.parent.type==="UnaryExpression"&&n.parent.operator==="-"&&n.parent.range[0];let o;i?o=-n.value:o=n.value,r=o,r<0?r=-Math.abs(r):r=r,e[t]=r}return r}};function SP(e,t){let i=!1;t("mousedown","#vertical-bar",n=>{i=!0}),t("mousemove","",n=>{if(!i)return;let r=n.clientX/window.innerWidth*100;if(r===0)return;const o=1,s=99;r<o&&(r=o),r>s&&(r=s),document.documentElement.style.setProperty("--vertical-bar",`${r}%`),pauseEvent(n)}),t("mouseup","",n=>{i&&Ot("RENDER"),i=!1})}function wP(e,t){let i=!1,n=1,r=0,o=0,s={x:0,y:0};function a(f){f.style.transformOrigin=`${0}px ${0}px`,f.style.transform="translate("+r+"px, "+o+"px) scale("+n+")",e.gridSize>0&&Ot("RENDER")}function h({x:f,y:m}){let v=(f-r)/n,S=(m-o)/n;return{x:v,y:S}}t("mousedown","",f=>{f.shiftKey||(i=!0,s={x:f.offsetX-r,y:f.offsetY-o},f.detail===2&&console.log(f.offsetX,f.offsetY,h({x:f.offsetX,y:f.offsetY})))}),t("mousemove","",f=>{if(!i||e.transforming)return;r=f.offsetX-s.x,o=f.offsetY-s.y;const m=document.querySelectorAll(".transform-group");for(const v of m)a(v)}),t("mouseup","",f=>{i=!1}),t("wheel","",f=>{let m=(f.offsetX-r)/n,v=(f.offsetY-o)/n;Math.sign(f.deltaY)<0?n*=1.03:n/=1.03,r=f.offsetX-m*n,o=f.offsetY-v*n;const S=document.querySelectorAll(".transform-group");for(const g of S)a(g);f.preventDefault()});function c(f){const m=document.querySelector("svg").getBoundingClientRect(),v=f.x[1]-f.x[0],S=f.y[1]-f.y[0],g=m.width/v,y=m.height/S,P=Math.min(g,y)*.9;n=P;const w={x:(f.x[0]+f.x[1])/2*P-m.width/2,y:(f.y[0]+f.y[1])/2*P-m.height/2};r=-w.x,o=-w.y;const D=document.querySelectorAll(".transform-group");for(const T of D)a(T)}function d(){const f=document.querySelector("svg");if(f===null)return null;const{left:m,right:v,bottom:S,top:g,width:y,height:P}=f.getBoundingClientRect(),w=h({x:y,y:P}),D=h({x:0,y:P}),T=h({x:y,y:0}),_=h({x:0,y:0});return{rt:w,lt:D,rb:T,lb:_}}return{scale:()=>n,x:()=>r,y:()=>o,corners:d,svgPoint:h,setScaleXY:c}}let Kd=0;function bP(e){var t=new FileReader;t.readAsText(e),t.onloadend=i=>{let n=t.result;Ot("UPLOAD_COMP",{text:n,name:`component${Kd}`}),Kd++}}function EP(e){var t=new FileReader;t.readAsText(e),t.onloadend=i=>{let n=t.result;Ot("UPLOAD_JS",{text:n})}}function DP(e,t=[]){let i=e[0],n=i.name.split(".");n[0];const r=n[n.length-1];if(r==="kicad_mod")bP(i);else if(r==="js")EP(i);else throw Error("Unknown extension:",r)}function TP(e,t){t("drop","",function(i){let n=i.dataTransfer.files;DP(n),pauseEvent(i)}),t("dragover","",function(i){pauseEvent(i)})}function AP(e,t){let i=null,n=null;const r=document.querySelector("svg");t("mousedown","",o=>{!o.shiftKey||(i=r.panZoomParams.svgPoint({x:o.offsetX,y:o.offsetY}))}),t("mousemove","",o=>{document.body.classList.add("no-select"),!!o.shiftKey&&i!==null&&(n=r.panZoomParams.svgPoint({x:o.offsetX,y:o.offsetY}),e.selectBox.start=i,e.selectBox.end=n,Ot("RENDER"))}),t("mouseup","",o=>{!o.shiftKey||(document.body.classList.remove("no-select"),i=null,n=null,e.selectBox.start=i,e.selectBox.end=n,Ot("RENDER"))})}const tf=e=>/[0-9]/i.test(e)||e===".";function kP(e,t){let i=!1,n,r,o,s,a,h=null,c=!1,d=!1;t("mousedown",".\u037Cd",f=>{const m=e.codemirror.view.state,v=m.doc,S=m.selection.main.head;v.lineAt(S);let{from:g,to:y,text:P}=v.lineAt(S),w=S,D=S;for(;w>g&&tf(P[w-g-1]);)w--;for(;D<y&&tf(P[D-g]);)D++;let T;if(w>g){let _=w;for(;_>g;)if(_--,T=P[_-g],T!==" ")if(T==="+")h=_;else if(T==="-")h=_,d=!0;else{if(["(","[",",","/","*",";","{","=",":"].includes(T))break;c=!0;break}}a=P.slice(w-g,D-g),n=Number(a),d&&(n=-n),i=!0,r=w,s=a.includes("."),o=a.includes(".")?a.split(".")[1].length:1}),t("mousemove","",f=>{if(!i)return;const m=e.codemirror;let v,S=a.length;if(0>f.movementX,s){let g=Math.round(n*10**o)+f.movementX;g=Math.round(g)/10**o,n=g,v=`${Math.abs(n).toFixed(o)}`}else n+=f.movementX,v=`${Math.abs(n)}`;c?(h==null&&(v=(n<0?"-":"+")+v),m.view.dispatch({changes:{from:r,to:r+S,insert:v}}),h!=null&&m.view.dispatch({changes:{from:h,to:h+1,insert:n<0?"-":"+"}})):h!=null?n<0?(m.view.dispatch({changes:{from:r,to:r+S,insert:v}}),m.view.dispatch({changes:{from:h,to:h+1,insert:"-"}})):(m.view.dispatch({changes:{from:h,to:r+S,insert:v}}),r=h,h=null):(n<0&&(v="-"+v),m.view.dispatch({changes:{from:r,to:r+S,insert:v}})),a=v,Ot("RUN",{dragging:!0}),pauseEvent(f)}),t("mouseup","",f=>{i=!1,h=null,c=!1,d=!1})}function ta(e,t){const i=new RegExp(`\\/\\*\\s*--\\s*${e}\\s*--\\s*\\*\\/`,"g"),n=t.matchAll(i).next();return n.value!==void 0?n.value.index+n.value[0].length+1:null}function _P(e,t){const i=document.querySelector("svg");let n=!1,r,o;t("mousedown",".footprint-svg, .path-footprint",s=>{n=!0,r=s.target.dataset.index,o=e.codemirror.view.state.doc.toString(),Ti.exports.parseScript(o,{range:!0,comment:!0})}),t("mousemove","",s=>{if(!n)return;const a=i.panZoomParams.svgPoint;a({x:s.offsetX,y:s.offsetY});var h=event.path||event.composedPath&&event.composedPath();if(!h)return;h.some(m=>m.matches&&m.matches("#viewer"));const c=document.querySelector("#viewer").getBoundingClientRect(),d=s.clientX-c.left,f=s.clientY-c.top;e.previewFootprint=[e.footprints[r],[d,f]],Ot("RENDER")}),t("mouseup","",s=>{if(e.previewFootprint!==null){const a=document.querySelector("#viewer").getBoundingClientRect(),h=s.clientX-a.left,c=a.bottom-s.clientY,d=i.panZoomParams.svgPoint,f=d({x:h,y:c}),m=e.codemirror.view.state.doc.toString(),v=ta("ADD_COMPONENTS",m);if(v!==null){const S=e.previewFootprint[0][0],g=`board.add(${S}, { translate: pt(${f.x}, ${f.y}), name: ${S} })
`;e.codemirror.view.dispatch({changes:{from:v,insert:g}}),Ot("RUN")}}e.previewFootprint=null,n&&Ot("RENDER"),n=!1}),t("mouseleave","",s=>{e.previewFootprint=null,n=!1})}function ef(e,t){const i=e.codemirror.view.state.doc.toString();let n=[],r=[];const o=t.cursor();do{const s=i.slice(o.from,o.to);o.name==="CallExpression"&&s.slice(0,2)==="pt"&&n.push([o.from,o.to]),o.name==="CallExpression"&&s.slice(0,4)==="path"&&r.push([o.from,o.to])}while(o.next());return{pts:n,paths:r}}const IP=(e,t)=>Math.round(e/t)*t,LP=(e,t)=>Math.round(e*10**t)/10**t;function QP(e,t){setInterval(()=>XP(e),300);const i=document.querySelector("svg"),n=r=>e.gridSize===0||!e.grid?r:LP(IP(r,e.gridSize),8);t("mousedown","",r=>{if(e.selectedPath===null)return;const o=i.panZoomParams.svgPoint,s=o({x:r.offsetX,y:r.offsetY}),a={x:n(s.x),y:n(s.y)},h=e.codemirror.view.state.doc.toString();let c=e.selectedPath.pathEnd-2;const d=[" ","	",`
`];let f=" ";for(;c>0&&(f=h[c],!!d.includes(f));)c--;if(f===","||f==="("){const m=`
  pt(${a.x}, ${a.y}),`;e.codemirror.view.dispatch({changes:{from:c+1,insert:m}}),Ot("RUN")}})}function XP(e){const t=e.codemirror.view.state.doc;let i=t.toString();const n=pc(e.codemirror.view.state,t.length,1e4),{pts:r,paths:o}=ef(e,n);let s=null;o.forEach(a=>{const[h,c]=a;Yt.codemirror.view.state.selection.ranges.some(d=>{const{from:f,to:m}=d;return f>h&&m<c})&&(s={pathStart:h,pathEnd:c,str:i.substr(h,c-h)})}),Yt.selectedPath=s,Ot("RENDER")}function $P(e){return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,!1}window.pauseEvent=$P;const nf=e=>e.composedPath()[0],NP=(e,t)=>nf(e).matches(t),rf=e=>(t,i,n)=>{e.addEventListener(t,r=>{r.trigger=nf(r),(i===""||NP(r,i))&&n(r)})};function FP(e){const t=document.querySelector("svg"),i=rf(t);t.panZoomParams=wP(e,i),e.panZoomParams=t.panZoomParams,AP(e,i),OP(e,i),vP(e,i),QP(e,i);const n=document.querySelector("body"),r=rf(n);_P(e,r),TP(e,r),kP(e,r),SP(e,r),r("keydown","",o=>{let s=event.code;s==="Enter"&&event.shiftKey?(event.preventDefault(),Ot("RUN")):s==="KeyT"&&event.shiftKey}),window.addEventListener("unload",()=>{const o=e.codemirror.view.state.doc.toString();window.localStorage.setItem("svg-pcb",o)})}const MP=(e,t)=>({F:{pos:[0,0],shape:ci(yn(t)),layers:["F.Cu"],index:1},B:{pos:[0,0],shape:ci(yn(t)),layers:["B.Cu"],index:2},drill:{pos:[0,0],shape:ci(yn(e)),layers:["drill"]}}),BP=([e,t],[i,n])=>[e+i,t+n],RP=([e,t],i)=>[e*Math.cos(i)-t*Math.sin(i),t*Math.cos(i)+e*Math.sin(i)];class YP{constructor({pads:t,layers:i}){this.pads=t,this.layers=i}pad(t){return this.pads[t]}padX(t){return this.pads[t][0]}padY(t){return this.pads[t][1]}get pos(){return this.pads.center}get posX(){return this.pads.center[0]}get posY(){return this.pads.center[1]}}function WP(e,t={}){let i=t.translate||[0,0],n=t.rotate||0,r=t.padLabelSize||.02;const o=n*Math.PI/180,s={},a=[];let h={};for(const c in e){let{pos:d,shape:f,layers:m,origin:v}=e[c];typeof f=="string"&&(f=Vl([],f));let S=[d[0],d[1]];v!==void 0&&(S[0]=v[0],S[1]=v[1]),zi(f,S),zi(f,i),ql(f,n,i);let g=BP(RP(d,o),i);s[c]=g,c.includes("drill")||a.push({type:"text",value:c,translate:g,rotate:n,size:r}),m.forEach(y=>{y in h?h[y].push(f):h[y]=[f]})}return s.center=i,h.padLabels=a,new YP({pads:s,layers:h})}class jP{constructor(){this.layers={},this.components=[]}add(t,i={}){const n=i.name||"",r={translate:i.translate||[0,0],rotate:i.rotate||0,padLabelSize:i.padLabelSize||.03,componentLabelSize:i.componentLabelSize||.04},o=WP(t,r);for(const s in o.layers)o.layers[s].forEach(a=>{this.addShape(s,a)});return n!==""&&!n.includes("drill")&&this.addShape("componentLabels",{type:"text",value:n,translate:r.translate,rotate:0,size:r.componentLabelSize}),this.components.push(o),o}addShape(t,i){return i[0]&&(typeof i[0][0]=="number"||typeof i[0][0]=="string")&&(i=Gl(i)),t in this.layers?this.layers[t].push(i):this.layers[t]=[i],this.layers[t]}getLayer(t,i=!1){if(!(t in this.layers))return[];const n=[],r=[],o=[];return this.layers[t].forEach(s=>{s.type==="wire"?o.push({type:"wire",data:ci(s.shape),thickness:s.thickness,shape:s.shape}):Array.isArray(s)?n.push(s):s.type==="text"&&r.push(s)}),i?[ci((()=>{var s;return(s=qd(...n,...o.map(a=>kd(a.shape,a.thickness/2,{endType:"etOpenRound",jointType:"jtRound"}))))!=null?s:[]})()),...r]:[...n.map(ci),...r,...o]}wire(t,i,n="F.Cu"){const r={type:"wire",shape:Gl(t),thickness:i};this.addShape(n,r)}}function ae(e){this._line=this._col=this._pos=0,this._stream=e}ae.not_whitespace_or_end=/^(\S|$)/,ae.space_quote_paren_escaped_or_end=/^(\s|\\|"|'|`|,|\(|\)|$)/,ae.string_or_escaped_or_end=/^(\\|"|$)/,ae.string_delimiters=/["]/,ae.quotes=/['`,]/,ae.quotes_map={"'":"quote","`":"quasiquote",",":"unquote"},ae.prototype={peek:qP,consume:UP,until:GP,error:zP,string:VP,atom:HP,quoted:JP,expr:KP,list:tC};function ZP(e){var t=new ae(e),i=t.expr();return i instanceof Error?i:t.peek()!=""?t.error("Superfluous characters after expression: `"+t.peek()+"`"):i}function zP(e){var t=new Error("Syntax error: "+e);return t.line=this._line+1,t.col=this._col+1,t}function qP(){return this._stream.length==this._pos?"":this._stream[this._pos]}function UP(){if(this._stream.length==this._pos)return"";var e=this._stream[this._pos];return this._pos+=1,e=="\r"?(this.peek()==`
`&&(this._pos+=1,e+=`
`),this._line++,this._col=0):e==`
`?(this._line++,this._col=0):this._col++,e}function GP(e){for(var t="";!e.test(this.peek());)t+=this.consume();return t}function VP(){for(var e=this.consume(),t="";;){t+=this.until(ae.string_or_escaped_or_end);var i=this.peek();if(i=="")return this.error("Unterminated string literal");if(i==e){this.consume();break}if(i=="\\"){this.consume(),i=this.peek(),i=="r"?(this.consume(),t+="\r"):i=="t"?(this.consume(),t+="	"):i=="n"?(this.consume(),t+=`
`):i=="f"?(this.consume(),t+="\f"):i=="b"?(this.consume(),t+="\b"):t+=this.consume();continue}t+=this.consume()}return new String(t)}function HP(){if(ae.string_delimiters.test(this.peek()))return this.string();for(var e="";;){e+=this.until(ae.space_quote_paren_escaped_or_end);var t=this.peek();if(t=="\\"){this.consume(),e+=this.consume();continue}break}return e}function JP(){var e=this.consume(),t=ae.quotes_map[e];t=="unquote"&&this.peek()=="@"&&(this.consume(),t="unquote-splicing",e=",@"),this.until(ae.not_whitespace_or_end);var i=this.expr();return i instanceof Error?i:i===""?this.error("Unexpected `"+this.peek()+"` after `"+e+"`"):[t,i]}function KP(){if(this.until(ae.not_whitespace_or_end),ae.quotes.test(this.peek()))return this.quoted();var e=this.peek()=="("?this.list():this.atom();return this.until(ae.not_whitespace_or_end),e}function tC(){if(this.peek()!="(")return this.error("Expected `(` - saw `"+this.peek()+"` instead.");this.consume();var e=[],t=this.expr();if(t instanceof Error)return t;if(t!=="")for(e.push(t);(t=this.expr())!=="";){if(t instanceof Error)return t;e.push(t)}return this.peek()!=")"?this.error("Expected `)` - saw: `"+this.peek()+"`"):(this.consume(),e)}const eC=e=>e.reduce((t,i)=>{let n=i.split(".");return n.length===0?t:n[0]!=="*"?[...t,i]:[...t,`F.${n[1]}`,`B.${n[1]}`]},[]);function iC(e){let t=ZP(e),i=1/25.4;const n={};for(const o of t){const s=o[0]==="pad",a=o[2]==="smd",h=o[2]==="thru_hole",c=o[3];if(s&&(a||h)){let d=o[1],f=o[4].slice(1).map(y=>Number(y)*i);f[1]=-f[1];let m=o[o.length-1];m=m?m.slice(1):[],m=eC(m);let v=o[5].slice(1).map(y=>Number(y)*i);const S={rect:()=>Hl(...v),roundrect:()=>Hl(...v),circle:()=>yn(...v)};let g=c in S?S[c]():[];if(n[d]===void 0?n[d]=[{pos:f,shape:g,layers:m}]:n[d].push({pos:f,shape:g,layers:m}),o[o.length-2]?o[o.length-2][0]==="drill":!1){let y=Number(o[o.length-2][1])/25.4,P={pos:f,shape:yn(y),layers:["drill"]};n[`${d}_drill`]===void 0?n[`${d}_drill`]=[P]:n[`${d}_drill`].push(P)}}}let r=Object.entries(n).reduce((o,s)=>{const[a,h]=s;return h.length===1?o[a]=h[0]:h.forEach((c,d)=>{o[`${a}_${d+1}`]=c}),o},{});return Object.keys(r).forEach(o=>{let s="";r[o].shape.forEach(a=>{a.forEach((h,c)=>{const{x:d,y:f}=h;s+=`${c==0?"M":"L"} ${d} ${f} `})}),r[o].shape=s,r[o].layers=["F.Cu"]}),r}const{stringify:nC}=JSON;if(!String.prototype.repeat)throw new Error("String.prototype.repeat is undefined, see https://github.com/davidbonnet/astring#installation");if(!String.prototype.endsWith)throw new Error("String.prototype.endsWith is undefined, see https://github.com/davidbonnet/astring#installation");const qs={"||":3,"&&":4,"|":5,"??":5,"^":6,"&":7,"==":8,"!=":8,"===":8,"!==":8,"<":9,">":9,"<=":9,">=":9,in:9,instanceof:9,"<<":10,">>":10,">>>":10,"+":11,"-":11,"*":12,"%":12,"/":12,"**":13},je=17,rC={ArrayExpression:20,TaggedTemplateExpression:20,ThisExpression:20,Identifier:20,PrivateIdentifier:20,Literal:18,TemplateLiteral:20,Super:20,SequenceExpression:20,MemberExpression:19,ChainExpression:19,CallExpression:19,NewExpression:19,ArrowFunctionExpression:je,ClassExpression:je,FunctionExpression:je,ObjectExpression:je,UpdateExpression:16,UnaryExpression:15,AwaitExpression:15,BinaryExpression:14,LogicalExpression:13,ConditionalExpression:4,AssignmentExpression:3,YieldExpression:2,RestElement:1};function xn(e,t){const{generator:i}=e;if(e.write("("),t!=null&&t.length>0){i[t[0].type](t[0],e);const{length:n}=t;for(let r=1;r<n;r++){const o=t[r];e.write(", "),i[o.type](o,e)}}e.write(")")}function sf(e,t,i,n){const r=e.expressionsPrecedence[t.type];if(r===je)return!0;const o=e.expressionsPrecedence[i.type];return r!==o?!n&&r===15&&o===14&&i.operator==="**"||r<o:r!==13&&r!==14?!1:t.operator==="**"&&i.operator==="**"?!n:n?qs[t.operator]<=qs[i.operator]:qs[t.operator]<qs[i.operator]}function Us(e,t,i,n){const{generator:r}=e;sf(e,t,i,n)?(e.write("("),r[t.type](t,e),e.write(")")):r[t.type](t,e)}function sC(e,t,i,n){const r=t.split(`
`),o=r.length-1;if(e.write(r[0].trim()),o>0){e.write(n);for(let s=1;s<o;s++)e.write(i+r[s].trim()+n);e.write(i+r[o].trim())}}function pe(e,t,i,n){const{length:r}=t;for(let o=0;o<r;o++){const s=t[o];e.write(i),s.type[0]==="L"?e.write("// "+s.value.trim()+`
`,s):(e.write("/*"),sC(e,s.value,i,n),e.write("*/"+n))}}function oC(e){let t=e;for(;t!=null;){const{type:i}=t;if(i[0]==="C"&&i[1]==="a")return!0;if(i[0]==="M"&&i[1]==="e"&&i[2]==="m")t=t.object;else return!1}}function ea(e,t){const{generator:i}=e,{declarations:n}=t;e.write(t.kind+" ");const{length:r}=n;if(r>0){i.VariableDeclarator(n[0],e);for(let o=1;o<r;o++)e.write(", "),i.VariableDeclarator(n[o],e)}}let of,lf,af,hf,uf,cf;const lC={Program(e,t){const i=t.indent.repeat(t.indentLevel),{lineEnd:n,writeComments:r}=t;r&&e.comments!=null&&pe(t,e.comments,i,n);const o=e.body,{length:s}=o;for(let a=0;a<s;a++){const h=o[a];r&&h.comments!=null&&pe(t,h.comments,i,n),t.write(i),this[h.type](h,t),t.write(n)}r&&e.trailingComments!=null&&pe(t,e.trailingComments,i,n)},BlockStatement:cf=function(e,t){const i=t.indent.repeat(t.indentLevel++),{lineEnd:n,writeComments:r}=t,o=i+t.indent;t.write("{");const s=e.body;if(s!=null&&s.length>0){t.write(n),r&&e.comments!=null&&pe(t,e.comments,o,n);const{length:a}=s;for(let h=0;h<a;h++){const c=s[h];r&&c.comments!=null&&pe(t,c.comments,o,n),t.write(o),this[c.type](c,t),t.write(n)}t.write(i)}else r&&e.comments!=null&&(t.write(n),pe(t,e.comments,o,n),t.write(i));r&&e.trailingComments!=null&&pe(t,e.trailingComments,o,n),t.write("}"),t.indentLevel--},ClassBody:cf,StaticBlock(e,t){t.write("static "),this.BlockStatement(e,t)},EmptyStatement(e,t){t.write(";")},ExpressionStatement(e,t){const i=t.expressionsPrecedence[e.expression.type];i===je||i===3&&e.expression.left.type[0]==="O"?(t.write("("),this[e.expression.type](e.expression,t),t.write(")")):this[e.expression.type](e.expression,t),t.write(";")},IfStatement(e,t){t.write("if ("),this[e.test.type](e.test,t),t.write(") "),this[e.consequent.type](e.consequent,t),e.alternate!=null&&(t.write(" else "),this[e.alternate.type](e.alternate,t))},LabeledStatement(e,t){this[e.label.type](e.label,t),t.write(": "),this[e.body.type](e.body,t)},BreakStatement(e,t){t.write("break"),e.label!=null&&(t.write(" "),this[e.label.type](e.label,t)),t.write(";")},ContinueStatement(e,t){t.write("continue"),e.label!=null&&(t.write(" "),this[e.label.type](e.label,t)),t.write(";")},WithStatement(e,t){t.write("with ("),this[e.object.type](e.object,t),t.write(") "),this[e.body.type](e.body,t)},SwitchStatement(e,t){const i=t.indent.repeat(t.indentLevel++),{lineEnd:n,writeComments:r}=t;t.indentLevel++;const o=i+t.indent,s=o+t.indent;t.write("switch ("),this[e.discriminant.type](e.discriminant,t),t.write(") {"+n);const{cases:a}=e,{length:h}=a;for(let c=0;c<h;c++){const d=a[c];r&&d.comments!=null&&pe(t,d.comments,o,n),d.test?(t.write(o+"case "),this[d.test.type](d.test,t),t.write(":"+n)):t.write(o+"default:"+n);const{consequent:f}=d,{length:m}=f;for(let v=0;v<m;v++){const S=f[v];r&&S.comments!=null&&pe(t,S.comments,s,n),t.write(s),this[S.type](S,t),t.write(n)}}t.indentLevel-=2,t.write(i+"}")},ReturnStatement(e,t){t.write("return"),e.argument&&(t.write(" "),this[e.argument.type](e.argument,t)),t.write(";")},ThrowStatement(e,t){t.write("throw "),this[e.argument.type](e.argument,t),t.write(";")},TryStatement(e,t){if(t.write("try "),this[e.block.type](e.block,t),e.handler){const{handler:i}=e;i.param==null?t.write(" catch "):(t.write(" catch ("),this[i.param.type](i.param,t),t.write(") ")),this[i.body.type](i.body,t)}e.finalizer&&(t.write(" finally "),this[e.finalizer.type](e.finalizer,t))},WhileStatement(e,t){t.write("while ("),this[e.test.type](e.test,t),t.write(") "),this[e.body.type](e.body,t)},DoWhileStatement(e,t){t.write("do "),this[e.body.type](e.body,t),t.write(" while ("),this[e.test.type](e.test,t),t.write(");")},ForStatement(e,t){if(t.write("for ("),e.init!=null){const{init:i}=e;i.type[0]==="V"?ea(t,i):this[i.type](i,t)}t.write("; "),e.test&&this[e.test.type](e.test,t),t.write("; "),e.update&&this[e.update.type](e.update,t),t.write(") "),this[e.body.type](e.body,t)},ForInStatement:of=function(e,t){t.write(`for ${e.await?"await ":""}(`);const{left:i}=e;i.type[0]==="V"?ea(t,i):this[i.type](i,t),t.write(e.type[3]==="I"?" in ":" of "),this[e.right.type](e.right,t),t.write(") "),this[e.body.type](e.body,t)},ForOfStatement:of,DebuggerStatement(e,t){t.write("debugger;",e)},FunctionDeclaration:lf=function(e,t){t.write((e.async?"async ":"")+(e.generator?"function* ":"function ")+(e.id?e.id.name:""),e),xn(t,e.params),t.write(" "),this[e.body.type](e.body,t)},FunctionExpression:lf,VariableDeclaration(e,t){ea(t,e),t.write(";")},VariableDeclarator(e,t){this[e.id.type](e.id,t),e.init!=null&&(t.write(" = "),this[e.init.type](e.init,t))},ClassDeclaration(e,t){if(t.write("class "+(e.id?`${e.id.name} `:""),e),e.superClass){t.write("extends ");const{superClass:i}=e,{type:n}=i,r=t.expressionsPrecedence[n];(n[0]!=="C"||n[1]!=="l"||n[5]!=="E")&&(r===je||r<t.expressionsPrecedence.ClassExpression)?(t.write("("),this[e.superClass.type](i,t),t.write(")")):this[i.type](i,t),t.write(" ")}this.ClassBody(e.body,t)},ImportDeclaration(e,t){t.write("import ");const{specifiers:i}=e,{length:n}=i;let r=0;if(n>0){for(;r<n;){r>0&&t.write(", ");const o=i[r],s=o.type[6];if(s==="D")t.write(o.local.name,o),r++;else if(s==="N")t.write("* as "+o.local.name,o),r++;else break}if(r<n){for(t.write("{");;){const o=i[r],{name:s}=o.imported;if(t.write(s,o),s!==o.local.name&&t.write(" as "+o.local.name),++r<n)t.write(", ");else break}t.write("}")}t.write(" from ")}this.Literal(e.source,t),t.write(";")},ImportExpression(e,t){t.write("import("),this[e.source.type](e.source,t),t.write(")")},ExportDefaultDeclaration(e,t){t.write("export default "),this[e.declaration.type](e.declaration,t),t.expressionsPrecedence[e.declaration.type]!=null&&e.declaration.type[0]!=="F"&&t.write(";")},ExportNamedDeclaration(e,t){if(t.write("export "),e.declaration)this[e.declaration.type](e.declaration,t);else{t.write("{");const{specifiers:i}=e,{length:n}=i;if(n>0)for(let r=0;;){const o=i[r],{name:s}=o.local;if(t.write(s,o),s!==o.exported.name&&t.write(" as "+o.exported.name),++r<n)t.write(", ");else break}t.write("}"),e.source&&(t.write(" from "),this.Literal(e.source,t)),t.write(";")}},ExportAllDeclaration(e,t){e.exported!=null?t.write("export * as "+e.exported.name+" from "):t.write("export * from "),this.Literal(e.source,t),t.write(";")},MethodDefinition(e,t){e.static&&t.write("static ");const i=e.kind[0];(i==="g"||i==="s")&&t.write(e.kind+" "),e.value.async&&t.write("async "),e.value.generator&&t.write("*"),e.computed?(t.write("["),this[e.key.type](e.key,t),t.write("]")):this[e.key.type](e.key,t),xn(t,e.value.params),t.write(" "),this[e.value.body.type](e.value.body,t)},ClassExpression(e,t){this.ClassDeclaration(e,t)},ArrowFunctionExpression(e,t){t.write(e.async?"async ":"",e);const{params:i}=e;i!=null&&(i.length===1&&i[0].type[0]==="I"?t.write(i[0].name,i[0]):xn(t,e.params)),t.write(" => "),e.body.type[0]==="O"?(t.write("("),this.ObjectExpression(e.body,t),t.write(")")):this[e.body.type](e.body,t)},ThisExpression(e,t){t.write("this",e)},Super(e,t){t.write("super",e)},RestElement:af=function(e,t){t.write("..."),this[e.argument.type](e.argument,t)},SpreadElement:af,YieldExpression(e,t){t.write(e.delegate?"yield*":"yield"),e.argument&&(t.write(" "),this[e.argument.type](e.argument,t))},AwaitExpression(e,t){t.write("await ",e),Us(t,e.argument,e)},TemplateLiteral(e,t){const{quasis:i,expressions:n}=e;t.write("`");const{length:r}=n;for(let s=0;s<r;s++){const a=n[s],h=i[s];t.write(h.value.raw,h),t.write("${"),this[a.type](a,t),t.write("}")}const o=i[i.length-1];t.write(o.value.raw,o),t.write("`")},TemplateElement(e,t){t.write(e.value.raw,e)},TaggedTemplateExpression(e,t){Us(t,e.tag,e),this[e.quasi.type](e.quasi,t)},ArrayExpression:uf=function(e,t){if(t.write("["),e.elements.length>0){const{elements:i}=e,{length:n}=i;for(let r=0;;){const o=i[r];if(o!=null&&this[o.type](o,t),++r<n)t.write(", ");else{o==null&&t.write(", ");break}}}t.write("]")},ArrayPattern:uf,ObjectExpression(e,t){const i=t.indent.repeat(t.indentLevel++),{lineEnd:n,writeComments:r}=t,o=i+t.indent;if(t.write("{"),e.properties.length>0){t.write(n),r&&e.comments!=null&&pe(t,e.comments,o,n);const s=","+n,{properties:a}=e,{length:h}=a;for(let c=0;;){const d=a[c];if(r&&d.comments!=null&&pe(t,d.comments,o,n),t.write(o),this[d.type](d,t),++c<h)t.write(s);else break}t.write(n),r&&e.trailingComments!=null&&pe(t,e.trailingComments,o,n),t.write(i+"}")}else r?e.comments!=null?(t.write(n),pe(t,e.comments,o,n),e.trailingComments!=null&&pe(t,e.trailingComments,o,n),t.write(i+"}")):e.trailingComments!=null?(t.write(n),pe(t,e.trailingComments,o,n),t.write(i+"}")):t.write("}"):t.write("}");t.indentLevel--},Property(e,t){e.method||e.kind[0]!=="i"?this.MethodDefinition(e,t):(e.shorthand||(e.computed?(t.write("["),this[e.key.type](e.key,t),t.write("]")):this[e.key.type](e.key,t),t.write(": ")),this[e.value.type](e.value,t))},PropertyDefinition(e,t){e.static&&t.write("static "),this[e.key.type](e.key,t),e.value!=null&&(t.write(" = "),this[e.value.type](e.value,t))},ObjectPattern(e,t){if(t.write("{"),e.properties.length>0){const{properties:i}=e,{length:n}=i;for(let r=0;this[i[r].type](i[r],t),++r<n;)t.write(", ")}t.write("}")},SequenceExpression(e,t){xn(t,e.expressions)},UnaryExpression(e,t){if(e.prefix){const{operator:i,argument:n,argument:{type:r}}=e;t.write(i);const o=sf(t,n,e);!o&&(i.length>1||r[0]==="U"&&(r[1]==="n"||r[1]==="p")&&n.prefix&&n.operator[0]===i&&(i==="+"||i==="-"))&&t.write(" "),o?(t.write(i.length>1?" (":"("),this[r](n,t),t.write(")")):this[r](n,t)}else this[e.argument.type](e.argument,t),t.write(e.operator)},UpdateExpression(e,t){e.prefix?(t.write(e.operator),this[e.argument.type](e.argument,t)):(this[e.argument.type](e.argument,t),t.write(e.operator))},AssignmentExpression(e,t){this[e.left.type](e.left,t),t.write(" "+e.operator+" "),this[e.right.type](e.right,t)},AssignmentPattern(e,t){this[e.left.type](e.left,t),t.write(" = "),this[e.right.type](e.right,t)},BinaryExpression:hf=function(e,t){const i=e.operator==="in";i&&t.write("("),Us(t,e.left,e,!1),t.write(" "+e.operator+" "),Us(t,e.right,e,!0),i&&t.write(")")},LogicalExpression:hf,ConditionalExpression(e,t){const{test:i}=e,n=t.expressionsPrecedence[i.type];n===je||n<=t.expressionsPrecedence.ConditionalExpression?(t.write("("),this[i.type](i,t),t.write(")")):this[i.type](i,t),t.write(" ? "),this[e.consequent.type](e.consequent,t),t.write(" : "),this[e.alternate.type](e.alternate,t)},NewExpression(e,t){t.write("new ");const i=t.expressionsPrecedence[e.callee.type];i===je||i<t.expressionsPrecedence.CallExpression||oC(e.callee)?(t.write("("),this[e.callee.type](e.callee,t),t.write(")")):this[e.callee.type](e.callee,t),xn(t,e.arguments)},CallExpression(e,t){const i=t.expressionsPrecedence[e.callee.type];i===je||i<t.expressionsPrecedence.CallExpression?(t.write("("),this[e.callee.type](e.callee,t),t.write(")")):this[e.callee.type](e.callee,t),e.optional&&t.write("?."),xn(t,e.arguments)},ChainExpression(e,t){this[e.expression.type](e.expression,t)},MemberExpression(e,t){const i=t.expressionsPrecedence[e.object.type];i===je||i<t.expressionsPrecedence.MemberExpression?(t.write("("),this[e.object.type](e.object,t),t.write(")")):this[e.object.type](e.object,t),e.computed?(e.optional&&t.write("?."),t.write("["),this[e.property.type](e.property,t),t.write("]")):(e.optional?t.write("?."):t.write("."),this[e.property.type](e.property,t))},MetaProperty(e,t){t.write(e.meta.name+"."+e.property.name,e)},Identifier(e,t){t.write(e.name,e)},PrivateIdentifier(e,t){t.write(`#${e.name}`,e)},Literal(e,t){e.raw!=null?t.write(e.raw,e):e.regex!=null?this.RegExpLiteral(e,t):e.bigint!=null?t.write(e.bigint+"n",e):t.write(nC(e.value),e)},RegExpLiteral(e,t){const{regex:i}=e;t.write(`/${i.pattern}/${i.flags}`,e)}},aC={};class hC{constructor(t){const i=t==null?aC:t;this.output="",i.output!=null?(this.output=i.output,this.write=this.writeToStream):this.output="",this.generator=i.generator!=null?i.generator:lC,this.expressionsPrecedence=i.expressionsPrecedence!=null?i.expressionsPrecedence:rC,this.indent=i.indent!=null?i.indent:"  ",this.lineEnd=i.lineEnd!=null?i.lineEnd:`
`,this.indentLevel=i.startingIndentLevel!=null?i.startingIndentLevel:0,this.writeComments=i.comments?i.comments:!1,i.sourceMap!=null&&(this.write=i.output==null?this.writeAndMap:this.writeToStreamAndMap,this.sourceMap=i.sourceMap,this.line=1,this.column=0,this.lineEndSize=this.lineEnd.split(`
`).length-1,this.mapping={original:null,generated:this,name:void 0,source:i.sourceMap.file||i.sourceMap._file})}write(t){this.output+=t}writeToStream(t){this.output.write(t)}writeAndMap(t,i){this.output+=t,this.map(t,i)}writeToStreamAndMap(t,i){this.output.write(t),this.map(t,i)}map(t,i){if(i!=null){const{type:o}=i;if(o[0]==="L"&&o[2]==="n"){this.column=0,this.line++;return}if(i.loc!=null){const{mapping:s}=this;s.original=i.loc.start,s.name=i.name,this.sourceMap.addMapping(s)}if(o[0]==="T"&&o[8]==="E"||o[0]==="L"&&o[1]==="i"&&typeof i.value=="string"){const{length:s}=t;let{column:a,line:h}=this;for(let c=0;c<s;c++)t[c]===`
`?(a=0,h++):a++;this.column=a,this.line=h;return}}const{length:n}=t,{lineEnd:r}=this;n>0&&(this.lineEndSize>0&&(r.length===1?t[n-1]===r:t.endsWith(r))?(this.line+=this.lineEndSize,this.column=0):this.column+=n)}toString(){return this.output}}function uC(e,t){const i=new hC(t);return i.generator[e.type](e,i),i.output}function cC(e){const t=[];for(const o in e){const s=e[o];if(!s.layers.includes("F.Cu"))continue;let a=[s.pos[0],s.pos[1]];s.origin!=null&&(a[0]=s.origin[0],a[1]=s.origin[1]),t.push(...zi(Vl([],s.shape),a))}const i=Ud(t),n=Gd(t);qi(t,"cc");const r=Math.max(i,n);return zi(t,qi(t,"cc"),[-25,-25]),Yd(t,[40/r,40/r],qi(t,"cc")),t}const pC=e=>{let t=!1;return e.type!=="ObjectExpression"?!1:(e.properties.forEach(i=>{if(i.value.type!=="ObjectExpression")return;const n=i.value.properties.map(r=>r.key.value);t=t||["shape","pos","layers"].every(r=>n.includes(r))}),t)};function dC(e,t){e.type==="VariableDeclaration"&&e.declarations.forEach(i=>{if(i.type==="VariableDeclarator"&&pC(i.init)){const n=uC(i.init);try{const r=JSON.parse(n),o=[i.id.name,r,cC(r)];t.push(o)}catch{}}})}function fC(e){const t=Ti.exports.parseScript(e,{range:!0,comment:!0}),i=[];return t.body.forEach(n=>{dC(n,i)}),{footprints:i}}const ia={shapes:[],limits:{x:[0,1],y:[0,1]},mm_per_unit:25.4};function mC({shapes:e,limits:t,mm_per_unit:i}){e===void 0&&(e=ia.shapes),t===void 0&&(t=ia.limits),i===void 0&&(i=ia.mm_per_unit),Yt.shapes=e,Yt.limits=t,Yt.mm_per_unit=i}function gC(e){var t,i,n,r;const o=(t=e.d)!=null?t:"",s=(i=e.stroke)!=null?i:"black",a=(n=e.fill)!=null?n:"none",h=(r=e.strokeWidth)!=null?r:.03;Yt.paths.push({d:o,stroke:s,fill:a,strokeWidth:h})}const na={pcb:null,layerColors:{"F.Cu":"#ff8c00cc"},limits:{x:[0,1],y:[0,1]},mm_per_unit:25.4},OC=e=>({pcb:t,layerColors:i,limits:n,mm_per_unit:r})=>{t===void 0&&console.log("renderPCB must include pcb param"),i===void 0&&(i=na.layerColors),n===void 0&&(n=na.limits),r===void 0&&(r=na.mm_per_unit);const o=[];for(const s in i)o.push({data:t.getLayer(s,e),color:i[s],groupId:s});Yt.shapes=o,Yt.limits=n,Yt.mm_per_unit=r};async function yC(e,t){const i=await(await fetch(e,{mode:"cors"})).text();t.codemirror.view.dispatch({changes:{from:0,insert:i}});const n=a=>a.includes("return kicadToObj("),r=t.codemirror.view.state.doc.toString().split(`
`);let o=0,s=0;for(;;){const a=r[o];if(!a||(s+=a.length,o>r.length)||r[o]==="`)})()"&&!n(r[o+1]))break;o++}t.codemirror.foldRange(0,s+o),Ot("RUN"),document.querySelector(".center-button").click()}const xC=`/* -- DECLARE_COMPONENTS -- */
const Molex_serial = {"Rx":{"shape":"M -0.015499999999999998 0.026500000000000003L 0.015500000000000002 0.026500000000000003L 0.015500000000000005 -0.026499999999999996L -0.015499999999999991 -0.026500000000000003L -0.015500000000000005 0.026499999999999996","pos":[-0.075,0.064],"layers":["F.Cu"],"index":1},"Tx":{"shape":"M -0.015499999999999998 0.026500000000000003L 0.015500000000000002 0.026500000000000003L 0.015500000000000005 -0.026499999999999996L -0.015499999999999991 -0.026500000000000003L -0.015500000000000005 0.026499999999999996","pos":[-0.025,0.064],"layers":["F.Cu"],"index":2},"DTR":{"shape":"M -0.015499999999999998 0.026500000000000003L 0.015500000000000002 0.026500000000000003L 0.015500000000000005 -0.026499999999999996L -0.015499999999999991 -0.026500000000000003L -0.015500000000000005 0.026499999999999996","pos":[0.025,0.064],"layers":["F.Cu"],"index":3},"GND":{"shape":"M -0.015499999999999998 0.026500000000000003L 0.015500000000000002 0.026500000000000003L 0.015500000000000005 -0.026499999999999996L -0.015499999999999991 -0.026500000000000003L -0.015500000000000005 0.026499999999999996","pos":[0.075,0.064],"layers":["F.Cu"],"index":4},"NC1":{"shape":"M -0.055 0.065L 0.055 0.065L 0.055000000000000014 -0.065L -0.055 -0.065L -0.055000000000000014 0.065","pos":[-0.16,-0.065],"layers":["F.Cu"],"index":0},"NC2":{"shape":"M -0.055 0.065L 0.055 0.065L 0.055000000000000014 -0.065L -0.055 -0.065L -0.055000000000000014 0.065","pos":[0.16,-0.065],"layers":["F.Cu"],"index":0}}
const DRV8428_HTSSOP = {"VM":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966 M -0.029 -0.0053L -0.028815032667476745 -0.005296771383201207L -0.028630290689156138 -0.005287089466377069L -0.028445999144681437 -0.005270966045451849L -0.028262382564911655 -0.005248420764330322L -0.02807966465836527 -0.0052194810909647026L -0.027898068038665878 -0.00518418228388917L -0.027717813953321763 -0.005142567349262782L -0.027539122014169908 -0.00509468698847309L -0.02736220992981278 -0.005040599536364314L -0.027187293240373958 -0.004980370890165314L -0.02701458505489567 -0.004914074429203974L -0.02684429579169826 -0.004841790925505785L -0.02667663292201789 -0.004763608445385585L -0.02651180071723478 -0.0046796222421523126L -0.026350000000000002 -0.004589934640057525L -0.026191427899564017 -0.004494654909629058L -0.026036277611605044 -0.00439389913454172L -0.025884738162849894 -0.004287790070187222L -0.025736994180774013 -0.004176456994115627L -0.025593225668661342 -0.004060035548530584L -0.025453607786298054 -0.00393866757503019L -0.025318310636567316 -0.0038125009417948512L -0.02518749905820515 -0.003681689363432686L -0.02506133242496981 -0.003546392213701949L -0.02493996445146942 -0.0034067743313386583L -0.024823543005884376 -0.003263005819225989L -0.02471220992981278 -0.0031152618371501077L -0.02460610086545828 -0.002963722388394958L -0.024505345090370945 -0.002808572100435986L -0.024410065359942477 -0.002650000000000001L -0.024320377757847688 -0.002488199282765222L -0.024236391554614416 -0.002323367077982111L -0.024158209074494216 -0.0021557042083017413L -0.02408592557079603 -0.001985414945104333L -0.024019629109834687 -0.0018127067596260447L -0.023959400463635688 -0.0016377900701872211L -0.023905313011526912 -0.0014608779858300957L -0.02385743265073722 -0.0012821860466782397L -0.023815817716110833 -0.0011019319613341256L -0.0237805189090353 -0.0009203353416347322L -0.02375157923566968 -0.0007376174350883485L -0.023729033954548152 -0.0005540008553185632L -0.023712910533622934 -0.0003697093108438647L -0.023703228616798792 -0.00018496733252325575L -0.023700000000000002 -8.673617379884035e-19L -0.023703228616798792 0.00018496733252325401L -0.023712910533622934 0.00036970931084386385L -0.023729033954548152 0.0005540008553185632L -0.02375157923566968 0.0007376174350883467L -0.0237805189090353 0.0009203353416347313L -0.023815817716110833 0.001101931961334123L -0.02385743265073722 0.0012821860466782405L -0.023905313011526912 0.0014608779858300957L -0.023959400463635688 0.0016377900701872216L -0.024019629109834687 0.001812706759626045L -0.02408592557079603 0.0019854149451043347L -0.024158209074494216 0.002155704208301739L -0.024236391554614416 0.0023233670779821127L -0.024320377757847688 0.00248819928276522L -0.024410065359942477 0.0026499999999999987L -0.024505345090370945 0.0028085721004359855L -0.02460610086545828 0.002963722388394958L -0.02471220992981278 0.0031152618371501064L -0.024823543005884373 0.0032630058192259894L -0.02493996445146942 0.0034067743313386566L -0.02506133242496981 0.0035463922137019483L -0.025187499058205148 0.0036816893634326843L -0.025318310636567316 0.0038125009417948512L -0.02545360778629805 0.003938667575030189L -0.025593225668661342 0.004060035548530583L -0.025736994180774013 0.004176456994115624L -0.025884738162849894 0.004287790070187221L -0.026036277611605044 0.00439389913454172L -0.026191427899564017 0.004494654909629058L -0.026350000000000002 0.004589934640057526L -0.026511800717234777 0.004679622242152314L -0.02667663292201789 0.004763608445385584L -0.02684429579169826 0.004841790925505784L -0.027014585054895665 0.004914074429203973L -0.027187293240373958 0.0049803708901653134L -0.02736220992981278 0.005040599536364315L -0.027539122014169904 0.005094686988473088L -0.027717813953321763 0.00514256734926278L -0.027898068038665878 0.005184182283889169L -0.02807966465836527 0.005219481090964702L -0.028262382564911655 0.0052484207643303206L -0.028445999144681437 0.005270966045451848L -0.028630290689156138 0.005287089466377068L -0.02881503266747675 0.005296771383201208L -0.029 0.0053L -0.029184967332523255 0.005296771383201208L -0.029369709310843862 0.005287089466377068L -0.029554000855318563 0.005270966045451848L -0.029737617435088348 0.0052484207643303206L -0.029920335341634734 0.005219481090964702L -0.030101931961334125 0.005184182283889171L -0.03028218604667824 0.005142567349262782L -0.030460877985830095 0.005094686988473092L -0.030637790070187226 0.005040599536364313L -0.030812706759626045 0.0049803708901653134L -0.030985414945104334 0.004914074429203973L -0.03115570420830174 0.004841790925505784L -0.03132336707798211 0.004763608445385584L -0.03148819928276522 0.004679622242152314L -0.031650000000000005 0.004589934640057526L -0.031808572100435986 0.004494654909629058L -0.03196372238839496 0.004393899134541722L -0.032115261837150105 0.004287790070187223L -0.03226300581922599 0.004176456994115628L -0.03240677433133866 0.004060035548530583L -0.03254639221370195 0.003938667575030189L -0.03268168936343269 0.0038125009417948512L -0.03281250094179485 0.0036816893634326877L -0.03293866757503019 0.00354639221370195L -0.033060035548530584 0.00340677433133866L -0.03317645699411563 0.0032630058192259876L -0.03328779007018722 0.003115261837150108L -0.03339389913454172 0.0029637223883949614L -0.03349465490962906 0.0028085721004359873L -0.03358993464005752 0.002650000000000002L -0.03367962224215232 0.0024881992827652227L -0.03376360844538558 0.0023233670779821127L -0.03384179092550579 0.002155704208301741L -0.03391407442920397 0.0019854149451043347L -0.03398037089016531 0.0018127067596260486L -0.03404059953636431 0.0016377900701872216L -0.034094686988473094 0.001460877985830093L -0.034142567349262784 0.0012821860466782405L -0.03418418228388917 0.0011019319613341265L -0.034219481090964704 0.0009203353416347313L -0.03424842076433032 0.0007376174350883441L -0.03427096604545185 0.0005540008553185632L -0.03428708946637707 0.0003697093108438656L -0.03429677138320121 0.00018496733252325922L -0.034300000000000004 8.673617379884035e-19L -0.03429677138320121 -0.00018496733252325748L -0.03428708946637707 -0.000369709310843863L -0.03427096604545185 -0.0005540008553185614L -0.03424842076433032 -0.0007376174350883467L -0.034219481090964704 -0.0009203353416347287L -0.03418418228388917 -0.0011019319613341213L -0.034142567349262784 -0.001282186046678238L -0.034094686988473094 -0.0014608779858300974L -0.03404059953636432 -0.0016377900701872198L -0.03398037089016532 -0.0018127067596260408L -0.03391407442920397 -0.001985414945104333L -0.03384179092550579 -0.002155704208301744L -0.03376360844538558 -0.002323367077982111L -0.03367962224215232 -0.002488199282765219L -0.03358993464005752 -0.002650000000000001L -0.03349465490962906 -0.002808572100435985L -0.03339389913454172 -0.0029637223883949553L -0.03328779007018722 -0.003115261837150107L -0.03317645699411563 -0.00326300581922599L -0.033060035548530584 -0.003406774331338658L -0.032938667575030195 -0.0035463922137019465L -0.03281250094179486 -0.0036816893634326825L -0.03268168936343269 -0.0038125009417948495L -0.03254639221370195 -0.00393866757503019L -0.032406774331338664 -0.004060035548530582L -0.03226300581922599 -0.004176456994115624L -0.03211526183715011 -0.004287790070187221L -0.03196372238839496 -0.004393899134541719L -0.03180857210043599 -0.004494654909629055L -0.031650000000000005 -0.004589934640057523L -0.03148819928276522 -0.0046796222421523126L -0.03132336707798211 -0.004763608445385586L -0.031155704208301743 -0.004841790925505785L -0.030985414945104338 -0.004914074429203973L -0.030812706759626045 -0.004980370890165314L -0.030637790070187222 -0.005040599536364314L -0.0304608779858301 -0.005094686988473089L -0.03028218604667824 -0.005142567349262781L -0.03010193196133413 -0.005184182283889169L -0.029920335341634737 -0.005219481090964702L -0.02973761743508835 -0.005248420764330322L -0.029554000855318563 -0.005270966045451849L -0.029369709310843862 -0.005287089466377069L -0.029184967332523255 -0.005296771383201207L -0.029 -0.0053","pos":[-0.12,0.089565],"layers":["F.Cu"],"index":1},"PGND":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[-0.12,0.063975],"layers":["F.Cu"],"index":2},"AOUT1":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[-0.12,0.038385],"layers":["F.Cu"],"index":3},"AOUT2":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[-0.12,0.012795],"layers":["F.Cu"],"index":4},"BOUT2":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[-0.12,-0.012795],"layers":["F.Cu"],"index":5},"BOUT1":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[-0.12,-0.038385],"layers":["F.Cu"],"index":6},"GND1":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[-0.12,-0.063975],"layers":["F.Cu"],"index":7},"GND2":{"shape":"M -0.05999999999999999 0.09000000000000001L 0.060000000000000005 0.09000000000000001L 0.06000000000000002 -0.08999999999999998L -0.05999999999999996 -0.09000000000000001L -0.06000000000000002 0.08999999999999998","pos":[0,0],"layers":["F.Cu"],"index":17},"DVDD":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[-0.12,-0.089565],"layers":["F.Cu"],"index":8},"VREF":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,-0.089565],"layers":["F.Cu"],"index":9},"M0":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,-0.063975],"layers":["F.Cu"],"index":10},"DECAY":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,-0.038385],"layers":["F.Cu"],"index":11},"M1":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,-0.012795],"layers":["F.Cu"],"index":12},"STEP":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,0.012795],"layers":["F.Cu"],"index":13},"DIR":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,0.038385],"layers":["F.Cu"],"index":14},"EN":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,0.063975],"layers":["F.Cu"],"index":15},"SLEEP":{"shape":"M -0.029 0.0053000000000000035L 0.029 0.0053000000000000035L 0.029 -0.0052999999999999966L -0.029 -0.0053000000000000035L -0.029 0.0052999999999999966","pos":[0.12,0.089565],"layers":["F.Cu"],"index":16}};

// constants
const width = 1;
const height = 1;

/* -- DECLARE_PCB -- */
let board = new PCB();

let interior = geo.rectangle(width, height)

board.addShape("interior", interior);

/* -- ADD_COMPONENTS -- */

/* -- ADD_WIRES -- */

/* -- RENDER_PCB -- */
renderPCB({
  pcb: board,
  layerColors: {
    "interior": "#002d00ff",
    "B.Cu": "#ff4c007f",
    "F.Cu": "#ff8c00cc",
    "drill": "#ff3300e5",
    "padLabels": "#ffff99e5",
    "componentLabels": "#00e5e5e5",
  },
  limits: {
    x: [-width/2, width/2],
    y: [-height/2, height/2]
  },
  mm_per_unit: 25.4
});
`;function pf(e){Yt.error=e,Ot("RENDER")}class vC extends jP{constructor(){super(),Yt.storedPCB=this}}const PC=()=>Yt.codemirror.view.state.doc.toString(),CC=e=>({geo:rP,PCB:vC,via:MP,renderPCB:OC(e),renderShapes:mC,renderPath:gC,document:null,window:null,localStorage:null,Function:null,eval:null,pt:(t,i,n=-1,r=-1)=>{const o=Yt.pts.some(h=>h.start===n);if(n===-1||o)return[t,i];const s=PC().slice(n,r),a={pt:[t,i],start:n,end:r,text:s};return Yt.pts.push(a),[t,i]},path:(...t)=>t}),SC={INIT(e,t){Ot("RENDER"),t.codemirror=document.querySelector(".code-editor"),FP(t),new URL(window.location.href);const i=window.location.search,n=new URLSearchParams(i).get("code"),r=new URLSearchParams(i).get("file"),o=new URLSearchParams(i).get("bezier")==="false",s=new URLSearchParams(i).get("grid")==="false";if(o&&(t.viewHandles=!1),s&&(t.grid=!1),!n)if(r){let a=r;r.startsWith("http")||(a=`examples/${r}`),yC(a,t)}else{const a=window.localStorage.getItem("svg-pcb");t.codemirror.view.dispatch({changes:{from:0,insert:a!=null?a:""}}),Ot("RUN"),document.querySelector(".center-button").click()}Ot("RENDER")},RUN({dragging:e=!1,flatten:t=!1}={},i){var n;i.paths=[],i.pts=[],i.error="";const r=i.codemirror.view.state.doc;let o=r.toString();const s=pc(i.codemirror.view.state,r.length,1e4);if(!e){let m=[],v=[];try{const S=fC(o,e);m=S.footprints,v=(n=S.layers)!=null?n:[]}catch(S){console.error(S),pf(S)}i.footprints=m,i.layers=v}const{pts:a,paths:h}=ef(i,s),c=[];let d=0;a.sort((m,v)=>m[0]-v[0]).forEach((m,v)=>{const[S,g]=m;c.push(o.substr(d,S-d));const y=o.substr(S,g-S),P=y.indexOf("("),w=`${y.slice(0,-1)}, ${S+P+1}, ${g-1})`;c.push(w),d=g,v===a.length-1&&c.push(o.substr(g))}),c.length>0&&(o=c.join(""));const f=CC(t);try{new Function(...Object.keys(f),o)(...Object.values(f))}catch(m){console.error("prog erred",m),pf(m)}Ot("RENDER")},NEW_FILE(e,t){Ot("UPLOAD_JS",{text:xC})},UPLOAD_COMP({text:e,name:t},i){var n;e=e.replaceAll("$",""),e=JSON.stringify(iC(e)),e=`const temp_name = ${e}
`;const r=i.codemirror.view.state.doc.toString(),o=(n=ta("DECLARE_COMPONENTS",r))!=null?n:0;i.codemirror.view.dispatch({changes:{from:o,insert:e}}),i.codemirror.foldRange(0,e.length),Ot("RENDER")},UPLOAD_JS({text:e},t){const i=t.codemirror.view.state.doc.toString().length;t.codemirror.view.dispatch({changes:{from:0,to:i,insert:e}}),Ot("RUN"),document.querySelector(".center-button").click()},ADD_IMPORT({text:e,name:t},i){var n;if(i.footprints.map(s=>s[0]).includes(t))return;const r=i.codemirror.view.state.doc.toString(),o=(n=ta("DECLARE_COMPONENTS",r))!=null?n:0;e=`const ${t} = ${e}
`,i.codemirror.view.dispatch({changes:{from:o,insert:e}}),Ot("RUN")},TRANSLATE({x:e,y:t,index:i},n){n.transformUpdate(e,t),Ot("RUN",{dragging:!0})},RENDER(){Cf(fP(Yt),document.getElementById("root"))}};function Ot(e,t={}){const i=SC[e];if(i)return i(t,Yt);console.log("Action not recongnized:",e)}window.addEventListener("load",()=>{Ot("INIT")})});_S();
